(function(){function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass3(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf2(e,t)}function _setPrototypeOf2(e,t){return _setPrototypeOf2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf2(e,t)}function _createSuper2(e){var t=_isNativeReflectConstruct2();return function(){var r,n=_getPrototypeOf3(e);if(t){var i=_getPrototypeOf3(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn3(this,r)}}function _possibleConstructorReturn3(e,t){if(t&&("object"===_typeof2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized3(e)}function _assertThisInitialized3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf3(e){return _getPrototypeOf3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf3(e)}function _typeof2(e){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof2(e)}System.register([],(function(exports){"use strict";return{execute:function execute(){var _ENCODINGS,_Object$freeze,_Object$freeze2,_Object$freeze3,_Object$freeze4,_Object$freeze5,_Object$freeze6;exports({f:observer,m:makeObservable,p:Vector3});var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var _global={exports:{}},global$1b=_global.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global$1b);var hasOwnProperty$2={}.hasOwnProperty,_has=function(e,t){return hasOwnProperty$2.call(e,t)},_fails=function(t){try{return!!t()}catch(e){return!0}},_descriptors=!_fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_core={exports:{}},core$6=_core.exports={version:"2.6.12"};"number"==typeof __e&&(__e=core$6);var _objectDp={},_isObject=function(e){return"object"===_typeof2(e)?null!==e:"function"==typeof e},isObject$N=_isObject,_anObject=function(e){if(!isObject$N(e))throw TypeError(e+" is not an object!");return e},isObject$M=_isObject,document$5=_global.exports.document,is$1=isObject$M(document$5)&&isObject$M(document$5.createElement),_domCreate=function(e){return is$1?document$5.createElement(e):{}},_ie8DomDefine=!_descriptors&&!_fails((function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a})),isObject$L=_isObject,_toPrimitive=function(e,t){if(!isObject$L(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject$L(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject$L(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject$L(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},anObject$T=_anObject,IE8_DOM_DEFINE$3=_ie8DomDefine,toPrimitive$d=_toPrimitive,dP$b=Object.defineProperty;_objectDp.f=_descriptors?Object.defineProperty:function(t,r,n){if(anObject$T(t),r=toPrimitive$d(r,!0),anObject$T(n),IE8_DOM_DEFINE$3)try{return dP$b(t,r,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t};var _propertyDesc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},dP$a=_objectDp,createDesc$4=_propertyDesc,_hide=_descriptors?function(e,t,r){return dP$a.f(e,t,createDesc$4(1,r))}:function(e,t,r){return e[t]=r,e},_redefine={exports:{}},id$6=0,px$1=Math.random(),_uid=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++id$6+px$1).toString(36))},_shared={exports:{}},_library=!1,core$5=_core.exports,global$1a=_global.exports,SHARED$1="__core-js_shared__",store$7=global$1a[SHARED$1]||(global$1a[SHARED$1]={});(_shared.exports=function(e,t){return store$7[e]||(store$7[e]=void 0!==t?t:{})})("versions",[]).push({version:core$5.version,mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var _functionToString=_shared.exports("native-function-to-string",Function.toString),global$19=_global.exports,hide$7=_hide,has$c=_has,SRC=_uid("src"),$toString$2=_functionToString,TO_STRING$3="toString",TPL=(""+$toString$2).split(TO_STRING$3);_core.exports.inspectSource=function(e){return $toString$2.call(e)},(_redefine.exports=function(e,t,r,n){var i="function"==typeof r;i&&(has$c(r,"name")||hide$7(r,"name",t)),e[t]!==r&&(i&&(has$c(r,SRC)||hide$7(r,SRC,e[t]?""+e[t]:TPL.join(String(t)))),e===global$19?e[t]=r:n?e[t]?e[t]=r:hide$7(e,t,r):(delete e[t],hide$7(e,t,r)))})(Function.prototype,TO_STRING$3,(function(){return"function"==typeof this&&this[SRC]||$toString$2.call(this)}));var _aFunction=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},aFunction$f=_aFunction,_ctx=function(e,t,r){if(aFunction$f(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},global$18=_global.exports,core$4=_core.exports,hide$6=_hide,redefine$i=_redefine.exports,ctx$9=_ctx,PROTOTYPE$4="prototype",$export$23=function e(t,r,n){var i,o,a,s,c=t&e.F,u=t&e.G,l=t&e.P,f=t&e.B,h=u?global$18:t&e.S?global$18[r]||(global$18[r]={}):(global$18[r]||{})[PROTOTYPE$4],p=u?core$4:core$4[r]||(core$4[r]={}),d=p[PROTOTYPE$4]||(p[PROTOTYPE$4]={});for(i in u&&(n=r),n)a=((o=!c&&h&&void 0!==h[i])?h:n)[i],s=f&&o?ctx$9(a,global$18):l&&"function"==typeof a?ctx$9(Function.call,a):a,h&&redefine$i(h,i,a,t&e.U),p[i]!=a&&hide$6(p,i,s),l&&d[i]!=a&&(d[i]=a)};global$18.core=core$4,$export$23.F=1,$export$23.G=2,$export$23.S=4,$export$23.P=8,$export$23.B=16,$export$23.W=32,$export$23.U=64,$export$23.R=128;var _export$1=$export$23,_meta={exports:{}},META$1=_uid("meta"),isObject$K=_isObject,has$b=_has,setDesc=_objectDp.f,id$5=0,isExtensible$3=Object.isExtensible||function(){return!0},FREEZE=!_fails((function(){return isExtensible$3(Object.preventExtensions({}))})),setMeta=function(e){setDesc(e,META$1,{value:{i:"O"+ ++id$5,w:{}}})},fastKey$3=function(e,t){if(!isObject$K(e))return"symbol"==_typeof2(e)?e:("string"==typeof e?"S":"P")+e;if(!has$b(e,META$1)){if(!isExtensible$3(e))return"F";if(!t)return"E";setMeta(e)}return e[META$1].i},getWeak$2=function(e,t){if(!has$b(e,META$1)){if(!isExtensible$3(e))return!0;if(!t)return!1;setMeta(e)}return e[META$1].w},onFreeze$1=function(e){return FREEZE&&meta$6.NEED&&isExtensible$3(e)&&!has$b(e,META$1)&&setMeta(e),e},meta$6=_meta.exports={KEY:META$1,NEED:!1,fastKey:fastKey$3,getWeak:getWeak$2,onFreeze:onFreeze$1},_wks={exports:{}},store$6=_shared.exports("wks"),uid$8=_uid,Symbol$2=_global.exports.Symbol,USE_SYMBOL="function"==typeof Symbol$2,$exports=_wks.exports=function(e){return store$6[e]||(store$6[e]=USE_SYMBOL&&Symbol$2[e]||(USE_SYMBOL?Symbol$2:uid$8)("Symbol."+e))};$exports.store=store$6;var def=_objectDp.f,has$a=_has,TAG$2=_wks.exports("toStringTag"),_setToStringTag=function(e,t,r){e&&!has$a(e=r?e:e.prototype,TAG$2)&&def(e,TAG$2,{configurable:!0,value:t})},_wksExt={};_wksExt.f=_wks.exports;var global$17=_global.exports,core$3=_core.exports,wksExt$1=_wksExt,defineProperty$a=_objectDp.f,_wksDefine=function(e){var t=core$3.Symbol||(core$3.Symbol=global$17.Symbol||{});"_"==e.charAt(0)||e in t||defineProperty$a(t,e,{value:wksExt$1.f(e)})},toString$e={}.toString,_cof=function(e){return toString$e.call(e).slice(8,-1)},cof$7=_cof,_iobject=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==cof$7(e)?e.split(""):Object(e)},_defined=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},IObject$3=_iobject,defined$9=_defined,_toIobject=function(e){return IObject$3(defined$9(e))},ceil$1=Math.ceil,floor$7=Math.floor,_toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor$7:ceil$1)(e)},toInteger$9=_toInteger,min$5=Math.min,_toLength=function(e){return e>0?min$5(toInteger$9(e),9007199254740991):0},toInteger$8=_toInteger,max$5=Math.max,min$4=Math.min,_toAbsoluteIndex=function(e,t){return(e=toInteger$8(e))<0?max$5(e+t,0):min$4(e,t)},toIObject$b=_toIobject,toLength$p=_toLength,toAbsoluteIndex$a=_toAbsoluteIndex,_arrayIncludes=function(e){return function(t,r,n){var i,o=toIObject$b(t),a=toLength$p(o.length),s=toAbsoluteIndex$a(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},shared$7=_shared.exports("keys"),uid$7=_uid,_sharedKey=function(e){return shared$7[e]||(shared$7[e]=uid$7(e))},has$9=_has,toIObject$a=_toIobject,arrayIndexOf$1=_arrayIncludes(!1),IE_PROTO$4=_sharedKey("IE_PROTO"),_objectKeysInternal=function(e,t){var r,n=toIObject$a(e),i=0,o=[];for(r in n)r!=IE_PROTO$4&&has$9(n,r)&&o.push(r);for(;t.length>i;)has$9(n,r=t[i++])&&(~arrayIndexOf$1(o,r)||o.push(r));return o},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$keys$3=_objectKeysInternal,enumBugKeys$5=_enumBugKeys,_objectKeys=Object.keys||function(e){return $keys$3(e,enumBugKeys$5)},_objectGops={};_objectGops.f=Object.getOwnPropertySymbols;var _objectPie={};_objectPie.f={}.propertyIsEnumerable;var getKeys$4=_objectKeys,gOPS$2=_objectGops,pIE$2=_objectPie,_enumKeys=function(e){var t=getKeys$4(e),r=gOPS$2.f;if(r)for(var n,i=r(e),o=pIE$2.f,a=0;i.length>a;)o.call(e,n=i[a++])&&t.push(n);return t},cof$6=_cof,_isArray=Array.isArray||function(e){return"Array"==cof$6(e)},defined$8=_defined,_toObject=function(e){return Object(defined$8(e))},dP$9=_objectDp,anObject$S=_anObject,getKeys$3=_objectKeys,_objectDps=_descriptors?Object.defineProperties:function(e,t){anObject$S(e);for(var r,n=getKeys$3(t),i=n.length,o=0;i>o;)dP$9.f(e,r=n[o++],t[r]);return e},document$4=_global.exports.document,_html=document$4&&document$4.documentElement,anObject$R=_anObject,dPs=_objectDps,enumBugKeys$4=_enumBugKeys,IE_PROTO$3=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$3="prototype",_createDict=function(){var e,t=_domCreate("iframe"),r=enumBugKeys$4.length;for(t.style.display="none",_html.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),_createDict=e.F;r--;)delete _createDict[PROTOTYPE$3][enumBugKeys$4[r]];return _createDict()},_objectCreate=Object.create||function(e,t){var r;return null!==e?(Empty[PROTOTYPE$3]=anObject$R(e),r=new Empty,Empty[PROTOTYPE$3]=null,r[IE_PROTO$3]=e):r=_createDict(),void 0===t?r:dPs(r,t)},_objectGopnExt={},_objectGopn={},$keys$2=_objectKeysInternal,hiddenKeys$6=_enumBugKeys.concat("length","prototype");_objectGopn.f=Object.getOwnPropertyNames||function(e){return $keys$2(e,hiddenKeys$6)};var toIObject$9=_toIobject,gOPN$5=_objectGopn.f,toString$d={}.toString,windowNames$1="object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames$1=function(t){try{return gOPN$5(t)}catch(e){return windowNames$1.slice()}};_objectGopnExt.f=function(e){return windowNames$1&&"[object Window]"==toString$d.call(e)?getWindowNames$1(e):gOPN$5(toIObject$9(e))};var _objectGopd={},pIE$1=_objectPie,createDesc$3=_propertyDesc,toIObject$8=_toIobject,toPrimitive$c=_toPrimitive,has$8=_has,IE8_DOM_DEFINE$2=_ie8DomDefine,gOPD$8=Object.getOwnPropertyDescriptor;_objectGopd.f=_descriptors?gOPD$8:function(t,r){if(t=toIObject$8(t),r=toPrimitive$c(r,!0),IE8_DOM_DEFINE$2)try{return gOPD$8(t,r)}catch(e){}if(has$8(t,r))return createDesc$3(!pIE$1.f.call(t,r),t[r])};var global$16=_global.exports,has$7=_has,DESCRIPTORS$k=_descriptors,$export$22=_export$1,redefine$h=_redefine.exports,META=_meta.exports.KEY,$fails$2=_fails,shared$6=_shared.exports,setToStringTag$8=_setToStringTag,uid$6=_uid,wks$3=_wks.exports,wksExt=_wksExt,wksDefine=_wksDefine,enumKeys=_enumKeys,isArray$6=_isArray,anObject$Q=_anObject,isObject$J=_isObject,toObject$t=_toObject,toIObject$7=_toIobject,toPrimitive$b=_toPrimitive,createDesc$2=_propertyDesc,_create=_objectCreate,gOPNExt=_objectGopnExt,$GOPD$1=_objectGopd,$GOPS=_objectGops,$DP$1=_objectDp,$keys$1=_objectKeys,gOPD$7=$GOPD$1.f,dP$8=$DP$1.f,gOPN$4=gOPNExt.f,$Symbol=global$16.Symbol,$JSON=global$16.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE$2="prototype",HIDDEN=wks$3("_hidden"),TO_PRIMITIVE$2=wks$3("toPrimitive"),isEnum$1={}.propertyIsEnumerable,SymbolRegistry=shared$6("symbol-registry"),AllSymbols=shared$6("symbols"),OPSymbols=shared$6("op-symbols"),ObjectProto$1=Object[PROTOTYPE$2],USE_NATIVE$1="function"==typeof $Symbol&&!!$GOPS.f,QObject=global$16.QObject,setter=!QObject||!QObject[PROTOTYPE$2]||!QObject[PROTOTYPE$2].findChild,setSymbolDesc=DESCRIPTORS$k&&$fails$2((function(){return 7!=_create(dP$8({},"a",{get:function(){return dP$8(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=gOPD$7(ObjectProto$1,t);n&&delete ObjectProto$1[t],dP$8(e,t,r),n&&e!==ObjectProto$1&&dP$8(ObjectProto$1,t,n)}:dP$8,wrap$2=function(e){var t=AllSymbols[e]=_create($Symbol[PROTOTYPE$2]);return t._k=e,t},isSymbol$5=USE_NATIVE$1&&"symbol"==_typeof2($Symbol.iterator)?function(e){return"symbol"==_typeof2(e)}:function(e){return e instanceof $Symbol},$defineProperty$4=function(e,t,r){return e===ObjectProto$1&&$defineProperty$4(OPSymbols,t,r),anObject$Q(e),t=toPrimitive$b(t,!0),anObject$Q(r),has$7(AllSymbols,t)?(r.enumerable?(has$7(e,HIDDEN)&&e[HIDDEN][t]&&(e[HIDDEN][t]=!1),r=_create(r,{enumerable:createDesc$2(0,!1)})):(has$7(e,HIDDEN)||dP$8(e,HIDDEN,createDesc$2(1,{})),e[HIDDEN][t]=!0),setSymbolDesc(e,t,r)):dP$8(e,t,r)},$defineProperties=function(e,t){anObject$Q(e);for(var r,n=enumKeys(t=toIObject$7(t)),i=0,o=n.length;o>i;)$defineProperty$4(e,r=n[i++],t[r]);return e},$create=function(e,t){return void 0===t?_create(e):$defineProperties(_create(e),t)},$propertyIsEnumerable$2=function(e){var t=isEnum$1.call(this,e=toPrimitive$b(e,!0));return!(this===ObjectProto$1&&has$7(AllSymbols,e)&&!has$7(OPSymbols,e))&&(!(t||!has$7(this,e)||!has$7(AllSymbols,e)||has$7(this,HIDDEN)&&this[HIDDEN][e])||t)},$getOwnPropertyDescriptor$2=function(e,t){if(e=toIObject$7(e),t=toPrimitive$b(t,!0),e!==ObjectProto$1||!has$7(AllSymbols,t)||has$7(OPSymbols,t)){var r=gOPD$7(e,t);return!r||!has$7(AllSymbols,t)||has$7(e,HIDDEN)&&e[HIDDEN][t]||(r.enumerable=!0),r}},$getOwnPropertyNames$1=function(e){for(var t,r=gOPN$4(toIObject$7(e)),n=[],i=0;r.length>i;)has$7(AllSymbols,t=r[i++])||t==HIDDEN||t==META||n.push(t);return n},$getOwnPropertySymbols=function(e){for(var t,r=e===ObjectProto$1,n=gOPN$4(r?OPSymbols:toIObject$7(e)),i=[],o=0;n.length>o;)!has$7(AllSymbols,t=n[o++])||r&&!has$7(ObjectProto$1,t)||i.push(AllSymbols[t]);return i};USE_NATIVE$1||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var e=uid$6(arguments.length>0?arguments[0]:void 0),t=function t(r){this===ObjectProto$1&&t.call(OPSymbols,r),has$7(this,HIDDEN)&&has$7(this[HIDDEN],e)&&(this[HIDDEN][e]=!1),setSymbolDesc(this,e,createDesc$2(1,r))};return DESCRIPTORS$k&&setter&&setSymbolDesc(ObjectProto$1,e,{configurable:!0,set:t}),wrap$2(e)},redefine$h($Symbol[PROTOTYPE$2],"toString",(function(){return this._k})),$GOPD$1.f=$getOwnPropertyDescriptor$2,$DP$1.f=$defineProperty$4,_objectGopn.f=gOPNExt.f=$getOwnPropertyNames$1,_objectPie.f=$propertyIsEnumerable$2,$GOPS.f=$getOwnPropertySymbols,DESCRIPTORS$k&&!_library&&redefine$h(ObjectProto$1,"propertyIsEnumerable",$propertyIsEnumerable$2,!0),wksExt.f=function(e){return wrap$2(wks$3(e))}),$export$22($export$22.G+$export$22.W+$export$22.F*!USE_NATIVE$1,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j$4=0;es6Symbols.length>j$4;)wks$3(es6Symbols[j$4++]);for(var wellKnownSymbols=$keys$1(wks$3.store),k$2=0;wellKnownSymbols.length>k$2;)wksDefine(wellKnownSymbols[k$2++]);$export$22($export$22.S+$export$22.F*!USE_NATIVE$1,"Symbol",{for:function(e){return has$7(SymbolRegistry,e+="")?SymbolRegistry[e]:SymbolRegistry[e]=$Symbol(e)},keyFor:function(e){if(!isSymbol$5(e))throw TypeError(e+" is not a symbol!");for(var t in SymbolRegistry)if(SymbolRegistry[t]===e)return t},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export$22($export$22.S+$export$22.F*!USE_NATIVE$1,"Object",{create:$create,defineProperty:$defineProperty$4,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor$2,getOwnPropertyNames:$getOwnPropertyNames$1,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES$3=$fails$2((function(){$GOPS.f(1)}));$export$22($export$22.S+$export$22.F*FAILS_ON_PRIMITIVES$3,"Object",{getOwnPropertySymbols:function(e){return $GOPS.f(toObject$t(e))}}),$JSON&&$export$22($export$22.S+$export$22.F*(!USE_NATIVE$1||$fails$2((function(){var e=$Symbol();return"[null]"!=_stringify([e])||"{}"!=_stringify({a:e})||"{}"!=_stringify(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(isObject$J(t)||void 0!==e)&&!isSymbol$5(e))return isArray$6(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!isSymbol$5(t))return t}),n[1]=t,_stringify.apply($JSON,n)}}),$Symbol[PROTOTYPE$2][TO_PRIMITIVE$2]||_hide($Symbol[PROTOTYPE$2],TO_PRIMITIVE$2,$Symbol[PROTOTYPE$2].valueOf),setToStringTag$8($Symbol,"Symbol"),setToStringTag$8(Math,"Math",!0),setToStringTag$8(global$16.JSON,"JSON",!0);var $export$21=_export$1;$export$21($export$21.S,"Object",{create:_objectCreate});var $export$20=_export$1;$export$20($export$20.S+$export$20.F*!_descriptors,"Object",{defineProperty:_objectDp.f});var $export$1$=_export$1;$export$1$($export$1$.S+$export$1$.F*!_descriptors,"Object",{defineProperties:_objectDps});var $export$1_=_export$1,core$2=_core.exports,fails$F=_fails,_objectSap=function(e,t){var r=(core$2.Object||{})[e]||Object[e],n={};n[e]=t(r),$export$1_($export$1_.S+$export$1_.F*fails$F((function(){r(1)})),"Object",n)},toIObject$6=_toIobject,$getOwnPropertyDescriptor$1=_objectGopd.f;_objectSap("getOwnPropertyDescriptor",(function(){return function(e,t){return $getOwnPropertyDescriptor$1(toIObject$6(e),t)}}));var has$6=_has,toObject$s=_toObject,IE_PROTO$2=_sharedKey("IE_PROTO"),ObjectProto=Object.prototype,_objectGpo=Object.getPrototypeOf||function(e){return e=toObject$s(e),has$6(e,IE_PROTO$2)?e[IE_PROTO$2]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectProto:null},toObject$r=_toObject,$getPrototypeOf=_objectGpo;_objectSap("getPrototypeOf",(function(){return function(e){return $getPrototypeOf(toObject$r(e))}}));var toObject$q=_toObject,$keys=_objectKeys;_objectSap("keys",(function(){return function(e){return $keys(toObject$q(e))}})),_objectSap("getOwnPropertyNames",(function(){return _objectGopnExt.f}));var isObject$I=_isObject,meta$5=_meta.exports.onFreeze;_objectSap("freeze",(function(e){return function(t){return e&&isObject$I(t)?e(meta$5(t)):t}}));var isObject$H=_isObject,meta$4=_meta.exports.onFreeze;_objectSap("seal",(function(e){return function(t){return e&&isObject$H(t)?e(meta$4(t)):t}}));var isObject$G=_isObject,meta$3=_meta.exports.onFreeze;_objectSap("preventExtensions",(function(e){return function(t){return e&&isObject$G(t)?e(meta$3(t)):t}}));var isObject$F=_isObject;_objectSap("isFrozen",(function(e){return function(t){return!isObject$F(t)||!!e&&e(t)}}));var isObject$E=_isObject;_objectSap("isSealed",(function(e){return function(t){return!isObject$E(t)||!!e&&e(t)}}));var isObject$D=_isObject;_objectSap("isExtensible",(function(e){return function(t){return!!isObject$D(t)&&(!e||e(t))}}));var DESCRIPTORS$j=_descriptors,getKeys$2=_objectKeys,gOPS$1=_objectGops,pIE=_objectPie,toObject$p=_toObject,IObject$2=_iobject,$assign$1=Object.assign,_objectAssign=!$assign$1||_fails((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=$assign$1({},e)[r]||Object.keys($assign$1({},t)).join("")!=n}))?function(e,t){for(var r=toObject$p(e),n=arguments.length,i=1,o=gOPS$1.f,a=pIE.f;n>i;)for(var s,c=IObject$2(arguments[i++]),u=o?getKeys$2(c).concat(o(c)):getKeys$2(c),l=u.length,f=0;l>f;)s=u[f++],DESCRIPTORS$j&&!a.call(c,s)||(r[s]=c[s]);return r}:$assign$1,$export$1Z=_export$1;$export$1Z($export$1Z.S+$export$1Z.F,"Object",{assign:_objectAssign});var _sameValue=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},$export$1Y=_export$1;$export$1Y($export$1Y.S,"Object",{is:_sameValue});var isObject$C=_isObject,anObject$P=_anObject,check$1=function(e,t){if(anObject$P(e),!isObject$C(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},_setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return check$1(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:check$1},$export$1X=_export$1;$export$1X($export$1X.S,"Object",{setPrototypeOf:_setProto.set});var cof$5=_cof,TAG$1=_wks.exports("toStringTag"),ARG="Arguments"==cof$5(function(){return arguments}()),tryGet$1=function(t,r){try{return t[r]}catch(e){}},_classof=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet$1(t=Object(e),TAG$1))?r:ARG?cof$5(t):"Object"==(n=cof$5(t))&&"function"==typeof t.callee?"Arguments":n},classof$g=_classof,test$3={};test$3[_wks.exports("toStringTag")]="z",test$3+""!="[object z]"&&_redefine.exports(Object.prototype,"toString",(function(){return"[object "+classof$g(this)+"]"}),!0);var _invoke=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},aFunction$e=_aFunction,isObject$B=_isObject,invoke$1=_invoke,arraySlice$9=[].slice,factories$1={},construct$2=function(e,t,r){if(!(t in factories$1)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";factories$1[t]=Function("F,a","return new F("+n.join(",")+")")}return factories$1[t](e,r)},_bind=Function.bind||function(e){var t=aFunction$e(this),r=arraySlice$9.call(arguments,1),n=function n(){var i=r.concat(arraySlice$9.call(arguments));return this instanceof n?construct$2(t,i.length,i):invoke$1(t,i,e)};return isObject$B(t.prototype)&&(n.prototype=t.prototype),n},$export$1W=_export$1;$export$1W($export$1W.P,"Function",{bind:_bind});var dP$7=_objectDp.f,FProto=Function.prototype,nameRE$1=/^\s*function ([^ (]*)/,NAME$2="name";NAME$2 in FProto||_descriptors&&dP$7(FProto,NAME$2,{configurable:!0,get:function(){try{return(""+this).match(nameRE$1)[1]}catch(e){return""}}});var isObject$A=_isObject,getPrototypeOf$c=_objectGpo,HAS_INSTANCE=_wks.exports("hasInstance"),FunctionProto=Function.prototype;HAS_INSTANCE in FunctionProto||_objectDp.f(FunctionProto,HAS_INSTANCE,{value:function(e){if("function"!=typeof this||!isObject$A(e))return!1;if(!isObject$A(this.prototype))return e instanceof this;for(;e=getPrototypeOf$c(e);)if(this.prototype===e)return!0;return!1}});var _stringWs="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",$export$1V=_export$1,defined$7=_defined,fails$E=_fails,spaces=_stringWs,space="["+spaces+"]",non="​",ltrim$1=RegExp("^"+space+space+"*"),rtrim$1=RegExp(space+space+"*$"),exporter=function(e,t,r){var n={},i=fails$E((function(){return!!spaces[e]()||non[e]()!=non})),o=n[e]=i?t(trim$1):spaces[e];r&&(n[r]=o),$export$1V($export$1V.P+$export$1V.F*i,"String",n)},trim$1=exporter.trim=function(e,t){return e=String(defined$7(e)),1&t&&(e=e.replace(ltrim$1,"")),2&t&&(e=e.replace(rtrim$1,"")),e},_stringTrim=exporter,$parseInt$2=_global.exports.parseInt,$trim$2=_stringTrim.trim,ws=_stringWs,hex=/^[-+]?0[xX]/,_parseInt=8!==$parseInt$2(ws+"08")||22!==$parseInt$2(ws+"0x16")?function(e,t){var r=$trim$2(String(e),3);return $parseInt$2(r,t>>>0||(hex.test(r)?16:10))}:$parseInt$2,$export$1U=_export$1,$parseInt$1=_parseInt;$export$1U($export$1U.G+$export$1U.F*(parseInt!=$parseInt$1),{parseInt:$parseInt$1});var $parseFloat$2=_global.exports.parseFloat,$trim$1=_stringTrim.trim,_parseFloat=1/$parseFloat$2(_stringWs+"-0")!=-1/0?function(e){var t=$trim$1(String(e),3),r=$parseFloat$2(t);return 0===r&&"-"==t.charAt(0)?-0:r}:$parseFloat$2,$export$1T=_export$1,$parseFloat$1=_parseFloat;$export$1T($export$1T.G+$export$1T.F*(parseFloat!=$parseFloat$1),{parseFloat:$parseFloat$1});var isObject$z=_isObject,setPrototypeOf$4=_setProto.set,_inheritIfRequired=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&isObject$z(n)&&setPrototypeOf$4&&setPrototypeOf$4(e,n),e},global$15=_global.exports,has$5=_has,cof$4=_cof,inheritIfRequired$5=_inheritIfRequired,toPrimitive$a=_toPrimitive,fails$D=_fails,gOPN$3=_objectGopn.f,gOPD$6=_objectGopd.f,dP$6=_objectDp.f,$trim=_stringTrim.trim,NUMBER$2="Number",$Number=global$15[NUMBER$2],Base$1=$Number,proto$4=$Number.prototype,BROKEN_COF=cof$4(_objectCreate(proto$4))==NUMBER$2,TRIM="trim"in String.prototype,toNumber$1=function(e){var t=toPrimitive$a(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=TRIM?t.trim():$trim(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,s=t.slice(2),c=0,u=s.length;c<u;c++)if((a=s.charCodeAt(c))<48||a>i)return NaN;return parseInt(s,n)}}return+t};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof $Number&&(BROKEN_COF?fails$D((function(){proto$4.valueOf.call(r)})):cof$4(r)!=NUMBER$2)?inheritIfRequired$5(new Base$1(toNumber$1(t)),r,$Number):toNumber$1(t)};for(var keys$4=_descriptors?gOPN$3(Base$1):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j$3=0,key$2;keys$4.length>j$3;j$3++)has$5(Base$1,key$2=keys$4[j$3])&&!has$5($Number,key$2)&&dP$6($Number,key$2,gOPD$6(Base$1,key$2));$Number.prototype=proto$4,proto$4.constructor=$Number,_redefine.exports(global$15,NUMBER$2,$Number)}var cof$3=_cof,_aNumberValue=function(e,t){if("number"!=typeof e&&"Number"!=cof$3(e))throw TypeError(t);return+e},toInteger$7=_toInteger,defined$6=_defined,_stringRepeat=function(e){var t=String(defined$6(this)),r="",n=toInteger$7(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},$export$1S=_export$1,toInteger$6=_toInteger,aNumberValue$1=_aNumberValue,repeat$3=_stringRepeat,$toFixed=1..toFixed,floor$6=Math.floor,data$1=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",ZERO="0",multiply$1=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*data$1[r],data$1[r]=n%1e7,n=floor$6(n/1e7)},divide$1=function(e){for(var t=6,r=0;--t>=0;)r+=data$1[t],data$1[t]=floor$6(r/e),r=r%e*1e7},numToString=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==data$1[e]){var r=String(data$1[e]);t=""===t?r:t+repeat$3.call(ZERO,7-r.length)+r}return t},pow$2=function e(t,r,n){return 0===r?n:r%2==1?e(t,r-1,n*t):e(t*t,r/2,n)},log$1=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};$export$1S($export$1S.P+$export$1S.F*(!!$toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!_fails((function(){$toFixed.call({})}))),"Number",{toFixed:function(e){var t,r,n,i,o=aNumberValue$1(this,ERROR),a=toInteger$6(e),s="",c=ZERO;if(a<0||a>20)throw RangeError(ERROR);if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(s="-",o=-o),o>1e-21)if(r=(t=log$1(o*pow$2(2,69,1))-69)<0?o*pow$2(2,-t,1):o/pow$2(2,t,1),r*=4503599627370496,(t=52-t)>0){for(multiply$1(0,r),n=a;n>=7;)multiply$1(1e7,0),n-=7;for(multiply$1(pow$2(10,n,1),0),n=t-1;n>=23;)divide$1(1<<23),n-=23;divide$1(1<<n),multiply$1(1,1),divide$1(2),c=numToString()}else multiply$1(0,r),multiply$1(1<<-t,0),c=numToString()+repeat$3.call(ZERO,a);return c=a>0?s+((i=c.length)<=a?"0."+repeat$3.call(ZERO,a-i)+c:c.slice(0,i-a)+"."+c.slice(i-a)):s+c}});var $export$1R=_export$1,$fails$1=_fails,aNumberValue=_aNumberValue,$toPrecision=1..toPrecision;$export$1R($export$1R.P+$export$1R.F*($fails$1((function(){return"1"!==$toPrecision.call(1,void 0)}))||!$fails$1((function(){$toPrecision.call({})}))),"Number",{toPrecision:function(e){var t=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return void 0===e?$toPrecision.call(t):$toPrecision.call(t,e)}});var $export$1Q=_export$1;$export$1Q($export$1Q.S,"Number",{EPSILON:Math.pow(2,-52)});var $export$1P=_export$1,_isFinite=_global.exports.isFinite;$export$1P($export$1P.S,"Number",{isFinite:function(e){return"number"==typeof e&&_isFinite(e)}});var isObject$y=_isObject,floor$5=Math.floor,_isInteger=function(e){return!isObject$y(e)&&isFinite(e)&&floor$5(e)===e},$export$1O=_export$1;$export$1O($export$1O.S,"Number",{isInteger:_isInteger});var $export$1N=_export$1;$export$1N($export$1N.S,"Number",{isNaN:function(e){return e!=e}});var $export$1M=_export$1,isInteger=_isInteger,abs$1=Math.abs;$export$1M($export$1M.S,"Number",{isSafeInteger:function(e){return isInteger(e)&&abs$1(e)<=9007199254740991}});var $export$1L=_export$1;$export$1L($export$1L.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});var $export$1K=_export$1;$export$1K($export$1K.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var $export$1J=_export$1,$parseFloat=_parseFloat;$export$1J($export$1J.S+$export$1J.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat});var $export$1I=_export$1,$parseInt=_parseInt;$export$1I($export$1I.S+$export$1I.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt});var _mathLog1p=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)},$export$1H=_export$1,log1p=_mathLog1p,sqrt=Math.sqrt,$acosh=Math.acosh;$export$1H($export$1H.S+$export$1H.F*!($acosh&&710==Math.floor($acosh(Number.MAX_VALUE))&&$acosh(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:log1p(e-1+sqrt(e-1)*sqrt(e+1))}});var $export$1G=_export$1,$asinh=Math.asinh;function asinh(e){return isFinite(e=+e)&&0!=e?e<0?-asinh(-e):Math.log(e+Math.sqrt(e*e+1)):e}$export$1G($export$1G.S+$export$1G.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:asinh});var $export$1F=_export$1,$atanh=Math.atanh;$export$1F($export$1F.S+$export$1F.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}});var _mathSign=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1},$export$1E=_export$1,sign$2=_mathSign;$export$1E($export$1E.S,"Math",{cbrt:function(e){return sign$2(e=+e)*Math.pow(Math.abs(e),1/3)}});var $export$1D=_export$1;$export$1D($export$1D.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}});var $export$1C=_export$1,exp$3=Math.exp;$export$1C($export$1C.S,"Math",{cosh:function(e){return(exp$3(e=+e)+exp$3(-e))/2}});var $expm1$1=Math.expm1,_mathExpm1=!$expm1$1||$expm1$1(10)>22025.465794806718||$expm1$1(10)<22025.465794806718||-2e-17!=$expm1$1(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:$expm1$1,$export$1B=_export$1,$expm1=_mathExpm1;$export$1B($export$1B.S+$export$1B.F*($expm1!=Math.expm1),"Math",{expm1:$expm1});var sign$1=_mathSign,pow$1=Math.pow,EPSILON=pow$1(2,-52),EPSILON32=pow$1(2,-23),MAX32=pow$1(2,127)*(2-EPSILON32),MIN32=pow$1(2,-126),roundTiesToEven=function(e){return e+1/EPSILON-1/EPSILON},_mathFround=Math.fround||function(e){var t,r,n=Math.abs(e),i=sign$1(e);return n<MIN32?i*roundTiesToEven(n/MIN32/EPSILON32)*MIN32*EPSILON32:(r=(t=(1+EPSILON32/EPSILON)*n)-(t-n))>MAX32||r!=r?i*(1/0):i*r},$export$1A=_export$1;$export$1A($export$1A.S,"Math",{fround:_mathFround});var $export$1z=_export$1,abs=Math.abs;$export$1z($export$1z.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,a=arguments.length,s=0;o<a;)s<(r=abs(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}});var $export$1y=_export$1,$imul=Math.imul;$export$1y($export$1y.S+$export$1y.F*_fails((function(){return-5!=$imul(4294967295,5)||2!=$imul.length})),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,o=r&n,a=r&i;return 0|o*a+((r&n>>>16)*a+o*(r&i>>>16)<<16>>>0)}});var $export$1x=_export$1;$export$1x($export$1x.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}});var $export$1w=_export$1;$export$1w($export$1w.S,"Math",{log1p:_mathLog1p});var $export$1v=_export$1;$export$1v($export$1v.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var $export$1u=_export$1;$export$1u($export$1u.S,"Math",{sign:_mathSign});var $export$1t=_export$1,expm1$1=_mathExpm1,exp$2=Math.exp;$export$1t($export$1t.S+$export$1t.F*_fails((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(expm1$1(e)-expm1$1(-e))/2:(exp$2(e-1)-exp$2(-e-1))*(Math.E/2)}});var $export$1s=_export$1,expm1=_mathExpm1,exp$1=Math.exp;$export$1s($export$1s.S,"Math",{tanh:function(e){var t=expm1(e=+e),r=expm1(-e);return t==1/0?1:r==1/0?-1:(t-r)/(exp$1(e)+exp$1(-e))}});var $export$1r=_export$1;$export$1r($export$1r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}});var $export$1q=_export$1,toAbsoluteIndex$9=_toAbsoluteIndex,fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export$1q($export$1q.S+$export$1q.F*(!!$fromCodePoint&&1!=$fromCodePoint.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],toAbsoluteIndex$9(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?fromCharCode(t):fromCharCode(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}});var $export$1p=_export$1,toIObject$5=_toIobject,toLength$o=_toLength;$export$1p($export$1p.S,"String",{raw:function(e){for(var t=toIObject$5(e.raw),r=toLength$o(t.length),n=arguments.length,i=[],o=0;r>o;)i.push(String(t[o++])),o<n&&i.push(String(arguments[o]));return i.join("")}}),_stringTrim("trim",(function(e){return function(){return e(this,3)}}));var toInteger$5=_toInteger,defined$5=_defined,_stringAt=function(e){return function(t,r){var n,i,o=String(defined$5(t)),a=toInteger$5(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},_iterators={},create$a=_objectCreate,descriptor=_propertyDesc,setToStringTag$7=_setToStringTag,IteratorPrototype$3={};_hide(IteratorPrototype$3,_wks.exports("iterator"),(function(){return this}));var _iterCreate=function(e,t,r){e.prototype=create$a(IteratorPrototype$3,{next:descriptor(1,r)}),setToStringTag$7(e,t+" Iterator")},$export$1o=_export$1,redefine$g=_redefine.exports,hide$5=_hide,Iterators$a=_iterators,$iterCreate=_iterCreate,setToStringTag$6=_setToStringTag,getPrototypeOf$b=_objectGpo,ITERATOR$b=_wks.exports("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS$1="keys",VALUES$1="values",returnThis$2=function(){return this},_iterDefine=function(e,t,r,n,i,o,a){$iterCreate(r,t,n);var s,c,u,l=function(e){if(!BUGGY&&e in d)return d[e];switch(e){case KEYS$1:case VALUES$1:return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",h=i==VALUES$1,p=!1,d=e.prototype,m=d[ITERATOR$b]||d[FF_ITERATOR]||i&&d[i],g=m||l(i),v=i?h?l("entries"):g:void 0,y="Array"==t&&d.entries||m;if(y&&(u=getPrototypeOf$b(y.call(new e)))!==Object.prototype&&u.next&&(setToStringTag$6(u,f,!0),"function"!=typeof u[ITERATOR$b]&&hide$5(u,ITERATOR$b,returnThis$2)),h&&m&&m.name!==VALUES$1&&(p=!0,g=function(){return m.call(this)}),(BUGGY||p||!d[ITERATOR$b])&&hide$5(d,ITERATOR$b,g),Iterators$a[t]=g,Iterators$a[f]=returnThis$2,i)if(s={values:h?g:l(VALUES$1),keys:o?g:l(KEYS$1),entries:v},a)for(c in s)c in d||redefine$g(d,c,s[c]);else $export$1o($export$1o.P+$export$1o.F*(BUGGY||p),t,s);return s},$at$2=_stringAt(!0);_iterDefine(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=$at$2(t,r),this._i+=e.length,{value:e,done:!1})}));var $export$1n=_export$1,$at$1=_stringAt(!1);$export$1n($export$1n.P,"String",{codePointAt:function(e){return $at$1(this,e)}});var isObject$x=_isObject,cof$2=_cof,MATCH$1=_wks.exports("match"),_isRegexp=function(e){var t;return isObject$x(e)&&(void 0!==(t=e[MATCH$1])?!!t:"RegExp"==cof$2(e))},isRegExp$3=_isRegexp,defined$4=_defined,_stringContext=function(e,t,r){if(isRegExp$3(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(defined$4(e))},MATCH=_wks.exports("match"),_failsIsRegexp=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[MATCH]=!1,!"/./"[t](r)}catch(f){}}return!0},$export$1m=_export$1,toLength$n=_toLength,context$2=_stringContext,ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export$1m($export$1m.P+$export$1m.F*_failsIsRegexp(ENDS_WITH),"String",{endsWith:function(e){var t=context$2(this,e,ENDS_WITH),r=arguments.length>1?arguments[1]:void 0,n=toLength$n(t.length),i=void 0===r?n:Math.min(toLength$n(r),n),o=String(e);return $endsWith?$endsWith.call(t,o,i):t.slice(i-o.length,i)===o}});var $export$1l=_export$1,context$1=_stringContext,INCLUDES="includes";$export$1l($export$1l.P+$export$1l.F*_failsIsRegexp(INCLUDES),"String",{includes:function(e){return!!~context$1(this,e,INCLUDES).indexOf(e,arguments.length>1?arguments[1]:void 0)}});var $export$1k=_export$1;$export$1k($export$1k.P,"String",{repeat:_stringRepeat});var $export$1j=_export$1,toLength$m=_toLength,context=_stringContext,STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export$1j($export$1j.P+$export$1j.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function(e){var t=context(this,e,STARTS_WITH),r=toLength$m(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return $startsWith?$startsWith.call(t,n,r):t.slice(r,r+n.length)===n}});var $export$1i=_export$1,fails$C=_fails,defined$3=_defined,quot$1=/"/g,createHTML$1=function(e,t,r,n){var i=String(defined$3(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+String(n).replace(quot$1,"&quot;")+'"'),o+">"+i+"</"+t+">"},_stringHtml=function(e,t){var r={};r[e]=t(createHTML$1),$export$1i($export$1i.P+$export$1i.F*fails$C((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)};_stringHtml("anchor",(function(e){return function(t){return e(this,"a","name",t)}})),_stringHtml("big",(function(e){return function(){return e(this,"big","","")}})),_stringHtml("blink",(function(e){return function(){return e(this,"blink","","")}})),_stringHtml("bold",(function(e){return function(){return e(this,"b","","")}})),_stringHtml("fixed",(function(e){return function(){return e(this,"tt","","")}})),_stringHtml("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}})),_stringHtml("fontsize",(function(e){return function(t){return e(this,"font","size",t)}})),_stringHtml("italics",(function(e){return function(){return e(this,"i","","")}})),_stringHtml("link",(function(e){return function(t){return e(this,"a","href",t)}})),_stringHtml("small",(function(e){return function(){return e(this,"small","","")}})),_stringHtml("strike",(function(e){return function(){return e(this,"strike","","")}})),_stringHtml("sub",(function(e){return function(){return e(this,"sub","","")}})),_stringHtml("sup",(function(e){return function(){return e(this,"sup","","")}}));var $export$1h=_export$1;$export$1h($export$1h.S,"Date",{now:function(){return(new Date).getTime()}});var $export$1g=_export$1,toObject$o=_toObject,toPrimitive$9=_toPrimitive;$export$1g($export$1g.P+$export$1g.F*_fails((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=toObject$o(this),r=toPrimitive$9(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var fails$B=_fails,getTime$3=Date.prototype.getTime,$toISOString=Date.prototype.toISOString,lz=function(e){return e>9?e:"0"+e},_dateToIsoString=fails$B((function(){return"0385-07-25T07:06:39.999Z"!=$toISOString.call(new Date(-50000000000001))}))||!fails$B((function(){$toISOString.call(new Date(NaN))}))?function(){if(!isFinite(getTime$3.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+lz(e.getUTCMonth()+1)+"-"+lz(e.getUTCDate())+"T"+lz(e.getUTCHours())+":"+lz(e.getUTCMinutes())+":"+lz(e.getUTCSeconds())+"."+(r>99?r:"0"+lz(r))+"Z"}:$toISOString,$export$1f=_export$1,toISOString=_dateToIsoString;$export$1f($export$1f.P+$export$1f.F*(Date.prototype.toISOString!==toISOString),"Date",{toISOString:toISOString});var DateProto=Date.prototype,INVALID_DATE$1="Invalid Date",TO_STRING$2="toString",$toString$1=DateProto[TO_STRING$2],getTime$2=DateProto.getTime;new Date(NaN)+""!=INVALID_DATE$1&&_redefine.exports(DateProto,TO_STRING$2,(function(){var e=getTime$2.call(this);return e==e?$toString$1.call(this):INVALID_DATE$1}));var anObject$O=_anObject,toPrimitive$8=_toPrimitive,NUMBER$1="number",_dateToPrimitive=function(e){if("string"!==e&&e!==NUMBER$1&&"default"!==e)throw TypeError("Incorrect hint");return toPrimitive$8(anObject$O(this),e!=NUMBER$1)},TO_PRIMITIVE$1=_wks.exports("toPrimitive"),proto$3=Date.prototype;TO_PRIMITIVE$1 in proto$3||_hide(proto$3,TO_PRIMITIVE$1,_dateToPrimitive);var $export$1e=_export$1;$export$1e($export$1e.S,"Array",{isArray:_isArray});var anObject$N=_anObject,_iterCall=function(t,r,n,i){try{return i?r(anObject$N(n)[0],n[1]):r(n)}catch(e){var o=t.return;throw void 0!==o&&anObject$N(o.call(t)),e}},Iterators$9=_iterators,ITERATOR$a=_wks.exports("iterator"),ArrayProto$2=Array.prototype,_isArrayIter=function(e){return void 0!==e&&(Iterators$9.Array===e||ArrayProto$2[ITERATOR$a]===e)},$defineProperty$3=_objectDp,createDesc$1=_propertyDesc,_createProperty=function(e,t,r){t in e?$defineProperty$3.f(e,t,createDesc$1(0,r)):e[t]=r},classof$f=_classof,ITERATOR$9=_wks.exports("iterator"),Iterators$8=_iterators,core_getIteratorMethod=_core.exports.getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$9]||e["@@iterator"]||Iterators$8[classof$f(e)]},ITERATOR$8=_wks.exports("iterator"),SAFE_CLOSING$1=!1;try{var riter=[7][ITERATOR$8]();riter.return=function(){SAFE_CLOSING$1=!0},Array.from(riter,(function(){throw 2}))}catch(e){}var _iterDetect=function(t,r){if(!r&&!SAFE_CLOSING$1)return!1;var n=!1;try{var i=[7],o=i[ITERATOR$8]();o.next=function(){return{done:n=!0}},i[ITERATOR$8]=function(){return o},t(i)}catch(e){}return n},ctx$8=_ctx,$export$1d=_export$1,toObject$n=_toObject,call$g=_iterCall,isArrayIter$2=_isArrayIter,toLength$l=_toLength,createProperty$6=_createProperty,getIterFn$2=core_getIteratorMethod;$export$1d($export$1d.S+$export$1d.F*!_iterDetect((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,n,i,o=toObject$n(e),a="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,l=0,f=getIterFn$2(o);if(u&&(c=ctx$8(c,s>2?arguments[2]:void 0,2)),null==f||a==Array&&isArrayIter$2(f))for(r=new a(t=toLength$l(o.length));t>l;l++)createProperty$6(r,l,u?c(o[l],l):o[l]);else for(i=f.call(o),r=new a;!(n=i.next()).done;l++)createProperty$6(r,l,u?call$g(i,c,[n.value,l],!0):n.value);return r.length=l,r}});var $export$1c=_export$1,createProperty$5=_createProperty;$export$1c($export$1c.S+$export$1c.F*_fails((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)createProperty$5(r,e,arguments[e++]);return r.length=t,r}});var fails$A=_fails,_strictMethod=function(e,t){return!!e&&fails$A((function(){t?e.call(null,(function(){}),1):e.call(null)}))},$export$1b=_export$1,toIObject$4=_toIobject,arrayJoin$1=[].join;$export$1b($export$1b.P+$export$1b.F*(_iobject!=Object||!_strictMethod(arrayJoin$1)),"Array",{join:function(e){return arrayJoin$1.call(toIObject$4(this),void 0===e?",":e)}});var $export$1a=_export$1,html$4=_html,cof$1=_cof,toAbsoluteIndex$8=_toAbsoluteIndex,toLength$k=_toLength,arraySlice$8=[].slice;$export$1a($export$1a.P+$export$1a.F*_fails((function(){html$4&&arraySlice$8.call(html$4)})),"Array",{slice:function(e,t){var r=toLength$k(this.length),n=cof$1(this);if(t=void 0===t?r:t,"Array"==n)return arraySlice$8.call(this,e,t);for(var i=toAbsoluteIndex$8(e,r),o=toAbsoluteIndex$8(t,r),a=toLength$k(o-i),s=new Array(a),c=0;c<a;c++)s[c]="String"==n?this.charAt(i+c):this[i+c];return s}});var $export$19=_export$1,aFunction$d=_aFunction,toObject$m=_toObject,fails$z=_fails,$sort=[].sort,test$2=[1,2,3];$export$19($export$19.P+$export$19.F*(fails$z((function(){test$2.sort(void 0)}))||!fails$z((function(){test$2.sort(null)}))||!_strictMethod($sort)),"Array",{sort:function(e){return void 0===e?$sort.call(toObject$m(this)):$sort.call(toObject$m(this),aFunction$d(e))}});var isObject$w=_isObject,isArray$5=_isArray,SPECIES$a=_wks.exports("species"),_arraySpeciesConstructor=function(e){var t;return isArray$5(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!isArray$5(t.prototype)||(t=void 0),isObject$w(t)&&null===(t=t[SPECIES$a])&&(t=void 0)),void 0===t?Array:t},speciesConstructor$7=_arraySpeciesConstructor,_arraySpeciesCreate=function(e,t){return new(speciesConstructor$7(e))(t)},ctx$7=_ctx,IObject$1=_iobject,toObject$l=_toObject,toLength$j=_toLength,asc=_arraySpeciesCreate,_arrayMethods=function(e,t){var r=1==e,n=2==e,i=3==e,o=4==e,a=6==e,s=5==e||a,c=t||asc;return function(t,u,l){for(var f,h,p=toObject$l(t),d=IObject$1(p),m=ctx$7(u,l,3),g=toLength$j(d.length),v=0,y=r?c(t,g):n?c(t,0):void 0;g>v;v++)if((s||v in d)&&(h=m(f=d[v],v,p),e))if(r)y[v]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return v;case 2:y.push(f)}else if(o)return!1;return a?-1:i||o?o:y}},$export$18=_export$1,$forEach$1=_arrayMethods(0),STRICT=_strictMethod([].forEach,!0);$export$18($export$18.P+$export$18.F*!STRICT,"Array",{forEach:function(e){return $forEach$1(this,e,arguments[1])}});var $export$17=_export$1,$map$2=_arrayMethods(1);$export$17($export$17.P+$export$17.F*!_strictMethod([].map,!0),"Array",{map:function(e){return $map$2(this,e,arguments[1])}});var $export$16=_export$1,$filter$1=_arrayMethods(2);$export$16($export$16.P+$export$16.F*!_strictMethod([].filter,!0),"Array",{filter:function(e){return $filter$1(this,e,arguments[1])}});var $export$15=_export$1,$some=_arrayMethods(3);$export$15($export$15.P+$export$15.F*!_strictMethod([].some,!0),"Array",{some:function(e){return $some(this,e,arguments[1])}});var $export$14=_export$1,$every$1=_arrayMethods(4);$export$14($export$14.P+$export$14.F*!_strictMethod([].every,!0),"Array",{every:function(e){return $every$1(this,e,arguments[1])}});var aFunction$c=_aFunction,toObject$k=_toObject,IObject=_iobject,toLength$i=_toLength,_arrayReduce=function(e,t,r,n,i){aFunction$c(t);var o=toObject$k(e),a=IObject(o),s=toLength$i(o.length),c=i?s-1:0,u=i?-1:1;if(r<2)for(;;){if(c in a){n=a[c],c+=u;break}if(c+=u,i?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;i?c>=0:s>c;c+=u)c in a&&(n=t(n,a[c],c,o));return n},$export$13=_export$1,$reduce$1=_arrayReduce;$export$13($export$13.P+$export$13.F*!_strictMethod([].reduce,!0),"Array",{reduce:function(e){return $reduce$1(this,e,arguments.length,arguments[1],!1)}});var $export$12=_export$1,$reduce=_arrayReduce;$export$12($export$12.P+$export$12.F*!_strictMethod([].reduceRight,!0),"Array",{reduceRight:function(e){return $reduce(this,e,arguments.length,arguments[1],!0)}});var $export$11=_export$1,$indexOf=_arrayIncludes(!1),$native$1=[].indexOf,NEGATIVE_ZERO$2=!!$native$1&&1/[1].indexOf(1,-0)<0;$export$11($export$11.P+$export$11.F*(NEGATIVE_ZERO$2||!_strictMethod($native$1)),"Array",{indexOf:function(e){return NEGATIVE_ZERO$2?$native$1.apply(this,arguments)||0:$indexOf(this,e,arguments[1])}});var $export$10=_export$1,toIObject$3=_toIobject,toInteger$4=_toInteger,toLength$h=_toLength,$native=[].lastIndexOf,NEGATIVE_ZERO$1=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export$10($export$10.P+$export$10.F*(NEGATIVE_ZERO$1||!_strictMethod($native)),"Array",{lastIndexOf:function(e){if(NEGATIVE_ZERO$1)return $native.apply(this,arguments)||0;var t=toIObject$3(this),r=toLength$h(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,toInteger$4(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}});var toObject$j=_toObject,toAbsoluteIndex$7=_toAbsoluteIndex,toLength$g=_toLength,_arrayCopyWithin=[].copyWithin||function(e,t){var r=toObject$j(this),n=toLength$g(r.length),i=toAbsoluteIndex$7(e,n),o=toAbsoluteIndex$7(t,n),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?n:toAbsoluteIndex$7(a,n))-o,n-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in r?r[i]=r[o]:delete r[i],i+=c,o+=c;return r},UNSCOPABLES$1=_wks.exports("unscopables"),ArrayProto$1=Array.prototype;null==ArrayProto$1[UNSCOPABLES$1]&&_hide(ArrayProto$1,UNSCOPABLES$1,{});var _addToUnscopables=function(e){ArrayProto$1[UNSCOPABLES$1][e]=!0},$export$$=_export$1;$export$$($export$$.P,"Array",{copyWithin:_arrayCopyWithin}),_addToUnscopables("copyWithin");var toObject$i=_toObject,toAbsoluteIndex$6=_toAbsoluteIndex,toLength$f=_toLength,_arrayFill=function(e){for(var t=toObject$i(this),r=toLength$f(t.length),n=arguments.length,i=toAbsoluteIndex$6(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:toAbsoluteIndex$6(o,r);a>i;)t[i++]=e;return t},$export$_=_export$1;$export$_($export$_.P,"Array",{fill:_arrayFill}),_addToUnscopables("fill");var $export$Z=_export$1,$find$2=_arrayMethods(5),KEY$1="find",forced$1=!0;KEY$1 in[]&&Array(1)[KEY$1]((function(){forced$1=!1})),$export$Z($export$Z.P+$export$Z.F*forced$1,"Array",{find:function(e){return $find$2(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables(KEY$1);var $export$Y=_export$1,$find$1=_arrayMethods(6),KEY="findIndex",forced=!0;KEY in[]&&Array(1)[KEY]((function(){forced=!1})),$export$Y($export$Y.P+$export$Y.F*forced,"Array",{findIndex:function(e){return $find$1(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables(KEY);var global$14=_global.exports,dP$5=_objectDp,DESCRIPTORS$i=_descriptors,SPECIES$9=_wks.exports("species"),_setSpecies=function(e){var t=global$14[e];DESCRIPTORS$i&&t&&!t[SPECIES$9]&&dP$5.f(t,SPECIES$9,{configurable:!0,get:function(){return this}})};_setSpecies("Array");var _iterStep=function(e,t){return{value:t,done:!!e}},addToUnscopables$4=_addToUnscopables,step$1=_iterStep,Iterators$7=_iterators,toIObject$2=_toIobject,es6_array_iterator=_iterDefine(Array,"Array",(function(e,t){this._t=toIObject$2(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,step$1(1)):step$1(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values");Iterators$7.Arguments=Iterators$7.Array,addToUnscopables$4("keys"),addToUnscopables$4("values"),addToUnscopables$4("entries");var anObject$M=_anObject,_flags=function(){var e=anObject$M(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},global$13=_global.exports,inheritIfRequired$4=_inheritIfRequired,dP$4=_objectDp.f,gOPN$2=_objectGopn.f,isRegExp$2=_isRegexp,$flags$1=_flags,$RegExp$3=global$13.RegExp,Base=$RegExp$3,proto$2=$RegExp$3.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp$3(re1)!==re1;if(_descriptors&&(!CORRECT_NEW||_fails((function(){return re2[_wks.exports("match")]=!1,$RegExp$3(re1)!=re1||$RegExp$3(re2)==re2||"/a/i"!=$RegExp$3(re1,"i")})))){$RegExp$3=function(e,t){var r=this instanceof $RegExp$3,n=isRegExp$2(e),i=void 0===t;return!r&&n&&e.constructor===$RegExp$3&&i?e:inheritIfRequired$4(CORRECT_NEW?new Base(n&&!i?e.source:e,t):Base((n=e instanceof $RegExp$3)?e.source:e,n&&i?$flags$1.call(e):t),r?this:proto$2,$RegExp$3)};for(var proxy=function(e){e in $RegExp$3||dP$4($RegExp$3,e,{configurable:!0,get:function(){return Base[e]},set:function(t){Base[e]=t}})},keys$3=gOPN$2(Base),i$6=0;keys$3.length>i$6;)proxy(keys$3[i$6++]);proto$2.constructor=$RegExp$3,$RegExp$3.prototype=proto$2,_redefine.exports(global$13,"RegExp",$RegExp$3)}_setSpecies("RegExp");var regexpFlags$2=_flags,nativeExec$1=RegExp.prototype.exec,nativeReplace$1=String.prototype.replace,patchedExec$1=nativeExec$1,LAST_INDEX$1="lastIndex",UPDATES_LAST_INDEX_WRONG$1=function(){var e=/a/,t=/b*/g;return nativeExec$1.call(e,"a"),nativeExec$1.call(t,"a"),0!==e[LAST_INDEX$1]||0!==t[LAST_INDEX$1]}(),NPCG_INCLUDED$1=void 0!==/()??/.exec("")[1],PATCH$1=UPDATES_LAST_INDEX_WRONG$1||NPCG_INCLUDED$1;PATCH$1&&(patchedExec$1=function(e){var t,r,n,i,o=this;return NPCG_INCLUDED$1&&(r=new RegExp("^"+o.source+"$(?!\\s)",regexpFlags$2.call(o))),UPDATES_LAST_INDEX_WRONG$1&&(t=o[LAST_INDEX$1]),n=nativeExec$1.call(o,e),UPDATES_LAST_INDEX_WRONG$1&&n&&(o[LAST_INDEX$1]=o.global?n.index+n[0].length:t),NPCG_INCLUDED$1&&n&&n.length>1&&nativeReplace$1.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var _regexpExec=patchedExec$1,regexpExec$5=_regexpExec;_export$1({target:"RegExp",proto:!0,forced:regexpExec$5!==/./.exec},{exec:regexpExec$5}),_descriptors&&"g"!=/./g.flags&&_objectDp.f(RegExp.prototype,"flags",{configurable:!0,get:_flags});var anObject$L=_anObject,$flags=_flags,DESCRIPTORS$h=_descriptors,TO_STRING$1="toString",$toString=/./[TO_STRING$1],define$1=function(e){_redefine.exports(RegExp.prototype,TO_STRING$1,e,!0)};_fails((function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})}))?define$1((function(){var e=anObject$L(this);return"/".concat(e.source,"/","flags"in e?e.flags:!DESCRIPTORS$h&&e instanceof RegExp?$flags.call(e):void 0)})):$toString.name!=TO_STRING$1&&define$1((function(){return $toString.call(this)}));var at$1=_stringAt(!0),_advanceStringIndex=function(e,t,r){return t+(r?at$1(e,t).length:1)},classof$e=_classof,builtinExec=RegExp.prototype.exec,_regexpExecAbstract=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!==_typeof2(n))throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==classof$e(e))throw new TypeError("RegExp#exec called on incompatible receiver");return builtinExec.call(e,t)},redefine$f=_redefine.exports,hide$4=_hide,fails$y=_fails,defined$2=_defined,wks$2=_wks.exports,regexpExec$4=_regexpExec,SPECIES$8=wks$2("species"),REPLACE_SUPPORTS_NAMED_GROUPS$1=!fails$y((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),_fixReWks=function(e,t,r){var n=wks$2(e),i=!fails$y((function(){var t={};return t[n]=function(){return 7},7!=""[e](t)})),o=i?!fails$y((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[SPECIES$8]=function(){return r}),r[n](""),!t})):void 0;if(!i||!o||"replace"===e&&!REPLACE_SUPPORTS_NAMED_GROUPS$1||"split"===e&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var a=/./[n],s=r(defined$2,n,""[e],(function(e,t,r,n,o){return t.exec===regexpExec$4?i&&!o?{done:!0,value:a.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),c=s[0],u=s[1];redefine$f(String.prototype,e,c),hide$4(RegExp.prototype,n,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}},anObject$K=_anObject,toLength$e=_toLength,advanceStringIndex$4=_advanceStringIndex,regExpExec$4=_regexpExecAbstract;_fixReWks("match",1,(function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=anObject$K(e),o=String(this);if(!i.global)return regExpExec$4(i,o);var a=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=regExpExec$4(i,o));){var l=String(s[0]);c[u]=l,""===l&&(i.lastIndex=advanceStringIndex$4(o,toLength$e(i.lastIndex),a)),u++}return 0===u?null:c}]}));var anObject$J=_anObject,toObject$h=_toObject,toLength$d=_toLength,toInteger$3=_toInteger,advanceStringIndex$3=_advanceStringIndex,regExpExec$3=_regexpExecAbstract,max$4=Math.max,min$3=Math.min,floor$4=Math.floor,SUBSTITUTION_SYMBOLS$1=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED$1=/\$([$&`']|\d\d?)/g,maybeToString$1=function(e){return void 0===e?e:String(e)};_fixReWks("replace",2,(function(e,t,r,n){return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(e,t){var o=n(r,e,this,t);if(o.done)return o.value;var a=anObject$J(e),s=String(this),c="function"==typeof t;c||(t=String(t));var u=a.global;if(u){var l=a.unicode;a.lastIndex=0}for(var f=[];;){var h=regExpExec$3(a,s);if(null===h)break;if(f.push(h),!u)break;""===String(h[0])&&(a.lastIndex=advanceStringIndex$3(s,toLength$d(a.lastIndex),l))}for(var p="",d=0,m=0;m<f.length;m++){h=f[m];for(var g=String(h[0]),v=max$4(min$3(toInteger$3(h.index),s.length),0),y=[],b=1;b<h.length;b++)y.push(maybeToString$1(h[b]));var _=h.groups;if(c){var A=[g].concat(y,v,s);void 0!==_&&A.push(_);var M=String(t.apply(void 0,A))}else M=i(g,s,v,y,_,t);v>=d&&(p+=s.slice(d,v)+M,d=v+g.length)}return p+s.slice(d)}];function i(e,t,n,i,o,a){var s=n+e.length,c=i.length,u=SUBSTITUTION_SYMBOLS_NO_NAMED$1;return void 0!==o&&(o=toObject$h(o),u=SUBSTITUTION_SYMBOLS$1),r.call(a,u,(function(r,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":u=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return r;if(l>c){var f=floor$4(l/10);return 0===f?r:f<=c?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):r}u=i[l-1]}return void 0===u?"":u}))}}));var anObject$I=_anObject,sameValue=_sameValue,regExpExec$2=_regexpExecAbstract;_fixReWks("search",1,(function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=anObject$I(e),o=String(this),a=i.lastIndex;sameValue(a,0)||(i.lastIndex=0);var s=regExpExec$2(i,o);return sameValue(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var anObject$H=_anObject,aFunction$b=_aFunction,SPECIES$7=_wks.exports("species"),_speciesConstructor=function(e,t){var r,n=anObject$H(e).constructor;return void 0===n||null==(r=anObject$H(n)[SPECIES$7])?t:aFunction$b(r)},isRegExp$1=_isRegexp,anObject$G=_anObject,speciesConstructor$6=_speciesConstructor,advanceStringIndex$2=_advanceStringIndex,toLength$c=_toLength,callRegExpExec=_regexpExecAbstract,regexpExec$3=_regexpExec,fails$x=_fails,$min=Math.min,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex",MAX_UINT32=4294967295,SUPPORTS_Y=!fails$x((function(){RegExp(MAX_UINT32,"y")}));_fixReWks("split",2,(function(e,t,r,n){var i;return i="c"=="abbc"[$SPLIT](/(b)*/)[1]||4!="test"[$SPLIT](/(?:)/,-1)[LENGTH]||2!="ab"[$SPLIT](/(?:ab)*/)[LENGTH]||4!="."[$SPLIT](/(.?)(.?)/)[LENGTH]||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!isRegExp$1(e))return r.call(n,e,t);for(var i,o,a,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,l=void 0===t?MAX_UINT32:t>>>0,f=new RegExp(e.source,c+"g");(i=regexpExec$3.call(f,n))&&!((o=f[LAST_INDEX])>u&&(s.push(n.slice(u,i.index)),i[LENGTH]>1&&i.index<n[LENGTH]&&$push.apply(s,i.slice(1)),a=i[0][LENGTH],u=o,s[LENGTH]>=l));)f[LAST_INDEX]===i.index&&f[LAST_INDEX]++;return u===n[LENGTH]?!a&&f.test("")||s.push(""):s.push(n.slice(u)),s[LENGTH]>l?s.slice(0,l):s}:"0"[$SPLIT](void 0,0)[LENGTH]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,n):i.call(String(o),r,n)},function(e,t){var o=n(i,e,this,t,i!==r);if(o.done)return o.value;var a=anObject$G(e),s=String(this),c=speciesConstructor$6(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),f=new c(SUPPORTS_Y?a:"^(?:"+a.source+")",l),h=void 0===t?MAX_UINT32:t>>>0;if(0===h)return[];if(0===s.length)return null===callRegExpExec(f,s)?[s]:[];for(var p=0,d=0,m=[];d<s.length;){f.lastIndex=SUPPORTS_Y?d:0;var g,v=callRegExpExec(f,SUPPORTS_Y?s:s.slice(d));if(null===v||(g=$min(toLength$c(f.lastIndex+(SUPPORTS_Y?0:d)),s.length))===p)d=advanceStringIndex$2(s,d,u);else{if(m.push(s.slice(p,d)),m.length===h)return m;for(var y=1;y<=v.length-1;y++)if(m.push(v[y]),m.length===h)return m;d=p=g}}return m.push(s.slice(p)),m}]}));var _anInstance=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},_forOf={exports:{}},ctx$6=_ctx,call$f=_iterCall,isArrayIter$1=_isArrayIter,anObject$F=_anObject,toLength$b=_toLength,getIterFn$1=core_getIteratorMethod,BREAK={},RETURN$1={},exports$2=_forOf.exports=function(e,t,r,n,i){var o,a,s,c,u=i?function(){return e}:getIterFn$1(e),l=ctx$6(r,n,t?2:1),f=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(isArrayIter$1(u)){for(o=toLength$b(e.length);o>f;f++)if((c=t?l(anObject$F(a=e[f])[0],a[1]):l(e[f]))===BREAK||c===RETURN$1)return c}else for(s=u.call(e);!(a=s.next()).done;)if((c=call$f(s,l,a.value,t))===BREAK||c===RETURN$1)return c};exports$2.BREAK=BREAK,exports$2.RETURN=RETURN$1;var ctx$5=_ctx,invoke=_invoke,html$3=_html,cel=_domCreate,global$12=_global.exports,process$8=global$12.process,setTask=global$12.setImmediate,clearTask=global$12.clearImmediate,MessageChannel$2=global$12.MessageChannel,Dispatch$1=global$12.Dispatch,counter$1=0,queue$2={},ONREADYSTATECHANGE$1="onreadystatechange",defer$1,channel$1,port$1,run$2=function(){var e=+this;if(queue$2.hasOwnProperty(e)){var t=queue$2[e];delete queue$2[e],t()}},listener$1=function(e){run$2.call(e.data)};setTask&&clearTask||(setTask=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return queue$2[++counter$1]=function(){invoke("function"==typeof e?e:Function(e),t)},defer$1(counter$1),counter$1},clearTask=function(e){delete queue$2[e]},"process"==_cof(process$8)?defer$1=function(e){process$8.nextTick(ctx$5(run$2,e,1))}:Dispatch$1&&Dispatch$1.now?defer$1=function(e){Dispatch$1.now(ctx$5(run$2,e,1))}:MessageChannel$2?(channel$1=new MessageChannel$2,port$1=channel$1.port2,channel$1.port1.onmessage=listener$1,defer$1=ctx$5(port$1.postMessage,port$1,1)):global$12.addEventListener&&"function"==typeof postMessage&&!global$12.importScripts?(defer$1=function(e){global$12.postMessage(e+"","*")},global$12.addEventListener("message",listener$1,!1)):defer$1=ONREADYSTATECHANGE$1 in cel("script")?function(e){html$3.appendChild(cel("script"))[ONREADYSTATECHANGE$1]=function(){html$3.removeChild(this),run$2.call(e)}}:function(e){setTimeout(ctx$5(run$2,e,1),0)});var _task={set:setTask,clear:clearTask},global$11=_global.exports,macrotask$1=_task.set,Observer=global$11.MutationObserver||global$11.WebKitMutationObserver,process$7=global$11.process,Promise$2=global$11.Promise,isNode$2="process"==_cof(process$7),_microtask=function(){var t,r,n,i=function(){var i,o;for(isNode$2&&(i=process$7.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(e){throw t?n():r=void 0,e}}r=void 0,i&&i.enter()};if(isNode$2)n=function(){process$7.nextTick(i)};else if(!Observer||global$11.navigator&&global$11.navigator.standalone)if(Promise$2&&Promise$2.resolve){var o=Promise$2.resolve(void 0);n=function(){o.then(i)}}else n=function(){macrotask$1.call(global$11,i)};else{var a=!0,s=document.createTextNode("");new Observer(i).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(e){var i={fn:e,next:void 0};r&&(r.next=i),t||(t=i,n()),r=i}},_newPromiseCapability={},aFunction$a=_aFunction;function PromiseCapability$1(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=aFunction$a(t),this.reject=aFunction$a(r)}_newPromiseCapability.f=function(e){return new PromiseCapability$1(e)};var _perform=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}},global$10=_global.exports,navigator$1=global$10.navigator,_userAgent=navigator$1&&navigator$1.userAgent||"",anObject$E=_anObject,isObject$v=_isObject,newPromiseCapability$5=_newPromiseCapability,_promiseResolve=function(e,t){if(anObject$E(e),isObject$v(t)&&t.constructor===e)return t;var r=newPromiseCapability$5.f(e);return(0,r.resolve)(t),r.promise},redefine$e=_redefine.exports,_redefineAll=function(e,t,r){for(var n in t)redefine$e(e,n,t[n],r);return e},global$$=_global.exports,ctx$4=_ctx,classof$d=_classof,$export$X=_export$1,isObject$u=_isObject,aFunction$9=_aFunction,anInstance$a=_anInstance,forOf$6=_forOf.exports,speciesConstructor$5=_speciesConstructor,task$2=_task.set,microtask$4=_microtask(),newPromiseCapabilityModule$1=_newPromiseCapability,perform$3=_perform,userAgent$a=_userAgent,promiseResolve$3=_promiseResolve,PROMISE$1="Promise",TypeError$i=global$$.TypeError,process$6=global$$.process,versions$1=process$6&&process$6.versions,v8$1=versions$1&&versions$1.v8||"",$Promise=global$$[PROMISE$1],isNode$1="process"==classof$d(process$6),empty$1=function(){},Internal$1,newGenericPromiseCapability$1,OwnPromiseCapability$1,Wrapper,newPromiseCapability$4=newGenericPromiseCapability$1=newPromiseCapabilityModule$1.f,USE_NATIVE=!!function(){try{var t=$Promise.resolve(1),r=(t.constructor={})[require("./_wks")("species")]=function(e){e(empty$1,empty$1)};return(isNode$1||"function"==typeof PromiseRejectionEvent)&&t.then(empty$1)instanceof r&&0!==v8$1.indexOf("6.6")&&-1===userAgent$a.indexOf("Chrome/66")}catch(e){}}(),isThenable$1=function(e){var t;return!(!isObject$u(e)||"function"!=typeof(t=e.then))&&t},notify$2=function(t,r){if(!t._n){t._n=!0;var n=t._c;microtask$4((function(){for(var i=t._v,o=1==t._s,a=0,s=function(r){var n,a,s,c=o?r.ok:r.fail,u=r.resolve,l=r.reject,f=r.domain;try{c?(o||(2==t._h&&onHandleUnhandled$1(t),t._h=1),!0===c?n=i:(f&&f.enter(),n=c(i),f&&(f.exit(),s=!0)),n===r.promise?l(TypeError$i("Promise-chain cycle")):(a=isThenable$1(n))?a.call(n,u,l):u(n)):l(i)}catch(e){f&&!s&&f.exit(),l(e)}};n.length>a;)s(n[a++]);t._c=[],t._n=!1,r&&!t._h&&onUnhandled$1(t)}))}},onUnhandled$1=function(e){task$2.call(global$$,(function(){var t,r,n,i=e._v,o=isUnhandled$1(e);if(o&&(t=perform$3((function(){isNode$1?process$6.emit("unhandledRejection",i,e):(r=global$$.onunhandledrejection)?r({promise:e,reason:i}):(n=global$$.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=isNode$1||isUnhandled$1(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},isUnhandled$1=function(e){return 1!==e._h&&0===(e._a||e._c).length},onHandleUnhandled$1=function(e){task$2.call(global$$,(function(){var t;isNode$1?process$6.emit("rejectionHandled",e):(t=global$$.onrejectionhandled)&&t({promise:e,reason:e._v})}))},$reject=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),notify$2(t,!0))},$resolve=function t(r){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===r)throw TypeError$i("Promise can't be resolved itself");(n=isThenable$1(r))?microtask$4((function(){var o={_w:i,_d:!1};try{n.call(r,ctx$4(t,o,1),ctx$4($reject,o,1))}catch(e){$reject.call(o,e)}})):(i._v=r,i._s=1,notify$2(i,!1))}catch(e){$reject.call({_w:i,_d:!1},e)}}};USE_NATIVE||($Promise=function(e){anInstance$a(this,$Promise,PROMISE$1,"_h"),aFunction$9(e),Internal$1.call(this);try{e(ctx$4($resolve,this,1),ctx$4($reject,this,1))}catch(t){$reject.call(this,t)}},Internal$1=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal$1.prototype=_redefineAll($Promise.prototype,{then:function(e,t){var r=newPromiseCapability$4(speciesConstructor$5(this,$Promise));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=isNode$1?process$6.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&notify$2(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability$1=function(){var e=new Internal$1;this.promise=e,this.resolve=ctx$4($resolve,e,1),this.reject=ctx$4($reject,e,1)},newPromiseCapabilityModule$1.f=newPromiseCapability$4=function(e){return e===$Promise||e===Wrapper?new OwnPromiseCapability$1(e):newGenericPromiseCapability$1(e)}),$export$X($export$X.G+$export$X.W+$export$X.F*!USE_NATIVE,{Promise:$Promise}),_setToStringTag($Promise,PROMISE$1),_setSpecies(PROMISE$1),Wrapper=_core.exports[PROMISE$1],$export$X($export$X.S+$export$X.F*!USE_NATIVE,PROMISE$1,{reject:function(e){var t=newPromiseCapability$4(this);return(0,t.reject)(e),t.promise}}),$export$X($export$X.S+$export$X.F*!USE_NATIVE,PROMISE$1,{resolve:function(e){return promiseResolve$3(this,e)}}),$export$X($export$X.S+$export$X.F*!(USE_NATIVE&&_iterDetect((function(e){$Promise.all(e).catch(empty$1)}))),PROMISE$1,{all:function(e){var t=this,r=newPromiseCapability$4(t),n=r.resolve,i=r.reject,o=perform$3((function(){var r=[],o=0,a=1;forOf$6(e,!1,(function(e){var s=o++,c=!1;r.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,r[s]=e,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=newPromiseCapability$4(t),n=r.reject,i=perform$3((function(){forOf$6(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}});var isObject$t=_isObject,_validateCollection=function(e,t){if(!isObject$t(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},dP$3=_objectDp.f,create$9=_objectCreate,redefineAll$9=_redefineAll,ctx$3=_ctx,anInstance$9=_anInstance,forOf$5=_forOf.exports,$iterDefine=_iterDefine,step=_iterStep,setSpecies$4=_setSpecies,DESCRIPTORS$g=_descriptors,fastKey$2=_meta.exports.fastKey,validate$6=_validateCollection,SIZE=DESCRIPTORS$g?"_s":"size",getEntry=function(e,t){var r,n=fastKey$2(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},_collectionStrong={getConstructor:function(e,t,r,n){var i=e((function(e,o){anInstance$9(e,i,t,"_i"),e._t=t,e._i=create$9(null),e._f=void 0,e._l=void 0,e[SIZE]=0,null!=o&&forOf$5(o,r,e[n],e)}));return redefineAll$9(i.prototype,{clear:function(){for(var e=validate$6(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[SIZE]=0},delete:function(e){var r=validate$6(this,t),n=getEntry(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[SIZE]--}return!!n},forEach:function(e){validate$6(this,t);for(var r,n=ctx$3(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!getEntry(validate$6(this,t),e)}}),DESCRIPTORS$g&&dP$3(i.prototype,"size",{get:function(){return validate$6(this,t)[SIZE]}}),i},def:function(e,t,r){var n,i,o=getEntry(e,t);return o?o.v=r:(e._l=o={i:i=fastKey$2(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[SIZE]++,"F"!==i&&(e._i[i]=o)),e},getEntry:getEntry,setStrong:function(e,t,r){$iterDefine(e,t,(function(e,r){this._t=validate$6(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?step(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,step(1))}),r?"entries":"values",!r,!0),setSpecies$4(t)}},global$_=_global.exports,$export$W=_export$1,redefine$d=_redefine.exports,redefineAll$8=_redefineAll,meta$2=_meta.exports,forOf$4=_forOf.exports,anInstance$8=_anInstance,isObject$s=_isObject,fails$w=_fails,$iterDetect$1=_iterDetect,setToStringTag$5=_setToStringTag,inheritIfRequired$3=_inheritIfRequired,_collection=function(e,t,r,n,i,o){var a=global$_[e],s=a,c=i?"set":"add",u=s&&s.prototype,l={},f=function(e){var t=u[e];redefine$d(u,e,"delete"==e||"has"==e?function(e){return!(o&&!isObject$s(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!isObject$s(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof s&&(o||u.forEach&&!fails$w((function(){(new s).entries().next()})))){var h=new s,p=h[c](o?{}:-0,1)!=h,d=fails$w((function(){h.has(1)})),m=$iterDetect$1((function(e){new s(e)})),g=!o&&fails$w((function(){for(var e=new s,t=5;t--;)e[c](t,t);return!e.has(-0)}));m||((s=t((function(t,r){anInstance$8(t,s,e);var n=inheritIfRequired$3(new a,t,s);return null!=r&&forOf$4(r,i,n[c],n),n}))).prototype=u,u.constructor=s),(d||g)&&(f("delete"),f("has"),i&&f("get")),(g||p)&&f(c),o&&u.clear&&delete u.clear}else s=n.getConstructor(t,e,i,c),redefineAll$8(s.prototype,r),meta$2.NEED=!0;return setToStringTag$5(s,e),l[e]=s,$export$W($export$W.G+$export$W.W+$export$W.F*(s!=a),l),o||n.setStrong(s,e,i),s},strong$1=_collectionStrong,validate$5=_validateCollection,MAP="Map",es6_map=_collection(MAP,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=strong$1.getEntry(validate$5(this,MAP),e);return t&&t.v},set:function(e,t){return strong$1.def(validate$5(this,MAP),0===e?0:e,t)}},strong$1,!0),strong=_collectionStrong,validate$4=_validateCollection,SET="Set",es6_set=_collection(SET,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return strong.def(validate$4(this,SET),e=0===e?0:e,e)}},strong),es6_weakMap={exports:{}},redefineAll$7=_redefineAll,getWeak$1=_meta.exports.getWeak,anObject$D=_anObject,isObject$r=_isObject,anInstance$7=_anInstance,forOf$3=_forOf.exports,createArrayMethod$1=_arrayMethods,$has=_has,validate$3=_validateCollection,arrayFind$1=createArrayMethod$1(5),arrayFindIndex$1=createArrayMethod$1(6),id$4=0,uncaughtFrozenStore$2=function(e){return e._l||(e._l=new UncaughtFrozenStore$1)},UncaughtFrozenStore$1=function(){this.a=[]},findUncaughtFrozen$1=function(e,t){return arrayFind$1(e.a,(function(e){return e[0]===t}))};UncaughtFrozenStore$1.prototype={get:function(e){var t=findUncaughtFrozen$1(this,e);if(t)return t[1]},has:function(e){return!!findUncaughtFrozen$1(this,e)},set:function(e,t){var r=findUncaughtFrozen$1(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=arrayFindIndex$1(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}};var _collectionWeak={getConstructor:function(e,t,r,n){var i=e((function(e,o){anInstance$7(e,i,t,"_i"),e._t=t,e._i=id$4++,e._l=void 0,null!=o&&forOf$3(o,r,e[n],e)}));return redefineAll$7(i.prototype,{delete:function(e){if(!isObject$r(e))return!1;var r=getWeak$1(e);return!0===r?uncaughtFrozenStore$2(validate$3(this,t)).delete(e):r&&$has(r,this._i)&&delete r[this._i]},has:function(e){if(!isObject$r(e))return!1;var r=getWeak$1(e);return!0===r?uncaughtFrozenStore$2(validate$3(this,t)).has(e):r&&$has(r,this._i)}}),i},def:function(e,t,r){var n=getWeak$1(anObject$D(t),!0);return!0===n?uncaughtFrozenStore$2(e).set(t,r):n[e._i]=r,e},ufstore:uncaughtFrozenStore$2},global$Z=_global.exports,each=_arrayMethods(0),redefine$c=_redefine.exports,meta$1=_meta.exports,assign$2=_objectAssign,weak$1=_collectionWeak,isObject$q=_isObject,validate$2=_validateCollection,NATIVE_WEAK_MAP$2=_validateCollection,IS_IE11$1=!global$Z.ActiveXObject&&"ActiveXObject"in global$Z,WEAK_MAP="WeakMap",getWeak=meta$1.getWeak,isExtensible$2=Object.isExtensible,uncaughtFrozenStore$1=weak$1.ufstore,InternalMap,wrapper$2=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},methods={get:function(e){if(isObject$q(e)){var t=getWeak(e);return!0===t?uncaughtFrozenStore$1(validate$2(this,WEAK_MAP)).get(e):t?t[this._i]:void 0}},set:function(e,t){return weak$1.def(validate$2(this,WEAK_MAP),e,t)}},$WeakMap$1=es6_weakMap.exports=_collection(WEAK_MAP,wrapper$2,methods,weak$1,!0,!0);NATIVE_WEAK_MAP$2&&IS_IE11$1&&(InternalMap=weak$1.getConstructor(wrapper$2,WEAK_MAP),assign$2(InternalMap.prototype,methods),meta$1.NEED=!0,each(["delete","has","get","set"],(function(e){var t=$WeakMap$1.prototype,r=t[e];redefine$c(t,e,(function(t,n){if(isObject$q(t)&&!isExtensible$2(t)){this._f||(this._f=new InternalMap);var i=this._f[e](t,n);return"set"==e?this:i}return r.call(this,t,n)}))})));var weak=_collectionWeak,validate$1=_validateCollection,WEAK_SET="WeakSet";_collection(WEAK_SET,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return weak.def(validate$1(this,WEAK_SET),e,!0)}},weak,!1,!0);for(var global$Y=_global.exports,hide$3=_hide,uid$5=_uid,TYPED=uid$5("typed_array"),VIEW$2=uid$5("view"),ABV=!(!global$Y.ArrayBuffer||!global$Y.DataView),CONSTR=ABV,i$5=0,l$5=9,Typed,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i$5<l$5;)(Typed=global$Y[TypedArrayConstructors[i$5++]])?(hide$3(Typed.prototype,TYPED,!0),hide$3(Typed.prototype,VIEW$2,!0)):CONSTR=!1;var _typed={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW$2},_typedBuffer={},toInteger$2=_toInteger,toLength$a=_toLength,_toIndex=function(e){if(void 0===e)return 0;var t=toInteger$2(e),r=toLength$a(t);if(t!==r)throw RangeError("Wrong length!");return r};!function(e){var t=_global.exports,r=_descriptors,n=_typed,i=_hide,o=_redefineAll,a=_fails,s=_anInstance,c=_toInteger,u=_toLength,l=_toIndex,f=_objectGopn.f,h=_objectDp.f,p=_arrayFill,d=_setToStringTag,m="ArrayBuffer",g="DataView",v="Wrong index!",y=t.ArrayBuffer,b=t.DataView,_=t.Math,A=t.RangeError,M=t.Infinity,x=y,w=_.abs,$=_.pow,E=_.floor,T=_.log,S=_.LN2,O="buffer",N="byteLength",D="byteOffset",I=r?"_b":O,P=r?"_l":N,j=r?"_o":D;function C(e,t,r){var n,i,o,a=new Array(r),s=8*r-t-1,c=(1<<s)-1,u=c>>1,l=23===t?$(2,-24)-$(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for((e=w(e))!=e||e===M?(i=e!=e?1:0,n=c):(n=E(T(e)/S),e*(o=$(2,-n))<1&&(n--,o*=2),(e+=n+u>=1?l/o:l*$(2,1-u))*o>=2&&(n++,o/=2),n+u>=c?(i=0,n=c):n+u>=1?(i=(e*o-1)*$(2,t),n+=u):(i=e*$(2,u-1)*$(2,t),n=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;a[f++]=255&n,n/=256,s-=8);return a[--f]|=128*h,a}function L(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-M:M;n+=$(2,t),l-=a}return(u?-1:1)*n*$(2,l-t)}function R(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function z(e){return[255&e]}function k(e){return[255&e,e>>8&255]}function B(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return C(e,52,8)}function F(e){return C(e,23,4)}function G(e,t,r){h(e.prototype,t,{get:function(){return this[r]}})}function V(e,t,r,n){var i=l(+r);if(i+t>e[P])throw A(v);var o=e[I]._b,a=i+e[j],s=o.slice(a,a+t);return n?s:s.reverse()}function H(e,t,r,n,i,o){var a=l(+r);if(a+t>e[P])throw A(v);for(var s=e[I]._b,c=a+e[j],u=n(+i),f=0;f<t;f++)s[c+f]=u[o?f:t-f-1]}if(n.ABV){if(!a((function(){y(1)}))||!a((function(){new y(-1)}))||a((function(){return new y,new y(1.5),new y(NaN),y.name!=m}))){for(var W,Q=(y=function(e){return s(this,y),new x(l(e))}).prototype=x.prototype,Y=f(x),q=0;Y.length>q;)(W=Y[q++])in y||i(y,W,x[W]);Q.constructor=y}var K=new b(new y(2)),X=b.prototype.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||o(b.prototype,{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else y=function(e){s(this,y,m);var t=l(e);this._b=p.call(new Array(t),0),this[P]=t},b=function(e,t,r){s(this,b,g),s(e,y,g);var n=e[P],i=c(t);if(i<0||i>n)throw A("Wrong offset!");if(i+(r=void 0===r?n-i:u(r))>n)throw A("Wrong length!");this[I]=e,this[j]=i,this[P]=r},r&&(G(y,N,"_l"),G(b,O,"_b"),G(b,N,"_l"),G(b,D,"_o")),o(b.prototype,{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return R(V(this,4,e,arguments[1]))},getUint32:function(e){return R(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return L(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return L(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,z,t)},setUint8:function(e,t){H(this,1,e,z,t)},setInt16:function(e,t){H(this,2,e,k,t,arguments[2])},setUint16:function(e,t){H(this,2,e,k,t,arguments[2])},setInt32:function(e,t){H(this,4,e,B,t,arguments[2])},setUint32:function(e,t){H(this,4,e,B,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,F,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,U,t,arguments[2])}});d(y,m),d(b,g),i(b.prototype,n.VIEW,!0),e.ArrayBuffer=y,e.DataView=b}(_typedBuffer);var $export$V=_export$1,$typed$1=_typed,buffer=_typedBuffer,anObject$C=_anObject,toAbsoluteIndex$5=_toAbsoluteIndex,toLength$9=_toLength,isObject$p=_isObject,ArrayBuffer$1=_global.exports.ArrayBuffer,speciesConstructor$4=_speciesConstructor,$ArrayBuffer$1=buffer.ArrayBuffer,$DataView$1=buffer.DataView,$isView=$typed$1.ABV&&ArrayBuffer$1.isView,$slice$1=$ArrayBuffer$1.prototype.slice,VIEW$1=$typed$1.VIEW,ARRAY_BUFFER$1="ArrayBuffer";$export$V($export$V.G+$export$V.W+$export$V.F*(ArrayBuffer$1!==$ArrayBuffer$1),{ArrayBuffer:$ArrayBuffer$1}),$export$V($export$V.S+$export$V.F*!$typed$1.CONSTR,ARRAY_BUFFER$1,{isView:function(e){return $isView&&$isView(e)||isObject$p(e)&&VIEW$1 in e}}),$export$V($export$V.P+$export$V.U+$export$V.F*_fails((function(){return!new $ArrayBuffer$1(2).slice(1,void 0).byteLength})),ARRAY_BUFFER$1,{slice:function(e,t){if(void 0!==$slice$1&&void 0===t)return $slice$1.call(anObject$C(this),e);for(var r=anObject$C(this).byteLength,n=toAbsoluteIndex$5(e,r),i=toAbsoluteIndex$5(void 0===t?r:t,r),o=new(speciesConstructor$4(this,$ArrayBuffer$1))(toLength$9(i-n)),a=new $DataView$1(this),s=new $DataView$1(o),c=0;n<i;)s.setUint8(c++,a.getUint8(n++));return o}}),_setSpecies(ARRAY_BUFFER$1);var $export$U=_export$1;$export$U($export$U.G+$export$U.W+$export$U.F*!_typed.ABV,{DataView:_typedBuffer.DataView});var _typedArray={exports:{}};if(_descriptors){var LIBRARY=_library,global$X=_global.exports,fails$v=_fails,$export$T=_export$1,$typed=_typed,$buffer=_typedBuffer,ctx$2=_ctx,anInstance$6=_anInstance,propertyDesc=_propertyDesc,hide$2=_hide,redefineAll$6=_redefineAll,toInteger$1=_toInteger,toLength$8=_toLength,toIndex=_toIndex,toAbsoluteIndex$4=_toAbsoluteIndex,toPrimitive$7=_toPrimitive,has$4=_has,classof$c=_classof,isObject$o=_isObject,toObject$g=_toObject,isArrayIter=_isArrayIter,create$8=_objectCreate,getPrototypeOf$a=_objectGpo,gOPN$1=_objectGopn.f,getIterFn=core_getIteratorMethod,uid$4=_uid,wks$1=_wks.exports,createArrayMethod=_arrayMethods,createArrayIncludes=_arrayIncludes,speciesConstructor$3=_speciesConstructor,ArrayIterators=es6_array_iterator,Iterators$6=_iterators,$iterDetect=_iterDetect,setSpecies$3=_setSpecies,arrayFill=_arrayFill,arrayCopyWithin=_arrayCopyWithin,$DP=_objectDp,$GOPD=_objectGopd,dP$2=$DP.f,gOPD$5=$GOPD.f,RangeError$3=global$X.RangeError,TypeError$h=global$X.TypeError,Uint8Array$1=global$X.Uint8Array,ARRAY_BUFFER="ArrayBuffer",SHARED_BUFFER="Shared"+ARRAY_BUFFER,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",PROTOTYPE$1="prototype",ArrayProto=Array[PROTOTYPE$1],$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach$1=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes$1=createArrayIncludes(!0),arrayIndexOf=createArrayIncludes(!1),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort$1=ArrayProto.sort,arraySlice$7=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR$7=wks$1("iterator"),TAG=wks$1("toStringTag"),TYPED_CONSTRUCTOR=uid$4("typed_constructor"),DEF_CONSTRUCTOR=uid$4("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,WRONG_LENGTH="Wrong length!",$map$1=createArrayMethod(1,(function(e,t){return allocate(speciesConstructor$3(e,e[DEF_CONSTRUCTOR]),t)})),LITTLE_ENDIAN=fails$v((function(){return 1===new Uint8Array$1(new Uint16Array([1]).buffer)[0]})),FORCED_SET=!!Uint8Array$1&&!!Uint8Array$1[PROTOTYPE$1].set&&fails$v((function(){new Uint8Array$1(1).set({})})),toOffset=function(e,t){var r=toInteger$1(e);if(r<0||r%t)throw RangeError$3("Wrong offset!");return r},validate=function(e){if(isObject$o(e)&&TYPED_ARRAY in e)return e;throw TypeError$h(e+" is not a typed array!")},allocate=function(e,t){if(!isObject$o(e)||!(TYPED_CONSTRUCTOR in e))throw TypeError$h("It is not a typed array constructor!");return new e(t)},speciesFromList=function(e,t){return fromList(speciesConstructor$3(e,e[DEF_CONSTRUCTOR]),t)},fromList=function(e,t){for(var r=0,n=t.length,i=allocate(e,n);n>r;)i[r]=t[r++];return i},addGetter=function(e,t,r){dP$2(e,t,{get:function(){return this._d[r]}})},$from=function(e){var t,r,n,i,o,a,s=toObject$g(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,f=getIterFn(s);if(null!=f&&!isArrayIter(f)){for(a=f.call(s),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);s=n}for(l&&c>2&&(u=ctx$2(u,arguments[2],2)),t=0,r=toLength$8(s.length),i=allocate(this,r);r>t;t++)i[t]=l?u(s[t],t):s[t];return i},$of=function(){for(var e=0,t=arguments.length,r=allocate(this,t);t>e;)r[e]=arguments[e++];return r},TO_LOCALE_BUG=!!Uint8Array$1&&fails$v((function(){arrayToLocaleString.call(new Uint8Array$1(1))})),$toLocaleString=function(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice$7.call(validate(this)):validate(this),arguments)},proto$1={copyWithin:function(e,t){return arrayCopyWithin.call(validate(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return arrayEvery(validate(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return arrayFill.apply(validate(this),arguments)},filter:function(e){return speciesFromList(this,arrayFilter(validate(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return arrayFind(validate(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return arrayFindIndex(validate(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){arrayForEach$1(validate(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return arrayIndexOf(validate(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return arrayIncludes$1(validate(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function(e){return arrayLastIndexOf.apply(validate(this),arguments)},map:function(e){return $map$1(validate(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return arrayReduce.apply(validate(this),arguments)},reduceRight:function(e){return arrayReduceRight.apply(validate(this),arguments)},reverse:function(){for(var e,t=this,r=validate(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return arraySome(validate(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return arraySort$1.call(validate(this),e)},subarray:function(e,t){var r=validate(this),n=r.length,i=toAbsoluteIndex$4(e,n);return new(speciesConstructor$3(r,r[DEF_CONSTRUCTOR]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,toLength$8((void 0===t?n:toAbsoluteIndex$4(t,n))-i))}},$slice=function(e,t){return speciesFromList(this,arraySlice$7.call(validate(this),e,t))},$set=function(e){validate(this);var t=toOffset(arguments[1],1),r=this.length,n=toObject$g(e),i=toLength$8(n.length),o=0;if(i+t>r)throw RangeError$3(WRONG_LENGTH);for(;o<i;)this[t+o]=n[o++]},$iterators$1={entries:function(){return arrayEntries.call(validate(this))},keys:function(){return arrayKeys.call(validate(this))},values:function(){return arrayValues.call(validate(this))}},isTAIndex=function(e,t){return isObject$o(e)&&e[TYPED_ARRAY]&&"symbol"!=_typeof2(t)&&t in e&&String(+t)==String(t)},$getDesc=function(e,t){return isTAIndex(e,t=toPrimitive$7(t,!0))?propertyDesc(2,e[t]):gOPD$5(e,t)},$setDesc=function(e,t,r){return!(isTAIndex(e,t=toPrimitive$7(t,!0))&&isObject$o(r)&&has$4(r,"value"))||has$4(r,"get")||has$4(r,"set")||r.configurable||has$4(r,"writable")&&!r.writable||has$4(r,"enumerable")&&!r.enumerable?dP$2(e,t,r):(e[t]=r.value,e)};ALL_CONSTRUCTORS||($GOPD.f=$getDesc,$DP.f=$setDesc),$export$T($export$T.S+$export$T.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc}),fails$v((function(){arrayToString.call({})}))&&(arrayToString=arrayToLocaleString=function(){return arrayJoin.call(this)});var $TypedArrayPrototype$=redefineAll$6({},proto$1);redefineAll$6($TypedArrayPrototype$,$iterators$1),hide$2($TypedArrayPrototype$,ITERATOR$7,$iterators$1.values),redefineAll$6($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString}),addGetter($TypedArrayPrototype$,"buffer","b"),addGetter($TypedArrayPrototype$,"byteOffset","o"),addGetter($TypedArrayPrototype$,"byteLength","l"),addGetter($TypedArrayPrototype$,"length","e"),dP$2($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}}),_typedArray.exports=function(e,t,r,n){var i=e+((n=!!n)?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=global$X[i],c=s||{},u=s&&getPrototypeOf$a(s),l=!s||!$typed.ABV,f={},h=s&&s[PROTOTYPE$1],p=function(e,r){dP$2(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[o](r*t+n.o,LITTLE_ENDIAN)}(this,r)},set:function(e){return function(e,r,i){var o=e._d;n&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[a](r*t+o.o,i,LITTLE_ENDIAN)}(this,r,e)},enumerable:!0})};l?(s=r((function(e,r,n,o){anInstance$6(e,s,i,"_d");var a,c,u,l,f=0,h=0;if(isObject$o(r)){if(!(r instanceof $ArrayBuffer||(l=classof$c(r))==ARRAY_BUFFER||l==SHARED_BUFFER))return TYPED_ARRAY in r?fromList(s,r):$from.call(s,r);a=r,h=toOffset(n,t);var d=r.byteLength;if(void 0===o){if(d%t)throw RangeError$3(WRONG_LENGTH);if((c=d-h)<0)throw RangeError$3(WRONG_LENGTH)}else if((c=toLength$8(o)*t)+h>d)throw RangeError$3(WRONG_LENGTH);u=c/t}else u=toIndex(r),a=new $ArrayBuffer(c=u*t);for(hide$2(e,"_d",{b:a,o:h,l:c,e:u,v:new $DataView(a)});f<u;)p(e,f++)})),h=s[PROTOTYPE$1]=create$8($TypedArrayPrototype$),hide$2(h,"constructor",s)):fails$v((function(){s(1)}))&&fails$v((function(){new s(-1)}))&&$iterDetect((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||(s=r((function(e,r,n,o){var a;return anInstance$6(e,s,i),isObject$o(r)?r instanceof $ArrayBuffer||(a=classof$c(r))==ARRAY_BUFFER||a==SHARED_BUFFER?void 0!==o?new c(r,toOffset(n,t),o):void 0!==n?new c(r,toOffset(n,t)):new c(r):TYPED_ARRAY in r?fromList(s,r):$from.call(s,r):new c(toIndex(r))})),arrayForEach$1(u!==Function.prototype?gOPN$1(c).concat(gOPN$1(u)):gOPN$1(c),(function(e){e in s||hide$2(s,e,c[e])})),s[PROTOTYPE$1]=h,LIBRARY||(h.constructor=s));var d=h[ITERATOR$7],m=!!d&&("values"==d.name||null==d.name),g=$iterators$1.values;hide$2(s,TYPED_CONSTRUCTOR,!0),hide$2(h,TYPED_ARRAY,i),hide$2(h,VIEW,!0),hide$2(h,DEF_CONSTRUCTOR,s),(n?new s(1)[TAG]==i:TAG in h)||dP$2(h,TAG,{get:function(){return i}}),f[i]=s,$export$T($export$T.G+$export$T.W+$export$T.F*(s!=c),f),$export$T($export$T.S,i,{BYTES_PER_ELEMENT:t}),$export$T($export$T.S+$export$T.F*fails$v((function(){c.of.call(s,1)})),i,{from:$from,of:$of}),BYTES_PER_ELEMENT in h||hide$2(h,BYTES_PER_ELEMENT,t),$export$T($export$T.P,i,proto$1),setSpecies$3(i),$export$T($export$T.P+$export$T.F*FORCED_SET,i,{set:$set}),$export$T($export$T.P+$export$T.F*!m,i,$iterators$1),LIBRARY||h.toString==arrayToString||(h.toString=arrayToString),$export$T($export$T.P+$export$T.F*fails$v((function(){new s(1).slice()})),i,{slice:$slice}),$export$T($export$T.P+$export$T.F*(fails$v((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!fails$v((function(){h.toLocaleString.call([1,2])}))),i,{toLocaleString:$toLocaleString}),Iterators$6[i]=m?d:g,LIBRARY||m||hide$2(h,ITERATOR$7,g)}}else _typedArray.exports=function(){};_typedArray.exports("Int8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0),_typedArray.exports("Int16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Uint16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Int32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Uint32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Float32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}})),_typedArray.exports("Float64",8,(function(e){return function(t,r,n){return e(this,t,r,n)}}));var $export$S=_export$1,aFunction$8=_aFunction,anObject$B=_anObject,rApply=(_global.exports.Reflect||{}).apply,fApply=Function.apply;$export$S($export$S.S+$export$S.F*!_fails((function(){rApply((function(){}))})),"Reflect",{apply:function(e,t,r){var n=aFunction$8(e),i=anObject$B(r);return rApply?rApply(n,t,i):fApply.call(n,t,i)}});var $export$R=_export$1,create$7=_objectCreate,aFunction$7=_aFunction,anObject$A=_anObject,isObject$n=_isObject,fails$u=_fails,bind$a=_bind,rConstruct=(_global.exports.Reflect||{}).construct,NEW_TARGET_BUG$1=fails$u((function(){function e(){}return!(rConstruct((function(){}),[],e)instanceof e)})),ARGS_BUG$1=!fails$u((function(){rConstruct((function(){}))}));$export$R($export$R.S+$export$R.F*(NEW_TARGET_BUG$1||ARGS_BUG$1),"Reflect",{construct:function(e,t){aFunction$7(e),anObject$A(t);var r=arguments.length<3?e:aFunction$7(arguments[2]);if(ARGS_BUG$1&&!NEW_TARGET_BUG$1)return rConstruct(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(bind$a.apply(e,n))}var i=r.prototype,o=create$7(isObject$n(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return isObject$n(a)?a:o}});var dP$1=_objectDp,$export$Q=_export$1,anObject$z=_anObject,toPrimitive$6=_toPrimitive;$export$Q($export$Q.S+$export$Q.F*_fails((function(){Reflect.defineProperty(dP$1.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,r,n){anObject$z(t),r=toPrimitive$6(r,!0),anObject$z(n);try{return dP$1.f(t,r,n),!0}catch(e){return!1}}});var $export$P=_export$1,gOPD$4=_objectGopd.f,anObject$y=_anObject;$export$P($export$P.S,"Reflect",{deleteProperty:function(e,t){var r=gOPD$4(anObject$y(e),t);return!(r&&!r.configurable)&&delete e[t]}});var $export$O=_export$1,anObject$x=_anObject,Enumerate=function(e){this._t=anObject$x(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};_iterCreate(Enumerate,"Object",(function(){var e,t=this,r=t._k;do{if(t._i>=r.length)return{value:void 0,done:!0}}while(!((e=r[t._i++])in t._t));return{value:e,done:!1}})),$export$O($export$O.S,"Reflect",{enumerate:function(e){return new Enumerate(e)}});var gOPD$3=_objectGopd,getPrototypeOf$9=_objectGpo,has$3=_has,$export$N=_export$1,isObject$m=_isObject,anObject$w=_anObject;function get$2(e,t){var r,n,i=arguments.length<3?e:arguments[2];return anObject$w(e)===i?e[t]:(r=gOPD$3.f(e,t))?has$3(r,"value")?r.value:void 0!==r.get?r.get.call(i):void 0:isObject$m(n=getPrototypeOf$9(e))?get$2(n,t,i):void 0}$export$N($export$N.S,"Reflect",{get:get$2});var gOPD$2=_objectGopd,$export$M=_export$1,anObject$v=_anObject;$export$M($export$M.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return gOPD$2.f(anObject$v(e),t)}});var $export$L=_export$1,getProto=_objectGpo,anObject$u=_anObject;$export$L($export$L.S,"Reflect",{getPrototypeOf:function(e){return getProto(anObject$u(e))}});var $export$K=_export$1;$export$K($export$K.S,"Reflect",{has:function(e,t){return t in e}});var $export$J=_export$1,anObject$t=_anObject,$isExtensible$1=Object.isExtensible;$export$J($export$J.S,"Reflect",{isExtensible:function(e){return anObject$t(e),!$isExtensible$1||$isExtensible$1(e)}});var gOPN=_objectGopn,gOPS=_objectGops,anObject$s=_anObject,Reflect$1=_global.exports.Reflect,_ownKeys=Reflect$1&&Reflect$1.ownKeys||function(e){var t=gOPN.f(anObject$s(e)),r=gOPS.f;return r?t.concat(r(e)):t},$export$I=_export$1;$export$I($export$I.S,"Reflect",{ownKeys:_ownKeys});var $export$H=_export$1,anObject$r=_anObject,$preventExtensions=Object.preventExtensions;$export$H($export$H.S,"Reflect",{preventExtensions:function(t){anObject$r(t);try{return $preventExtensions&&$preventExtensions(t),!0}catch(e){return!1}}});var dP=_objectDp,gOPD$1=_objectGopd,getPrototypeOf$8=_objectGpo,has$2=_has,$export$G=_export$1,createDesc=_propertyDesc,anObject$q=_anObject,isObject$l=_isObject;function set$3(e,t,r){var n,i,o=arguments.length<4?e:arguments[3],a=gOPD$1.f(anObject$q(e),t);if(!a){if(isObject$l(i=getPrototypeOf$8(e)))return set$3(i,t,r,o);a=createDesc(0)}if(has$2(a,"value")){if(!1===a.writable||!isObject$l(o))return!1;if(n=gOPD$1.f(o,t)){if(n.get||n.set||!1===n.writable)return!1;n.value=r,dP.f(o,t,n)}else dP.f(o,t,createDesc(0,r));return!0}return void 0!==a.set&&(a.set.call(o,r),!0)}$export$G($export$G.S,"Reflect",{set:set$3});var $export$F=_export$1,setProto=_setProto;setProto&&$export$F($export$F.S,"Reflect",{setPrototypeOf:function(t,r){setProto.check(t,r);try{return setProto.set(t,r),!0}catch(e){return!1}}});var $export$E=_export$1,$includes=_arrayIncludes(!0);$export$E($export$E.P,"Array",{includes:function(e){return $includes(this,e,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables("includes");var isArray$4=_isArray,isObject$k=_isObject,toLength$7=_toLength,ctx$1=_ctx,IS_CONCAT_SPREADABLE$1=_wks.exports("isConcatSpreadable");function flattenIntoArray$2(e,t,r,n,i,o,a,s){for(var c,u,l=i,f=0,h=!!a&&ctx$1(a,s,3);f<n;){if(f in r){if(c=h?h(r[f],f,t):r[f],u=!1,isObject$k(c)&&(u=void 0!==(u=c[IS_CONCAT_SPREADABLE$1])?!!u:isArray$4(c)),u&&o>0)l=flattenIntoArray$2(e,t,c,toLength$7(c.length),l,o-1)-1;else{if(l>=9007199254740991)throw TypeError();e[l]=c}l++}f++}return l}var _flattenIntoArray=flattenIntoArray$2,$export$D=_export$1,flattenIntoArray$1=_flattenIntoArray,toObject$f=_toObject,toLength$6=_toLength,aFunction$6=_aFunction,arraySpeciesCreate$4=_arraySpeciesCreate;$export$D($export$D.P,"Array",{flatMap:function(e){var t,r,n=toObject$f(this);return aFunction$6(e),t=toLength$6(n.length),r=arraySpeciesCreate$4(n,0),flattenIntoArray$1(r,n,n,t,0,1,e,arguments[1]),r}}),_addToUnscopables("flatMap");var $export$C=_export$1,flattenIntoArray=_flattenIntoArray,toObject$e=_toObject,toLength$5=_toLength,toInteger=_toInteger,arraySpeciesCreate$3=_arraySpeciesCreate;$export$C($export$C.P,"Array",{flatten:function(){var e=arguments[0],t=toObject$e(this),r=toLength$5(t.length),n=arraySpeciesCreate$3(t,0);return flattenIntoArray(n,t,t,r,0,void 0===e?1:toInteger(e)),n}}),_addToUnscopables("flatten");var $export$B=_export$1,$at=_stringAt(!0),$fails=_fails,FORCED$6=$fails((function(){return"𠮷"!=="𠮷".at(0)}));$export$B($export$B.P+$export$B.F*FORCED$6,"String",{at:function(e){return $at(this,e)}});var toLength$4=_toLength,repeat$2=_stringRepeat,defined$1=_defined,_stringPad=function(e,t,r,n){var i=String(defined$1(e)),o=i.length,a=void 0===r?" ":String(r),s=toLength$4(t);if(s<=o||""==a)return i;var c=s-o,u=repeat$2.call(a,Math.ceil(c/a.length));return u.length>c&&(u=u.slice(0,c)),n?u+i:i+u},$export$A=_export$1,$pad$1=_stringPad,userAgent$9=_userAgent,WEBKIT_BUG$1=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(userAgent$9);$export$A($export$A.P+$export$A.F*WEBKIT_BUG$1,"String",{padStart:function(e){return $pad$1(this,e,arguments.length>1?arguments[1]:void 0,!0)}});var $export$z=_export$1,$pad=_stringPad,userAgent$8=_userAgent,WEBKIT_BUG=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(userAgent$8);$export$z($export$z.P+$export$z.F*WEBKIT_BUG,"String",{padEnd:function(e){return $pad(this,e,arguments.length>1?arguments[1]:void 0,!1)}}),_stringTrim("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart"),_stringTrim("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd");var $export$y=_export$1,defined=_defined,toLength$3=_toLength,isRegExp=_isRegexp,getFlags=_flags,RegExpProto=RegExp.prototype,$RegExpStringIterator=function(e,t){this._r=e,this._s=t};_iterCreate($RegExpStringIterator,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),$export$y($export$y.P,"String",{matchAll:function(e){if(defined(this),!isRegExp(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in RegExpProto?String(e.flags):getFlags.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=toLength$3(e.lastIndex),new $RegExpStringIterator(n,t)}}),_wksDefine("asyncIterator"),_wksDefine("observable");var $export$x=_export$1,ownKeys$3=_ownKeys,toIObject$1=_toIobject,gOPD=_objectGopd,createProperty$4=_createProperty;$export$x($export$x.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=toIObject$1(e),i=gOPD.f,o=ownKeys$3(n),a={},s=0;o.length>s;)void 0!==(r=i(n,t=o[s++]))&&createProperty$4(a,t,r);return a}});var DESCRIPTORS$f=_descriptors,getKeys$1=_objectKeys,toIObject=_toIobject,isEnum=_objectPie.f,_objectToArray=function(e){return function(t){for(var r,n=toIObject(t),i=getKeys$1(n),o=i.length,a=0,s=[];o>a;)r=i[a++],DESCRIPTORS$f&&!isEnum.call(n,r)||s.push(e?[r,n[r]]:n[r]);return s}},$export$w=_export$1,$values$1=_objectToArray(!1);$export$w($export$w.S,"Object",{values:function(e){return $values$1(e)}});var $export$v=_export$1,$entries=_objectToArray(!0);$export$v($export$v.S,"Object",{entries:function(e){return $entries(e)}});var _objectForcedPam=!_fails((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete _global.exports[e]})),$export$u=_export$1,toObject$d=_toObject,aFunction$5=_aFunction,$defineProperty$2=_objectDp;_descriptors&&$export$u($export$u.P+_objectForcedPam,"Object",{__defineGetter__:function(e,t){$defineProperty$2.f(toObject$d(this),e,{get:aFunction$5(t),enumerable:!0,configurable:!0})}});var $export$t=_export$1,toObject$c=_toObject,aFunction$4=_aFunction,$defineProperty$1=_objectDp;_descriptors&&$export$t($export$t.P+_objectForcedPam,"Object",{__defineSetter__:function(e,t){$defineProperty$1.f(toObject$c(this),e,{set:aFunction$4(t),enumerable:!0,configurable:!0})}});var $export$s=_export$1,toObject$b=_toObject,toPrimitive$5=_toPrimitive,getPrototypeOf$7=_objectGpo,getOwnPropertyDescriptor$5=_objectGopd.f;_descriptors&&$export$s($export$s.P+_objectForcedPam,"Object",{__lookupGetter__:function(e){var t,r=toObject$b(this),n=toPrimitive$5(e,!0);do{if(t=getOwnPropertyDescriptor$5(r,n))return t.get}while(r=getPrototypeOf$7(r))}});var $export$r=_export$1,toObject$a=_toObject,toPrimitive$4=_toPrimitive,getPrototypeOf$6=_objectGpo,getOwnPropertyDescriptor$4=_objectGopd.f;_descriptors&&$export$r($export$r.P+_objectForcedPam,"Object",{__lookupSetter__:function(e){var t,r=toObject$a(this),n=toPrimitive$4(e,!0);do{if(t=getOwnPropertyDescriptor$4(r,n))return t.set}while(r=getPrototypeOf$6(r))}});var forOf$2=_forOf.exports,_arrayFromIterable=function(e,t){var r=[];return forOf$2(e,!1,r.push,r,t),r},classof$b=_classof,from$1=_arrayFromIterable,_collectionToJson=function(e){return function(){if(classof$b(this)!=e)throw TypeError(e+"#toJSON isn't generic");return from$1(this)}},$export$q=_export$1;$export$q($export$q.P+$export$q.R,"Map",{toJSON:_collectionToJson("Map")});var $export$p=_export$1;$export$p($export$p.P+$export$p.R,"Set",{toJSON:_collectionToJson("Set")});var $export$o=_export$1,_setCollectionOf=function(e){$export$o($export$o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})};_setCollectionOf("Map"),_setCollectionOf("Set"),_setCollectionOf("WeakMap"),_setCollectionOf("WeakSet");var $export$n=_export$1,aFunction$3=_aFunction,ctx=_ctx,forOf$1=_forOf.exports,_setCollectionFrom=function(e){$export$n($export$n.S,e,{from:function(e){var t,r,n,i,o=arguments[1];return aFunction$3(this),(t=void 0!==o)&&aFunction$3(o),null==e?new this:(r=[],t?(n=0,i=ctx(o,arguments[2],2),forOf$1(e,!1,(function(e){r.push(i(e,n++))}))):forOf$1(e,!1,r.push,r),new this(r))}})};_setCollectionFrom("Map"),_setCollectionFrom("Set"),_setCollectionFrom("WeakMap"),_setCollectionFrom("WeakSet");var $export$m=_export$1;$export$m($export$m.G,{global:_global.exports});var $export$l=_export$1;$export$l($export$l.S,"System",{global:_global.exports});var $export$k=_export$1,cof=_cof;$export$k($export$k.S,"Error",{isError:function(e){return"Error"===cof(e)}});var $export$j=_export$1;$export$j($export$j.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}});var $export$i=_export$1;$export$i($export$i.S,"Math",{DEG_PER_RAD:Math.PI/180});var $export$h=_export$1,RAD_PER_DEG=180/Math.PI;$export$h($export$h.S,"Math",{degrees:function(e){return e*RAD_PER_DEG}});var _mathScale=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n},$export$g=_export$1,scale=_mathScale,fround=_mathFround;$export$g($export$g.S,"Math",{fscale:function(e,t,r,n,i){return fround(scale(e,t,r,n,i))}});var $export$f=_export$1;$export$f($export$f.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}});var $export$e=_export$1;$export$e($export$e.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}});var $export$d=_export$1;$export$d($export$d.S,"Math",{imulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>16,c=i>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>16)+((o*c>>>0)+(u&r)>>16)}});var $export$c=_export$1;$export$c($export$c.S,"Math",{RAD_PER_DEG:180/Math.PI});var $export$b=_export$1,DEG_PER_RAD=Math.PI/180;$export$b($export$b.S,"Math",{radians:function(e){return e*DEG_PER_RAD}});var $export$a=_export$1;$export$a($export$a.S,"Math",{scale:_mathScale});var $export$9=_export$1;$export$9($export$9.S,"Math",{umulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>>16,c=i>>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>>16)+((o*c>>>0)+(u&r)>>>16)}});var $export$8=_export$1;$export$8($export$8.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}});var $export$7=_export$1,core$1=_core.exports,global$W=_global.exports,speciesConstructor$2=_speciesConstructor,promiseResolve$2=_promiseResolve;$export$7($export$7.P+$export$7.R,"Promise",{finally:function(e){var t=speciesConstructor$2(this,core$1.Promise||global$W.Promise),r="function"==typeof e;return this.then(r?function(r){return promiseResolve$2(t,e()).then((function(){return r}))}:e,r?function(r){return promiseResolve$2(t,e()).then((function(){throw r}))}:e)}});var $export$6=_export$1,newPromiseCapability$3=_newPromiseCapability,perform$2=_perform;$export$6($export$6.S,"Promise",{try:function(e){var t=newPromiseCapability$3.f(this),r=perform$2(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var Map$1=es6_map,$export$5=_export$1,shared$5=_shared.exports("metadata"),store$5=shared$5.store||(shared$5.store=new es6_weakMap.exports),getOrCreateMetadataMap$1=function(e,t,r){var n=store$5.get(e);if(!n){if(!r)return;store$5.set(e,n=new Map$1)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Map$1)}return i},ordinaryHasOwnMetadata$3=function(e,t,r){var n=getOrCreateMetadataMap$1(t,r,!1);return void 0!==n&&n.has(e)},ordinaryGetOwnMetadata$2=function(e,t,r){var n=getOrCreateMetadataMap$1(t,r,!1);return void 0===n?void 0:n.get(e)},ordinaryDefineOwnMetadata$2=function(e,t,r,n){getOrCreateMetadataMap$1(r,n,!0).set(e,t)},ordinaryOwnMetadataKeys$2=function(e,t){var r=getOrCreateMetadataMap$1(e,t,!1),n=[];return r&&r.forEach((function(e,t){n.push(t)})),n},toMetaKey$9=function(e){return void 0===e||"symbol"==_typeof2(e)?e:String(e)},exp=function(e){$export$5($export$5.S,"Reflect",e)},_metadata={store:store$5,map:getOrCreateMetadataMap$1,has:ordinaryHasOwnMetadata$3,get:ordinaryGetOwnMetadata$2,set:ordinaryDefineOwnMetadata$2,keys:ordinaryOwnMetadataKeys$2,key:toMetaKey$9,exp:exp},metadata$7=_metadata,anObject$p=_anObject,toMetaKey$8=metadata$7.key,ordinaryDefineOwnMetadata$1=metadata$7.set;metadata$7.exp({defineMetadata:function(e,t,r,n){ordinaryDefineOwnMetadata$1(e,t,anObject$p(r),toMetaKey$8(n))}});var metadata$6=_metadata,anObject$o=_anObject,toMetaKey$7=metadata$6.key,getOrCreateMetadataMap=metadata$6.map,store$4=metadata$6.store;metadata$6.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:toMetaKey$7(arguments[2]),n=getOrCreateMetadataMap(anObject$o(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=store$4.get(t);return i.delete(r),!!i.size||store$4.delete(t)}});var metadata$5=_metadata,anObject$n=_anObject,getPrototypeOf$5=_objectGpo,ordinaryHasOwnMetadata$2=metadata$5.has,ordinaryGetOwnMetadata$1=metadata$5.get,toMetaKey$6=metadata$5.key,ordinaryGetMetadata=function e(t,r,n){if(ordinaryHasOwnMetadata$2(t,r,n))return ordinaryGetOwnMetadata$1(t,r,n);var i=getPrototypeOf$5(r);return null!==i?e(t,i,n):void 0};metadata$5.exp({getMetadata:function(e,t){return ordinaryGetMetadata(e,anObject$n(t),arguments.length<3?void 0:toMetaKey$6(arguments[2]))}});var Set$1=es6_set,from=_arrayFromIterable,metadata$4=_metadata,anObject$m=_anObject,getPrototypeOf$4=_objectGpo,ordinaryOwnMetadataKeys$1=metadata$4.keys,toMetaKey$5=metadata$4.key,ordinaryMetadataKeys=function e(t,r){var n=ordinaryOwnMetadataKeys$1(t,r),i=getPrototypeOf$4(t);if(null===i)return n;var o=e(i,r);return o.length?n.length?from(new Set$1(n.concat(o))):o:n};metadata$4.exp({getMetadataKeys:function(e){return ordinaryMetadataKeys(anObject$m(e),arguments.length<2?void 0:toMetaKey$5(arguments[1]))}});var metadata$3=_metadata,anObject$l=_anObject,ordinaryGetOwnMetadata=metadata$3.get,toMetaKey$4=metadata$3.key;metadata$3.exp({getOwnMetadata:function(e,t){return ordinaryGetOwnMetadata(e,anObject$l(t),arguments.length<3?void 0:toMetaKey$4(arguments[2]))}});var metadata$2=_metadata,anObject$k=_anObject,ordinaryOwnMetadataKeys=metadata$2.keys,toMetaKey$3=metadata$2.key;metadata$2.exp({getOwnMetadataKeys:function(e){return ordinaryOwnMetadataKeys(anObject$k(e),arguments.length<2?void 0:toMetaKey$3(arguments[1]))}});var metadata$1=_metadata,anObject$j=_anObject,getPrototypeOf$3=_objectGpo,ordinaryHasOwnMetadata$1=metadata$1.has,toMetaKey$2=metadata$1.key,ordinaryHasMetadata=function e(t,r,n){if(ordinaryHasOwnMetadata$1(t,r,n))return!0;var i=getPrototypeOf$3(r);return null!==i&&e(t,i,n)};metadata$1.exp({hasMetadata:function(e,t){return ordinaryHasMetadata(e,anObject$j(t),arguments.length<3?void 0:toMetaKey$2(arguments[2]))}});var metadata=_metadata,anObject$i=_anObject,ordinaryHasOwnMetadata=metadata.has,toMetaKey$1=metadata.key;metadata.exp({hasOwnMetadata:function(e,t){return ordinaryHasOwnMetadata(e,anObject$i(t),arguments.length<3?void 0:toMetaKey$1(arguments[2]))}});var $metadata=_metadata,anObject$h=_anObject,aFunction$2=_aFunction,toMetaKey=$metadata.key,ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function(e,t){return function(r,n){ordinaryDefineOwnMetadata(e,t,(void 0!==n?anObject$h:aFunction$2)(r),toMetaKey(n))}}});var $export$4=_export$1,microtask$3=_microtask(),process$5=_global.exports.process,isNode="process"==_cof(process$5);$export$4($export$4.G,{asap:function(e){var t=isNode&&process$5.domain;microtask$3(t?t.bind(e):e)}});var $export$3=_export$1,global$V=_global.exports,core=_core.exports,microtask$2=_microtask(),OBSERVABLE$1=_wks.exports("observable"),aFunction$1=_aFunction,anObject$g=_anObject,anInstance$5=_anInstance,redefineAll$5=_redefineAll,hide$1=_hide,forOf=_forOf.exports,RETURN=forOf.RETURN,getMethod$5=function(e){return null==e?void 0:aFunction$1(e)},cleanupSubscription=function(e){var t=e._c;t&&(e._c=void 0,t())},subscriptionClosed=function(e){return void 0===e._o},closeSubscription=function(e){subscriptionClosed(e)||(e._o=void 0,cleanupSubscription(e))},Subscription=function(t,r){anObject$g(t),this._c=void 0,this._o=t,t=new SubscriptionObserver(this);try{var n=r(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:aFunction$1(n),this._c=n)}catch(e){return void t.error(e)}subscriptionClosed(this)&&cleanupSubscription(this)};Subscription.prototype=redefineAll$5({},{unsubscribe:function(){closeSubscription(this)}});var SubscriptionObserver=function(e){this._s=e};SubscriptionObserver.prototype=redefineAll$5({},{next:function(t){var r=this._s;if(!subscriptionClosed(r)){var n=r._o;try{var i=getMethod$5(n.next);if(i)return i.call(n,t)}catch(e){try{closeSubscription(r)}finally{throw e}}}},error:function(t){var r=this._s;if(subscriptionClosed(r))throw t;var n=r._o;r._o=void 0;try{var i=getMethod$5(n.error);if(!i)throw t;t=i.call(n,t)}catch(e){try{cleanupSubscription(r)}finally{throw e}}return cleanupSubscription(r),t},complete:function(t){var r=this._s;if(!subscriptionClosed(r)){var n=r._o;r._o=void 0;try{var i=getMethod$5(n.complete);t=i?i.call(n,t):void 0}catch(e){try{cleanupSubscription(r)}finally{throw e}}return cleanupSubscription(r),t}}});var $Observable=function(e){anInstance$5(this,$Observable,"Observable","_f")._f=aFunction$1(e)};redefineAll$5($Observable.prototype,{subscribe:function(e){return new Subscription(e,this._f)},forEach:function(t){var r=this;return new(core.Promise||global$V.Promise)((function(n,i){aFunction$1(t);var o=r.subscribe({next:function(r){try{return t(r)}catch(e){i(e),o.unsubscribe()}},error:i,complete:n})}))}}),redefineAll$5($Observable,{from:function(t){var r="function"==typeof this?this:$Observable,n=getMethod$5(anObject$g(t)[OBSERVABLE$1]);if(n){var i=anObject$g(n.call(t));return i.constructor===r?i:new r((function(e){return i.subscribe(e)}))}return new r((function(r){var n=!1;return microtask$2((function(){if(!n){try{if(forOf(t,!1,(function(e){if(r.next(e),n)return RETURN}))===RETURN)return}catch(e){if(n)throw e;return void r.error(e)}r.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:$Observable)((function(e){var t=!1;return microtask$2((function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}})),function(){t=!0}}))}}),hide$1($Observable.prototype,OBSERVABLE$1,(function(){return this})),$export$3($export$3.G,{Observable:$Observable}),_setSpecies("Observable");var global$U=_global.exports,$export$2=_export$1,userAgent$7=_userAgent,slice=[].slice,MSIE$1=/MSIE .\./.test(userAgent$7),wrap$1=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&slice.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};$export$2($export$2.G+$export$2.B+$export$2.F*MSIE$1,{setTimeout:wrap$1(global$U.setTimeout),setInterval:wrap$1(global$U.setInterval)});var $export$1=_export$1,$task=_task;$export$1($export$1.G+$export$1.B,{setImmediate:$task.set,clearImmediate:$task.clear});for(var $iterators=es6_array_iterator,getKeys=_objectKeys,redefine$b=_redefine.exports,global$T=_global.exports,hide=_hide,Iterators$5=_iterators,wks=_wks.exports,ITERATOR$6=wks("iterator"),TO_STRING_TAG$4=wks("toStringTag"),ArrayValues$1=Iterators$5.Array,DOMIterables$2={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables$2),i$4=0;i$4<collections.length;i$4++){var NAME$1=collections[i$4],explicit=DOMIterables$2[NAME$1],Collection=global$T[NAME$1],proto=Collection&&Collection.prototype,key$1;if(proto&&(proto[ITERATOR$6]||hide(proto,ITERATOR$6,ArrayValues$1),proto[TO_STRING_TAG$4]||hide(proto,TO_STRING_TAG$4,NAME$1),Iterators$5[NAME$1]=ArrayValues$1,explicit))for(key$1 in $iterators)proto[key$1]||redefine$b(proto,key$1,$iterators[key$1],!0)}var runtime$1={exports:{}},module;module=runtime$1,function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)module.exports=c;else{(c=e.regeneratorRuntime=module.exports).wrap=y;var u="suspendedStart",l="suspendedYield",f="executing",h="completed",p={},d={};d[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==r&&n.call(g,o)&&(d=g);var v=M.prototype=_.prototype=Object.create(d);A.prototype=v.constructor=M,M.constructor=A,M[s]=A.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,M):(e.__proto__=M,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(v),e},c.awrap=function(e){return{__await:e}},x(w.prototype),w.prototype[a]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,r,n){var i=new w(y(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(v),v[s]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}}}function y(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),a=new S(n||[]);return o._invoke=function(e,t,r){var n=u;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=$(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=b(e,t,r);if("normal"===c.type){if(n=r.done?h:l,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function b(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function _(){}function A(){}function M(){}function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(t){function r(e,i,o,a){var s=b(t[e],t,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===_typeof2(u)&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),a)}a(s.arg)}var i;"object"===_typeof2(e.process)&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(e,t){function n(){return new Promise((function(n,i){r(e,t,n,i)}))}return i=i?i.then(n,n):n()}}function $(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,$(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=b(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}}("object"===_typeof2(commonjsGlobal)?commonjsGlobal:"object"===("undefined"==typeof window?"undefined":_typeof2(window))?window:"object"===("undefined"==typeof self?"undefined":_typeof2(self))?self:commonjsGlobal);var _replacer=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}},$export=_export$1,$re=_replacer(/[\\^$*+?.()|[\]{}]/g,"\\$&");if($export($export.S,"RegExp",{escape:function(e){return $re(e)}}),_core.exports.RegExp.escape,commonjsGlobal._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");commonjsGlobal._babelPolyfill=!0;var DEFINE_PROPERTY="defineProperty";function define(e,t,r){e[t]||Object[DEFINE_PROPERTY](e,t,{writable:!0,configurable:!0,value:r})}define(String.prototype,"padLeft","".padStart),define(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&define(Array,e,Function.call.bind([][e]))}));var react$2=exports("r",{exports:{}}),react_production_min={},getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject$9(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var objectAssign$1=shouldUseNative()?Object.assign:function(e,t){for(var r,n,i=toObject$9(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))hasOwnProperty$1.call(r,a)&&(i[a]=r[a]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var s=0;s<n.length;s++)propIsEnumerable.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i},l$4=objectAssign$1,n$4=60103,p$3=60106;
/** @license React v17.0.2
			 * react.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */react_production_min.Fragment=60107,react_production_min.StrictMode=60108,react_production_min.Profiler=60114;var q$2=60109,r$5=60110,t$4=60112;react_production_min.Suspense=60113;var u$3=60115,v$3=60116;if("function"==typeof Symbol&&Symbol.for){var w$3=Symbol.for;n$4=w$3("react.element"),p$3=w$3("react.portal"),react_production_min.Fragment=w$3("react.fragment"),react_production_min.StrictMode=w$3("react.strict_mode"),react_production_min.Profiler=w$3("react.profiler"),q$2=w$3("react.provider"),r$5=w$3("react.context"),t$4=w$3("react.forward_ref"),react_production_min.Suspense=w$3("react.suspense"),u$3=w$3("react.memo"),v$3=w$3("react.lazy")}var x$2="function"==typeof Symbol&&Symbol.iterator;function y$4(e){return null===e||"object"!==_typeof2(e)?null:"function"==typeof(e=x$2&&e[x$2]||e["@@iterator"])?e:null}function z$1(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$3={};function C$3(e,t,r){this.props=e,this.context=t,this.refs=B$3,this.updater=r||A$3}function D$3(){}function E$4(e,t,r){this.props=e,this.context=t,this.refs=B$3,this.updater=r||A$3}C$3.prototype.isReactComponent={},C$3.prototype.setState=function(e,t){if("object"!==_typeof2(e)&&"function"!=typeof e&&null!=e)throw Error(z$1(85));this.updater.enqueueSetState(this,e,t,"setState")},C$3.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},D$3.prototype=C$3.prototype;var F$3=E$4.prototype=new D$3;F$3.constructor=E$4,l$4(F$3,C$3.prototype),F$3.isPureReactComponent=!0;var G$3={current:null},H$3=Object.prototype.hasOwnProperty,I$3={key:!0,ref:!0,__self:!0,__source:!0};function J$2(e,t,r){var n,i={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)H$3.call(t,n)&&!I$3.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return{$$typeof:n$4,type:e,key:o,ref:a,props:i,_owner:G$3.current}}function K$2(e,t){return{$$typeof:n$4,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function L$3(e){return"object"===_typeof2(e)&&null!==e&&e.$$typeof===n$4}function escape$1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}var M$3=/\/+/g;function N$4(e,t){return"object"===_typeof2(e)&&null!==e&&null!=e.key?escape$1(""+e.key):t.toString(36)}function O$4(e,t,r,n,i){var o=_typeof2(e);"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case n$4:case p$3:a=!0}}if(a)return i=i(a=e),e=""===n?"."+N$4(a,0):n,Array.isArray(i)?(r="",null!=e&&(r=e.replace(M$3,"$&/")+"/"),O$4(i,t,r,"",(function(e){return e}))):null!=i&&(L$3(i)&&(i=K$2(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(M$3,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=""===n?".":n+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=n+N$4(o=e[s],s);a+=O$4(o,t,r,c,i)}else if("function"==typeof(c=y$4(e)))for(e=c.call(e),s=0;!(o=e.next()).done;)a+=O$4(o=o.value,t,r,c=n+N$4(o,s++),i);else if("object"===o)throw t=""+e,Error(z$1(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function P$4(e,t,r){if(null==e)return e;var n=[],i=0;return O$4(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function Q$2(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R$4={current:null};function S$3(){var e=R$4.current;if(null===e)throw Error(z$1(321));return e}var T$2={ReactCurrentDispatcher:R$4,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:P$4,forEach:function(e,t,r){P$4(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P$4(e,(function(){t++})),t},toArray:function(e){return P$4(e,(function(e){return e}))||[]},only:function(e){if(!L$3(e))throw Error(z$1(143));return e}},react_production_min.Component=C$3,react_production_min.PureComponent=E$4,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$2,react_production_min.cloneElement=function(e,t,r){if(null==e)throw Error(z$1(267,e));var n=l$4({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=G$3.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)H$3.call(t,c)&&!I$3.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:n$4,type:e.type,key:i,ref:o,props:n,_owner:a}},react_production_min.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:r$5,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:q$2,_context:e},e.Consumer=e},react_production_min.createElement=J$2,react_production_min.createFactory=function(e){var t=J$2.bind(null,e);return t.type=e,t},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(e){return{$$typeof:t$4,render:e}},react_production_min.isValidElement=L$3,react_production_min.lazy=function(e){return{$$typeof:v$3,_payload:{_status:-1,_result:e},_init:Q$2}},react_production_min.memo=function(e,t){return{$$typeof:u$3,type:e,compare:void 0===t?null:t}},react_production_min.useCallback=function(e,t){return S$3().useCallback(e,t)},react_production_min.useContext=function(e,t){return S$3().useContext(e,t)},react_production_min.useDebugValue=function(){},react_production_min.useEffect=function(e,t){return S$3().useEffect(e,t)},react_production_min.useImperativeHandle=function(e,t,r){return S$3().useImperativeHandle(e,t,r)},react_production_min.useLayoutEffect=function(e,t){return S$3().useLayoutEffect(e,t)},react_production_min.useMemo=function(e,t){return S$3().useMemo(e,t)},react_production_min.useReducer=function(e,t,r){return S$3().useReducer(e,t,r)},react_production_min.useRef=function(e){return S$3().useRef(e)},react_production_min.useState=function(e){return S$3().useState(e)},react_production_min.version="17.0.2",react$2.exports=react_production_min;var React$g=react$2.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};
/** @license React v0.20.2
			 * scheduler.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */
!function(e){var t,r,n,i;if("object"===("undefined"==typeof performance?"undefined":_typeof2(performance))&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,l=function t(){if(null!==c)try{var r=e.unstable_now();c(!0,r),c=null}catch(b){throw setTimeout(t,0),b}};t=function(e){null!==c?setTimeout(t,0,e):(c=e,setTimeout(l,0))},r=function(e,t){u=setTimeout(e,t)},n=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var d=!1,m=null,g=-1,v=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,A=_.port2;_.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();y=t+v;try{m(!0,t)?A.postMessage(null):(d=!1,m=null)}catch(b){throw A.postMessage(null),b}}else d=!1},t=function(e){m=e,d||(d=!0,A.postMessage(null))},r=function(t,r){g=f((function(){t(e.unstable_now())}),r)},n=function(){h(g),g=-1}}function M(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(!(void 0!==i&&0<$(i,t)))break e;e[n]=t,e[r]=i,r=n}}function x(e){return void 0===(e=e[0])?null:e}function w(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,a=e[o],s=o+1,c=e[s];if(void 0!==a&&0>$(a,r))void 0!==c&&0>$(c,a)?(e[n]=c,e[s]=r,n=s):(e[n]=a,e[o]=r,n=o);else{if(!(void 0!==c&&0>$(c,r)))break e;e[n]=c,e[s]=r,n=s}}}return t}return null}function $(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var E=[],T=[],S=1,O=null,N=3,D=!1,I=!1,P=!1;function j(e){for(var t=x(T);null!==t;){if(null===t.callback)w(T);else{if(!(t.startTime<=e))break;w(T),t.sortIndex=t.expirationTime,M(E,t)}t=x(T)}}function C(e){if(P=!1,j(e),!I)if(null!==x(E))I=!0,t(L);else{var n=x(T);null!==n&&r(C,n.startTime-e)}}function L(t,i){I=!1,P&&(P=!1,n()),D=!0;var o=N;try{for(j(i),O=x(E);null!==O&&(!(O.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=O.callback;if("function"==typeof a){O.callback=null,N=O.priorityLevel;var s=a(O.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?O.callback=s:O===x(E)&&w(E),j(i)}else w(E);O=x(E)}if(null!==O)var c=!0;else{var u=x(T);null!==u&&r(C,u.startTime-i),c=!1}return c}finally{O=null,N=o,D=!1}}var R=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){I||D||(I=!0,t(L))},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return x(E)},e.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var r=N;N=t;try{return e()}finally{N=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=R,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=N;N=e;try{return t()}finally{N=r}},e.unstable_scheduleCallback=function(i,o,a){var s=e.unstable_now();switch("object"===_typeof2(a)&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,i){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return i={id:S++,callback:o,priorityLevel:i,startTime:a,expirationTime:c=a+c,sortIndex:-1},a>s?(i.sortIndex=a,M(T,i),null===x(E)&&i===x(T)&&(P?n():P=!0,r(C,a-s))):(i.sortIndex=c,M(E,i),I||D||(I=!0,t(L))),i},e.unstable_wrapCallback=function(e){var t=N;return function(){var r=N;N=t;try{return e.apply(this,arguments)}finally{N=r}}}}(scheduler_production_min),scheduler.exports=scheduler_production_min;
/** @license React v17.0.2
			 * react-dom.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */
var aa$1=react$2.exports,m$3=objectAssign$1,r$4=scheduler.exports;function y$3(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$1)throw Error(y$3(227));var ba$1=new Set,ca$1={};function da$1(e,t){ea$1(e,t),ea$1(e+"Capture",t)}function ea$1(e,t){for(ca$1[e]=t,e=0;e<t.length;e++)ba$1.add(t[e])}var fa$1=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ha$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia$1=Object.prototype.hasOwnProperty,ja={},ka={};function la(e){return!!ia$1.call(ka,e)||!ia$1.call(ja,e)&&(ha$1.test(e)?ka[e]=!0:(ja[e]=!0,!1))}function ma(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(_typeof2(t)){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function na(e,t,r,n){if(null==t||ma(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function B$2(e,t,r,n,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var D$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){D$2[e]=new B$2(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];D$2[t]=new B$2(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){D$2[e]=new B$2(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){D$2[e]=new B$2(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){D$2[e]=new B$2(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){D$2[e]=new B$2(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){D$2[e]=new B$2(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){D$2[e]=new B$2(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){D$2[e]=new B$2(e,5,!1,e.toLowerCase(),null,!1,!1)}));var oa=/[\-:]([a-z])/g;function pa(e){return e[1].toUpperCase()}function qa(e,t,r,n){var i=D$2.hasOwnProperty(t)?D$2[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(na(t,r,i,n)&&(r=null),n||null===i?la(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(oa,pa);D$2[t]=new B$2(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(oa,pa);D$2[t]=new B$2(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(oa,pa);D$2[t]=new B$2(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){D$2[e]=new B$2(e,1,!1,e.toLowerCase(),null,!1,!1)})),D$2.xlinkHref=new B$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){D$2[e]=new B$2(e,1,!1,e.toLowerCase(),null,!0,!0)}));var ra=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if("function"==typeof Symbol&&Symbol.for){var E$3=Symbol.for;sa=E$3("react.element"),ta=E$3("react.portal"),ua=E$3("react.fragment"),wa=E$3("react.strict_mode"),xa=E$3("react.profiler"),ya=E$3("react.provider"),za=E$3("react.context"),Aa=E$3("react.forward_ref"),Ba=E$3("react.suspense"),Ca=E$3("react.suspense_list"),Da=E$3("react.memo"),Ea=E$3("react.lazy"),Fa=E$3("react.block"),E$3("react.scope"),Ga=E$3("react.opaque.id"),Ha=E$3("react.debug_trace_mode"),Ia=E$3("react.offscreen"),Ja=E$3("react.legacy_hidden")}var Ka="function"==typeof Symbol&&Symbol.iterator,Ma;function La(e){return null===e||"object"!==_typeof2(e)?null:"function"==typeof(e=Ka&&e[Ka]||e["@@iterator"])?e:null}function Na(e){if(void 0===Ma)try{throw Error()}catch(c){var t=c.stack.trim().match(/\n( *(at )?)/);Ma=t&&t[1]||""}return"\n"+Ma+e}var Oa=!1;function Pa(e,t){if(!e||Oa)return"";Oa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===("undefined"==typeof Reflect?"undefined":_typeof2(Reflect))&&Reflect.construct){try{Reflect.construct(t,[])}catch(k){var n=k}Reflect.construct(e,[],t)}else{try{t.call()}catch(k){n=k}e.call(t.prototype)}else{try{throw Error()}catch(k){n=k}e()}}catch(k){if(k&&n&&"string"==typeof k.stack){for(var i=k.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Oa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Na(e):""}function Qa(e){switch(e.tag){case 5:return Na(e.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return e=Pa(e.type,!1);case 11:return e=Pa(e.type.render,!1);case 22:return e=Pa(e.type._render,!1);case 1:return e=Pa(e.type,!0);default:return""}}function Ra(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if("object"===_typeof2(e))switch(e.$$typeof){case za:return(e.displayName||"Context")+".Consumer";case ya:return(e._context.displayName||"Context")+".Provider";case Aa:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Da:return Ra(e.type);case Fa:return Ra(e._render);case Ea:t=e._payload,e=e._init;try{return Ra(e(t))}catch(c){}}return null}function Sa(e){switch(_typeof2(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ta(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ua(e){var t=Ta(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ta(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Xa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(b){return e.body}}function Ya(e,t){var r=t.checked;return m$3({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Za(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Sa(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $a(e,t){null!=(t=t.checked)&&qa(e,"checked",t,!1)}function ab(e,t){$a(e,t);var r=Sa(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?bb(e,t.type,r):t.hasOwnProperty("defaultValue")&&bb(e,t.type,Sa(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function cb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function bb(e,t,r){"number"===t&&Xa(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function db(e){var t="";return aa$1.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}function eb(e,t){return e=m$3({children:void 0},t),(t=db(t.children))&&(e.children=t),e}function fb(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sa(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function gb(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(y$3(91));return m$3({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(y$3(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(y$3(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Sa(r)}}function ib(e,t){var r=Sa(t.value),n=Sa(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function jb(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lb(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nb,ob=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==kb.svg||"innerHTML"in e)e.innerHTML=t;else{for((nb=nb||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function pb(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];function sb(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||qb.hasOwnProperty(e)&&qb[e]?(""+t).trim():t+"px"}function tb(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=sb(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(qb).forEach((function(e){rb.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qb[t]=qb[e]}))}));var ub=m$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(e,t){if(t){if(ub[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(y$3(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(y$3(60));if("object"!==_typeof2(t.dangerouslySetInnerHTML)||!("__html"in t.dangerouslySetInnerHTML))throw Error(y$3(61))}if(null!=t.style&&"object"!==_typeof2(t.style))throw Error(y$3(62))}}function wb(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if("function"!=typeof yb)throw Error(y$3(280));var t=e.stateNode;t&&(t=Db(t),yb(e.stateNode,e.type,t))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,t=Ab;if(Ab=zb=null,Bb(e),t)for(e=0;e<t.length;e++)Bb(t[e])}}function Gb(e,t){return e(t)}function Hb(e,t,r,n,i){return e(t,r,n,i)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){null===zb&&null===Ab||(Ib(),Fb())}function Nb(e,t,r){if(Lb)return e(t,r);Lb=!0;try{return Jb(e,t,r)}finally{Lb=!1,Mb()}}function Ob(e,t){var r=e.stateNode;if(null===r)return null;var n=Db(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(y$3(231,t,_typeof2(r)));return r}var Pb=!1;if(fa$1)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch(a){Pb=!1}function Rb(e,t,r,i,o,a,s,c,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(e){Sb=!0,Tb=e}};function Xb(e,t,r,n,i,o,a,s,c){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(e,t,r,n,i,o,a,s,c){if(Xb.apply(this,arguments),Sb){if(!Sb)throw Error(y$3(198));var u=Tb;Sb=!1,Tb=null,Ub||(Ub=!0,Vb=u)}}function Zb(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function $b(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ac(e){if(Zb(e)!==e)throw Error(y$3(188))}function bc(e){var t=e.alternate;if(!t){if(null===(t=Zb(e)))throw Error(y$3(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return ac(i),e;if(o===n)return ac(i),t;o=o.sibling}throw Error(y$3(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(y$3(189))}}if(r.alternate!==n)throw Error(y$3(190))}if(3!==r.tag)throw Error(y$3(188));return r.stateNode.current===r?e:t}function cc(e){if(!(e=bc(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function dc(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:i,targetContainers:[n]}}function sc(e,t){switch(e){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(t.pointerId)}}function tc(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e=rc(t,r,n,i,o),null!==t&&(null!==(t=Cb(t))&&fc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function uc(e,t,r,n,i){switch(t){case"focusin":return kc=tc(kc,e,t,r,n,i),!0;case"dragenter":return lc=tc(lc,e,t,r,n,i),!0;case"mouseover":return mc=tc(mc,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return nc.set(o,tc(nc.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,oc.set(o,tc(oc.get(o)||null,e,t,r,n,i)),!0}return!1}function vc(e){var t=wc(e.target);if(null!==t){var r=Zb(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=$b(r)))return e.blockedOn=t,void hc(e.lanePriority,(function(){r$4.unstable_runWithPriority(e.priority,(function(){gc(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function xc(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=yc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Cb(r))&&fc(t),e.blockedOn=r,!1;t.shift()}return!0}function zc(e,t,r){xc(e)&&r.delete(t)}function Ac(){for(ic=!1;0<jc.length;){var e=jc[0];if(null!==e.blockedOn){null!==(e=Cb(e.blockedOn))&&ec(e);break}for(var t=e.targetContainers;0<t.length;){var r=yc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null),null!==lc&&xc(lc)&&(lc=null),null!==mc&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(e,t){e.blockedOn===t&&(e.blockedOn=null,ic||(ic=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Ac)))}function Cc(e){function t(t){return Bc(t,e)}if(0<jc.length){Bc(jc[0],e);for(var r=1;r<jc.length;r++){var n=jc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==kc&&Bc(kc,e),null!==lc&&Bc(lc,e),null!==mc&&Bc(mc,e),nc.forEach(t),oc.forEach(t),r=0;r<pc.length;r++)(n=pc[r]).blockedOn===e&&(n.blockedOn=null);for(;0<pc.length&&null===(r=pc[0]).blockedOn;)vc(r),null===r.blockedOn&&pc.shift()}function Dc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};function Hc(e){if(Fc[e])return Fc[e];if(!Ec[e])return e;var t,r=Ec[e];for(t in r)if(r.hasOwnProperty(t)&&t in Gc)return Fc[e]=r[t];return e}fa$1&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Nc.set(n,t),Mc.set(n,i),da$1(i,[n])}}var Qc=r$4.unstable_now;Qc();var F$2=8;function Rc(e){if(0!=(1&e))return F$2=15,1;if(0!=(2&e))return F$2=14,2;if(0!=(4&e))return F$2=13,4;var t=24&e;return 0!==t?(F$2=12,t):0!=(32&e)?(F$2=11,32):0!==(t=192&e)?(F$2=10,t):0!=(256&e)?(F$2=9,256):0!==(t=3584&e)?(F$2=8,t):0!=(4096&e)?(F$2=7,4096):0!==(t=4186112&e)?(F$2=6,t):0!==(t=62914560&e)?(F$2=5,t):67108864&e?(F$2=4,67108864):0!=(134217728&e)?(F$2=3,134217728):0!==(t=805306368&e)?(F$2=2,t):0!=(1073741824&e)?(F$2=1,1073741824):(F$2=8,e)}function Sc(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$3(358,e))}}function Uc(e,t){var r=e.pendingLanes;if(0===r)return F$2=0;var n=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)n=o,i=F$2=15;else if(0!==(o=134217727&r)){var c=o&~a;0!==c?(n=Rc(c),i=F$2):0!==(s&=o)&&(n=Rc(s),i=F$2)}else 0!==(o=r&~a)?(n=Rc(o),i=F$2):0!==s&&(n=Rc(s),i=F$2);if(0===n)return 0;if(n=r&((0>(n=31-Vc(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&a)){if(Rc(t),i<=F$2)return t;F$2=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-Vc(t)),n|=e[r],t&=~i;return n}function Wc(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Xc(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Yc(24&~t))?Xc(10,t):e;case 10:return 0===(e=Yc(192&~t))?Xc(8,t):e;case 8:return 0===(e=Yc(3584&~t))&&(0===(e=Yc(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Yc(805306368&~t))&&(t=268435456),t}throw Error(y$3(358,e))}function Yc(e){return e&-e}function Zc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $c(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-Vc(t)]=r}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(e){return 0===e?32:31-(bd(e)/cd|0)|0}var dd=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd=!0;function gd(e,t,r,n){Kb||Ib();var i=hd,o=Kb;Kb=!0;try{Hb(i,e,t,r,n)}finally{(Kb=o)||Mb()}}function id$3(e,t,r,n){ed(dd,hd.bind(null,e,t,r,n))}function hd(e,t,r,n){var i;if(fd)if((i=0==(4&t))&&0<jc.length&&-1<qc.indexOf(e))e=rc(null,e,t,r,n),jc.push(e);else{var o=yc(e,t,r,n);if(null===o)i&&sc(e,n);else{if(i){if(-1<qc.indexOf(e))return e=rc(o,e,t,r,n),void jc.push(e);if(uc(o,e,t,r,n))return;sc(e,n)}jd(e,t,n,null,r)}}}function yc(e,t,r,n){var i=xb(n);if(null!==(i=wc(i))){var o=Zb(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=$b(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return jd(e,t,n,i,r),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,t,r=ld,n=r.length,i="value"in kd?kd.value:kd.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return md=i.slice(e,1<t?1-t:void 0)}function od(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?pd:qd,this.isPropagationStopped=qd,this}return m$3(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),t}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&"mousemove"===e.type?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=m$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$3({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Od[e])&&!!t[e]}function zd(){return Pd}var Qd=m$3({},ud,{key:function(e){if(e.key){var t=Md[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=od(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return"keypress"===e.type?od(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?od(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rd=rd(Qd),Sd=m$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$3({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=fa$1&&"CompositionEvent"in window,be$1=null;fa$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=fa$1&&"TextEvent"in window&&!be$1,de$1=fa$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(e,t){switch(e){case"keyup":return-1!==$d.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(e){return"object"===_typeof2(e=e.detail)&&"data"in e?e.data:null}var ie$1=!1;function je$1(e,t){switch(e){case"compositionend":return he$1(t);case"keypress":return 32!==t.which?null:(fe$1=!0,ee$1);case"textInput":return(e=t.data)===ee$1&&fe$1?null:e;default:return null}}function ke$1(e,t){if(ie$1)return"compositionend"===e||!ae$1&&ge$1(e,t)?(e=nd(),md=ld=kd=null,ie$1=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return de$1&&"ko"!==t.locale?null:t.data}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!le$1[e.type]:"textarea"===t}function ne$1(e,t,r,n){Eb(n),0<(t=oe$1(t,"onChange")).length&&(r=new td("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var pe$1=null,qe$1=null;function re$1(e){se$1(e,0)}function te$1(e){if(Wa(ue$1(e)))return e}function ve$1(e,t){if("change"===e)return t}var we$1=!1;if(fa$1){var xe$1;if(fa$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1="function"==typeof ze$1.oninput}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(e){if("value"===e.propertyName&&te$1(qe$1)){var t=[];if(ne$1(t,qe$1,e,xb(e)),e=re$1,Kb)e(t);else{Kb=!0;try{Gb(e,t)}finally{Kb=!1,Mb()}}}}function Ce$1(e,t,r){"focusin"===e?(Ae$1(),qe$1=r,(pe$1=t).attachEvent("onpropertychange",Be$1)):"focusout"===e&&Ae$1()}function De$1(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return te$1(qe$1)}function Ee$1(e,t){if("click"===e)return te$1(t)}function Fe$1(e,t){if("input"===e||"change"===e)return te$1(t)}function Ge$1(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var He$1="function"==typeof Object.is?Object.is:Ge$1,Ie$1=Object.prototype.hasOwnProperty;function Je$1(e,t){if(He$1(e,t))return!0;if("object"!==_typeof2(e)||null===e||"object"!==_typeof2(t)||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Ie$1.call(t,r[n])||!He$1(e[r[n]],t[r[n]]))return!1;return!0}function Ke$1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Le$1(e,t){var r,n=Ke$1(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ke$1(n)}}function Me$1(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Me$1(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ne$1(){for(var e=window,t=Xa();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(d){r=!1}if(!r)break;t=Xa((e=t.contentWindow).document)}return t}function Oe$1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Pe$1=fa$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Te$1||null==Qe$1||Qe$1!==Xa(n)||("selectionStart"in(n=Qe$1)&&Oe$1(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Se$1&&Je$1(Se$1,n)||(Se$1=n,0<(n=oe$1(Re$1,"onSelect")).length&&(t=new td("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qe$1)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea$1("onMouseEnter",["mouseout","mouseover"]),ea$1("onMouseLeave",["mouseout","mouseover"]),ea$1("onPointerEnter",["pointerout","pointerover"]),ea$1("onPointerLeave",["pointerout","pointerover"]),da$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),da$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),da$1("onBeforeInput",["compositionend","keypress","textInput","paste"]),da$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),da$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),da$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$1));function Ze$1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Yb(n,t,void 0,e),e.currentTarget=null}function se$1(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Ze$1(i,s,u),o=c}else for(a=0;a<n.length;a++){if(c=(s=n[a]).instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Ze$1(i,s,u),o=c}}}if(Ub)throw e=Vb,Ub=!1,Vb=null,e}function G$2(e,t){var r=$e$1(t),n=e+"__bubble";r.has(n)||(af(t,e,2,!1),r.add(n))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(e){e[bf]||(e[bf]=!0,ba$1.forEach((function(t){Ye$1.has(t)||df(t,!1,e,null),df(t,!0,e,null)})))}function df(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=r;if("selectionchange"===e&&9!==r.nodeType&&(o=r.ownerDocument),null!==n&&!t&&Ye$1.has(e)){if("scroll"!==e)return;i|=2,o=n}var a=$e$1(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),af(o,e,i,t),a.add(s))}function af(e,t,r,n){var i=Nc.get(t);switch(void 0===i?2:i){case 0:i=gd;break;case 1:i=id$3;break;default:i=hd}r=i.bind(null,t,r,e),i=void 0,!Pb||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function jd(e,t,r,n,i){var o=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=wc(s)))return;if(5===(c=a.tag)||6===c){n=o=a;continue e}s=s.parentNode}}n=n.return}Nb((function(){var n=o,i=xb(r),a=[];e:{var s=Mc.get(e);if(void 0!==s){var c=td,u=e;switch(e){case"keypress":if(0===od(r))break e;case"keydown":case"keyup":c=Rd;break;case"focusin":u="focus",c=Fd;break;case"focusout":u="blur",c=Fd;break;case"beforeblur":case"afterblur":c=Fd;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Vd;break;case Ic:case Jc:case Kc:c=Hd;break;case Lc:c=Xd;break;case"scroll":c=vd;break;case"wheel":c=Zd;break;case"copy":case"cut":case"paste":c=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Td}var l=0!=(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=n;null!==d;){var m=(p=d).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ob(d,h))&&l.push(ef(d,m,p)))),f)break;d=d.return}0<l.length&&(s=new c(s,u,null,r,i),a.push({event:s,listeners:l}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=r.relatedTarget||r.fromElement)||!wc(u)&&!u[ff])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?wc(u):null)&&(u!==(f=Zb(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=n),c!==u)){if(l=Bd,m="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Td,m="onPointerLeave",h="onPointerEnter",d="pointer"),f=null==c?s:ue$1(c),p=null==u?s:ue$1(u),(s=new l(m,d+"leave",c,r,i)).target=f,s.relatedTarget=p,m=null,wc(i)===n&&((l=new l(h,d+"enter",u,r,i)).target=p,l.relatedTarget=f,m=l),f=m,c&&u)e:{for(h=u,d=0,p=l=c;p;p=gf(p))d++;for(p=0,m=h;m;m=gf(m))p++;for(;0<d-p;)l=gf(l),d--;for(;0<p-d;)h=gf(h),p--;for(;d--;){if(l===h||null!==h&&l===h.alternate)break e;l=gf(l),h=gf(h)}l=null}else l=null;null!==c&&hf(a,s,c,l,!1),null!==u&&null!==f&&hf(a,f,u,l,!0)}if("select"===(c=(s=n?ue$1(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=ve$1;else if(me$1(s))if(we$1)g=Fe$1;else{g=De$1;var v=Ce$1}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=Ee$1);switch(g&&(g=g(e,n))?ne$1(a,g,r,i):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&bb(s,"number",s.value)),v=n?ue$1(n):window,e){case"focusin":(me$1(v)||"true"===v.contentEditable)&&(Qe$1=v,Re$1=n,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(a,r,i);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(a,r,i)}var y;if(ae$1)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ie$1?ge$1(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(de$1&&"ko"!==r.locale&&(ie$1||"onCompositionStart"!==b?"onCompositionEnd"===b&&ie$1&&(y=nd()):(ld="value"in(kd=i)?kd.value:kd.textContent,ie$1=!0)),0<(v=oe$1(n,b)).length&&(b=new Ld(b,e,null,r,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=he$1(r))&&(b.data=y))),(y=ce$1?je$1(e,r):ke$1(e,r))&&(0<(n=oe$1(n,"onBeforeInput")).length&&(i=new Ld("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=y))}se$1(a,t)}))}function ef(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oe$1(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ob(e,r))&&n.unshift(ef(e,o,i)),null!=(o=Ob(e,t))&&n.push(ef(e,o,i))),e=e.return}return n}function gf(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function hf(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,c=s.alternate,u=s.stateNode;if(null!==c&&c===n)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=Ob(r,o))&&a.unshift(ef(r,c,s)):i||null!=(c=Ob(r,o))&&a.push(ef(r,c,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}function jf(){}var kf=null,lf=null;function mf(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function nf(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"===_typeof2(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var of="function"==typeof setTimeout?setTimeout:void 0,pf="function"==typeof clearTimeout?clearTimeout:void 0;function qf(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function rf(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function sf(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var tf=0;function uf(e){return{$$typeof:Ga,toString:e,valueOf:e}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(e){var t=e[wf];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ff]||r[wf]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=sf(e);null!==e;){if(r=e[wf])return r;e=sf(e)}return t}r=(e=r).parentNode}return null}function Cb(e){return!(e=e[wf]||e[ff])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ue$1(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(y$3(33))}function Db(e){return e[xf]||null}function $e$1(e){var t=e[yf];return void 0===t&&(t=e[yf]=new Set),t}var zf=[],Af=-1;function Bf(e){return{current:e}}function H$2(e){0>Af||(e.current=zf[Af],zf[Af]=null,Af--)}function I$2(e,t){Af++,zf[Af]=e.current,e.current=t}var Cf={},M$2=Bf(Cf),N$3=Bf(!1),Df=Cf;function Ef(e,t){var r=e.type.contextTypes;if(!r)return Cf;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ff(e){return null!=(e=e.childContextTypes)}function Gf(){H$2(N$3),H$2(M$2)}function Hf(e,t,r){if(M$2.current!==Cf)throw Error(y$3(168));I$2(M$2,t),I$2(N$3,r)}function If(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(y$3(108,Ra(t)||"Unknown",i));return m$3({},r,n)}function Jf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cf,Df=M$2.current,I$2(M$2,e),I$2(N$3,N$3.current),!0}function Kf(e,t,r){var n=e.stateNode;if(!n)throw Error(y$3(169));r?(e=If(e,t,Df),n.__reactInternalMemoizedMergedChildContext=e,H$2(N$3),H$2(M$2),I$2(M$2,e)):H$2(N$3),I$2(N$3,r)}var Lf=null,Mf=null,Nf=r$4.unstable_runWithPriority,Of=r$4.unstable_scheduleCallback,Pf=r$4.unstable_cancelCallback,Qf=r$4.unstable_shouldYield,Rf=r$4.unstable_requestPaint,Sf=r$4.unstable_now,Tf=r$4.unstable_getCurrentPriorityLevel,Uf=r$4.unstable_ImmediatePriority,Vf=r$4.unstable_UserBlockingPriority,Wf=r$4.unstable_NormalPriority,Xf=r$4.unstable_LowPriority,Yf=r$4.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O$3=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$3(332))}}function fg(e){switch(e){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$3(332))}}function gg(e,t){return e=fg(e),Nf(e,t)}function hg(e,t,r){return e=fg(e),Of(e,t,r)}function ig(){if(null!==bg){var e=bg;bg=null,Pf(e)}jg()}function jg(){if(!cg&&null!==ag){cg=!0;var e=0;try{var t=ag;gg(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),ag=null}catch(c){throw null!==ag&&(ag=ag.slice(e+1)),Of(Uf,ig),c}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(e,t){if(e&&e.defaultProps){for(var r in t=m$3({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(e){var t=mg.current;H$2(mg),e.type._context._currentValue=t}function sg(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function tg(e,t){ng=e,pg=og=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ug=!0),e.firstContext=null)}function vg(e,t){if(pg!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(pg=e,t=1073741823),t={context:e,observedBits:t,next:null},null===og){if(null===ng)throw Error(y$3(308));og=t,ng.dependencies={lanes:0,firstContext:t,responders:null}}else og=og.next=t;return e._currentValue}var wg=!1;function xg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ag(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function Bg(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cg(e,t,r,n){var i=e.updateQueue;wg=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var l=e.alternate;if(null!==l){var f=(l=l.updateQueue).lastBaseUpdate;f!==a&&(null===f?l.firstBaseUpdate=u:f.next=u,l.lastBaseUpdate=c)}}if(null!==o){for(f=i.baseState,a=0,l=u=c=null;;){s=o.lane;var h=o.eventTime;if((n&s)===s){null!==l&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,d=o;switch(s=t,h=r,d.tag){case 1:if("function"==typeof(p=d.payload)){f=p.call(h,f,s);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(s="function"==typeof(p=d.payload)?p.call(h,f,s):p))break e;f=m$3({},f,s);break e;case 2:wg=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===l?(u=l=h,c=f):l=l.next=h,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===l&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,Dg|=a,e.lanes=a,e.memoizedState=f}}function Eg(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(y$3(191,i));i.call(n)}}}var Fg=(new aa$1.Component).refs;function Gg(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:m$3({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Kg={isMounted:function(e){return!!(e=e._reactInternals)&&Zb(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Hg(),i=Ig(e),o=zg(n,i);o.payload=t,null!=r&&(o.callback=r),Ag(e,o),Jg(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Hg(),i=Ig(e),o=zg(n,i);o.tag=1,o.payload=t,null!=r&&(o.callback=r),Ag(e,o),Jg(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Hg(),n=Ig(e),i=zg(r,n);i.tag=2,null!=t&&(i.callback=t),Ag(e,i),Jg(e,n,r)}};function Lg(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Je$1(r,n)||!Je$1(i,o))}function Mg(e,t,r){var n=!1,i=Cf,o=t.contextType;return"object"===_typeof2(o)&&null!==o?o=vg(o):(i=Ff(t)?Df:M$2.current,o=(n=null!=(n=t.contextTypes))?Ef(e,i):Cf),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Kg,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ng(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Kg.enqueueReplaceState(t,t.state,null)}function Og(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Fg,xg(e);var o=t.contextType;"object"===_typeof2(o)&&null!==o?i.context=vg(o):(o=Ff(t)?Df:M$2.current,i.context=Ef(e,o)),Cg(e,r,i,n),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Gg(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Kg.enqueueReplaceState(i,i.state,null),Cg(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Pg=Array.isArray;function Qg(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!==_typeof2(e)){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(y$3(309));var n=r.stateNode}if(!n)throw Error(y$3(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;t===Fg&&(t=n.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(y$3(284));if(!r._owner)throw Error(y$3(290,e))}return e}function Rg(e,t){if("textarea"!==e.type)throw Error(y$3(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sg(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Tg(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags=2,r):n:(t.flags=2,r):r}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,r,n){return null===t||6!==t.tag?((t=Ug(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=Qg(e,t,r),n.return=e,n):((n=Vg(r.type,r.key,r.props,null,e.mode,n)).ref=Qg(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Wg(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function l(e,t,r,n,o){return null===t||7!==t.tag?((t=Xg(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Ug(""+t,e.mode,r)).return=e,t;if("object"===_typeof2(t)&&null!==t){switch(t.$$typeof){case sa:return(r=Vg(t.type,t.key,t.props,null,e.mode,r)).ref=Qg(e,null,t),r.return=e,r;case ta:return(t=Wg(t,e.mode,r)).return=e,t}if(Pg(t)||La(t))return(t=Xg(t,e.mode,r,null)).return=e,t;Rg(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:s(e,t,""+r,n);if("object"===_typeof2(r)&&null!==r){switch(r.$$typeof){case sa:return r.key===i?r.type===ua?l(e,t,r.props.children,n,i):c(e,t,r,n):null;case ta:return r.key===i?u(e,t,r,n):null}if(Pg(r)||La(r))return null!==i?null:l(e,t,r,n,null);Rg(e,r)}return null}function p(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return s(t,e=e.get(r)||null,""+n,i);if("object"===_typeof2(n)&&null!==n){switch(n.$$typeof){case sa:return e=e.get(null===n.key?r:n.key)||null,n.type===ua?l(t,e,n.props.children,i,n.key):c(t,e,n,i);case ta:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(Pg(n)||La(n))return l(t,e=e.get(r)||null,n,i,null);Rg(t,n)}return null}function d(i,a,s,c){for(var u=null,l=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(i,d,s[m],c);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===l?u=v:l.sibling=v,l=v,d=g}if(m===s.length)return r(i,d),u;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],c))&&(a=o(d,a,m),null===l?u=d:l.sibling=d,l=d);return u}for(d=n(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),u}function m(i,a,s,c){var u=La(s);if("function"!=typeof u)throw Error(y$3(150));if(null==(s=u.call(s)))throw Error(y$3(151));for(var l=u=null,d=a,m=a=0,g=null,v=s.next();null!==d&&!v.done;m++,v=s.next()){d.index>m?(g=d,d=null):g=d.sibling;var y=h(i,d,v.value,c);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=o(y,a,m),null===l?u=y:l.sibling=y,l=y,d=g}if(v.done)return r(i,d),u;if(null===d){for(;!v.done;m++,v=s.next())null!==(v=f(i,v.value,c))&&(a=o(v,a,m),null===l?u=v:l.sibling=v,l=v);return u}for(d=n(i,d);!v.done;m++,v=s.next())null!==(v=p(d,i,m,v.value,c))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=o(v,a,m),null===l?u=v:l.sibling=v,l=v);return e&&d.forEach((function(e){return t(i,e)})),u}return function(e,n,o,s){var c="object"===_typeof2(o)&&null!==o&&o.type===ua&&null===o.key;c&&(o=o.props.children);var u="object"===_typeof2(o)&&null!==o;if(u)switch(o.$$typeof){case sa:e:{for(u=o.key,c=n;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===ua){r(e,c.sibling),(n=i(c,o.props.children)).return=e,e=n;break e}}else if(c.elementType===o.type){r(e,c.sibling),(n=i(c,o.props)).ref=Qg(e,c,o),n.return=e,e=n;break e}r(e,c);break}t(e,c),c=c.sibling}o.type===ua?((n=Xg(o.props.children,e.mode,s,o.key)).return=e,e=n):((s=Vg(o.type,o.key,o.props,null,e.mode,s)).ref=Qg(e,n,o),s.return=e,e=s)}return a(e);case ta:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(e,n.sibling),(n=i(n,o.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Wg(o,e.mode,s)).return=e,e=n}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,o)).return=e,e=n):(r(e,n),(n=Ug(o,e.mode,s)).return=e,e=n),a(e);if(Pg(o))return d(e,n,o,s);if(La(o))return m(e,n,o,s);if(u&&Rg(e,o),void 0===o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$3(152,Ra(e.type)||"Component"))}return r(e,n)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(e){if(e===$g)throw Error(y$3(174));return e}function eh(e,t){switch(I$2(ch,t),I$2(bh,e),I$2(ah,$g),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mb(null,"");break;default:t=mb(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}H$2(ah),I$2(ah,t)}function fh(){H$2(ah),H$2(bh),H$2(ch)}function gh(e){dh(ch.current);var t=dh(ah.current),r=mb(t,e.type);t!==r&&(I$2(bh,e),I$2(ah,r))}function hh(e){bh.current===e&&(H$2(ah),H$2(bh))}var P$3=Bf(0);function ih(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jh=null,kh=null,lh=!1;function mh(e,t){var r=nh(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function oh(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function ph(e){if(lh){var t=kh;if(t){var r=t;if(!oh(e,t)){if(!(t=rf(r.nextSibling))||!oh(e,t))return e.flags=-1025&e.flags|2,lh=!1,void(jh=e);mh(jh,r)}jh=e,kh=rf(t.firstChild)}else e.flags=-1025&e.flags|2,lh=!1,jh=e}}function qh(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jh=e}function rh(e){if(e!==jh)return!1;if(!lh)return qh(e),lh=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!nf(t,e.memoizedProps))for(t=kh;t;)mh(e,t),t=rf(t.nextSibling);if(qh(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(y$3(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){kh=rf(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}kh=null}}else kh=jh?rf(e.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var e=0;e<th.length;e++)th[e]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R$3=null,S$2=null,T$1=null,yh=!1,zh=!1;function Ah(){throw Error(y$3(321))}function Bh(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!He$1(e[r],t[r]))return!1;return!0}function Ch(e,t,r,n,i,o){if(xh=o,R$3=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vh.current=null===e||null===e.memoizedState?Dh:Eh,e=r(n,i),zh){o=0;do{if(zh=!1,!(25>o))throw Error(y$3(301));o+=1,T$1=S$2=null,t.updateQueue=null,vh.current=Fh,e=r(n,i)}while(zh)}if(vh.current=Gh,t=null!==S$2&&null!==S$2.next,xh=0,T$1=S$2=R$3=null,yh=!1,t)throw Error(y$3(300));return e}function Hh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===T$1?R$3.memoizedState=T$1=e:T$1=T$1.next=e,T$1}function Ih(){if(null===S$2){var e=R$3.alternate;e=null!==e?e.memoizedState:null}else e=S$2.next;var t=null===T$1?R$3.memoizedState:T$1.next;if(null!==t)T$1=t,S$2=e;else{if(null===e)throw Error(y$3(310));e={memoizedState:(S$2=e).memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},null===T$1?R$3.memoizedState=T$1=e:T$1=T$1.next=e}return T$1}function Jh(e,t){return"function"==typeof t?t(e):t}function Kh(e){var t=Ih(),r=t.queue;if(null===r)throw Error(y$3(311));r.lastRenderedReducer=e;var n=S$2,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var s=a=o=null,c=i;do{var u=c.lane;if((xh&u)===u)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===e?c.eagerState:e(n,c.action);else{var l={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(a=s=l,o=n):s=s.next=l,R$3.lanes|=u,Dg|=u}c=c.next}while(null!==c&&c!==i);null===s?o=n:s.next=a,He$1(n,t.memoizedState)||(ug=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=s,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Lh(e){var t=Ih(),r=t.queue;if(null===r)throw Error(y$3(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);He$1(o,t.memoizedState)||(ug=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Mh(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===n:(e=e.mutableReadLanes,(e=(xh&e)===e)&&(t._workInProgressVersionPrimary=n,th.push(t))),e)return r(t._source);throw th.push(t),Error(y$3(350))}function Nh(e,t,r,n){var i=U$1;if(null===i)throw Error(y$3(349));var o=t._getVersion,a=o(t._source),s=vh.current,c=s.useState((function(){return Mh(i,t,r)})),u=c[1],l=c[0];c=T$1;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,d=f.source;f=f.subscribe;var m=R$3;return e.memoizedState={refs:h,source:t,subscribe:n},s.useEffect((function(){h.getSnapshot=r,h.setSnapshot=u;var e=o(t._source);if(!He$1(a,e)){e=r(t._source),He$1(l,e)||(u(e),e=Ig(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var n=i.entanglements,s=e;0<s;){var c=31-Vc(s),f=1<<c;n[c]|=e,s&=~f}}}),[r,t,n]),s.useEffect((function(){return n(t._source,(function(){var e=h.getSnapshot,r=h.setSnapshot;try{r(e(t._source));var n=Ig(m);i.mutableReadLanes|=n&i.pendingLanes}catch(q){r((function(){throw q}))}}))}),[t,n]),He$1(p,r)&&He$1(d,t)&&He$1(f,n)||((e={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:l}).dispatch=u=Oh.bind(null,R$3,e),c.queue=e,c.baseQueue=null,l=Mh(i,t,r),c.memoizedState=c.baseState=l),l}function Ph(e,t,r){return Nh(Ih(),e,t,r)}function Qh(e){var t=Hh();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:e}).dispatch=Oh.bind(null,R$3,e),[t.memoizedState,e]}function Rh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=R$3.updateQueue)?(t={lastEffect:null},R$3.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Sh(e){return e={current:e},Hh().memoizedState=e}function Th(){return Ih().memoizedState}function Uh(e,t,r,n){var i=Hh();R$3.flags|=e,i.memoizedState=Rh(1|t,r,void 0,void 0===n?null:n)}function Vh(e,t,r,n){var i=Ih();n=void 0===n?null:n;var o=void 0;if(null!==S$2){var a=S$2.memoizedState;if(o=a.destroy,null!==n&&Bh(n,a.deps))return void Rh(t,r,o,n)}R$3.flags|=e,i.memoizedState=Rh(1|t,r,o,n)}function Wh(e,t){return Uh(516,4,e,t)}function Xh(e,t){return Vh(516,4,e,t)}function Yh(e,t){return Vh(4,2,e,t)}function Zh(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $h(e,t,r){return r=null!=r?r.concat([e]):null,Vh(4,2,Zh.bind(null,t,e),r)}function ai$1(){}function bi$1(e,t){var r=Ih();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Bh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ci$1(e,t){var r=Ih();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Bh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function di$1(e,t){var r=eg();gg(98>r?98:r,(function(){e(!0)})),gg(97<r?97:r,(function(){var r=wh.transition;wh.transition=1;try{e(!1),t()}finally{wh.transition=r}}))}function Oh(e,t,r){var n=Hg(),i=Ig(e),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===R$3||null!==a&&a===R$3)zh=yh=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=a(s,r);if(o.eagerReducer=a,o.eagerState=c,He$1(c,s))return}catch(l){}Jg(e,i,n)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(e,t){return Hh().memoizedState=[e,void 0===t?null:t],e},useContext:vg,useEffect:Wh,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Uh(4,2,Zh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Uh(4,2,e,t)},useMemo:function(e,t){var r=Hh();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Hh();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oh.bind(null,R$3,e),[n.memoizedState,e]},useRef:Sh,useState:Qh,useDebugValue:ai$1,useDeferredValue:function(e){var t=Qh(e),r=t[0],n=t[1];return Wh((function(){var t=wh.transition;wh.transition=1;try{n(e)}finally{wh.transition=t}}),[e]),r},useTransition:function(){var e=Qh(!1),t=e[0];return Sh(e=di$1.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var n=Hh();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},Nh(n,e,t,r)},useOpaqueIdentifier:function(){if(lh){var e=!1,t=uf((function(){throw e||(e=!0,r("r:"+(tf++).toString(36))),Error(y$3(355))})),r=Qh(t)[1];return 0==(2&R$3.mode)&&(R$3.flags|=516,Rh(5,(function(){r("r:"+(tf++).toString(36))}),void 0,null)),t}return Qh(t="r:"+(tf++).toString(36)),t},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai$1,useDeferredValue:function(e){var t=Kh(Jh),r=t[0],n=t[1];return Xh((function(){var t=wh.transition;wh.transition=1;try{n(e)}finally{wh.transition=t}}),[e]),r},useTransition:function(){var e=Kh(Jh)[0];return[Th().current,e]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai$1,useDeferredValue:function(e){var t=Lh(Jh),r=t[0],n=t[1];return Xh((function(){var t=wh.transition;wh.transition=1;try{n(e)}finally{wh.transition=t}}),[e]),r},useTransition:function(){var e=Lh(Jh)[0];return[Th().current,e]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei$1=ra.ReactCurrentOwner,ug=!1;function fi$1(e,t,r,n){t.child=null===e?Zg(t,null,r,n):Yg(t,e.child,r,n)}function gi$1(e,t,r,n,i){r=r.render;var o=t.ref;return tg(t,i),n=Ch(e,t,r,n,o,i),null===e||ug?(t.flags|=1,fi$1(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,hi$1(e,t,i))}function ii$1(e,t,r,n,i,o){if(null===e){var a=r.type;return"function"!=typeof a||ji$1(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Vg(r.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ki$1(e,t,a,n,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(r=null!==(r=r.compare)?r:Je$1)(i,n)&&e.ref===t.ref)?hi$1(e,t,o):(t.flags|=1,(e=Tg(a,n)).ref=t.ref,e.return=t,t.child=e)}function ki$1(e,t,r,n,i,o){if(null!==e&&Je$1(e.memoizedProps,n)&&e.ref===t.ref){if(ug=!1,0==(o&i))return t.lanes=e.lanes,hi$1(e,t,o);0!=(16384&e.flags)&&(ug=!0)}return li$1(e,t,r,n,o)}function mi$1(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ni$1(t,r);else{if(0==(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ni$1(t,e),null;t.memoizedState={baseLanes:0},ni$1(t,null!==o?o.baseLanes:r)}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,ni$1(t,n);return fi$1(e,t,i,r),t.child}function oi$1(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function li$1(e,t,r,n,i){var o=Ff(r)?Df:M$2.current;return o=Ef(t,o),tg(t,i),r=Ch(e,t,r,n,o,i),null===e||ug?(t.flags|=1,fi$1(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,hi$1(e,t,i))}function pi$1(e,t,r,n,i){if(Ff(r)){var o=!0;Jf(t)}else o=!1;if(tg(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Mg(t,r,n),Og(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=r.contextType;"object"===_typeof2(u)&&null!==u?u=vg(u):u=Ef(t,u=Ff(r)?Df:M$2.current);var l=r.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||c!==u)&&Ng(t,a,n,u),wg=!1;var h=t.memoizedState;a.state=h,Cg(t,n,a,i),c=t.memoizedState,s!==n||h!==c||N$3.current||wg?("function"==typeof l&&(Gg(t,r,l,n),c=t.memoizedState),(s=wg||Lg(t,r,s,n,h,c,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=s):("function"==typeof a.componentDidMount&&(t.flags|=4),n=!1)}else{a=t.stateNode,yg(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:lg(t.type,s),a.props=u,f=t.pendingProps,h=a.context,"object"===_typeof2(c=r.contextType)&&null!==c?c=vg(c):c=Ef(t,c=Ff(r)?Df:M$2.current);var p=r.getDerivedStateFromProps;(l="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||h!==c)&&Ng(t,a,n,c),wg=!1,h=t.memoizedState,a.state=h,Cg(t,n,a,i);var d=t.memoizedState;s!==f||h!==d||N$3.current||wg?("function"==typeof p&&(Gg(t,r,p,n),d=t.memoizedState),(u=wg||Lg(t,r,u,n,h,d,c))?(l||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,d,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,d,c)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=c,n=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),n=!1)}return qi$1(e,t,r,n,o,i)}function qi$1(e,t,r,n,i,o){oi$1(e,t);var a=0!=(64&t.flags);if(!n&&!a)return i&&Kf(t,r,!1),hi$1(e,t,o);n=t.stateNode,ei$1.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Yg(t,e.child,null,o),t.child=Yg(t,null,s,o)):fi$1(e,t,s,o),t.memoizedState=n.state,i&&Kf(t,r,!0),t.child}function ri$1(e){var t=e.stateNode;t.pendingContext?Hf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hf(e,t.context,!1),eh(e,t.containerInfo)}var si$1={dehydrated:null,retryLane:0},Bi$1,Ci$1,Di$1,Ei$1;function ti$1(e,t,r){var n,i=t.pendingProps,o=P$3.current,a=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&o)),n?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),I$2(P$3,1&o),null===e?(void 0!==i.fallback&&ph(t),e=i.children,o=i.fallback,a?(e=ui$1(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=si$1,e):"number"==typeof i.unstable_expectedLoadTime?(e=ui$1(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=si$1,t.lanes=33554432,e):((r=vi$1({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,a?(i=wi$1(e,t,i.children,i.fallback,r),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:r}:{baseLanes:o.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=si$1,i):(r=xi$1(e,t,i.children,r),t.memoizedState=null,r))}function ui$1(e,t,r,n){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=vi$1(t,i,0,null),r=Xg(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function xi$1(e,t,r,n){var i=e.child;return e=i.sibling,r=Tg(i,{mode:"visible",children:r}),0==(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function wi$1(e,t,r,n,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:r};return 0==(2&o)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=s,null!==(a=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Tg(a,s),null!==e?n=Tg(e,n):(n=Xg(n,o,i,null)).flags|=2,n.return=t,r.return=t,r.sibling=n,t.child=r,n}function yi$1(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),sg(e.return,t)}function zi$1(e,t,r,n,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i,a.lastEffect=o)}function Ai$1(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(fi$1(e,t,n.children,r),0!=(2&(n=P$3.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&yi$1(e,r);else if(19===e.tag)yi$1(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(I$2(P$3,n),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ih(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),zi$1(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ih(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}zi$1(t,!0,r,null,o,t.lastEffect);break;case"together":zi$1(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function hi$1(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dg|=t.lanes,0!=(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(y$3(153));if(null!==t.child){for(r=Tg(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Tg(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function Fi$1(e,t){if(!lh)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gi$1(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ff(t.type)&&Gf(),null;case 3:return fh(),H$2(N$3),H$2(M$2),uh(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(rh(t)?t.flags|=4:n.hydrate||(t.flags|=256)),Ci$1(t),null;case 5:hh(t);var i=dh(ch.current);if(r=t.type,null!==e&&null!=t.stateNode)Di$1(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(y$3(166));return null}if(e=dh(ah.current),rh(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[wf]=t,n[xf]=o,r){case"dialog":G$2("cancel",n),G$2("close",n);break;case"iframe":case"object":case"embed":G$2("load",n);break;case"video":case"audio":for(e=0;e<Xe$1.length;e++)G$2(Xe$1[e],n);break;case"source":G$2("error",n);break;case"img":case"image":case"link":G$2("error",n),G$2("load",n);break;case"details":G$2("toggle",n);break;case"input":Za(n,o),G$2("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},G$2("invalid",n);break;case"textarea":hb(n,o),G$2("invalid",n)}for(var a in vb(r,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?n.textContent!==i&&(e=["children",i]):"number"==typeof i&&n.textContent!==""+i&&(e=["children",""+i]):ca$1.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&G$2("scroll",n));switch(r){case"input":Va(n),cb(n,o,!0);break;case"textarea":Va(n),jb(n);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(n.onclick=jf)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===kb.html&&(e=lb(r)),e===kb.html?"script"===r?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),"select"===r&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[wf]=t,e[xf]=n,Bi$1(e,t,!1,!1),t.stateNode=e,a=wb(r,n),r){case"dialog":G$2("cancel",e),G$2("close",e),i=n;break;case"iframe":case"object":case"embed":G$2("load",e),i=n;break;case"video":case"audio":for(i=0;i<Xe$1.length;i++)G$2(Xe$1[i],e);i=n;break;case"source":G$2("error",e),i=n;break;case"img":case"image":case"link":G$2("error",e),G$2("load",e),i=n;break;case"details":G$2("toggle",e),i=n;break;case"input":Za(e,n),i=Ya(e,n),G$2("invalid",e);break;case"option":i=eb(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=m$3({},n,{value:void 0}),G$2("invalid",e);break;case"textarea":hb(e,n),i=gb(e,n),G$2("invalid",e);break;default:i=n}vb(r,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];"style"===o?tb(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ob(e,c):"children"===o?"string"==typeof c?("textarea"!==r||""!==c)&&pb(e,c):"number"==typeof c&&pb(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ca$1.hasOwnProperty(o)?null!=c&&"onScroll"===o&&G$2("scroll",e):null!=c&&qa(e,o,c,a))}switch(r){case"input":Va(e),cb(e,n,!1);break;case"textarea":Va(e),jb(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Sa(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?fb(e,!!n.multiple,o,!1):null!=n.defaultValue&&fb(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=jf)}mf(r,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ei$1(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(y$3(166));r=dh(ch.current),dh(ah.current),rh(t)?(n=t.stateNode,r=t.memoizedProps,n[wf]=t,n.nodeValue!==r&&(t.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[wf]=t,t.stateNode=n)}return null;case 13:return H$2(P$3),n=t.memoizedState,0!=(64&t.flags)?(t.lanes=r,t):(n=null!==n,r=!1,null===e?void 0!==t.memoizedProps.fallback&&rh(t):r=null!==e.memoizedState,n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&P$3.current)?0===V$2&&(V$2=3):(0!==V$2&&3!==V$2||(V$2=4),null===U$1||0==(134217727&Dg)&&0==(134217727&Hi$1)||Ii$1(U$1,W$3))),(n||r)&&(t.flags|=4),null);case 4:return fh(),Ci$1(t),null===e&&cf(t.stateNode.containerInfo),null;case 10:return rg(t),null;case 19:if(H$2(P$3),null===(n=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=n.rendering))if(o)Fi$1(n,!1);else{if(0!==V$2||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=ih(e))){for(t.flags|=64,Fi$1(n,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return I$2(P$3,1&P$3.current|2),t.child}e=e.sibling}null!==n.tail&&O$3()>Ji$1&&(t.flags|=64,o=!0,Fi$1(n,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=ih(a))){if(t.flags|=64,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Fi$1(n,!0),null===n.tail&&"hidden"===n.tailMode&&!a.alternate&&!lh)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*O$3()-n.renderingStartTime>Ji$1&&1073741824!==r&&(t.flags|=64,o=!0,Fi$1(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(null!==(r=n.last)?r.sibling=a:t.child=a,n.last=a)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=O$3(),r.sibling=null,t=P$3.current,I$2(P$3,o?1&t|2:1&t),r):null;case 23:case 24:return Ki$1(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(y$3(156,t.tag))}function Li$1(e){switch(e.tag){case 1:Ff(e.type)&&Gf();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(fh(),H$2(N$3),H$2(M$2),uh(),0!=(64&(t=e.flags)))throw Error(y$3(285));return e.flags=-4097&t|64,e;case 5:return hh(e),null;case 13:return H$2(P$3),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return H$2(P$3),null;case 4:return fh(),null;case 10:return rg(e),null;case 23:case 24:return Ki$1(),null;default:return null}}function Mi$1(e,t){try{var r="",n=t;do{r+=Qa(n),n=n.return}while(n);var i=r}catch(f){i="\nError generating stack: "+f.message+"\n"+f.stack}return{value:e,source:t,stack:i}}function Ni$1(e,t){try{console.error(t.value)}catch(c){setTimeout((function(){throw c}))}}Bi$1=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ci$1=function(){},Di$1=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,dh(ah.current);var o,a=null;switch(r){case"input":i=Ya(e,i),n=Ya(e,n),a=[];break;case"option":i=eb(e,i),n=eb(e,n),a=[];break;case"select":i=m$3({},i,{value:void 0}),n=m$3({},n,{value:void 0}),a=[];break;case"textarea":i=gb(e,i),n=gb(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=jf)}for(u in vb(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(ca$1.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(s=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(ca$1.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&G$2("scroll",e),a||s===c||(a=[])):"object"===_typeof2(c)&&null!==c&&c.$$typeof===Ga?c.toString():(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ei$1=function(e,t,r,n){r!==n&&(t.flags|=4)};var Oi$1="function"==typeof WeakMap?WeakMap:Map;function Pi$1(e,t,r){(r=zg(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qi$1||(Qi$1=!0,Ri$1=n),Ni$1(e,t)},r}function Si$1(e,t,r){(r=zg(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return Ni$1(e,t),n(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Ti$1?Ti$1=new Set([this]):Ti$1.add(this),Ni$1(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var Ui$1="function"==typeof WeakSet?WeakSet:Set;function Vi$1(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(c){Wi$1(e,c)}else t.current=null}function Xi$1(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:lg(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qf(t.stateNode.containerInfo))}throw Error(y$3(163))}function Yi$1(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;n=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Zi$1(r,e),$i$1(r,e)),e=n}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:lg(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&Eg(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:case 1:e=r.child.stateNode}Eg(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&mf(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Cc(r)))))}throw Error(y$3(163))}function aj(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)"function"==typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,n.style.display=sb("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function bj(e,t){if(Mf&&"function"==typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,t)}catch(f){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,void 0!==i)if(0!=(4&n))Zi$1(t,r);else{n=t;try{i()}catch(f){Wi$1(n,f)}}r=r.next}while(r!==e)}break;case 1:if(Vi$1(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(f){Wi$1(t,f)}break;case 5:Vi$1(t);break;case 4:cj(e,t)}}function dj(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ej(e){return 5===e.tag||3===e.tag||4===e.tag}function fj(e){e:{for(var t=e.return;null!==t;){if(ej(t))break e;t=t.return}throw Error(y$3(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(y$3(161))}16&r.flags&&(pb(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ej(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}n?gj(e,r,t):hj(e,r,t)}function gj(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=jf));else if(4!==n&&null!==(e=e.child))for(gj(e,t,r),e=e.sibling;null!==e;)gj(e,t,r),e=e.sibling}function hj(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(hj(e,t,r),e=e.sibling;null!==e;)hj(e,t,r),e=e.sibling}function cj(e,t){for(var r,n,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(y$3(160));switch(r=o.stateNode,o.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,c=s;;)if(bj(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(a=r,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,n=!0,i.child.return=i,i=i.child;continue}}else if(bj(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ij(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3==(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==r)}return;case 1:case 12:case 17:return;case 5:if(null!=(r=t.stateNode)){n=t.memoizedProps;var i=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(r[xf]=n,"input"===e&&"radio"===n.type&&null!=n.name&&$a(r,n),wb(e,i),t=wb(e,n),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?tb(r,s):"dangerouslySetInnerHTML"===a?ob(r,s):"children"===a?pb(r,s):qa(r,a,s,t)}switch(e){case"input":ab(r,n);break;case"textarea":ib(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(o=n.value)?fb(r,!!n.multiple,o,!1):e!==!!n.multiple&&(null!=n.defaultValue?fb(r,!!n.multiple,n.defaultValue,!0):fb(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(y$3(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,Cc(r.containerInfo)));case 13:return null!==t.memoizedState&&(jj=O$3(),aj(t.child,!0)),void kj(t);case 19:return void kj(t);case 23:case 24:return void aj(t,null!==t.memoizedState)}throw Error(y$3(163))}function kj(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ui$1),t.forEach((function(t){var n=lj.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function mj(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$2=0,U$1=null,Y$2=null,W$3=0,qj=0,rj=Bf(0),V$2=0,sj=null,tj=0,Dg=0,Hi$1=0,uj=0,vj=null,jj=0,Ji$1=1/0;function wj(){Ji$1=O$3()+500}var Z$2=null,Qi$1=!1,Ri$1=null,Ti$1=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1,ck;function Hg(){return 0!=(48&X$2)?O$3():-1!==Fj?Fj:Fj=O$3()}function Ig(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===eg()?1:2;if(0===Gj&&(Gj=tj),0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0),e=Gj;var t=4186112&~Hj;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=eg(),0!=(4&X$2)&&98===e?e=Xc(12,Gj):e=Xc(e=Sc(e),Gj),e}function Jg(e,t,r){if(50<Dj)throw Dj=0,Ej=null,Error(y$3(185));if(null===(e=Kj(e,t)))return null;$c(e,t,r),e===U$1&&(Hi$1|=t,4===V$2&&Ii$1(e,W$3));var n=eg();1===t?0!=(8&X$2)&&0==(48&X$2)?Lj(e):(Mj(e,r),0===X$2&&(wj(),ig())):(0==(4&X$2)||98!==n&&99!==n||(null===Cj?Cj=new Set([e]):Cj.add(e)),Mj(e,r)),vj=e}function Kj(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function Mj(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vc(a),c=1<<s,u=o[s];if(-1===u){if(0==(c&n)||0!=(c&i)){u=t,Rc(c);var l=F$2;o[s]=10<=l?u+250:6<=l?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(n=Uc(e,e===U$1?W$3:0),t=F$2,0===n)null!==r&&(r!==Zf&&Pf(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Zf&&Pf(r)}15===t?(r=Lj.bind(null,e),null===ag?(ag=[r],bg=Of(Uf,jg)):ag.push(r),r=Zf):14===t?r=hg(99,Lj.bind(null,e)):r=hg(r=Tc(t),Nj.bind(null,e)),e.callbackPriority=t,e.callbackNode=r}}function Nj(e){if(Fj=-1,Hj=Gj=0,0!=(48&X$2))throw Error(y$3(327));var t=e.callbackNode;if(Oj()&&e.callbackNode!==t)return null;var r=Uc(e,e===U$1?W$3:0);if(0===r)return null;var n=r,i=X$2;X$2|=16;var o=Pj();for(U$1===e&&W$3===n||(wj(),Qj(e,n));;)try{Rj();break}catch(h){Sj(e,h)}if(qg(),oj.current=o,X$2=i,null!==Y$2?n=0:(U$1=null,W$3=0,n=V$2),0!=(tj&Hi$1))Qj(e,0);else if(0!==n){if(2===n&&(X$2|=64,e.hydrate&&(e.hydrate=!1,qf(e.containerInfo)),0!==(r=Wc(e))&&(n=Tj(e,r))),1===n)throw t=sj,Qj(e,0),Ii$1(e,r),Mj(e,O$3()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(y$3(345));case 2:case 5:Uj(e);break;case 3:if(Ii$1(e,r),(62914560&r)===r&&10<(n=jj+500-O$3())){if(0!==Uc(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Hg(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=of(Uj.bind(null,e),n);break}Uj(e);break;case 4:if(Ii$1(e,r),(4186112&r)===r)break;for(n=e.eventTimes,i=-1;0<r;){var a=31-Vc(r);o=1<<a,(a=n[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=O$3()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nj(r/1960))-r)){e.timeoutHandle=of(Uj.bind(null,e),r);break}Uj(e);break;default:throw Error(y$3(329))}}return Mj(e,O$3()),e.callbackNode===t?Nj.bind(null,e):null}function Ii$1(e,t){for(t&=~uj,t&=~Hi$1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vc(t),n=1<<r;e[r]=-1,t&=~n}}function Lj(e){if(0!=(48&X$2))throw Error(y$3(327));if(Oj(),e===U$1&&0!=(e.expiredLanes&W$3)){var t=W$3,r=Tj(e,t);0!=(tj&Hi$1)&&(r=Tj(e,t=Uc(e,t)))}else r=Tj(e,t=Uc(e,0));if(0!==e.tag&&2===r&&(X$2|=64,e.hydrate&&(e.hydrate=!1,qf(e.containerInfo)),0!==(t=Wc(e))&&(r=Tj(e,t))),1===r)throw r=sj,Qj(e,0),Ii$1(e,t),Mj(e,O$3()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uj(e),Mj(e,O$3()),null}function Vj(){if(null!==Cj){var e=Cj;Cj=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Mj(e,O$3())}))}ig()}function Wj(e,t){var r=X$2;X$2|=1;try{return e(t)}finally{0===(X$2=r)&&(wj(),ig())}}function Xj(e,t){var r=X$2;X$2&=-2,X$2|=8;try{return e(t)}finally{0===(X$2=r)&&(wj(),ig())}}function ni$1(e,t){I$2(rj,qj),qj|=t,tj|=t}function Ki$1(){qj=rj.current,H$2(rj)}function Qj(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,pf(r)),null!==Y$2)for(r=Y$2.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&Gf();break;case 3:fh(),H$2(N$3),H$2(M$2),uh();break;case 5:hh(n);break;case 4:fh();break;case 13:case 19:H$2(P$3);break;case 10:rg(n);break;case 23:case 24:Ki$1()}r=r.return}U$1=e,Y$2=Tg(e.current,null),W$3=qj=tj=t,V$2=0,sj=null,uj=Hi$1=Dg=0}function Sj(e,t){for(;;){var r=Y$2;try{if(qg(),vh.current=Gh,yh){for(var n=R$3.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}yh=!1}if(xh=0,T$1=S$2=R$3=null,zh=!1,pj.current=null,null===r||null===r.return){V$2=1,sj=t,Y$2=null;break}e:{var o=e,a=r.return,s=r,c=t;if(t=W$3,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"===_typeof2(c)&&"function"==typeof c.then){var u=c;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&P$3.current),h=a;do{var p;if(p=13===h.tag){var d=h.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var m=h.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(p){var g=h.updateQueue;if(null===g){var v=new Set;v.add(u),h.updateQueue=v}else g.add(u);if(0==(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=zg(-1,1);y.tag=2,Ag(s,y)}s.lanes|=1;break e}c=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Oi$1,c=new Set,b.set(u,c)):void 0===(c=b.get(u))&&(c=new Set,b.set(u,c)),!c.has(s)){c.add(s);var _=Yj.bind(null,o,u,s);u.then(_,_)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);c=Error((Ra(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==V$2&&(V$2=2),c=Mi$1(c,s),h=a;do{switch(h.tag){case 3:o=c,h.flags|=4096,t&=-t,h.lanes|=t,Bg(h,Pi$1(h,o,t));break e;case 1:o=c;var A=h.type,M=h.stateNode;if(0==(64&h.flags)&&("function"==typeof A.getDerivedStateFromError||null!==M&&"function"==typeof M.componentDidCatch&&(null===Ti$1||!Ti$1.has(M)))){h.flags|=4096,t&=-t,h.lanes|=t,Bg(h,Si$1(h,o,t));break e}}h=h.return}while(null!==h)}Zj(r)}catch(x){t=x,Y$2===r&&null!==r&&(Y$2=r=r.return);continue}break}}function Pj(){var e=oj.current;return oj.current=Gh,null===e?Gh:e}function Tj(t,r){var n=X$2;X$2|=16;var i=Pj();for(U$1===t&&W$3===r||Qj(t,r);;)try{ak();break}catch(e){Sj(t,e)}if(qg(),X$2=n,oj.current=i,null!==Y$2)throw Error(y$3(261));return U$1=null,W$3=0,V$2}function ak(){for(;null!==Y$2;)bk(Y$2)}function Rj(){for(;null!==Y$2&&!Qf();)bk(Y$2)}function bk(e){var t=ck(e.alternate,e,qj);e.memoizedProps=e.pendingProps,null===t?Zj(e):Y$2=t,pj.current=null}function Zj(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(r=Gi$1(r,t,qj)))return void(Y$2=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!=(1073741824&qj)||0==(4&r.mode)){for(var n=0,i=r.child;null!==i;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=Li$1(t)))return r.flags&=2047,void(Y$2=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Y$2=t);Y$2=t=e}while(null!==t);0===V$2&&(V$2=5)}function Uj(e){var t=eg();return gg(99,dk.bind(null,e,t)),null}function dk(e,t){do{Oj()}while(null!==yj);if(0!=(48&X$2))throw Error(y$3(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(y$3(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var c=31-Vc(o),u=1<<c;i[c]=0,a[c]=-1,s[c]=-1,o&=~u}if(null!==Cj&&0==(24&n)&&Cj.has(e)&&Cj.delete(e),e===U$1&&(Y$2=U$1=null,W$3=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(i=X$2,X$2|=32,pj.current=null,kf=fd,Oe$1(a=Ne$1())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(u=s.getSelection&&s.getSelection())&&0!==u.rangeCount){s=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{s.nodeType,c.nodeType}catch($){s=null;break e}var l=0,f=-1,h=-1,p=0,d=0,m=a,g=null;t:for(;;){for(var v;m!==s||0!==o&&3!==m.nodeType||(f=l+o),m!==c||0!==u&&3!==m.nodeType||(h=l+u),3===m.nodeType&&(l+=m.nodeValue.length),null!==(v=m.firstChild);)g=m,m=v;for(;;){if(m===a)break t;if(g===s&&++p===o&&(f=l),g===c&&++d===u&&(h=l),null!==(v=m.nextSibling))break;g=(m=g).parentNode}m=v}s=-1===f||-1===h?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;lf={focusedElem:a,selectionRange:s},fd=!1,Ij=null,Jj=!1,Z$2=n;do{try{ek()}catch($){if(null===Z$2)throw Error(y$3(330));Wi$1(Z$2,$),Z$2=Z$2.nextEffect}}while(null!==Z$2);Ij=null,Z$2=n;do{try{for(a=e;null!==Z$2;){var y=Z$2.flags;if(16&y&&pb(Z$2.stateNode,""),128&y){var b=Z$2.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&y){case 2:fj(Z$2),Z$2.flags&=-3;break;case 6:fj(Z$2),Z$2.flags&=-3,ij(Z$2.alternate,Z$2);break;case 1024:Z$2.flags&=-1025;break;case 1028:Z$2.flags&=-1025,ij(Z$2.alternate,Z$2);break;case 4:ij(Z$2.alternate,Z$2);break;case 8:cj(a,s=Z$2);var A=s.alternate;dj(s),null!==A&&dj(A)}Z$2=Z$2.nextEffect}}catch($){if(null===Z$2)throw Error(y$3(330));Wi$1(Z$2,$),Z$2=Z$2.nextEffect}}while(null!==Z$2);if(_=lf,b=Ne$1(),y=_.focusedElem,a=_.selectionRange,b!==y&&y&&y.ownerDocument&&Me$1(y.ownerDocument.documentElement,y)){null!==a&&Oe$1(y)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(_,y.value.length)):(_=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),s=y.textContent.length,A=Math.min(a.start,s),a=void 0===a.end?A:Math.min(a.end,s),!_.extend&&A>a&&(s=a,a=A,A=s),s=Le$1(y,A),o=Le$1(y,a),s&&o&&(1!==_.rangeCount||_.anchorNode!==s.node||_.anchorOffset!==s.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),_.removeAllRanges(),A>a?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=y;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<b.length;y++)(_=b[y]).element.scrollLeft=_.left,_.element.scrollTop=_.top}fd=!!kf,lf=kf=null,e.current=r,Z$2=n;do{try{for(y=e;null!==Z$2;){var M=Z$2.flags;if(36&M&&Yi$1(y,Z$2.alternate,Z$2),128&M){b=void 0;var x=Z$2.ref;if(null!==x){var w=Z$2.stateNode;Z$2.tag,b=w,"function"==typeof x?x(b):x.current=b}}Z$2=Z$2.nextEffect}}catch($){if(null===Z$2)throw Error(y$3(330));Wi$1(Z$2,$),Z$2=Z$2.nextEffect}}while(null!==Z$2);Z$2=null,$f(),X$2=i}else e.current=r;if(xj)xj=!1,yj=e,zj=t;else for(Z$2=n;null!==Z$2;)t=Z$2.nextEffect,Z$2.nextEffect=null,8&Z$2.flags&&((M=Z$2).sibling=null,M.stateNode=null),Z$2=t;if(0===(n=e.pendingLanes)&&(Ti$1=null),1===n?e===Ej?Dj++:(Dj=0,Ej=e):Dj=0,r=r.stateNode,Mf&&"function"==typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,r,void 0,64==(64&r.current.flags))}catch($){}if(Mj(e,O$3()),Qi$1)throw Qi$1=!1,e=Ri$1,Ri$1=null,e;return 0!=(8&X$2)||ig(),null}function ek(){for(;null!==Z$2;){var e=Z$2.alternate;Jj||null===Ij||(0!=(8&Z$2.flags)?dc(Z$2,Ij)&&(Jj=!0):13===Z$2.tag&&mj(e,Z$2)&&dc(Z$2,Ij)&&(Jj=!0));var t=Z$2.flags;0!=(256&t)&&Xi$1(e,Z$2),0==(512&t)||xj||(xj=!0,hg(97,(function(){return Oj(),null}))),Z$2=Z$2.nextEffect}}function Oj(){if(90!==zj){var e=97<zj?97:zj;return zj=90,gg(e,fk)}return!1}function $i$1(e,t){Aj.push(t,e),xj||(xj=!0,hg(97,(function(){return Oj(),null})))}function Zi$1(e,t){Bj.push(t,e),xj||(xj=!0,hg(97,(function(){return Oj(),null})))}function fk(){if(null===yj)return!1;var e=yj;if(yj=null,0!=(48&X$2))throw Error(y$3(331));var t=X$2;X$2|=32;var r=Bj;Bj=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(k){if(null===o)throw Error(y$3(330));Wi$1(o,k)}}for(r=Aj,Aj=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var s=i.create;i.destroy=s()}catch(k){if(null===o)throw Error(y$3(330));Wi$1(o,k)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return X$2=t,ig(),!0}function gk(e,t,r){Ag(e,t=Pi$1(e,t=Mi$1(r,t),1)),t=Hg(),null!==(e=Kj(e,1))&&($c(e,1,t),Mj(e,t))}function Wi$1(e,t){if(3===e.tag)gk(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){gk(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Ti$1||!Ti$1.has(n))){var i=Si$1(r,e=Mi$1(t,e),1);if(Ag(r,i),i=Hg(),null!==(r=Kj(r,1)))$c(r,1,i),Mj(r,i);else if("function"==typeof n.componentDidCatch&&(null===Ti$1||!Ti$1.has(n)))try{n.componentDidCatch(t,e)}catch(f){}break}}r=r.return}}function Yj(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Hg(),e.pingedLanes|=e.suspendedLanes&r,U$1===e&&(W$3&r)===r&&(4===V$2||3===V$2&&(62914560&W$3)===W$3&&500>O$3()-jj?Qj(e,0):uj|=r),Mj(e,t)}function lj(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===eg()?1:2:(0===Gj&&(Gj=tj),0===(t=Yc(62914560&~Gj))&&(t=4194304))),r=Hg(),null!==(e=Kj(e,t))&&($c(e,t,r),Mj(e,r))}function ik(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(e,t,r,n){return new ik(e,t,r,n)}function ji$1(e){return!(!(e=e.prototype)||!e.isReactComponent)}function hk(e){if("function"==typeof e)return ji$1(e)?1:0;if(null!=e){if((e=e.$$typeof)===Aa)return 11;if(e===Da)return 14}return 2}function Tg(e,t){var r=e.alternate;return null===r?((r=nh(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Vg(e,t,r,n,i,o){var a=2;if(n=e,"function"==typeof e)ji$1(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ua:return Xg(r.children,i,o,t);case Ha:a=8,i|=16;break;case wa:a=8,i|=1;break;case xa:return(e=nh(12,r,t,8|i)).elementType=xa,e.type=xa,e.lanes=o,e;case Ba:return(e=nh(13,r,t,i)).type=Ba,e.elementType=Ba,e.lanes=o,e;case Ca:return(e=nh(19,r,t,i)).elementType=Ca,e.lanes=o,e;case Ia:return vi$1(r,i,o,t);case Ja:return(e=nh(24,r,t,i)).elementType=Ja,e.lanes=o,e;default:if("object"===_typeof2(e)&&null!==e)switch(e.$$typeof){case ya:a=10;break e;case za:a=9;break e;case Aa:a=11;break e;case Da:a=14;break e;case Ea:a=16,n=null;break e;case Fa:a=22;break e}throw Error(y$3(130,null==e?e:_typeof2(e),""))}return(t=nh(a,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function Xg(e,t,r,n){return(e=nh(7,e,n,t)).lanes=r,e}function vi$1(e,t,r,n){return(e=nh(23,e,n,t)).elementType=Ia,e.lanes=r,e}function Ug(e,t,r){return(e=nh(6,e,null,t)).lanes=r,e}function Wg(e,t,r){return(t=nh(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jk(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function lk(e,t,r,n){var i=t.current,o=Hg(),a=Ig(i);e:if(r){t:{if(Zb(r=r._reactInternals)!==r||1!==r.tag)throw Error(y$3(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Ff(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(y$3(171))}if(1===r.tag){var c=r.type;if(Ff(c)){r=If(r,c,s);break e}}r=s}else r=Cf;return null===t.context?t.context=r:t.pendingContext=r,(t=zg(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),Ag(i,t),Jg(i,a,o),a}function mk(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nk(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ok(e,t){nk(e,t),(e=e.alternate)&&nk(e,t)}function pk(){return null}function qk(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new jk(e,t,null!=r&&!0===r.hydrate),t=nh(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,xg(t),e[ff]=r.current,cf(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var i=(t=n[e])._getVersion;i=i(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}function rk(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sk(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new qk(e,0,t?{hydrate:!0}:void 0)}function tk(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=mk(a);s.call(e)}}lk(t,a,e,i)}else{if(o=r._reactRootContainer=sk(r,n),a=o._internalRoot,"function"==typeof i){var c=i;i=function(){var e=mk(a);c.call(e)}}Xj((function(){lk(t,a,e,i)}))}return mk(a)}function uk(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(t))throw Error(y$3(200));return kk(e,t,null,r)}ck=function(e,t,r){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||N$3.current)ug=!0;else{if(0==(r&n)){switch(ug=!1,t.tag){case 3:ri$1(t),sh();break;case 5:gh(t);break;case 1:Ff(t.type)&&Jf(t);break;case 4:eh(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;I$2(mg,i._currentValue),i._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!=(r&t.child.childLanes)?ti$1(e,t,r):(I$2(P$3,1&P$3.current),null!==(t=hi$1(e,t,r))?t.sibling:null);I$2(P$3,1&P$3.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(64&e.flags)){if(n)return Ai$1(e,t,r);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),I$2(P$3,P$3.current),n)break;return null;case 23:case 24:return t.lanes=0,mi$1(e,t,r)}return hi$1(e,t,r)}ug=0!=(16384&e.flags)}else ug=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Ef(t,M$2.current),tg(t,r),i=Ch(null,t,n,e,i,r),t.flags|=1,"object"===_typeof2(i)&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ff(n)){var o=!0;Jf(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,xg(t);var a=n.getDerivedStateFromProps;"function"==typeof a&&Gg(t,n,a,e),i.updater=Kg,t.stateNode=i,i._reactInternals=t,Og(t,n,e,r),t=qi$1(null,t,n,!0,o,r)}else t.tag=0,fi$1(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=hk(i),e=lg(i,e),o){case 0:t=li$1(null,t,i,e,r);break e;case 1:t=pi$1(null,t,i,e,r);break e;case 11:t=gi$1(null,t,i,e,r);break e;case 14:t=ii$1(null,t,i,lg(i.type,e),n,r);break e}throw Error(y$3(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,li$1(e,t,n,i=t.elementType===n?i:lg(n,i),r);case 1:return n=t.type,i=t.pendingProps,pi$1(e,t,n,i=t.elementType===n?i:lg(n,i),r);case 3:if(ri$1(t),n=t.updateQueue,null===e||null===n)throw Error(y$3(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,yg(e,t),Cg(t,n,null,r),(n=t.memoizedState.element)===i)sh(),t=hi$1(e,t,r);else{if((o=(i=t.stateNode).hydrate)&&(kh=rf(t.stateNode.containerInfo.firstChild),jh=t,o=lh=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],th.push(o);for(r=Zg(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else fi$1(e,t,n,r),sh();t=t.child}return t;case 5:return gh(t),null===e&&ph(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,nf(n,i)?a=null:null!==o&&nf(n,o)&&(t.flags|=16),oi$1(e,t),fi$1(e,t,a,r),t.child;case 6:return null===e&&ph(t),null;case 13:return ti$1(e,t,r);case 4:return eh(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Yg(t,null,n,r):fi$1(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,gi$1(e,t,n,i=t.elementType===n?i:lg(n,i),r);case 7:return fi$1(e,t,t.pendingProps,r),t.child;case 8:case 12:return fi$1(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(I$2(mg,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=He$1(s,o)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!N$3.current){t=hi$1(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&o)){1===s.tag&&((u=zg(-1,r&-r)).tag=2,Ag(s,u)),s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),sg(s.return,r),c.lanes|=r;break}u=u.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}fi$1(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(o=t.pendingProps).children,tg(t,r),n=n(i=vg(i,o.unstable_observedBits)),t.flags|=1,fi$1(e,t,n,r),t.child;case 14:return o=lg(i=t.type,t.pendingProps),ii$1(e,t,i,o=lg(i.type,o),n,r);case 15:return ki$1(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:lg(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ff(n)?(e=!0,Jf(t)):e=!1,tg(t,r),Mg(t,n,i),Og(t,n,i,r),qi$1(null,t,n,!0,e,r);case 19:return Ai$1(e,t,r);case 23:case 24:return mi$1(e,t,r)}throw Error(y$3(156,t.tag))},qk.prototype.render=function(e){lk(e,this._internalRoot,null,null)},qk.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;lk(null,e,null,(function(){t[ff]=null}))},ec=function(e){13===e.tag&&(Jg(e,4,Hg()),ok(e,4))},fc=function(e){13===e.tag&&(Jg(e,67108864,Hg()),ok(e,67108864))},gc=function(e){if(13===e.tag){var t=Hg(),r=Ig(e);Jg(e,r,t),ok(e,r)}},hc=function(e,t){return t()},yb=function(e,t,r){switch(t){case"input":if(ab(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Db(n);if(!i)throw Error(y$3(90));Wa(n),ab(n,i)}}}break;case"textarea":ib(e,r);break;case"select":null!=(t=r.value)&&fb(e,!!r.multiple,t,!1)}},Gb=Wj,Hb=function(e,t,r,n,i){var o=X$2;X$2|=4;try{return gg(98,e.bind(null,t,r,n,i))}finally{0===(X$2=o)&&(wj(),ig())}},Ib=function(){0==(49&X$2)&&(Vj(),Oj())},Jb=function(e,t){var r=X$2;X$2|=2;try{return e(t)}finally{0===(X$2=r)&&(wj(),ig())}};var vk={Events:[Cb,ue$1,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=cc(e))?null:e.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk,reactDom_production_min.createPortal=uk,reactDom_production_min.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(y$3(188));throw Error(y$3(268,Object.keys(e)))}return e=null===(e=cc(t))?null:e.stateNode},reactDom_production_min.flushSync=function(e,t){var r=X$2;if(0!=(48&r))return e(t);X$2|=1;try{if(e)return gg(99,e.bind(null,t))}finally{X$2=r,ig()}},reactDom_production_min.hydrate=function(e,t,r){if(!rk(t))throw Error(y$3(200));return tk(null,e,t,!0,r)},reactDom_production_min.render=function(e,t,r){if(!rk(t))throw Error(y$3(200));return tk(null,e,t,!1,r)},reactDom_production_min.unmountComponentAtNode=function(e){if(!rk(e))throw Error(y$3(40));return!!e._reactRootContainer&&(Xj((function(){tk(null,null,e,!1,(function(){e._reactRootContainer=null,e[ff]=null}))})),!0)},reactDom_production_min.unstable_batchedUpdates=Wj,reactDom_production_min.unstable_createPortal=function(e,t){return uk(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rk(r))throw Error(y$3(200));if(null==e||void 0===e._reactInternals)throw Error(y$3(38));return tk(e,t,r,!1,n)},reactDom_production_min.version="17.0.2",checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM$1=exports("R",reactDom.exports),react$1={},react={},tslib={exports:{}};
/*! *****************************************************************************
			Copyright (c) Microsoft Corporation.

			Permission to use, copy, modify, and/or distribute this software for any
			purpose with or without fee is hereby granted.

			THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
			REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
			AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
			INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
			LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
			OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
			PERFORMANCE OF THIS SOFTWARE.
			***************************************************************************** */
!function(t){var r,n,i,o,a,s,c,u,l,f,h,p,d,m,g,v,y,b,_,A,M,x,w,$;!function(E){var T="object"===_typeof2(commonjsGlobal)?commonjsGlobal:"object"===("undefined"==typeof self?"undefined":_typeof2(self))?self:"object"===_typeof2(this)?this:{};function S(e,t){return e!==T&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}!function(t){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},o=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof2(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=function(e,t){return function(r,n){t(r,n,e)}},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":_typeof2(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(t,r,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function s(t){try{u(i.next(t))}catch(e){a(e)}}function c(t){try{u(i.throw(t))}catch(e){a(e)}}function u(e){e.done?n(e.value):o(e.value).then(s,c)}u((i=i.apply(t,r||[])).next())}))},u=function(t,r){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return u([e,t])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(t,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},l=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||$(t,e,r)},$=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},d=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},m=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},g=function(e){return this instanceof g?(this.v=e,this):new g(e)},v=function(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,r||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||c(e,t)}))})}function c(t,r){try{u(o[t](r))}catch(e){h(a[0][3],e)}}function u(e){e.value instanceof g?Promise.resolve(e.value.v).then(l,f):h(a[0][2],e)}function l(e){c("next",e)}function f(e){c("throw",e)}function h(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}},y=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:i?i(t):t}:i}},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){i(n,o,(t=e[r](t)).done,t.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}},_=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&$(t,e,r);return T(t,e),t},M=function(e){return e&&e.__esModule?e:{default:e}},x=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},w=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},t("__extends",r),t("__assign",n),t("__rest",i),t("__decorate",o),t("__param",a),t("__metadata",s),t("__awaiter",c),t("__generator",u),t("__exportStar",l),t("__createBinding",$),t("__values",f),t("__read",h),t("__spread",p),t("__spreadArrays",d),t("__spreadArray",m),t("__await",g),t("__asyncGenerator",v),t("__asyncDelegator",y),t("__asyncValues",b),t("__makeTemplateObject",_),t("__importStar",A),t("__importDefault",M),t("__classPrivateFieldGet",x),t("__classPrivateFieldSet",w)}(S(T,S(t.exports)))}()}(tslib),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t});var REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});for(var _lut=[],i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(_lut[255&e]+_lut[e>>8&255]+_lut[e>>16&255]+_lut[e>>24&255]+"-"+_lut[255&t]+_lut[t>>8&255]+"-"+_lut[t>>16&15|64]+_lut[t>>24&255]+"-"+_lut[63&r|128]+_lut[r>>8&255]+"-"+_lut[r>>16&255]+_lut[r>>24&255]+_lut[255&n]+_lut[n>>8&255]+_lut[n>>16&255]+_lut[n>>24&255]).toUpperCase()},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*MathUtils.DEG2RAD},radToDeg:function(e){return e*MathUtils.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,n,i){var o=Math.cos,a=Math.sin,s=o(r/2),c=a(r/2),u=o((t+n)/2),l=a((t+n)/2),f=o((t-n)/2),h=a((t-n)/2),p=o((n-t)/2),d=a((n-t)/2);switch(i){case"XYX":e.set(s*l,c*f,c*h,s*u);break;case"YZY":e.set(c*h,s*l,c*f,s*u);break;case"ZXZ":e.set(c*f,c*h,s*l,s*u);break;case"XZX":e.set(s*l,c*d,c*p,s*u);break;case"YXY":e.set(c*p,s*l,c*d,s*u);break;case"ZYZ":e.set(c*d,c*p,s*l,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}},_canvas;function Vector2(e,t){this.x=e||0,this.y=t||0}function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Vector2.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},extractBasis:function(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],c=r[1],u=r[4],l=r[7],f=r[2],h=r[5],p=r[8],d=n[0],m=n[3],g=n[6],v=n[1],y=n[4],b=n[7],_=n[2],A=n[5],M=n[8];return i[0]=o*d+a*v+s*_,i[3]=o*m+a*y+s*A,i[6]=o*g+a*b+s*M,i[1]=c*d+u*v+l*_,i[4]=c*m+u*y+l*A,i[7]=c*g+u*b+l*M,i[2]=f*d+h*v+p*_,i[5]=f*m+h*y+p*A,i[8]=f*g+h*b+p*M,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*i*u+r*a*s+n*i*c-n*o*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var r=e.elements,n=this.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],f=r[7],h=r[8],p=h*c-u*f,d=u*l-h*s,m=f*s-c*l,g=i*p+o*d+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);var v=1/g;return n[0]=p*v,n[1]=(a*f-h*o)*v,n[2]=(u*o-a*c)*v,n[3]=d*v,n[4]=(h*i-a*l)*v,n[5]=(a*s-u*i)*v,n[6]=m*v,n[7]=(o*l-f*i)*v,n[8]=(c*i-o*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(r*s,r*c,-r*(s*o+c*a)+o+e,-n*c,n*s,-n*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],o=n[3],a=n[6],s=n[1],c=n[4],u=n[7];return n[0]=t*i+r*s,n[3]=t*o+r*c,n[6]=t*a+r*u,n[1]=-r*i+t*s,n[4]=-r*o+t*c,n[7]=-r*a+t*u,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var ImageUtils={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_canvas&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=e.width,_canvas.height=e.height;var r=_canvas.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=_canvas}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},textureId=0;function Texture(e,t,r,n,i,o,a,s,c,u){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=void 0!==e?e:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ClampToEdgeWrapping,this.wrapT=void 0!==n?n:ClampToEdgeWrapping,this.magFilter=void 0!==i?i:LinearFilter,this.minFilter=void 0!==o?o:LinearMipmapLinearFilter,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:RGBAFormat,this.internalFormat=null,this.type=void 0!==s?s:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:LinearEncoding,this.version=0,this.onUpdate=null}function Vector4(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function WebGLRenderTarget(e,t,r){this.width=e,this.height=t,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),r=r||{},this.texture=new Texture(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:LinearFilter,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function WebGLMultisampleRenderTarget(e,t,r){WebGLRenderTarget.call(this,e,t,r),this.samples=4}function Quaternion(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=UVMapping,Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=MathUtils.generateUUID()),!t&&void 0===e.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var o=0,a=n.length;o<a;o++)i.push(ImageUtils.getDataURL(n[o]))}else i=ImageUtils.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Vector4.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=.01,a=.1,s=e.elements,c=s[0],u=s[4],l=s[8],f=s[1],h=s[5],p=s[9],d=s[2],m=s[6],g=s[10];if(Math.abs(u-f)<o&&Math.abs(l-d)<o&&Math.abs(p-m)<o){if(Math.abs(u+f)<a&&Math.abs(l+d)<a&&Math.abs(p+m)<a&&Math.abs(c+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var v=(c+1)/2,y=(h+1)/2,b=(g+1)/2,_=(u+f)/4,A=(l+d)/4,M=(p+m)/4;return v>y&&v>b?v<o?(r=0,n=.707106781,i=.707106781):(n=_/(r=Math.sqrt(v)),i=A/r):y>b?y<o?(r=.707106781,n=0,i=.707106781):(r=_/(n=Math.sqrt(y)),i=M/n):b<o?(r=.707106781,n=.707106781,i=0):(r=A/(i=Math.sqrt(b)),n=M/i),this.set(r,n,i,t),this}var x=Math.sqrt((m-p)*(m-p)+(l-d)*(l-d)+(f-u)*(f-u));return Math.abs(x)<.001&&(x=1),this.x=(m-p)/x,this.y=(l-d)/x,this.z=(f-u)/x,this.w=Math.acos((c+h+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(e){return WebGLRenderTarget.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Quaternion,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,a){var s=r[n+0],c=r[n+1],u=r[n+2],l=r[n+3],f=i[o+0],h=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||s!==f||c!==h||u!==p){var m=1-a,g=s*f+c*h+u*p+l*d,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,g*v);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var A=a*v;if(s=s*m+f*A,c=c*m+h*A,u=u*m+p*A,l=l*m+d*A,m===1-a){var M=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=M,c*=M,u*=M,l*=M}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l},multiplyQuaternionsFlat:function(e,t,r,n,i,o){var a=r[n],s=r[n+1],c=r[n+2],u=r[n+3],l=i[o],f=i[o+1],h=i[o+2],p=i[o+3];return e[t]=a*p+u*l+s*h-c*f,e[t+1]=s*p+u*f+c*l-a*h,e[t+2]=c*p+u*h+a*f-s*l,e[t+3]=u*p-a*l-s*f-c*h,e}}),Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(r/2),u=a(n/2),l=a(i/2),f=s(r/2),h=s(n/2),p=s(i/2);switch(o){case"XYZ":this._x=f*u*l+c*h*p,this._y=c*h*l-f*u*p,this._z=c*u*p+f*h*l,this._w=c*u*l-f*h*p;break;case"YXZ":this._x=f*u*l+c*h*p,this._y=c*h*l-f*u*p,this._z=c*u*p-f*h*l,this._w=c*u*l+f*h*p;break;case"ZXY":this._x=f*u*l-c*h*p,this._y=c*h*l+f*u*p,this._z=c*u*p+f*h*l,this._w=c*u*l-f*h*p;break;case"ZYX":this._x=f*u*l-c*h*p,this._y=c*h*l+f*u*p,this._z=c*u*p-f*h*l,this._w=c*u*l+f*h*p;break;case"YZX":this._x=f*u*l+c*h*p,this._y=c*h*l+f*u*p,this._z=c*u*p-f*h*l,this._w=c*u*l-f*h*p;break;case"XZY":this._x=f*u*l-c*h*p,this._y=c*h*l-f*u*p,this._z=c*u*p+f*h*l,this._w=c*u*l+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],c=r[9],u=r[2],l=r[6],f=r[10],h=n+s+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):n>s&&n>f?(t=2*Math.sqrt(1+n-s-f),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>f?(t=2*Math.sqrt(1+s-n-f),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+f-n-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+n*c-i*s,this._y=n*u+o*s+i*a-r*c,this._z=i*u+o*c+r*s-n*a,this._w=o*u-r*a-n*s-i*c,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*r+t*this._x,this._y=c*n+t*this._y,this._z=c*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),l=Math.atan2(u,a),f=Math.sin((1-t)*l)/u,h=Math.sin(t*l)/u;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=n*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(_quaternion.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*n-a*r,u=s*r+a*t-i*n,l=s*n+i*r-o*t,f=-i*t-o*r-a*n;return this.x=c*s+f*-i+u*-a-l*-o,this.y=u*s+f*-o+l*-i-c*-a,this.z=l*s+f*-a+c*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)},projectOnPlane:function(e){return _vector.copy(this).projectOnVector(e),this.sub(_vector)},reflect:function(e){return this.sub(_vector.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var r=this.dot(e)/t;return Math.acos(MathUtils.clamp(r,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,a,s,c,u,l,f,h,p,d,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=u,g[10]=l,g[14]=f,g[3]=h,g[7]=p,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Matrix4).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,r=e.elements,n=1/_v1.setFromMatrixColumn(e,0).length(),i=1/_v1.setFromMatrixColumn(e,1).length(),o=1/_v1.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),c=Math.sin(n),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var f=o*u,h=o*l,p=a*u,d=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=h+p*c,t[5]=f-d*c,t[9]=-a*s,t[2]=d-f*c,t[6]=p+h*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,g=s*l,v=c*u,y=c*l;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,g=s*l,v=c*u,y=c*l;t[0]=m-y*a,t[4]=-o*l,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){f=o*u,h=o*l,p=a*u,d=a*l;t[0]=s*u,t[4]=p*c-h,t[8]=f*c+d,t[1]=s*l,t[5]=d*c+f,t[9]=h*c-p,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,_=o*c,A=a*s,M=a*c;t[0]=s*u,t[4]=M-b*l,t[8]=A*l+_,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=_*l+A,t[10]=b-M*l}else if("XZY"===e.order){b=o*s,_=o*c,A=a*s,M=a*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=b*l+M,t[5]=o*u,t[9]=_*l-A,t[2]=A*l-_,t[6]=a*u,t[10]=M*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(_zero,e,_one)},lookAt:function(e,t,r){var n=this.elements;return _z.subVectors(e,t),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(r,_z),0===_x.lengthSq()&&(1===Math.abs(r.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(r,_z)),_x.normalize(),_y.crossVectors(_z,_x),n[0]=_x.x,n[4]=_y.x,n[8]=_z.x,n[1]=_x.y,n[5]=_y.y,n[9]=_z.y,n[2]=_x.z,n[6]=_y.z,n[10]=_z.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],c=r[12],u=r[1],l=r[5],f=r[9],h=r[13],p=r[2],d=r[6],m=r[10],g=r[14],v=r[3],y=r[7],b=r[11],_=r[15],A=n[0],M=n[4],x=n[8],w=n[12],$=n[1],E=n[5],T=n[9],S=n[13],O=n[2],N=n[6],D=n[10],I=n[14],P=n[3],j=n[7],C=n[11],L=n[15];return i[0]=o*A+a*$+s*O+c*P,i[4]=o*M+a*E+s*N+c*j,i[8]=o*x+a*T+s*D+c*C,i[12]=o*w+a*S+s*I+c*L,i[1]=u*A+l*$+f*O+h*P,i[5]=u*M+l*E+f*N+h*j,i[9]=u*x+l*T+f*D+h*C,i[13]=u*w+l*S+f*I+h*L,i[2]=p*A+d*$+m*O+g*P,i[6]=p*M+d*E+m*N+g*j,i[10]=p*x+d*T+m*D+g*C,i[14]=p*w+d*S+m*I+g*L,i[3]=v*A+y*$+b*O+_*P,i[7]=v*M+y*E+b*N+_*j,i[11]=v*x+y*T+b*D+_*C,i[15]=v*w+y*S+b*I+_*L,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],f=e[10],h=e[14];return e[3]*(+i*s*l-n*c*l-i*a*f+r*c*f+n*a*h-r*s*h)+e[7]*(+t*s*h-t*c*f+i*o*f-n*o*h+n*c*u-i*s*u)+e[11]*(+t*c*l-t*a*h-i*o*l+r*o*h+i*a*u-r*c*u)+e[15]*(-n*a*u-t*s*l+t*a*f+n*o*l-r*o*f+r*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,r){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var r=this.elements,n=e.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],f=n[7],h=n[8],p=n[9],d=n[10],m=n[11],g=n[12],v=n[13],y=n[14],b=n[15],_=p*y*f-v*d*f+v*l*m-u*y*m-p*l*b+u*d*b,A=g*d*f-h*y*f-g*l*m+c*y*m+h*l*b-c*d*b,M=h*v*f-g*p*f+g*u*m-c*v*m-h*u*b+c*p*b,x=g*p*l-h*v*l-g*u*d+c*v*d+h*u*y-c*p*y,w=i*_+o*A+a*M+s*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var $=1/w;return r[0]=_*$,r[1]=(v*d*s-p*y*s-v*a*m+o*y*m+p*a*b-o*d*b)*$,r[2]=(u*y*s-v*l*s+v*a*f-o*y*f-u*a*b+o*l*b)*$,r[3]=(p*l*s-u*d*s-p*a*f+o*d*f+u*a*m-o*l*m)*$,r[4]=A*$,r[5]=(h*y*s-g*d*s+g*a*m-i*y*m-h*a*b+i*d*b)*$,r[6]=(g*l*s-c*y*s-g*a*f+i*y*f+c*a*b-i*l*b)*$,r[7]=(c*d*s-h*l*s+h*a*f-i*d*f-c*a*m+i*l*m)*$,r[8]=M*$,r[9]=(g*p*s-h*v*s-g*o*m+i*v*m+h*o*b-i*p*b)*$,r[10]=(c*v*s-g*u*s+g*o*f-i*v*f-c*o*b+i*u*b)*$,r[11]=(h*u*s-c*p*s-h*o*f+i*p*f+c*o*m-i*u*m)*$,r[12]=x*$,r[13]=(h*v*a-g*p*a+g*o*d-i*v*d-h*o*y+i*p*y)*$,r[14]=(g*u*a-c*v*a-g*o*l+i*v*l+c*o*y-i*u*y)*$,r[15]=(c*p*a-h*u*a+h*o*l-i*p*l-c*o*d+i*u*d)*$,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+r,c*a-n*s,c*s+n*a,0,c*a+n*s,u*a+r,u*s-n*o,0,c*s-n*a,u*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,u=o+o,l=a+a,f=i*c,h=i*u,p=i*l,d=o*u,m=o*l,g=a*l,v=s*c,y=s*u,b=s*l,_=r.x,A=r.y,M=r.z;return n[0]=(1-(d+g))*_,n[1]=(h+b)*_,n[2]=(p-y)*_,n[3]=0,n[4]=(h-b)*A,n[5]=(1-(f+g))*A,n[6]=(m+v)*A,n[7]=0,n[8]=(p+y)*M,n[9]=(m-v)*M,n[10]=(1-(f+d))*M,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(e,t,r){var n=this.elements,i=_v1.set(n[0],n[1],n[2]).length(),o=_v1.set(n[4],n[5],n[6]).length(),a=_v1.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],_m1.copy(this);var s=1/i,c=1/o,u=1/a;return _m1.elements[0]*=s,_m1.elements[1]*=s,_m1.elements[2]*=s,_m1.elements[4]*=c,_m1.elements[5]*=c,_m1.elements[6]*=c,_m1.elements[8]*=u,_m1.elements[9]*=u,_m1.elements[10]*=u,t.setFromRotationMatrix(_m1),r.x=i,r.y=o,r.z=a,this},makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(r-n),u=(t+e)/(t-e),l=(r+n)/(r-n),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=1/(t-e),c=1/(r-n),u=1/(o-i),l=(t+e)*s,f=(r+n)*c,h=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||Euler.DefaultOrder}function Layers(){this.mask=1}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler.DefaultOrder="XYZ",Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Euler.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=MathUtils.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],f=i[2],h=i[6],p=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,r){return _matrix.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix,t,r)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Layers.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var _object3DId=0,_v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var e=new Vector3,t=new Euler,r=new Quaternion,n=new Vector3(1,1,1);t._onChange((function(){r.setFromEuler(t,!1)})),r._onChange((function(){t.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1),this},rotateX:function(e){return this.rotateOnAxis(_xAxis,e)},rotateY:function(e){return this.rotateOnAxis(_yAxis,e)},rotateZ:function(e){return this.rotateOnAxis(_zAxis,e)},translateOnAxis:function(e,t){return _v1$1.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(_xAxis,e)},translateY:function(e){return this.translateOnAxis(_yAxis,e)},translateZ:function(e){return this.translateOnAxis(_zAxis,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(e,t,r){e.isVector3?_target.copy(e):_target.set(e,t,r);var n=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),n&&(_m1$1.extractRotation(n.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(_removedEvent)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Vector3),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,e,_scale),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Vector3),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(e.materials,this.material[s]));n.material=l}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var f=m(e.geometries),h=m(e.materials),p=m(e.textures),d=m(e.images);a=m(e.shapes);f.length>0&&(r.geometries=f),h.length>0&&(r.materials=h),p.length>0&&(r.textures=p),d.length>0&&(r.images=d),a.length>0&&(r.shapes=a)}return r.object=n,r;function m(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}}),Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(e,t){this.min=void 0!==e?e:new Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new Vector3(-1/0,-1/0,-1/0)}function satForAxes(e,t,r,n,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){_testAxis.fromArray(e,o);var s=i.x*Math.abs(_testAxis.x)+i.y*Math.abs(_testAxis.y)+i.z*Math.abs(_testAxis.z),c=t.dot(_testAxis),u=r.dot(_testAxis),l=n.dot(_testAxis);if(Math.max(-Math.max(c,u,l),Math.min(c,u,l))>s)return!1}return!0}Object.assign(Box3.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],f=e[s+2];u<t&&(t=u),l<r&&(r=l),f<n&&(n=f),u>i&&(i=u),l>o&&(o=l),f>a&&(a=f)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),f=e.getZ(s);u<t&&(t=u),l<r&&(r=l),f<n&&(n=f),u>i&&(i=u),l>o&&(o=l),f>a&&(a=f)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=_vector$1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),_box.copy(t.boundingBox),_box.applyMatrix4(e.matrixWorld),this.union(_box));for(var r=e.children,n=0,i=r.length;n<i;n++)this.expandByObject(r[n]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Vector3),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,_vector$1),_vector$1.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(e.a,_center),_v1$2.subVectors(e.b,_center),_v2.subVectors(e.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var t=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!!satForAxes(t,_v0,_v1$2,_v2,_extents)&&(!!satForAxes(t=[1,0,0,0,1,0,0,0,1],_v0,_v1$2,_v2,_extents)&&(_triangleNormal.crossVectors(_f0,_f1),satForAxes(t=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],_v0,_v1$2,_v2,_extents)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Vector3),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return _vector$1.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(_vector$1).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var _box$1=new Box3;function Sphere(e,t){this.center=void 0!==e?e:new Vector3,this.radius=void 0!==t?t:-1}Object.assign(Sphere.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var r=this.center;void 0!==t?r.copy(t):_box$1.setFromPoints(e).getCenter(r);for(var n=0,i=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Vector3),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Box3),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(e,t){this.origin=void 0!==e?e:new Vector3,this.direction=void 0!==t?t:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Vector3),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,_vector$2)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Vector3),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=_vector$2.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector$2.copy(this.direction).multiplyScalar(t).add(this.origin),_vector$2.distanceToSquared(e))},distanceSqToSegment:function(e,t,r,n){_segCenter.copy(e).add(t).multiplyScalar(.5),_segDir.copy(t).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);var i,o,a,s,c=.5*e.distanceTo(t),u=-this.direction.dot(_segDir),l=_diff.dot(this.direction),f=-_diff.dot(_segDir),h=_diff.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(o=u*l-f,s=c*p,(i=u*f-l)>=0)if(o>=-s)if(o<=s){var d=1/p;a=(i*=d)*(i+u*(o*=d)+2*l)+o*(u*i+o+2*f)+h}else o=c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*f)+h;else o=-c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*f)+h;else o<=-s?a=-(i=Math.max(0,-(-u*c+l)))*i+(o=i>0?-c:Math.min(Math.max(-c,-f),c))*(o+2*f)+h:o<=s?(i=0,a=(o=Math.min(Math.max(-c,-f),c))*(o+2*f)+h):a=-(i=Math.max(0,-(u*c+l)))*i+(o=i>0?c:Math.min(Math.max(-c,-f),c))*(o+2*f)+h;else o=u>0?-c:c,a=-(i=Math.max(0,-(u*o+l)))*i+o*(o+2*f)+h;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(_segDir).multiplyScalar(o).add(_segCenter),a},intersectSphere:function(e,t){_vector$2.subVectors(e.center,this.origin);var r=_vector$2.dot(this.direction),n=_vector$2.dot(_vector$2)-r*r,i=e.radius*e.radius;if(n>i)return null;var o=Math.sqrt(i-n),a=r-o,s=r+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,n=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,n=(e.min.x-f.x)*c),u>=0?(i=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||i>n?null:((i>r||r!=r)&&(r=i),(o<n||n!=n)&&(n=o),l>=0?(a=(e.min.z-f.z)*l,s=(e.max.z-f.z)*l):(a=(e.max.z-f.z)*l,s=(e.min.z-f.z)*l),r>s||a>n?null:((a>r||r!=r)&&(r=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,_vector$2)},intersectTriangle:function(e,t,r,n,i){_edge1.subVectors(t,e),_edge2.subVectors(r,e),_normal.crossVectors(_edge1,_edge2);var o,a=this.direction.dot(_normal);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}_diff.subVectors(this.origin,e);var s=o*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(s<0)return null;var c=o*this.direction.dot(_edge1.cross(_diff));if(c<0)return null;if(s+c>a)return null;var u=-o*_diff.dot(_normal);return u<0?null:this.at(u/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(e,t){this.normal=void 0!==e?e:new Vector3(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,r){var n=_vector1.subVectors(r,t).cross(_vector2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Vector3),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Vector3);var r=e.delta(_vector1),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?void 0:t.copy(r).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Vector3),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var r=t||_normalMatrix.getNormalMatrix(e),n=this.coplanarPoint(_vector1).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(e,t,r){this.a=void 0!==e?e:new Vector3,this.b=void 0!==t?t:new Vector3,this.c=void 0!==r?r:new Vector3}Object.assign(Triangle,{getNormal:function(e,t,r,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Vector3),n.subVectors(r,t),_v0$1.subVectors(e,t),n.cross(_v0$1);var i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)},getBarycoord:function(e,t,r,n,i){_v0$1.subVectors(n,t),_v1$3.subVectors(r,t),_v2$1.subVectors(e,t);var o=_v0$1.dot(_v0$1),a=_v0$1.dot(_v1$3),s=_v0$1.dot(_v2$1),c=_v1$3.dot(_v1$3),u=_v1$3.dot(_v2$1),l=o*c-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Vector3),0===l)return i.set(-2,-1,-1);var f=1/l,h=(c*s-a*u)*f,p=(o*u-a*s)*f;return i.set(1-h-p,p,h)},containsPoint:function(e,t,r,n){return Triangle.getBarycoord(e,t,r,n,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(e,t,r,n,i,o,a,s){return this.getBarycoord(e,t,r,n,_v3),s.set(0,0),s.addScaledVector(i,_v3.x),s.addScaledVector(o,_v3.y),s.addScaledVector(a,_v3.z),s},isFrontFacing:function(e,t,r,n){return _v0$1.subVectors(r,t),_v1$3.subVectors(e,t),_v0$1.cross(_v1$3).dot(n)<0}}),Object.assign(Triangle.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),.5*_v0$1.cross(_v1$3).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Vector3),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Triangle.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Plane),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,r,n,i){return Triangle.getUV(e,this.a,this.b,this.c,t,r,n,i)},containsPoint:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Vector3);var r,n,i=this.a,o=this.b,a=this.c;_vab.subVectors(o,i),_vac.subVectors(a,i),_vap.subVectors(e,i);var s=_vab.dot(_vap),c=_vac.dot(_vap);if(s<=0&&c<=0)return t.copy(i);_vbp.subVectors(e,o);var u=_vab.dot(_vbp),l=_vac.dot(_vbp);if(u>=0&&l<=u)return t.copy(o);var f=s*l-u*c;if(f<=0&&s>=0&&u<=0)return r=s/(s-u),t.copy(i).addScaledVector(_vab,r);_vcp.subVectors(e,a);var h=_vab.dot(_vcp),p=_vac.dot(_vcp);if(p>=0&&h<=p)return t.copy(a);var d=h*c-s*p;if(d<=0&&c>=0&&p<=0)return n=c/(c-p),t.copy(i).addScaledVector(_vac,n);var m=u*p-h*l;if(m<=0&&l-u>=0&&h-p>=0)return _vbc.subVectors(a,o),n=(l-u)/(l-u+(h-p)),t.copy(o).addScaledVector(_vbc,n);var g=1/(m+d+f);return r=d*g,n=f*g,t.copy(i).addScaledVector(_vab,r).addScaledVector(_vac,n)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function Face3(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Vector3,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(e=MathUtils.euclideanModulo(e,1),t=MathUtils.clamp(t,0,1),r=MathUtils.clamp(r,0,1),0===t)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+t):r+t-r*t,i=2*r-n;this.r=hue2rgb(i,n,e+1/3),this.g=hue2rgb(i,n,e),this.b=hue2rgb(i,n,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(a,s,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=r[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=_colorKeywords[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this},copyLinearToSRGB:function(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,n=this.r,i=this.g,o=this.b,a=Math.max(n,i,o),s=Math.min(n,i,o),c=(s+a)/2;if(s===a)t=0,r=0;else{var u=a-s;switch(r=c<=.5?u/(a+s):u/(2-a-s),a){case n:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-n)/u+2;break;case o:t=(n-i)/u+4}t/=6}return e.h=t,e.s=r,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){return this.getHSL(_hslA),_hslA.h+=e,_hslA.s+=t,_hslA.l+=r,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(_hslA),e.getHSL(_hslB);var r=MathUtils.lerp(_hslA.h,_hslB.h,t),n=MathUtils.lerp(_hslA.s,_hslB.s,t),i=MathUtils.lerp(_hslA.l,_hslB.l,t);return this.setHSL(r,n,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Color.NAMES=_colorKeywords,Object.assign(Face3.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function MeshBasicMaterial(e){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===FlatShading;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==FrontSide&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Material.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}function Int8BufferAttribute(e,t,r){BufferAttribute.call(this,new Int8Array(e),t,r)}function Uint8BufferAttribute(e,t,r){BufferAttribute.call(this,new Uint8Array(e),t,r)}function Uint8ClampedBufferAttribute(e,t,r){BufferAttribute.call(this,new Uint8ClampedArray(e),t,r)}function Int16BufferAttribute(e,t,r){BufferAttribute.call(this,new Int16Array(e),t,r)}function Uint16BufferAttribute(e,t,r){BufferAttribute.call(this,new Uint16Array(e),t,r)}function Int32BufferAttribute(e,t,r){BufferAttribute.call(this,new Int32Array(e),t,r)}function Uint32BufferAttribute(e,t,r){BufferAttribute.call(this,new Uint32Array(e),t,r)}function Float32BufferAttribute(e,t,r){BufferAttribute.call(this,new Float32Array(e),t,r)}function Float64BufferAttribute(e,t,r){BufferAttribute.call(this,new Float64Array(e),t,r)}function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function arrayMax(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new Color),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Vector2),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Vector3),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Vector4),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},applyMatrix3:function(e){for(var t=0,r=this.count;t<r;t++)_vector$3.x=this.getX(t),_vector$3.y=this.getY(t),_vector$3.z=this.getZ(t),_vector$3.applyMatrix3(e),this.setXYZ(t,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(e){for(var t=0,r=this.count;t<r;t++)_vector$3.x=this.getX(t),_vector$3.y=this.getY(t),_vector$3.z=this.getZ(t),_vector$3.applyMatrix4(e),this.setXYZ(t,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(e){for(var t=0,r=this.count;t<r;t++)_vector$3.x=this.getX(t),_vector$3.y=this.getY(t),_vector$3.z=this.getZ(t),_vector$3.applyNormalMatrix(e),this.setXYZ(t,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(e){for(var t=0,r=this.count;t<r;t++)_vector$3.x=this.getX(t),_vector$3.y=this.getY(t),_vector$3.z=this.getZ(t),_vector$3.transformDirection(e),this.setXYZ(t,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,Object.assign(DirectGeometry.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var l,f=e.morphNormals,h=f.length;if(h>0){l=[];for(u=0;u<h;u++)l[u]={name:f[u].name,data:[]};this.morphTargets.normal=l}var p=e.skinIndices,d=e.skinWeights,m=p.length===n.length,g=d.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<r.length;u++){var v=r[u];this.vertices.push(n[v.a],n[v.b],n[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=v.normal;this.normals.push(b,b,b)}var _,A=v.vertexColors;if(3===A.length)this.colors.push(A[0],A[1],A[2]);else{var M=v.color;this.colors.push(M,M,M)}if(!0===o)void 0!==(_=i[0][u])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Vector2,new Vector2,new Vector2));if(!0===a)void 0!==(_=i[1][u])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Vector2,new Vector2,new Vector2));for(var x=0;x<c;x++){var w=s[x].vertices;t[x].data.push(w[v.a],w[v.b],w[v.c])}for(x=0;x<h;x++){var $=f[x].vertexNormals[u];l[x].data.push($.a,$.b,$.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(d[v.a],d[v.b],d[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(arrayMax(e)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var n=(new Matrix3).getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return _m1$2.makeRotationX(e),this.applyMatrix4(_m1$2),this},rotateY:function(e){return _m1$2.makeRotationY(e),this.applyMatrix4(_m1$2),this},rotateZ:function(e){return _m1$2.makeRotationZ(e),this.applyMatrix4(_m1$2),this},translate:function(e,t,r){return _m1$2.makeTranslation(e,t,r),this.applyMatrix4(_m1$2),this},scale:function(e,t,r){return _m1$2.makeScale(e,t,r),this.applyMatrix4(_m1$2),this},lookAt:function(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Float32BufferAttribute(3*t.vertices.length,3),n=new Float32BufferAttribute(3*t.colors.length,3);if(this.setAttribute("position",r.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Float32BufferAttribute(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Float32BufferAttribute(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new BufferAttribute(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.setAttribute("normal",new BufferAttribute(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.setAttribute("color",new BufferAttribute(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new BufferAttribute(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new BufferAttribute(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],u=0,l=c.length;u<l;u++){var f=c[u],h=new Float32BufferAttribute(3*f.data.length,3);h.name=f.name,s.push(h.copyVector3sArray(f.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Float32BufferAttribute(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new Float32BufferAttribute(4*e.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var r=0,n=t.length;r<n;r++){var i=t[r];_box$2.setFromBufferAttribute(i),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var r=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var o=t[n];_boxMorphTargets.setFromBufferAttribute(o),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(r);var a=0;for(n=0,i=e.count;n<i;n++)_vector$4.fromBufferAttribute(e,n),a=Math.max(a,r.distanceToSquared(_vector$4));if(t)for(n=0,i=t.length;n<i;n++){o=t[n];for(var s=this.morphTargetsRelative,c=0,u=o.count;c<u;c++)_vector$4.fromBufferAttribute(o,c),s&&(_offset.fromBufferAttribute(e,c),_vector$4.add(_offset)),a=Math.max(a,r.distanceToSquared(_vector$4))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new BufferAttribute(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,o=n.length;i<o;i++)n[i]=0;var a,s,c,u=t.normal.array,l=new Vector3,f=new Vector3,h=new Vector3,p=new Vector3,d=new Vector3;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],c=3*m[i+2],l.fromArray(r,a),f.fromArray(r,s),h.fromArray(r,c),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[c]+=p.x,u[c+1]+=p.y,u[c+2]+=p.z}else for(i=0,o=r.length;i<o;i+=9)l.fromArray(r,i),f.fromArray(r,i+3),h.fromArray(r,i+6),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),u[i]=p.x,u[i+1]=p.y,u[i+2]=p.z,u[i+3]=p.x,u[i+4]=p.y,u[i+5]=p.z,u[i+6]=p.x,u[i+7]=p.y,u[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],a=o.array,s=o.itemSize*t,c=Math.min(a.length,i.length-s),u=0,l=s;u<c;u++,l++)i[l]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,r=e.count;t<r;t++)_vector$4.x=e.getX(t),_vector$4.y=e.getY(t),_vector$4.z=e.getZ(t),_vector$4.normalize(),e.setXYZ(t,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function e(e,t){for(var r=e.array,n=e.itemSize,i=e.normalized,o=new r.constructor(t.length*n),a=0,s=0,c=0,u=t.length;c<u;c++){a=t[c]*n;for(var l=0;l<n;l++)o[s++]=r[a++]}return new BufferAttribute(o,n,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new BufferGeometry,r=this.index.array,n=this.attributes;for(var i in n){var o=e(n[i],r);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],c=a[i],u=0,l=c.length;u<l;u++){o=e(c[u],r);s.push(o)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,h=(u=0,f.length);u<h;u++){var p=f[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var i=this.attributes;for(var r in i){var o=(h=i[r]).toJSON();""!==h.name&&(o.name=h.name),e.data.attributes[r]=o}var a={},s=!1;for(var r in this.morphAttributes){for(var c=this.morphAttributes[r],u=[],l=0,f=c.length;l<f;l++){var h;o=(h=c[l]).toJSON();""!==h.name&&(o.name=h.name),u.push(o)}u.length>0&&(a[r]=u,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e},clone:function(){return(new BufferGeometry).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],u=s[t];for(r=0,n=u.length;r<n;r++)c.push(u[r].clone());this.morphAttributes[t]=c}this.morphTargetsRelative=e.morphTargetsRelative;var l=e.groups;for(r=0,n=l.length;r<n;r++){var f=l[r];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(e,t){Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new MeshBasicMaterial,this.updateMorphTargets()}function checkIntersection(e,t,r,n,i,o,a,s){if(null===(t.side===BackSide?n.intersectTriangle(a,o,i,!0,s):n.intersectTriangle(i,o,a,t.side!==DoubleSide,s)))return null;_intersectionPointWorld.copy(s),_intersectionPointWorld.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(_intersectionPointWorld);return c<r.near||c>r.far?null:{distance:c,point:_intersectionPointWorld.clone(),object:e}}function checkBufferGeometryIntersection(e,t,r,n,i,o,a,s,c,u,l,f){_vA.fromBufferAttribute(i,u),_vB.fromBufferAttribute(i,l),_vC.fromBufferAttribute(i,f);var h=e.morphTargetInfluences;if(t.morphTargets&&o&&h){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var p=0,d=o.length;p<d;p++){var m=h[p],g=o[p];0!==m&&(_tempA.fromBufferAttribute(g,u),_tempB.fromBufferAttribute(g,l),_tempC.fromBufferAttribute(g,f),a?(_morphA.addScaledVector(_tempA,m),_morphB.addScaledVector(_tempB,m),_morphC.addScaledVector(_tempC,m)):(_morphA.addScaledVector(_tempA.sub(_vA),m),_morphB.addScaledVector(_tempB.sub(_vB),m),_morphC.addScaledVector(_tempC.sub(_vC),m)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}e.isSkinnedMesh&&(e.boneTransform(u,_vA),e.boneTransform(l,_vB),e.boneTransform(f,_vC));var v=checkIntersection(e,t,r,n,_vA,_vB,_vC,_intersectionPoint);if(v){s&&(_uvA.fromBufferAttribute(s,u),_uvB.fromBufferAttribute(s,l),_uvC.fromBufferAttribute(s,f),v.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),c&&(_uvA.fromBufferAttribute(c,u),_uvB.fromBufferAttribute(c,l),_uvC.fromBufferAttribute(c,f),v.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var y=new Face3(u,l,f);Triangle.getNormal(_vA,_vB,_vC,y.normal),v.face=y}return v}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var r,n=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere.copy(n.boundingSphere),_sphere.applyMatrix4(o),!1!==e.ray.intersectsSphere(_sphere)&&(_inverseMatrix.getInverse(o),_ray.copy(e.ray).applyMatrix4(_inverseMatrix),null===n.boundingBox||!1!==_ray.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var a,s,c,u,l,f,h,p,d,m=n.index,g=n.attributes.position,v=n.morphAttributes.position,y=n.morphTargetsRelative,b=n.attributes.uv,_=n.attributes.uv2,A=n.groups,M=n.drawRange;if(null!==m)if(Array.isArray(i))for(u=0,f=A.length;u<f;u++)for(d=i[(p=A[u]).materialIndex],l=Math.max(p.start,M.start),h=Math.min(p.start+p.count,M.start+M.count);l<h;l+=3)a=m.getX(l),s=m.getX(l+1),c=m.getX(l+2),(r=checkBufferGeometryIntersection(this,d,e,_ray,g,v,y,b,_,a,s,c))&&(r.faceIndex=Math.floor(l/3),r.face.materialIndex=p.materialIndex,t.push(r));else for(u=Math.max(0,M.start),f=Math.min(m.count,M.start+M.count);u<f;u+=3)a=m.getX(u),s=m.getX(u+1),c=m.getX(u+2),(r=checkBufferGeometryIntersection(this,i,e,_ray,g,v,y,b,_,a,s,c))&&(r.faceIndex=Math.floor(u/3),t.push(r));else if(void 0!==g)if(Array.isArray(i))for(u=0,f=A.length;u<f;u++)for(d=i[(p=A[u]).materialIndex],l=Math.max(p.start,M.start),h=Math.min(p.start+p.count,M.start+M.count);l<h;l+=3)(r=checkBufferGeometryIntersection(this,d,e,_ray,g,v,y,b,_,a=l,s=l+1,c=l+2))&&(r.faceIndex=Math.floor(l/3),r.face.materialIndex=p.materialIndex,t.push(r));else for(u=Math.max(0,M.start),f=Math.min(g.count,M.start+M.count);u<f;u+=3)(r=checkBufferGeometryIntersection(this,i,e,_ray,g,v,y,b,_,a=u,s=u+1,c=u+2))&&(r.faceIndex=Math.floor(u/3),t.push(r))}else if(n.isGeometry){var x,w,$,E,T=Array.isArray(i),S=n.vertices,O=n.faces,N=n.faceVertexUvs[0];N.length>0&&(E=N);for(var D=0,I=O.length;D<I;D++){var P=O[D],j=T?i[P.materialIndex]:i;if(void 0!==j&&(x=S[P.a],w=S[P.b],$=S[P.c],r=checkIntersection(this,j,e,_ray,x,w,$,_intersectionPoint))){if(E&&E[D]){var C=E[D];_uvA.copy(C[0]),_uvB.copy(C[1]),_uvC.copy(C[2]),r.uv=Triangle.getUV(_intersectionPoint,x,w,$,_uvA,_uvB,_uvC,new Vector2)}r.face=P,r.faceIndex=D,t.push(r)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Matrix3).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return _m1$3.makeRotationX(e),this.applyMatrix4(_m1$3),this},rotateY:function(e){return _m1$3.makeRotationY(e),this.applyMatrix4(_m1$3),this},rotateZ:function(e){return _m1$3.makeRotationZ(e),this.applyMatrix4(_m1$3),this},translate:function(e,t,r){return _m1$3.makeTranslation(e,t,r),this.applyMatrix4(_m1$3),this},scale:function(e,t,r){return _m1$3.makeScale(e,t,r),this.applyMatrix4(_m1$3),this},lookAt:function(e){return _obj$1.lookAt(e),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=0;u<i.length;u+=3)t.vertices.push((new Vector3).fromArray(i,u)),void 0!==a&&t.colors.push((new Color).fromArray(a,u));function l(e,r,n,i){var u=void 0===a?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],l=new Face3(e,r,n,void 0===o?[]:[(new Vector3).fromArray(o,3*e),(new Vector3).fromArray(o,3*r),(new Vector3).fromArray(o,3*n)],u,i);t.faces.push(l),void 0!==s&&t.faceVertexUvs[0].push([(new Vector2).fromArray(s,2*e),(new Vector2).fromArray(s,2*r),(new Vector2).fromArray(s,2*n)]),void 0!==c&&t.faceVertexUvs[1].push([(new Vector2).fromArray(c,2*e),(new Vector2).fromArray(c,2*r),(new Vector2).fromArray(c,2*n)])}var f=e.groups;if(f.length>0)for(u=0;u<f.length;u++)for(var h=f[u],p=h.start,d=p,m=p+h.count;d<m;d+=3)void 0!==r?l(r[d],r[d+1],r[d+2],h.materialIndex):l(d,d+1,d+2,h.materialIndex);else if(void 0!==r)for(u=0;u<r.length;u+=3)l(r[u],r[u+1],r[u+2]);else for(u=0;u<i.length/3;u+=3)l(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new Matrix4;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var e=new Vector3,t=new Vector3,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new Vector3;if(e){var s,c,u,l=new Vector3,f=new Vector3;for(n=0,i=this.faces.length;n<i;n++)o=this.faces[n],s=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],l.subVectors(u,c),f.subVectors(s,c),l.cross(f),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var h=(o=this.faces[n]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)c=new Vector3,u={a:new Vector3,b:new Vector3,c:new Vector3},a.push(c),s.push(u)}var c,u,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],c=l.faceNormals[r],u=l.vertexNormals[r],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.colors,l=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new Matrix3).getNormalMatrix(t));for(var f=0,h=a.length;f<h;f++){var p=a[f].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(f=0,h=l.length;f<h;f++)u.push(l[f].clone());for(f=0,h=c.length;f<h;f++){var d,m,g,v=c[f],y=v.vertexNormals,b=v.vertexColors;(d=new Face3(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==n&&d.normal.applyMatrix3(n).normalize();for(var _=0,A=y.length;_<A;_++)m=y[_].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),d.vertexNormals.push(m);d.color.copy(v.color);for(_=0,A=b.length;_<A;_++)g=b[_],d.vertexColors.push(g.clone());d.materialIndex=v.materialIndex+r,s.push(d)}for(f=0,h=e.faceVertexUvs.length;f<h;f++){var M=e.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);for(_=0,A=M.length;_<A;_++){for(var x=M[_],w=[],$=0,E=x.length;$<E;$++)w.push(x[$].clone());this.faceVertexUvs[f].push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,o,a,s,c={},u=[],l=[],f=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===c[t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f)]?(c[t]=r,u.push(this.vertices[r]),l[r]=u.length-1):l[r]=l[c[t]];var h=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){h.push(r);break}}for(r=h.length-1;r>=0;r--){var d=h[r];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Vector3(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var n,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(n=[]),a&&a.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(o[s]),i&&i.push(a[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];n.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},f=[],h={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=x(b,0,0),b=x(b,1,!0),b=x(b,2,!1),b=x(b,3,d),b=x(b,4,m),b=x(b,5,g),b=x(b,6,v),b=x(b,7,y),a.push(b),a.push(p.a,p.b,p.c),a.push(p.materialIndex),d){var _=this.faceVertexUvs[0][i];a.push(E(_[0]),E(_[1]),E(_[2]))}if(m&&a.push(w(p.normal)),g){var A=p.vertexNormals;a.push(w(A[0]),w(A[1]),w(A[2]))}if(v&&a.push($(p.color)),y){var M=p.vertexColors;a.push($(M[0]),$(M[1]),$(M[2]))}}function x(e,t,r){return r?e|1<<t:e&~(1<<t)}function w(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=s.length/3,s.push(e.x,e.y,e.z)),c[t]}function $(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]||(l[t]=u.length,u.push(e.getHex())),l[t]}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=f.length/2,f.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=n,e.data.normals=s,u.length>0&&(e.data.colors=u),f.length>0&&(e.data.uvs=[f]),e.data.faces=a,e},clone:function(){return(new Geometry).copy(this)},copy:function(e){var t,r,n,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,r=c.length;t<r;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,r=u.length;t<r;t++)this.faces.push(u[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=l.length;n<i;n++){var f=l[n],h=[];for(o=0,a=f.length;o<a;o++){var p=f[o];h.push(p.clone())}this.faceVertexUvs[t].push(h)}}var d=e.morphTargets;for(t=0,r=d.length;t<r;t++){var m={};if(m.name=d[t].name,void 0!==d[t].vertices)for(m.vertices=[],n=0,i=d[t].vertices.length;n<i;n++)m.vertices.push(d[t].vertices[n].clone());if(void 0!==d[t].normals)for(m.normals=[],n=0,i=d[t].normals.length;n<i;n++)m.normals.push(d[t].normals[n].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,r=g.length;t<r;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],n=0,i=g[t].vertexNormals.length;n<i;n++){var y=g[t].vertexNormals[n],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],n=0,i=g[t].faceNormals.length;n<i;n++)v.faceNormals.push(g[t].faceNormals[n].clone());this.morphNormals.push(v)}var _=e.skinWeights;for(t=0,r=_.length;t<r;t++)this.skinWeights.push(_[t].clone());var A=e.skinIndices;for(t=0,r=A.length;t<r;t++)this.skinIndices.push(A[t].clone());var M=e.lineDistances;for(t=0,r=M.length;t<r;t++)this.lineDistances.push(M[t]);var x=e.boundingBox;null!==x&&(this.boundingBox=x.clone());var w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var BoxGeometry=function(e){_inherits3(r,e);var t=_createSuper2(r);function r(e,n,i,o,a,s){var c;return _classCallCheck3(this,r),(c=t.call(this)).type="BoxGeometry",c.parameters={width:e,height:n,depth:i,widthSegments:o,heightSegments:a,depthSegments:s},c.fromBufferGeometry(new BoxBufferGeometry(e,n,i,o,a,s)),c.mergeVertices(),c}return _createClass3(r)}(Geometry),BoxBufferGeometry=function(e){_inherits3(r,e);var t=_createSuper2(r);function r(e,n,i,o,a,s){var c;_classCallCheck3(this,r),(c=t.call(this)).type="BoxBufferGeometry",c.parameters={width:e,height:n,depth:i,widthSegments:o,heightSegments:a,depthSegments:s};var u=_assertThisInitialized3(c);e=e||1,n=n||1,i=i||1,o=Math.floor(o)||1,a=Math.floor(a)||1,s=Math.floor(s)||1;var l=[],f=[],h=[],p=[],d=0,m=0;function g(e,t,r,n,i,o,a,s,c,g,v){for(var y=o/c,b=a/g,_=o/2,A=a/2,M=s/2,x=c+1,w=g+1,$=0,E=0,T=new Vector3,S=0;S<w;S++)for(var O=S*b-A,N=0;N<x;N++){var D=N*y-_;T[e]=D*n,T[t]=O*i,T[r]=M,f.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[r]=s>0?1:-1,h.push(T.x,T.y,T.z),p.push(N/c),p.push(1-S/g),$+=1}for(var I=0;I<g;I++)for(var P=0;P<c;P++){var j=d+P+x*I,C=d+P+x*(I+1),L=d+(P+1)+x*(I+1),R=d+(P+1)+x*I;l.push(j,C,R),l.push(C,L,R),E+=6}u.addGroup(m,E,v),m+=E,d+=$}return g("z","y","x",-1,-1,i,n,e,s,a,0),g("z","y","x",1,-1,i,n,-e,s,a,1),g("x","z","y",1,1,e,i,n,o,s,2),g("x","z","y",1,-1,e,i,-n,o,s,3),g("x","y","z",1,-1,e,n,i,o,a,4),g("x","y","z",-1,-1,e,n,-i,o,a,5),c.setIndex(l),c.setAttribute("position",new Float32BufferAttribute(f,3)),c.setAttribute("normal",new Float32BufferAttribute(h,3)),c.setAttribute("uv",new Float32BufferAttribute(p,2)),c}return _createClass3(r)}(BufferGeometry);function cloneUniforms(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}function mergeUniforms(e){for(var t={},r=0;r<e.length;r++){var n=cloneUniforms(e[r]);for(var i in n)t[i]=n[i]}return t}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",default_fragment="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ShaderMaterial(e){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Camera$1(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}function PerspectiveCamera(e,t,r,n){Camera$1.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},ShaderMaterial.prototype.toJSON=function(e){var t=Material.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},Camera$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera$1,isCamera:!0,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Vector3),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Object3D.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Object3D.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),PerspectiveCamera.prototype=Object.assign(Object.create(Camera$1.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e,t){return Camera$1.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*MathUtils.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*MathUtils.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*MathUtils.RAD2DEG*Math.atan(Math.tan(.5*MathUtils.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*MathUtils.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*n/a,t-=o.offsetY*r/s,n*=o.width/a,r*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var fov=90,aspect=1;function CubeCamera(e,t,r){if(Object3D.call(this),this.type="CubeCamera",!0===r.isWebGLCubeRenderTarget){this.renderTarget=r;var n=new PerspectiveCamera(fov,aspect,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new Vector3(1,0,0)),this.add(n);var i=new PerspectiveCamera(fov,aspect,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Vector3(-1,0,0)),this.add(i);var o=new PerspectiveCamera(fov,aspect,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Vector3(0,1,0)),this.add(o);var a=new PerspectiveCamera(fov,aspect,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Vector3(0,-1,0)),this.add(a);var s=new PerspectiveCamera(fov,aspect,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Vector3(0,0,1)),this.add(s);var c=new PerspectiveCamera(fov,aspect,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Vector3(0,0,-1)),this.add(c),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var u=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;var f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,i),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(l),e.xr.enabled=u},this.clear=function(e,t,n,i){for(var o=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(r,a),e.clear(t,n,i);e.setRenderTarget(o)}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function WebGLCubeRenderTarget(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),WebGLRenderTarget.call(this,e,e,t)}function DataTexture(e,t,r,n,i,o,a,s,c,u,l,f){Texture.call(this,null,o,a,s,c,u,n,i,l,f),this.image={data:e||null,width:t||1,height:r||1},this.magFilter=void 0!==c?c:NearestFilter,this.minFilter=void 0!==u?u:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype),WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget,WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0,WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var r=new Scene,n={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV = equirectUv( direction );","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:BackSide,blending:NoBlending});i.uniforms.tEquirect.value=t;var o=new Mesh(new BoxBufferGeometry(5,5,5),i);return r.add(o),new CubeCamera(1,10,this).update(e,r),o.geometry.dispose(),o.material.dispose(),this},DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(e,t,r,n,i,o){this.planes=[void 0!==e?e:new Plane,void 0!==t?t:new Plane,void 0!==r?r:new Plane,void 0!==n?n:new Plane,void 0!==i?i:new Plane,void 0!==o?o:new Plane]}Object.assign(Frustum.prototype,{set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromProjectionMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],u=r[6],l=r[7],f=r[8],h=r[9],p=r[10],d=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-n,l-s,d-f,y-m).normalize(),t[1].setComponents(a+n,l+s,d+f,y+m).normalize(),t[2].setComponents(a+i,l+c,d+h,y+g).normalize(),t[3].setComponents(a-i,l-c,d-h,y-g).normalize(),t[4].setComponents(a-o,l-u,d-p,y-v).normalize(),t[5].setComponents(a+o,l+u,d+p,y+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_sphere$1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(e){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];if(_vector$5.x=n.normal.x>0?e.max.x:e.min.x,_vector$5.y=n.normal.y>0?e.max.y:e.min.y,_vector$5.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var e=null,t=!1,r=null;function n(i,o){!1!==t&&(r(i,o),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function WebGLAttributes(e,t){var r=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=n.get(t);r&&(e.deleteBuffer(r.buffer),n.delete(t))},update:function(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var o=n.get(t);void 0===o?n.set(t,function(t,r){var n=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,n,i),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,n,i){var o=n.array,a=n.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(r?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}function PlaneGeometry(e,t,r,n){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new PlaneBufferGeometry(e,t,r,n)),this.mergeVertices()}function PlaneBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(r)||1,u=Math.floor(n)||1,l=c+1,f=u+1,h=e/c,p=t/u,d=[],m=[],g=[],v=[];for(o=0;o<f;o++){var y=o*p-s;for(i=0;i<l;i++){var b=i*h-a;m.push(b,-y,0),g.push(0,0,1),v.push(i/c),v.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<c;i++){var _=i+l*o,A=i+l*(o+1),M=i+1+l*(o+1),x=i+1+l*o;d.push(_,A,x),d.push(A,M,x)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(m,3)),this.setAttribute("normal",new Float32BufferAttribute(g,3)),this.setAttribute("uv",new Float32BufferAttribute(v,2))}PlaneGeometry.prototype=Object.create(Geometry.prototype),PlaneGeometry.prototype.constructor=PlaneGeometry,PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_vertex="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",envmap_physical_pars_fragment="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",lights_toon_fragment="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",ShaderChunk={alphamap_fragment:alphamap_fragment,alphamap_pars_fragment:alphamap_pars_fragment,alphatest_fragment:alphatest_fragment,aomap_fragment:aomap_fragment,aomap_pars_fragment:aomap_pars_fragment,begin_vertex:begin_vertex,beginnormal_vertex:beginnormal_vertex,bsdfs:bsdfs,bumpmap_pars_fragment:bumpmap_pars_fragment,clipping_planes_fragment:clipping_planes_fragment,clipping_planes_pars_fragment:clipping_planes_pars_fragment,clipping_planes_pars_vertex:clipping_planes_pars_vertex,clipping_planes_vertex:clipping_planes_vertex,color_fragment:color_fragment,color_pars_fragment:color_pars_fragment,color_pars_vertex:color_pars_vertex,color_vertex:color_vertex,common:common,cube_uv_reflection_fragment:cube_uv_reflection_fragment,defaultnormal_vertex:defaultnormal_vertex,displacementmap_pars_vertex:displacementmap_pars_vertex,displacementmap_vertex:displacementmap_vertex,emissivemap_fragment:emissivemap_fragment,emissivemap_pars_fragment:emissivemap_pars_fragment,encodings_fragment:encodings_fragment,encodings_pars_fragment:encodings_pars_fragment,envmap_fragment:envmap_fragment,envmap_common_pars_fragment:envmap_common_pars_fragment,envmap_pars_fragment:envmap_pars_fragment,envmap_pars_vertex:envmap_pars_vertex,envmap_physical_pars_fragment:envmap_physical_pars_fragment,envmap_vertex:envmap_vertex,fog_vertex:fog_vertex,fog_pars_vertex:fog_pars_vertex,fog_fragment:fog_fragment,fog_pars_fragment:fog_pars_fragment,gradientmap_pars_fragment:gradientmap_pars_fragment,lightmap_fragment:lightmap_fragment,lightmap_pars_fragment:lightmap_pars_fragment,lights_lambert_vertex:lights_lambert_vertex,lights_pars_begin:lights_pars_begin,lights_toon_fragment:lights_toon_fragment,lights_toon_pars_fragment:lights_toon_pars_fragment,lights_phong_fragment:lights_phong_fragment,lights_phong_pars_fragment:lights_phong_pars_fragment,lights_physical_fragment:lights_physical_fragment,lights_physical_pars_fragment:lights_physical_pars_fragment,lights_fragment_begin:lights_fragment_begin,lights_fragment_maps:lights_fragment_maps,lights_fragment_end:lights_fragment_end,logdepthbuf_fragment:logdepthbuf_fragment,logdepthbuf_pars_fragment:logdepthbuf_pars_fragment,logdepthbuf_pars_vertex:logdepthbuf_pars_vertex,logdepthbuf_vertex:logdepthbuf_vertex,map_fragment:map_fragment,map_pars_fragment:map_pars_fragment,map_particle_fragment:map_particle_fragment,map_particle_pars_fragment:map_particle_pars_fragment,metalnessmap_fragment:metalnessmap_fragment,metalnessmap_pars_fragment:metalnessmap_pars_fragment,morphnormal_vertex:morphnormal_vertex,morphtarget_pars_vertex:morphtarget_pars_vertex,morphtarget_vertex:morphtarget_vertex,normal_fragment_begin:normal_fragment_begin,normal_fragment_maps:normal_fragment_maps,normalmap_pars_fragment:normalmap_pars_fragment,clearcoat_normal_fragment_begin:clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps:clearcoat_normal_fragment_maps,clearcoat_pars_fragment:clearcoat_pars_fragment,packing:packing,premultiplied_alpha_fragment:premultiplied_alpha_fragment,project_vertex:project_vertex,dithering_fragment:dithering_fragment,dithering_pars_fragment:dithering_pars_fragment,roughnessmap_fragment:roughnessmap_fragment,roughnessmap_pars_fragment:roughnessmap_pars_fragment,shadowmap_pars_fragment:shadowmap_pars_fragment,shadowmap_pars_vertex:shadowmap_pars_vertex,shadowmap_vertex:shadowmap_vertex,shadowmask_pars_fragment:shadowmask_pars_fragment,skinbase_vertex:skinbase_vertex,skinning_pars_vertex:skinning_pars_vertex,skinning_vertex:skinning_vertex,skinnormal_vertex:skinnormal_vertex,specularmap_fragment:specularmap_fragment,specularmap_pars_fragment:specularmap_pars_fragment,tonemapping_fragment:tonemapping_fragment,tonemapping_pars_fragment:tonemapping_pars_fragment,uv_pars_fragment:uv_pars_fragment,uv_pars_vertex:uv_pars_vertex,uv_vertex:uv_vertex,uv2_pars_fragment:uv2_pars_fragment,uv2_pars_vertex:uv2_pars_vertex,uv2_vertex:uv2_vertex,worldpos_vertex:worldpos_vertex,background_frag:background_frag,background_vert:background_vert,cube_frag:cube_frag,cube_vert:cube_vert,depth_frag:depth_frag,depth_vert:depth_vert,distanceRGBA_frag:distanceRGBA_frag,distanceRGBA_vert:distanceRGBA_vert,equirect_frag:equirect_frag,equirect_vert:equirect_vert,linedashed_frag:linedashed_frag,linedashed_vert:linedashed_vert,meshbasic_frag:meshbasic_frag,meshbasic_vert:meshbasic_vert,meshlambert_frag:meshlambert_frag,meshlambert_vert:meshlambert_vert,meshmatcap_frag:meshmatcap_frag,meshmatcap_vert:meshmatcap_vert,meshtoon_frag:meshtoon_frag,meshtoon_vert:meshtoon_vert,meshphong_frag:meshphong_frag,meshphong_vert:meshphong_vert,meshphysical_frag:meshphysical_frag,meshphysical_vert:meshphysical_vert,normal_frag:normal_frag,normal_vert:normal_vert,points_frag:points_frag,points_vert:points_vert,shadow_frag:shadow_frag,shadow_vert:shadow_vert,sprite_frag:sprite_frag,sprite_vert:sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};function WebGLBackground(e,t,r,n){var i,o,a=new Color(0),s=0,c=null,u=0,l=null;function f(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),f(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){f(a,s=e)},render:function(t,n,h,p){var d=n.background,m=e.xr,g=m.getSession&&m.getSession();if(g&&"additive"===g.environmentBlendMode&&(d=null),null===d?f(a,s):d&&d.isColor&&(f(d,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLCubeRenderTarget||d.mapping===CubeUVReflectionMapping)){void 0===o&&((o=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o));var v=d.isWebGLCubeRenderTarget?d.texture:d;o.material.uniforms.envMap.value=v,o.material.uniforms.flipEnvMap.value=v.isCubeTexture?-1:1,c===d&&u===v.version&&l===e.toneMapping||(o.material.needsUpdate=!0,c=d,u=v.version,l=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),c===d&&u===d.version&&l===e.toneMapping||(i.material.needsUpdate=!0,c=d,u=d.version,l=e.toneMapping),t.unshift(i,i.geometry,i.material,0,0,null))}}}function WebGLBufferRenderer(e,t,r,n){var i,o=n.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i)},this.renderInstances=function(n,a,s,c){if(0!==c){var u,l;if(o)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,a,s,c),r.update(s,i,c)}}}function WebGLCapabilities(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==r.precision?r.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var c=!0===r.logarithmicDepthBuffer,u=e.getParameter(34930),l=e.getParameter(35660),f=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),d=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=l>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:f,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?e.getParameter(36183):0}}function WebGLClipping(){var e=this,t=null,r=0,n=!1,i=!1,o=new Plane,a=new Matrix3,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,r,n,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=n+4*c,f=r.matrixWorldInverse;a.getNormalMatrix(f),(null===u||u.length<l)&&(u=new Float32Array(l));for(var h=0,p=n;h!==c;++h,p+=4)o.copy(t[h]).applyMatrix4(f,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,e.numIntersection=0,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==r||n;return n=i,t=u(e,o,0),r=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,f,h){if(!n||null===e||0===e.length||i&&!a)i?u(null):c();else{var p=i?0:r,d=4*p,m=f.clippingState||null;s.value=m,m=u(e,l,d,h);for(var g=0;g!==d;++g)m[g]=t[g];f.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function WebGLExtensions(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function WebGLGeometries(e,t,r){var n=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=n.get(a);for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),n.delete(a);var u=i.get(s);u&&(t.remove(u),i.delete(s)),r.memory.geometries--}function a(e){var r=[],n=e.index,o=e.attributes.position,a=0;if(null!==n){var s=n.array;a=n.version;for(var c=0,u=s.length;c<u;c+=3){var l=s[c+0],f=s[c+1],h=s[c+2];r.push(l,f,f,h,h,l)}}else{s=o.array;a=o.version;for(c=0,u=s.length/3-1;c<u;c+=3){l=c+0,f=c+1,h=c+2;r.push(l,f,f,h,h,l)}}var p=new(arrayMax(r)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(r,1);p.version=a,t.update(p,34963);var d=i.get(e);d&&t.remove(d),i.set(e,p)}return{get:function(e,t){var i=n.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new BufferGeometry).setFromObject(e)),i=t._bufferGeometry),n.set(t,i),r.memory.geometries++,i)},update:function(e){var r=e.index,n=e.attributes;for(var i in null!==r&&t.update(r,34963),n)t.update(n[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,c=a.length;s<c;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var r=e.index;null!==r&&t.version<r.version&&a(e)}else a(e);return i.get(e)}}}function WebGLIndexedBufferRenderer(e,t,r,n){var i,o,a,s=n.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,o,t*a),r.update(n,i)},this.renderInstances=function(n,c,u,l){if(0!==l){var f,h;if(s)f=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(f=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[h](i,u,o,c*a,l),r.update(u,i,l)}}}function WebGLInfo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(n=n||1,t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function absNumericalSort(e,t){return Math.abs(t[1])-Math.abs(e[1])}function WebGLMorphtargets(e){var t={},r=new Float32Array(8);return{update:function(n,i,o,a){var s=n.morphTargetInfluences,c=void 0===s?0:s.length,u=t[i.id];if(void 0===u){u=[];for(var l=0;l<c;l++)u[l]=[l,0];t[i.id]=u}var f=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++){0!==(d=u[l])[1]&&(f&&i.deleteAttribute("morphTarget"+l),h&&i.deleteAttribute("morphNormal"+l))}for(l=0;l<c;l++){(d=u[l])[0]=l,d[1]=s[l]}u.sort(absNumericalSort);var p=0;for(l=0;l<8;l++){var d;if(d=u[l]){var m=d[0],g=d[1];if(g){f&&i.setAttribute("morphTarget"+l,f[m]),h&&i.setAttribute("morphNormal"+l,h[m]),r[l]=g,p+=g;continue}}r[l]=0}var v=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",v),a.getUniforms().setValue(e,"morphTargetInfluences",r)}}}function WebGLObjects(e,t,r,n){var i=new WeakMap;return{update:function(e){var o=n.render.frame,a=e.geometry,s=t.get(e,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i.set(s,o)),e.isInstancedMesh&&r.update(e.instanceMatrix,34962),s},dispose:function(){i=new WeakMap}}}function CubeTexture(e,t,r,n,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:CubeReflectionMapping,a=void 0!==a?a:RGBFormat,Texture.call(this,e,t,r,n,i,o,a,s,c,u),this.flipY=!1}function DataTexture2DArray(e,t,r,n){Texture.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function DataTexture3D(e,t,r,n){Texture.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),DataTexture2DArray.prototype=Object.create(Texture.prototype),DataTexture2DArray.prototype.constructor=DataTexture2DArray,DataTexture2DArray.prototype.isDataTexture2DArray=!0,DataTexture3D.prototype=Object.create(Texture.prototype),DataTexture3D.prototype.constructor=DataTexture3D,DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,o=arrayCacheF32[i];if(void 0===o&&(o=new Float32Array(i),arrayCacheF32[i]=o),0!==t){n.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function arraysEqual(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function copyArray(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function allocTexUnits(e,t){var r=arrayCacheI32[t];void 0===r&&(r=new Int32Array(t),arrayCacheI32[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function setValueV1f(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function setValueV2f(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(arraysEqual(r,t))return;e.uniform2fv(this.addr,t),copyArray(r,t)}}function setValueV3f(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(arraysEqual(r,t))return;e.uniform3fv(this.addr,t),copyArray(r,t)}}function setValueV4f(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(arraysEqual(r,t))return;e.uniform4fv(this.addr,t),copyArray(r,t)}}function setValueM2(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(arraysEqual(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),copyArray(r,t)}else{if(arraysEqual(r,n))return;mat2array.set(n),e.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(r,n)}}function setValueM3(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(arraysEqual(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),copyArray(r,t)}else{if(arraysEqual(r,n))return;mat3array.set(n),e.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(r,n)}}function setValueM4(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(arraysEqual(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),copyArray(r,t)}else{if(arraysEqual(r,n))return;mat4array.set(n),e.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(r,n)}}function setValueT1(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTexture2D(t||emptyTexture,i)}function setValueT2DArray1(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||emptyTexture2dArray,i)}function setValueT3D1(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||emptyTexture3d,i)}function setValueT6(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTextureCube(t||emptyCubeTexture,i)}function setValueV1i(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function setValueV2i(e,t){var r=this.cache;arraysEqual(r,t)||(e.uniform2iv(this.addr,t),copyArray(r,t))}function setValueV3i(e,t){var r=this.cache;arraysEqual(r,t)||(e.uniform3iv(this.addr,t),copyArray(r,t))}function setValueV4i(e,t){var r=this.cache;arraysEqual(r,t)||(e.uniform4iv(this.addr,t),copyArray(r,t))}function setValueV1ui(e,t){var r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function getSingularSetter(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(e,t){e.uniform1fv(this.addr,t)}function setValueV1iArray(e,t){e.uniform1iv(this.addr,t)}function setValueV2iArray(e,t){e.uniform2iv(this.addr,t)}function setValueV3iArray(e,t){e.uniform3iv(this.addr,t)}function setValueV4iArray(e,t){e.uniform4iv(this.addr,t)}function setValueV2fArray(e,t){var r=flatten(t,this.size,2);e.uniform2fv(this.addr,r)}function setValueV3fArray(e,t){var r=flatten(t,this.size,3);e.uniform3fv(this.addr,r)}function setValueV4fArray(e,t){var r=flatten(t,this.size,4);e.uniform4fv(this.addr,r)}function setValueM2Array(e,t){var r=flatten(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function setValueM3Array(e,t){var r=flatten(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function setValueM4Array(e,t){var r=flatten(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function setValueT1Array(e,t,r){var n=t.length,i=allocTexUnits(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.safeSetTexture2D(t[o]||emptyTexture,i[o])}function setValueT6Array(e,t,r){var n=t.length,i=allocTexUnits(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.safeSetTextureCube(t[o]||emptyCubeTexture,i[o])}function getPureArraySetter(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=getSingularSetter(t.type)}function PureArrayUniform(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=getPureArraySetter(t.type)}function StructuredUniform(e){this.id=e,this.seq=[],this.map={}}PureArrayUniform.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),copyArray(t,e)},StructuredUniform.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,o=n.length;i!==o;++i){var a=n[i];a.setValue(e,t[a.id],r)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,r){var n=e.name,i=n.length;for(RePathPart.lastIndex=0;;){var o=RePathPart.exec(n),a=RePathPart.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){addUniform(r,void 0===u?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}var l=r.map[s];void 0===l&&addUniform(r,l=new StructuredUniform(s)),r=l}}function WebGLUniforms(e,t){this.seq=[],this.map={};for(var r=e.getProgramParameter(t,35718),n=0;n<r;++n){var i=e.getActiveUniform(t,n);parseUniform(i,e.getUniformLocation(t,i.name),this)}}function WebGLShader(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}WebGLUniforms.prototype.setValue=function(e,t,r,n){var i=this.map[t];void 0!==i&&i.setValue(e,r,n)},WebGLUniforms.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},WebGLUniforms.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},WebGLUniforms.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var programIdCount=0;function addLineNumbers(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function getEncodingComponents(e){switch(e){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function getShaderErrors(e,t,r){var n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return n&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+i+addLineNumbers(e.getShaderSource(t))}function getTexelDecodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function getTexelEncodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function getToneMappingFunction(e,t){var r;switch(t){case LinearToneMapping:r="Linear";break;case ReinhardToneMapping:r="Reinhard";break;case Uncharted2ToneMapping:r="Uncharted2";break;case CineonToneMapping:r="OptimizedCineon";break;case ACESFilmicToneMapping:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function generateExtensions(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function fetchAttributeLocations(e,t){for(var r={},n=e.getProgramParameter(t,35721),i=0;i<n;i++){var o=e.getActiveAttrib(t,i).name;r[o]=e.getAttribLocation(t,o)}return r}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(includePattern,includeReplacer)}function includeReplacer(e,t){var r=ShaderChunk[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return resolveIncludes(r)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(e,t,r,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(e,t,r,n)}function loopReplacer(e,t,r,n){for(var i="",o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function generatePrecision(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function generateShadowMapTypeDefine(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===PCFShadowMap?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===PCFSoftShadowMap?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===VSMShadowMap&&(t="SHADOWMAP_TYPE_VSM"),t}function generateEnvMapTypeDefine(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:t="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:t="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:t="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:t="ENVMAP_TYPE_SPHERE"}return t}function generateEnvMapModeDefine(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:t="ENVMAP_MODE_REFRACTION"}return t}function generateEnvMapBlendingDefine(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case MultiplyOperation:t="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:t="ENVMAP_BLENDING_MIX";break;case AddOperation:t="ENVMAP_BLENDING_ADD"}return t}function WebGLProgram(e,t,r){var n,i,o=e.getContext(),a=r.defines,s=r.vertexShader,c=r.fragmentShader,u=generateShadowMapTypeDefine(r),l=generateEnvMapTypeDefine(r),f=generateEnvMapModeDefine(r),h=generateEnvMapBlendingDefine(r),p=e.gammaFactor>0?e.gammaFactor:1,d=r.isWebGL2?"":generateExtensions(r),m=generateDefines(a),g=o.createProgram();if(r.isRawShaderMaterial?((n=[m].filter(filterEmptyLine).join("\n")).length>0&&(n+="\n"),(i=[d,m].filter(filterEmptyLine).join("\n")).length>0&&(i+="\n")):(n=[generatePrecision(r),"#define SHADER_NAME "+r.shaderName,m,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),i=[d,generatePrecision(r),"#define SHADER_NAME "+r.shaderName,m,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+f:"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",r.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),s=replaceClippingPlaneNums(s=replaceLightNums(s=resolveIncludes(s),r),r),c=replaceClippingPlaneNums(c=replaceLightNums(c=resolveIncludes(c),r),r),s=unrollLoops(s),c=unrollLoops(c),r.isWebGL2&&!r.isRawShaderMaterial){var v=!1,y=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==s.match(y)&&null!==c.match(y)&&(v=!0,s=s.replace(y,""),c=c.replace(y,"")),n=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+n,i=["#version 300 es\n","#define varying in",v?"":"out highp vec4 pc_fragColor;",v?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i}var b,_,A=i+c,M=WebGLShader(o,35633,n+s),x=WebGLShader(o,35632,A);if(o.attachShader(g,M),o.attachShader(g,x),void 0!==r.index0AttributeName?o.bindAttribLocation(g,0,r.index0AttributeName):!0===r.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var w=o.getProgramInfoLog(g).trim(),$=o.getShaderInfoLog(M).trim(),E=o.getShaderInfoLog(x).trim(),T=!0,S=!0;if(!1===o.getProgramParameter(g,35714)){T=!1;var O=getShaderErrors(o,M,"vertex"),N=getShaderErrors(o,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(g,35715),"gl.getProgramInfoLog",w,O,N)}else""!==w?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",w):""!==$&&""!==E||(S=!1);S&&(this.diagnostics={runnable:T,programLog:w,vertexShader:{log:$,prefix:n},fragmentShader:{log:E,prefix:i}})}return o.deleteShader(M),o.deleteShader(x),this.getUniforms=function(){return void 0===b&&(b=new WebGLUniforms(o,g)),b},this.getAttributes=function(){return void 0===_&&(_=fetchAttributeLocations(o,g)),_},this.destroy=function(){o.deleteProgram(g),this.program=void 0},this.name=r.shaderName,this.id=programIdCount++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=x,this}function WebGLPrograms(e,t,r){var n=[],i=r.isWebGL2,o=r.logarithmicDepthBuffer,a=r.floatVertexTextures,s=r.precision,c=r.maxVertexUniforms,u=r.vertexTextures,l={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function h(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=LinearEncoding,t}this.getParameters=function(n,f,p,d,m,g,v){var y=d.fog,b=n.isMeshStandardMaterial?d.environment:null,_=n.envMap||b,A=l[n.type],M=v.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var r=c,n=Math.floor((r-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(v):0;null!==n.precision&&(s=r.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",s,"instead.");var x=function(e,t){var r;if(t){var n=ShaderLib[t];r={name:e.type,uniforms:UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}}else r={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};return r}(n,A);n.onBeforeCompile(x,e);var w=e.getRenderTarget();return{isWebGL2:i,shaderID:A,shaderName:x.name,uniforms:x.uniforms,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,defines:n.defines,isRawShaderMaterial:n.isRawShaderMaterial,isShaderMaterial:n.isShaderMaterial,precision:s,instancing:!0===v.isInstancedMesh,supportsVertexTextures:u,outputEncoding:null!==w?h(w.texture):e.outputEncoding,map:!!n.map,mapEncoding:h(n.map),matcap:!!n.matcap,matcapEncoding:h(n.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:h(_),envMapCubeUV:!!_&&(_.mapping===CubeUVReflectionMapping||_.mapping===CubeUVRefractionMapping),lightMap:!!n.lightMap,lightMapEncoding:h(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:h(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:n.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!n.clearcoatMap,clearcoatRoughnessMap:!!n.clearcoatRoughnessMap,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatMap||n.clearcoatRoughnessMap||n.clearcoatNormalMap||n.displacementMap),uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||!n.displacementMap),fog:!!y,useFog:n.fog,fogExp2:y&&y.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:o,skinning:n.skinning&&M>0,maxBones:M,useVertexTexture:a,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numDirLightShadows:f.directionalShadowMap.length,numPointLightShadows:f.pointShadowMap.length,numSpotLightShadows:f.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:g,dithering:n.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:n.toneMapped?e.toneMapping:NoToneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===DoubleSide,flipSided:n.side===BackSide,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.fragDepth,extensionDrawBuffers:n.extensions&&n.extensions.drawBuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:n.onBeforeCompile}},this.getProgramCacheKey=function(t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)r.push(n),r.push(t.defines[n]);if(void 0===t.isRawShaderMaterial){for(var i=0;i<f.length;i++)r.push(t[f[i]]);r.push(e.outputEncoding),r.push(e.gammaFactor)}return r.push(t.onBeforeCompile.toString()),r.join()},this.acquireProgram=function(t,r){for(var i,o=0,a=n.length;o<a;o++){var s=n[o];if(s.cacheKey===r){++(i=s).usedTimes;break}}return void 0===i&&(i=new WebGLProgram(e,r,t),n.push(i)),i},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function WebGLProperties(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function painterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(){var e=[],t=0,r=[],n=[],i={id:-1};function o(r,n,o,a,s,c){var u=e[t];return void 0===u?(u={id:r.id,object:r,geometry:n,material:o,program:o.program||i,groupOrder:a,renderOrder:r.renderOrder,z:s,group:c},e[t]=u):(u.id=r.id,u.object=r,u.geometry=n,u.material=o,u.program=o.program||i,u.groupOrder=a,u.renderOrder=r.renderOrder,u.z=s,u.group=c),t++,u}return{opaque:r,transparent:n,init:function(){t=0,r.length=0,n.length=0},push:function(e,t,i,a,s,c){var u=o(e,t,i,a,s,c);(!0===i.transparent?n:r).push(u)},unshift:function(e,t,i,a,s,c){var u=o(e,t,i,a,s,c);(!0===i.transparent?n:r).unshift(u)},finish:function(){for(var r=t,n=e.length;r<n;r++){var i=e[r];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||painterSortStable),n.length>1&&n.sort(t||reversePainterSortStable)}}}function WebGLRenderLists(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i,o=e.get(r);return void 0===o?(i=new WebGLRenderList,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):void 0===(i=o.get(n))&&(i=new WebGLRenderList,o.set(n,i)),i},dispose:function(){e=new WeakMap}}}function UniformsCache(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Vector3,color:new Color};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":r={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return e[t.id]=r,r}}}function ShadowUniformsCache(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=r,r}}}var nextVersion=0;function shadowCastingLightsFirst(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function WebGLLights(){for(var e=new UniformsCache,t=ShadowUniformsCache(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)r.probe.push(new Vector3);var i=new Vector3,o=new Matrix4,a=new Matrix4;return{setup:function(n,s,c){for(var u=0,l=0,f=0,h=0;h<9;h++)r.probe[h].set(0,0,0);var p=0,d=0,m=0,g=0,v=0,y=0,b=0,_=0,A=c.matrixWorldInverse;n.sort(shadowCastingLightsFirst),h=0;for(var M=n.length;h<M;h++){var x=n[h],w=x.color,$=x.intensity,E=x.distance,T=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)u+=w.r*$,l+=w.g*$,f+=w.b*$;else if(x.isLightProbe)for(var S=0;S<9;S++)r.probe[S].addScaledVector(x.sh.coefficients[S],$);else if(x.isDirectionalLight){if((D=e.get(x)).color.copy(x.color).multiplyScalar(x.intensity),D.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),D.direction.sub(i),D.direction.transformDirection(A),x.castShadow){var O=x.shadow;(N=t.get(x)).shadowBias=O.bias,N.shadowRadius=O.radius,N.shadowMapSize=O.mapSize,r.directionalShadow[p]=N,r.directionalShadowMap[p]=T,r.directionalShadowMatrix[p]=x.shadow.matrix,y++}r.directional[p]=D,p++}else if(x.isSpotLight){if((D=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),D.position.applyMatrix4(A),D.color.copy(w).multiplyScalar($),D.distance=E,D.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),D.direction.sub(i),D.direction.transformDirection(A),D.coneCos=Math.cos(x.angle),D.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),D.decay=x.decay,x.castShadow){O=x.shadow;(N=t.get(x)).shadowBias=O.bias,N.shadowRadius=O.radius,N.shadowMapSize=O.mapSize,r.spotShadow[m]=N,r.spotShadowMap[m]=T,r.spotShadowMatrix[m]=x.shadow.matrix,_++}r.spot[m]=D,m++}else if(x.isRectAreaLight){(D=e.get(x)).color.copy(w).multiplyScalar($),D.position.setFromMatrixPosition(x.matrixWorld),D.position.applyMatrix4(A),a.identity(),o.copy(x.matrixWorld),o.premultiply(A),a.extractRotation(o),D.halfWidth.set(.5*x.width,0,0),D.halfHeight.set(0,.5*x.height,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),r.rectArea[g]=D,g++}else if(x.isPointLight){if((D=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),D.position.applyMatrix4(A),D.color.copy(x.color).multiplyScalar(x.intensity),D.distance=x.distance,D.decay=x.decay,x.castShadow){var N;O=x.shadow;(N=t.get(x)).shadowBias=O.bias,N.shadowRadius=O.radius,N.shadowMapSize=O.mapSize,N.shadowCameraNear=O.camera.near,N.shadowCameraFar=O.camera.far,r.pointShadow[d]=N,r.pointShadowMap[d]=T,r.pointShadowMatrix[d]=x.shadow.matrix,b++}r.point[d]=D,d++}else if(x.isHemisphereLight){var D;(D=e.get(x)).direction.setFromMatrixPosition(x.matrixWorld),D.direction.transformDirection(A),D.direction.normalize(),D.skyColor.copy(x.color).multiplyScalar($),D.groundColor.copy(x.groundColor).multiplyScalar($),r.hemi[v]=D,v++}}r.ambient[0]=u,r.ambient[1]=l,r.ambient[2]=f;var I=r.hash;I.directionalLength===p&&I.pointLength===d&&I.spotLength===m&&I.rectAreaLength===g&&I.hemiLength===v&&I.numDirectionalShadows===y&&I.numPointShadows===b&&I.numSpotShadows===_||(r.directional.length=p,r.spot.length=m,r.rectArea.length=g,r.point.length=d,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=_,r.spotShadowMap.length=_,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=_,I.directionalLength=p,I.pointLength=d,I.spotLength=m,I.rectAreaLength=g,I.hemiLength=v,I.numDirectionalShadows=y,I.numPointShadows=b,I.numSpotShadows=_,r.version=nextVersion++)},state:r}}function WebGLRenderState(){var e=new WebGLLights,t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(n){e.setup(t,r,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function WebGLRenderStates(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i;return!1===e.has(r)?(i=new WebGLRenderState,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):!1===e.get(r).has(n)?(i=new WebGLRenderState,e.get(r).set(n,i)):i=e.get(r).get(n),i},dispose:function(){e=new WeakMap}}}function MeshDepthMaterial(e){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function MeshDistanceMaterial(e){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},MeshDistanceMaterial.prototype=Object.create(Material.prototype),MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial,MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0,MeshDistanceMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var vsm_frag="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",vsm_vert="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function WebGLShadowMap(e,t,r){var n=new Frustum,i=new Vector2,o=new Vector2,a=new Vector4,s=[],c=[],u={},l={0:BackSide,1:FrontSide,2:DoubleSide},f=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),h=f.clone();h.defines.HORIZONAL_PASS=1;var p=new BufferGeometry;p.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var d=new Mesh(p,f),m=this;function g(r,n){var i=t.update(d);f.uniforms.shadow_pass.value=r.map.texture,f.uniforms.resolution.value=r.mapSize,f.uniforms.radius.value=r.radius,e.setRenderTarget(r.mapPass),e.clear(),e.renderBufferDirect(n,null,i,f,d,null),h.uniforms.shadow_pass.value=r.mapPass.texture,h.uniforms.resolution.value=r.mapSize,h.uniforms.radius.value=r.radius,e.setRenderTarget(r.map),e.clear(),e.renderBufferDirect(n,null,i,h,d,null)}function v(e,t,r){var n=e<<0|t<<1|r<<2,i=s[n];return void 0===i&&(i=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:e,skinning:t}),s[n]=i),i}function y(e,t,r){var n=e<<0|t<<1|r<<2,i=c[n];return void 0===i&&(i=new MeshDistanceMaterial({morphTargets:e,skinning:t}),c[n]=i),i}function b(t,r,n,i,o,a,s){var c=null,f=v,h=t.customDepthMaterial;if(!0===i.isPointLight&&(f=y,h=t.customDistanceMaterial),void 0===h){var p=!1;!0===n.morphTargets&&(p=r.morphAttributes&&r.morphAttributes.position&&r.morphAttributes.position.length>0);var d=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?d=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),c=f(p,d,!0===t.isInstancedMesh)}else c=h;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=c.uuid,g=n.uuid,b=u[m];void 0===b&&(b={},u[m]=b);var _=b[g];void 0===_&&(_=c.clone(),b[g]=_),c=_}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=s===VSMShadowMap?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:l[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=o,c.farDistance=a),c}function _(r,i,o,a,s){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&s===VSMShadowMap)&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,r.matrixWorld);var c=t.update(r),u=r.material;if(Array.isArray(u))for(var l=c.groups,f=0,h=l.length;f<h;f++){var p=l[f],d=u[p.materialIndex];if(d&&d.visible){var m=b(r,c,d,a,o.near,o.far,s);e.renderBufferDirect(o,null,c,m,r,p)}}else if(u.visible){m=b(r,c,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,c,m,r,null)}}for(var g=r.children,v=0,y=g.length;v<y;v++)_(g[v],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(t,s,c){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),h=e.state;h.setBlending(NoBlending),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,d=t.length;p<d;p++){var v=t[p],y=v.shadow;if(void 0!==y){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),o.copy(y.mapSize),(i.x>r||i.y>r)&&(i.x>r&&(o.x=Math.floor(r/b.x),i.x=o.x*b.x,y.mapSize.x=o.x),i.y>r&&(o.y=Math.floor(r/b.y),i.y=o.y*b.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===VSMShadowMap){var A={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};y.map=new WebGLRenderTarget(i.x,i.y,A),y.map.texture.name=v.name+".shadowMap",y.mapPass=new WebGLRenderTarget(i.x,i.y,A),y.camera.updateProjectionMatrix()}if(null===y.map){A={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};y.map=new WebGLRenderTarget(i.x,i.y,A),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),x=0;x<M;x++){var w=y.getViewport(x);a.set(o.x*w.x,o.y*w.y,o.x*w.z,o.y*w.w),h.viewport(a),y.updateMatrices(v,x),n=y.getFrustum(),_(s,c,y.camera,v,this.type)}y.isPointLightShadow||this.type!==VSMShadowMap||g(y,c)}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,f)}}}function WebGLState(e,t,r){var n,i,o=r.isWebGL2;var a=new function(){var t=!1,r=new Vector4,n=null,i=new Vector4(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),r.set(t,n,o,a),!1===i.equals(r)&&(e.clearColor(t,n,o,a),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?B(2929):U(2929)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case NeverDepth:e.depthFunc(512);break;case AlwaysDepth:e.depthFunc(519);break;case LessDepth:e.depthFunc(513);break;case LessEqualDepth:e.depthFunc(515);break;case EqualDepth:e.depthFunc(514);break;case GreaterEqualDepth:e.depthFunc(518);break;case GreaterDepth:e.depthFunc(516);break;case NotEqualDepth:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},c=new function(){var t=!1,r=null,n=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(e){t||(e?B(2960):U(2960))},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,a){n===t&&i===r&&o===a||(e.stencilFunc(t,r,a),n=t,i=r,o=a)},setOp:function(t,r,n){a===t&&s===r&&c===n||(e.stencilOp(t,r,n),a=t,s=r,c=n)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,n=null,i=null,o=null,a=null,s=null,c=null,u=null}}},u=e.getParameter(34921),l=new Uint8Array(u),f=new Uint8Array(u),h=new Uint8Array(u),p={},d=null,m=null,g=null,v=null,y=null,b=null,_=null,A=null,M=null,x=!1,w=null,$=null,E=null,T=null,S=null,O=e.getParameter(35661),N=!1,D=0,I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(D=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),N=D>=1):-1!==I.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),N=D>=2);var P=null,j={},C=new Vector4,L=new Vector4;function R(t,r,n){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<n;a++)e.texImage2D(r+a,0,6408,1,1,0,6408,5121,i);return o}var z={};function k(r,n){(l[r]=1,0===f[r]&&(e.enableVertexAttribArray(r),f[r]=1),h[r]!==n)&&((o?e:t.get("ANGLE_instanced_arrays"))[o?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n),h[r]=n)}function B(t){!0!==p[t]&&(e.enable(t),p[t]=!0)}function U(t){!1!==p[t]&&(e.disable(t),p[t]=!1)}z[3553]=R(3553,3553,1),z[34067]=R(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),c.setClear(0),B(2929),s.setFunc(LessEqualDepth),W(!1),Q(CullFaceBack),B(2884),H(NoBlending);var F=(_defineProperty3(n={},AddEquation,32774),_defineProperty3(n,SubtractEquation,32778),_defineProperty3(n,ReverseSubtractEquation,32779),n);if(o)F[MinEquation]=32775,F[MaxEquation]=32776;else{var G=t.get("EXT_blend_minmax");null!==G&&(F[MinEquation]=G.MIN_EXT,F[MaxEquation]=G.MAX_EXT)}var V=(_defineProperty3(i={},ZeroFactor,0),_defineProperty3(i,OneFactor,1),_defineProperty3(i,SrcColorFactor,768),_defineProperty3(i,SrcAlphaFactor,770),_defineProperty3(i,SrcAlphaSaturateFactor,776),_defineProperty3(i,DstColorFactor,774),_defineProperty3(i,DstAlphaFactor,772),_defineProperty3(i,OneMinusSrcColorFactor,769),_defineProperty3(i,OneMinusSrcAlphaFactor,771),_defineProperty3(i,OneMinusDstColorFactor,775),_defineProperty3(i,OneMinusDstAlphaFactor,773),i);function H(t,r,n,i,o,a,s,c){if(t!==NoBlending){if(m||(B(3042),m=!0),t===CustomBlending)o=o||r,a=a||n,s=s||i,r===v&&o===_||(e.blendEquationSeparate(F[r],F[o]),v=r,_=o),n===y&&i===b&&a===A&&s===M||(e.blendFuncSeparate(V[n],V[i],V[a],V[s]),y=n,b=i,A=a,M=s),g=t,x=null;else if(t!==g||c!==x){if(v===AddEquation&&_===AddEquation||(e.blendEquation(32774),v=AddEquation,_=AddEquation),c)switch(t){case NormalBlending:e.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:e.blendFunc(1,1);break;case SubtractiveBlending:e.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case NormalBlending:e.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:e.blendFunc(770,1);break;case SubtractiveBlending:e.blendFunc(0,769);break;case MultiplyBlending:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,A=null,M=null,g=t,x=c}}else m&&(U(3042),m=!1)}function W(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function Q(t){t!==CullFaceNone?(B(2884),t!==$&&(t===CullFaceBack?e.cullFace(1029):t===CullFaceFront?e.cullFace(1028):e.cullFace(1032))):U(2884),$=t}function Y(t,r,n){t?(B(32823),T===r&&S===n||(e.polygonOffset(r,n),T=r,S=n)):U(32823)}function q(t){void 0===t&&(t=33984+O-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:a,depth:s,stencil:c},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){k(e,0)},enableAttributeAndDivisor:k,disableUnusedAttributes:function(){for(var t=0,r=f.length;t!==r;++t)f[t]!==l[t]&&(e.disableVertexAttribArray(t),f[t]=0)},vertexAttribPointer:function(t,r,n,i,a,s){!0!==o||5124!==n&&5125!==n?e.vertexAttribPointer(t,r,n,i,a,s):e.vertexAttribIPointer(t,r,n,i,a,s)},enable:B,disable:U,useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===DoubleSide?U(2884):B(2884);var r=e.side===BackSide;t&&(r=!r),W(r),e.blending===NormalBlending&&!1===e.transparent?H(NoBlending):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);var n=e.stencilWrite;c.setTest(n),n&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:W,setCullFace:Q,setLineWidth:function(t){t!==E&&(N&&e.lineWidth(t),E=t)},setPolygonOffset:Y,setScissorTest:function(e){e?B(3089):U(3089)},activeTexture:q,bindTexture:function(t,r){null===P&&q();var n=j[P];void 0===n&&(n={type:void 0,texture:void 0},j[P]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||z[t]),n.type=t,n.texture=r)},unbindTexture:function(){var t=j[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===C.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),C.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){for(var t=0;t<f.length;t++)1===f[t]&&(e.disableVertexAttribArray(t),f[t]=0);p={},P=null,j={},d=null,g=null,w=null,$=null,a.reset(),s.reset(),c.reset()}}}function WebGLTextures(e,t,r,n,i,o,a){var s,c,u,l=i.isWebGL2,f=i.maxTextures,h=i.maxCubemapSize,p=i.maxTextureSize,d=i.maxSamples,m=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function v(e,t){return g?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,r,n){var i=1;if((e.width>n||e.height>n)&&(i=n/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?MathUtils.floorPowerOfTwo:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===u&&(u=v(a,s));var c=r?v(a,s):u;return c.width=a,c.height=s,c.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return MathUtils.isPowerOfTwo(e.width)&&MathUtils.isPowerOfTwo(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter}function A(t,r,i,o){e.generateMipmap(t),n.get(r).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function M(r,n,i){if(!1===l)return n;if(null!==r){if(void 0!==e[r])return e[r];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}var o=n;return 6403===n&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===n&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===n&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e){return e===NearestFilter||e===NearestMipmapNearestFilter||e===NearestMipmapLinearFilter?9728:9729}function w(t){var r=t.target;r.removeEventListener("dispose",w),function(t){var r=n.get(t);if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture),n.remove(t)}(r),r.isVideoTexture&&m.delete(r),a.memory.textures--}function $(t){var r=t.target;r.removeEventListener("dispose",$),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);n.remove(t.texture),n.remove(t)}(r),a.memory.textures--}var E=0;function T(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void j(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}function S(t,i){if(6===t.image.length){var a=n.get(t);if(t.version>0&&a.__version!==t.version){P(a,t),r.activeTexture(33984+i),r.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),c=t.image[0]&&t.image[0].isDataTexture,u=[],f=0;f<6;f++)u[f]=s||c?c?t.image[f].image:t.image[f]:y(t.image[f],!1,!0,h);var p,d=u[0],m=b(d)||l,g=o.convert(t.format),v=o.convert(t.type),x=M(t.internalFormat,g,v);if(I(34067,t,m),s){for(f=0;f<6;f++){p=u[f].mipmaps;for(var w=0;w<p.length;w++){var $=p[w];t.format!==RGBAFormat&&t.format!==RGBFormat?null!==g?r.compressedTexImage2D(34069+f,w,x,$.width,$.height,0,$.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+f,w,x,$.width,$.height,0,g,v,$.data)}}a.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(f=0;f<6;f++)if(c){r.texImage2D(34069+f,0,x,u[f].width,u[f].height,0,g,v,u[f].data);for(w=0;w<p.length;w++){var E=($=p[w]).image[f].image;r.texImage2D(34069+f,w+1,x,E.width,E.height,0,g,v,E.data)}}else{r.texImage2D(34069+f,0,x,g,v,u[f]);for(w=0;w<p.length;w++){$=p[w];r.texImage2D(34069+f,w+1,x,g,v,$.image[f])}}a.__maxMipLevel=p.length}_(t,m)&&A(34067,t,d.width,d.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+i),r.bindTexture(34067,a.__webglTexture)}}function O(e,t){r.activeTexture(33984+t),r.bindTexture(34067,n.get(e).__webglTexture)}var N=(_defineProperty3(s={},RepeatWrapping,10497),_defineProperty3(s,ClampToEdgeWrapping,33071),_defineProperty3(s,MirroredRepeatWrapping,33648),s),D=(_defineProperty3(c={},NearestFilter,9728),_defineProperty3(c,NearestMipmapNearestFilter,9984),_defineProperty3(c,NearestMipmapLinearFilter,9986),_defineProperty3(c,LinearFilter,9729),_defineProperty3(c,LinearMipmapNearestFilter,9985),_defineProperty3(c,LinearMipmapLinearFilter,9987),c);function I(r,o,a){a?(e.texParameteri(r,10242,N[o.wrapS]),e.texParameteri(r,10243,N[o.wrapT]),32879!==r&&35866!==r||e.texParameteri(r,32882,N[o.wrapR]),e.texParameteri(r,10240,D[o.magFilter]),e.texParameteri(r,10241,D[o.minFilter])):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),32879!==r&&35866!==r||e.texParameteri(r,32882,33071),o.wrapS===ClampToEdgeWrapping&&o.wrapT===ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,x(o.magFilter)),e.texParameteri(r,10241,x(o.minFilter)),o.minFilter!==NearestFilter&&o.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(o.type===FloatType&&null===t.get("OES_texture_float_linear"))return;if(o.type===HalfFloatType&&null===(l||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(e.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function P(t,r){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),a.memory.textures++)}function j(t,n,i){var a=3553;n.isDataTexture2DArray&&(a=35866),n.isDataTexture3D&&(a=32879),P(t,n),r.activeTexture(33984+i),r.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var s=function(e){return!l&&(e.wrapS!==ClampToEdgeWrapping||e.wrapT!==ClampToEdgeWrapping||e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter)}(n)&&!1===b(n.image),c=y(n.image,s,!1,p),u=b(c)||l,f=o.convert(n.format),h=o.convert(n.type),d=M(n.internalFormat,f,h);I(a,n,u);var m,g=n.mipmaps;if(n.isDepthTexture)d=6402,l?d=n.type===FloatType?36012:n.type===UnsignedIntType?33190:n.type===UnsignedInt248Type?35056:33189:n.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===DepthFormat&&6402===d&&n.type!==UnsignedShortType&&n.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=UnsignedShortType,h=o.convert(n.type)),n.format===DepthStencilFormat&&6402===d&&(d=34041,n.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=UnsignedInt248Type,h=o.convert(n.type))),r.texImage2D(3553,0,d,c.width,c.height,0,f,h,null);else if(n.isDataTexture)if(g.length>0&&u){for(var v=0,x=g.length;v<x;v++)m=g[v],r.texImage2D(3553,v,d,m.width,m.height,0,f,h,m.data);n.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else r.texImage2D(3553,0,d,c.width,c.height,0,f,h,c.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(v=0,x=g.length;v<x;v++)m=g[v],n.format!==RGBAFormat&&n.format!==RGBFormat?null!==f?r.compressedTexImage2D(3553,v,d,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,v,d,m.width,m.height,0,f,h,m.data);t.__maxMipLevel=g.length-1}else if(n.isDataTexture2DArray)r.texImage3D(35866,0,d,c.width,c.height,c.depth,0,f,h,c.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)r.texImage3D(32879,0,d,c.width,c.height,c.depth,0,f,h,c.data),t.__maxMipLevel=0;else if(g.length>0&&u){for(v=0,x=g.length;v<x;v++)m=g[v],r.texImage2D(3553,v,d,f,h,m);n.generateMipmaps=!1,t.__maxMipLevel=g.length-1}else r.texImage2D(3553,0,d,f,h,c),t.__maxMipLevel=0;_(n,u)&&A(a,n,c.width,c.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function C(t,i,a,s){var c=o.convert(i.texture.format),u=o.convert(i.texture.type),l=M(i.texture.internalFormat,c,u);r.texImage2D(s,0,l,i.width,i.height,0,c,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function L(t,r,n){if(e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer){var i=33189;if(n){var a=r.depthTexture;a&&a.isDepthTexture&&(a.type===FloatType?i=36012:a.type===UnsignedIntType&&(i=33190));var s=z(r);e.renderbufferStorageMultisample(36161,s,i,r.width,r.height)}else e.renderbufferStorage(36161,i,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer){if(n){s=z(r);e.renderbufferStorageMultisample(36161,s,35056,r.width,r.height)}else e.renderbufferStorage(36161,34041,r.width,r.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var c=o.convert(r.texture.format),u=o.convert(r.texture.type);i=M(r.texture.internalFormat,c,u);if(n){s=z(r);e.renderbufferStorageMultisample(36161,s,i,r.width,r.height)}else e.renderbufferStorage(36161,i,r.width,r.height)}e.bindRenderbuffer(36161,null)}function R(t){var r=n.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===DepthFormat)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==DepthStencilFormat)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),L(r.__webglDepthbuffer[o],t,!1)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),L(r.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function z(e){return l&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}var k=!1,B=!1;this.allocateTextureUnit=function(){var e=E;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(r.activeTexture(33984+t),r.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=S,this.setTextureCubeDynamic=O,this.setupRenderTarget=function(t){var i=n.get(t),s=n.get(t.texture);t.addEventListener("dispose",$),s.__webglTexture=e.createTexture(),a.memory.textures++;var c=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,f=b(t)||l;if(!l||t.texture.format!==RGBFormat||t.texture.type!==FloatType&&t.texture.type!==HalfFloatType||(t.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){i.__webglFramebuffer=[];for(var h=0;h<6;h++)i.__webglFramebuffer[h]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),u)if(l){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var p=o.convert(t.texture.format),d=o.convert(t.texture.type),m=M(t.texture.internalFormat,p,d),g=z(t);e.renderbufferStorageMultisample(36161,g,m,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),L(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){r.bindTexture(34067,s.__webglTexture),I(34067,t.texture,f);for(h=0;h<6;h++)C(i.__webglFramebuffer[h],t,36064,34069+h);_(t.texture,f)&&A(34067,t.texture,t.width,t.height),r.bindTexture(34067,null)}else r.bindTexture(3553,s.__webglTexture),I(3553,t.texture,f),C(i.__webglFramebuffer,t,36064,3553),_(t.texture,f)&&A(3553,t.texture,t.width,t.height),r.bindTexture(3553,null);t.depthBuffer&&R(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(_(t,b(e)||l)){var i=e.isWebGLCubeRenderTarget?34067:3553,o=n.get(t).__webglTexture;r.bindTexture(i,o),A(i,t,e.width,e.height),r.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(l){var r=n.get(t);e.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,r.__webglFramebuffer);var i=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?S(e,t):O(e,t)}}function WebGLUtils(e,t,r){var n=r.isWebGL2;return{convert:function(e){var r;if(e===UnsignedByteType)return 5121;if(e===UnsignedShort4444Type)return 32819;if(e===UnsignedShort5551Type)return 32820;if(e===UnsignedShort565Type)return 33635;if(e===ByteType)return 5120;if(e===ShortType)return 5122;if(e===UnsignedShortType)return 5123;if(e===IntType)return 5124;if(e===UnsignedIntType)return 5125;if(e===FloatType)return 5126;if(e===HalfFloatType)return n?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(e===AlphaFormat)return 6406;if(e===RGBFormat)return 6407;if(e===RGBAFormat)return 6408;if(e===LuminanceFormat)return 6409;if(e===LuminanceAlphaFormat)return 6410;if(e===DepthFormat)return 6402;if(e===DepthStencilFormat)return 34041;if(e===RedFormat)return 6403;if(e===RedIntegerFormat)return 36244;if(e===RGFormat)return 33319;if(e===RGIntegerFormat)return 33320;if(e===RGBIntegerFormat)return 36248;if(e===RGBAIntegerFormat)return 36249;if(e===RGB_S3TC_DXT1_Format||e===RGBA_S3TC_DXT1_Format||e===RGBA_S3TC_DXT3_Format||e===RGBA_S3TC_DXT5_Format){if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===RGB_S3TC_DXT1_Format)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===RGBA_S3TC_DXT1_Format)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===RGBA_S3TC_DXT3_Format)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===RGBA_S3TC_DXT5_Format)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===RGB_PVRTC_4BPPV1_Format||e===RGB_PVRTC_2BPPV1_Format||e===RGBA_PVRTC_4BPPV1_Format||e===RGBA_PVRTC_2BPPV1_Format){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===RGB_PVRTC_4BPPV1_Format)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===RGB_PVRTC_2BPPV1_Format)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===RGBA_PVRTC_4BPPV1_Format)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===RGBA_PVRTC_2BPPV1_Format)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===RGB_ETC1_Format)return null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===RGB_ETC2_Format||e===RGBA_ETC2_EAC_Format)&&null!==(r=t.get("WEBGL_compressed_texture_etc"))){if(e===RGB_ETC2_Format)return r.COMPRESSED_RGB8_ETC2;if(e===RGBA_ETC2_EAC_Format)return r.COMPRESSED_RGBA8_ETC2_EAC}return e===RGBA_ASTC_4x4_Format||e===RGBA_ASTC_5x4_Format||e===RGBA_ASTC_5x5_Format||e===RGBA_ASTC_6x5_Format||e===RGBA_ASTC_6x6_Format||e===RGBA_ASTC_8x5_Format||e===RGBA_ASTC_8x6_Format||e===RGBA_ASTC_8x8_Format||e===RGBA_ASTC_10x5_Format||e===RGBA_ASTC_10x6_Format||e===RGBA_ASTC_10x8_Format||e===RGBA_ASTC_10x10_Format||e===RGBA_ASTC_12x10_Format||e===RGBA_ASTC_12x12_Format||e===SRGB8_ALPHA8_ASTC_4x4_Format||e===SRGB8_ALPHA8_ASTC_5x4_Format||e===SRGB8_ALPHA8_ASTC_5x5_Format||e===SRGB8_ALPHA8_ASTC_6x5_Format||e===SRGB8_ALPHA8_ASTC_6x6_Format||e===SRGB8_ALPHA8_ASTC_8x5_Format||e===SRGB8_ALPHA8_ASTC_8x6_Format||e===SRGB8_ALPHA8_ASTC_8x8_Format||e===SRGB8_ALPHA8_ASTC_10x5_Format||e===SRGB8_ALPHA8_ASTC_10x6_Format||e===SRGB8_ALPHA8_ASTC_10x8_Format||e===SRGB8_ALPHA8_ASTC_10x10_Format||e===SRGB8_ALPHA8_ASTC_12x10_Format||e===SRGB8_ALPHA8_ASTC_12x12_Format?null!==(r=t.get("WEBGL_compressed_texture_astc"))?e:null:e===RGBA_BPTC_Format?null!==(r=t.get("EXT_texture_compression_bptc"))?e:null:e===UnsignedInt248Type?n?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ArrayCamera(e){PerspectiveCamera.call(this),this.cameras=e||[]}function Group$1(){Object3D.call(this),this.type="Group"}function WebXRController(){this._targetRay=null,this._grip=null}function WebXRManager(e,t){var r=this,n=null,i=1,o=null,a="local-floor",s=null,c=[],u=new Map,l=new PerspectiveCamera;l.layers.enable(1),l.viewport=new Vector4;var f=new PerspectiveCamera;f.layers.enable(2),f.viewport=new Vector4;var h=[l,f],p=new ArrayCamera;p.layers.enable(1),p.layers.enable(2);var d=null,m=null;function g(e){var t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function v(){u.forEach((function(e,t){e.disconnect(t)})),u.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),w.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function y(e){o=e,w.setContext(n),w.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}function b(e){for(var t=n.inputSources,r=0;r<c.length;r++)u.set(t[r],c[r]);for(r=0;r<e.removed.length;r++){var i=e.removed[r];(o=u.get(i))&&(o.dispatchEvent({type:"disconnected",data:i}),u.delete(i))}for(r=0;r<e.added.length;r++){var o;i=e.added[r];(o=u.get(i))&&o.dispatchEvent({type:"connected",data:i})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=c[e];return void 0===t&&(t=new WebXRController,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=c[e];return void 0===t&&(t=new WebXRController,c[e]=t),t.getGripSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return n},this.setSession=function(e){if(null!==(n=e)){n.addEventListener("select",g),n.addEventListener("selectstart",g),n.addEventListener("selectend",g),n.addEventListener("squeeze",g),n.addEventListener("squeezestart",g),n.addEventListener("squeezeend",g),n.addEventListener("end",v);var r=t.getContextAttributes();!0!==r.xrCompatible&&t.makeXRCompatible();var o={antialias:r.antialias,alpha:r.alpha,depth:r.depth,stencil:r.stencil,framebufferScaleFactor:i},s=new XRWebGLLayer(n,t,o);n.updateRenderState({baseLayer:s}),n.requestReferenceSpace(a).then(y),n.addEventListener("inputsourceschange",b)}};var _=new Vector3,A=new Vector3;function M(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=f.near=l.near=e.near,p.far=f.far=l.far=e.far,d===p.near&&m===p.far||(n.updateRenderState({depthNear:p.near,depthFar:p.far}),d=p.near,m=p.far);var t=e.parent,r=p.cameras;M(p,t);for(var i=0;i<r.length;i++)M(r[i],t);e.matrixWorld.copy(p.matrixWorld);for(var o=e.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return 2===r.length?function(e,t,r){_.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(r.matrixWorld);var n=_.distanceTo(A),i=t.projectionMatrix.elements,o=r.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],u=(i[9]-1)/i[5],l=(i[8]-1)/i[0],f=(o[8]+1)/o[0],h=a*l,p=a*f,d=n/(-l+f),m=d*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=a+d,v=s+d,y=h-m,b=p+(n-m),M=c*s/v*g,x=u*s/v*g;e.projectionMatrix.makePerspective(y,b,M,x,g,v)}(p,l,f):p.projectionMatrix.copy(l.projectionMatrix),p};var x=null;var w=new WebGLAnimation;w.setAnimationLoop((function(t,r){if(null!==(s=r.getViewerPose(o))){var i=s.views,a=n.renderState.baseLayer;e.setFramebuffer(a.framebuffer);var u=!1;i.length!==p.cameras.length&&(p.cameras.length=0,u=!0);for(var l=0;l<i.length;l++){var f=i[l],d=a.getViewport(f),m=h[l];m.matrix.fromArray(f.transform.matrix),m.projectionMatrix.fromArray(f.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===l&&p.matrix.copy(m.matrix),!0===u&&p.cameras.push(m)}}var g=n.inputSources;for(l=0;l<c.length;l++){var v=c[l],y=g[l];v.update(y,r,o)}x&&x(t,r)})),this.setAnimationLoop=function(e){x=e},this.dispose=function(){}}function WebGLMaterials(e){function t(t,r,n){t.opacity.value=r.opacity,r.color&&t.diffuse.value.copy(r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map),r.alphaMap&&(t.alphaMap.value=r.alphaMap),r.specularMap&&(t.specularMap.value=r.specularMap);var i,o,a=r.envMap||n;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture?-1:1,t.reflectivity.value=r.reflectivity,t.refractionRatio.value=r.refractionRatio,t.maxMipLevel.value=e.get(a).__maxMipLevel),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap&&(i=r.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function r(e,t,r){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===BackSide&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===BackSide&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||r)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,i,o,a){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===BackSide&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===BackSide&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===BackSide&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===BackSide&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n,i),n.isMeshPhysicalMaterial?function(e,t,n){r(e,t,n),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===BackSide&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(e,n,i):r(e,n,i)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===BackSide&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===BackSide&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===BackSide&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===BackSide&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,r,n){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*n,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n,o,a):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function WebGLRenderer(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,f=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,m,g,v,y,b,_,A,M,x,w,$,E,T,S,O,N,D,I=this,P=!1,j=null,C=0,L=0,R=null,z=null,k=-1,B={geometry:null,program:null,wireframe:!1},U=null,F=null,G=new Vector4,V=new Vector4,H=null,W=t.width,Q=t.height,Y=1,q=null,K=null,X=new Vector4(0,0,W,Q),Z=new Vector4(0,0,W,Q),J=!1,ee=new Frustum,te=new WebGLClipping,re=!1,ne=!1,ie=new Matrix4,oe=new Vector3;function ae(){return null===R?Y:1}try{var se={alpha:n,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",he,!1),null===(p=r||t.getContext("webgl",se)||t.getContext("experimental-webgl",se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(xe){throw console.error("THREE.WebGLRenderer: "+xe.message),xe}function ce(){d=new WebGLExtensions(p),!1===(m=new WebGLCapabilities(p,d,e)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),D=new WebGLUtils(p,d,m),(g=new WebGLState(p,d,m)).scissor(V.copy(Z).multiplyScalar(Y).floor()),g.viewport(G.copy(X).multiplyScalar(Y).floor()),v=new WebGLInfo(p),y=new WebGLProperties,b=new WebGLTextures(p,d,g,y,m,D,v),_=new WebGLAttributes(p,m),A=new WebGLGeometries(p,_,v),M=new WebGLObjects(p,A,_,v),S=new WebGLMorphtargets(p),x=new WebGLPrograms(I,d,m),w=new WebGLMaterials(y),$=new WebGLRenderLists,E=new WebGLRenderStates,T=new WebGLBackground(I,g,M,s),O=new WebGLBufferRenderer(p,d,v,m),N=new WebGLIndexedBufferRenderer(p,d,v,m),v.programs=x.programs,I.capabilities=m,I.extensions=d,I.properties=y,I.renderLists=$,I.state=g,I.info=v}ce();var ue=new WebXRManager(I,p);this.xr=ue;var le=new WebGLShadowMap(I,M,m.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1,ce()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){de(e),y.remove(e)}(t)}function de(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&x.releaseProgram(t)}this.shadowMap=le,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,Q,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Vector2),e.set(W,Q)},this.setSize=function(e,r,n){ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,Q=r,t.width=Math.floor(e*Y),t.height=Math.floor(r*Y),!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Vector2),e.set(W*Y,Q*Y).floor()},this.setDrawingBufferSize=function(e,r,n){W=e,Q=r,Y=n,t.width=Math.floor(e*n),t.height=Math.floor(r*n),this.setViewport(0,0,e,r)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Vector4),e.copy(G)},this.getViewport=function(e){return e.copy(X)},this.setViewport=function(e,t,r,n){e.isVector4?X.set(e.x,e.y,e.z,e.w):X.set(e,t,r,n),g.viewport(G.copy(X).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Z)},this.setScissor=function(e,t,r,n){e.isVector4?Z.set(e.x,e.y,e.z,e.w):Z.set(e,t,r,n),g.scissor(V.copy(Z).multiplyScalar(Y).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(e){g.setScissorTest(J=e)},this.setOpaqueSort=function(e){q=e},this.setTransparentSort=function(e){K=e},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===r||r)&&(n|=1024),p.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",he,!1),$.dispose(),E.dispose(),y.dispose(),M.dispose(),ue.dispose(),ve.stop()},this.renderBufferImmediate=function(e,t){g.initAttributes();var r=y.get(e);e.hasPositions&&!r.position&&(r.position=p.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),e.hasColors&&!r.color&&(r.color=p.createBuffer());var n=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,r.position),p.bufferData(34962,e.positionArray,35048),g.enableAttribute(n.position),p.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,r.normal),p.bufferData(34962,e.normalArray,35048),g.enableAttribute(n.normal),p.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,r.uv),p.bufferData(34962,e.uvArray,35048),g.enableAttribute(n.uv),p.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,r.color),p.bufferData(34962,e.colorArray,35048),g.enableAttribute(n.color),p.vertexAttribPointer(n.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var me=new Scene;this.renderBufferDirect=function(e,t,r,n,i,o){null===t&&(t=me);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Me(e,t,n,i);g.setMaterial(n,a);var c=!1;B.geometry===r.id&&B.program===s.id&&B.wireframe===(!0===n.wireframe)||(B.geometry=r.id,B.program=s.id,B.wireframe=!0===n.wireframe,c=!0),(n.morphTargets||n.morphNormals)&&(S.update(i,r,n,s),c=!0),!0===i.isInstancedMesh&&(c=!0);var u=r.index,l=r.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var f,h=1;!0===n.wireframe&&(u=A.getWireframeAttribute(r),h=2);var v=O;null!==u&&(f=_.get(u),(v=N).setIndex(f)),c&&(!function(e,t,r,n){if(!1===m.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===d.get("ANGLE_instanced_arrays"))return;g.initAttributes();var i=t.attributes,o=n.getAttributes(),a=r.defaultAttributeValues;for(var s in o){var c=o[s];if(c>=0){var u=i[s];if(void 0!==u){var l=u.normalized,f=u.itemSize;if(void 0===(x=_.get(u)))continue;var h=x.buffer,v=x.type,y=x.bytesPerElement;if(u.isInterleavedBufferAttribute){var b=u.data,A=b.stride,M=u.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(c,b.meshPerAttribute),void 0===t._maxInstanceCount&&(t._maxInstanceCount=b.meshPerAttribute*b.count)):g.enableAttribute(c),p.bindBuffer(34962,h),g.vertexAttribPointer(c,f,v,l,A*y,M*y)}else u.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(c,u.meshPerAttribute),void 0===t._maxInstanceCount&&(t._maxInstanceCount=u.meshPerAttribute*u.count)):g.enableAttribute(c),p.bindBuffer(34962,h),g.vertexAttribPointer(c,f,v,l,0,0)}else if("instanceMatrix"===s){var x;if(void 0===(x=_.get(e.instanceMatrix)))continue;h=x.buffer,v=x.type;g.enableAttributeAndDivisor(c+0,1),g.enableAttributeAndDivisor(c+1,1),g.enableAttributeAndDivisor(c+2,1),g.enableAttributeAndDivisor(c+3,1),p.bindBuffer(34962,h),p.vertexAttribPointer(c+0,4,v,!1,64,0),p.vertexAttribPointer(c+1,4,v,!1,64,16),p.vertexAttribPointer(c+2,4,v,!1,64,32),p.vertexAttribPointer(c+3,4,v,!1,64,48)}else if(void 0!==a){var w=a[s];if(void 0!==w)switch(w.length){case 2:p.vertexAttrib2fv(c,w);break;case 3:p.vertexAttrib3fv(c,w);break;case 4:p.vertexAttrib4fv(c,w);break;default:p.vertexAttrib1fv(c,w)}}}}g.disableUnusedAttributes()}(i,r,n,s),null!==u&&p.bindBuffer(34963,f.buffer));var y=null!==u?u.count:l.count,b=r.drawRange.start*h,M=r.drawRange.count*h,x=null!==o?o.start*h:0,w=null!==o?o.count*h:1/0,$=Math.max(b,x),E=Math.min(y,b+M,x+w)-1,T=Math.max(0,E-$+1);if(0!==T){if(i.isMesh)!0===n.wireframe?(g.setLineWidth(n.wireframeLinewidth*ae()),v.setMode(1)):v.setMode(4);else if(i.isLine){var D=n.linewidth;void 0===D&&(D=1),g.setLineWidth(D*ae()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);if(i.isInstancedMesh)v.renderInstances(r,$,T,i.count);else if(r.isInstancedBufferGeometry){var I=Math.min(r.instanceCount,r._maxInstanceCount);v.renderInstances(r,$,T,I)}else v.render($,T)}},this.compile=function(e,t){(h=E.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t);var r={};e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var i=0;i<n.length;i++){var o=n[i];o.uuid in r==!1&&(Ae(o,e,t),r[o.uuid]=!0)}else n.uuid in r==!1&&(Ae(n,e,t),r[n.uuid]=!0)}))};var ge=null;var ve=new WebGLAnimation;function ye(e,t,r,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ee.intersectsSprite(e)){n&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);var i=M.update(e);(o=e.material).visible&&f.push(e,i,o,r,oe.z,null)}}else if(e.isImmediateRenderObject)n&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie),f.push(e,null,e.material,r,oe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==v.render.frame&&(e.skeleton.update(),e.skeleton.frame=v.render.frame),!e.frustumCulled||ee.intersectsObject(e))){n&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);i=M.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,c=a.length;s<c;s++){var u=a[s],l=o[u.materialIndex];l&&l.visible&&f.push(e,i,l,r,oe.z,u)}else o.visible&&f.push(e,i,o,r,oe.z,null)}var p=e.children;for(s=0,c=p.length;s<c;s++)ye(p[s],t,r,n)}}function be(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===n?a.material:n,l=a.group;if(r.isArrayCamera){F=r;for(var f=r.cameras,p=0,d=f.length;p<d;p++){var m=f[p];s.layers.test(m.layers)&&(g.viewport(G.copy(m.viewport)),h.setupLights(m),_e(s,t,m,c,u,l))}}else F=null,_e(s,t,r,c,u,l)}}function _e(e,t,r,n,i,o){if(e.onBeforeRender(I,t,r,n,i,o),h=E.get(t,F||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=Me(r,t,i,e);g.setMaterial(i),B.geometry=null,B.program=null,B.wireframe=!1,function(e,t){e.render((function(e){I.renderBufferImmediate(e,t)}))}(e,a)}else I.renderBufferDirect(r,t,n,i,e,o);e.onAfterRender(I,t,r,n,i,o),h=E.get(t,F||r)}function Ae(e,t,r){var n=y.get(e),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=x.getParameters(e,i.state,o,t,te.numPlanes,te.numIntersection,r),c=x.getProgramCacheKey(s),u=n.program,l=!0;if(void 0===u)e.addEventListener("dispose",pe);else if(u.cacheKey!==c)de(e);else if(n.lightsStateVersion!==a)n.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}l&&(u=x.acquireProgram(s,c),n.program=u,n.uniforms=s.uniforms,n.outputEncoding=s.outputEncoding,e.program=u);var f=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<I.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(p=0;p<I.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var d=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=te.numPlanes,n.numIntersection=te.numIntersection,d.clippingPlanes=te.uniform),n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=a,n.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=n.program.getUniforms(),g=WebGLUniforms.seqWithValue(m.seq,d);n.uniformsList=g}function Me(e,t,r,n){b.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===R?I.outputEncoding:R.texture.encoding,s=y.get(r),c=h.state.lights;if(re&&(ne||e!==U)){var u=e===U&&r.id===k;te.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,s,u)}r.version===s.__version?void 0===s.program||r.fog&&s.fog!==i||s.environment!==o||s.needsLights&&s.lightsStateVersion!==c.state.version?Ae(r,t,n):void 0===s.numClippingPlanes||s.numClippingPlanes===te.numPlanes&&s.numIntersection===te.numIntersection?s.outputEncoding!==a&&Ae(r,t,n):Ae(r,t,n):(Ae(r,t,n),s.__version=r.version);var l,f,d=!1,v=!1,_=!1,A=s.program,M=A.getUniforms(),x=s.uniforms;if(g.useProgram(A.program)&&(d=!0,v=!0,_=!0),r.id!==k&&(k=r.id,v=!0),d||U!==e){if(M.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&M.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,v=!0,_=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var $=M.map.cameraPosition;void 0!==$&&$.setValue(p,oe.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&M.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){M.setOptional(p,n,"bindMatrix"),M.setOptional(p,n,"bindMatrixInverse");var E=n.skeleton;if(E){var T=E.bones;if(m.floatVertexTextures){if(void 0===E.boneTexture){var S=Math.sqrt(4*T.length);S=MathUtils.ceilPowerOfTwo(S),S=Math.max(S,4);var O=new Float32Array(S*S*4);O.set(E.boneMatrices);var N=new DataTexture(O,S,S,RGBAFormat,FloatType);E.boneMatrices=O,E.boneTexture=N,E.boneTextureSize=S}M.setValue(p,"boneTexture",E.boneTexture,b),M.setValue(p,"boneTextureSize",E.boneTextureSize)}else M.setOptional(p,E,"boneMatrices")}}return(v||s.receiveShadow!==n.receiveShadow)&&(s.receiveShadow=n.receiveShadow,M.setValue(p,"receiveShadow",n.receiveShadow)),v&&(M.setValue(p,"toneMappingExposure",I.toneMappingExposure),M.setValue(p,"toneMappingWhitePoint",I.toneMappingWhitePoint),s.needsLights&&(f=_,(l=x).ambientLightColor.needsUpdate=f,l.lightProbe.needsUpdate=f,l.directionalLights.needsUpdate=f,l.directionalLightShadows.needsUpdate=f,l.pointLights.needsUpdate=f,l.pointLightShadows.needsUpdate=f,l.spotLights.needsUpdate=f,l.spotLightShadows.needsUpdate=f,l.rectAreaLights.needsUpdate=f,l.hemisphereLights.needsUpdate=f),i&&r.fog&&w.refreshFogUniforms(x,i),w.refreshMaterialUniforms(x,r,o,Y,Q),void 0!==x.ltc_1&&(x.ltc_1.value=UniformsLib.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(p,s.uniformsList,x,b)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(WebGLUniforms.upload(p,s.uniformsList,x,b),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&M.setValue(p,"center",n.center),M.setValue(p,"modelViewMatrix",n.modelViewMatrix),M.setValue(p,"normalMatrix",n.normalMatrix),M.setValue(p,"modelMatrix",n.matrixWorld),A}ve.setAnimationLoop((function(e){ue.isPresenting||ge&&ge(e)})),"undefined"!=typeof window&&ve.setContext(window),this.setAnimationLoop=function(e){ge=e,ue.setAnimationLoop(e),ve.start()},this.render=function(e,t){var r,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),r=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),t&&t.isCamera){if(!P){B.geometry=null,B.program=null,B.wireframe=!1,k=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ue.enabled&&ue.isPresenting&&(t=ue.getCamera(t)),e.onBeforeRender(I,e,t,r||R),(h=E.get(e,t)).init(),ie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ee.setFromProjectionMatrix(ie),ne=this.localClippingEnabled,re=te.init(this.clippingPlanes,ne,t),(f=$.get(e,t)).init(),ye(e,t,0,I.sortObjects),f.finish(),!0===I.sortObjects&&f.sort(q,K),re&&te.beginShadows();var i=h.state.shadowsArray;le.render(i,e,t),h.setupLights(t),re&&te.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),T.render(f,e,t,n);var o=f.opaque,a=f.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&be(o,e,t,s),a.length&&be(a,e,t,s)}else o.length&&be(o,e,t),a.length&&be(a,e,t);e.onAfterRender(I,e,t),null!==R&&(b.updateRenderTargetMipmap(R),b.updateMultisampleRenderTarget(R)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),f=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){j!==e&&null===R&&p.bindFramebuffer(36160,e),j=e},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return R},this.setRenderTarget=function(e,t,r){R=e,C=t,L=r,e&&void 0===y.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var n=j,i=!1;if(e){var o=y.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=o[t||0],i=!0):n=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:o,G.copy(e.viewport),V.copy(e.scissor),H=e.scissorTest}else G.copy(X).multiplyScalar(Y).floor(),V.copy(Z).multiplyScalar(Y).floor(),H=J;if(z!==n&&(p.bindFramebuffer(36160,n),z=n),g.viewport(G),g.scissor(V),g.setScissorTest(H),i){var a=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,r||0)}},this.readRenderTargetPixels=function(e,t,r,n,i,o,a){if(e&&e.isWebGLRenderTarget){var s=y.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var c=!1;s!==z&&(p.bindFramebuffer(36160,s),c=!0);try{var u=e.texture,l=u.format,f=u.type;if(l!==RGBAFormat&&D.convert(l)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(f===UnsignedByteType||D.convert(f)===p.getParameter(35738)||f===FloatType&&(m.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||f===HalfFloatType&&(m.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&p.readPixels(t,r,n,i,D.convert(l),D.convert(f),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&p.bindFramebuffer(36160,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){void 0===r&&(r=0);var n=Math.pow(2,-r),i=Math.floor(t.image.width*n),o=Math.floor(t.image.height*n),a=D.convert(t.format);b.setTexture2D(t,0),p.copyTexImage2D(3553,r,a,e.x,e.y,i,o,0),g.unbindTexture()},this.copyTextureToTexture=function(e,t,r,n){void 0===n&&(n=0);var i=t.image.width,o=t.image.height,a=D.convert(r.format),s=D.convert(r.type);b.setTexture2D(r,0),t.isDataTexture?p.texSubImage2D(3553,n,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?p.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):p.texSubImage2D(3553,n,e.x,e.y,a,s,t.image),0===n&&r.generateMipmaps&&p.generateMipmap(3553),g.unbindTexture()},this.initTexture=function(e){b.setTexture2D(e,0),g.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(e,t){this.name="",this.color=new Color(e),this.density=void 0!==t?t:25e-5}function Fog(e,t,r){this.name="",this.color=new Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function InterleavedBuffer(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0}),Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0}),Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(e,t,r){var n=null,i=null,o=this._targetRay,a=this._grip;return e&&(null!==o&&null!==(n=t.getPose(e.targetRaySpace,r))&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==a&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,r))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==o&&(o.visible=null!==n),null!==a&&(a.visible=null!==i),this}}),Object.assign(WebXRManager.prototype,EventDispatcher.prototype),Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var _vector$6=new Vector3,_geometry;function InterleavedBufferAttribute(e,t,r,n){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function SpriteMaterial(e){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,r=this.data.count;t<r;t++)_vector$6.x=this.getX(t),_vector$6.y=this.getY(t),_vector$6.z=this.getZ(t),_vector$6.applyMatrix4(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var r=t*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return new BufferAttribute(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var r=t*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.isSpriteMaterial=!0,SpriteMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(e){if(Object3D.call(this),this.type="Sprite",void 0===_geometry){_geometry=new BufferGeometry;var t=new InterleavedBuffer(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(t,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(t,2,3,!1))}this.geometry=_geometry,this.material=void 0!==e?e:new SpriteMaterial,this.center=new Vector2(.5,.5)}function transformVertex(e,t,r,n,i,o){_alignedPosition.subVectors(e,r).addScalar(.5).multiply(n),void 0!==i?(_rotatedPosition.x=o*_alignedPosition.x-i*_alignedPosition.y,_rotatedPosition.y=i*_alignedPosition.x+o*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),e.copy(t),e.x+=_rotatedPosition.x,e.y+=_rotatedPosition.y,e.applyMatrix4(_viewWorldMatrix)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_worldScale.multiplyScalar(-_mvPosition.z);var r,n,i=this.material.rotation;0!==i&&(n=Math.cos(i),r=Math.sin(i));var o=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,o,_worldScale,r,n),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,o,_worldScale,r,n),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,o,_worldScale,r,n),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var a=e.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(null!==a||(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,o,_worldScale,r,n),_uvB$1.set(0,1),null!==(a=e.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint)))){var s=e.ray.origin.distanceTo(_intersectPoint);s<e.near||s>e.far||t.push({distance:s,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Object3D.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var _v1$4=new Vector3,_v2$2=new Vector3,basePosition,skinIndex,skinWeight,vector,matrix;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function SkinnedMesh(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(e){Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object}return null},raycast:function(e,t){if(this.levels.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){_v1$4.setFromMatrixPosition(e.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var r=_v1$4.distanceTo(_v2$2)/e.zoom;t[0].object.visible=!0;for(var n=1,i=t.length;n<i&&r>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Vector4,t=this.geometry.attributes.skinWeight,r=0,n=t.count;r<n;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:(basePosition=new Vector3,skinIndex=new Vector4,skinWeight=new Vector4,vector=new Vector3,matrix=new Matrix4,function(e,t){var r=this.skeleton,n=this.geometry;skinIndex.fromBufferAttribute(n.attributes.skinIndex,e),skinWeight.fromBufferAttribute(n.attributes.skinWeight,e),basePosition.fromBufferAttribute(n.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var o=skinWeight.getComponent(i);if(0!==o){var a=skinIndex.getComponent(i);matrix.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(vector.copy(basePosition).applyMatrix4(matrix),o)}}return t.applyMatrix4(this.bindMatrixInverse)})});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Matrix4)}}function Bone(){Object3D.call(this),this.type="Bone"}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(a,t[i]),_offsetMatrix.toArray(r,16*i)}void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(e,t,r){Mesh.call(this,e,t),this.instanceMatrix=new BufferAttribute(new Float32Array(16*r),16),this.count=r,this.frustumCulled=!1}function LineBasicMaterial(e){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var r=this.matrixWorld,n=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,void 0!==_mesh.material)for(var i=0;i<n;i++){this.getMatrixAt(i,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(r,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(e,_instanceIntersects);for(var o=0,a=_instanceIntersects.length;o<a;o++){var s=_instanceIntersects[o];s.instanceId=i,s.object=this,t.push(s)}_instanceIntersects.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new LineBasicMaterial,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[0],n=1,i=t.count;n<i;n++)_start.fromBufferAttribute(t,n-1),_end.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=_start.distanceTo(_end);e.setAttribute("lineDistance",new Float32BufferAttribute(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;(r=e.lineDistances)[0]=0;for(n=1,i=o.length;n<i;n++)r[n]=r[n-1],r[n]+=o[n-1].distanceTo(o[n])}return this},raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),_sphere$2.copy(r.boundingSphere),_sphere$2.applyMatrix4(n),_sphere$2.radius+=i,!1!==e.ray.intersectsSphere(_sphere$2)){_inverseMatrix$1.getInverse(n),_ray$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Vector3,c=new Vector3,u=new Vector3,l=new Vector3,f=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var h=r.index,p=r.attributes.position.array;if(null!==h)for(var d=h.array,m=0,g=d.length-1;m<g;m+=f){var v=d[m],y=d[m+1];if(s.fromArray(p,3*v),c.fromArray(p,3*y),!(_ray$1.distanceSqToSegment(s,c,l,u)>a))l.applyMatrix4(this.matrixWorld),(A=e.ray.origin.distanceTo(l))<e.near||A>e.far||t.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,g=p.length/3-1;m<g;m+=f){if(s.fromArray(p,3*m),c.fromArray(p,3*m+3),!(_ray$1.distanceSqToSegment(s,c,l,u)>a))l.applyMatrix4(this.matrixWorld),(A=e.ray.origin.distanceTo(l))<e.near||A>e.far||t.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(r.isGeometry){var b=r.vertices,_=b.length;for(m=0;m<_-1;m+=f){var A;if(!(_ray$1.distanceSqToSegment(b[m],b[m+1],l,u)>a))l.applyMatrix4(this.matrixWorld),(A=e.ray.origin.distanceTo(l))<e.near||A>e.far||t.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(e,t){Line.call(this,e,t),this.type="LineSegments"}function LineLoop(e,t){Line.call(this,e,t),this.type="LineLoop"}function PointsMaterial(e){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[],n=0,i=t.count;n<i;n+=2)_start$1.fromBufferAttribute(t,n),_end$1.fromBufferAttribute(t,n+1),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+_start$1.distanceTo(_end$1);e.setAttribute("lineDistance",new Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(r=e.lineDistances,n=0,i=o.length;n<i;n+=2)_start$1.copy(o[n]),_end$1.copy(o[n+1]),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+_start$1.distanceTo(_end$1)}return this}}),LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0}),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(e,t){Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new PointsMaterial,this.updateMorphTargets()}function testPoint(e,t,r,n,i,o,a){var s=_ray$2.distanceSqToPoint(e);if(s<r){var c=new Vector3;_ray$2.closestPointToPoint(e,c),c.applyMatrix4(n);var u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:c,index:t,face:null,object:a})}}function VideoTexture(e,t,r,n,i,o,a,s,c){Texture.call(this,e,t,r,n,i,o,a,s,c),this.format=void 0!==a?a:RGBFormat,this.minFilter=void 0!==o?o:LinearFilter,this.magFilter=void 0!==i?i:LinearFilter,this.generateMipmaps=!1}function CompressedTexture(e,t,r,n,i,o,a,s,c,u,l,f){Texture.call(this,null,o,a,s,c,u,n,i,l,f),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function CanvasTexture(e,t,r,n,i,o,a,s,c){Texture.call(this,e,t,r,n,i,o,a,s,c),this.needsUpdate=!0}function DepthTexture(e,t,r,n,i,o,a,s,c,u){if((u=void 0!==u?u:DepthFormat)!==DepthFormat&&u!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===DepthFormat&&(r=UnsignedShortType),void 0===r&&u===DepthStencilFormat&&(r=UnsignedInt248Type),Texture.call(this,null,n,i,o,a,s,u,r,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:NearestFilter,this.minFilter=void 0!==s?s:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}function WireframeGeometry(e){BufferGeometry.call(this),this.type="WireframeGeometry";var t,r,n,i,o,a,s,c,u,l,f=[],h=[0,0],p={},d=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,n=m.length;t<n;t++){var g=m[t];for(r=0;r<3;r++)s=g[d[r]],c=g[d[(r+1)%3]],h[0]=Math.min(s,c),h[1]=Math.max(s,c),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]})}for(u in p)a=p[u],l=e.vertices[a.index1],f.push(l.x,l.y,l.z),l=e.vertices[a.index2],f.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var v,y,b,_,A,M,x;if(l=new Vector3,null!==e.index){for(v=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=A=(_=b[i]).start,n=A+_.count;t<n;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),c=y.getX(t+(r+1)%3),h[0]=Math.min(s,c),h[1]=Math.max(s,c),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]});for(u in p)a=p[u],l.fromBufferAttribute(v,a.index1),f.push(l.x,l.y,l.z),l.fromBufferAttribute(v,a.index2),f.push(l.x,l.y,l.z)}else for(t=0,n=(v=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)M=3*t+r,l.fromBufferAttribute(v,M),f.push(l.x,l.y,l.z),x=3*t+(r+1)%3,l.fromBufferAttribute(v,x),f.push(l.x,l.y,l.z)}this.setAttribute("position",new Float32BufferAttribute(f,3))}function ParametricGeometry(e,t,r){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new ParametricBufferGeometry(e,t,r)),this.mergeVertices()}function ParametricBufferGeometry(e,t,r){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,o=[],a=[],s=[],c=[],u=1e-5,l=new Vector3,f=new Vector3,h=new Vector3,p=new Vector3,d=new Vector3;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(n=0;n<=r;n++){var g=n/r;for(i=0;i<=t;i++){var v=i/t;e(v,g,f),a.push(f.x,f.y,f.z),v-u>=0?(e(v-u,g,h),p.subVectors(f,h)):(e(v+u,g,h),p.subVectors(h,f)),g-u>=0?(e(v,g-u,h),d.subVectors(f,h)):(e(v,g+u,h),d.subVectors(h,f)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),c.push(v,g)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var y=n*m+i,b=n*m+i+1,_=(n+1)*m+i+1,A=(n+1)*m+i;o.push(y,b,A),o.push(b,_,A)}this.setIndex(o),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(s,3)),this.setAttribute("uv",new Float32BufferAttribute(c,2))}function PolyhedronGeometry(e,t,r,n){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new PolyhedronBufferGeometry(e,t,r,n)),this.mergeVertices()}function PolyhedronBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],o=[];function a(e,t,r,n){var i,o,a=Math.pow(2,n),c=[];for(i=0;i<=a;i++){c[i]=[];var u=e.clone().lerp(r,i/a),l=t.clone().lerp(r,i/a),f=a-i;for(o=0;o<=f;o++)c[i][o]=0===o&&i===a?u:u.clone().lerp(l,o/f)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var h=Math.floor(o/2);o%2==0?(s(c[i][h+1]),s(c[i+1][h]),s(c[i][h])):(s(c[i][h+1]),s(c[i+1][h+1]),s(c[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function u(e,t,r,n){n<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=n/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var r=new Vector3,n=new Vector3,i=new Vector3,o=0;o<t.length;o+=3)c(t[o+0],r),c(t[o+1],n),c(t[o+2],i),a(r,n,i,e)}(n=n||0),function(e){for(var t=new Vector3,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new Vector3,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=l(e)/2/Math.PI+.5,n=f(e)/Math.PI+.5;o.push(r,1-n)}(function(){for(var e=new Vector3,t=new Vector3,r=new Vector3,n=new Vector3,a=new Vector2,s=new Vector2,c=new Vector2,f=0,h=0;f<i.length;f+=9,h+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),r.set(i[f+6],i[f+7],i[f+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),c.set(o[h+4],o[h+5]),n.copy(e).add(t).add(r).divideScalar(3);var p=l(n);u(a,h+0,e,p),u(s,h+2,t,p),u(c,h+4,r,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],n=o[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(i,3)),this.setAttribute("normal",new Float32BufferAttribute(i.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function TetrahedronGeometry(e,t){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new TetrahedronBufferGeometry(e,t)),this.mergeVertices()}function TetrahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function OctahedronGeometry(e,t){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new OctahedronBufferGeometry(e,t)),this.mergeVertices()}function OctahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function IcosahedronGeometry(e,t){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IcosahedronBufferGeometry(e,t)),this.mergeVertices()}function IcosahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];PolyhedronBufferGeometry.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function DodecahedronGeometry(e,t){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DodecahedronBufferGeometry(e,t)),this.mergeVertices()}function DodecahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];PolyhedronBufferGeometry.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function TubeGeometry(e,t,r,n,i,o){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new TubeBufferGeometry(e,t,r,n,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function TubeBufferGeometry(e,t,r,n,i){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Vector3,u=new Vector3,l=new Vector2,f=new Vector3,h=[],p=[],d=[],m=[];function g(i){f=e.getPointAt(i/t,f);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=n;s++){var d=s/n*Math.PI*2,m=Math.sin(d),g=-Math.cos(d);u.x=g*a.x+m*l.x,u.y=g*a.y+m*l.y,u.z=g*a.z+m*l.z,u.normalize(),p.push(u.x,u.y,u.z),c.x=f.x+r*u.x,c.y=f.y+r*u.y,c.z=f.z+r*u.z,h.push(c.x,c.y,c.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=n;s++)l.x=a/t,l.y=s/n,d.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=n;a++){var e=(n+1)*(s-1)+(a-1),r=(n+1)*s+(a-1),i=(n+1)*s+a,o=(n+1)*(s-1)+a;m.push(e,r,o),m.push(r,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new Float32BufferAttribute(h,3)),this.setAttribute("normal",new Float32BufferAttribute(p,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2))}function TorusKnotGeometry(e,t,r,n,i,o,a){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(e,t,r,n,i,o)),this.mergeVertices()}function TorusKnotBufferGeometry(e,t,r,n,i,o){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,o=o||3;var a,s,c=[],u=[],l=[],f=[],h=new Vector3,p=new Vector3,d=new Vector3,m=new Vector3,g=new Vector3,v=new Vector3,y=new Vector3;for(a=0;a<=r;++a){var b=a/r*i*Math.PI*2;for(T(b,i,o,e,d),T(b+.01,i,o,e,m),v.subVectors(m,d),y.addVectors(m,d),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=n;++s){var _=s/n*Math.PI*2,A=-t*Math.cos(_),M=t*Math.sin(_);h.x=d.x+(A*y.x+M*g.x),h.y=d.y+(A*y.y+M*g.y),h.z=d.z+(A*y.z+M*g.z),u.push(h.x,h.y,h.z),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),f.push(a/r),f.push(s/n)}}for(s=1;s<=r;s++)for(a=1;a<=n;a++){var x=(n+1)*(s-1)+(a-1),w=(n+1)*s+(a-1),$=(n+1)*s+a,E=(n+1)*(s-1)+a;c.push(x,w,E),c.push(w,$,E)}function T(e,t,r,n,i){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,c=Math.cos(s);i.x=n*(2+c)*.5*o,i.y=n*(2+c)*a*.5,i.z=n*Math.sin(s)*.5}this.setIndex(c),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(l,3)),this.setAttribute("uv",new Float32BufferAttribute(f,2))}function TorusGeometry(e,t,r,n,i){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new TorusBufferGeometry(e,t,r,n,i)),this.mergeVertices()}function TorusBufferGeometry(e,t,r,n,i){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var o,a,s=[],c=[],u=[],l=[],f=new Vector3,h=new Vector3,p=new Vector3;for(o=0;o<=r;o++)for(a=0;a<=n;a++){var d=a/n*i,m=o/r*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(d),h.y=(e+t*Math.cos(m))*Math.sin(d),h.z=t*Math.sin(m),c.push(h.x,h.y,h.z),f.x=e*Math.cos(d),f.y=e*Math.sin(d),p.subVectors(h,f).normalize(),u.push(p.x,p.y,p.z),l.push(a/n),l.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=n;a++){var g=(n+1)*o+a-1,v=(n+1)*(o-1)+a-1,y=(n+1)*(o-1)+a,b=(n+1)*o+a;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(u,3)),this.setAttribute("uv",new Float32BufferAttribute(l,2))}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),_sphere$3.copy(r.boundingSphere),_sphere$3.applyMatrix4(n),_sphere$3.radius+=i,!1!==e.ray.intersectsSphere(_sphere$3)){_inverseMatrix$2.getInverse(n),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(r.isBufferGeometry){var s=r.index,c=r.attributes.position.array;if(null!==s)for(var u=s.array,l=0,f=u.length;l<f;l++){var h=u[l];_position$1.fromArray(c,3*h),testPoint(_position$1,h,a,n,e,t,this)}else{l=0;for(var p=c.length/3;l<p;l++)_position$1.fromArray(c,3*l),testPoint(_position$1,l,a,n,e,t,this)}}else{var d=r.vertices;for(l=0,p=d.length;l<p;l++)testPoint(d[l],l,a,n,e,t,this)}}},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture,CanvasTexture.prototype.isCanvasTexture=!0,DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,WireframeGeometry.prototype=Object.create(BufferGeometry.prototype),WireframeGeometry.prototype.constructor=WireframeGeometry,ParametricGeometry.prototype=Object.create(Geometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry,ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry,PolyhedronGeometry.prototype=Object.create(Geometry.prototype),PolyhedronGeometry.prototype.constructor=PolyhedronGeometry,PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry,TetrahedronGeometry.prototype=Object.create(Geometry.prototype),TetrahedronGeometry.prototype.constructor=TetrahedronGeometry,TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry,OctahedronGeometry.prototype=Object.create(Geometry.prototype),OctahedronGeometry.prototype.constructor=OctahedronGeometry,OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry,IcosahedronGeometry.prototype=Object.create(Geometry.prototype),IcosahedronGeometry.prototype.constructor=IcosahedronGeometry,IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry,DodecahedronGeometry.prototype=Object.create(Geometry.prototype),DodecahedronGeometry.prototype.constructor=DodecahedronGeometry,DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry,TubeGeometry.prototype=Object.create(Geometry.prototype),TubeGeometry.prototype.constructor=TubeGeometry,TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TubeBufferGeometry.prototype.constructor=TubeBufferGeometry,TubeBufferGeometry.prototype.toJSON=function(){var e=BufferGeometry.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},TorusKnotGeometry.prototype=Object.create(Geometry.prototype),TorusKnotGeometry.prototype.constructor=TorusKnotGeometry,TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry,TorusGeometry.prototype=Object.create(Geometry.prototype),TorusGeometry.prototype.constructor=TorusGeometry,TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(e,t,r){r=r||2;var n,i,o,a,s,c,u,l=t&&t.length,f=l?t[0]*r:e.length,h=linkedList(e,0,f,r,!0),p=[];if(!h||h.next===h.prev)return p;if(l&&(h=eliminateHoles(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<f;d+=r)(s=e[d])<n&&(n=s),(c=e[d+1])<i&&(i=c),s>o&&(o=s),c>a&&(a=c);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return earcutLinked(h,p,r,n,i,u),p}};function linkedList(e,t,r,n,i){var o,a;if(i===signedArea(e,t,r,n)>0)for(o=t;o<r;o+=n)a=insertNode(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function earcutLinked(e,t,r,n,i,o,a){if(e){!a&&o&&indexCurve(e,n,i,o);for(var s,c,u=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?isEarHashed(e,n,i,o):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(c.i/r),removeNode(e),e=c.next,u=c.next;else if((e=c)===u){a?1===a?earcutLinked(e=cureLocalIntersections(filterPoints(e),t,r),t,r,n,i,o,2):2===a&&splitEarcut(e,t,r,n,i,o):earcutLinked(filterPoints(e),t,r,n,i,o,1);break}}}function isEar(e){var t=e.prev,r=e,n=e.next;if(area(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,t,r,n){var i=e.prev,o=e,a=e.next;if(area(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=zOrder(s,c,t,r,n),h=zOrder(u,l,t,r,n),p=e.prevZ,d=e.nextZ;p&&p.z>=f&&d&&d.z<=h;){if(p!==e.prev&&p!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function cureLocalIntersections(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!equals(i,o)&&intersects(i,n,n.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),removeNode(n),removeNode(n.next),n=e=o),n=n.next}while(n!==e);return filterPoints(n)}function splitEarcut(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var c=splitPolygon(a,s);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,t,r,n,i,o),void earcutLinked(c,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=linkedList(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(getLeftmost(a));for(s.sort(compareX),i=0;i<s.length;i++)eliminateHole(s[i],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var r=splitPolygon(t,e);filterPoints(t,t.next),filterPoints(r,r.next)}}function findHoleBridge(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r;var c,u=r,l=r.x,f=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&pointInTriangle(o<f?i:a,o,l,f,o<f?a:i,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(i-n.x),locallyInside(n,e)&&(c<h||c===h&&(n.x>r.x||n.x===r.x&&sectorContainsSector(r,n)))&&(r=n,h=c)),n=n.next}while(n!==u);return r}function sectorContainsSector(e,t){return area(e.prev,e,t.prev)<0&&area(t.next,e,e.next)<0}function indexCurve(e,t,r,n){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,r,n,i,o,a,s,c,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(c=u;s>0||c>0&&n;)0!==s&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function pointInTriangle(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)&&(area(e.prev,e,t.prev)||area(e,t.prev,t))||equals(e,t)&&area(e.prev,e,e.next)>0&&area(t.prev,t,t.next)>0)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,n){var i=sign(area(e,t,r)),o=sign(area(e,t,n)),a=sign(area(r,n,e)),s=sign(area(r,n,t));return i!==o&&a!==s||(!(0!==i||!onSegment(e,r,t))||(!(0!==o||!onSegment(e,n,t))||(!(0!==a||!onSegment(r,e,n))||!(0!==s||!onSegment(r,t,n)))))}function onSegment(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function sign(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),n=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function insertNode(e,t,r,n){var i=new Node(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var ShapeUtils={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return ShapeUtils.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];removeDupEndPts(e),addContour(r,e);var o=e.length;t.forEach(removeDupEndPts);for(var a=0;a<t.length;a++)n.push(o),o+=t[a].length,addContour(r,t[a]);var s=Earcut.triangulate(r,n);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function removeDupEndPts(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function addContour(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function ExtrudeGeometry(e,t){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ExtrudeBufferGeometry(e,t)),this.mergeVertices()}function ExtrudeBufferGeometry(e,t){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,n=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:l-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:WorldUVGenerator;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var g,v,y,b,_,A,M,x,w=!1;d&&(g=d.getSpacedPoints(s),w=!0,u=!1,v=d.computeFrenetFrames(s,!1),y=new Vector3,b=new Vector3,_=new Vector3),u||(p=0,l=0,f=0,h=0);var $=e.extractPoints(a),E=$.shape,T=$.holes;if(!ShapeUtils.isClockWise(E))for(E=E.reverse(),M=0,x=T.length;M<x;M++)A=T[M],ShapeUtils.isClockWise(A)&&(T[M]=A.reverse());var S=ShapeUtils.triangulateShape(E,T),O=E;for(M=0,x=T.length;M<x;M++)A=T[M],E=E.concat(A);function N(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var D,I,P,j,C,L,R=E.length,z=S.length;function k(e,t,r){var n,i,o,a=e.x-t.x,s=e.y-t.y,c=r.x-e.x,u=r.y-e.y,l=a*a+s*s,f=a*u-s*c;if(Math.abs(f)>Number.EPSILON){var h=Math.sqrt(l),p=Math.sqrt(c*c+u*u),d=t.x-s/h,m=t.y+a/h,g=((r.x-u/p-d)*u-(r.y+c/p-m)*c)/(a*u-s*c),v=(n=d+a*g-e.x)*n+(i=m+s*g-e.y)*i;if(v<=2)return new Vector2(n,i);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(n=-s,i=a,o=Math.sqrt(l)):(n=a,i=s,o=Math.sqrt(l/2))}return new Vector2(n/o,i/o)}for(var B=[],U=0,F=O.length,G=F-1,V=U+1;U<F;U++,G++,V++)G===F&&(G=0),V===F&&(V=0),B[U]=k(O[U],O[G],O[V]);var H,W,Q=[],Y=B.concat();for(M=0,x=T.length;M<x;M++){for(A=T[M],H=[],U=0,G=(F=A.length)-1,V=U+1;U<F;U++,G++,V++)G===F&&(G=0),V===F&&(V=0),H[U]=k(A[U],A[G],A[V]);Q.push(H),Y=Y.concat(H)}for(D=0;D<p;D++){for(P=D/p,j=l*Math.cos(P*Math.PI/2),I=f*Math.sin(P*Math.PI/2)+h,U=0,F=O.length;U<F;U++)K((C=N(O[U],B[U],I)).x,C.y,-j);for(M=0,x=T.length;M<x;M++)for(A=T[M],H=Q[M],U=0,F=A.length;U<F;U++)K((C=N(A[U],H[U],I)).x,C.y,-j)}for(I=f+h,U=0;U<R;U++)C=u?N(E[U],Y[U],I):E[U],w?(b.copy(v.normals[0]).multiplyScalar(C.x),y.copy(v.binormals[0]).multiplyScalar(C.y),_.copy(g[0]).add(b).add(y),K(_.x,_.y,_.z)):K(C.x,C.y,0);for(W=1;W<=s;W++)for(U=0;U<R;U++)C=u?N(E[U],Y[U],I):E[U],w?(b.copy(v.normals[W]).multiplyScalar(C.x),y.copy(v.binormals[W]).multiplyScalar(C.y),_.copy(g[W]).add(b).add(y),K(_.x,_.y,_.z)):K(C.x,C.y,c/s*W);for(D=p-1;D>=0;D--){for(P=D/p,j=l*Math.cos(P*Math.PI/2),I=f*Math.sin(P*Math.PI/2)+h,U=0,F=O.length;U<F;U++)K((C=N(O[U],B[U],I)).x,C.y,c+j);for(M=0,x=T.length;M<x;M++)for(A=T[M],H=Q[M],U=0,F=A.length;U<F;U++)C=N(A[U],H[U],I),w?K(C.x,C.y+g[s-1].y,g[s-1].x+j):K(C.x,C.y,c+j)}function q(e,t){var r,n;for(U=e.length;--U>=0;){r=U,(n=U-1)<0&&(n=e.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=R*i,c=R*(i+1);Z(t+r+a,t+n+a,t+n+c,t+r+c)}}}function K(e,t,r){o.push(e),o.push(t),o.push(r)}function X(e,t,i){J(e),J(t),J(i);var o=n.length/3,a=m.generateTopUV(r,n,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function Z(e,t,i,o){J(e),J(t),J(o),J(t),J(i),J(o);var a=n.length/3,s=m.generateSideWallUV(r,n,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function J(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=n.length/3;if(u){var t=0,i=R*t;for(U=0;U<z;U++)X((L=S[U])[2]+i,L[1]+i,L[0]+i);for(i=R*(t=s+2*p),U=0;U<z;U++)X((L=S[U])[0]+i,L[1]+i,L[2]+i)}else{for(U=0;U<z;U++)X((L=S[U])[2],L[1],L[0]);for(U=0;U<z;U++)X((L=S[U])[0]+R*s,L[1]+R*s,L[2]+R*s)}r.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(q(O,t),t+=O.length,M=0,x=T.length;M<x;M++)q(A=T[M],t),t+=A.length;r.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Float32BufferAttribute(n,3)),this.setAttribute("uv",new Float32BufferAttribute(i,2)),this.computeVertexNormals()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeGeometry.prototype.toJSON=function(){var e=Geometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,e)},ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry,ExtrudeBufferGeometry.prototype.toJSON=function(){var e=BufferGeometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,e)};var WorldUVGenerator={generateTopUV:function(e,t,r,n,i){var o=t[3*r],a=t[3*r+1],s=t[3*n],c=t[3*n+1],u=t[3*i],l=t[3*i+1];return[new Vector2(o,a),new Vector2(s,c),new Vector2(u,l)]},generateSideWallUV:function(e,t,r,n,i,o){var a=t[3*r],s=t[3*r+1],c=t[3*r+2],u=t[3*n],l=t[3*n+1],f=t[3*n+2],h=t[3*i],p=t[3*i+1],d=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-l)<.01?[new Vector2(a,1-c),new Vector2(u,1-f),new Vector2(h,1-d),new Vector2(m,1-v)]:[new Vector2(s,1-c),new Vector2(l,1-f),new Vector2(p,1-d),new Vector2(g,1-v)]}};function toJSON(e,t,r){if(r.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function TextGeometry(e,t){Geometry.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new TextBufferGeometry(e,t)),this.mergeVertices()}function TextBufferGeometry(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var n=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,n,t),this.type="TextBufferGeometry"}function SphereGeometry(e,t,r,n,i,o,a){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new SphereBufferGeometry(e,t,r,n,i,o,a)),this.mergeVertices()}function SphereBufferGeometry(e,t,r,n,i,o,a){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,c,u=Math.min(o+a,Math.PI),l=0,f=[],h=new Vector3,p=new Vector3,d=[],m=[],g=[],v=[];for(c=0;c<=r;c++){var y=[],b=c/r,_=0;for(0==c&&0==o?_=.5/t:c==r&&u==Math.PI&&(_=-.5/t),s=0;s<=t;s++){var A=s/t;h.x=-e*Math.cos(n+A*i)*Math.sin(o+b*a),h.y=e*Math.cos(o+b*a),h.z=e*Math.sin(n+A*i)*Math.sin(o+b*a),m.push(h.x,h.y,h.z),p.copy(h).normalize(),g.push(p.x,p.y,p.z),v.push(A+_,1-b),y.push(l++)}f.push(y)}for(c=0;c<r;c++)for(s=0;s<t;s++){var M=f[c][s+1],x=f[c][s],w=f[c+1][s],$=f[c+1][s+1];(0!==c||o>0)&&d.push(M,x,$),(c!==r-1||u<Math.PI)&&d.push(x,w,$)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(m,3)),this.setAttribute("normal",new Float32BufferAttribute(g,3)),this.setAttribute("uv",new Float32BufferAttribute(v,2))}function RingGeometry(e,t,r,n,i,o){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new RingBufferGeometry(e,t,r,n,i,o)),this.mergeVertices()}function RingBufferGeometry(e,t,r,n,i,o){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,c,u=[],l=[],f=[],h=[],p=e,d=(t-e)/(n=void 0!==n?Math.max(1,n):1),m=new Vector3,g=new Vector2;for(s=0;s<=n;s++){for(c=0;c<=r;c++)a=i+c/r*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),l.push(m.x,m.y,m.z),f.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,h.push(g.x,g.y);p+=d}for(s=0;s<n;s++){var v=s*(r+1);for(c=0;c<r;c++){var y=a=c+v,b=a+r+1,_=a+r+2,A=a+1;u.push(y,b,A),u.push(b,_,A)}}this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2))}function LatheGeometry(e,t,r,n){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new LatheBufferGeometry(e,t,r,n)),this.mergeVertices()}function LatheBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=MathUtils.clamp(n,0,2*Math.PI);var i,o,a,s=[],c=[],u=[],l=1/t,f=new Vector3,h=new Vector2;for(o=0;o<=t;o++){var p=r+o*l*n,d=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)f.x=e[a].x*d,f.y=e[a].y,f.z=e[a].x*m,c.push(f.x,f.y,f.z),h.x=o/t,h.y=a/(e.length-1),u.push(h.x,h.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=i=a+o*e.length,v=i+e.length,y=i+e.length+1,b=i+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2)),this.computeVertexNormals(),n===2*Math.PI){var _=this.attributes.normal.array,A=new Vector3,M=new Vector3,x=new Vector3;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)A.x=_[a+0],A.y=_[a+1],A.z=_[a+2],M.x=_[i+a+0],M.y=_[i+a+1],M.z=_[i+a+2],x.addVectors(A,M).normalize(),_[a+0]=_[i+a+0]=x.x,_[a+1]=_[i+a+1]=x.y,_[a+2]=_[i+a+2]=x.z}}function ShapeGeometry(e,t){Geometry.call(this),this.type="ShapeGeometry","object"===_typeof2(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ShapeBufferGeometry(e,t)),this.mergeVertices()}function ShapeBufferGeometry(e,t){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=n.length/3,f=e.extractPoints(t),h=f.shape,p=f.holes;for(!1===ShapeUtils.isClockWise(h)&&(h=h.reverse()),a=0,c=p.length;a<c;a++)u=p[a],!0===ShapeUtils.isClockWise(u)&&(p[a]=u.reverse());var d=ShapeUtils.triangulateShape(h,p);for(a=0,c=p.length;a<c;a++)u=p[a],h=h.concat(u);for(a=0,c=h.length;a<c;a++){var m=h[a];n.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=d.length;a<c;a++){var g=d[a],v=g[0]+l,y=g[1]+l,b=g[2]+l;r.push(v,y,b),s+=3}}this.setIndex(r),this.setAttribute("position",new Float32BufferAttribute(n,3)),this.setAttribute("normal",new Float32BufferAttribute(i,3)),this.setAttribute("uv",new Float32BufferAttribute(o,2))}function toJSON$1(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function EdgesGeometry(e,t){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,o,a=[],s=Math.cos(MathUtils.DEG2RAD*t),c=[0,0],u={},l=["a","b","c"];e.isBufferGeometry?(o=new Geometry).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var f=o.vertices,h=o.faces,p=0,d=h.length;p<d;p++)for(var m=h[p],g=0;g<3;g++)r=m[l[g]],n=m[l[(g+1)%3]],c[0]=Math.min(r,n),c[1]=Math.max(r,n),void 0===u[i=c[0]+","+c[1]]?u[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var v=u[i];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=s){var y=f[v.index1];a.push(y.x,y.y,y.z),y=f[v.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new Float32BufferAttribute(a,3))}function CylinderGeometry(e,t,r,n,i,o,a,s){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new CylinderBufferGeometry(e,t,r,n,i,o,a,s)),this.mergeVertices()}function CylinderBufferGeometry(e,t,r,n,i,o,a,s){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],l=[],f=[],h=[],p=0,d=[],m=r/2,g=0;function v(r){var i,o,d,v=new Vector2,y=new Vector3,b=0,_=!0===r?e:t,A=!0===r?1:-1;for(o=p,i=1;i<=n;i++)l.push(0,m*A,0),f.push(0,A,0),h.push(.5,.5),p++;for(d=p,i=0;i<=n;i++){var M=i/n*s+a,x=Math.cos(M),w=Math.sin(M);y.x=_*w,y.y=m*A,y.z=_*x,l.push(y.x,y.y,y.z),f.push(0,A,0),v.x=.5*x+.5,v.y=.5*w*A+.5,h.push(v.x,v.y),p++}for(i=0;i<n;i++){var $=o+i,E=d+i;!0===r?u.push(E,E+1,$):u.push(E+1,E,$),b+=3}c.addGroup(g,b,!0===r?1:2),g+=b}!function(){var o,v,y=new Vector3,b=new Vector3,_=0,A=(t-e)/r;for(v=0;v<=i;v++){var M=[],x=v/i,w=x*(t-e)+e;for(o=0;o<=n;o++){var $=o/n,E=$*s+a,T=Math.sin(E),S=Math.cos(E);b.x=w*T,b.y=-x*r+m,b.z=w*S,l.push(b.x,b.y,b.z),y.set(T,A,S).normalize(),f.push(y.x,y.y,y.z),h.push($,1-x),M.push(p++)}d.push(M)}for(o=0;o<n;o++)for(v=0;v<i;v++){var O=d[v][o],N=d[v+1][o],D=d[v+1][o+1],I=d[v][o+1];u.push(O,N,I),u.push(N,D,I),_+=6}c.addGroup(g,_,0),g+=_}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2))}function ConeGeometry(e,t,r,n,i,o,a){CylinderGeometry.call(this,0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function ConeBufferGeometry(e,t,r,n,i,o,a){CylinderBufferGeometry.call(this,0,e,t,r,n,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function CircleGeometry(e,t,r,n){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new CircleBufferGeometry(e,t,r,n)),this.mergeVertices()}function CircleBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o,a=[],s=[],c=[],u=[],l=new Vector3,f=new Vector2;for(s.push(0,0,0),c.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var h=r+o/t*n;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),c.push(0,0,1),f.x=(s[i]/e+1)/2,f.y=(s[i+1]/e+1)/2,u.push(f.x,f.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(s,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2))}TextGeometry.prototype=Object.create(Geometry.prototype),TextGeometry.prototype.constructor=TextGeometry,TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype),TextBufferGeometry.prototype.constructor=TextBufferGeometry,SphereGeometry.prototype=Object.create(Geometry.prototype),SphereGeometry.prototype.constructor=SphereGeometry,SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype),SphereBufferGeometry.prototype.constructor=SphereBufferGeometry,RingGeometry.prototype=Object.create(Geometry.prototype),RingGeometry.prototype.constructor=RingGeometry,RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype),RingBufferGeometry.prototype.constructor=RingBufferGeometry,LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry,LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry,ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry,ShapeGeometry.prototype.toJSON=function(){var e=Geometry.prototype.toJSON.call(this);return toJSON$1(this.parameters.shapes,e)},ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry,ShapeBufferGeometry.prototype.toJSON=function(){var e=BufferGeometry.prototype.toJSON.call(this);return toJSON$1(this.parameters.shapes,e)},EdgesGeometry.prototype=Object.create(BufferGeometry.prototype),EdgesGeometry.prototype.constructor=EdgesGeometry,CylinderGeometry.prototype=Object.create(Geometry.prototype),CylinderGeometry.prototype.constructor=CylinderGeometry,CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry,ConeGeometry.prototype=Object.create(CylinderGeometry.prototype),ConeGeometry.prototype.constructor=ConeGeometry,ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype),ConeBufferGeometry.prototype.constructor=ConeBufferGeometry,CircleGeometry.prototype=Object.create(Geometry.prototype),CircleGeometry.prototype.constructor=CircleGeometry,CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry:WireframeGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronBufferGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusBufferGeometry,TextGeometry:TextGeometry,TextBufferGeometry:TextBufferGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereBufferGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneBufferGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheBufferGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeBufferGeometry,EdgesGeometry:EdgesGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeBufferGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderBufferGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleBufferGeometry,BoxGeometry:BoxGeometry,BoxBufferGeometry:BoxBufferGeometry});function ShadowMaterial(e){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(e)}function RawShaderMaterial(e){ShaderMaterial.call(this,e),this.type="RawShaderMaterial"}function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}function MeshPhongMaterial(e){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshToonMaterial(e){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshNormalMaterial(e){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshLambertMaterial(e){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshMatcapMaterial(e){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function LineDashedMaterial(e){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ShadowMaterial.prototype=Object.create(Material.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,ShadowMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this},RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Color).copy(e.sheen):this.sheen=null,this.transparency=e.transparency,this},MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshToonMaterial.prototype=Object.create(Material.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshMatcapMaterial.prototype=Object.create(Material.prototype),MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial,MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0,MeshMatcapMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(e){return LineBasicMaterial.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}),AnimationUtils={arraySlice:function(e,t,r){return AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort((function(t,r){return e[t]-e[r]})),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=r[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(t.push(o.time),r.push.apply(r,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(t.push(o.time),r.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,r,n,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var c=o.tracks[s],u=c.getValueSize(),l=[],f=[],h=0;h<c.times.length;++h){var p=c.times[h]*i;if(!(p<r||p>=n)){l.push(c.times[h]);for(var d=0;d<u;++d)f.push(c.values[h*u+d])}}0!==l.length&&(c.times=AnimationUtils.convertArray(l,c.times.constructor),c.values=AnimationUtils.convertArray(f,c.values.constructor),a.push(c))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=e),(void 0===n||n<=0)&&(n=30);for(var i=e.tracks.length,o=t/n,a=0;a<i;++a){var s=r.tracks[a],c=s.ValueTypeName;if("bool"!==c&&"string"!==c){var u=e.tracks.find((function(e){return e.name===s.name&&e.ValueTypeName===c}));if(void 0!==u){var l,f=s.getValueSize(),h=s.times.length-1;if(o<=s.times[0])l=AnimationUtils.arraySlice(s.values,0,s.valueSize);else if(o>=s.times[h]){var p=h*f;l=AnimationUtils.arraySlice(s.values,p)}else{var d=s.createInterpolant();d.evaluate(o),l=d.resultBuffer}if("quaternion"===c)new Quaternion(l[0],l[1],l[2],l[3]).normalize().conjugate().toArray(l);for(var m=u.times.length,g=0;g<m;++g){var v=g*f;if("quaternion"===c)Quaternion.multiplyQuaternionsFlat(u.values,v,l,0,u.values,v);else for(var y=0;y<f;++y)u.values[v+y]-=l[y]}}}}return e.blendMode=AdditiveAnimationBlendMode,e}};function Interpolant(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function CubicInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}function DiscreteInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}function KeyframeTrack(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=AnimationUtils.convertArray(t,this.TimeBufferType),this.values=AnimationUtils.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function BooleanKeyframeTrack(e,t,r){KeyframeTrack.call(this,e,t,r)}function ColorKeyframeTrack(e,t,r,n){KeyframeTrack.call(this,e,t,r,n)}function NumberKeyframeTrack(e,t,r,n){KeyframeTrack.call(this,e,t,r,n)}function QuaternionLinearInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}function QuaternionKeyframeTrack(e,t,r,n){KeyframeTrack.call(this,e,t,r,n)}function StringKeyframeTrack(e,t,r,n){KeyframeTrack.call(this,e,t,r,n)}function VectorKeyframeTrack(e,t,r,n){KeyframeTrack.call(this,e,t,r,n)}function AnimationClip(e,t,r,n){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==n?n:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function parseKeyframeTrack(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];AnimationUtils.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Interpolant.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var a=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===a)break;if(i=n,e<(n=t[++r]))break t}o=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(a=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===a)break;if(n=i,e>=(i=t[--r-1]))break t}o=r,r=0}for(;r<o;){var c=r+o>>>1;e<t[c]?o=c:r=c+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,o=0;o!==n;++o)t[o]=r[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:i=e,a=2*t-r;break;case WrapAroundEnding:a=t+n[i=n.length-2]-n[i+1];break;default:i=e,a=r}if(void 0===s)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:o=e,s=2*r-t;break;case WrapAroundEnding:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t}var c=.5*(r-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-r),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-t)/(n-t),d=p*p,m=d*p,g=-f*m+2*f*d-f*p,v=(1+f)*m+(-1.5-2*f)*d+(-.5+f)*p+1,y=(-1-h)*m+(1.5+h)*d+.5*p,b=h*m-h*d,_=0;_!==a;++_)i[_]=g*o[u+_]+v*o[c+_]+y*o[s+_]+b*o[l+_];return i}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(r-t)/(n-t),l=1-u,f=0;f!==a;++f)i[f]=o[c+f]*l+o[s+f]*u;return i}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(KeyframeTrack,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:AnimationUtils.convertArray(e.times,Array),values:AnimationUtils.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==i||o!==n){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=AnimationUtils.arraySlice(r,i,o),this.values=AnimationUtils.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==n&&AnimationUtils.isTypedArray(n)){a=0;for(var c=n.length;a!==c;++a){var u=n[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=AnimationUtils.arraySlice(this.times),t=AnimationUtils.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===InterpolateSmooth,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(n)s=!0;else for(var u=a*r,l=u-r,f=u+r,h=0;h!==r;++h){var p=t[u+h];if(p!==t[l+h]||p!==t[f+h]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var d=a*r,m=i*r;for(h=0;h!==r;++h)t[m+h]=t[d+h]}++i}}if(o>0){e[i]=e[o];for(d=o*r,m=i*r,h=0;h!==r;++h)t[m+h]=t[d+h];++i}return i!==e.length?(this.times=AnimationUtils.arraySlice(e,0,i),this.values=AnimationUtils.arraySlice(t,0,i*r)):(this.times=e,this.values=t),this},clone:function(){var e=AnimationUtils.arraySlice(this.times,0),t=AnimationUtils.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"}),NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"}),QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(r-t)/(n-t),u=s+a;s!==u;s+=4)Quaternion.slerpFlat(i,0,o,s-a,o,s,c);return i}}),QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"}),Object.assign(AnimationClip,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(parseKeyframeTrack(r[i]).scale(n));return new AnimationClip(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,o=r.length;i!==o;++i)t.push(KeyframeTrack.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=AnimationUtils.getKeyframeOrder(s);s=AnimationUtils.sortedArray(s,1,u),c=AnimationUtils.sortedArray(c,1,u),n||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/r))}return new AnimationClip(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=n[f=c[1]];u||(n[f]=u=[]),u.push(s)}}var l=[];for(var f in n)l.push(AnimationClip.CreateFromMorphTargetSequence(f,n[f],t,r));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var o=[],a=[];AnimationUtils.flattenJSON(r,o,a,n),0!==o.length&&i.push(new e(t,o,a))}},n=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.blendMode,c=e.hierarchy||[],u=0;u<c.length;u++){var l=c[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var f={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var p=0;p<l[h].morphTargets.length;p++)f[l[h].morphTargets[p]]=-1;for(var d in f){var m=[],g=[];for(p=0;p!==l[h].morphTargets.length;++p){var v=l[h];m.push(v.time),g.push(v.morphTarget===d?1:0)}n.push(new NumberKeyframeTrack(".morphTargetInfluence["+d+"]",m,g))}o=f.length*(a||1)}else{var y=".bones["+t[u].name+"]";r(VectorKeyframeTrack,y+".position",l,"pos",n),r(QuaternionKeyframeTrack,y+".quaternion",l,"rot",n),r(VectorKeyframeTrack,y+".scale",l,"scl",n)}}return 0===n.length?null:new AnimationClip(i,o,n,s)}}),Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new AnimationClip(this.name,this.duration,e,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function LoadingManager(e,t,r){var n=this,i=!1,o=0,a=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===i&&void 0!==n.onStart&&n.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,r=c.length;t<r;t+=2){var n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(e){this.manager=void 0!==e?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(e,t){var r=this;return new Promise((function(n,i){r.load(e,n,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var loading={};function FileLoader(e){Loader.call(this,e)}function AnimationLoader(e){Loader.call(this,e)}function CompressedTextureLoader(e){Loader.call(this,e)}function DataTextureLoader(e){Loader.call(this,e)}function ImageLoader(e){Loader.call(this,e)}function CubeTextureLoader(e){Loader.call(this,e)}function TextureLoader(e){Loader.call(this,e)}function Curve(){this.type="Curve",this.arcLengthDivisions=200}function EllipseCurve(e,t,r,n,i,o,a,s){Curve.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ArcCurve(e,t,r,n,i,o){EllipseCurve.call(this,e,t,r,r,n,i,o),this.type="ArcCurve"}function CubicPoly(){var e=0,t=0,r=0,n=0;function i(i,o,a,s){e=i,t=a,r=-3*i+3*o-2*a-s,n=2*i-2*o+a+s}return{initCatmullRom:function(e,t,r,n,o){i(t,r,o*(r-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,o,a,s){var c=(t-e)/o-(r-e)/(o+a)+(r-t)/a,u=(r-t)/a-(n-t)/(a+s)+(n-r)/s;i(t,r,c*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+r*o+n*(o*i)}}}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===loading[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],u=a[3];u=decodeURIComponent(u),c&&(u=atob(u));try{var l,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var h=new Uint8Array(u.length),p=0;p<u.length;p++)h[p]=u.charCodeAt(p);l="blob"===f?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var d=new DOMParser;l=d.parseFromString(u,s);break;case"json":l=JSON.parse(u);break;default:l=u}setTimeout((function(){t&&t(l),i.manager.itemEnd(e)}),0)}catch(v){setTimeout((function(){n&&n(v),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{loading[e]=[],loading[e].push({onLoad:t,onProgress:r,onError:n});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var r=this.response,n=loading[e];if(delete loading[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(e,r);for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var r=loading[e],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var r=loading[e];delete loading[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var r=loading[e];delete loading[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(e),m}loading[e].push({onLoad:t,onProgress:r,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(t,r,n,i){var o=this,a=new FileLoader(o.manager);a.setPath(o.path),a.load(t,(function(n){try{r(o.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e){for(var t=[],r=0;r<e.length;r++){var n=AnimationClip.parse(e[r]);t.push(n)}return t}}),CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(e,t,r,n){var i=this,o=[],a=new CompressedTexture;a.image=o;var s=new FileLoader(this.manager);function c(c){s.load(e[c],(function(e){var r=i.parse(e,!0);o[c]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(a.minFilter=LinearFilter),a.format=r.format,a.needsUpdate=!0,t&&t(a))}),r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,f=e.length;l<f;++l)c(l);else s.load(e,(function(e){var r=i.parse(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+c]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=LinearFilter),a.format=r.format,a.needsUpdate=!0,t&&t(a)}),r,n);return a}}),DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(e,t,r,n){var i=this,o=new DataTexture,a=new FileLoader(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var r=i.parse(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:ClampToEdgeWrapping,o.wrapT=void 0!==r.wrapT?r.wrapT:ClampToEdgeWrapping,o.magFilter=void 0!==r.magFilter?r.magFilter:LinearFilter,o.minFilter=void 0!==r.minFilter?r.minFilter:LinearFilter,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps,o.minFilter=LinearMipmapLinearFilter),1===r.mipmapCount&&(o.minFilter=LinearFilter),o.needsUpdate=!0,t&&t(o,r))}),r,n),o}}),ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(e,t,r,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(e,t,r,n){var i=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(r){o.load(e[r],(function(e){i.images[r]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,n)}for(var c=0;c<e.length;++c)s(c);return i}}),TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(e,t,r,n){var i=new Texture,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(r){i.image=r;var n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?RGBFormat:RGBAFormat,i.needsUpdate=!0,void 0!==t&&t(i)}),r,n),i}}),Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=n[i=Math.floor(s+(c-s)/2)]-r)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(n[i=c]===r)return i/(o-1);var u=n[i];return(i+(r-u)/(n[i+1]-u))/(o-1)},getTangent:function(e,t){var r=1e-4,n=e-r,i=e+r;n<0&&(n=0),i>1&&(i=1);var o=this.getPoint(n),a=this.getPoint(i),s=t||(o.isVector2?new Vector2:new Vector3);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(e,t){var r=this.getUtoTmapping(e);return this.getTangent(r,t)},computeFrenetFrames:function(e,t){var r,n,i,o=new Vector3,a=[],s=[],c=[],u=new Vector3,l=new Matrix4;for(r=0;r<=e;r++)n=r/e,a[r]=this.getTangentAt(n,new Vector3),a[r].normalize();s[0]=new Vector3,c[0]=new Vector3;var f=Number.MAX_VALUE,h=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=f&&(f=h,o.set(1,0,0)),p<=f&&(f=p,o.set(0,1,0)),d<=f&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),c[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),u.crossVectors(a[r-1],a[r]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(MathUtils.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4(l.makeRotationAxis(u,i))),c[r].crossVectors(a[r],s[r]);if(!0===t)for(i=Math.acos(MathUtils.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(l.makeRotationAxis(a[r],i*r)),c[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(e,t){for(var r=t||new Vector2,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i===n?i=-n:i-=n);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=s-this.aX,h=c-this.aY;s=f*u-h*l+this.aX,c=f*l+h*u+this.aY}return r.set(s,c)},EllipseCurve.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},EllipseCurve.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},EllipseCurve.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve,ArcCurve.prototype.isArcCurve=!0;var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(e,t,r,n){Curve.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function CatmullRom(e,t,r,n,i){var o=.5*(n-t),a=.5*(i-r),s=e*e;return(2*r-2*n+o+a)*(e*s)+(-3*r+3*n-2*o-a)*s+o*e+r}function QuadraticBezierP0(e,t){var r=1-e;return r*r*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,r,n){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,r)+QuadraticBezierP2(e,n)}function CubicBezierP0(e,t){var r=1-e;return r*r*r*t}function CubicBezierP1(e,t){var r=1-e;return 3*r*r*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,r,n,i){return CubicBezierP0(e,t)+CubicBezierP1(e,r)+CubicBezierP2(e,n)+CubicBezierP3(e,i)}function CubicBezierCurve(e,t,r,n){Curve.call(this),this.type="CubicBezierCurve",this.v0=e||new Vector2,this.v1=t||new Vector2,this.v2=r||new Vector2,this.v3=n||new Vector2}function CubicBezierCurve3(e,t,r,n){Curve.call(this),this.type="CubicBezierCurve3",this.v0=e||new Vector3,this.v1=t||new Vector3,this.v2=r||new Vector3,this.v3=n||new Vector3}function LineCurve(e,t){Curve.call(this),this.type="LineCurve",this.v1=e||new Vector2,this.v2=t||new Vector2}function LineCurve3(e,t){Curve.call(this),this.type="LineCurve3",this.v1=e||new Vector3,this.v2=t||new Vector3}function QuadraticBezierCurve(e,t,r){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Vector2,this.v1=t||new Vector2,this.v2=r||new Vector2}function QuadraticBezierCurve3(e,t,r){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Vector3,this.v1=t||new Vector3,this.v2=r||new Vector3}function SplineCurve(e){Curve.call(this),this.type="SplineCurve",this.points=e||[]}CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.isCatmullRomCurve3=!0,CatmullRomCurve3.prototype.getPoint=function(e,t){var r,n,i,o,a=t||new Vector3,s=this.points,c=s.length,u=(c-(this.closed?0:1))*e,l=Math.floor(u),f=u-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/c)+1)*c:0===f&&l===c-1&&(l=c-2,f=1),this.closed||l>0?r=s[(l-1)%c]:(tmp.subVectors(s[0],s[1]).add(s[0]),r=tmp),n=s[l%c],i=s[(l+1)%c],this.closed||l+2<c?o=s[(l+2)%c]:(tmp.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=tmp),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(r.distanceToSquared(n),h),d=Math.pow(n.distanceToSquared(i),h),m=Math.pow(i.distanceToSquared(o),h);d<1e-4&&(d=1),p<1e-4&&(p=d),m<1e-4&&(m=d),px.initNonuniformCatmullRom(r.x,n.x,i.x,o.x,p,d,m),py.initNonuniformCatmullRom(r.y,n.y,i.y,o.y,p,d,m),pz.initNonuniformCatmullRom(r.z,n.z,i.z,o.z,p,d,m)}else"catmullrom"===this.curveType&&(px.initCatmullRom(r.x,n.x,i.x,o.x,this.tension),py.initCatmullRom(r.y,n.y,i.y,o.y,this.tension),pz.initCatmullRom(r.z,n.z,i.z,o.z,this.tension));return a.set(px.calc(f),py.calc(f),pz.calc(f)),a},CatmullRomCurve3.prototype.copy=function(e){Curve.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},CatmullRomCurve3.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},CatmullRomCurve3.prototype.fromJSON=function(e){Curve.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Vector3).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.isCubicBezierCurve=!0,CubicBezierCurve.prototype.getPoint=function(e,t){var r=t||new Vector2,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(CubicBezier(e,n.x,i.x,o.x,a.x),CubicBezier(e,n.y,i.y,o.y,a.y)),r},CubicBezierCurve.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},CubicBezierCurve.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},CubicBezierCurve.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.isCubicBezierCurve3=!0,CubicBezierCurve3.prototype.getPoint=function(e,t){var r=t||new Vector3,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(CubicBezier(e,n.x,i.x,o.x,a.x),CubicBezier(e,n.y,i.y,o.y,a.y),CubicBezier(e,n.z,i.z,o.z,a.z)),r},CubicBezierCurve3.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},CubicBezierCurve3.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},CubicBezierCurve3.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(e,t){var r=t||new Vector2;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},LineCurve.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},LineCurve.prototype.getTangent=function(e,t){return(t||new Vector2).copy(this.v2).sub(this.v1).normalize()},LineCurve.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},LineCurve.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},LineCurve.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.isLineCurve3=!0,LineCurve3.prototype.getPoint=function(e,t){var r=t||new Vector3;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},LineCurve3.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},LineCurve3.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},LineCurve3.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},LineCurve3.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0,QuadraticBezierCurve.prototype.getPoint=function(e,t){var r=t||new Vector2,n=this.v0,i=this.v1,o=this.v2;return r.set(QuadraticBezier(e,n.x,i.x,o.x),QuadraticBezier(e,n.y,i.y,o.y)),r},QuadraticBezierCurve.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},QuadraticBezierCurve.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},QuadraticBezierCurve.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0,QuadraticBezierCurve3.prototype.getPoint=function(e,t){var r=t||new Vector3,n=this.v0,i=this.v1,o=this.v2;return r.set(QuadraticBezier(e,n.x,i.x,o.x),QuadraticBezier(e,n.y,i.y,o.y),QuadraticBezier(e,n.z,i.z,o.z)),r},QuadraticBezierCurve3.prototype.copy=function(e){return Curve.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},QuadraticBezierCurve3.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},QuadraticBezierCurve3.prototype.fromJSON=function(e){return Curve.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(e,t){var r=t||new Vector2,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[0===o?o:o-1],c=n[o],u=n[o>n.length-2?n.length-1:o+1],l=n[o>n.length-3?n.length-1:o+2];return r.set(CatmullRom(a,s.x,c.x,u.x,l.x),CatmullRom(a,s.y,c.y,u.y,l.y)),r},SplineCurve.prototype.copy=function(e){Curve.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},SplineCurve.prototype.toJSON=function(){var e=Curve.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},SplineCurve.prototype.fromJSON=function(e){Curve.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Vector2).fromArray(n))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Path(e){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,e&&this.setFromPoints(e)}function Shape(e){Path.call(this,e),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}function Light(e,t){Object3D.call(this),this.type="Light",this.color=new Color(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function HemisphereLight(e,t,r){Light.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}function LightShadow(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}function SpotLight(e,t,r,n,i,o){Light.call(this,e,t),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new SpotLightShadow}function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}function PointLight(e,t,r,n){Light.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new PointLightShadow}function OrthographicCamera(e,t,r,n,i,o){Camera$1.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}function DirectionalLight(e,t){Light.call(this,e,t),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(e,t){Light.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function RectAreaLight(e,t,r,n){Light.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function SphericalHarmonics3(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Vector3)}function LightProbe(e,t){Light.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new SphericalHarmonics3}function MaterialLoader(e){Loader.call(this,e),this.textures={}}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var o=i[n],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(r.push(u),t=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){Curve.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Curve.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Curve.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Curves[n.type]).fromJSON(n))}return this}}),Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var r=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,r,n){var i=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this},bezierCurveTo:function(e,t,r,n,i,o){var a=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,n),new Vector2(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new SplineCurve([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,r,n,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,r,n,i,o),this},absarc:function(e,t,r,n,i,o){return this.absellipse(e,t,r,r,n,i,o),this},ellipse:function(e,t,r,n,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,n,i,o,a,s),this},absellipse:function(e,t,r,n,i,o,a,s){var c=new EllipseCurve(e,t,r,n,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return CurvePath.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=CurvePath.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return CurvePath.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Path.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Path.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Path.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new Path).fromJSON(n))}return this}}),Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,r=this.matrix,n=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,r=2*MathUtils.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,e)}}),SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var r=this.camera,n=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),r.position.copy(i),o.copy(r.position),o.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(o),r.updateMatrixWorld(),n.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),OrthographicCamera.prototype=Object.assign(Object.create(Camera$1.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(e,t){return Camera$1.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=c*this.view.offsetX)+c*this.view.width,s=(a-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(e){LightShadow.prototype.updateMatrices.call(this,e)}}),DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0}),RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Light.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var r=e.x,n=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*n),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],r*n*1.092548),t.addScaledVector(o[5],n*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],r*i*1.092548),t.addScaledVector(o[8],.546274*(r*r-n*n)),t},getIrradianceAt:function(e,t){var r=e.x,n=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*n),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*r),t.addScaledVector(o[4],.858086*r*n),t.addScaledVector(o[5],.858086*n*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*r*i),t.addScaledVector(o[8],.429043*(r*r-n*n)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].fromArray(e,t+3*n);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].toArray(e,t+3*n);return e}}),Object.assign(SphericalHarmonics3,{getBasisAt:function(e,t){var r=e.x,n=e.y,i=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*i,t[3]=.488603*r,t[4]=1.092548*r*n,t[5]=1.092548*n*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*r*i,t[8]=.546274*(r*r-n*n)}}),LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=Light.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(t,r,n,i){var o=this,a=new FileLoader(o.manager);a.setPath(o.path),a.load(t,(function(n){try{r(o.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Materials[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=(new Color).setHex(e.sheen)),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(n.morphNormals=e.morphNormals),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.vertexTangents&&(n.vertexTangents=e.vertexTangents),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(n.uniforms[i]={},o.type){case"t":n.uniforms[i].value=r(o.value);break;case"c":n.uniforms[i].value=(new Color).setHex(o.value);break;case"v2":n.uniforms[i].value=(new Vector2).fromArray(o.value);break;case"v3":n.uniforms[i].value=(new Vector3).fromArray(o.value);break;case"v4":n.uniforms[i].value=(new Vector4).fromArray(o.value);break;case"m3":n.uniforms[i].value=(new Matrix3).fromArray(o.value);case"m4":n.uniforms[i].value=(new Matrix4).fromArray(o.value);break;default:n.uniforms[i].value=o.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)n.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.matcap&&(n.matcap=r(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),n.normalScale=(new Vector2).fromArray(s)}return void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Vector2).fromArray(e.clearcoatNormalScale)),n},setTextures:function(e){return this.textures=e,this}});var LoaderUtils={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var r="",n=0,i=t.length;n<i;n++)r+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(r))}catch(e){return r}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function InstancedBufferAttribute(e,t,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,e,t,r),this.meshPerAttribute=n||1}function BufferGeometryLoader(e){Loader.call(this,e)}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(e){return BufferGeometry.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=BufferGeometry.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=BufferAttribute.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(t,r,n,i){var o=this,a=new FileLoader(o.manager);a.setPath(o.path),a.load(t,(function(n){try{r(o.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e){var t=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,r=e.data.index;if(void 0!==r){var n=new TYPED_ARRAYS[r.type](r.array);t.setIndex(new BufferAttribute(n,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(n=new TYPED_ARRAYS[a.type](a.array),new(a.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(n,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var c=e.data.morphAttributes;if(c)for(var o in c){for(var u=c[o],l=[],f=0,h=u.length;f<h;f++){a=u[f],s=new BufferAttribute(n=new TYPED_ARRAYS[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),l.push(s)}t.morphAttributes[o]=l}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){f=0;for(var d=p.length;f!==d;++f){var m=p[f];t.addGroup(m.start,m.count,m.materialIndex)}}var g=e.data.boundingSphere;if(void 0!==g){var v=new Vector3;void 0!==g.center&&v.fromArray(g.center),t.boundingSphere=new Sphere(v,g.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var TYPED_ARRAYS={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ObjectLoader(e){Loader.call(this,e)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(e,t,r,n){var i=this,o=""===this.path?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new FileLoader(i.manager);a.setPath(this.path),a.load(e,(function(r){var o=null;try{o=JSON.parse(r)}catch(s){return void 0!==n&&n(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),r,n)},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new Shape).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new BufferGeometryLoader,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Geometries[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Geometries[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Geometries[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Geometries[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Geometries[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Geometries[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Geometries[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Geometries[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Geometries[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Geometries[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Geometries[s.type]((new Curves[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Geometries[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Geometries[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,l=s.shapes.length;u<l;u++){var f=t[s.shapes[u]];c.push(f)}a=new Geometries[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],u=0,l=s.shapes.length;u<l;u++){f=t[s.shapes[u]];c.push(f)}var h=s.options.extrudePath;void 0!==h&&(s.options.extrudePath=(new Curves[h.type]).fromJSON(h)),a=new Geometries[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new MaterialLoader;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var c=[],u=0;u<s.materials.length;u++){var l=s.materials[u];void 0===r[l.uuid]&&(r[l.uuid]=i.parse(l)),c.push(r[l.uuid])}n[s.uuid]=c}else void 0===r[s.uuid]&&(r[s.uuid]=i.parse(s)),n[s.uuid]=r[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=AnimationClip.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),t.push(i)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),o.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new ImageLoader(new LoadingManager(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],u=c.url;if(Array.isArray(u)){n[c.uuid]=[];for(var l=0,f=u.length;l<f;l++){var h=u[l],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h;n[c.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;n[c.uuid]=i(p)}}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new CubeTexture(t[s.image]):new Texture(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,TEXTURE_MAPPING)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],TEXTURE_WRAPPING),a.wrapT=r(s.wrap[1],TEXTURE_WRAPPING)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,TEXTURE_FILTER)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,TEXTURE_FILTER)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),n[s.uuid]=a}return n},parseObject:function(e,t,r){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":n=new Scene,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new Color(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new FogExp2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":n=new DirectionalLight(e.color,e.intensity);break;case"PointLight":n=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":n=(new LightProbe).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":n=new Mesh(a=i(e.geometry),s=o(e.material));break;case"InstancedMesh":var a=i(e.geometry),s=o(e.material),c=e.count,u=e.instanceMatrix;(n=new InstancedMesh(a,s,c)).instanceMatrix=new BufferAttribute(new Float32Array(u.array),16);break;case"LOD":n=new LOD;break;case"Line":n=new Line(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":n=new LineLoop(i(e.geometry),o(e.material));break;case"LineSegments":n=new LineSegments(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":n=new Points(i(e.geometry),o(e.material));break;case"Sprite":n=new Sprite(o(e.material));break;case"Group":n=new Group$1;break;default:n=new Object3D}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,f=0;f<l.length;f++)n.add(this.parseObject(l[f],t,r));if("LOD"===e.type){void 0!==e.autoUpdate&&(n.autoUpdate=e.autoUpdate);for(var h=e.levels,p=0;p<h.length;p++){var d=h[p],m=n.getObjectByProperty("uuid",d.object);void 0!==m&&n.addLevel(m,d.distance)}}return n}});var TEXTURE_MAPPING={UVMapping:UVMapping,CubeReflectionMapping:CubeReflectionMapping,CubeRefractionMapping:CubeRefractionMapping,EquirectangularReflectionMapping:EquirectangularReflectionMapping,EquirectangularRefractionMapping:EquirectangularRefractionMapping,SphericalReflectionMapping:SphericalReflectionMapping,CubeUVReflectionMapping:CubeUVReflectionMapping,CubeUVRefractionMapping:CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping:RepeatWrapping,ClampToEdgeWrapping:ClampToEdgeWrapping,MirroredRepeatWrapping:MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter:NearestFilter,NearestMipmapNearestFilter:NearestMipmapNearestFilter,NearestMipmapLinearFilter:NearestMipmapLinearFilter,LinearFilter:LinearFilter,LinearMipmapNearestFilter:LinearMipmapNearestFilter,LinearMipmapLinearFilter:LinearMipmapLinearFilter},_context;function ImageBitmapLoader(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,e),this.options=void 0}function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}function Font(e){this.type="Font",this.data=e}function createPaths(e,t,r){for(var n=Array.from?Array.from(e):String(e).split(""),i=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,a=[],s=0,c=0,u=0;u<n.length;u++){var l=n[u];if("\n"===l)s=0,c-=o;else{var f=createPath(l,i,s,c,r);s+=f.offsetX,a.push(f.path)}}return a}function createPath(e,t,r,n,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,u,l,f,h,p,d=new ShapePath;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":a=m[g++]*t+r,s=m[g++]*t+n,d.moveTo(a,s);break;case"l":a=m[g++]*t+r,s=m[g++]*t+n,d.lineTo(a,s);break;case"q":c=m[g++]*t+r,u=m[g++]*t+n,l=m[g++]*t+r,f=m[g++]*t+n,d.quadraticCurveTo(l,f,c,u);break;case"b":c=m[g++]*t+r,u=m[g++]*t+n,l=m[g++]*t+r,f=m[g++]*t+n,h=m[g++]*t+r,p=m[g++]*t+n,d.bezierCurveTo(l,f,h,p,c,u)}}return{offsetX:o.ha*t,path:d}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function FontLoader(e){Loader.call(this,e)}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(r){Cache.add(e,r),t&&t(r),i.manager.itemEnd(e)})).catch((function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(ShapePath.prototype,{moveTo:function(e,t){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,r,n){return this.currentPath.quadraticCurveTo(e,t,r,n),this},bezierCurveTo:function(e,t,r,n,i,o){return this.currentPath.bezierCurveTo(e,t,r,n,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new Shape;o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var i=ShapeUtils.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);var a,s,c,u=[];if(1===o.length)return s=o[0],(c=new Shape).curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var f,h,p=[],d=[],m=[],g=0;d[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=i(f=(s=o[v]).getPoints()),(a=e?!a:a)?(!l&&d[g]&&g++,d[g]={s:new Shape,p:f},d[g].s.curves=s.curves,l&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!d[0])return r(o);if(d.length>1){for(var b=!1,_=[],A=0,M=d.length;A<M;A++)p[A]=[];for(A=0,M=d.length;A<M;A++)for(var x=m[A],w=0;w<x.length;w++){for(var $=x[w],E=!0,T=0;T<d.length;T++)n($.p,d[T].p)&&(A!==T&&_.push({froms:A,tos:T,hole:w}),E?(E=!1,p[T].push($)):b=!0);E&&p[A].push($)}_.length>0&&(b||(m=p))}v=0;for(var S=d.length;v<S;v++){c=d[v].s,u.push(c);for(var O=0,N=(h=m[v]).length;O<N;O++)c.holes.push(h[O].h)}return u}}),Object.assign(Font.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],n=createPaths(e,t,this.data),i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(t,r,n,i){var o=this,a=new FileLoader(this.manager);a.setPath(this.path),a.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=o.parse(n);r&&r(i)}),n,i)},parse:function(e){return new Font(e)}});var AudioContext={getContext:function(){return void 0===_context&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(e){_context=e}};function AudioLoader(e){Loader.call(this,e)}function HemisphereLightProbe(e,t,r){LightProbe.call(this,void 0,r);var n=(new Color).set(e),i=(new Color).set(t),o=new Vector3(n.r,n.g,n.b),a=new Vector3(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}function AmbientLightProbe(e,t){LightProbe.call(this,void 0,t);var r=(new Color).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(t,r,n,i){var o=this,a=new FileLoader(o.manager);a.setResponseType("arraybuffer"),a.setPath(o.path),a.load(t,(function(n){try{var a=n.slice(0);AudioContext.getContext().decodeAudioData(a,(function(e){r(e)}))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)}}),HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(e){return LightProbe.prototype.copy.call(this,e),this},toJSON:function(e){return LightProbe.prototype.toJSON.call(this,e)}}),AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(e){return LightProbe.prototype.copy.call(this,e),this},toJSON:function(e){return LightProbe.prototype.toJSON.call(this,e)}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Clock(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(StereoCamera.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var r,n,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(MathUtils.DEG2RAD*t.fov*.5)/t.zoom;_eyeLeft.elements[12]=-o,_eyeRight.elements[12]=o,r=-s*t.aspect+a,n=s*t.aspect+a,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraL.projectionMatrix.copy(i),r=-s*t.aspect-a,n=s*t.aspect-a,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_eyeRight)}}),Object.assign(Clock.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}function Audio(e){Object3D.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Object3D.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),t.positionX){var n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(_position$2.x,n),t.positionY.linearRampToValueAtTime(_position$2.y,n),t.positionZ.linearRampToValueAtTime(_position$2.z,n),t.forwardX.linearRampToValueAtTime(_orientation.x,n),t.forwardY.linearRampToValueAtTime(_orientation.y,n),t.forwardZ.linearRampToValueAtTime(_orientation.z,n),t.upX.linearRampToValueAtTime(r.x,n),t.upY.linearRampToValueAtTime(r.y,n),t.upZ.linearRampToValueAtTime(r.z,n)}else t.setPosition(_position$2.x,_position$2.y,_position$2.z),t.setOrientation(_orientation.x,_orientation.y,_orientation.z,r.x,r.y,r.z)}}),Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(e){Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function AudioAnalyser(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function PropertyMixer(e,t,r){var n,i,o;switch(this.binding=e,this.valueSize=r,t){case"quaternion":n=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":n=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:n=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(e){if(Object3D.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_position$3.x,r),t.positionY.linearRampToValueAtTime(_position$3.y,r),t.positionZ.linearRampToValueAtTime(_position$3.z,r),t.orientationX.linearRampToValueAtTime(_orientation$1.x,r),t.orientationY.linearRampToValueAtTime(_orientation$1.y,r),t.orientationZ.linearRampToValueAtTime(_orientation$1.z,r)}else t.setPosition(_position$3.x,_position$3.y,_position$3.z),t.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}}),Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(PropertyMixer.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)r[i+a]=r[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=o},accumulateAdditive:function(e){var t=this.buffer,r=this.valueSize,n=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,r),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(r,n,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(r,n,this._addIndex*t,1,t);for(var c=t,u=t+t;c!==u;++c)if(r[c]!==r[c+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=r*this._origIndex;e.getValue(t,n);for(var i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,r=e;r<t;r++)this.buffer[r]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]},_select:function(e,t,r,n,i){if(n>=.5)for(var o=0;o!==i;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){Quaternion.slerpFlat(e,t,e,t,e,r,n)},_slerpAdditive:function(e,t,r,n,i){var o=this._workIndex*i;Quaternion.multiplyQuaternionsFlat(e,o,e,t,e,r),Quaternion.slerpFlat(e,t,e,t,e,o,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*n}},_lerpAdditive:function(e,t,r,n,i){for(var o=0;o!==i;++o){var a=t+o;e[a]=e[a]+e[r+o]*n}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(e,t,r){var n=r||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function PropertyBinding(e,t,r){this.path=t,this.parsedPath=r||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function AnimationAction(e,t,r,n){this._mixer=e,this._clip=t,this._localRoot=r||null,this.blendMode=n||t.blendMode;for(var i=t.tracks,o=i.length,a=new Array(o),s={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},c=0;c!==o;++c){var u=i[c].createInterpolant(null);a[c]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function AnimationMixer(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Uniform(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function InstancedInterleavedBuffer(e,t,r){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=r||1}function Raycaster(e,t,r,n){this.ray=new Ray(e,t),this.near=r||0,this.far=n||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function _intersectObject(e,t,r,n){if(e.layers.test(t.layers)&&e.raycast(t,r),!0===n)for(var i=e.children,o=0,a=i.length;o<a;o++)_intersectObject(i[o],t,r,!0)}function Spherical(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Cylindrical(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}Object.assign(Composite.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(PropertyBinding,{Composite:Composite,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,r):new PropertyBinding(e,t,r)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(e){var t=_trackRe.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==_supportedObjectNames.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function e(r){for(var n=0;n<r.length;n++){var i=r[n];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(n)return n}return null}}),Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[n];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue}),Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,u=0,l=arguments.length;u!==l;++u){var f=arguments[u],h=f.uuid,p=n[h];if(void 0===p){p=t++,n[h]=p,e.push(f);for(var d=0,m=s;d!==m;++d)a[d].push(new PropertyBinding(f,i[d],o[d]))}else if(p<r){c=e[p];var g=--r,v=e[g];n[v.uuid]=p,e[p]=v,n[h]=g,e[g]=f;for(d=0,m=s;d!==m;++d){var y=a[d],b=y[g],_=y[p];y[p]=b,void 0===_&&(_=new PropertyBinding(f,i[d],o[d])),y[g]=_}}else e[p]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,u=r[c];if(void 0!==u&&u>=t){var l=t++,f=e[l];r[f.uuid]=u,e[u]=f,r[c]=l,e[l]=s;for(var h=0,p=i;h!==p;++h){var d=n[h],m=d[l],g=d[u];d[u]=m,d[l]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],u=c.uuid,l=n[u];if(void 0!==l)if(delete n[u],l<r){var f=--r,h=e[f],p=e[y=--t];n[h.uuid]=l,e[l]=h,n[p.uuid]=f,e[f]=p,e.pop();for(var d=0,m=o;d!==m;++d){var g=(b=i[d])[f],v=b[y];b[l]=g,b[f]=v,b.pop()}}else{var y;n[(p=e[y=--t]).uuid]=l,e[l]=p,e.pop();for(d=0,m=o;d!==m;++d){var b;(b=i[d])[l]=b[y],b.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);n=i.length,r[e]=n,o.push(e),a.push(t),i.push(l);for(var f=u,h=s.length;f!==h;++f){var p=s[f];l[f]=new PropertyBinding(p,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),i[r]=i[a],i.pop(),n[r]=n[a],n.pop()}}}),Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+r,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0){var c=this._interpolants,u=this._propertyBindings;if(this.blendMode===AdditiveAnimationBlendMode)for(var l=0,f=c.length;l!==f;++l)c[l].evaluate(a),u[l].accumulateAdditive(s);else for(l=0,f=c.length;l!==f;++l)c[l].evaluate(a),u[l].accumulate(n,s)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,o=n===LoopPingPong;if(0===e)return-1===i?t:o&&1==(1&i)?r-t:t;if(n===LoopOnce){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&i))return r-t}return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=ZeroSlopeEnding,n.endingEnd=ZeroSlopeEnding):(n.endingStart=e?this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:WrapAroundEnding,n.endingEnd=t?this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:WrapAroundEnding)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}}),AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var f=n[l],h=f.name,p=u[h];if(void 0!==p)o[l]=p;else{if(void 0!==(p=o[l])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var d=t&&t._propertyBindings[l].binding.parsedPath;++(p=new PropertyMixer(PropertyBinding.create(r,h,d),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),o[l]=p}a[l].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[n]},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,r){var n=t||this._root,i=n.uuid,o="string"==typeof e?AnimationClip.findByName(n,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],c=null;if(void 0===r&&(r=null!==o?o.blendMode:NormalAnimationBlendMode),void 0!==s){var u=s.actionByRoot[i];if(void 0!==u&&u.blendMode===r)return u;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;var l=new AnimationAction(this,o,t,r);return this._bindAction(l,c),this._addInactiveAction(l,a,i),l},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?AnimationClip.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a){t[a]._update(n,e,i,o)}var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Uniform.prototype.clone=function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())},InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Raycaster.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return _intersectObject(e,this,n,t),n.sort(ascSort),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,o=e.length;i<o;i++)_intersectObject(e[i],this,n,t);return n.sort(ascSort),n}}),Object.assign(Spherical.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(MathUtils.clamp(t/this.radius,-1,1))),this}}),Object.assign(Cylindrical.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}});var _vector$7=new Vector2;function Box2(e,t){this.min=void 0!==e?e:new Vector2(1/0,1/0),this.max=void 0!==t?t:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=_vector$7.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Vector2),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Vector2),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Vector2),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Vector2),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return _vector$7.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(e,t){this.start=void 0!==e?e:new Vector3,this.end=void 0!==t?t:new Vector3}function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(Line3.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Vector3),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Vector3),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Vector3),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);var r=_startEnd.dot(_startEnd),n=_startEnd.dot(_startP)/r;return t&&(n=MathUtils.clamp(n,0,1)),n},closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new Vector3),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new BufferGeometry,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}r.setAttribute("position",new Float32BufferAttribute(n,3));var c=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(r,c),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,getBoneList(e.children[r]));return t}function SkeletonHelper(e){for(var t=getBoneList(e),r=new BufferGeometry,n=[],i=[],o=new Color(0,0,1),a=new Color(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}r.setAttribute("position",new Float32BufferAttribute(n,3)),r.setAttribute("color",new Float32BufferAttribute(i,3));var u=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,r,u),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function PointLightHelper(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new SphereBufferGeometry(t,4,2),i=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,n,i),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.isSkeletonHelper=!0,SkeletonHelper.prototype.updateMatrixWorld=function(e){var t=this.bones,r=this.geometry,n=r.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,a.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),n.setXYZ(o,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,a.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),n.setXYZ(o+1,_vector$9.x,_vector$9.y,_vector$9.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,e)},PointLightHelper.prototype=Object.create(Mesh.prototype),PointLightHelper.prototype.constructor=PointLightHelper,PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},PointLightHelper.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(e,t,r){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new OctahedronBufferGeometry(t);n.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.setAttribute("color",new BufferAttribute(o,3)),this.add(new Mesh(n,this.material)),this.update()}function GridHelper(e,t,r,n){e=e||10,t=t||10,r=new Color(void 0!==r?r:4473924),n=new Color(void 0!==n?n:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],u=0,l=0,f=-a;u<=t;u++,f+=o){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);var h=u===i?r:n;h.toArray(c,l),l+=3,h.toArray(c,l),l+=3,h.toArray(c,l),l+=3,h.toArray(c,l),l+=3}var p=new BufferGeometry;p.setAttribute("position",new Float32BufferAttribute(s,3)),p.setAttribute("color",new Float32BufferAttribute(c,3));var d=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,p,d),this.type="GridHelper"}function PolarGridHelper(e,t,r,n,i,o){e=e||10,t=t||16,r=r||8,n=n||64,i=new Color(void 0!==i?i:4473924),o=new Color(void 0!==o?o:8947848);var a,s,c,u,l,f,h,p=[],d=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,p.push(0,0,0),p.push(a,0,s),h=1&u?i:o,d.push(h.r,h.g,h.b),d.push(h.r,h.g,h.b);for(u=0;u<=r;u++)for(h=1&u?i:o,f=e-e/r*u,l=0;l<n;l++)c=l/n*(2*Math.PI),a=Math.sin(c)*f,s=Math.cos(c)*f,p.push(a,0,s),d.push(h.r,h.g,h.b),c=(l+1)/n*(2*Math.PI),a=Math.sin(c)*f,s=Math.cos(c)*f,p.push(a,0,s),d.push(h.r,h.g,h.b);var m=new BufferGeometry;m.setAttribute("position",new Float32BufferAttribute(p,3)),m.setAttribute("color",new Float32BufferAttribute(d,3));var g=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,m,g),this.type="PolarGridHelper"}HemisphereLightHelper.prototype=Object.create(Object3D.prototype),HemisphereLightHelper.prototype.constructor=HemisphereLightHelper,HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},HemisphereLightHelper.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var r=0,n=t.count;r<n;r++){var i=r<n/2?_color1:_color2;t.setXYZ(r,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())},GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(e){return LineSegments.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),PolarGridHelper.prototype=Object.create(LineSegments.prototype),PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(e,t,r){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new BufferGeometry;n.setAttribute("position",new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(n,i),this.add(this.lightPlane),(n=new BufferGeometry).setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(n,i),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype),DirectionalLightHelper.prototype.constructor=DirectionalLightHelper,DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera$1;function CameraHelper(e){var t=new BufferGeometry,r=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={},a=new Color(16755200),s=new Color(16711680),c=new Color(43775),u=new Color(16777215),l=new Color(3355443);function f(e,t,r){h(e,r),h(t,r)}function h(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}f("n1","n2",a),f("n2","n4",a),f("n4","n3",a),f("n3","n1",a),f("f1","f2",a),f("f2","f4",a),f("f4","f3",a),f("f3","f1",a),f("n1","f1",a),f("n2","f2",a),f("n3","f3",a),f("n4","f4",a),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",c),f("u2","u3",c),f("u3","u1",c),f("c","t",u),f("p","c",l),f("cn1","cn2",l),f("cn3","cn4",l),f("cf1","cf2",l),f("cf3","cf4",l),t.setAttribute("position",new Float32BufferAttribute(n,3)),t.setAttribute("color",new Float32BufferAttribute(i,3)),LineSegments.call(this,t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function setPoint(e,t,r,n,i,o,a){_vector$b.set(i,o,a).unproject(n);var s=t[e];if(void 0!==s)for(var c=r.getAttribute("position"),u=0,l=s.length;u<l;u++)c.setXYZ(s[u],_vector$b.x,_vector$b.y,_vector$b.z)}CameraHelper.prototype=Object.create(LineSegments.prototype),CameraHelper.prototype.constructor=CameraHelper,CameraHelper.prototype.update=function(){var e=this.geometry,t=this.pointMap;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",t,e,_camera,0,0,-1),setPoint("t",t,e,_camera,0,0,1),setPoint("n1",t,e,_camera,-1,-1,-1),setPoint("n2",t,e,_camera,1,-1,-1),setPoint("n3",t,e,_camera,-1,1,-1),setPoint("n4",t,e,_camera,1,1,-1),setPoint("f1",t,e,_camera,-1,-1,1),setPoint("f2",t,e,_camera,1,-1,1),setPoint("f3",t,e,_camera,-1,1,1),setPoint("f4",t,e,_camera,1,1,1),setPoint("u1",t,e,_camera,.7,1.1,-1),setPoint("u2",t,e,_camera,-.7,1.1,-1),setPoint("u3",t,e,_camera,0,2,-1),setPoint("cf1",t,e,_camera,-1,0,1),setPoint("cf2",t,e,_camera,1,0,1),setPoint("cf3",t,e,_camera,0,-1,1),setPoint("cf4",t,e,_camera,0,1,1),setPoint("cn1",t,e,_camera,-1,0,-1),setPoint("cn2",t,e,_camera,1,0,-1),setPoint("cn3",t,e,_camera,0,-1,-1),setPoint("cn4",t,e,_camera,0,1,-1),e.getAttribute("position").needsUpdate=!0};var _box$3=new Box3;function BoxHelper(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new BufferGeometry;i.setIndex(new BufferAttribute(r,1)),i.setAttribute("position",new BufferAttribute(n,3)),LineSegments.call(this,i,new LineBasicMaterial({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Box3Helper(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new BufferGeometry;n.setIndex(new BufferAttribute(r,1)),n.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),LineSegments.call(this,n,new LineBasicMaterial({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function PlaneHelper(e,t,r){this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=new BufferGeometry;i.setAttribute("position",new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Line.call(this,i,new LineBasicMaterial({color:n,toneMapped:!1})),this.type="PlaneHelper";var o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Mesh(o,new MeshBasicMaterial({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}BoxHelper.prototype=Object.create(LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var t=_box$3.min,r=_box$3.max,n=this.geometry.attributes.position,i=n.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=t.x,i[4]=r.y,i[5]=r.z,i[6]=t.x,i[7]=t.y,i[8]=r.z,i[9]=r.x,i[10]=t.y,i[11]=r.z,i[12]=r.x,i[13]=r.y,i[14]=t.z,i[15]=t.x,i[16]=r.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=r.x,i[22]=t.y,i[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}},BoxHelper.prototype.setFromObject=function(e){return this.object=e,this.update(),this},BoxHelper.prototype.copy=function(e){return LineSegments.prototype.copy.call(this,e),this.object=e.object,this},BoxHelper.prototype.clone=function(){return(new this.constructor).copy(this)},Box3Helper.prototype=Object.create(LineSegments.prototype),Box3Helper.prototype.constructor=Box3Helper,Box3Helper.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,e))},PlaneHelper.prototype=Object.create(Line.prototype),PlaneHelper.prototype.constructor=PlaneHelper,PlaneHelper.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,e)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(e,t,r,n,i,o){Object3D.call(this),this.type="ArrowHelper",void 0===e&&(e=new Vector3(0,0,1)),void 0===t&&(t=new Vector3(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===_lineGeometry&&((_lineGeometry=new BufferGeometry).setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),(_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,o)}function AxesHelper(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new BufferGeometry;r.setAttribute("position",new Float32BufferAttribute(t,3)),r.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,r,n),this.type="AxesHelper"}ArrowHelper.prototype=Object.create(Object3D.prototype),ArrowHelper.prototype.constructor=ArrowHelper,ArrowHelper.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,t)}},ArrowHelper.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},ArrowHelper.prototype.copy=function(e){return Object3D.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},ArrowHelper.prototype.clone=function(){return(new this.constructor).copy(this)},AxesHelper.prototype=Object.create(LineSegments.prototype),AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS=(_ENCODINGS={},_defineProperty3(_ENCODINGS,LinearEncoding,0),_defineProperty3(_ENCODINGS,sRGBEncoding,1),_defineProperty3(_ENCODINGS,RGBEEncoding,2),_defineProperty3(_ENCODINGS,RGBM7Encoding,3),_defineProperty3(_ENCODINGS,RGBM16Encoding,4),_defineProperty3(_ENCODINGS,RGBDEncoding,5),_defineProperty3(_ENCODINGS,GammaEncoding,6),_ENCODINGS),_flatCamera=new OrthographicCamera,_createPlanes2=_createPlanes(),_lodPlanes=_createPlanes2._lodPlanes,_sizeLods=_createPlanes2._sizeLods,_sigmas=_createPlanes2._sigmas,_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function _isLDR(e){return void 0!==e&&e.type===UnsignedByteType&&(e.encoding===LinearEncoding||e.encoding===sRGBEncoding||e.encoding===GammaEncoding)}function _createPlanes(){for(var e=[],t=[],r=[],n=LOD_MAX,i=0;i<TOTAL_LODS;i++){var o=Math.pow(2,n);t.push(o);var a=1/o;i>LOD_MAX-LOD_MIN?a=EXTRA_LOD_SIGMA[i-LOD_MAX+LOD_MIN-1]:0==i&&(a=0),r.push(a);for(var s=1/(o-1),c=-s/2,u=1+s/2,l=[c,c,u,c,u,u,c,c,u,u,c,u],f=new Float32Array(108),h=new Float32Array(72),p=new Float32Array(36),d=0;d<6;d++){var m=d%3*2/3-1,g=d>2?0:-1,v=[m,g,0,m+2/3,g,0,m+2/3,g+1,0,m,g,0,m+2/3,g+1,0,m,g+1,0];f.set(v,18*d),h.set(l,12*d);var y=[d,d,d,d,d,d];p.set(y,6*d)}var b=new BufferGeometry;b.setAttribute("position",new BufferAttribute(f,3)),b.setAttribute("uv",new BufferAttribute(h,2)),b.setAttribute("faceIndex",new BufferAttribute(p,1)),e.push(b),n>LOD_MIN&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}function _createRenderTarget(e){var t=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,e);return t.texture.mapping=CubeUVReflectionMapping,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function _setViewport(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function _getBlurShader(e){var t=new RawShaderMaterial({defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(e)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Vector3(0,1,0)},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n".concat(_getEncodings(),"\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:NoBlending,depthTest:!1,depthWrite:!1});return t.type="SphericalGaussianBlur",t}function _getEquirectShader(){var e=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:new Vector2(1,1)},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n".concat(_getEncodings(),"\n\n#include <common>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv = equirectUv( outputDirection );\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:NoBlending,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function _getCubemapShader(){var e=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n".concat(_getEncodings(),"\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:NoBlending,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function _getCommonVertexShader(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function _getEncodings(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function Face4(e,t,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(e,t,r,i,o,a)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;_oldTarget=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,r,n,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(e){return e.magFilter=NearestFilter,e.minFilter=NearestFilter,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){_oldTarget=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<_lodPlanes.length;e++)_lodPlanes[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),e.scissorTest=!1,e.setSize(e.width,e.height)},_allocateTargets:function(e){var t={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(e)?e.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},r=_createRenderTarget(t);return r.depthBuffer=!e,this._pingPongRenderTarget=_createRenderTarget(t),r},_compileMaterial:function(e){var t=new Mesh(_lodPlanes[0],e);this._renderer.compile(t,_flatCamera)},_sceneToCubeUV:function(e,t,r,n){var i=new PerspectiveCamera(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.outputEncoding,u=s.toneMapping,l=s.toneMappingExposure,f=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=LinearToneMapping,s.toneMappingExposure=1,s.outputEncoding=LinearEncoding;var p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();var d=Math.max(p.r,p.g,p.b),m=Math.min(Math.max(Math.ceil(Math.log2(d)),-128),127);p=p.multiplyScalar(Math.pow(2,-m));var g=(m+128)/255;s.setClearColor(p,g),e.background=null}for(var v=0;v<6;v++){var y=v%3;0==y?(i.up.set(0,o[v],0),i.lookAt(a[v],0,0)):1==y?(i.up.set(0,0,o[v]),i.lookAt(0,a[v],0)):(i.up.set(0,o[v],0),i.lookAt(0,0,a[v])),_setViewport(n,y*SIZE_MAX,v>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),s.setRenderTarget(n),s.render(e,i)}s.toneMapping=u,s.toneMappingExposure=l,s.outputEncoding=c,s.setClearColor(f,h)},_textureToCubeUV:function(e,t){var r=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=_getCubemapShader()):null==this._equirectShader&&(this._equirectShader=_getEquirectShader());var n=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Mesh(_lodPlanes[0],n),o=n.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=ENCODINGS[e.encoding],o.outputEncoding.value=ENCODINGS[t.texture.encoding],_setViewport(t,0,0,3*SIZE_MAX,2*SIZE_MAX),r.setRenderTarget(t),r.render(i,_flatCamera)},_applyPMREM:function(e){var t=this._renderer,r=t.autoClear;t.autoClear=!1;for(var n=1;n<TOTAL_LODS;n++){var i=Math.sqrt(_sigmas[n]*_sigmas[n]-_sigmas[n-1]*_sigmas[n-1]),o=_axisDirections[(n-1)%_axisDirections.length];this._blur(e,n-1,n,i,o)}t.autoClear=r},_blur:function(e,t,r,n,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",i),this._halfBlur(o,e,r,r,n,"longitudinal",i)},_halfBlur:function(e,t,r,n,i,o,a){var s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new Mesh(_lodPlanes[n],c),l=c.uniforms,f=_sizeLods[r]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*MAX_SAMPLES-1),p=i/h,d=isFinite(i)?1+Math.floor(3*p):MAX_SAMPLES;d>MAX_SAMPLES&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(d," samples when the maximum is set to ").concat(MAX_SAMPLES));for(var m=[],g=0,v=0;v<MAX_SAMPLES;++v){var y=v/p,b=Math.exp(-y*y/2);m.push(b),0==v?g+=b:v<d&&(g+=2*b)}for(v=0;v<m.length;v++)m[v]=m[v]/g;l.envMap.value=e.texture,l.samples.value=d,l.weights.value=m,l.latitudinal.value="latitudinal"===o,a&&(l.poleAxis.value=a),l.dTheta.value=h,l.mipInt.value=LOD_MAX-r,l.inputEncoding.value=ENCODINGS[e.texture.encoding],l.outputEncoding.value=ENCODINGS[e.texture.encoding];var _=_sizeLods[n];_setViewport(t,y=3*Math.max(0,SIZE_MAX-2*_),(0===n?0:2*SIZE_MAX)+2*_*(n>LOD_MAX-LOD_MIN?n-LOD_MAX+LOD_MIN:0),3*_,2*_),s.setRenderTarget(t),s.render(u,_flatCamera)}};var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function MultiMaterial(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function PointCloud(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(e,t)}function Particle(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(e)}function ParticleSystem(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(e,t)}function PointCloudMaterial(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ParticleBasicMaterial(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ParticleSystemMaterial(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function Vertex(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(e,t,r)}function DynamicBufferAttribute(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(e,t).setUsage(DynamicDrawUsage)}function Int8Attribute(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(e,t)}function Uint8Attribute(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(e,t)}function Uint8ClampedAttribute(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(e,t)}function Int16Attribute(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(e,t)}function Uint16Attribute(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(e,t)}function Int32Attribute(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(e,t)}function Uint32Attribute(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(e,t)}function Float32Attribute(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(e,t)}function Float64Attribute(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(e,t)}function ClosedSplineCurve3(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0}function SplineCurve3(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom"}function Spline(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom"}function AxisHelper(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(e)}function BoundingBoxHelper(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(e,t)}function EdgesHelper(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function WireframeHelper(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function XHRLoader(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(e)}function BinaryTextureLoader(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(e)}function WebGLRenderTargetCube(e,t,r){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(e,r)}Curve.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(CurvePath.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Geometry,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Vector3(i.x,i.y,i.z||0))}return t}}),Object.assign(Path.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),Spline.prototype=Object.create(CatmullRomCurve3.prototype),Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Loader.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(e)}}),Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(ObjectLoader.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Box2.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Box3.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Frustum.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Line3.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(e)}}),Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Matrix4.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Vector3).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,o)}}),Plane.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Quaternion.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ray.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Triangle,{barycoordFromPoint:function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(e,t,r,n)}}),Object.assign(Shape.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,e)}}),Object.assign(Vector2.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Vector4.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Object3D.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),PerspectiveCamera.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}}),Object.assign(BufferAttribute.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(BufferGeometry.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new BufferAttribute(arguments[1],arguments[2])))},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(InterleavedBuffer.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(WebGLRenderer.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?sRGBEncoding:LinearEncoding}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Audio.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new AudioLoader).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var GeometryUtils={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}ImageUtils.crossOrigin=void 0,ImageUtils.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new TextureLoader;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},ImageUtils.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new CubeTextureLoader;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze((_Object$freeze={__proto__:null},_defineProperty3(_Object$freeze,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze,"ACESFilmicToneMapping",ACESFilmicToneMapping),_defineProperty3(_Object$freeze,"AddEquation",AddEquation),_defineProperty3(_Object$freeze,"AddOperation",AddOperation),_defineProperty3(_Object$freeze,"AdditiveAnimationBlendMode",AdditiveAnimationBlendMode),_defineProperty3(_Object$freeze,"AdditiveBlending",AdditiveBlending),_defineProperty3(_Object$freeze,"AlphaFormat",AlphaFormat),_defineProperty3(_Object$freeze,"AlwaysDepth",AlwaysDepth),_defineProperty3(_Object$freeze,"AlwaysStencilFunc",AlwaysStencilFunc),_defineProperty3(_Object$freeze,"AmbientLight",AmbientLight),_defineProperty3(_Object$freeze,"AmbientLightProbe",AmbientLightProbe),_defineProperty3(_Object$freeze,"AnimationClip",AnimationClip),_defineProperty3(_Object$freeze,"AnimationLoader",AnimationLoader),_defineProperty3(_Object$freeze,"AnimationMixer",AnimationMixer),_defineProperty3(_Object$freeze,"AnimationObjectGroup",AnimationObjectGroup),_defineProperty3(_Object$freeze,"AnimationUtils",AnimationUtils),_defineProperty3(_Object$freeze,"ArcCurve",ArcCurve),_defineProperty3(_Object$freeze,"ArrayCamera",ArrayCamera),_defineProperty3(_Object$freeze,"ArrowHelper",ArrowHelper),_defineProperty3(_Object$freeze,"Audio",Audio),_defineProperty3(_Object$freeze,"AudioAnalyser",AudioAnalyser),_defineProperty3(_Object$freeze,"AudioContext",AudioContext),_defineProperty3(_Object$freeze,"AudioListener",AudioListener),_defineProperty3(_Object$freeze,"AudioLoader",AudioLoader),_defineProperty3(_Object$freeze,"AxesHelper",AxesHelper),_defineProperty3(_Object$freeze,"AxisHelper",AxisHelper),_defineProperty3(_Object$freeze,"BackSide",BackSide),_defineProperty3(_Object$freeze,"BasicDepthPacking",BasicDepthPacking),_defineProperty3(_Object$freeze,"BasicShadowMap",BasicShadowMap),_defineProperty3(_Object$freeze,"BinaryTextureLoader",BinaryTextureLoader),_defineProperty3(_Object$freeze,"Bone",Bone),_defineProperty3(_Object$freeze,"BooleanKeyframeTrack",BooleanKeyframeTrack),_defineProperty3(_Object$freeze,"BoundingBoxHelper",BoundingBoxHelper),_defineProperty3(_Object$freeze,"Box2",Box2),_defineProperty3(_Object$freeze,"Box3",Box3),_defineProperty3(_Object$freeze,"Box3Helper",Box3Helper),_defineProperty3(_Object$freeze,"BoxBufferGeometry",BoxBufferGeometry),_defineProperty3(_Object$freeze,"BoxGeometry",BoxGeometry),_defineProperty3(_Object$freeze,"BoxHelper",BoxHelper),_defineProperty3(_Object$freeze,"BufferAttribute",BufferAttribute),_defineProperty3(_Object$freeze,"BufferGeometry",BufferGeometry),_defineProperty3(_Object$freeze,"BufferGeometryLoader",BufferGeometryLoader),_defineProperty3(_Object$freeze,"ByteType",ByteType),_defineProperty3(_Object$freeze,"Cache",Cache),_defineProperty3(_Object$freeze,"Camera",Camera$1),_defineProperty3(_Object$freeze,"CameraHelper",CameraHelper),_defineProperty3(_Object$freeze,"CanvasRenderer",CanvasRenderer),_defineProperty3(_Object$freeze,"CanvasTexture",CanvasTexture),_defineProperty3(_Object$freeze,"CatmullRomCurve3",CatmullRomCurve3),_defineProperty3(_Object$freeze,"CineonToneMapping",CineonToneMapping),_defineProperty3(_Object$freeze,"CircleBufferGeometry",CircleBufferGeometry),_defineProperty3(_Object$freeze,"CircleGeometry",CircleGeometry),_defineProperty3(_Object$freeze,"ClampToEdgeWrapping",ClampToEdgeWrapping),_defineProperty3(_Object$freeze,"Clock",Clock),_defineProperty3(_Object$freeze,"ClosedSplineCurve3",ClosedSplineCurve3),_defineProperty3(_Object$freeze,"Color",Color),_defineProperty3(_Object$freeze,"ColorKeyframeTrack",ColorKeyframeTrack),_defineProperty3(_Object$freeze,"CompressedTexture",CompressedTexture),_defineProperty3(_Object$freeze,"CompressedTextureLoader",CompressedTextureLoader),_defineProperty3(_Object$freeze,"ConeBufferGeometry",ConeBufferGeometry),_defineProperty3(_Object$freeze,"ConeGeometry",ConeGeometry),_defineProperty3(_Object$freeze,"CubeCamera",CubeCamera),_defineProperty3(_Object$freeze,"CubeGeometry",BoxGeometry),_defineProperty3(_Object$freeze,"CubeReflectionMapping",CubeReflectionMapping),_defineProperty3(_Object$freeze,"CubeRefractionMapping",CubeRefractionMapping),_defineProperty3(_Object$freeze,"CubeTexture",CubeTexture),_defineProperty3(_Object$freeze,"CubeTextureLoader",CubeTextureLoader),_defineProperty3(_Object$freeze,"CubeUVReflectionMapping",CubeUVReflectionMapping),_defineProperty3(_Object$freeze,"CubeUVRefractionMapping",CubeUVRefractionMapping),_defineProperty3(_Object$freeze,"CubicBezierCurve",CubicBezierCurve),_defineProperty3(_Object$freeze,"CubicBezierCurve3",CubicBezierCurve3),_defineProperty3(_Object$freeze,"CubicInterpolant",CubicInterpolant),_defineProperty3(_Object$freeze,"CullFaceBack",CullFaceBack),_defineProperty3(_Object$freeze,"CullFaceFront",CullFaceFront),_defineProperty3(_Object$freeze,"CullFaceFrontBack",CullFaceFrontBack),_defineProperty3(_Object$freeze,"CullFaceNone",CullFaceNone),_defineProperty3(_Object$freeze,"Curve",Curve),_defineProperty3(_Object$freeze,"CurvePath",CurvePath),_defineProperty3(_Object$freeze,"CustomBlending",CustomBlending),_defineProperty3(_Object$freeze,"CylinderBufferGeometry",CylinderBufferGeometry),_defineProperty3(_Object$freeze,"CylinderGeometry",CylinderGeometry),_defineProperty3(_Object$freeze,"Cylindrical",Cylindrical),_defineProperty3(_Object$freeze,"DataTexture",DataTexture),_defineProperty3(_Object$freeze,"DataTexture2DArray",DataTexture2DArray),_defineProperty3(_Object$freeze,"DataTexture3D",DataTexture3D),_defineProperty3(_Object$freeze,"DataTextureLoader",DataTextureLoader),_defineProperty3(_Object$freeze,"DecrementStencilOp",DecrementStencilOp),_defineProperty3(_Object$freeze,"DecrementWrapStencilOp",DecrementWrapStencilOp),_defineProperty3(_Object$freeze,"DefaultLoadingManager",DefaultLoadingManager),_defineProperty3(_Object$freeze,"DepthFormat",DepthFormat),_defineProperty3(_Object$freeze,"DepthStencilFormat",DepthStencilFormat),_defineProperty3(_Object$freeze,"DepthTexture",DepthTexture),_defineProperty3(_Object$freeze,"DirectionalLight",DirectionalLight),_defineProperty3(_Object$freeze,"DirectionalLightHelper",DirectionalLightHelper),_defineProperty3(_Object$freeze,"DirectionalLightShadow",DirectionalLightShadow),_defineProperty3(_Object$freeze,"DiscreteInterpolant",DiscreteInterpolant),_defineProperty3(_Object$freeze,"DodecahedronBufferGeometry",DodecahedronBufferGeometry),_defineProperty3(_Object$freeze,"DodecahedronGeometry",DodecahedronGeometry),_defineProperty3(_Object$freeze,"DoubleSide",DoubleSide),_defineProperty3(_Object$freeze,"DstAlphaFactor",DstAlphaFactor),_defineProperty3(_Object$freeze,"DstColorFactor",DstColorFactor),_defineProperty3(_Object$freeze,"DynamicBufferAttribute",DynamicBufferAttribute),_defineProperty3(_Object$freeze,"DynamicCopyUsage",DynamicCopyUsage),_defineProperty3(_Object$freeze,"DynamicDrawUsage",DynamicDrawUsage),_defineProperty3(_Object$freeze,"DynamicReadUsage",DynamicReadUsage),_defineProperty3(_Object$freeze,"EdgesGeometry",EdgesGeometry),_defineProperty3(_Object$freeze,"EdgesHelper",EdgesHelper),_defineProperty3(_Object$freeze,"EllipseCurve",EllipseCurve),_defineProperty3(_Object$freeze,"EqualDepth",EqualDepth),_defineProperty3(_Object$freeze,"EqualStencilFunc",EqualStencilFunc),_defineProperty3(_Object$freeze,"EquirectangularReflectionMapping",EquirectangularReflectionMapping),_defineProperty3(_Object$freeze,"EquirectangularRefractionMapping",EquirectangularRefractionMapping),_defineProperty3(_Object$freeze,"Euler",Euler),_defineProperty3(_Object$freeze,"EventDispatcher",EventDispatcher),_defineProperty3(_Object$freeze,"ExtrudeBufferGeometry",ExtrudeBufferGeometry),_defineProperty3(_Object$freeze,"ExtrudeGeometry",ExtrudeGeometry),_defineProperty3(_Object$freeze,"Face3",Face3),_defineProperty3(_Object$freeze,"Face4",Face4),_defineProperty3(_Object$freeze,"FaceColors",FaceColors),_defineProperty3(_Object$freeze,"FileLoader",FileLoader),_defineProperty3(_Object$freeze,"FlatShading",FlatShading),_defineProperty3(_Object$freeze,"Float32Attribute",Float32Attribute),_defineProperty3(_Object$freeze,"Float32BufferAttribute",Float32BufferAttribute),_defineProperty3(_Object$freeze,"Float64Attribute",Float64Attribute),_defineProperty3(_Object$freeze,"Float64BufferAttribute",Float64BufferAttribute),_defineProperty3(_Object$freeze,"FloatType",FloatType),_defineProperty3(_Object$freeze,"Fog",Fog),_defineProperty3(_Object$freeze,"FogExp2",FogExp2),_defineProperty3(_Object$freeze,"Font",Font),_defineProperty3(_Object$freeze,"FontLoader",FontLoader),_defineProperty3(_Object$freeze,"FrontFaceDirectionCCW",FrontFaceDirectionCCW),_defineProperty3(_Object$freeze,"FrontFaceDirectionCW",FrontFaceDirectionCW),_defineProperty3(_Object$freeze,"FrontSide",FrontSide),_defineProperty3(_Object$freeze,"Frustum",Frustum),_defineProperty3(_Object$freeze,"GammaEncoding",GammaEncoding),_defineProperty3(_Object$freeze,"Geometry",Geometry),_defineProperty3(_Object$freeze,"GeometryUtils",GeometryUtils),_defineProperty3(_Object$freeze,"GreaterDepth",GreaterDepth),_defineProperty3(_Object$freeze,"GreaterEqualDepth",GreaterEqualDepth),_defineProperty3(_Object$freeze,"GreaterEqualStencilFunc",GreaterEqualStencilFunc),_defineProperty3(_Object$freeze,"GreaterStencilFunc",GreaterStencilFunc),_defineProperty3(_Object$freeze,"GridHelper",GridHelper),_defineProperty3(_Object$freeze,"Group",Group$1),_defineProperty3(_Object$freeze,"HalfFloatType",HalfFloatType),_defineProperty3(_Object$freeze,"HemisphereLight",HemisphereLight),_defineProperty3(_Object$freeze,"HemisphereLightHelper",HemisphereLightHelper),_defineProperty3(_Object$freeze,"HemisphereLightProbe",HemisphereLightProbe),_defineProperty3(_Object$freeze,"IcosahedronBufferGeometry",IcosahedronBufferGeometry),_defineProperty3(_Object$freeze,"IcosahedronGeometry",IcosahedronGeometry),_defineProperty3(_Object$freeze,"ImageBitmapLoader",ImageBitmapLoader),_defineProperty3(_Object$freeze,"ImageLoader",ImageLoader),_defineProperty3(_Object$freeze,"ImageUtils",ImageUtils),_defineProperty3(_Object$freeze,"ImmediateRenderObject",ImmediateRenderObject),_defineProperty3(_Object$freeze,"IncrementStencilOp",IncrementStencilOp),_defineProperty3(_Object$freeze,"IncrementWrapStencilOp",IncrementWrapStencilOp),_defineProperty3(_Object$freeze,"InstancedBufferAttribute",InstancedBufferAttribute),_defineProperty3(_Object$freeze,"InstancedBufferGeometry",InstancedBufferGeometry),_defineProperty3(_Object$freeze,"InstancedInterleavedBuffer",InstancedInterleavedBuffer),_defineProperty3(_Object$freeze,"InstancedMesh",InstancedMesh),_defineProperty3(_Object$freeze,"Int16Attribute",Int16Attribute),_defineProperty3(_Object$freeze,"Int16BufferAttribute",Int16BufferAttribute),_defineProperty3(_Object$freeze,"Int32Attribute",Int32Attribute),_defineProperty3(_Object$freeze,"Int32BufferAttribute",Int32BufferAttribute),_defineProperty3(_Object$freeze,"Int8Attribute",Int8Attribute),_defineProperty3(_Object$freeze,"Int8BufferAttribute",Int8BufferAttribute),_defineProperty3(_Object$freeze,"IntType",IntType),_defineProperty3(_Object$freeze,"InterleavedBuffer",InterleavedBuffer),_defineProperty3(_Object$freeze,"InterleavedBufferAttribute",InterleavedBufferAttribute),_defineProperty3(_Object$freeze,"Interpolant",Interpolant),_defineProperty3(_Object$freeze,"InterpolateDiscrete",InterpolateDiscrete),_defineProperty3(_Object$freeze,"InterpolateLinear",InterpolateLinear),_defineProperty3(_Object$freeze,"InterpolateSmooth",InterpolateSmooth),_defineProperty3(_Object$freeze,"InvertStencilOp",InvertStencilOp),_defineProperty3(_Object$freeze,"JSONLoader",JSONLoader),_defineProperty3(_Object$freeze,"KeepStencilOp",KeepStencilOp),_defineProperty3(_Object$freeze,"KeyframeTrack",KeyframeTrack),_defineProperty3(_Object$freeze,"LOD",LOD),_defineProperty3(_Object$freeze,"LatheBufferGeometry",LatheBufferGeometry),_defineProperty3(_Object$freeze,"LatheGeometry",LatheGeometry),_defineProperty3(_Object$freeze,"Layers",Layers),_defineProperty3(_Object$freeze,"LensFlare",LensFlare),_defineProperty3(_Object$freeze,"LessDepth",LessDepth),_defineProperty3(_Object$freeze,"LessEqualDepth",LessEqualDepth),_defineProperty3(_Object$freeze,"LessEqualStencilFunc",LessEqualStencilFunc),_defineProperty3(_Object$freeze,"LessStencilFunc",LessStencilFunc),_defineProperty3(_Object$freeze,"Light",Light),_defineProperty3(_Object$freeze,"LightProbe",LightProbe),_defineProperty3(_Object$freeze,"LightShadow",LightShadow),_defineProperty3(_Object$freeze,"Line",Line),_defineProperty3(_Object$freeze,"Line3",Line3),_defineProperty3(_Object$freeze,"LineBasicMaterial",LineBasicMaterial),_defineProperty3(_Object$freeze,"LineCurve",LineCurve),_defineProperty3(_Object$freeze,"LineCurve3",LineCurve3),_defineProperty3(_Object$freeze,"LineDashedMaterial",LineDashedMaterial),_defineProperty3(_Object$freeze,"LineLoop",LineLoop),_defineProperty3(_Object$freeze,"LinePieces",LinePieces),_defineProperty3(_Object$freeze,"LineSegments",LineSegments),_defineProperty3(_Object$freeze,"LineStrip",LineStrip),_defineProperty3(_Object$freeze,"LinearEncoding",LinearEncoding),_defineProperty3(_Object$freeze,"LinearFilter",LinearFilter),_defineProperty3(_Object$freeze,"LinearInterpolant",LinearInterpolant),_defineProperty3(_Object$freeze,"LinearMipMapLinearFilter",LinearMipMapLinearFilter),_defineProperty3(_Object$freeze,"LinearMipMapNearestFilter",LinearMipMapNearestFilter),_defineProperty3(_Object$freeze,"LinearMipmapLinearFilter",LinearMipmapLinearFilter),_defineProperty3(_Object$freeze,"LinearMipmapNearestFilter",LinearMipmapNearestFilter),_defineProperty3(_Object$freeze,"LinearToneMapping",LinearToneMapping),_defineProperty3(_Object$freeze,"Loader",Loader),_defineProperty3(_Object$freeze,"LoaderUtils",LoaderUtils),_defineProperty3(_Object$freeze,"LoadingManager",LoadingManager),_defineProperty3(_Object$freeze,"LogLuvEncoding",LogLuvEncoding),_defineProperty3(_Object$freeze,"LoopOnce",LoopOnce),_defineProperty3(_Object$freeze,"LoopPingPong",LoopPingPong),_defineProperty3(_Object$freeze,"LoopRepeat",LoopRepeat),_defineProperty3(_Object$freeze,"LuminanceAlphaFormat",LuminanceAlphaFormat),_defineProperty3(_Object$freeze,"LuminanceFormat",LuminanceFormat),_defineProperty3(_Object$freeze,"MOUSE",MOUSE),_defineProperty3(_Object$freeze,"Material",Material),_defineProperty3(_Object$freeze,"MaterialLoader",MaterialLoader),_defineProperty3(_Object$freeze,"Math",MathUtils),_defineProperty3(_Object$freeze,"MathUtils",MathUtils),_defineProperty3(_Object$freeze,"Matrix3",Matrix3),_defineProperty3(_Object$freeze,"Matrix4",Matrix4),_defineProperty3(_Object$freeze,"MaxEquation",MaxEquation),_defineProperty3(_Object$freeze,"Mesh",Mesh),_defineProperty3(_Object$freeze,"MeshBasicMaterial",MeshBasicMaterial),_defineProperty3(_Object$freeze,"MeshDepthMaterial",MeshDepthMaterial),_defineProperty3(_Object$freeze,"MeshDistanceMaterial",MeshDistanceMaterial),_defineProperty3(_Object$freeze,"MeshFaceMaterial",MeshFaceMaterial),_defineProperty3(_Object$freeze,"MeshLambertMaterial",MeshLambertMaterial),_defineProperty3(_Object$freeze,"MeshMatcapMaterial",MeshMatcapMaterial),_defineProperty3(_Object$freeze,"MeshNormalMaterial",MeshNormalMaterial),_defineProperty3(_Object$freeze,"MeshPhongMaterial",MeshPhongMaterial),_defineProperty3(_Object$freeze,"MeshPhysicalMaterial",MeshPhysicalMaterial),_defineProperty3(_Object$freeze,"MeshStandardMaterial",MeshStandardMaterial),_defineProperty3(_Object$freeze,"MeshToonMaterial",MeshToonMaterial),_defineProperty3(_Object$freeze,"MinEquation",MinEquation),_defineProperty3(_Object$freeze,"MirroredRepeatWrapping",MirroredRepeatWrapping),_defineProperty3(_Object$freeze,"MixOperation",MixOperation),_defineProperty3(_Object$freeze,"MultiMaterial",MultiMaterial),_defineProperty3(_Object$freeze,"MultiplyBlending",MultiplyBlending),_defineProperty3(_Object$freeze,"MultiplyOperation",MultiplyOperation),_defineProperty3(_Object$freeze,"NearestFilter",NearestFilter),_defineProperty3(_Object$freeze,"NearestMipMapLinearFilter",NearestMipMapLinearFilter),_defineProperty3(_Object$freeze,"NearestMipMapNearestFilter",NearestMipMapNearestFilter),_defineProperty3(_Object$freeze,"NearestMipmapLinearFilter",NearestMipmapLinearFilter),_defineProperty3(_Object$freeze,"NearestMipmapNearestFilter",NearestMipmapNearestFilter),_defineProperty3(_Object$freeze,"NeverDepth",NeverDepth),_defineProperty3(_Object$freeze,"NeverStencilFunc",NeverStencilFunc),_defineProperty3(_Object$freeze,"NoBlending",NoBlending),_defineProperty3(_Object$freeze,"NoColors",NoColors),_defineProperty3(_Object$freeze,"NoToneMapping",NoToneMapping),_defineProperty3(_Object$freeze,"NormalAnimationBlendMode",NormalAnimationBlendMode),_defineProperty3(_Object$freeze,"NormalBlending",NormalBlending),_defineProperty3(_Object$freeze,"NotEqualDepth",NotEqualDepth),_defineProperty3(_Object$freeze,"NotEqualStencilFunc",NotEqualStencilFunc),_defineProperty3(_Object$freeze,"NumberKeyframeTrack",NumberKeyframeTrack),_defineProperty3(_Object$freeze,"Object3D",Object3D),_defineProperty3(_Object$freeze,"ObjectLoader",ObjectLoader),_defineProperty3(_Object$freeze,"ObjectSpaceNormalMap",ObjectSpaceNormalMap),_defineProperty3(_Object$freeze,"OctahedronBufferGeometry",OctahedronBufferGeometry),_defineProperty3(_Object$freeze,"OctahedronGeometry",OctahedronGeometry),_defineProperty3(_Object$freeze,"OneFactor",OneFactor),_defineProperty3(_Object$freeze,"OneMinusDstAlphaFactor",OneMinusDstAlphaFactor),_defineProperty3(_Object$freeze,"OneMinusDstColorFactor",OneMinusDstColorFactor),_defineProperty3(_Object$freeze,"OneMinusSrcAlphaFactor",OneMinusSrcAlphaFactor),_defineProperty3(_Object$freeze,"OneMinusSrcColorFactor",OneMinusSrcColorFactor),_defineProperty3(_Object$freeze,"OrthographicCamera",OrthographicCamera),_defineProperty3(_Object$freeze,"PCFShadowMap",PCFShadowMap),_defineProperty3(_Object$freeze,"PCFSoftShadowMap",PCFSoftShadowMap),_defineProperty3(_Object$freeze,"PMREMGenerator",PMREMGenerator),_defineProperty3(_Object$freeze,"ParametricBufferGeometry",ParametricBufferGeometry),_defineProperty3(_Object$freeze,"ParametricGeometry",ParametricGeometry),_defineProperty3(_Object$freeze,"Particle",Particle),_defineProperty3(_Object$freeze,"ParticleBasicMaterial",ParticleBasicMaterial),_defineProperty3(_Object$freeze,"ParticleSystem",ParticleSystem),_defineProperty3(_Object$freeze,"ParticleSystemMaterial",ParticleSystemMaterial),_defineProperty3(_Object$freeze,"Path",Path),_defineProperty3(_Object$freeze,"PerspectiveCamera",PerspectiveCamera),_defineProperty3(_Object$freeze,"Plane",Plane),_defineProperty3(_Object$freeze,"PlaneBufferGeometry",PlaneBufferGeometry),_defineProperty3(_Object$freeze,"PlaneGeometry",PlaneGeometry),_defineProperty3(_Object$freeze,"PlaneHelper",PlaneHelper),_defineProperty3(_Object$freeze,"PointCloud",PointCloud),_defineProperty3(_Object$freeze,"PointCloudMaterial",PointCloudMaterial),_defineProperty3(_Object$freeze,"PointLight",PointLight),_defineProperty3(_Object$freeze,"PointLightHelper",PointLightHelper),_defineProperty3(_Object$freeze,"Points",Points),_defineProperty3(_Object$freeze,"PointsMaterial",PointsMaterial),_defineProperty3(_Object$freeze,"PolarGridHelper",PolarGridHelper),_defineProperty3(_Object$freeze,"PolyhedronBufferGeometry",PolyhedronBufferGeometry),_defineProperty3(_Object$freeze,"PolyhedronGeometry",PolyhedronGeometry),_defineProperty3(_Object$freeze,"PositionalAudio",PositionalAudio),_defineProperty3(_Object$freeze,"PropertyBinding",PropertyBinding),_defineProperty3(_Object$freeze,"PropertyMixer",PropertyMixer),_defineProperty3(_Object$freeze,"QuadraticBezierCurve",QuadraticBezierCurve),_defineProperty3(_Object$freeze,"QuadraticBezierCurve3",QuadraticBezierCurve3),_defineProperty3(_Object$freeze,"Quaternion",Quaternion),_defineProperty3(_Object$freeze,"QuaternionKeyframeTrack",QuaternionKeyframeTrack),_defineProperty3(_Object$freeze,"QuaternionLinearInterpolant",QuaternionLinearInterpolant),_defineProperty3(_Object$freeze,"REVISION",REVISION),_defineProperty3(_Object$freeze,"RGBADepthPacking",RGBADepthPacking),_defineProperty3(_Object$freeze,"RGBAFormat",RGBAFormat),_defineProperty3(_Object$freeze,"RGBAIntegerFormat",RGBAIntegerFormat),_defineProperty3(_Object$freeze,"RGBA_ASTC_10x10_Format",RGBA_ASTC_10x10_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_10x5_Format",RGBA_ASTC_10x5_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_10x6_Format",RGBA_ASTC_10x6_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_10x8_Format",RGBA_ASTC_10x8_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_12x10_Format",RGBA_ASTC_12x10_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_12x12_Format",RGBA_ASTC_12x12_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_4x4_Format",RGBA_ASTC_4x4_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_5x4_Format",RGBA_ASTC_5x4_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_5x5_Format",RGBA_ASTC_5x5_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_6x5_Format",RGBA_ASTC_6x5_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_6x6_Format",RGBA_ASTC_6x6_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_8x5_Format",RGBA_ASTC_8x5_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_8x6_Format",RGBA_ASTC_8x6_Format),_defineProperty3(_Object$freeze,"RGBA_ASTC_8x8_Format",RGBA_ASTC_8x8_Format),_defineProperty3(_Object$freeze,"RGBA_BPTC_Format",RGBA_BPTC_Format),_defineProperty3(_Object$freeze,"RGBA_ETC2_EAC_Format",RGBA_ETC2_EAC_Format),_defineProperty3(_Object$freeze,"RGBA_PVRTC_2BPPV1_Format",RGBA_PVRTC_2BPPV1_Format),_defineProperty3(_Object$freeze,"RGBA_PVRTC_4BPPV1_Format",RGBA_PVRTC_4BPPV1_Format),_defineProperty3(_Object$freeze,"RGBA_S3TC_DXT1_Format",RGBA_S3TC_DXT1_Format),_defineProperty3(_Object$freeze,"RGBA_S3TC_DXT3_Format",RGBA_S3TC_DXT3_Format),_defineProperty3(_Object$freeze,"RGBA_S3TC_DXT5_Format",RGBA_S3TC_DXT5_Format),_defineProperty3(_Object$freeze,"RGBDEncoding",RGBDEncoding),_defineProperty3(_Object$freeze,"RGBEEncoding",RGBEEncoding),_defineProperty3(_Object$freeze,"RGBEFormat",RGBEFormat),_defineProperty3(_Object$freeze,"RGBFormat",RGBFormat),_defineProperty3(_Object$freeze,"RGBIntegerFormat",RGBIntegerFormat),_defineProperty3(_Object$freeze,"RGBM16Encoding",RGBM16Encoding),_defineProperty3(_Object$freeze,"RGBM7Encoding",RGBM7Encoding),_defineProperty3(_Object$freeze,"RGB_ETC1_Format",RGB_ETC1_Format),_defineProperty3(_Object$freeze,"RGB_ETC2_Format",RGB_ETC2_Format),_defineProperty3(_Object$freeze,"RGB_PVRTC_2BPPV1_Format",RGB_PVRTC_2BPPV1_Format),_defineProperty3(_Object$freeze,"RGB_PVRTC_4BPPV1_Format",RGB_PVRTC_4BPPV1_Format),_defineProperty3(_Object$freeze,"RGB_S3TC_DXT1_Format",RGB_S3TC_DXT1_Format),_defineProperty3(_Object$freeze,"RGFormat",RGFormat),_defineProperty3(_Object$freeze,"RGIntegerFormat",RGIntegerFormat),_defineProperty3(_Object$freeze,"RawShaderMaterial",RawShaderMaterial),_defineProperty3(_Object$freeze,"Ray",Ray),_defineProperty3(_Object$freeze,"Raycaster",Raycaster),_defineProperty3(_Object$freeze,"RectAreaLight",RectAreaLight),_defineProperty3(_Object$freeze,"RedFormat",RedFormat),_defineProperty3(_Object$freeze,"RedIntegerFormat",RedIntegerFormat),_defineProperty3(_Object$freeze,"ReinhardToneMapping",ReinhardToneMapping),_defineProperty3(_Object$freeze,"RepeatWrapping",RepeatWrapping),_defineProperty3(_Object$freeze,"ReplaceStencilOp",ReplaceStencilOp),_defineProperty3(_Object$freeze,"ReverseSubtractEquation",ReverseSubtractEquation),_defineProperty3(_Object$freeze,"RingBufferGeometry",RingBufferGeometry),_defineProperty3(_Object$freeze,"RingGeometry",RingGeometry),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_10x10_Format",SRGB8_ALPHA8_ASTC_10x10_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_10x5_Format",SRGB8_ALPHA8_ASTC_10x5_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_10x6_Format",SRGB8_ALPHA8_ASTC_10x6_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_10x8_Format",SRGB8_ALPHA8_ASTC_10x8_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_12x10_Format",SRGB8_ALPHA8_ASTC_12x10_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_12x12_Format",SRGB8_ALPHA8_ASTC_12x12_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_4x4_Format",SRGB8_ALPHA8_ASTC_4x4_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_5x4_Format",SRGB8_ALPHA8_ASTC_5x4_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_5x5_Format",SRGB8_ALPHA8_ASTC_5x5_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_6x5_Format",SRGB8_ALPHA8_ASTC_6x5_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_6x6_Format",SRGB8_ALPHA8_ASTC_6x6_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_8x5_Format",SRGB8_ALPHA8_ASTC_8x5_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_8x6_Format",SRGB8_ALPHA8_ASTC_8x6_Format),_defineProperty3(_Object$freeze,"SRGB8_ALPHA8_ASTC_8x8_Format",SRGB8_ALPHA8_ASTC_8x8_Format),_defineProperty3(_Object$freeze,"Scene",Scene),_defineProperty3(_Object$freeze,"SceneUtils",SceneUtils),_defineProperty3(_Object$freeze,"ShaderChunk",ShaderChunk),_defineProperty3(_Object$freeze,"ShaderLib",ShaderLib),_defineProperty3(_Object$freeze,"ShaderMaterial",ShaderMaterial),_defineProperty3(_Object$freeze,"ShadowMaterial",ShadowMaterial),_defineProperty3(_Object$freeze,"Shape",Shape),_defineProperty3(_Object$freeze,"ShapeBufferGeometry",ShapeBufferGeometry),_defineProperty3(_Object$freeze,"ShapeGeometry",ShapeGeometry),_defineProperty3(_Object$freeze,"ShapePath",ShapePath),_defineProperty3(_Object$freeze,"ShapeUtils",ShapeUtils),_defineProperty3(_Object$freeze,"ShortType",ShortType),_defineProperty3(_Object$freeze,"Skeleton",Skeleton),_defineProperty3(_Object$freeze,"SkeletonHelper",SkeletonHelper),_defineProperty3(_Object$freeze,"SkinnedMesh",SkinnedMesh),_defineProperty3(_Object$freeze,"SmoothShading",SmoothShading),_defineProperty3(_Object$freeze,"Sphere",Sphere),_defineProperty3(_Object$freeze,"SphereBufferGeometry",SphereBufferGeometry),_defineProperty3(_Object$freeze,"SphereGeometry",SphereGeometry),_defineProperty3(_Object$freeze,"Spherical",Spherical),_defineProperty3(_Object$freeze,"SphericalHarmonics3",SphericalHarmonics3),_defineProperty3(_Object$freeze,"SphericalReflectionMapping",SphericalReflectionMapping),_defineProperty3(_Object$freeze,"Spline",Spline),_defineProperty3(_Object$freeze,"SplineCurve",SplineCurve),_defineProperty3(_Object$freeze,"SplineCurve3",SplineCurve3),_defineProperty3(_Object$freeze,"SpotLight",SpotLight),_defineProperty3(_Object$freeze,"SpotLightHelper",SpotLightHelper),_defineProperty3(_Object$freeze,"SpotLightShadow",SpotLightShadow),_defineProperty3(_Object$freeze,"Sprite",Sprite),_defineProperty3(_Object$freeze,"SpriteMaterial",SpriteMaterial),_defineProperty3(_Object$freeze,"SrcAlphaFactor",SrcAlphaFactor),_defineProperty3(_Object$freeze,"SrcAlphaSaturateFactor",SrcAlphaSaturateFactor),_defineProperty3(_Object$freeze,"SrcColorFactor",SrcColorFactor),_defineProperty3(_Object$freeze,"StaticCopyUsage",StaticCopyUsage),_defineProperty3(_Object$freeze,"StaticDrawUsage",StaticDrawUsage),_defineProperty3(_Object$freeze,"StaticReadUsage",StaticReadUsage),_defineProperty3(_Object$freeze,"StereoCamera",StereoCamera),_defineProperty3(_Object$freeze,"StreamCopyUsage",StreamCopyUsage),_defineProperty3(_Object$freeze,"StreamDrawUsage",StreamDrawUsage),_defineProperty3(_Object$freeze,"StreamReadUsage",StreamReadUsage),_defineProperty3(_Object$freeze,"StringKeyframeTrack",StringKeyframeTrack),_defineProperty3(_Object$freeze,"SubtractEquation",SubtractEquation),_defineProperty3(_Object$freeze,"SubtractiveBlending",SubtractiveBlending),_defineProperty3(_Object$freeze,"TOUCH",TOUCH),_defineProperty3(_Object$freeze,"TangentSpaceNormalMap",TangentSpaceNormalMap),_defineProperty3(_Object$freeze,"TetrahedronBufferGeometry",TetrahedronBufferGeometry),_defineProperty3(_Object$freeze,"TetrahedronGeometry",TetrahedronGeometry),_defineProperty3(_Object$freeze,"TextBufferGeometry",TextBufferGeometry),_defineProperty3(_Object$freeze,"TextGeometry",TextGeometry),_defineProperty3(_Object$freeze,"Texture",Texture),_defineProperty3(_Object$freeze,"TextureLoader",TextureLoader),_defineProperty3(_Object$freeze,"TorusBufferGeometry",TorusBufferGeometry),_defineProperty3(_Object$freeze,"TorusGeometry",TorusGeometry),_defineProperty3(_Object$freeze,"TorusKnotBufferGeometry",TorusKnotBufferGeometry),_defineProperty3(_Object$freeze,"TorusKnotGeometry",TorusKnotGeometry),_defineProperty3(_Object$freeze,"Triangle",Triangle),_defineProperty3(_Object$freeze,"TriangleFanDrawMode",TriangleFanDrawMode),_defineProperty3(_Object$freeze,"TriangleStripDrawMode",TriangleStripDrawMode),_defineProperty3(_Object$freeze,"TrianglesDrawMode",TrianglesDrawMode),_defineProperty3(_Object$freeze,"TubeBufferGeometry",TubeBufferGeometry),_defineProperty3(_Object$freeze,"TubeGeometry",TubeGeometry),_defineProperty3(_Object$freeze,"UVMapping",UVMapping),_defineProperty3(_Object$freeze,"Uint16Attribute",Uint16Attribute),_defineProperty3(_Object$freeze,"Uint16BufferAttribute",Uint16BufferAttribute),_defineProperty3(_Object$freeze,"Uint32Attribute",Uint32Attribute),_defineProperty3(_Object$freeze,"Uint32BufferAttribute",Uint32BufferAttribute),_defineProperty3(_Object$freeze,"Uint8Attribute",Uint8Attribute),_defineProperty3(_Object$freeze,"Uint8BufferAttribute",Uint8BufferAttribute),_defineProperty3(_Object$freeze,"Uint8ClampedAttribute",Uint8ClampedAttribute),_defineProperty3(_Object$freeze,"Uint8ClampedBufferAttribute",Uint8ClampedBufferAttribute),_defineProperty3(_Object$freeze,"Uncharted2ToneMapping",Uncharted2ToneMapping),_defineProperty3(_Object$freeze,"Uniform",Uniform),_defineProperty3(_Object$freeze,"UniformsLib",UniformsLib),_defineProperty3(_Object$freeze,"UniformsUtils",UniformsUtils),_defineProperty3(_Object$freeze,"UnsignedByteType",UnsignedByteType),_defineProperty3(_Object$freeze,"UnsignedInt248Type",UnsignedInt248Type),_defineProperty3(_Object$freeze,"UnsignedIntType",UnsignedIntType),_defineProperty3(_Object$freeze,"UnsignedShort4444Type",UnsignedShort4444Type),_defineProperty3(_Object$freeze,"UnsignedShort5551Type",UnsignedShort5551Type),_defineProperty3(_Object$freeze,"UnsignedShort565Type",UnsignedShort565Type),_defineProperty3(_Object$freeze,"UnsignedShortType",UnsignedShortType),_defineProperty3(_Object$freeze,"VSMShadowMap",VSMShadowMap),_defineProperty3(_Object$freeze,"Vector2",Vector2),_defineProperty3(_Object$freeze,"Vector3",Vector3),_defineProperty3(_Object$freeze,"Vector4",Vector4),_defineProperty3(_Object$freeze,"VectorKeyframeTrack",VectorKeyframeTrack),_defineProperty3(_Object$freeze,"Vertex",Vertex),_defineProperty3(_Object$freeze,"VertexColors",VertexColors),_defineProperty3(_Object$freeze,"VideoTexture",VideoTexture),_defineProperty3(_Object$freeze,"WebGLCubeRenderTarget",WebGLCubeRenderTarget),_defineProperty3(_Object$freeze,"WebGLMultisampleRenderTarget",WebGLMultisampleRenderTarget),_defineProperty3(_Object$freeze,"WebGLRenderTarget",WebGLRenderTarget),_defineProperty3(_Object$freeze,"WebGLRenderTargetCube",WebGLRenderTargetCube),_defineProperty3(_Object$freeze,"WebGLRenderer",WebGLRenderer),_defineProperty3(_Object$freeze,"WebGLUtils",WebGLUtils),_defineProperty3(_Object$freeze,"WireframeGeometry",WireframeGeometry),_defineProperty3(_Object$freeze,"WireframeHelper",WireframeHelper),_defineProperty3(_Object$freeze,"WrapAroundEnding",WrapAroundEnding),_defineProperty3(_Object$freeze,"XHRLoader",XHRLoader),_defineProperty3(_Object$freeze,"ZeroCurvatureEnding",ZeroCurvatureEnding),_defineProperty3(_Object$freeze,"ZeroFactor",ZeroFactor),_defineProperty3(_Object$freeze,"ZeroSlopeEnding",ZeroSlopeEnding),_defineProperty3(_Object$freeze,"ZeroStencilOp",ZeroStencilOp),_defineProperty3(_Object$freeze,"sRGBEncoding",sRGBEncoding),_Object$freeze)),require$$4=getAugmentedNamespace(three_module),five={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(s){o&&(o=!1,a(s))}}))}var base64$1={};!function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,n){for(var i,o=null,a=[],s=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[s++]=r[u>>2],i=(3&u)<<4,c=1;break;case 1:a[s++]=r[i|u>>4],i=(15&u)<<2,c=2;break;case 2:a[s++]=r[i|u>>6],a[s++]=r[63&u],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[i],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,r){for(var i,a=r,s=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(o);switch(s){case 0:i=u,s=1;break;case 1:t[r++]=i<<2|(48&u)>>4,i=u,s=2;break;case 2:t[r++]=(15&i)<<4|(60&u)>>2,i=u,s=3;break;case 3:t[r++]=(3&i)<<6|u,s=0}}if(1===s)throw Error(o);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,i,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+o;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};!function(e){var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}}(utf8$2);var pool_1=pool;function pool(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits$2(r,n)},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$5.isString(e)){if(!util$5.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$5.Long.fromString(e)}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero},LongBits$2.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits$2.prototype.toLong=function(e){return util$5.Long?new util$5.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt$2=String.prototype.charCodeAt;LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt$2.call(e,0)|charCodeAt$2.call(e,1)<<8|charCodeAt$2.call(e,2)<<16|charCodeAt$2.call(e,3)<<24)>>>0,(charCodeAt$2.call(e,4)|charCodeAt$2.call(e,5)<<8|charCodeAt$2.call(e,6)<<16|charCodeAt$2.call(e,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},function(t){var r=t;function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=aspromise,r.base64=base64$1,r.EventEmitter=eventemitter,r.float=float,r.inquire=inquire_1,r.utf8=utf8$2,r.pool=pool_1,r.LongBits=longbits,r.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===_typeof2(e)},r.isset=r.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==_typeof2(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},r.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$3(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$6=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$6(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$6(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$5=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create$5(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create$5(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(s){return a.emit("error",s,t),void setTimeout((function(){o(s)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(e){e.Service=service}(rpc);var roots={};!function(e){var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=r,r()}(indexMinimal);var minimal=indexMinimal,parseWork,Five;exports("t",parseWork),exports("F",Five),Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$4,t$3=tslib.exports,i$2=minimal;function n$3(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');
/**
			 * @license
			 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
			 *
			 * Copyright (c) 2010-2021 Kenji Urushima
			 *
			 * Permission is hereby granted, free of charge, to any person obtaining a copy
			 * of this software and associated documentation files (the "Software"), to deal
			 * in the Software without restriction, including without limitation the rights
			 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
			 * copies of the Software, and to permit persons to whom the Software is
			 * furnished to do so, subject to the following conditions:
			 *
			 * The above copyright notice and this permission notice shall be included in
			 * all copies or substantial portions of the Software.
			 *
			 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
			 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
			 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
			 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
			 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
			 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
			 * THE SOFTWARE.
			 *
			 * LICENSE: MIT License
			 */
/**
			 * @license
			 * RSA and ECC in JavaScript
			 *
			 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
			 *
			 * Permission is hereby granted, free of charge, to any person obtaining
			 * a copy of this software and associated documentation files (the
			 * "Software"), to deal in the Software without restriction, including
			 * without limitation the rights to use, copy, modify, merge, publish,
			 * distribute, sublicense, and/or sell copies of the Software, and to
			 * permit persons to whom the Software is furnished to do so, subject to
			 * the following conditions:
			 *
			 * The above copyright notice and this permission notice shall be
			 * included in all copies or substantial portions of the Software.
			 *
			 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
			 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
			 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
			 *
			 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
			 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
			 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
			 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
			 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
			 *
			 * In addition, the following condition applies:
			 *
			 * All redistributions must retain an intact copy of this copyright notice
			 * and disclaimer.
			 *
			 * http://www-cs-students.stanford.edu/~tjw/jsbn/
			 * LICENSE: BSD License
			 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
			 */
/**
			 * @license
			 * CryptoJS
			 *
			 * Copyright (c) 2009-2013 Jeff Mott
			 *
			 * Permission is hereby granted, free of charge, to any person obtaining
			 * a copy of this software and associated documentation files (the
			 * "Software"), to deal in the Software without restriction, including
			 * without limitation the rights to use, copy, modify, merge, publish,
			 * distribute, sublicense, and/or sell copies of the Software, and to
			 * permit persons to whom the Software is furnished to do so, subject to
			 * the following conditions:
			 *
			 * The above copyright notice and this permission notice shall be
			 * included in all copies or substantial portions of the Software.
			 *
			 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
			 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
			 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
			 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
			 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
			 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
			 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
			 *
			 * https://code.google.com/p/crypto-js/wiki/License
			 * PART: ext/cryptojs
			 */var a$2,u$2={},c$2={},l$3=l$3||function(e,t){var r={},n=r.lib={},i=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new o.init(r,t)}}),a=r.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,i);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(n,l);var f=n.splice(0,c);r.sigBytes-=u}return new o.init(f,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new f.HMAC.init(e,r).finalize(t)}}});var f=r.algo={};return r}(Math);function h$2(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function d$1(){return new h$2(null)}!function(e){for(var t=l$3,r=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,o=[],a=[],s=function(e){return 4294967296*(e-(0|e))|0},c=2,u=0;64>u;){var l;e:{l=c;for(var f=e.sqrt(l),h=2;h<=f;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(8>u&&(o[u]=s(e.pow(c,.5))),a[u]=s(e.pow(c,1/3)),u++),c++}var p=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],c=r[4],u=r[5],l=r[6],f=r[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],m=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[h-16]}d=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+a[h]+p[h],m=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&o^i&o),f=l,l=u,u=c,c=s+d|0,s=o,o=i,i=n,n=d+m|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0,r[5]=r[5]+u|0,r[6]=r[6]+l|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=n._createHelper(i),t.HmacSHA256=n._createHmacHelper(i)}(Math),l$3.lib.Cipher||function(e){var t=(p=l$3).lib,r=t.Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,o=p.enc.Base64,a=p.algo.EvpKDF,s=t.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?d:h).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?d:h).decrypt(e,t,r,n)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},u=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},l=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;u.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),l.Decryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),u.call(this,e,t,n),this._prevBlock=i}}),c=c.CBC=l,l=(p.pad={}).Pkcs7={pad:function(e,t){for(var r,i=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);r=n.create(o,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:c,padding:l}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(c=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){var t=(e=o.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,f.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,r,i){return i||(i=n.random(8)),e=a.create({keySize:t+r}).compute(e,i),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,f.create({key:e,iv:r,salt:i})}},d=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=h.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,h.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=l$3,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],a=[],s=[],c=[],u=[],l=[],f=[],h=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;var m=0,g=0;for(d=0;256>d;d++){var v=(v=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&v^99;n[m]=v,i[v]=m;var y=p[m],b=p[y],_=p[b],A=257*p[v]^16843008*v;o[m]=A<<24|A>>>8,a[m]=A<<16|A>>>16,s[m]=A<<8|A>>>24,c[m]=A,A=16843009*_^65537*b^257*y^16843008*m,u[v]=A<<24|A>>>8,l[v]=A<<16|A>>>16,f[v]=A<<8|A>>>24,h[v]=A,m?(m=y^p[p[p[_^y]]],g^=p[p[g]]):m=g=1}var M=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],o=0;o<r;o++)if(o<t)i[o]=e[o];else{var a=i[o-1];o%t?6<t&&4==o%t&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=M[o/t|0]<<24),i[o]=i[o-t]^a}for(e=this._invKeySchedule=[],t=0;t<r;t++)o=r-t,a=t%4?i[o]:i[o-4],e[t]=4>t||4>=o?a:u[n[a>>>24]]^l[n[a>>>16&255]]^f[n[a>>>8&255]]^h[n[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,s,c,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,l,f,h,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var c=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],f=e[t+2]^r[2],h=e[t+3]^r[3],p=4,d=1;d<c;d++){var m=n[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^r[p++],g=n[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&u]^r[p++],v=n[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^a[255&l]^r[p++];h=n[h>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^r[p++],u=m,l=g,f=v}m=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^r[p++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^r[p++],v=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^r[p++],h=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^r[p++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=h},keySize:8}),e.AES=t._createHelper(r)}(),
/*!
			Copyright (c) 2011, Yahoo! Inc. All rights reserved.
			Code licensed under the BSD License:
			http://developer.yahoo.com/yui/license.html
			version: 2.9.0
			*/
c$2.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var i;for(i in r)e.prototype[i]=r[i];var o=function(){},a=["toString","valueOf"];try{/MSIE/.test("undefined"!=typeof navigator?navigator.userAgent:"node")&&(o=function(e,t){for(i=0;i<a.length;i+=1){var r=a[i],n=t[r];"function"==typeof n&&n!=Object.prototype[r]&&(e[r]=n)}})}catch(e){}o(e.prototype,r)}}},"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(h$2.prototype.am=function(e,t,r,n,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=s*c+u*a;i=((c=a*c+((32767&l)<<15)+r[n]+(1073741823&i))>>>30)+(l>>>15)+s*u+(i>>>30),r[n++]=1073741823&c}return i},a$2=30):"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(h$2.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i},a$2=26):(h$2.prototype.am=function(e,t,r,n,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=s*c+u*a;i=((c=a*c+((16383&l)<<14)+r[n]+i)>>28)+(l>>14)+s*u,r[n++]=268435455&c}return i},a$2=28),h$2.prototype.DB=a$2,h$2.prototype.DM=(1<<a$2)-1,h$2.prototype.DV=1<<a$2,h$2.prototype.FV=Math.pow(2,52),h$2.prototype.F1=52-a$2,h$2.prototype.F2=2*a$2-52;var p$2,A$2,f$2=new Array;for(p$2="0".charCodeAt(0),A$2=0;A$2<=9;++A$2)f$2[p$2++]=A$2;for(p$2="a".charCodeAt(0),A$2=10;A$2<36;++A$2)f$2[p$2++]=A$2;for(p$2="A".charCodeAt(0),A$2=10;A$2<36;++A$2)f$2[p$2++]=A$2;function M$1(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function g$2(e,t){var r=f$2[e.charCodeAt(t)];return null==r?-1:r}function y$2(e){var t=d$1();return t.fromInt(e),t}function m$2(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function v$2(e){this.m=e}function N$2(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function D$1(e,t){return e&t}function w$2(e,t){return e|t}function T(e,t){return e^t}function x$1(e,t){return e&~t}function E$2(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function j$2(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function z(){}function I$1(e){return e}function b$1(e){this.r2=d$1(),this.q3=d$1(),h$2.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}v$2.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},v$2.prototype.revert=function(e){return e},v$2.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},v$2.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},v$2.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},N$2.prototype.convert=function(e){var t=d$1();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(h$2.ZERO)>0&&this.m.subTo(t,t),t},N$2.prototype.revert=function(e){var t=d$1();return e.copyTo(t),this.reduce(t),t},N$2.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},N$2.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},N$2.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h$2.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},h$2.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},h$2.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var a=8==r?255&e[n]:g$2(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&h$2.ZERO.subTo(this,this)},h$2.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},h$2.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},h$2.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},h$2.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+a+1]=this[r]>>i|s,s=(this[r]&o)<<n;for(r=a-1;r>=0;--r)t[r]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},h$2.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&o)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},h$2.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},h$2.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&h$2.ZERO.subTo(t,t)},h$2.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},h$2.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=d$1());var o=d$1(),a=this.s,s=e.s,c=this.DB-m$2(n[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,l=o[u-1];if(0!=l){var f=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,d=1<<this.F2,m=r.t,g=m-u,v=null==t?d$1():t;for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r[r.t++]=1,r.subTo(v,r)),h$2.ONE.dlShiftTo(u,v),v.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--g>=0;){var y=r[--m]==l?this.DM:Math.floor(r[m]*h+(r[m-1]+d)*p);if((r[m]+=o.am(0,y,r,g,0,u))<y)for(o.dlShiftTo(g,v),r.subTo(v,r);r[m]<--y;)r.subTo(v,r)}null!=t&&(r.drShiftTo(u,t),a!=s&&h$2.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&h$2.ZERO.subTo(r,r)}}},h$2.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},h$2.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},h$2.prototype.exp=function(e,t){if(e>4294967295||e<1)return h$2.ONE;var r=d$1(),n=d$1(),i=t.convert(this),o=m$2(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)},h$2.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(r=this[a]>>s)>0&&(i=!0,o=M$1(r));a>=0;)s<t?(r=(this[a]&(1<<s)-1)<<t-s,r|=this[--a]>>(s+=this.DB-t)):(r=this[a]>>(s-=t)&n,s<=0&&(s+=this.DB,--a)),r>0&&(i=!0),i&&(o+=M$1(r));return i?o:"0"},h$2.prototype.negate=function(){var e=d$1();return h$2.ZERO.subTo(this,e),e},h$2.prototype.abs=function(){return this.s<0?this.negate():this},h$2.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},h$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m$2(this[this.t-1]^this.s&this.DM)},h$2.prototype.mod=function(e){var t=d$1();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(h$2.ZERO)>0&&e.subTo(t,t),t},h$2.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new v$2(t):new N$2(t),this.exp(e,r)},h$2.ZERO=y$2(0),h$2.ONE=y$2(1),z.prototype.convert=I$1,z.prototype.revert=I$1,z.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},z.prototype.sqrTo=function(e,t){e.squareTo(t)},b$1.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=d$1();return e.copyTo(t),this.reduce(t),t},b$1.prototype.revert=function(e){return e},b$1.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},b$1.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},b$1.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var O$2=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S$1=(1<<26)/O$2[O$2.length-1];h$2.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},h$2.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=y$2(r),i=d$1(),o=d$1(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(e)+a},h$2.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,a=0,s=0;s<e.length;++s){var c=g$2(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(a=t*a+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&h$2.ZERO.subTo(this,this)},h$2.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(h$2.ONE.shiftLeft(e-1),w$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(h$2.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},h$2.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},h$2.prototype.changeBit=function(e,t){var r=h$2.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},h$2.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},h$2.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},h$2.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},h$2.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},h$2.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},h$2.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},h$2.prototype.millerRabin=function(e){var t=this.subtract(h$2.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>O$2.length&&(e=O$2.length);for(var i=d$1(),o=0;o<e;++o){i.fromInt(O$2[Math.floor(Math.random()*O$2.length)]);var a=i.modPow(n,this);if(0!=a.compareTo(h$2.ONE)&&0!=a.compareTo(t)){for(var s=1;s++<r&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(h$2.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},h$2.prototype.clone=/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function(){var e=d$1();return this.copyTo(e),e},h$2.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},h$2.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},h$2.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},h$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},h$2.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},h$2.prototype.equals=function(e){return 0==this.compareTo(e)},h$2.prototype.min=function(e){return this.compareTo(e)<0?this:e},h$2.prototype.max=function(e){return this.compareTo(e)>0?this:e},h$2.prototype.and=function(e){var t=d$1();return this.bitwiseTo(e,D$1,t),t},h$2.prototype.or=function(e){var t=d$1();return this.bitwiseTo(e,w$2,t),t},h$2.prototype.xor=function(e){var t=d$1();return this.bitwiseTo(e,T,t),t},h$2.prototype.andNot=function(e){var t=d$1();return this.bitwiseTo(e,x$1,t),t},h$2.prototype.not=function(){for(var e=d$1(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},h$2.prototype.shiftLeft=function(e){var t=d$1();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},h$2.prototype.shiftRight=function(e){var t=d$1();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},h$2.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+E$2(this[e]);return this.s<0?this.t*this.DB:-1},h$2.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=j$2(this[r]^t);return e},h$2.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},h$2.prototype.setBit=function(e){return this.changeBit(e,w$2)},h$2.prototype.clearBit=function(e){return this.changeBit(e,x$1)},h$2.prototype.flipBit=function(e){return this.changeBit(e,T)},h$2.prototype.add=function(e){var t=d$1();return this.addTo(e,t),t},h$2.prototype.subtract=function(e){var t=d$1();return this.subTo(e,t),t},h$2.prototype.multiply=function(e){var t=d$1();return this.multiplyTo(e,t),t},h$2.prototype.divide=function(e){var t=d$1();return this.divRemTo(e,t,null),t},h$2.prototype.remainder=function(e){var t=d$1();return this.divRemTo(e,null,t),t},h$2.prototype.divideAndRemainder=function(e){var t=d$1(),r=d$1();return this.divRemTo(e,t,r),new Array(t,r)},h$2.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),o=y$2(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new v$2(t):t.isEven()?new b$1(t):new N$2(t);var a=new Array,s=3,c=r-1,u=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=d$1();for(n.sqrTo(a[1],l);s<=u;)a[s]=d$1(),n.mulTo(l,a[s-2],a[s]),s+=2}var f,h,p=e.t-1,d=!0,m=d$1();for(i=m$2(e[p])-1;p>=0;){for(i>=c?f=e[p]>>i-c&u:(f=(e[p]&(1<<i+1)-1)<<c-i,p>0&&(f|=e[p-1]>>this.DB+i-c)),s=r;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--p),d)a[f].copyTo(o),d=!1;else{for(;s>1;)n.sqrTo(o,m),n.sqrTo(m,o),s-=2;s>0?n.sqrTo(o,m):(h=o,o=m,m=h),n.mulTo(m,a[f],o)}for(;p>=0&&0==(e[p]&1<<i);)n.sqrTo(o,m),h=o,o=m,m=h,--i<0&&(i=this.DB-1,--p)}return n.revert(o)},h$2.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return h$2.ZERO;for(var r=e.clone(),n=this.clone(),i=y$2(1),o=y$2(0),a=y$2(0),s=y$2(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),o.subTo(s,o)):(n.subTo(r,n),t&&a.subTo(i,a),s.subTo(o,s))}return 0!=n.compareTo(h$2.ONE)?h$2.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},h$2.prototype.pow=function(e){return this.exp(e,new z)},h$2.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},h$2.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=O$2[O$2.length-1]){for(t=0;t<O$2.length;++t)if(r[0]==O$2[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<O$2.length;){for(var n=O$2[t],i=t+1;i<O$2.length&&n<S$1;)n*=O$2[i++];for(n=r.modInt(n);t<i;)if(n%O$2[t++]==0)return!1}return r.millerRabin(e)},h$2.prototype.square=function(){var e=d$1();return this.squareTo(e),e};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var L$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_$3,B$1,U;function k$1(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=L$2.charAt(r>>6)+L$2.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=L$2.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=L$2.charAt(r>>2)+L$2.charAt((3&r)<<4));(3&n.length)>0;)n+="=";return n}function C$2(e){var t,r,n,i="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(n=L$2.indexOf(e.charAt(t)))<0||(0==o?(i+=M$1(n>>2),r=3&n,o=1):1==o?(i+=M$1(r<<2|n>>4),r=15&n,o=2):2==o?(i+=M$1(r),i+=M$1(n>>2),r=3&n,o=3):(i+=M$1(r<<2|n>>4),i+=M$1(15&n),o=0));return 1==o&&(i+=M$1(r<<2)),i/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */}function P$2(){this.i=0,this.j=0,this.S=new Array}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function R$2(){var e;e=(new Date).getTime(),B$1[U++]^=255&e,B$1[U++]^=e>>8&255,B$1[U++]^=e>>16&255,B$1[U++]^=e>>24&255,U>=256&&(U-=256)}if(P$2.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},P$2.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==B$1){var Q$1;if(B$1=new Array,U=0,"undefined"!=typeof window&&(void 0!==window.crypto||void 0!==window.msCrypto)){var Y$1=window.crypto||window.msCrypto;if(Y$1.getRandomValues){var F$1=new Uint8Array(32);for(Y$1.getRandomValues(F$1),Q$1=0;Q$1<32;++Q$1)B$1[U++]=F$1[Q$1]}else if("undefined"!=typeof navigator&&"Netscape"==navigator.appName&&navigator.appVersion<"5"){var V$1=window.crypto.random(32);for(Q$1=0;Q$1<V$1.length;++Q$1)B$1[U++]=255&V$1.charCodeAt(Q$1)}}for(;U<256;)Q$1=Math.floor(65536*Math.random()),B$1[U++]=Q$1>>>8,B$1[U++]=255&Q$1;U=0,R$2()}function H$1(){if(null==_$3){for(R$2(),(_$3=new P$2).init(B$1),U=0;U<B$1.length;++U)B$1[U]=0;U=0}return _$3.next()}function G$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function W$2(e,t){return new h$2(e,t)}function q$1(e,t,r){for(var n="",i=0;n.length<t;)n+=r(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function K$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Z$1(e,t,r){for(var n="",i=0;n.length<t;)n+=r(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return n}function X$1(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function J$1(e){return X$1(function(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e))}function $$r(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function ee(e){return e.length%2==1&&(e="0"+e),function(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$1(e))}function te(e){return C$2($$r(e))}function ie(e){return function(e){return e.replace(/%/g,"")}(function(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+J$1(t[n]);return r}(e))}function ne(e){return decodeURIComponent(function(e){return e.replace(/(..)/g,"%$1")}(e))}function re(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function oe(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function se(e){var t=function(e){return k$1(e)}(e).replace(/(.{64})/g,"$1\r\n");return t.replace(/\r\n$/,"")}function ae(e,t){return"-----BEGIN "+t+"-----\r\n"+se(e)+"\r\n-----END "+t+"-----\r\n"}function ue(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return function(e){return C$2(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ce(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?function(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===n)return e.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(e=e.replace(i,"::")).slice(1,-1)}(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function le(e){return e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var n=128|63&r;return ne((192|(7&t)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&t)<<2|(192&r)>>6;var i=128|63&r;return ne((224|(240&t)>>4).toString(16)+n.toString(16)+i.toString(16))})).join("")}function he(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function de(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}G$1.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=H$1()},K$1.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},K$1.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=W$2(e,16),this.e=parseInt(t,16)}},K$1.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=new Array,n=e.length-1;n>=0&&t>0;){var i=e.charCodeAt(n--);i<128?r[--t]=i:i>127&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var o=new G$1,a=new Array;t>2;){for(a[0]=0;0==a[0];)o.nextBytes(a);r[--t]=a[0]}return r[--t]=2,r[--t]=0,new h$2(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},K$1.prototype.encryptOAEP=function(e,t,r){var n=function(e,t,r,n){var i=u$2.crypto.MessageDigest,o=u$2.crypto.Util,a=null;if(r||(r="sha1"),"string"==typeof r&&(a=i.getCanonicalAlgName(r),n=i.getHashLength(a),r=function(e){return re(o.hashHex(oe(e),a))}),e.length+2*n+2>t)throw"Message too long for RSA";var s,c="";for(s=0;s<t-e.length-2*n-2;s+=1)c+="\0";var u=r("")+c+""+e,l=new Array(n);(new G$1).nextBytes(l);var f=q$1(l,u.length,r),h=[];for(s=0;s<u.length;s+=1)h[s]=u.charCodeAt(s)^f.charCodeAt(s);var p=q$1(h,l.length,r),d=[0];for(s=0;s<l.length;s+=1)d[s+1]=l[s]^p.charCodeAt(s);return new h$2(d.concat(h))}(e,this.n.bitLength()+7>>3,t,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},K$1.prototype.type="RSA",K$1.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},K$1.prototype.setPrivate=function(e,t,r){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=r;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=W$2(e,16),this.e=parseInt(t,16),this.d=W$2(r,16)}},K$1.prototype.setPrivateEx=function(e,t,r,n,i,o,a,s){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=W$2(e,16),this.e=parseInt(t,16),this.d=W$2(r,16),this.p=W$2(n,16),this.q=W$2(i,16),this.dmp1=W$2(o,16),this.dmq1=W$2(a,16),this.coeff=W$2(s,16)},K$1.prototype.generate=function(e,t){var r=new G$1,n=e>>1;this.e=parseInt(t,16);for(var i=new h$2(t,16);;){for(;this.p=new h$2(e-n,1,r),0!=this.p.subtract(h$2.ONE).gcd(i).compareTo(h$2.ONE)||!this.p.isProbablePrime(10););for(;this.q=new h$2(n,1,r),0!=this.q.subtract(h$2.ONE).gcd(i).compareTo(h$2.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var a=this.p.subtract(h$2.ONE),s=this.q.subtract(h$2.ONE),c=a.multiply(s);if(0==c.gcd(i).compareTo(h$2.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=i.modInverse(c),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},K$1.prototype.decrypt=function(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=W$2(e,16),r=this.doPrivate(t);return null==r?null:/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function(e,t){for(var r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var o=255&r[n];o<128?i+=String.fromCharCode(o):o>191&&o<224?(i+=String.fromCharCode((31&o)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&o)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}(r,this.n.bitLength()+7>>3)},K$1.prototype.decryptOAEP=function(e,t,r){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=W$2(e,16),i=this.doPrivate(n);return null==i?null:function(e,t,r,n){var i=u$2.crypto.MessageDigest,o=u$2.crypto.Util,a=null;for(r||(r="sha1"),"string"==typeof r&&(a=i.getCanonicalAlgName(r),n=i.getHashLength(a),r=function(e){return re(o.hashHex(oe(e),a))}),e=e.toByteArray(),s=0;s<e.length;s+=1)e[s]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*n+2)throw"Cipher too short";var s,c=e.substr(1,n),u=e.substr(n+1),l=Z$1(u,n,r),f=[];for(s=0;s<c.length;s+=1)f[s]=c.charCodeAt(s)^l.charCodeAt(s);var h=Z$1(String.fromCharCode.apply(String,f),e.length-n,r),p=[];for(s=0;s<u.length;s+=1)p[s]=u.charCodeAt(s)^h.charCodeAt(s);if((p=String.fromCharCode.apply(String,p)).substr(0,n)!==r(""))throw"Hash mismatch";var d=(p=p.substr(n)).indexOf("");if((-1!=d?p.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return p.substr(d+1)}(i,this.n.bitLength()+7>>3,t,r)},void 0!==u$2.lang&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(e){return he(e)},u$2.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},u$2.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=$$r(e),u$2.lang.String.isBase64(e))},u$2.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},u$2.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},u$2.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var pe=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function Ae(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==u$2.crypto&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:l$3.algo.MD5,sha1:l$3.algo.SHA1,sha224:l$3.algo.SHA224,sha256:l$3.algo.SHA256,sha384:l$3.algo.SHA384,sha512:l$3.algo.SHA512,ripemd160:l$3.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",a="00"+n,s="",c=i-o.length-a.length,u=0;u<c;u+=2)s+="ff";return o+s+a},this.hashString=function(e,t){return new u$2.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new u$2.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof K$1||e instanceof u$2.crypto.DSA||e instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(e){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},u$2.crypto.Util.ripemd160=function(e){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},u$2.crypto.Util.SECURERANDOMGEN=new G$1,u$2.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(t),X$1(t)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new h$2(u$2.crypto.Util.getRandomHexOfNbytes(e),16)},u$2.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],X$1(r)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new h$2(u$2.crypto.Util.getRandomHexOfNbits(e),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=u$2.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},u$2.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=u$2.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=u$2.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=l$3.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(l$3.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},u$2.crypto.MessageDigest.getHashLength=function(e){var t=u$2.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=u$2.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=l$3.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=l$3.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(l$3.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=oe(e)),void(this.pass=l$3.enc.Hex.parse(t))}if("object"!=_typeof2(e))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=ie(e.utf8)),void 0!==e.rstr&&(t=oe(e.rstr)),void 0!==e.b64&&(t=C$2(e.b64)),void 0!==e.b64u&&(t=te(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=l$3.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?we.getKey(e):we.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==u$2.crypto.ECDSA&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof K$1&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof K$1&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==u$2.crypto.ECDSA&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof K$1&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof K$1&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==u$2.crypto.ECDSA&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==u$2.crypto.DSA&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=we.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},u$2.crypto.Cipher=function(e){},u$2.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof K$1&&t.isPublic){var n=u$2.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof K$1&&t.isPrivate){var n=u$2.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof K$1){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var fe,Me,ge,ye,me,ve,Ne,De,we=(fe=function(e,t,r){return Me(l$3.AES,e,t,r)},Me=function(e,t,r,n){var i=l$3.enc.Hex.parse(t),o=l$3.enc.Hex.parse(r),a=l$3.enc.Hex.parse(n),s={};s.key=o,s.iv=a,s.ciphertext=i;var c=e.decrypt(s,o,{iv:a});return l$3.enc.Hex.stringify(c)},ge=function(e,t,r){return ye(l$3.AES,e,t,r)},ye=function(e,t,r,n){var i=l$3.enc.Hex.parse(t),o=l$3.enc.Hex.parse(r),a=l$3.enc.Hex.parse(n),s=e.encrypt(i,o,{iv:a}),c=l$3.enc.Hex.parse(s.toString());return l$3.enc.Base64.stringify(c)},me={"AES-256-CBC":{proc:fe,eproc:ge,keylen:32,ivlen:16},"AES-192-CBC":{proc:fe,eproc:ge,keylen:24,ivlen:16},"AES-128-CBC":{proc:fe,eproc:ge,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,t,r){return Me(l$3.TripleDES,e,t,r)},eproc:function(e,t,r){return ye(l$3.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,t,r){return Me(l$3.DES,e,t,r)},eproc:function(e,t,r){return ye(l$3.DES,e,t,r)},keylen:8,ivlen:8}},ve=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var i=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),o=1);var a=e.indexOf("-----END");if(-1!=i&&-1!=a){var s=e.substring(i+2*o,a-o);s=s.replace(/\s+/g,""),t.data=s}return t},Ne=function(e,t,r){for(var n=r.substring(0,16),i=l$3.enc.Hex.parse(n),o=l$3.enc.Utf8.parse(t),a=me[e].keylen+me[e].ivlen,s="",c=null;;){var u=l$3.algo.MD5.create();if(null!=c&&u.update(c),u.update(o),u.update(i),c=u.finalize(),(s+=l$3.enc.Hex.stringify(c)).length>=2*a)break}var l={};return l.keyhex=s.substr(0,2*me[e].keylen),l.ivhex=s.substr(2*me[e].keylen,2*me[e].ivlen),l},De=function(e,t,r,n){var i=l$3.enc.Base64.parse(e),o=l$3.enc.Hex.stringify(i);return(0,me[t].proc)(o,r,n)},{version:"1.0.0",parsePKCS5PEM:function(e){return ve(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return Ne(e,t,r)},decryptKeyB64:function(e,t,r,n){return De(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=ve(e);r.type;var n=r.cipher,i=r.ivsalt,o=r.data,a=Ne(n,t,i).keyhex;return De(o,n,a,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,i){var o="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===me[n])throw"KEYUTIL unsupported algorithm: "+n;void 0!==i&&null!=i||(i=function(e){var t=l$3.lib.WordArray.random(e);return l$3.enc.Hex.stringify(t)}(me[n].ivlen).toUpperCase());var a=function(e,t,r,n){return(0,me[t].eproc)(e,r,n)}(t,n,Ne(n,r,i).keyhex,i);return o="-----BEGIN "+e+" PRIVATE KEY-----\r\n",o+="Proc-Type: 4,ENCRYPTED\r\n",o+="DEK-Info: "+n+","+i+"\r\n",o+="\r\n",(o+=a.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=Te,r=t.getChildIdx,n=t.getV,i={},o=r(e,0);if(2!=o.length)throw"malformed format: SEQUENCE(0).items != 2: "+o.length;i.ciphertext=n(e,o[1]);var a=r(e,o[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+a.length;if("2a864886f70d01050d"!=n(e,a[0]))throw"this only supports pkcs5PBES2";var s=r(e,a[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+s.length;var c=r(e,s[1]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length;if("2a864886f70d0307"!=n(e,c[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(e,c[1]);var u=r(e,s[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(e,u[0]))throw"this only supports pkcs5PBKDF2";var l=r(e,u[1]);if(l.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length;i.pbkdf2Salt=n(e,l[0]);var f=n(e,l[1]);try{i.pbkdf2Iter=parseInt(f,16)}catch(e){throw"malformed format pbkdf2Iter: "+f}return i},getPBKDF2KeyHexFromParam:function(e,t){var r=l$3.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,i=l$3.PBKDF2(t,r,{keySize:6,iterations:n});return l$3.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=ue(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=we.getPBKDF2KeyHexFromParam(n,t),o={};o.ciphertext=l$3.enc.Hex.parse(n.ciphertext);var a=l$3.enc.Hex.parse(i),s=l$3.enc.Hex.parse(n.encryptionSchemeIV),c=l$3.TripleDES.decrypt(o,a,{iv:s});return l$3.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=Te,r=t.getChildIdx,n=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var o=r(e,0);if(o.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(o[1],2))throw new Error("malformed PKCS8 private key(code:003)");var a=r(e,o[1]);if(2!=a.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(i.algoid=n(e,a[0]),"06"==e.substr(a[1],2)&&(i.algparam=n(e,a[1])),"04"!=e.substr(o[2],2))throw new Error("malformed PKCS8 private key(code:006)");return i.keyidx=t.getVidx(e,o[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=ue(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new K$1;else if("2a8648ce380401"==r.algoid)t=new u$2.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw"unsupported private key algorithm";t=new u$2.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=Te.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new K$1;else if("2a8648ce380401"===r)t=new u$2.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw"unsupported PKCS#8 public key hex";t=new u$2.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=Te,r=t.getChildIdx,n=t.getV,i={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var o=r(e,0);if(2!=o.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(o[0],2))throw"malformed RSA key(code:003)";if(i.n=n(e,o[0]),"02"!=e.substr(o[1],2))throw"malformed RSA key(code:004)";return i.e=n(e,o[1]),i},parsePublicPKCS8Hex:function(e){var t=Te,r=t.getChildIdx,n=t.getV,i={algparam:null},o=r(e,0);if(2!=o.length)throw"outer DERSequence shall have 2 elements: "+o.length;var a=o[0];if("30"!=e.substr(a,2))throw"malformed PKCS8 public key(code:001)";var s=r(e,a);if(2!=s.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=n(e,s[0]),"06"==e.substr(s[1],2)?i.algparam=n(e,s[1]):"30"==e.substr(s[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,s[1],[0],"02"),i.algparam.q=t.getVbyList(e,s[1],[1],"02"),i.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(o[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=n(e,o[1]).substr(2),i}});we.getKey=function(e,t,r){var n=(v=Te).getChildIdx;v.getV;var i,o=v.getVbyList,a=u$2.crypto,s=a.ECDSA,c=a.DSA,u=K$1,l=ue,f=we;if(void 0!==u&&e instanceof u)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==c&&e instanceof c)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new s({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new s({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(S=new u).setPublic(e.n,e.e),S;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(S=new u).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),S;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(S=new u).setPrivate(e.n,e.e,e.d),S;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(S=new c).setPublic(e.p,e.q,e.g,e.y),S;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(S=new c).setPrivate(e.p,e.q,e.g,e.y,e.x),S;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(S=new u).setPublic(te(e.n),te(e.e)),S;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(S=new u).setPrivateEx(te(e.n),te(e.e),te(e.d),te(e.p),te(e.q),te(e.dp),te(e.dq),te(e.qi)),S;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(S=new u).setPrivate(te(e.n),te(e.e),te(e.d)),S;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(T=new s({curve:e.crv})).ecparams.keylen/4,p="04"+("0000000000"+te(e.x)).slice(-h)+("0000000000"+te(e.y)).slice(-h);return T.setPublicKeyHex(p),T}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(T=new s({curve:e.crv})).ecparams.keylen/4,p="04"+("0000000000"+te(e.x)).slice(-h)+("0000000000"+te(e.y)).slice(-h);var d=("0000000000"+te(e.d)).slice(-h);return T.setPublicKeyHex(p),T.setPrivateKeyHex(d),T}if("pkcs5prv"===r){var m,g=e,v=Te;if(9===(m=n(g,0)).length)(S=new u).readPKCS5PrvKeyHex(g);else if(6===m.length)(S=new c).readPKCS5PrvKeyHex(g);else{if(!(m.length>2&&"04"===g.substr(m[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(S=new s).readPKCS5PrvKeyHex(g)}return S}if("pkcs8prv"===r)return f.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return f._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return ze.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return ze.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var y=ue(e,"PUBLIC KEY");return f._getKeyFromPublicPKCS8Hex(y)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var b=l(e,"RSA PRIVATE KEY");return f.getKey(b,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=o(i=l(e,"DSA PRIVATE KEY"),0,[1],"02"),A=o(i,0,[2],"02"),M=o(i,0,[3],"02"),x=o(i,0,[4],"02"),w=o(i,0,[5],"02");return(S=new c).setPrivate(new h$2(_,16),new h$2(A,16),new h$2(M,16),new h$2(x,16),new h$2(w,16)),S}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return b=l(e,"EC PRIVATE KEY"),f.getKey(b,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return f.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var $=f.getDecryptedKeyHex(e,t),E=new K$1;return E.readPKCS5PrvKeyHex($),E}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var T,S=o(i=f.getDecryptedKeyHex(e,t),0,[1],"04"),O=o(i,0,[2,0],"06"),N=o(i,0,[3,0],"03").substr(2);if(void 0===u$2.crypto.OID.oidhex2name[O])throw"undefined OID(hex) in KJUR.crypto.OID: "+O;return(T=new s({curve:u$2.crypto.OID.oidhex2name[O]})).setPublicKeyHex(N),T.setPrivateKeyHex(S),T.isPublic=!1,T}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return _=o(i=f.getDecryptedKeyHex(e,t),0,[1],"02"),A=o(i,0,[2],"02"),M=o(i,0,[3],"02"),x=o(i,0,[4],"02"),w=o(i,0,[5],"02"),(S=new c).setPrivate(new h$2(_,16),new h$2(A,16),new h$2(M,16),new h$2(x,16),new h$2(w,16)),S;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return f.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},we.generateKeypair=function(e,t){if("RSA"==e){var r=t;(a=new K$1).generate(r,"10001"),a.isPrivate=!0,a.isPublic=!0;var n=new K$1,i=a.n.toString(16),o=a.e.toString(16);return n.setPublic(i,o),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=a,s.pubKeyObj=n,s}if("EC"==e){var a,s,c=t,u=new u$2.crypto.ECDSA({curve:c}).generateKeyPairHex();return(a=new u$2.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),a.setPrivateKeyHex(u.ecprvhex),a.isPrivate=!0,a.isPublic=!1,(n=new u$2.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=a,s.pubKeyObj=n,s}throw"unknown algorithm: "+e},we.getPEM=function(e,t,r,n,i,o){var a=u$2,s=a.asn1,c=s.DERObjectIdentifier,u=s.DERInteger,l=s.ASN1Util.newObject,f=s.x509.SubjectPublicKeyInfo,h=a.crypto,p=h.DSA,d=h.ECDSA,m=K$1;function g(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function v(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==m&&e instanceof m||void 0!==p&&e instanceof p||void 0!==d&&e instanceof d)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return ae(M=new f(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==m&&e instanceof m&&(void 0===r||null==r)&&1==e.isPrivate)return ae(M=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===r||null==r)&&1==e.isPrivate){var b=new c({name:e.curveName}).getEncodedHex(),_=v(e).getEncodedHex(),A="";return(A+=ae(b,"EC PARAMETERS"))+ae(_,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===r||null==r)&&1==e.isPrivate)return ae(M=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==m&&e instanceof m&&void 0!==r&&null!=r&&1==e.isPrivate){var M=g(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",M,r,n,o)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==r&&null!=r&&1==e.isPrivate)return M=v(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",M,r,n,o);if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==r&&null!=r&&1==e.isPrivate)return M=y(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",M,r,n,o);var x=function(e,t){var r=w(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},w=function(e,t){var r=l$3.lib.WordArray.random(8),n=l$3.lib.WordArray.random(8),i=l$3.PBKDF2(t,r,{keySize:6,iterations:100}),o=l$3.enc.Hex.parse(e),a=l$3.TripleDES.encrypt(o,i,{iv:n})+"",s={};return s.ciphertext=a,s.pbkdf2Salt=l$3.enc.Hex.stringify(r),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=l$3.enc.Hex.stringify(n),s};if("PKCS8PRV"==t&&null!=m&&e instanceof m&&1==e.isPrivate){var $=g(e).getEncodedHex();return M=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:$}}]}).getEncodedHex(),void 0===r||null==r?ae(M,"PRIVATE KEY"):ae(_=x(M,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate)return $=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),M=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:$}}]}).getEncodedHex(),void 0===r||null==r?ae(M,"PRIVATE KEY"):ae(_=x(M,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return $=new u({bigint:e.x}).getEncodedHex(),M=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:$}}]}).getEncodedHex(),void 0===r||null==r?ae(M,"PRIVATE KEY"):ae(_=x(M,r),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},we.getKeyFromCSRPEM=function(e){var t=ue(e,"CERTIFICATE REQUEST");return we.getKeyFromCSRHex(t)},we.getKeyFromCSRHex=function(e){var t=we.parseCSRHex(e);return we.getKey(t.p8pubkeyhex,null,"pkcs8pub")},we.parseCSRHex=function(e){var t=Te,r=t.getChildIdx,n=t.getTLV,i={},o=e;if("30"!=o.substr(0,2))throw"malformed CSR(code:001)";var a=r(o,0);if(a.length<1)throw"malformed CSR(code:002)";if("30"!=o.substr(a[0],2))throw"malformed CSR(code:003)";var s=r(o,a[0]);if(s.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(o,s[2]),i},we.getKeyID=function(e){var t=we,r=Te;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var n=ue(t.getPEM(e)),i=r.getIdxbyList(n,0,[1]),o=r.getV(n,i).substring(2);return u$2.crypto.Util.hashHex(o,"sha1")},we.getJWKFromKey=function(e){var t={};if(e instanceof K$1&&e.isPrivate)return t.kty="RSA",t.n=ee(e.n.toString(16)),t.e=ee(e.e.toString(16)),t.d=ee(e.d.toString(16)),t.p=ee(e.p.toString(16)),t.q=ee(e.q.toString(16)),t.dp=ee(e.dmp1.toString(16)),t.dq=ee(e.dmq1.toString(16)),t.qi=ee(e.coeff.toString(16)),t;if(e instanceof K$1&&e.isPublic)return t.kty="RSA",t.n=ee(e.n.toString(16)),t.e=ee(e.e.toString(16)),t;if(e instanceof u$2.crypto.ECDSA&&e.isPrivate){if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=ee(r.x),t.y=ee(r.y),t.d=ee(e.prvKeyHex),t}if(e instanceof u$2.crypto.ECDSA&&e.isPublic){var n;if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;return r=e.getPublicKeyXYHex(),t.kty="EC",t.crv=n,t.x=ee(r.x),t.y=ee(r.y),t}throw"not supported key object"},void 0!==u$2.asn1&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new h$2(n,16).xor(e).add(h$2.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return ae(e,t)},this.newObject=function(e){var t=u$2.asn1,r=t.ASN1Object,n=t.DERBoolean,i=t.DERInteger,o=t.DERBitString,a=t.DEROctetString,s=t.DERNull,c=t.DERObjectIdentifier,u=t.DEREnumerated,l=t.DERUTF8String,f=t.DERNumericString,h=t.DERPrintableString,p=t.DERTeletexString,d=t.DERIA5String,m=t.DERUTCTime,g=t.DERGeneralizedTime,v=t.DERVisibleString,y=t.DERBMPString,b=t.DERSequence,_=t.DERSet,A=t.DERTaggedObject,M=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var x=Object.keys(e);if(1!=x.length)throw new Error("key of param shall be only one.");var w=x[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+w+":"))throw new Error("undefined key: "+w);if("bool"==w)return new n(e[w]);if("int"==w)return new i(e[w]);if("bitstr"==w)return new o(e[w]);if("octstr"==w)return new a(e[w]);if("null"==w)return new s(e[w]);if("oid"==w)return new c(e[w]);if("enum"==w)return new u(e[w]);if("utf8str"==w)return new l(e[w]);if("numstr"==w)return new f(e[w]);if("prnstr"==w)return new h(e[w]);if("telstr"==w)return new p(e[w]);if("ia5str"==w)return new d(e[w]);if("utctime"==w)return new m(e[w]);if("gentime"==w)return new g(e[w]);if("visstr"==w)return new v(e[w]);if("bmpstr"==w)return new y(e[w]);if("asn1"==w)return new r(e[w]);if("seq"==w){for(var $=e[w],E=[],T=0;T<$.length;T++){var S=M($[T]);E.push(S)}return new b({array:E})}if("set"==w){for($=e[w],E=[],T=0;T<$.length;T++)S=M($[T]),E.push(S);return new _({array:E})}if("tag"==w){var O=e[w];if("[object Array]"===Object.prototype.toString.call(O)&&3==O.length){var N=M(O[2]);return new A({tag:O[0],explicit:O[1],obj:N})}return new A(O)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);n+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new h$2(n,2).toString(10),n="")}return t},u$2.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new h$2(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",a=0;a<i;a++)o+="0";for(n=o+n,a=0;a<n.length-1;a+=7){var s=n.substr(a,7);a!=n.length-7&&(s="1"+s),r+=t(parseInt(s,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=t(o),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);return n},u$2.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(e){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ie(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},c$2.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(e){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var a=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var s=i.getMilliseconds();if(0!=s){var c=n(String(s),3);a=a+"."+(c=c.replace(/[0]+$/,""))}}return a+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=J$1(e)},this.setByDateValue=function(e,t,r,n,i,o){var a=new Date(Date.UTC(e,t-1,r,n,i,o,0));this.setByDate(a)},this.getFreshValueHex=function(){return this.hV}},c$2.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(e){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},c$2.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(e){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},c$2.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(e){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new h$2(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},c$2.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=u$2.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=e.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},c$2.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=u$2.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},c$2.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},c$2.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(e){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=parseInt(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",a=0;a<i;a++)o+="0";for(n=o+n,a=0;a<n.length-1;a+=7){var s=n.substr(a,7);a!=n.length-7&&(s="1"+s),r+=t(parseInt(s,2))}return r};try{if(!e.match(/^[0-9.]+$/))return null;var n="",i=e.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);n+=t(o),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);return n}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=u$2.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},c$2.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(e){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new h$2(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},c$2.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(e){u$2.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},c$2.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(e){u$2.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},c$2.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(e){u$2.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},c$2.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(e){u$2.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},c$2.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(e){u$2.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},c$2.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(e){u$2.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},c$2.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(e){u$2.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},c$2.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(e){u$2.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},c$2.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(e){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},c$2.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(e){u$2.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},c$2.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(e){u$2.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},c$2.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(e){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var t=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==_typeof2(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},c$2.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var Te=new function(){};function xe(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e}function Ee(e,t,r){for(var n="",i=0;n.length<t;)n+=re(r(oe(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function je(e){for(var t in u$2.crypto.Util.DIGESTINFOHEAD){var r=u$2.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function ze(e){var t,r=Te,n=r.getChildIdx,i=r.getV,o=r.getTLV,a=r.getVbyList,s=r.getVbyListEx,c=r.getTLVbyList,u=r.getTLVbyListEx,l=r.getIdxbyList,f=r.getIdxbyListEx,h=r.getVidx,p=r.getInt,d=r.oidname,m=r.hextooidstr,g=ue;try{t=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=c(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=c(e,0,[0]),r=p(t,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return s(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=u(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return d(s(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=a(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=a(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return r.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return l(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return we.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=c(this.hex,0,[0],"30"),i=new u$2.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.parseExt=function(e){var t,o,s;if(void 0===e){if(s=this.hex,3!==this.version)return-1;t=l(s,0,[0,7,0],"30"),o=n(s,t)}else{s=ue(e);var c=l(s,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(s,c))return void(this.aExtInfo=new Array);t=l(s,0,[0,3,0,1,0],"30"),o=n(s,t),this.hex=s}this.aExtInfo=new Array;for(var u=0;u<o.length;u++){var f={critical:!1},p=0;3===n(s,o[u]).length&&(f.critical=!0,p=1),f.oid=r.hextooidstr(a(s,o[u],[0],"06"));var d=l(s,o[u],[1+p]);f.vidx=h(s,d),this.aExtInfo.push(f)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=u$2.asn1.x509.OID.name2oid(e)),""!==r)for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"basicConstraints"};if(t&&(n.critical=!0),"3000"===e)return n;if("30030101ff"===e)return n.cA=!0,n;if("30060101ff02"===e.substr(0,12)){var a=i(e,10),s=parseInt(a,16);return n.cA=!0,n.pathLen=s,n}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"keyUsage"};return t&&(n.critical=!0),n.names=this.getExtKeyUsageString(e).split(","),n},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=o(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&r.push(ze.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"subjectKeyIdentifier"};t&&(n.critical=!0);var a=i(e,0);return n.kid={hex:a},n},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var a={extname:"authorityKeyIdentifier"};t&&(a.critical=!0);for(var s=n(e,0),c=0;c<s.length;c++){var u=e.substr(s[c],2);if("80"===u&&(a.kid={hex:i(e,s[c])}),"a1"===u){var l=o(e,s[c]),f=this.getGeneralNames(l);a.issuer=f[0].dn}"82"===u&&(a.sn={hex:i(e,s[c])})}return a},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var a={extname:"extKeyUsage",array:[]};t&&(a.critical=!0);for(var s=n(e,0),c=0;c<s.length;c++)a.array.push(d(i(e,s[c])));return a},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=o(this.hex,e.vidx);if(""===r)return t;for(var a=n(r,0),s=0;s<a.length;s++)t.push(d(i(r,a[s])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"subjectAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"issuerAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getGeneralNames=function(e){for(var t=n(e,0),r=[],i=0;i<t.length;i++){var a=this.getGeneralName(o(e,t[i]));void 0!==a&&r.push(a)}return r},this.getGeneralName=function(e){var t=e.substr(0,2),r=i(e,0),n=re(r);return"81"==t?{rfc822:n}:"82"==t?{dns:n}:"86"==t?{uri:n}:"87"==t?{ip:ce(r)}:"a4"==t?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var e,t,r,a=this.getExtInfo("subjectAltName");if(void 0===a)return a;for(var s=new Array,c=o(this.hex,a.vidx),u=n(c,0),l=0;l<u.length;l++)r=c.substr(u[l],2),e=i(c,u[l]),"81"===r&&(t=ne(e),s.push(["MAIL",t])),"82"===r&&(t=ne(e),s.push(["DNS",t])),"84"===r&&(t=ze.hex2dn(e,0),s.push(["DN",t])),"86"===r&&(t=ne(e),s.push(["URI",t])),"87"===r&&(t=ce(e),s.push(["IP",t]));return s},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var a=n(e,0),s=0;s<a.length;s++){var c=o(e,a[s]);i.array.push(this.getDistributionPoint(c))}return i},this.getDistributionPoint=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var a=e.substr(r[i],2),s=o(e,r[i]);"a0"==a&&(t.dpname=this.getDistributionPointName(s))}return t},this.getDistributionPointName=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var a=e.substr(r[i],2),s=o(e,r[i]);"a0"==a&&(t.full=this.getGeneralNames(s))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,r=n(this.hex,e.vidx),i=0;i<r.length;i++)try{var o=ne(a(this.hex,r[i],[0,0,0],"86"));t.push(o)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=n(this.hex,e.vidx),i=0;i<r.length;i++){var o=a(this.hex,r[i],[0],"06"),s=a(this.hex,r[i],[1],"86");"2b06010505073001"===o&&t.ocsp.push(ne(s)),"2b06010505073002"===o&&t.caissuer.push(ne(s))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var c=n(e,0),u=0;u<c.length;u++){var l=s(e,c[u],[0],"06"),f=ne(a(e,c[u],[1],"86"));if("2b06010505073001"==l)i.array.push({ocsp:f});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);i.array.push({caissuer:f})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var a=n(e,0),s=0;s<a.length;s++){var c=o(e,a[s]),u=this.getPolicyInformation(c);i.array.push(u)}return i},this.getPolicyInformation=function(e){var t={},r=a(e,0,[0],"06");t.policyoid=d(r);var i=f(e,0,[1],"30");if(-1!=i){t.array=[];for(var s=n(e,i),c=0;c<s.length;c++){var u=o(e,s[c]),l=this.getPolicyQualifierInfo(u);t.array.push(l)}}return t},this.getPolicyQualifierInfo=function(e){var t={},r=a(e,0,[0],"06");if("2b06010505070201"===r){var n=s(e,0,[1],"16");t.cps=re(n)}else if("2b06010505070202"===r){var i=c(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var a=o(e,r[i]);"30"!=a.substr(0,2)&&(t.exptext=this.getDisplayText(a))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=re(i(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:i(e,0)},r;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(i(e,0),16),r;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};t&&(r.critical=!0);var n=i(e,0);return r.hex=n,r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var a=n(e,0);if(a.length>1){var s=o(e,a[1]),c=this.getGeneralName(s);null!=c.uri&&(i.uri=c.uri)}if(a.length>2){var u=o(e,a[2]);"0101ff"==u&&(i.reqauth=!0),"010100"==u&&(i.reqauth=!1)}return i},this.getX500NameRule=function(e){for(var t=null,r=[],n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)r.push(i[o]);for(n=0;n<r.length;n++){var a=r[n],s=a.ds,c=a.value,u=a.type;if("prn"!=s&&"utf8"!=s&&"ia5"!=s)return"mixed";if("ia5"==s){if("CN"!=u)return"mixed";if(u$2.lang.String.isMail(c))continue;return"mixed"}if("C"==u){if("prn"==s)continue;return"mixed"}if(null==t)t=s;else if(t!==s)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],r=n(e,0),i=0;i<r.length;i++)t.push(this.getRDN(o(e,r[i])));return t},this.getRDN=function(e){for(var t=[],r=n(e,0),i=0;i<r.length;i++)t.push(this.getAttrTypeAndValue(o(e,r[i])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},r=n(e,0),i=a(e,r[0],[],"06"),o=a(e,r[1],[]),s=u$2.asn1.ASN1Util.oidHexToInt(i);return t.type=u$2.asn1.x509.OID.oid2atype(s),t.ds=this.HEX2STAG[e.substr(r[1],2)],"bmp"!=t.ds?t.value=ne(o):t.value=le(o),t},this.readCertPEM=function(e){this.readCertHex(g(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{l(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=ae(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=f(this.hex,0,[0,"[3]"])&&(e=u(this.hex,0,[0,"[3]",0],"30"));for(var t=[],r=n(e,0),i=0;i<r.length;i++){var a=o(e,r[i]),s=this.getExtParam(a);null!=s&&t.push(s)}return t},this.getExtParam=function(e){var t=n(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var r=m(a(e,0,[0],"06")),i=!1;3==t&&"0101ff"==c(e,0,[1])&&(i=!0);var o=c(e,0,[t-1,0]),s=void 0;if("2.5.29.14"==r?s=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==r?s=this.getExtKeyUsage(o,i):"2.5.29.17"==r?s=this.getExtSubjectAltName(o,i):"2.5.29.18"==r?s=this.getExtIssuerAltName(o,i):"2.5.29.19"==r?s=this.getExtBasicConstraints(o,i):"2.5.29.31"==r?s=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==r?s=this.getExtCertificatePolicies(o,i):"2.5.29.35"==r?s=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==r?s=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==r?s=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==r?s=this.getExtCRLNumber(o,i):"2.5.29.21"==r?s=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==r?s=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==r?s=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==r&&(s=this.getExtAdobeTimeStamp(o,i)),null!=s)return s;var u={extname:r,extn:o};return i&&(u.critical=!0),u},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var o=n[i].dpname.full,a=0;a<o.length;a++){var s=o[i];null!=s.uri&&(s.uri=t)}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,r,n,i=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var o=0;o<i.array.length;o++){var a=i.array[o];void 0!==a.cps&&(t+="    cps: "+a.cps+"\n")}}return t},o=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];try{void 0!==i.dpname.full[0].uri&&(t+="    "+i.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==i.dname.full[0].dn.hex&&(t+="    "+ze.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},a=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+de(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+de(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var s=0;s<r.length;s++){var c=r[s],u=u$2.asn1.x509.OID.oid2name(c.oid);""===u&&(u=c.oid);var l="";if(!0===c.critical&&(l="CRITICAL"),e+="  "+u+" "+l+":\n","basicConstraints"===u){var f=this.getExtBasicConstraints();void 0===f.cA?e+="    {}\n":(e+="    cA=true",void 0!==f.pathLen&&(e+=", pathLen="+f.pathLen),e+="\n")}else if("keyUsage"===u)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===u)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===u){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(e+="    kid="+h.kid.hex+"\n")}else"extKeyUsage"===u?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===u?e+="    "+(n=this.getExtSubjectAltName(),JSON.stringify(n.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===u?e+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===u?e+=a(this.getExtAuthorityInfoAccess()):"certificatePolicies"===u&&(e+=i(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):u$2.lang.String.isHex(e)&&this.readCertHex(e))}function Ie(e){return l$3.SHA256(e).toString()}Te.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},Te.getL=function(e,t){var r=Te.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},Te.getVblen=function(e,t){var r;return""==(r=Te.getL(e,t))?-1:("8"===r.substr(0,1)?new h$2(r.substr(2),16):new h$2(r,16)).intValue()},Te.getVidx=function(e,t){var r=Te.getLblen(e,t);return r<0?r:t+2*(r+1)},Te.getV=function(e,t){var r=Te.getVidx(e,t),n=Te.getVblen(e,t);return e.substr(r,2*n)},Te.getTLV=function(e,t){return e.substr(t,2)+Te.getL(e,t)+Te.getV(e,t)},Te.getTLVblen=function(e,t){return 2+2*Te.getLblen(e,t)+2*Te.getVblen(e,t)},Te.getNextSiblingIdx=function(e,t){return Te.getVidx(e,t)+2*Te.getVblen(e,t)},Te.getChildIdx=function(e,t){var r,n,i,o=Te,a=[];r=o.getVidx(e,t),n=2*o.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,n-=2),i=0;for(var s=r;i<=n;){var c=o.getTLVblen(e,s);if((i+=c)<=n&&a.push(s),s+=c,i>=n)break}return a},Te.getNthChildIdx=function(e,t,r){return Te.getChildIdx(e,t)[r]},Te.getIdxbyList=function(e,t,r,n){var i,o,a=Te;return 0==r.length?void 0!==n&&e.substr(t,2)!==n?-1:t:(i=r.shift())>=(o=a.getChildIdx(e,t)).length?-1:a.getIdxbyList(e,o[i],r,n)},Te.getIdxbyListEx=function(e,t,r,n){var i,o,a=Te;if(0==r.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;i=r.shift(),o=a.getChildIdx(e,t);for(var s=0,c=0;c<o.length;c++){var u=e.substr(o[c],2);if("number"==typeof i&&!a.isContextTag(u)&&s==i||"string"==typeof i&&a.isContextTag(u,i))return a.getIdxbyListEx(e,o[c],r,n);a.isContextTag(u)||s++}return-1},Te.getTLVbyList=function(e,t,r,n){var i=Te,o=i.getIdxbyList(e,t,r,n);return-1==o||o>=e.length?null:i.getTLV(e,o)},Te.getTLVbyListEx=function(e,t,r,n){var i=Te,o=i.getIdxbyListEx(e,t,r,n);return-1==o?null:i.getTLV(e,o)},Te.getVbyList=function(e,t,r,n,i){var o,a,s=Te;return-1==(o=s.getIdxbyList(e,t,r,n))||o>=e.length?null:(a=s.getV(e,o),!0===i&&(a=a.substr(2)),a)},Te.getVbyListEx=function(e,t,r,n,i){var o,a,s=Te;return-1==(o=s.getIdxbyListEx(e,t,r,n))?null:(a=s.getV(e,o),"03"==e.substr(o,2)&&!1!==i&&(a=a.substr(2)),a)},Te.getInt=function(e,t,r){null==r&&(r=-1);try{var n=e.substr(t,2);if("02"!=n&&"03"!=n)return r;var i=Te.getV(e,t);return"02"==n?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16),n=e.substr(2),i=parseInt(n,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-r),parseInt(i,2)}catch(e){return-1}}(i)}catch(e){return r}},Te.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:function(e){if(!he(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var i=e.substr(2),o=[],a=0;a<i.length/2;a++)o.push(parseInt(i.substr(2*a,2),16));var s=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=pe((127&o[a]).toString(2),7):(c+=pe((127&o[a]).toString(2),7),s.push(new String(parseInt(c,2))),c="");var u=t.join(".");return s.length>0&&(u=u+"."+s.join(".")),u}catch(e){return null}}(Te.getV(e,t))}catch(e){return r}},Te.getOIDName=function(e,t,r){null==r&&(r=null);try{var n=Te.getOID(e,t,r);if(n==r)return r;var i=u$2.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(e){return r}},Te.getString=function(e,t,r){null==r&&(r=null);try{return re(Te.getV(e,t))}catch(e){return r}},Te.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],n=e.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var o=e.substr(2),a=[],s=0;s<o.length/2;s++)a.push(parseInt(o.substr(2*s,2),16));var c=[],u="";for(s=0;s<a.length;s++)128&a[s]?u+=t((127&a[s]).toString(2),7):(u+=t((127&a[s]).toString(2),7),c.push(new String(parseInt(u,2))),u="");var l=r.join(".");return c.length>0&&(l=l+"."+c.join(".")),l},Te.dump=function(e,t,r,n){var i=Te,o=i.getV,a=i.dump,s=i.getChildIdx,c=e;e instanceof u$2.asn1.ASN1Object&&(c=e.getEncodedHex());var u=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var l,f=t.ommit_long_octet;if("01"==(l=c.substr(r,2)))return"00"==(h=o(c,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==l)return n+"INTEGER "+u(h=o(c,r),f)+"\n";if("03"==l){var h=o(c,r);return i.isASN1HEX(h.substr(2))?(A=n+"BITSTRING, encapsulates\n")+a(h.substr(2),t,0,n+"  "):n+"BITSTRING "+u(h,f)+"\n"}if("04"==l)return h=o(c,r),i.isASN1HEX(h)?(A=n+"OCTETSTRING, encapsulates\n")+a(h,t,0,n+"  "):n+"OCTETSTRING "+u(h,f)+"\n";if("05"==l)return n+"NULL\n";if("06"==l){var p=o(c,r),d=u$2.asn1.ASN1Util.oidHexToInt(p),m=u$2.asn1.x509.OID.oid2name(d),g=d.replace(/\./g," ");return""!=m?n+"ObjectIdentifier "+m+" ("+g+")\n":n+"ObjectIdentifier ("+g+")\n"}if("0a"==l)return n+"ENUMERATED "+parseInt(o(c,r))+"\n";if("0c"==l)return n+"UTF8String '"+ne(o(c,r))+"'\n";if("13"==l)return n+"PrintableString '"+ne(o(c,r))+"'\n";if("14"==l)return n+"TeletexString '"+ne(o(c,r))+"'\n";if("16"==l)return n+"IA5String '"+ne(o(c,r))+"'\n";if("17"==l)return n+"UTCTime "+ne(o(c,r))+"\n";if("18"==l)return n+"GeneralizedTime "+ne(o(c,r))+"\n";if("1a"==l)return n+"VisualString '"+ne(o(c,r))+"'\n";if("1e"==l)return n+"BMPString '"+le(o(c,r))+"'\n";if("30"==l){if("3000"==c.substr(r,4))return n+"SEQUENCE {}\n";A=n+"SEQUENCE\n";var v=t;if((2==(_=s(c,r)).length||3==_.length)&&"06"==c.substr(_[0],2)&&"04"==c.substr(_[_.length-1],2)){m=i.oidname(o(c,_[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=m,v=y}for(var b=0;b<_.length;b++)A+=a(c,v,_[b],n+"  ");return A}if("31"==l){A=n+"SET\n";var _=s(c,r);for(b=0;b<_.length;b++)A+=a(c,t,_[b],n+"  ");return A}if(0!=(128&(l=parseInt(l,16)))){var A,M=31&l;if(0!=(32&l)){for(A=n+"["+M+"]\n",_=s(c,r),b=0;b<_.length;b++)A+=a(c,t,_[b],n+"  ");return A}return h=o(c,r),Te.isASN1HEX(h)?(A=n+"["+M+"]\n")+a(h,t,0,n+"  "):(("68747470"==h.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==M)&&(h=ne(h)),n+"["+M+"] "+h+"\n")}return n+"UNKNOWN("+l+") "+o(c,r)+"\n"},Te.isContextTag=function(e,t){var r,n;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((n=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==n}catch(e){return!1}},Te.isASN1HEX=function(e){var t=Te;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),i=t.getL(e,0);return e.length-n.length-i.length==2*r},Te.checkStrictDER=function(e,t,r,n,i){var o=Te;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!u$2.lang.String.isHex(e))throw new Error("not hex string");r=e.length,i=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(o.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var a=o.getVblen(e,t);if(a>n)throw new Error("value of L too long than hex: idx="+t);var s=o.getTLV(e,t),c=s.length-2-o.getL(e,t).length;if(c!==2*a)throw new Error("V string length and L's value not the same:"+c+"/"+2*a);if(0===t&&e.length!=s.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var u=e.substr(t,2);if("02"===u){var l=o.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(u,16)){for(var f=o.getVblen(e,t),h=0,p=o.getChildIdx(e,t),d=0;d<p.length;d++)h+=o.getTLV(e,p[d]).length,o.checkStrictDER(e,p[d],r,n,i);if(2*f!=h)throw new Error("sum of children's TLV length and L unmatch: "+2*f+"!="+h)}},Te.oidname=function(e){var t=u$2.asn1;u$2.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==u$2.asn1&&u$2.asn1||(u$2.asn1={}),void 0!==u$2.asn1.x509&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(e){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERBitString,n=t.DERSequence,i=t.x509,o=i.TBSCertificate,a=i.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.sigalg;null!=e.sigalg.name&&(t=e.sigalg.name);var r=e.tbsobj.getEncodedHex(),n=new u$2.crypto.Signature({alg:t});n.init(e.cakey),n.updateHex(r),e.sighex=n.sign()},this.getPEM=function(){return ae(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var e=this.params;if(null!=e.tbsobj&&null!=e.tbsobj||(e.tbsobj=new o(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new a({name:e.sigalg})),t.push(new r({hex:"00"+e.sighex})),new n({array:t}).getEncodedHex()},null!=e&&(this.params=e)},Ae(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(e){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=u$2.asn1,r=t.x509,n=t.DERTaggedObject,i=t.DERInteger,o=t.DERSequence,a=r.AlgorithmIdentifier,s=r.Time,c=r.X500Name,u=r.Extensions,l=r.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(e){this.params=e},this.getEncodedHex=function(){var e=[],t=this.params;if(null!=t.version||1!=t.version){var r=2;null!=t.version&&(r=t.version-1);var f=new n({obj:new i({int:r})});e.push(f)}return e.push(new i(t.serial)),e.push(new a({name:t.sigalg})),e.push(new c(t.issuer)),e.push(new o({array:[new s(t.notbefore),new s(t.notafter)]})),e.push(new c(t.subject)),e.push(new l(we.getKey(t.sbjpubkey))),void 0!==t.ext&&t.ext.length>0&&e.push(new n({tag:"a3",obj:new u(t.ext)})),new u$2.asn1.DERSequence({array:e}).getEncodedHex()},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(e){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERSequence,n=t.x509;this.aParam=[],this.setByParam=function(e){this.aParam=e},this.getEncodedHex=function(){for(var e=[],t=0;t<this.aParam.length;t++){var i=this.aParam[t],o=i.extname,a=null;if(null!=i.extn)a=new n.PrivateExtension(i);else if("subjectKeyIdentifier"==o)a=new n.SubjectKeyIdentifier(i);else if("keyUsage"==o)a=new n.KeyUsage(i);else if("subjectAltName"==o)a=new n.SubjectAltName(i);else if("issuerAltName"==o)a=new n.IssuerAltName(i);else if("basicConstraints"==o)a=new n.BasicConstraints(i);else if("cRLDistributionPoints"==o)a=new n.CRLDistributionPoints(i);else if("certificatePolicies"==o)a=new n.CertificatePolicies(i);else if("authorityKeyIdentifier"==o)a=new n.AuthorityKeyIdentifier(i);else if("extKeyUsage"==o)a=new n.ExtKeyUsage(i);else if("authorityInfoAccess"==o)a=new n.AuthorityInfoAccess(i);else if("cRLNumber"==o)a=new n.CRLNumber(i);else if("cRLReason"==o)a=new n.CRLReason(i);else if("ocspNonce"==o)a=new n.OCSPNonce(i);else if("ocspNoCheck"==o)a=new n.OCSPNoCheck(i);else if("adobeTimeStamp"==o)a=new n.AdobeTimeStamp(i);else{if("subjectDirectoryAttributes"!=o)throw new Error("extension not supported:"+JSON.stringify(i));a=new n.SubjectDirectoryAttributes(i)}null!=a&&e.push(a)}return new r({array:e}).getEncodedHex()},null!=e&&this.setByParam(e)},Ae(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(e){u$2.asn1.x509.Extension.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERObjectIdentifier,n=t.DEROctetString;t.DERBitString;var i=t.DERBoolean,o=t.DERSequence;this.getEncodedHex=function(){var e=new r({oid:this.oid}),t=new n({hex:this.getExtnValueHex()}),a=new Array;return a.push(e),this.critical&&a.push(new i),a.push(t),new o({array:a}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},Ae(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(e){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=ze.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var r=e.names,n="000000000",i=0;i<r.length;i++)for(var o=0;o<t.length;o++)r[i]===t[o]&&(n=n.substring(0,o)+"1"+n.substring(o+1,n.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:n})}},Ae(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(e){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.DERBoolean,n=t.DERInteger,i=t.DERSequence;this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new r),this.pathLen>-1&&e.push(new n({int:this.pathLen}));var t=new i({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},Ae(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(e){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){for(var n=[],i=0;i<e.length;i++)if(e[i]instanceof u$2.asn1.ASN1Object)n.push(e[i]);else{var o=new r.DistributionPoint(e[i]);n.push(o)}this.asn1ExtnValue=new t.DERSequence({array:n})},this.setByOneURI=function(e){var t=new r.DistributionPoint({fulluri:e});this.setByDPArray([t])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},Ae(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(e){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=u$2.asn1,r=t.x509.DistributionPointName;this.getEncodedHex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var r=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(r)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.dpobj?this.asn1DP=e.dpobj:void 0!==e.dpname?this.asn1DP=new r(e.dpname):void 0!==e.fulluri&&(this.asn1DP=new r({full:[{uri:e.fulluri}]})))},Ae(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(e){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e)if(t.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else{if(void 0===e.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new t.x509.GeneralNames(e.full)}},Ae(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(e){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.x509,n=t.DERSequence,i=r.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new i(this.params.array[t]));var r=new n({array:e});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(e){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=t.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new n(this.params.policyoid)];if(void 0!==this.params.array){for(var t=[],o=0;o<this.params.array.length;o++)t.push(new i(this.params.array[o]));t.length>0&&e.push(new r({array:t}))}return new r({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(e){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.DERSequence,n=t.DERIA5String,i=t.DERObjectIdentifier,o=t.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return void 0!==this.params.cps?new r({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]}).getEncodedHex():null!=this.params.unotice?new r({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new o(this.params.unotice)]}).getEncodedHex():void 0},void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(e){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var r=u$2.asn1.x509.DisplayText,n=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new n(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new r(this.params.exptext)),new t({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(e){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=u$2.asn1.DERSequence,r=u$2.asn1.DERInteger,n=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var e=[];if(void 0!==this.params.org&&e.push(new n(this.params.org)),void 0!==this.params.noticenum){for(var i=[],o=this.params.noticenum,a=0;a<o.length;a++)i.push(new r(o[a]));e.push(new t({array:i}))}if(0==e.length)throw new Error("parameter is empty");return new t({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(e){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},Ae(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(e){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=u$2.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var r=0;r<e.length;r++){var n=new t.DERObjectIdentifier(e[r]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},Ae(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(e){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=u$2,r=t.asn1,n=r.DERTaggedObject,i=r.x509.GeneralNames;t.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:new i([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new r.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new u$2.asn1.DEROctetString(e);else if("object"==_typeof2(e)&&u$2.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN ")){var t=e;"string"==typeof e&&(t=we.getKey(e));var r=we.getKeyID(t);this.asn1KID=new u$2.asn1.DEROctetString({hex:r})}},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){if(void 0!==e.str||void 0!==e.bigint||void 0!==e.hex)this.asn1CertSN=new u$2.asn1.DERInteger(e);else if("string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")){var t=new ze;t.readCertPEM(e);var r=t.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:r})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},Ae(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(e){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new t(e);else if("object"==_typeof2(e)&&u$2.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN")){var r=e;"string"==typeof e&&(r=we.getKey(e));var n=we.getKeyID(r);this.asn1KID=new u$2.asn1.DEROctetString({hex:n})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},Ae(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(e){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,r=u$2.asn1,n=r.DERSequence,i=r.DERObjectIdentifier,o=r.x509.GeneralName,a=0;a<e.length;a++){var s,c=e[a];if(void 0!==c.ocsp)s=new n({array:[new i({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:c.ocsp})]});else{if(void 0===c.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(c));s=new n({array:[new i({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:c.caissuer})]})}t.push(s)}this.asn1ExtnValue=new n({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},Ae(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(e){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Ae(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(e){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Ae(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(e){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,i=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++){var o=this.params.array[t],a={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==o.attr)a.seq[0].oid=i(o.attr),a.seq[1].set[0]={gentime:o.str};else if("placeOfBirth"==o.attr)a.seq[0].oid=i(o.attr),a.seq[1].set[0]={utf8str:o.str};else if("gender"==o.attr)a.seq[0].oid=i(o.attr),a.seq[1].set[0]={prnstr:o.str};else if("countryOfCitizenship"==o.attr)a.seq[0].oid=i(o.attr),a.seq[1].set[0]={prnstr:o.str};else{if("countryOfResidence"!=o.attr)throw new Error("unsupported attribute: "+o.attr);a.seq[0].oid=i(o.attr),a.seq[1].set[0]={prnstr:o.str}}e.push(new n(a))}var s=new r({array:e});return this.asn1ExtnValue=s,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",void 0!==e&&(this.params=e)},Ae(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(e){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=u$2,r=t.lang.String.isHex,n=t.asn1,i=n.x509.OID.name2oid,o=n.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.oid=i(e.extname),this.params=e},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var e=this.params.extn;if("string"==typeof e&&r(e))return e;if("object"==_typeof2(e))try{return o(e).getEncodedHex()}catch(e){}throw new Error("unsupported extn value")},null!=e&&this.setByParam(e)},Ae(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(e){u$2.asn1.x509.CRL.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERSequence,n=t.DERBitString,i=t.x509,o=i.AlgorithmIdentifier,a=i.TBSCertList;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=new a(this.params).getEncodedHex(),t=new u$2.crypto.Signature({alg:this.params.sigalg});t.init(this.params.cakey),t.updateHex(e);var r=t.sign();this.params.sighex=r},this.getPEM=function(){return ae(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var e=this.params;if(null==e.tbsobj&&(e.tbsobj=new a(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new o({name:e.sigalg})),t.push(new n({hex:"00"+e.sighex})),new r({array:t}).getEncodedHex()},null!=e&&(this.params=e)},Ae(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(e){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERInteger,n=t.DERSequence,i=t.DERTaggedObject;t.DERObjectIdentifier;var o=t.x509,a=o.AlgorithmIdentifier,s=o.Time,c=o.Extensions,u=o.X500Name;this.params=null,this.setByParam=function(e){this.params=e},this.getRevCertSequence=function(){for(var e=[],t=this.params.revcert,i=0;i<t.length;i++){var o=[new r(t[i].sn),new s(t[i].date)];null!=t[i].ext&&o.push(new c(t[i].ext)),e.push(new n({array:o}))}return new n({array:e})},this.getEncodedHex=function(){var e=[],t=this.params;if(null!=t.version){var o=t.version-1,l=new r({int:o});e.push(l)}if(e.push(new a({name:t.sigalg})),e.push(new u(t.issuer)),e.push(new s(t.thisupdate)),null!=t.nextupdate&&e.push(new s(t.nextupdate)),null!=t.revcert&&e.push(this.getRevCertSequence()),null!=t.ext){var f=new c(t.ext);e.push(new i({tag:"a0",explicit:!0,obj:f}))}return new n({array:e}).getEncodedHex()},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(e){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=u$2.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},Ae(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(e){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",null!=e&&(this.params=e)},Ae(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(e){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",null!=e&&(this.params=e)},Ae(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(e){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=e&&(this.params=e)},Ae(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(e){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=e&&(this.params=e)},Ae(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(e){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=u$2.asn1,r=t.DERInteger,n=t.DERBoolean,i=t.DERSequence,o=t.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[new r(1)];return t.push(new o({uri:e.uri})),null!=e.reqauth&&t.push(new n(e.reqauth)),this.asn1ExtnValue=new i({array:t}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(e){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=u$2.asn1,r=t.x509,n=r.RDN;this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.split("/");r.shift();for(var i=[],o=0;o<r.length;o++)if(r[o].match(/^[^=]+=.+$/))i.push(r[o]);else{var a=i.length-1;i[a]=i[a]+"/"+r[o]}for(o=0;o<i.length;o++)this.asn1Array.push(new n({str:i[o],rule:this.sRule}))},this.setByLdapString=function(e,t){void 0!==t&&(this.sRule=t);var n=r.X500Name.ldapToCompat(e);this.setByString(n,t)},this.setByObject=function(e,t){for(var r in void 0!==t&&(this.sRule=t),e)if(e.hasOwnProperty(r)){var i=new n({str:r+"="+e[r],rule:this.sRule});this.asn1Array?this.asn1Array.push(i):this.asn1Array=[i]}},this.setByParam=function(e){var t;void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.array?this.paramArray=e.array:void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):void 0!==e.hex?this.hTLV=e.hex:void 0!==e.certissuer?((t=new ze).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()):void 0!==e.certsubject?((t=new ze).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex()):"object"==_typeof2(e)&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r={array:this.paramArray[e]};"utf8"!=this.sRule&&(r.rule=this.sRule);var i=new n(r);this.asn1Array.push(i)}var o=new t.DERSequence({array:this.asn1Array});return this.hTLV=o.getEncodedHex(),this.hTLV},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map((function(e){return e.replace(/,/,"\\,")}))).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(e){return u$2.asn1.x509.X500Name.compatToLDAP(e)},u$2.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],i=0;t.length>0;i++){var o=t.shift();if(!0===r){var a=(n.pop()+","+o).replace(/\\,/g,",");n.push(a),r=!1}else n.push(o);"\\"===o.substr(-1,1)&&(r=!0)}return(n=n.map((function(e){return e.replace("/","\\/")}))).reverse(),"/"+n.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(e){return u$2.asn1.x509.X500Name.ldapToCompat(e)},u$2.asn1.x509.RDN=function(e){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(e){void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.str&&this.addByMultiValuedString(e.str),void 0!==e.array&&(this.paramArray=e.array)},this.addByString=function(e){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:e,rule:this.sRule}))},this.addByMultiValuedString=function(e){for(var t=u$2.asn1.x509.RDN.parseString(e),r=0;r<t.length;r++)this.addByString(t[r])},this.getEncodedHex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r=this.paramArray[e];void 0!==r.rule&&"utf8"!=this.sRule&&(r.rule=this.sRule);var n=new t(r);this.asn1Array.push(n)}var i=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=i.getEncodedHex(),this.TLV},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],i=0;t.length>0;i++){var o=t.shift();if(!0===r){var a=(n.pop()+"+"+o).replace(/\\\+/g,"+");n.push(a),r=!1}else n.push(o);"\\"===o.substr(-1,1)&&(r=!0)}var s=!1,c=[];for(i=0;n.length>0;i++){if(o=n.shift(),!0===s){var u=c.pop();o.match(/"$/)?(a=(u+"+"+o).replace(/^([^=]+)="(.*)"$/,"$1=$2"),c.push(a),s=!1):c.push(u+"+"+o)}else c.push(o);o.match(/^[^=]+="/)&&(s=!0)}return c},u$2.asn1.x509.AttributeTypeAndValue=function(e){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=u$2,r=t.asn1,n=r.DERSequence,i=r.DERUTF8String,o=r.DERPrintableString,a=r.DERTeletexString,s=r.DERIA5String,c=r.DERVisibleString,u=r.DERBMPString,l=t.lang.String.isMail,f=t.lang.String.isPrintable;this.setByParam=function(e){if(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.ds&&(this.dsType=e.ds),void 0===e.value&&void 0!==e.str){var t=e.str.match(/^([^=]+)=(.+)$/);if(!t)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=t[1],this.sValue=t[2]}else this.sType=e.type,this.sValue=e.value},this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.match(/^([^=]+)=(.+)$/);if(!r)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(r[1],r[2])},this._getDsType=function(){var e=this.sType,t=this.sValue,r=this.sRule;return"prn"===r?"CN"==e&&l(t)?"ia5":f(t)?"prn":"utf8":"utf8"===r?"CN"==e&&l(t)?"ia5":"C"==e?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(e,t,r){void 0!==r&&(this.sRule=r),this.sType=e,this.sValue=t},this.getValueObj=function(e,t){if("utf8"==e)return new i({str:t});if("prn"==e)return new o({str:t});if("tel"==e)return new a({str:t});if("ia5"==e)return new s({str:t});if("vis"==e)return new c({str:t});if("bmp"==e)return new u({str:t});throw new Error("unsupported directory string type: type="+e+" value="+t)},this.getEncodedHex=function(){null==this.dsType&&(this.dsType=this._getDsType());var e=u$2.asn1.x509.OID.atype2obj(this.sType),t=this.getValueObj(this.dsType,this.sValue),r=new n({array:[e,t]});return this.TLV=r.getEncodedHex(),this.TLV},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(e){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=u$2,r=t.asn1,n=r.DERInteger,i=r.DERBitString,o=r.DERObjectIdentifier,a=r.DERSequence,s=r.ASN1Util.newObject,c=r.x509.AlgorithmIdentifier,u=t.crypto;u.ECDSA,u.DSA,this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new a({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof K$1){var t=s({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+t})}}catch(e){}try{if(e instanceof u$2.crypto.ECDSA){var r=new o({name:e.curveName});this.asn1AlgId=new c({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new i({hex:"00"+e.pubKeyHex})}}catch(e){}try{if(e instanceof u$2.crypto.DSA){r=new s({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new c({name:"dsa",asn1params:r});var a=new n({bigint:e.y});this.asn1SubjPKey=new i({hex:"00"+a.getEncodedHex()})}}catch(e){}},void 0!==e&&this.setPubKey(e)},Ae(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(e){u$2.asn1.x509.Time.superclass.constructor.call(this);var t=u$2.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},Ae(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(e){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=u$2.asn1,r=t.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e=null;for(var n in r)n===this.nameAlg&&(e=r[n]);if(null!==e)return this.hTLV=e,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var i=[this.asn1Alg];null!==this.asn1Params&&i.push(this.asn1Params);var o=new t.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},Ae(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(e){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},r=u$2.asn1;r.DERSequence;var n=r.DEROctetString,i=r.DERIA5String,o=r.DERTaggedObject,a=r.ASN1Object,s=r.x509.X500Name,c=ue;this.explicit=!1,this.setByParam=function(e){var r=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",r=new i({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",r=new i({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",r=new i({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,r="string"==typeof e.dn?new s({str:e.dn}):e.dn instanceof u$2.asn1.x509.X500Name?e.dn:new s(e.dn)),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,r=new s({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var u=null;if((f=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(u=c(f)),null==u)throw"certissuer param not cert";(h=new ze).hex=u;var l=h.getIssuerHex();(r=new a).hTLV=l}if(void 0!==e.certsubj){var f,h;if(this.type="dn",this.explicit=!0,u=null,(f=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(u=c(f)),null==u)throw"certsubj param not cert";(h=new ze).hex=u,l=h.getSubjectHex(),(r=new a).hTLV=l}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var p,d=e.ip,m="malformed IP address";if(d.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(p=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}}("["+d.split(".").join(",")+"]")).length)throw m}else if(d.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))p=function(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),i=(e=e.replace("::",n)).split(":");if(8!=i.length)throw t;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}(d);else{if(!d.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw m;p=d}r=new n({hex:p})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new o({explicit:this.explicit,tag:t[this.type],obj:r})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},Ae(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(e){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=u$2.asn1;this.setByParamArray=function(e){for(var r=0;r<e.length;r++){var n=new t.x509.GeneralName(e[r]);this.asn1Array.push(n)}},this.getEncodedHex=function(){return new t.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},Ae(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=this.name2oidList[e],r=new u$2.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=r,r},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];var t;if(e.match(/^\d+\.\d+\.[0-9.]+$/))t=e;else if(void 0!==this.atype2oidList[e])t=this.atype2oidList[e];else{if(void 0===this.name2oidList[e])throw"AttributeType name undefined: "+e;t=this.name2oidList[e]}var r=new u$2.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=r,r}},u$2.asn1.x509.OID.oid2name=function(e){var t=u$2.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""},u$2.asn1.x509.OID.oid2atype=function(e){var t=u$2.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e},u$2.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=u$2.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(e){var t=u$2.asn1.x509;return t.TBSCertificate,new t.Certificate(e).getPEM()},K$1.getPosArrayOfChildrenFromHex=function(e){return Te.getChildIdx(e,0)},K$1.getHexValueArrayOfChildrenFromHex=function(e){var t,r=Te.getV,n=r(e,(t=K$1.getPosArrayOfChildrenFromHex(e))[0]),i=r(e,t[1]),o=r(e,t[2]),a=r(e,t[3]),s=r(e,t[4]),c=r(e,t[5]),u=r(e,t[6]),l=r(e,t[7]),f=r(e,t[8]);return(t=new Array).push(n,i,o,a,s,c,u,l,f),t},K$1.prototype.readPrivateKeyFromPEMString=function(e){var t=ue(e),r=K$1.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},K$1.prototype.readPKCS5PrvKeyHex=function(e){var t=K$1.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},K$1.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,o,a,s,c,u=Te,l=u.getVbyListEx;if(!1===u.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),r=l(e,0,[2,0,2],"02"),n=l(e,0,[2,0,3],"02"),i=l(e,0,[2,0,4],"02"),o=l(e,0,[2,0,5],"02"),a=l(e,0,[2,0,6],"02"),s=l(e,0,[2,0,7],"02"),c=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,i,o,a,s,c)},K$1.prototype.readPKCS5PubKeyHex=function(e){var t=Te,r=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=r(e,n[0]),o=r(e,n[1]);this.setPublic(i,o)},K$1.prototype.readPKCS8PubKeyHex=function(e){var t=Te;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},K$1.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new ze).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)},K$1.prototype.sign=function(e,t){var r,n=(r=e,u$2.crypto.Util.hashString(r,t));return this.signWithMessageHash(n,t)},K$1.prototype.signWithMessageHash=function(e,t){var r=W$2(u$2.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return xe(this.doPrivate(r).toString(16),this.n.bitLength())},K$1.prototype.signPSS=function(e,t,r){var n,i=(n=oe(e),u$2.crypto.Util.hashHex(n,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,t,r)},K$1.prototype.signWithMessageHashPSS=function(e,t,r){var n,i=re(e),o=i.length,a=this.n.bitLength()-1,s=Math.ceil(a/8),c=function(e){return u$2.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=o;else if(-2===r)r=s-o-2;else if(r<-2)throw new Error("invalid salt length");if(s<o+r+2)throw new Error("data too long");var u="";r>0&&(u=new Array(r),(new G$1).nextBytes(u),u=String.fromCharCode.apply(String,u));var l=re(c(oe("\0\0\0\0\0\0\0\0"+i+u))),f=[];for(n=0;n<s-r-o-2;n+=1)f[n]=0;var h=String.fromCharCode.apply(String,f)+""+u,p=Ee(l,h.length,c),d=[];for(n=0;n<h.length;n+=1)d[n]=h.charCodeAt(n)^p.charCodeAt(n);var m=65280>>8*s-a&255;for(d[0]&=~m,n=0;n<o;n++)d.push(l.charCodeAt(n));return d.push(188),xe(this.doPrivate(new h$2(d)).toString(16),this.n.bitLength())},K$1.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=W$2(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var o=je(i.replace(/^1f+00/,""));if(0==o.length)return!1;var a,s=o[0];return o[1]==(a=e,u$2.crypto.Util.hashString(a,s))},K$1.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=W$2(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=je(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==e)},K$1.prototype.verifyPSS=function(e,t,r,n){var i=function(e){return u$2.crypto.Util.hashHex(e,r)}(oe(e));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(i,t,r,n)},K$1.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new h$2(t,16),a=function(e){return u$2.crypto.Util.hashHex(e,r)},s=re(e),c=s.length,u=this.n.bitLength()-1,l=Math.ceil(u/8);if(-1===n||void 0===n)n=c;else if(-2===n)n=l-c-2;else if(n<-2)throw new Error("invalid salt length");if(l<c+n+2)throw new Error("data too long");var f=this.doPublic(o).toByteArray();for(i=0;i<f.length;i+=1)f[i]&=255;for(;f.length<l;)f.unshift(0);if(188!==f[l-1])throw new Error("encoded message does not end in 0xbc");var h=(f=String.fromCharCode.apply(String,f)).substr(0,l-c-1),p=f.substr(h.length,c),d=65280>>8*l-u&255;if(0!=(h.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var m=Ee(p,h.length,a),g=[];for(i=0;i<h.length;i+=1)g[i]=h.charCodeAt(i)^m.charCodeAt(i);g[0]&=~d;var v=l-c-n-2;for(i=0;i<v;i+=1)if(0!==g[i])throw new Error("leftmost octets not zero");if(1!==g[v])throw new Error("0x01 marker not found");return p===re(a(oe("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,g.slice(-n)))))},K$1.SALT_LEN_HLEN=-1,K$1.SALT_LEN_MAX=-2,K$1.SALT_LEN_RECOVER=-2,ze.hex2dn=function(e,t){void 0===t&&(t=0);var r=new ze;return Te.getTLV(e,t),r.getX500Name(e).str},ze.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var r=new Array,n=Te.getChildIdx(e,t),i=0;i<n.length;i++)r.push(ze.hex2attrTypeValue(e,n[i]));return(r=r.map((function(e){return e.replace("+","\\+")}))).join("+")},ze.hex2attrTypeValue=function(e,t){var r=Te,n=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=r.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var o=n(e,i[0]),a=u$2.asn1.ASN1Util.oidHexToInt(o);return u$2.asn1.x509.OID.oid2atype(a)+"="+re(n(e,i[1]))},ze.getPublicKeyFromCertHex=function(e){var t=new ze;return t.readCertHex(e),t.getPublicKey()},ze.getPublicKeyFromCertPEM=function(e){var t=new ze;return t.readCertPEM(e),t.getPublicKey()},ze.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=Te.getVbyList,i={algparam:null};return(t=new ze).readCertPEM(e),r=t.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},ze.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var be,Oe=[(be=new ze,be.readCertPEM(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@\tPPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg\tR^ZNATN>bROU^zc}nzyg\tR]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\\QN>Z\tN\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg\tR^ZNATN>bROU^zc}nzyg\tR]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@ebN[bqx=ng?\tS^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFoFgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP\tP>}A^VP}Ex\bUZa=syDw}>Ya8wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr\tsof[wA}e{\\z}w[YDQ|dt=wC\tNvbRZ@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`N\0RXt^Z}vEpdC=\bY?=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac\tZ\tguf\bF]DCP?znNYf\tuaYu[`=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB\tD8{B>\\sPYbEU\tFQXz\0@`zsqgfD\0[WY\bPeZc}\t\0bx?Rfed}BUe|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YBY`Ffg=sY>{t<fu]xrFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=\tPCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=\tPCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=EnO}Pud8TA\t?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V\tOUwY=>X[\\E`tW[8}VwpFBQcnrPF}yUtd8<Doe_\b[oOVUep@pYY\0cegY{r\t?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<StX\tNx\0\b\t\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V\tCVrRVtAAc[\tQp|d|tqoQ=T|XX\t=u\\N8XNCx\\aU>wz\tX<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ\tP\bZ\b\\YNNSZ_\\w^|TsD8db\t_\tY\\o^Cw>Z\0x\\^aN]wWf\bA}\tC^d_{ZC@\by]gY@E\tBFY?OsaqbDcVgQbZeFc\tovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z\tZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),be)];function Se(e,t){var r=e.getIssuerHex();if(r===e.getSubjectHex())return e.verifySignature(e.getPublicKey());var n=function(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(i.getSubjectHex()===e)return i}}(r,t);return!!n&&!1!==e.verifySignature(n.getPublicKey())&&Se(n,t)}function Le(e){return e.getIssuerHex()!==e.getSubjectHex()&&Se(e,Oe)}!function(e){var t=new ze;"string"==typeof e?t.readCertPEM(e):t.readCertHex(e.hex),Le(t),Oe.push(t)}(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU\tPPONrtNVONtVWNW=_SVw\tVE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg\tR^ZNATN>bROU^zc}nzyg\tR]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ\t[QSnS=\b[aNBZQZ\\aZ\t[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg\tR^ZNATN>bROU^zc}nzyg\tRbZOVTN>bRPtYoTyuoz}}f`Bwo?=RQN\\Ot[cONZO>Wyfd\tgdbRaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdyndB{^T}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F\tSAe`tn[t\tu\b8^a]qx\bE_^ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQFO=Yw\0_TePCOFV@|N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]\tb=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r\tAo\0\tF`fdzCnRtq\br\t\b8eBp=Z\\TRaadc}@Eub`quuNqAdF\0aUay{}x>tgVz`\t_YBFwu_q?egt8v[o\x008\twTQcrA\t<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw\tXDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYPdWV]OE^\bOFwA}<uXoO}_NDz8aonzWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|\tOZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO\td_D}eBb?Uq^b\t[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zUxOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`FyWadZcAD\tpeXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=\tPCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx\ta[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`\t?^x>X}esa{>\\r?eE]CC_cZ[vQs\t\t>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC>>gvb}ACd\t``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc\tXSq\t{\0DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy\tRNRg@NZCaaq8?`\t^`?ryD\t=obzw?E]Ou]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug8^f[YQAWad8FNqxFQE?ZOo\t}RnO\bsQc\txyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var ke=2*Math.PI,Ce=Math.PI/2;function Pe(e){return e>0&&e<=ke?e:(e%ke+ke)%ke}var _e=function(e){function t(t){var r=e.call(this,t,1,.1,1e3)||this;return r.pose={longitude:0,latitude:0,fov:t,distance:0,offset:new r$3.Vector3},r.computePose(),r}return t$3.__extends(t,e),t.prototype.computePose=function(){var e=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Pe(-Math.atan2(e.x,-e.z)),this.pose.latitude=-Math.asin(e.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},t.prototype.setFromPose=function(e){var t,r,n,i,o,a=Pe(null!==(t=e.longitude)&&void 0!==t?t:this.pose.longitude),s=Math.max(1e-4-Ce,Math.min(Ce-1e-4,null!==(r=e.latitude)&&void 0!==r?r:this.pose.latitude)),c=null!==(n=e.fov)&&void 0!==n?n:this.pose.fov,u=null!==(i=e.distance)&&void 0!==i?i:this.pose.distance,l=null!==(o=e.offset)&&void 0!==o?o:this.pose.offset,f=function(e){var t=Math.abs(Math.cos(e.latitude));return new r$3.Vector3(-Math.sin(e.longitude)*t,-Math.sin(e.latitude),-Math.cos(e.longitude)*t)}({longitude:a,latitude:s}).normalize();return this.position.set(0,0,0),this.lookAt(f),this.position.add(l).sub(f.clone().setLength(u)),this.fov!==c&&(this.fov=c,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=a,this.pose.latitude=s,this.pose.fov=c,this.pose.distance=u,this.pose.offset.copy(l),this},t.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},t}(r$3.PerspectiveCamera),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return t$3.__extends(t,e),t.prototype.add=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.add.apply(this,t)},t.prototype.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.remove.apply(this,t)},t}(r$3.Scene),Ue=function(e){function t(t){var r=t.preserveDrawingBuffer,n=void 0===r||r,i=t.backgroundColor,o=void 0===i?1579548:i,a=t.backgroundAlpha,s=void 0===a?1:a,c=t.pixelRatio,u=void 0===c?1:c,l=t.antialias,f=void 0!==l&&l,h=e.call(this,{antialias:f,preserveDrawingBuffer:n,alpha:s<1})||this;return h.setPixelRatio(u),h.setClearColor(o,s),h.outputEncoding=r$3.sRGBEncoding,h.autoClear=!0,h}return t$3.__extends(t,e),t}(r$3.WebGLRenderer);function Re(e){return null==e}function Qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function Ye(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Fe(){return(Ye()+Ye()+"-"+Ye()+"-4"+Ye().substr(0,3)+"-"+Ye()+"-"+Ye()+Ye()+Ye()).toLowerCase()}function Ve(e,t,r){var n=Math.abs(e-t);return n<.001||void 0!==r&&Math.abs(r-n)<.001}function He(e,t,r){return!Ve(e,t,r)}function Ge(e,t){return e.distanceTo(t)<.001}function We(e,t){return!Ge(e,t)}var qe="undefined"!=typeof performance&&void 0!==performance.timing?performance.timing.navigationStart:Date.now(),Ke="undefined"!=typeof performance?function(){return qe+performance.now()}:function(){return Date.now()},Ze=function(){if("undefined"!=typeof window){var e=window;return e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16)}}return function(e){return setTimeout(e,16)}}(),Xe=function(){function e(){this.frames=[],this.stoped=!1,this.time=Ke(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(e,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new e),this.sharedInstance},enumerable:!1,configurable:!0}),e.prototype.loop=function(){if(!this.stoped){var e=Ke(),t=e-this.time;this.time=e;for(var r=[],n=0,i=this.frames;n<i.length;n++){var o=i[n];if(o.delay>0)o.delay=o.delay-1;else{try{o.callback(e,t)}catch(e){console.error(e)}o.once&&r.push(o)}}r.length>0&&(this.frames=this.frames.filter((function(e){return-1===r.indexOf(e)}))),Ze(this.loop)}},e.prototype.remove=function(e){var t=this.frames.indexOf(e);t>=0&&this.frames.splice(t,1)},e.prototype.add=function(e,t,r,n){var i=this;void 0===t&&(t=!1),void 0===r&&(r=0),void 0===n&&(n=5);var o={callback:e,once:t,delay:r,order:n};return this.frames.push(o),this.frames.sort((function(e,t){return e.order-t.order})),function(){return i.remove(o)}},e.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},e.prototype.getFrameTime=function(e){return this.add((function(t,r){return e(r)}),!0,0,0)},e}(),Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floorIndex=0,t.needsRender=!0,t}return t$3.__extends(t,e),t}(r$3.Mesh),$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.needsRender=!0,t.enableTransparent=!0,t}return t$3.__extends(t,e),t.prototype.getTransparent=function(){return this.enableTransparent},t.prototype.setTransparent=function(e){this.enableTransparent=e,this.traverse((function(t){t instanceof Je&&t.material.forEach((function(t){t.transparent=e}))}))},t.prototype.getMaterial=function(){var e=null;return this.traverse((function(t){if(null===e&&t instanceof Je){var r=t.material[0];e={pano0:r.pano0,pano1:r.pano1,modelAlpha:r.modelAlpha,progress:r.progress,useBlackTransition:r.useBlackTransition,perspToOrtho:r.perspToOrtho,opacity:r.opacity}}})),e},t.prototype.setMaterial=function(e){this.traverse((function(t){t instanceof Je&&t.material.forEach((function(t){void 0!==e.pano0&&(t.pano0=e.pano0),void 0!==e.pano1&&(t.pano1=e.pano1),void 0!==e.modelAlpha&&(t.modelAlpha=e.modelAlpha),void 0!==e.progress&&(t.progress=e.progress),void 0!==e.useBlackTransition&&(t.useBlackTransition=e.useBlackTransition),void 0!==e.perspToOrtho&&(t.perspToOrtho=e.perspToOrtho),void 0!==e.opacity&&(t.opacity=e.opacity)}))}))},t.prototype.disposeMaterial=function(){this.traverse((function(e){if(e instanceof Je){var t=[];e.material.forEach((function(e){var r=e.uniforms;Object.keys(r).map((function(e){if(/^pano\d\_/.test(e))r[e].value=null;else{var n=r[e].value;n&&"function"==typeof n.dispose&&-1===t.indexOf(n)&&(r[e].value=null,t.push(n))}})),e.dispose()})),t.forEach((function(e){return e.dispose()}))}}))},t.prototype.disposeGeometry=function(){this.traverse((function(e){e instanceof Je&&e.geometry.dispose()}))},t}(r$3.Group),et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floorIndex=0,t}return t$3.__extends(t,e),t}($e),tt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}("{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrrK0v{pyqr-I?l}nlrrK0v{pyqr-Ip|y|l}nlrrK|vq-znv{56-\n--0v{pyqr-IlrrK--0v{pyqr-I?lrrK--0v{pyqr-Ip|y|lrrK--0v{pyqr-Iortv{{|znylrrK--0v{pyqr-Iqrsny{|znylrrK--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv-7-n{s|zrqH--[|zny-J-{|znyv\tr5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\b\tH--|yq]|vv|{-J-5z|qryZnv-7-n{s|zrq6;\b\tH--tyl]|vv|{-J-}|wrpv|{Znv-7-z|qrycvrZnv-7-n{s|zrqH--<<-修正正交相机模拟--rp@-pnzrn[|zny-J-5z|qrycvrZnv-7-rpA5=;=9-=;=9->;=9-=;=66;\b\tH--sy|n-|u|Qvn{pr-J-zn5=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;-J-zv5-tyl]|vv|{;9-tyl]|vv|{;-7-5-tyl]|vv|{;\t-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv5-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;\t-<-|u|Qvn{pr-69-}r}a|\\u|-6H\f"),it=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznvH0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznvH0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv\trH{vs|z-znA-}n{|cvqr|lznvH{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;9-rp|;\t6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-调整曝光值--vnqvn{pr-J-vnqvn{pr-7-r}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-减少方向光对模型的影响--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-修复黑色面片的问题--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\b\t9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr-J-5|yq]|vv|{-:-}n{|=lznvh@j;\b\t6-7-zn@5}n{|=lznv6H--rp@-}n{|>a|crr-J-5|yq]|vv|{-:-}n{|>lznvh@j;\b\t6-7-zn@5}n{|>lznv6H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-rrPor5}n{|=lzn}9-}n{|=a|crr6H--rpA-}n{|>P|y|-J-rrPor5}n{|>lzn}9-}n{|>a|crr6H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-rrPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr6;H----}n{|>P|y|;n-J->;=-:-rrPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr6;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv5}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv5}n{|P|y|9-}n{|>P|y|9-zn5=;=9-oynpx]|tr-:-?;=66H--0ryr----}n{|P|y|-J-zv5}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr-J-|yq]|vv|{-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr9->;=6-7-}n{|cvqr|lznvH----rp?--J-rp?5------=;B-8-zn}P||q;-<-zn}P||q;\t-<-}n{|cvqr|lv\tr;9------=;B-:-zn}P||q;\b-<-zn}P||q;\t-<-}n{|cvqr|lv\tr;\b----6H----rpA-vqr|P|y|-J-rr?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;\t66-7-5>;=-:-r}5=;B9-no5;-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv5}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv5}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function nt(){return"undefined"==typeof document?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var rt=nt();rt.width=rt.height=8;var ot=new r$3.Texture(rt);ot.name="EMPTY_TEXTURE";var st=new r$3.CubeTexture([rt,rt,rt,rt,rt,rt]);st.name="EMPTY_CUBE_TEXTURE",ot.dispose=st.dispose=function(){};var at=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(st),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(st),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),ut=function(e){function t(t){var r,n,i,o,a,s,c;void 0===t&&(t={});var u=e.call(this,{vertexShader:tt,fragmentShader:it,uniforms:r$3.UniformsUtils.clone(at),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$3.NoBlending,lights:!0})||this;return Object.defineProperties(u,{pano0:{get:function(){return this.uniforms.pano0_map.value===st?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(e){null===e?(this.uniforms.pano0_map.value=st,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=e.map,this.uniforms.pano0_luminanceMap.value=e.luminanceMap,this.uniforms.pano0_matrix.value.copy(e.matrix));var t=null!==this.uniforms.pano0_luminanceMap.value&&null!==this.uniforms.pano1_luminanceMap.value;this.defines.USE_LUMINANCE!==t&&(this.defines.USE_LUMINANCE=t,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===st?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(e){null===e?(this.uniforms.pano1_map.value=st,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=e.map,this.uniforms.pano1_luminanceMap.value=e.luminanceMap,this.uniforms.pano1_matrix.value.copy(e.matrix));var t=null!==this.uniforms.pano0_luminanceMap.value&&null!==this.uniforms.pano1_luminanceMap.value;this.defines.USE_LUMINANCE!==t&&(this.defines.USE_LUMINANCE=t,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(e){this.uniforms.modelAlpha.value=e}},progress:{get:function(){return this.uniforms.progress.value},set:function(e){this.uniforms.progress.value=e}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(e){this.defines.USE_BLACK_TRANSITION!==e&&(this.defines.USE_BLACK_TRANSITION=e,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e;var t=e<1?r$3.NormalBlending:r$3.NoBlending;t!==this.blending&&(this.blending=t,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(e){this.uniforms.perspToOrtho.value=e}}}),u.pano0=null!==(r=t.pano0)&&void 0!==r?r:null,u.pano1=null!==(n=t.pano1)&&void 0!==n?n:null,u.modelAlpha=null!==(i=t.modelAlpha)&&void 0!==i?i:1,u.progress=null!==(o=t.progress)&&void 0!==o?o:0,u.useBlackTransition=null!==(a=t.useBlackTransition)&&void 0!==a&&a,u.perspToOrtho=null!==(s=t.perspToOrtho)&&void 0!==s?s:0,u.opacity=null!==(c=t.opacity)&&void 0!==c?c:1,u.originOpacity=1,u}return t$3.__extends(t,e),t}(r$3.ShaderMaterial),ct=new r$3.Vector3(0,0,0),lt=function(e){function t(t,r){void 0===r&&(r=ct);var n=e.call(this)||this,i=new r$3.BoxBufferGeometry(t.max.x-t.min.x+2*r.x,t.max.y-t.min.y+2*r.y,t.max.z-t.min.z+2*r.z,1,1);i.groups.length=0,i.groups.push({start:0,count:36,materialIndex:0}),i.applyMatrix4((new r$3.Matrix4).makeScale(-1,1,1));var o=new ut;o.defines.USE_MAP=!1,o.defines.USE_UV=!1,o.uniforms.diffuse.value=new r$3.Color(16777215);var a=new Je(i,[o]);return a.floorIndex=-1,a.position.copy(t.getCenter(new r$3.Vector3)),a.frustumCulled=!1,n.renderOrder=-3,n.add(a),n.boundingBox=new r$3.Box3,n.computeBoundingBox(),n}return t$3.__extends(t,e),t.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},t.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},t}(et);function ht(e,t){return void 0===t&&(t=ct),new lt(e,t)}var dt,pt,At,ft,Mt=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.z=r}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},e.prototype.set=function(e,t,r){return this.x=e,this.y=t,this.z=r,this},e.prototype.fromArray=function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},e.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this.z*=e,this},e.prototype.subVectors=function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e.prototype.cross=function(e){var t=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-t*e.z,this.z=t*e.y-r*e.x,this},e.prototype.crossVectors=function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e}(),gt=function(){function e(e,t,r,n,i){this._extentsMin=e,this._extentsMax=t,this._startIndex=r,this._endIndex=n,this._level=i,this._node0=null,this._node1=null,this.elementCount=n-r,this.center=[(e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2];var o,a=this.size=[t.x-e.x,t.y-e.y,t.z-e.z];o=a[0]>a[1]?a[1]>a[2]?[2,1,0]:a[0]>a[2]?[1,2,0]:[1,0,2]:a[1]>a[2]?a[0]>a[2]?[2,0,1]:[0,2,1]:[0,1,2],this.order=o}return e.prototype.clearShapes=function(){this._startIndex=-1,this._endIndex=-1,this.elementCount=0},e}(),yt=(dt=new Mt,pt=new Mt,At=new Mt,ft=new Mt,function(e,t,r,n,i,o){pt.subVectors(t,e),At.subVectors(r,e),ft.crossVectors(pt,At);var a,s=i.dot(ft);if(s>0){if(o)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}dt.subVectors(n,e);var c=a*i.dot(At.crossVectors(dt,At));if(c<0)return null;var u=a*i.dot(pt.cross(dt));if(u<0)return null;if(c+u>s)return null;var l=-a*dt.dot(ft);if(l<0)return null;var f=l/s;return(new Mt).copy(i).multiplyScalar(f).add(n)});function mt(e,t,r){var n={min:0,max:0};t.x>=0?(n.min=(r._extentsMin.x-e.x)*t.x,n.max=(r._extentsMax.x-e.x)*t.x):(n.min=(r._extentsMax.x-e.x)*t.x,n.max=(r._extentsMin.x-e.x)*t.x);var i={min:0,max:0};if(t.y>=0?(i.min=(r._extentsMin.y-e.y)*t.y,i.max=(r._extentsMax.y-e.y)*t.y):(i.min=(r._extentsMax.y-e.y)*t.y,i.max=(r._extentsMin.y-e.y)*t.y),n.min>i.max||i.min>n.max)return!1;i.min>n.min&&(n.min=i.min),i.max<n.max&&(n.max=i.max);var o={min:0,max:0};return t.z>=0?(o.min=(r._extentsMin.z-e.z)*t.z,o.max=(r._extentsMax.z-e.z)*t.z):(o.min=(r._extentsMax.z-e.z)*t.z,o.max=(r._extentsMin.z-e.z)*t.z),!(n.min>o.max||o.min>n.max||(o.min>n.min&&(n.min=o.min),o.max<n.max&&(n.max=o.max),n.max<0))}var vt=function(){function e(e,t){void 0===t&&(t=10),this._trianglesArray=e,this._maxTrianglesPerNode=t,this._bboxArray=this.calcBoundingBoxes(e),this._bboxHelper=new Float32Array(this._bboxArray.length),this._bboxHelper.set(this._bboxArray);var r=e.length/9,n=this.calcExtents(0,r,1e-6);this._rootNode=new gt(n[0],n[1],0,r,0),this._nodesToSplit=[this._rootNode],this.splitNode()}return e.prototype.calcBoundingBoxes=function(e){for(var t,r,n,i,o,a,s,c,u,l,f,h,p,d,m,g=e.length/9,v=new Float32Array(7*g),y=0,b=0,_=0;_<g;y+=9,b+=7,_++)t=e[y],r=e[y+1],n=e[y+2],i=e[y+3],o=e[y+4],a=e[y+5],i<(l=t)&&(l=i),(s=e[y+6])<l&&(l=s),o<(f=r)&&(f=o),(c=e[y+7])<f&&(f=c),a<(h=n)&&(h=a),(u=e[y+8])<h&&(h=u),i>(p=t)&&(p=i),s>p&&(p=s),o>(d=r)&&(d=o),c>d&&(d=c),a>(m=n)&&(m=a),u>m&&(m=u),v[b]=_,v[b+1]=l,v[b+2]=f,v[b+3]=h,v[b+4]=p,v[b+5]=d,v[b+6]=m;return v},e.prototype.splitNode=function(){for(;this._nodesToSplit.length>0;)this._splitNode(this._nodesToSplit.pop())},e.prototype._splitNode=function(e){if(!(e.elementCount<=this._maxTrianglesPerNode||0===e.elementCount)){for(var t=e._startIndex,r=e._endIndex,n=[[],[],[]],i=[[],[],[]],o=e.center,a=7*(_=t);_<r;_++,a+=7)for(var s=0;s<3;s++)(this._bboxArray[a+1+s]+this._bboxArray[a+4+s])/2<o[s]?n[s][n[s].length]=_:i[s][i[s].length]=_;var c=[!(n[0].length&i[0].length),!(n[1].length&i[1].length),!(n[2].length&i[2].length)];if(!(c[0]&c[1]&c[2])){var u,l,f=e.order;for(s=0;s<3;s++){var h=f[s];if(!c[h]){u=n[h],l=i[h];break}}for(var p,d=t,m=d+u.length,g=m,v=r,y=e._startIndex,b=u.concat(l),_=0;_<b.length;_++)p=b[_],this._bboxHelper[7*y]=this._bboxArray[7*p],this._bboxHelper[7*y+1]=this._bboxArray[7*p+1],this._bboxHelper[7*y+2]=this._bboxArray[7*p+2],this._bboxHelper[7*y+3]=this._bboxArray[7*p+3],this._bboxHelper[7*y+4]=this._bboxArray[7*p+4],this._bboxHelper[7*y+5]=this._bboxArray[7*p+5],this._bboxHelper[7*y+6]=this._bboxArray[7*p+6],y++;var A=this._bboxHelper.subarray(7*e._startIndex,7*e._endIndex);this._bboxArray.set(A,7*e._startIndex);var M=this.calcExtents(d,m,1e-6),x=this.calcExtents(g,v,1e-6),w=new gt(M[0],M[1],d,m,e._level+1),$=new gt(x[0],x[1],g,v,e._level+1);e._node0=w,e._node1=$,e.clearShapes(),this._nodesToSplit.push(w,$)}}},e.prototype.calcExtents=function(e,t,r){if(e>=t)return[{x:0,y:0,z:0},{x:0,y:0,z:0}];var n,i=7*e,o=7*t+1,a=this._bboxArray[i+1],s=this._bboxArray[i+2],c=this._bboxArray[i+3],u=this._bboxArray[i+4],l=this._bboxArray[i+5],f=this._bboxArray[i+6],h=this._bboxArray;for(i+=7;i<o;i+=7)(n=h[i+1])<a&&(a=n),(n=h[i+2])<s&&(s=n),(n=h[i+3])<c&&(c=n),(n=h[i+4])>u&&(u=n),(n=h[i+5])>l&&(l=n),(n=h[i+6])>f&&(f=n);return[{x:a-r,y:s-r,z:c-r},{x:u+r,y:l+r,z:f+r}]},e.prototype.intersectRay=function(e,t,r){for(var n=[this._rootNode],i=[],o=[],a=new Mt(1/t.x,1/t.y,1/t.z);n.length>0;){var s=n.pop();if(mt(e,a,s)){s._node0&&n.push(s._node0),s._node1&&n.push(s._node1);for(var c=s._startIndex;c<s._endIndex;c++)i.push(this._bboxArray[7*c])}}var u=new Mt,l=new Mt,f=new Mt,h=new Mt(e.x,e.y,e.z),p=new Mt(t.x,t.y,t.z);for(c=0;c<i.length;c++){var d=i[c];u.fromArray(this._trianglesArray,9*d),l.fromArray(this._trianglesArray,9*d+3),f.fromArray(this._trianglesArray,9*d+6);var m=yt(u,l,f,h,p,r);m&&o.push({triangle:[u.clone(),l.clone(),f.clone()],triangleIndex:d,intersectionPoint:m})}return o},e.prototype.dispose=function(){this._trianglesArray=new Float32Array,this._bboxArray=new Float32Array,this._bboxHelper=new Float32Array,this._rootNode=null,this._nodesToSplit.length=0},e}(),Nt,Dt=(Nt="$$FIVE_EVENT$$","undefined"==typeof Symbol?"$Symbol<".concat(Nt,">$"):Symbol(Nt));function wt(e){return e[Dt]||(e[Dt]={}),e[Dt]}var Tt=function(){function e(){}return e.prototype.hasListener=function(e){var t=wt(this);return t&&t[e]&&t[e].length>0},e.prototype.on=function(e,t,r){var n=this,i=wt(this);return i[e]||(i[e]=[]),i[e].push([t,r||!1]),function(){return n.off(e,t)}},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.off=function(e,t){if(void 0!==e){var r=wt(this);if(r[e]||(r[e]=[]),void 0!==t){for(var n=0;n<r[e].length&&r[e][n][0]!==t;n++);n<r[e].length&&r[e].splice(n,1)}else r[e].length=0}else this[Dt]||delete this[Dt]},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=!1,i=wt(this),o=i[e]||[],a=0,s=o.slice();a<s.length;a++){var c=s[a],u=c[0],l=c[1],f=void 0!==l&&l,h=u.apply(void 0,t);f&&this.off(e,u),!1===h&&(n=!0)}return n},e}();function xt(e){Object.freeze(e);var t="function"==typeof e,r=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach((function(n){!r.call(e,n)||t&&("caller"===n||"callee"===n||"arguments"===n)||null===e[n]||"object"!=_typeof2(e[n])&&"function"!=typeof e[n]||Object.isFrozen(e[n])||xt(e[n])})),e}var Et=/^([^.]+)(\.([^.]+))*$/;function jt(e){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(e)}function zt(e,t){return Et.test(e)&&Et.test(t)&&function(e,t){if("*"===e)return!0;var r=e.split(".").reverse(),n=t.split(".").reverse();if(r.length<=1)return e===t;for(var i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}(e,t)}var It=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],bt=xt(JSON.parse(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/9-/rnyrr;w}/9-/rnyrr:pq{;p|z/-j"))),Ot=function(e){function t(t,r,n){return e.call(this,"[NETWORK]: response error(type: ".concat(r,", reason: ").concat(n,"): ").concat(t))||this}return t$3.__extends(t,e),t}(Error),St=function(e){function t(t,r,n){var i=e.call(this,"[NETWORK]: response error(type: ".concat(r,", status: ").concat(n,"): ").concat(t))||this;return i.httpStatus=n,i}return t$3.__extends(t,e),t}(Error);!function(e){t$3.__extends((function(t,r){return e.call(this,"[NETWORK]: request abort(type: ".concat(r,"): ").concat(t))||this}),e)}(Error);var Lt=function(e){function t(t,r,n){return e.call(this,"[NETWORK]: request timeout(type: ".concat(r,", timeout: ").concat(n,"ms): ").concat(t))||this}return t$3.__extends(t,e),t}(Error);function kt(e){for(var t=0,r=It;t<r.length;t++){var n=r[t],i=e.match(n);if(i)return"jsonp_"+i[1]}return null}function Ct(e){return null!==kt(e)}function Pt(e){return It.reduce((function(e,t){return e.replace(t,"")}),e)}function _t(e){var t=e.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return t?t[2]:location.hostname}!function(e){t$3.__extends((function(t,r,n){return e.call(this,"[NETWORK]: request forbidden(type: ".concat(r,", reason: ").concat(n,"): ").concat(t))||this}),e)}(Error);var Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return t$3.__extends(t,e),t}(Tt);function Ut(e,t,r,n,i){return void 0===t&&(t={}),void 0===r&&(r=Qe),void 0===n&&(n=Qe),void 0===i&&(i=Qe),new Promise((function(o,a){var s,c=t.allowHosts?bt.concat(t.allowHosts):bt.slice(),u=_t(e),l=kt(e);if(0!==location.hostname.length&&!jt(location.hostname)&&0===bt.filter((function(e){return zt(e,location.hostname)})).length&&!jt(u)&&0===c.filter((function(e){return zt(e,u)})).length){var f=l?"Script":"XMLHttpRequest",h=new Ot(e,f,"request host(".concat(u,") is not allowed"));return n(h),a(h),void(null===(s=t.networkSubscribe)||void 0===s||s.emit("network",e,f,"forbidden",h.message))}if(l){var p=window,d=null,m=!1,g=Ke(),v=document.createElement("script");p[l]=function(i){var s,c,u=Ke(),f=u-g;if(delete p[l],v.parentNode&&v.parentNode.removeChild(v),null!==d&&(window.clearTimeout(d),d=null),!0!==m){if(0!==i.indexOf("data:")){var h=new St(e,"Script",500);return n(h),a(h),void(null===(s=t.networkSubscribe)||void 0===s||s.emit("network",e,"Script","error",h.message))}var y=i.split(","),b=(y[0].match(/:(.*?);/)||[])[1],_=y[1];if("arraybuffer"===t.responseType||"blob"===t.responseType){for(var A=atob(y[1]),M=A.length,x=new Uint8Array(M),w=0;w<M;w++)x[w]=A.charCodeAt(w);_="arraybuffer"===t.responseType?x.buffer:new Blob([x],{type:b})}var $={body:_,meta:{source:e,requestTime:g,responseTime:u,costs:f,headers:{}}};r($),o($),null===(c=t.networkSubscribe)||void 0===c||c.emit("network",e,"Script","ok",JSON.stringify($.meta)),m=!0}},v.src=e,document.body.appendChild(v),"number"==typeof t.timeout&&(d=window.setTimeout((function(){var r;if(d=null,!0!==m){m=!0;var i=new Lt(e,"Script",t.timeout||NaN);n(i),a(i),null===(r=t.networkSubscribe)||void 0===r||r.emit("network",e,"Script","timeout",i.message)}}),t.timeout))}else{var y=Ke(),b=!1,_=new XMLHttpRequest,A=function(){_&&(_.removeEventListener("timeout",M,!1),_.removeEventListener("progress",x,!1),_.removeEventListener("load",w,!1),_.removeEventListener("error",$,!1)),_=null,A=Qe},M=function(){var r;if(!0!==b){b=!0,A();var i=new Lt(e,"XMLHttpRequest",t.timeout||NaN);n(i),a(i),null===(r=t.networkSubscribe)||void 0===r||r.emit("network",e,"XMLHttpRequest","timeout",i.message)}},x=function(e){!0!==b&&e.lengthComputable&&(e.total<=0||i(e.loaded/e.total))},w=function(n){var i;if(!0!==b){var a=this.status;if(0===a||a>=200&&a<400){b=!0,A();var s=Ke(),c=s-y,u=function(e){if(!e)return{};for(var t={},r=e.trim().split("\n"),n=0;n<r.length;n++){var i=r[n],o=i.indexOf(":"),a=i.slice(0,o).trim().toLowerCase(),s=i.slice(o+1).trim();s&&(t[a]?t[a]+=", "+s:t[a]=s)}return t}(this.getAllResponseHeaders()),l=n.total,f={body:this.response,meta:{source:e,requestTime:y,responseTime:s,costs:c,headers:u,size:l}};r(f),o(f),null===(i=t.networkSubscribe)||void 0===i||i.emit("network",e,"XMLHttpRequest","ok",JSON.stringify(f.meta))}else $.call(this)}},$=function(){var r;if(!0!==b){b=!0,A();var i=new St(e,"XMLHttpRequest",this.status);n(i),a(i),null===(r=t.networkSubscribe)||void 0===r||r.emit("network",e,"XMLHttpRequest","error",i.message)}};_.addEventListener("timeout",M,!1),_.addEventListener("progress",x,!1),_.addEventListener("load",w,!1),_.addEventListener("error",$,!1),t.responseType&&(_.responseType=t.responseType),"number"==typeof t.timeout&&(_.timeout=t.timeout),_.open("GET",e,!0),_.send(null)}}))}var Rt={};function Qt(e,t,r,n,i,o){return void 0===t&&(t={}),void 0===r&&(r=Qe),void 0===n&&(n=Qe),void 0===i&&(i=Qe),new Promise((function(a,s){var c,u=t.allowHosts?bt.concat(t.allowHosts):bt.slice(),l=_t(e);if(0!==location.hostname.length&&!jt(location.hostname)&&0===bt.filter((function(e){return zt(e,location.hostname)})).length&&!jt(l)&&0===u.filter((function(e){return zt(e,l)})).length){var f=new Ot(e,"Image","request host(".concat(l,") is not allowed"));return n(f),s(f),void(null===(c=t.networkSubscribe)||void 0===c||c.emit("network",e,"Image","forbidden",f.message))}var h=null!=o?o:new Image,p=Ke(),d=!1,m=null;"number"==typeof t.timeout&&(m=window.setTimeout((function(){var r;if(h.onload=Qe,h.onerror=Qe,m=null,!0!==d){d=!0;var i=new Lt(e,"Image",t.timeout);n(i),s(i),null===(r=t.networkSubscribe)||void 0===r||r.emit("network",e,"Image","timeout",i.message)}}),t.timeout)),h.onload=function(){var n;if(h.onload=Qe,h.onerror=Qe,null!==m&&(clearTimeout(m),m=null),!0!==d){var o=Ke();d=!0;var s={body:h,meta:{headers:{},source:e,requestTime:p,responseTime:o,costs:o-p}};i(1),r(s),a(s),null===(n=t.networkSubscribe)||void 0===n||n.emit("network",e,"Image","ok",JSON.stringify(s.meta))}},h.onerror=function(){var r;if(h.onload=Qe,h.onerror=Qe,null!==m&&(clearTimeout(m),m=null),!0!==d){d=!0;var i=new St(e,"Image",0);n(i),s(i),null===(r=t.networkSubscribe)||void 0===r||r.emit("network",e,"Image","ok",i.message)}},i(0),h.src=e}))}var Yt=null,Ft=!1,Vt=[];function Ht(e){if(void 0===e&&(e=!1),e||!Ft)if(Yt)Ft=!1;else{Ft=!0;var t=Vt.shift();if(t){try{t()}catch(e){}Xe.shared.add((function(){return Ht(!0)}),!0,2)}else Ft=!1}}function Gt(){Yt=null,Ht()}function Wt(e){return new Promise((function(t,r){Vt.push((function(){try{t(e())}catch(e){r(e)}})),Ht()}))}var qt={OutWindow:function(){this._windowSize=0}};qt.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},qt.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},qt.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},qt.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},qt.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},qt.OutWindow.prototype.copyBlock=function(e,t){var r=this._pos-e-1;for(r<0&&(r+=this._windowSize);t--;)r>=this._windowSize&&(r=0),this._buffer[this._pos++]=this._buffer[r++],this._pos>=this._windowSize&&this.flush()},qt.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},qt.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},qt.RangeDecoder=function(){},qt.RangeDecoder.prototype.setStream=function(e){this._stream=e},qt.RangeDecoder.prototype.releaseStream=function(){this._stream=null},qt.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},qt.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,r=0,n=e;n--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,r=r<<1|1-t,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return r},qt.RangeDecoder.prototype.decodeBit=function(e,t){var r=e[t],n=(this._range>>>11)*r;return(2147483648^this._code)<(2147483648^n)?(this._range=n,e[t]+=2048-r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=n,this._code-=n,e[t]-=r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},qt.initBitModels=function(e,t){for(;t--;)e[t]=1024},qt.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},qt.BitTreeDecoder.prototype.init=function(){qt.initBitModels(this._models,1<<this._numBitLevels)},qt.BitTreeDecoder.prototype.decode=function(e){for(var t=1,r=this._numBitLevels;r--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},qt.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,r=1,n=0,i=0;i<this._numBitLevels;++i)r=r<<1|(t=e.decodeBit(this._models,r)),n|=t<<i;return n},qt.reverseDecode2=function(e,t,r,n){for(var i,o=1,a=0,s=0;s<n;++s)o=o<<1|(i=r.decodeBit(e,t+o)),a|=i<<s;return a},qt.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new qt.BitTreeDecoder(8),this._numPosStates=0},qt.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new qt.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new qt.BitTreeDecoder(3)},qt.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(qt.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},qt.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},qt.Decoder2=function(){this._decoders=[]},qt.Decoder2.prototype.init=function(){qt.initBitModels(this._decoders,768)},qt.Decoder2.prototype.decodeNormal=function(e){var t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t},qt.Decoder2.prototype.decodeWithMatchByte=function(e,t){var r,n,i=1;do{if(r=t>>7&1,t<<=1,i=i<<1|(n=e.decodeBit(this._decoders,(1+r<<8)+i)),r!==n){for(;i<256;)i=i<<1|e.decodeBit(this._decoders,i);break}}while(i<256);return 255&i},qt.LiteralDecoder=function(){},qt.LiteralDecoder.prototype.create=function(e,t){var r;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],r=1<<this._numPrevBits+this._numPosBits;r--;)this._coders[r]=new qt.Decoder2},qt.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},qt.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},qt.Decoder=function(){this._outWindow=new qt.OutWindow,this._rangeDecoder=new qt.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new qt.BitTreeDecoder(4),this._lenDecoder=new qt.LenDecoder,this._repLenDecoder=new qt.LenDecoder,this._literalDecoder=new qt.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new qt.BitTreeDecoder(6),this._posSlotDecoder[1]=new qt.BitTreeDecoder(6),this._posSlotDecoder[2]=new qt.BitTreeDecoder(6),this._posSlotDecoder[3]=new qt.BitTreeDecoder(6)},qt.Decoder.prototype.setDictionarySize=function(e){return!(e<0||(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),0))},qt.Decoder.prototype.setLcLpPb=function(e,t,r){var n=1<<r;return!(e>8||t>4||r>4||(this._literalDecoder.create(t,e),this._lenDecoder.create(n),this._repLenDecoder.create(n),this._posStateMask=n-1,0))},qt.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),qt.initBitModels(this._isMatchDecoders,192),qt.initBitModels(this._isRep0LongDecoders,192),qt.initBitModels(this._isRepDecoders,12),qt.initBitModels(this._isRepG0Decoders,12),qt.initBitModels(this._isRepG1Decoders,12),qt.initBitModels(this._isRepG2Decoders,12),qt.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},qt.Decoder.prototype.decode=function(e,t,r){var n,i,o,a,s,c,u=0,l=0,f=0,h=0,p=0,d=0,m=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();r<0||d<r;)if(n=d&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(u<<4)+n))i=this._literalDecoder.getDecoder(d++,m),m=u>=7?i.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(l)):i.decodeNormal(this._rangeDecoder),this._outWindow.putByte(m),u=u<4?0:u-(u<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,u))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,u)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(u<<4)+n)&&(u=u<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,u)?a=f:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,u)?a=h:(a=p,p=h),h=f),f=l,l=a),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,n),u=u<7?8:11);else if(p=h,h=f,f=l,o=2+this._lenDecoder.decode(this._rangeDecoder,n),u=u<7?7:10,(s=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(l=(2|1&s)<<(c=(s>>1)-1),s<14)l+=qt.reverseDecode2(this._posDecoders,l-s-1,this._rangeDecoder,c);else if(l+=this._rangeDecoder.decodeDirectBits(c-4)<<4,(l+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===l)break;return!1}}else l=s;if(l>=d||l>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(l,o),d+=o,m=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},qt.Decoder.prototype.setDecoderProperties=function(e){var t,r,n,i,o;return!(e.size<5)&&(r=(t=e.readByte())%9,n=(t=~~(t/9))%5,i=~~(t/5),!!this.setLcLpPb(r,n,i)&&(o=e.readByte(),o|=e.readByte()<<8,o|=e.readByte()<<16,o+=16777216*e.readByte(),this.setDictionarySize(o)))},qt.decompress=function(e,t,r,n){var i=new qt.Decoder;if(!i.setDecoderProperties(e))throw"Incorrect stream properties";if(!i.decode(t,r,n))throw"Error in data stream";return!0},qt.decompressFile=function(e,t){var r,n=new qt.Decoder;if(!n.setDecoderProperties(e))throw"Incorrect stream properties";if(r=e.readByte(),r|=e.readByte()<<8,r|=e.readByte()<<16,r+=16777216*e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),!n.decode(e,t,r))throw"Error in data stream";return!0};var Kt="undefined"!=typeof Worker&&"undefined"!=typeof Blob,Zt="";if(Kt)try{var Xt=new Blob(['\n  self.onmessage = function (event) {\n    var Packet = event.data;\n    var Result = null;\n    try {\n      if (!Packet.PacketID) {\n        throw new Error(\'No incoming id.\');\n      }\n      if (!Packet.Data) {\n        throw new Error(\'No input data.\');\n      }\n      if (Packet.Type == \'compress\') {\n        // C: checking if input is valid\n        if (Packet.Data.constructor != Uint8Array) {\n          throw new Error(\'Input data is not Uint8Array.\');\n        }\n        // C: encoding data\n        Result = Util.compressFile(Packet.Data, null, Packet.Level, null);\n      } else if (Packet.Type == \'decompress\') {\n        // C: checking if input is valid\n        if (Packet.Data.constructor != Uint8Array) {\n          throw new Error(\'Input data is not Uint8Array.\');\n        }\n        var inStream = {\n          data: Packet.Data,\n          offset: 0,\n          readByte () {\n            return this.data[this.offset++];\n          }\n        };\n        var partLength = inStream.data.length;\n        var outStream = {\n          data: [],\n          offset: 0,\n          writeByte (value) {\n            var partIndex = Math.floor(this.offset / partLength);\n            if (!this.data[partIndex]) {\n              this.data[partIndex] = new Uint8Array(partLength);\n            }\n            this.data[partIndex][this.offset % partLength] = value;\n            this.offset++;\n          }\n        }\n        // C: decoding data\n\n        LZMA.decompressFile(inStream, outStream);\n        Result = new Uint8Array(outStream.offset)\n        for (var i = 0; i < outStream.offset; i++) {\n          Result[i] = outStream.data[Math.floor(i / partLength)][i % partLength];\n        }\n      }\n      postMessage({ PacketID: Packet.PacketID, Result, Error: null }, [Result.buffer]);\n    } catch (error) {\n      postMessage({ PacketID: Packet.PacketID, Error: error.toString() });\n    }\n  };\n\n\n  /*\n  Copyright (c) 2011 Juan Mellado\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the "Software"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n  */\n\n  /*\n  References:\n  - "LZMA SDK" by Igor Pavlov\n    http://www.7-zip.org/sdk.html\n  */\n\n  var LZMA = LZMA || {};\n\n  LZMA.OutWindow = function(){\n    this._windowSize = 0;\n  };\n\n  LZMA.OutWindow.prototype.create = function(windowSize){\n    if ( (!this._buffer) || (this._windowSize !== windowSize) ){\n      this._buffer = [];\n    }\n    this._windowSize = windowSize;\n    this._pos = 0;\n    this._streamPos = 0;\n  };\n\n  LZMA.OutWindow.prototype.flush = function(){\n    var size = this._pos - this._streamPos;\n    if (size !== 0){\n      while(size --){\n        this._stream.writeByte(this._buffer[this._streamPos ++]);\n      }\n      if (this._pos >= this._windowSize){\n        this._pos = 0;\n      }\n      this._streamPos = this._pos;\n    }\n  };\n\n  LZMA.OutWindow.prototype.releaseStream = function(){\n    this.flush();\n    this._stream = null;\n  };\n\n  LZMA.OutWindow.prototype.setStream = function(stream){\n    this.releaseStream();\n    this._stream = stream;\n  };\n\n  LZMA.OutWindow.prototype.init = function(solid){\n    if (!solid){\n      this._streamPos = 0;\n      this._pos = 0;\n    }\n  };\n\n  LZMA.OutWindow.prototype.copyBlock = function(distance, len){\n    var pos = this._pos - distance - 1;\n    if (pos < 0){\n      pos += this._windowSize;\n    }\n    while(len --){\n      if (pos >= this._windowSize){\n        pos = 0;\n      }\n      this._buffer[this._pos ++] = this._buffer[pos ++];\n      if (this._pos >= this._windowSize){\n        this.flush();\n      }\n    }\n  };\n\n  LZMA.OutWindow.prototype.putByte = function(b){\n    this._buffer[this._pos ++] = b;\n    if (this._pos >= this._windowSize){\n      this.flush();\n    }\n  };\n\n  LZMA.OutWindow.prototype.getByte = function(distance){\n    var pos = this._pos - distance - 1;\n    if (pos < 0){\n      pos += this._windowSize;\n    }\n    return this._buffer[pos];\n  };\n\n  LZMA.RangeDecoder = function(){\n  };\n\n  LZMA.RangeDecoder.prototype.setStream = function(stream){\n    this._stream = stream;\n  };\n\n  LZMA.RangeDecoder.prototype.releaseStream = function(){\n    this._stream = null;\n  };\n\n  LZMA.RangeDecoder.prototype.init = function(){\n    var i = 5;\n\n    this._code = 0;\n    this._range = -1;\n\n    while(i --){\n      this._code = (this._code << 8) | this._stream.readByte();\n    }\n  };\n\n  LZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){\n    var result = 0, i = numTotalBits, t;\n\n    while(i --){\n      this._range >>>= 1;\n      t = (this._code - this._range) >>> 31;\n      this._code -= this._range & (t - 1);\n      result = (result << 1) | (1 - t);\n\n      if ( (this._range & 0xff000000) === 0){\n        this._code = (this._code << 8) | this._stream.readByte();\n        this._range <<= 8;\n      }\n    }\n\n    return result;\n  };\n\n  LZMA.RangeDecoder.prototype.decodeBit = function(probs, index){\n    var prob = probs[index],\n        newBound = (this._range >>> 11) * prob;\n\n    if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){\n      this._range = newBound;\n      probs[index] += (2048 - prob) >>> 5;\n      if ( (this._range & 0xff000000) === 0){\n        this._code = (this._code << 8) | this._stream.readByte();\n        this._range <<= 8;\n      }\n      return 0;\n    }\n\n    this._range -= newBound;\n    this._code -= newBound;\n    probs[index] -= prob >>> 5;\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n    return 1;\n  };\n\n  LZMA.initBitModels = function(probs, len){\n    while(len --){\n      probs[len] = 1024;\n    }\n  };\n\n  LZMA.BitTreeDecoder = function(numBitLevels){\n    this._models = [];\n    this._numBitLevels = numBitLevels;\n  };\n\n  LZMA.BitTreeDecoder.prototype.init = function(){\n    LZMA.initBitModels(this._models, 1 << this._numBitLevels);\n  };\n\n  LZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){\n    var m = 1, i = this._numBitLevels;\n\n    while(i --){\n      m = (m << 1) | rangeDecoder.decodeBit(this._models, m);\n    }\n    return m - (1 << this._numBitLevels);\n  };\n\n  LZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){\n    var m = 1, symbol = 0, i = 0, bit;\n\n    for (; i < this._numBitLevels; ++ i){\n      bit = rangeDecoder.decodeBit(this._models, m);\n      m = (m << 1) | bit;\n      symbol |= bit << i;\n    }\n    return symbol;\n  };\n\n  LZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){\n    var m = 1, symbol = 0, i = 0, bit;\n\n    for (; i < numBitLevels; ++ i){\n      bit = rangeDecoder.decodeBit(models, startIndex + m);\n      m = (m << 1) | bit;\n      symbol |= bit << i;\n    }\n    return symbol;\n  };\n\n  LZMA.LenDecoder = function(){\n    this._choice = [];\n    this._lowCoder = [];\n    this._midCoder = [];\n    this._highCoder = new LZMA.BitTreeDecoder(8);\n    this._numPosStates = 0;\n  };\n\n  LZMA.LenDecoder.prototype.create = function(numPosStates){\n    for (; this._numPosStates < numPosStates; ++ this._numPosStates){\n      this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n      this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n    }\n  };\n\n  LZMA.LenDecoder.prototype.init = function(){\n    var i = this._numPosStates;\n    LZMA.initBitModels(this._choice, 2);\n    while(i --){\n      this._lowCoder[i].init();\n      this._midCoder[i].init();\n    }\n    this._highCoder.init();\n  };\n\n  LZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){\n    if (rangeDecoder.decodeBit(this._choice, 0) === 0){\n      return this._lowCoder[posState].decode(rangeDecoder);\n    }\n    if (rangeDecoder.decodeBit(this._choice, 1) === 0){\n      return 8 + this._midCoder[posState].decode(rangeDecoder);\n    }\n    return 16 + this._highCoder.decode(rangeDecoder);\n  };\n\n  LZMA.Decoder2 = function(){\n    this._decoders = [];\n  };\n\n  LZMA.Decoder2.prototype.init = function(){\n    LZMA.initBitModels(this._decoders, 0x300);\n  };\n\n  LZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){\n    var symbol = 1;\n\n    do{\n      symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n    }while(symbol < 0x100);\n\n    return symbol & 0xff;\n  };\n\n  LZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){\n    var symbol = 1, matchBit, bit;\n\n    do{\n      matchBit = (matchByte >> 7) & 1;\n      matchByte <<= 1;\n      bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);\n      symbol = (symbol << 1) | bit;\n      if (matchBit !== bit){\n        while(symbol < 0x100){\n          symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n        }\n        break;\n      }\n    }while(symbol < 0x100);\n\n    return symbol & 0xff;\n  };\n\n  LZMA.LiteralDecoder = function(){\n  };\n\n  LZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){\n    var i;\n\n    if (this._coders\n      && (this._numPrevBits === numPrevBits)\n      && (this._numPosBits === numPosBits) ){\n      return;\n    }\n    this._numPosBits = numPosBits;\n    this._posMask = (1 << numPosBits) - 1;\n    this._numPrevBits = numPrevBits;\n\n    this._coders = [];\n\n    i = 1 << (this._numPrevBits + this._numPosBits);\n    while(i --){\n      this._coders[i] = new LZMA.Decoder2();\n    }\n  };\n\n  LZMA.LiteralDecoder.prototype.init = function(){\n    var i = 1 << (this._numPrevBits + this._numPosBits);\n    while(i --){\n      this._coders[i].init();\n    }\n  };\n\n  LZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){\n    return this._coders[( (pos & this._posMask) << this._numPrevBits)\n      + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];\n  };\n\n  LZMA.Decoder = function(){\n    this._outWindow = new LZMA.OutWindow();\n    this._rangeDecoder = new LZMA.RangeDecoder();\n    this._isMatchDecoders = [];\n    this._isRepDecoders = [];\n    this._isRepG0Decoders = [];\n    this._isRepG1Decoders = [];\n    this._isRepG2Decoders = [];\n    this._isRep0LongDecoders = [];\n    this._posSlotDecoder = [];\n    this._posDecoders = [];\n    this._posAlignDecoder = new LZMA.BitTreeDecoder(4);\n    this._lenDecoder = new LZMA.LenDecoder();\n    this._repLenDecoder = new LZMA.LenDecoder();\n    this._literalDecoder = new LZMA.LiteralDecoder();\n    this._dictionarySize = -1;\n    this._dictionarySizeCheck = -1;\n\n    this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);\n    this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);\n    this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);\n    this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);\n  };\n\n  LZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){\n    if (dictionarySize < 0){\n      return false;\n    }\n    if (this._dictionarySize !== dictionarySize){\n      this._dictionarySize = dictionarySize;\n      this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);\n      this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );\n    }\n    return true;\n  };\n\n  LZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){\n    var numPosStates = 1 << pb;\n\n    if (lc > 8 || lp > 4 || pb > 4){\n      return false;\n    }\n\n    this._literalDecoder.create(lp, lc);\n\n    this._lenDecoder.create(numPosStates);\n    this._repLenDecoder.create(numPosStates);\n    this._posStateMask = numPosStates - 1;\n\n    return true;\n  };\n\n  LZMA.Decoder.prototype.init = function(){\n    var i = 4;\n\n    this._outWindow.init(false);\n\n    LZMA.initBitModels(this._isMatchDecoders, 192);\n    LZMA.initBitModels(this._isRep0LongDecoders, 192);\n    LZMA.initBitModels(this._isRepDecoders, 12);\n    LZMA.initBitModels(this._isRepG0Decoders, 12);\n    LZMA.initBitModels(this._isRepG1Decoders, 12);\n    LZMA.initBitModels(this._isRepG2Decoders, 12);\n    LZMA.initBitModels(this._posDecoders, 114);\n\n    this._literalDecoder.init();\n\n    while(i --){\n      this._posSlotDecoder[i].init();\n    }\n\n    this._lenDecoder.init();\n    this._repLenDecoder.init();\n    this._posAlignDecoder.init();\n    this._rangeDecoder.init();\n  };\n\n  LZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){\n    var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,\n        posState, decoder2, len, distance, posSlot, numDirectBits;\n\n    this._rangeDecoder.setStream(inStream);\n    this._outWindow.setStream(outStream);\n\n    this.init();\n\n    while(outSize < 0 || nowPos64 < outSize){\n      posState = nowPos64 & this._posStateMask;\n\n      if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){\n        decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);\n\n        if (state >= 7){\n          prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );\n        }else{\n          prevByte = decoder2.decodeNormal(this._rangeDecoder);\n        }\n        this._outWindow.putByte(prevByte);\n\n        state = state < 4? 0: state - (state < 10? 3: 6);\n\n      }else{\n\n        if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){\n          len = 0;\n          if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){\n            if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){\n              state = state < 7? 9: 11;\n              len = 1;\n            }\n          }else{\n            if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){\n              distance = rep1;\n            }else{\n              if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){\n                distance = rep2;\n              }else{\n                distance = rep3;\n                rep3 = rep2;\n              }\n              rep2 = rep1;\n            }\n            rep1 = rep0;\n            rep0 = distance;\n          }\n          if (len === 0){\n            len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);\n            state = state < 7? 8: 11;\n          }\n        }else{\n          rep3 = rep2;\n          rep2 = rep1;\n          rep1 = rep0;\n\n          len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);\n          state = state < 7? 7: 10;\n\n          posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);\n          if (posSlot >= 4){\n\n            numDirectBits = (posSlot >> 1) - 1;\n            rep0 = (2 | (posSlot & 1) ) << numDirectBits;\n\n            if (posSlot < 14){\n              rep0 += LZMA.reverseDecode2(this._posDecoders,\n                  rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);\n            }else{\n              rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;\n              rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);\n              if (rep0 < 0){\n                if (rep0 === -1){\n                  break;\n                }\n                return false;\n              }\n            }\n          }else{\n            rep0 = posSlot;\n          }\n        }\n\n        if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){\n          return false;\n        }\n\n        this._outWindow.copyBlock(rep0, len);\n        nowPos64 += len;\n        prevByte = this._outWindow.getByte(0);\n      }\n    }\n\n    this._outWindow.flush();\n    this._outWindow.releaseStream();\n    this._rangeDecoder.releaseStream();\n\n    return true;\n  };\n\n  LZMA.Decoder.prototype.setDecoderProperties = function(properties){\n    var value, lc, lp, pb, dictionarySize;\n\n    if (properties.size < 5){\n      return false;\n    }\n\n    value = properties.readByte();\n    lc = value % 9;\n    value = ~~(value / 9);\n    lp = value % 5;\n    pb = ~~(value / 5);\n\n    if ( !this.setLcLpPb(lc, lp, pb) ){\n      return false;\n    }\n\n    dictionarySize = properties.readByte();\n    dictionarySize |= properties.readByte() << 8;\n    dictionarySize |= properties.readByte() << 16;\n    dictionarySize += properties.readByte() * 16777216;\n\n    return this.setDictionarySize(dictionarySize);\n  };\n\n  LZMA.decompress = function(properties, inStream, outStream, outSize){\n    var decoder = new LZMA.Decoder();\n\n    if ( !decoder.setDecoderProperties(properties) ){\n      throw "Incorrect stream properties";\n    }\n\n    if ( !decoder.decode(inStream, outStream, outSize) ){\n      throw "Error in data stream";\n    }\n\n    return true;\n  };\n\n  LZMA.decompressFile = function(inStream, outStream){\n    var decoder = new LZMA.Decoder(), outSize;\n\n    if ( !decoder.setDecoderProperties(inStream) ){\n      throw "Incorrect stream properties";\n    }\n\n    outSize = inStream.readByte();\n    outSize |= inStream.readByte() << 8;\n    outSize |= inStream.readByte() << 16;\n    outSize += inStream.readByte() * 16777216;\n\n    inStream.readByte();\n    inStream.readByte();\n    inStream.readByte();\n    inStream.readByte();\n\n    if ( !decoder.decode(inStream, outStream, outSize) ){\n      throw "Error in data stream";\n    }\n\n    return true;\n  };\n'],{type:"text/javascript"});Zt=URL.createObjectURL(Xt)}catch(e){}var Jt=function(){function e(){var e=this;if(this.callCounter=0,this.requests=[],!Kt)throw new Error("LZMACaller cannot work in this broswer.");var t=this.worker=new Worker(Zt);t.onmessage=function(t){var r,n,i=t.data,o=i.PacketID,a=i.Result,s=i.Error;s?null===(n=e.requests[o])||void 0===n||n.onCompleteCallback(new Error(s)):null===(r=e.requests[o])||void 0===r||r.onCompleteCallback(null,a),delete e.requests[o]},t.onerror=function(e){return console.error(e)}}return e.prototype.compress=function(e,t,r){var n=++this.callCounter;this.requests[n]={onCompleteCallback:r},this.worker.postMessage({Type:"compress",PacketID:n,Data:e,Level:t},[e.buffer])},e.prototype.decompress=function(e,t){var r=++this.callCounter;this.requests[r]={onCompleteCallback:t},this.worker.postMessage({Type:"decompress",PacketID:r,Data:e},[e.buffer])},e.prototype.terminate=function(){this.worker.terminate()},e.support=Kt,e}();function $t(e){return Array.prototype.reduce.call(e,(function(e,t,r){return e|t<<8*r}),0)}function ei(e){var t=new Uint8Array(e),r=$t(t.slice(0,4));if(r>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var n=[],i=[],o=4+4*r,a=0;a<r;a++)i[a]=$t(t.slice(4+4*a,8+4*a)),n[a]=a===r-1?t.subarray(o,o+i[a]):t.slice(o,o+i[a]),o+=i[a];return Jt.support?function(e){for(var t=[],r=e.length,n=function(r){t.push(new Promise((function(t,n){var i=new Jt;i.decompress(e[r],(function(e,r){if(i.terminate(),e)return n(e);t(r)}))})))},i=0;i<r;i++)n(i);return Promise.all(t)}(n):Promise.resolve(function(e){for(var t,r=[],n=e.length,i=function(n){var i={data:e[n],offset:0,readByte:function(){return this.data[this.offset++]}},o=i.data.length,a={data:[],offset:0,writeByte:function(e){var t=Math.floor(this.offset/o);this.data[t]||(this.data[t]=new Uint8Array(o)),this.data[t][this.offset%o]=e,this.offset++}};qt.decompressFile(i,a),t=new Uint8Array(a.offset);for(var s=0;s<a.offset;s++)t[s]=a.data[Math.floor(s/o)][s%o];r.push(t)},o=0;o<n;o++)i(o);return r}(n))}function ti(e,t){for(var r={},n=0,i=t;n<i.length;n++){var o=i[n];o in e&&(r[o]=e[o])}return r}var ii="//vrlab-public.ljcdn.com/",ni="//vrlab-image[1-4].ljcdn.com/",ri="//global-public.realsee-cdn.com/",oi="//global-image-[1-4].realsee-cdn.com/";function si(e,t){var r,n=e.split("?")[0],i=n.split(".").pop();if("jpeg"===i&&(i="jpg"),"png"!==i&&"jpg"!==i)return e;var o="";if(void 0!==t.format&&t.format!==i&&(o+="/format/".concat(t.format)),void 0!==t.cut&&(o+="/cut/".concat(t.cut[2],"x").concat(t.cut[3],"x").concat(t.cut[0],"x").concat(t.cut[1])),void 0!==t.quality){var a=null!==(r=t.format)&&void 0!==r?r:i;a&&["jpg","webp","tpg","heif","avif"].indexOf(a)>=0&&(o+="/quality/".concat(t.quality))}if(void 0!==t.size){var s=e.match(/\/cube_(\d+)\//);(s?Number(s[1]):NaN)!==Number(t.size)&&(o+="/thumbnail/".concat(t.size,"x"))}return o.length&&(o="?imageMogr2"+o),n+o}function ai(e,t){return e.indexOf(ii)>=0?(/\.basis(\?|$)/.test(e)&&!0!==t.basisLoaderInitialized&&(e=e.replace(/\.basis(\?|$)/,".jpg$1")),si(function(e,t){var r=t.split("."),n=r[0],i=r.slice(1);if("texture"===n)return e.replace(ii,ni.replace("[1-4]","3"));if("pano"===n||"pano_luminance"===n)switch(i[0],i[1]){case"front":case"left":case"up":return e.replace(ii,ni.replace("[1-4]","1"));case"down":case"right":case"back":return e.replace(ii,ni.replace("[1-4]","2"))}else if("pano_tile"===n||"pano_tile_luminance"===n){i[0],i[1];var o=i[2],a=i[3],s=i[4],c=Math.pow(2,Number(o))*Number(a)+Number(s);if(!isNaN(c))return e.replace(ii,"//vr-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(c%2+1)))}return e.replace(ii,ni.replace("[1-4]","3"))}(e,t.key),t)):e.indexOf(ri)>=0?(/\.basis(\?|$)/.test(e)&&!0!==t.basisLoaderInitialized&&(e=e.replace(/\.basis(\?|$)/,".jpg$1")),si(function(e,t){var r=t.split("."),n=r[0],i=r.slice(1);if("texture"===n)return e.replace(ri,oi.replace("[1-4]","3"));if("pano"===n||"pano_luminance"===n)switch(i[0],i[1]){case"front":case"left":case"up":return e.replace(ri,oi.replace("[1-4]","1"));case"down":case"right":case"back":return e.replace(ri,oi.replace("[1-4]","2"))}else if("pano_tile"===n||"pano_tile_luminance"===n){i[0],i[1];var o=i[2],a=i[3],s=i[4],c=Math.pow(2,Number(o))*Number(a)+Number(s);if(!isNaN(c))return e.replace(ri,"//global-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(c%2+1)))}return e.replace(ri,oi.replace("[1-4]","3"))}(e,t.key),t)):e.indexOf("//test-vr-public.realsee-cdn.com/")>=0?(/\.basis(\?|$)/.test(e)&&!0!==t.basisLoaderInitialized&&(e=e.replace(/\.basis(\?|$)/,".jpg$1")),si((r=e,t.key,r.replace("//test-vr-public.realsee-cdn.com/","//test-vr-image.realsee-cdn.com/")),t)):e;var r}var ui=!1;try{ui="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}var ci=[];function li(){var e=this.src;this.onerror=this.onload=Qe,this.removeAttribute("src"),/^blob\:/.test(e)&&URL.revokeObjectURL(e),this.close=Qe}function hi(){ci.push(this)}function di(){return Object.assign(new Image,{crossOrigin:"",close:li})}function pi(e){return new Promise((function(t,r){var n=di();n.onload=function(){n.onload=n.onerror=Qe,setTimeout((function(){return t(n)}),30)},n.onerror=function(){var e=n.src;n.onload=n.onerror=Qe,n.close(),r(new Error("image load error: ".concat(e)))},n.src=URL.createObjectURL(e)}))}function Ai(e,t){if(t&&(e.width>t.width||e.height>t.height)){var r=function(e,t){var r=ci.shift();if(r)return r.width=e,r.height=t,r;if(ui){var n=new OffscreenCanvas(e,t);return Object.assign(n,{close:hi})}return n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(n,{close:hi})}(Math.min(e.width,t.width),Math.min(e.height,t.height)),n=r.getContext("2d");n.clearRect(0,0,r.width,r.height),n.drawImage(e,0,0,r.width,r.height),e.close();var i=new r$3.Texture(r);i.needsUpdate=!0,i.flipY=!0;var o=i.dispose;return i.dispose=function(){r.close(),o.call(i),delete i.dispose},i}var a=new r$3.Texture(e);a.needsUpdate=!0,a.flipY=!0;var s=a.dispose;return a.dispose=function(){e.close(),s.call(a),delete a.dispose},a}var fi=new r$3.WebGLRenderTarget(1,1),Mi=new r$3.OrthographicCamera(-1,1,1,-1,0,1),gi=new r$3.BufferGeometry;gi.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),gi.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var yi=new r$3.Mesh(gi),mi=new r$3.Scene;mi.add(yi);var vi,Ni=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:"\n    void main() {\n      gl_Position = vec4(0, 0, 0, 0);\n    }\n  ",fragmentShader:"\n    uniform sampler2D map;\n    void main() {\n      gl_FragColor = textureCube(map, vec3(0, 0));\n    }\n  "}),Di=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:"\n    void main() {\n      gl_Position = vec4(0, 0, 0, 0);\n    }\n  ",fragmentShader:"\n    uniform samplerCube map;\n    void main() {\n      gl_FragColor = textureCube(map, vec3(0, 0, 0));\n    }\n  "});function wi(e,t,r){return void 0!==t.flipY&&(e.flipY=t.flipY),void 0!==t.format&&(e.format=t.format),void 0!==t.encoding&&(e.encoding=t.encoding),void 0!==t.minFilter&&(e.minFilter=t.minFilter),void 0!==t.magFilter&&(e.magFilter=t.magFilter),r?new Promise((function(t){Xe.shared.add((function(){try{var n=r.getRenderTarget();r.setRenderTarget(fi),e instanceof r$3.CubeTexture?(yi.material=Di,Di.uniforms.map.value=e,r.render(mi,Mi),Di.uniforms.map.value=null):(yi.material=Ni,Ni.uniforms.map.value=e,r.render(mi,Mi),Di.uniforms.map.value=null),r.setRenderTarget(n),t(e)}catch(r){t(e)}}),!0,1)})):Promise.resolve(e)}var Ti='\nvar config, transcoderPending, _BasisFile;\nself.onmessage = function(e) {\n  var message = e.data;\n  switch (message.type) {\n    case "init":\n      config = message.config;\n      init(message.transcoderBinary);\n      break;\n    case "transcode":\n      transcoderPending.then(function() {\n        try {\n          var result = transcode(message.buffer);\n          var width = result.width;\n          var height = result.height;\n          var hasAlpha = result.hasAlpha;\n          var mipmaps = result.mipmaps;\n          var format = result.format;\n          var buffers = [];\n          for (var i = 0; i < mipmaps.length; ++i) {\n            buffers.push(mipmaps[i].data.buffer);\n          }\n          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);\n        } catch (error) {\n          console.error(error);\n          self.postMessage({ type: "error", id: message.id, error: error.message });\n        }\n      });\n      break;\n    default: break;\n  }\n};\n\nfunction init(wasmBinary) {\n  var BasisModule;\n  transcoderPending = new Promise(function(resolve) {\n    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n    BASIS(BasisModule); // eslint-disable-line no-undef\n  }).then(function() {\n    _BasisFile = BasisModule.BasisFile;\n    BasisModule.initializeBasis();\n    self.postMessage({ type: "initialized" });\n  });\n}\n\nfunction transcode(buffer) {\n  var basisFile = new _BasisFile(new Uint8Array(buffer));\n  var width = basisFile.getImageWidth(0, 0);\n  var height = basisFile.getImageHeight(0, 0);\n  var levels = basisFile.getNumLevels(0);\n  var hasAlpha = basisFile.getHasAlpha();\n  function cleanup() {\n    basisFile.close();\n    basisFile.delete();\n  }\n  if (!hasAlpha) {\n    switch (config.format) {\n      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA\n        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;\n        break;\n      default: break;\n    }\n  }\n  if (!width || !height || !levels) {\n    cleanup();\n    throw new Error("BasisTextureLoader:  Invalid .basis file");\n  }\n  if (!basisFile.startTranscoding()) {\n    cleanup();\n    throw new Error("BasisTextureLoader: .startTranscoding failed");\n  }\n  var mipmaps = [];\n  for (var mip = 0; mip < levels; mip++) {\n    var mipWidth = basisFile.getImageWidth(0, mip);\n    var mipHeight = basisFile.getImageHeight(0, mip);\n    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));\n    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);\n    if (!status) {\n      cleanup();\n      throw new Error("BasisTextureLoader: .transcodeImage failed.");\n    }\n    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });\n  }\n  cleanup();\n  return { width, height, hasAlpha, mipmaps, format: config.format };\n}\n',xi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},Ei={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},ji=((vi={})[xi.cTFBC1]=Ei.COMPRESSED_RGB_S3TC_DXT1_EXT,vi[xi.cTFBC3]=Ei.COMPRESSED_RGBA_S3TC_DXT5_EXT,vi),zi=function(){function e(){}return e.setTranscoderPath=function(e){return this.transcoderPath=e,this},e.setWorkerLimit=function(e){return this.workerLimit=e,this},e.isInitialized=function(){return 0!==this.workerPool.filter((function(e){return e._initialized})).length},e.detectSupport=function(t){var r=this.workerConfig;if(r.astcSupported=!!t.extensions.get("WEBGL_compressed_texture_astc"),r.bptcSupported=!!t.extensions.get("EXT_texture_compression_bptc"),r.etcSupported=!!t.extensions.get("WEBGL_compressed_texture_etc1"),r.dxtSupported=!!t.extensions.get("WEBGL_compressed_texture_s3tc"),r.pvrtcSupported=!!t.extensions.get("WEBGL_compressed_texture_pvrtc")||!!t.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),r.astcSupported)r.format=e.BASIS_FORMAT.cTFASTC_4x4;else if(r.bptcSupported)r.format=e.BASIS_FORMAT.cTFBC7_M5;else if(r.dxtSupported)r.format=e.BASIS_FORMAT.cTFBC3;else if(r.pvrtcSupported)r.format=e.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!r.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");r.format=e.BASIS_FORMAT.cTFETC1}return this},e.createTexture=function(e){var t,r,n=this,i=e.byteLength,o=this._allocateWorker(i).then((function(i){return t=i,r=n.workerNextTaskID++,new Promise((function(n,i){t._callbacks[r]={resolve:n,reject:i},t.postMessage({type:"transcode",id:r,buffer:e},[e])}))})).then((function(e){var t,r=n.workerConfig,i=e.width,o=e.height,a=e.mipmaps;switch(e.format){case xi.cTFASTC_4x4:t=new r$3.CompressedTexture(a,i,o,r$3.RGBA_ASTC_4x4_Format);break;case xi.cTFBC1:case xi.cTFBC3:t=new r$3.CompressedTexture(a,i,o,ji[r.format],r$3.UnsignedByteType);break;case xi.cTFETC1:t=new r$3.CompressedTexture(a,i,o,r$3.RGB_ETC1_Format);break;case xi.cTFPVRTC1_4_RGB:t=new r$3.CompressedTexture(a,i,o,r$3.RGB_PVRTC_4BPPV1_Format);break;case xi.cTFPVRTC1_4_RGBA:t=new r$3.CompressedTexture(a,i,o,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return t.minFilter=1===a.length?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,t.magFilter=r$3.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t}));return o.catch((function(){return!0})).then((function(){t&&r&&(t._taskLoad-=i,delete t._callbacks[r])})),o},e._initTranscoder=function(){var e=this;if(!this.transcoderPending){var t=new r$3.FileLoader;t.setPath(this.transcoderPath);var r=new Promise((function(e,r){t.load("basis_transcoder.js",e,void 0,r)})),n=new r$3.FileLoader;n.setPath(this.transcoderPath),n.setResponseType("arraybuffer");var i=new Promise((function(e,t){n.load("basis_transcoder.wasm",e,void 0,t)}));this.transcoderPending=Promise.all([r,i]).then((function(t){var r=t[0],n=t[1],i=["/* basis_transcoder.js */",r,"/* worker */",Ti].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([i])),e.transcoderBinary=n}))}return this.transcoderPending},e._allocateWorker=function(e){var t=this;return this._initTranscoder().then((function(){if(t.workerPool.length<t.workerLimit){var r=function(e){var t=new Worker(e);return Object.assign(t,{_callbacks:{},_initialized:!1,_taskLoad:0})}(t.workerSourceURL);r._callbacks={},r._initialized=!1,r._taskLoad=0,r.postMessage({type:"init",config:t.workerConfig,transcoderBinary:t.transcoderBinary}),r.onmessage=function(e){var t=e.data;switch(t.type){case"initialized":r._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(t.type,'"'))}},t.workerPool.push(r)}else t.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var n=t.workerPool[t.workerPool.length-1];return n._taskLoad+=e,n}))},e.prototype.dispose=function(){for(var t=0;t<e.workerPool.length;t++)e.workerPool[t].terminate();return e.workerPool.length=0,this},e.BASIS_FORMAT=xi,e.DXT_FORMAT=Ei,e.DXT_FORMAT_MAP=ji,e.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",e.transcoderBinary=null,e.transcoderPending=null,e.workerLimit=1,e.workerPool=[],e.workerNextTaskID=1,e.workerSourceURL="",e.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},e}();function Ii(e){var t=e.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return t?t[1]:location.protocol}var bi=function(){function e(e){this.timeout=e.timeout,this.allowHosts=e.allowHosts,this.networkSubscribe=e.networkSubscribe}return e.prototype.setAllowHosts=function(e){this.allowHosts=e},e.prototype.setNetworkSubscribe=function(e){this.networkSubscribe=e},e.prototype.load=function(e,t,r,n,i,o){var a;void 0===t&&(t={}),void 0===r&&(r=Qe),void 0===n&&(n=Qe),void 0===i&&(i=Qe);var s=Ii(e),c={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},u=null!==(a=t.viaAjax)&&void 0!==a&&a,l=Ct(e),f=/^https?:$/.test(s),h=/\.basis$/.test(Pt(e).split("?")[0]);if(l?u=!0:f||(u=!1),u){if(h){var p=null,d="arraybuffer";return!0===t.flipY?Promise.reject(new Error(".basis cannnot set flipY: true.")):Ut(e,t$3.__assign(t$3.__assign({},c),{responseType:d}),void 0,void 0,i).then((function(e){return p=e.meta,zi.createTexture(e.body)})).then((function(e){return!1!==t.preInit?wi(e,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ti(t,["wrapS","wrapT"])),o):e})).then((function(e){var t={meta:p,body:e};return r(t),t})).catch((function(e){return n(e),Promise.reject(e)}))}return d="blob",Ut(e,t$3.__assign(t$3.__assign({},c),{responseType:d}),void 0,void 0,i).then((function(e){return pi(e.body)})).then((function(e){return Ai(e,t.maxSize)})).then((function(e){return!1!==t.preInit?wi(e,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},t),o):e})).then((function(e){var t={meta:null,body:e};return r(t),t})).catch((function(e){return n(e),Promise.reject(e)}))}if(h){var m=new Error("cannot load basis texture via image");return n(m),Promise.reject(m)}var g=null,v=di();return Qt(e,c,void 0,void 0,i,v).then((function(e){return g=e.meta,Ai(e.body,t.maxSize)})).then((function(e){return!1!==t.preInit?wi(e,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},t),o):e})).then((function(e){var t={meta:g,body:e};return r(t),t})).catch((function(e){return v.close(),n(e),Promise.reject(e)}))},e.prototype.loadCube=function(e,t,r,n,i,o){var a;void 0===t&&(t={}),void 0===r&&(r=Qe),void 0===n&&(n=Qe),void 0===i&&(i=Qe),Array.isArray(e)||(e=[e.right,e.left,e.up,e.down,e.front,e.back]);for(var s={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},c=[],u=[0,0,0,0,0,0],l=[],f=function(r){var o=e[r],f=Ii(o),h=function(e){u[r]=e,i(u.reduce((function(e,t){return e+t}),0)/6)},p=null!==(a=t.viaAjax)&&void 0!==a&&a,d=/^https?:$/.test(f),m=Ct(o),g=/\.basis$/.test(Pt(o).split("?")[0]);if(m?p=!0:d||(p=!1),p)if(g){var v="arraybuffer",y=Ut(o,t$3.__assign(t$3.__assign({},s),{responseType:v}),void 0,void 0,h).then((function(e){return l[r]=e.meta,zi.createTexture(e.body)}));c.push(y)}else v="blob",y=Ut(o,t$3.__assign(t$3.__assign({},s),{responseType:v}),void 0,void 0,h).then((function(e){return l[r]=e.meta,pi(e.body)})),c.push(y);else{if(g){var b=new Error("cannot load basis texture via image");return n(b),{value:Promise.reject(b)}}var _=di();y=Qt(o,s,void 0,void 0,h,_).then((function(e){return l[r]=e.meta,e.body})).catch((function(e){return _.close(),Promise.reject(e)})),c.push(y)}},h=0;h<6;h++){var p=f(h);if("object"==_typeof2(p))return p.value}return Promise.all(c).then((function(e){return e[0]instanceof r$3.CompressedTexture?function(e){var t=new r$3.CubeTexture(e);t.needsUpdate=!0;var r=t.dispose;return t.dispose=function(){for(var n=0,i=e;n<i.length;n++)i[n].dispose();r.call(t),delete t.dispose},t.isCompressedTexture=!0,t.format=e[0].format,t.minFilter=e[0].minFilter,t.magFilter=e[0].magFilter,t}(e):function(e){var t=new r$3.CubeTexture(e);t.needsUpdate=!0,t.flipY=!1;var r=t.dispose;return t.dispose=function(){for(var n=0,i=e;n<i.length;n++)i[n].close();r.call(t),delete t.dispose},t}(e)})).then((function(e){return!1!==t.preInit?e.isCompressedTexture?wi(e,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ti(t,["wrapS","wrapT"])),o):wi(e,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},t),o):e})).then((function(e){var t={body:e,meta:l};return r(t),t})).catch((function(e){for(var t=0,r=c;t<r.length;t++)r[t].then((function(e){e instanceof r$3.Texture?e.dispose():e.close()})).catch(Qe);return n(e),Promise.reject(e)}))},e}(),Oi={computeTangents:function(e){var t=e.index,r=e.attributes;if(null!==t&&void 0!==r.position&&void 0!==r.normal&&void 0!==r.uv){var n=t.array,i=r.position.array,o=r.normal.array,a=r.uv.array,s=i.length/3;void 0===r.tangent&&e.setAttribute("tangent",new r$3.BufferAttribute(new Float32Array(4*s),4));for(var c=r.tangent.array,u=[],l=[],f=0;f<s;f++)u[f]=new r$3.Vector3,l[f]=new r$3.Vector3;var h=new r$3.Vector3,p=new r$3.Vector3,d=new r$3.Vector3,m=new r$3.Vector2,g=new r$3.Vector2,v=new r$3.Vector2,y=new r$3.Vector3,b=new r$3.Vector3,_=e.groups;0===_.length&&(_=[{start:0,count:n.length}]),f=0;for(var A=_.length;f<A;++f)for(var M=I=(D=_[f]).start,x=I+D.count;M<x;M+=3)P(n[M+0],n[M+1],n[M+2]);var w,$,E,T=new r$3.Vector3,S=new r$3.Vector3,O=new r$3.Vector3,N=new r$3.Vector3;for(f=0,A=_.length;f<A;++f){var D,I;for(M=I=(D=_[f]).start,x=I+D.count;M<x;M+=3)j(n[M+0]),j(n[M+1]),j(n[M+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function P(e,t,r){h.fromArray(i,3*e),p.fromArray(i,3*t),d.fromArray(i,3*r),m.fromArray(a,2*e),g.fromArray(a,2*t),v.fromArray(a,2*r);var n=p.x-h.x,o=d.x-h.x,s=p.y-h.y,c=d.y-h.y,f=p.z-h.z,_=d.z-h.z,A=g.x-m.x,M=v.x-m.x,x=g.y-m.y,w=v.y-m.y,$=1/(A*w-M*x);y.set((w*n-x*o)*$,(w*s-x*c)*$,(w*f-x*_)*$),b.set((A*o-M*n)*$,(A*c-M*s)*$,(A*_-M*f)*$),u[e].add(y),u[t].add(y),u[r].add(y),l[e].add(b),l[t].add(b),l[r].add(b)}function j(e){O.fromArray(o,3*e),N.copy(O),$=u[e],T.copy($),T.sub(O.multiplyScalar(O.dot($))).normalize(),S.crossVectors(N,$),E=S.dot(l[e]),w=E<0?-1:1,c[4*e]=T.x,c[4*e+1]=T.y,c[4*e+2]=T.z,c[4*e+3]=w}},mergeBufferGeometries:function(e,t){for(var r=null!==e[0].index,n=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=new r$3.BufferGeometry,c=0,u=0;u<e.length;++u){var l=e[u];if(r!==(null!==l.index))return null;for(var f in l.attributes){if(!n.has(f))return null;void 0===o[f]&&(o[f]=[]),o[f].push(l.attributes[f])}for(var f in l.morphAttributes){if(!i.has(f))return null;void 0===a[f]&&(a[f]=[]),a[f].push(l.morphAttributes[f])}if(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(l.userData),t){var h;if(r)h=l.index.count;else{if(void 0===l.attributes.position)return null;h=l.attributes.position.count}s.addGroup(c,h,u),c+=h}}if(r){var p=0,d=[];for(u=0;u<e.length;++u){for(var m=e[u].index,g=0;g<m.count;++g)d.push(m.getX(g)+p);p+=e[u].attributes.position.count}s.setIndex(d)}for(var f in o){var v=this.mergeBufferAttributes(o[f]);if(!v)return null;s.setAttribute(f,v)}for(var f in a){var y=a[f][0].length;if(0===y)break;for(s.morphAttributes=s.morphAttributes||{},s.morphAttributes[f]=[],u=0;u<y;++u){var b=[];for(g=0;g<a[f].length;++g)b.push(a[f][g][u]);var _=this.mergeBufferAttributes(b);if(!_)return null;s.morphAttributes[f].push(_)}}return s},mergeBufferAttributes:function(e){for(var t,r,n,i=0,o=0;o<e.length;++o){var a=e[o];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===r&&(r=a.itemSize),r!==a.itemSize)return null;if(void 0===n&&(n=a.normalized),n!==a.normalized)return null;i+=a.array.length}var s=new t(i),c=0;for(o=0;o<e.length;++o)s.set(e[o].array,c),c+=e[o].array.length;return new r$3.BufferAttribute(s,r,n)},interleaveAttributes:function(e){for(var t,r=0,n=0,i=0,o=e.length;i<o;++i){var a=e[i];if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;r+=a.array.length,n+=a.itemSize}var s=new r$3.InterleavedBuffer(new t(r),n),c=0,u=[],l=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"],h=0;for(o=e.length;h<o;h++){var p=(a=e[h]).itemSize,d=a.count,m=new r$3.InterleavedBufferAttribute(s,p,c,a.normalized);u.push(m),c+=p;for(var g=0;g<d;g++)for(var v=0;v<p;v++)m[f[v]](g,a[l[v]](g))}return u},estimateBytesUsed:function(e){var t=0;for(var r in e.attributes){var n=e.getAttribute(r);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+(i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0)},mergeVertices:function(e,t){void 0===t&&(t=1e-4),t=Math.max(t,Number.EPSILON);for(var r={},n=e.getIndex(),i=e.getAttribute("position"),o=n?n.count:i.count,a=0,s=Object.keys(e.attributes),c={},u={},l=[],f=["getX","getY","getZ","getW"],h=0,p=s.length;h<p;h++)c[b=s[h]]=[],(x=e.morphAttributes[b])&&(u[b]=new Array(x.length).fill().map((function(){return[]})));var d=Math.log10(1/t),m=Math.pow(10,d);for(h=0;h<o;h++){var g=n?n.getX(h):h,v="",y=0;for(p=s.length;y<p;y++)for(var b=s[y],_=(M=e.getAttribute(b)).itemSize,A=0;A<_;A++)v+="".concat(~~(M[f[A]](g)*m),",");if(v in r)l.push(r[v]);else{for(y=0,p=s.length;y<p;y++){b=s[y];var M=e.getAttribute(b),x=e.morphAttributes[b],w=(_=M.itemSize,c[b]),$=u[b];for(A=0;A<_;A++){var E=f[A];if(w.push(M[E](g)),x)for(var T=0,S=x.length;T<S;T++)$[T].push(x[T][E](g))}}r[v]=a,l.push(a),a++}}var O=e.clone();for(h=0,p=s.length;h<p;h++){b=s[h];var N=e.getAttribute(b),D=new N.array.constructor(c[b]);if(M=new r$3.BufferAttribute(D,N.itemSize,N.normalized),O.setAttribute(b,M),b in u)for(y=0;y<u[b].length;y++){var I=e.morphAttributes[b][y],P=(D=new I.array.constructor(u[b][y]),new r$3.BufferAttribute(D,I.itemSize,I.normalized));O.morphAttributes[b][y]=P}}return O.setIndex(l),O}},Si=o$2.Reader,Li=o$2.Writer,ki=o$2.util,Ci=o$2.roots["@REALSEE/FIVE:1"]||(o$2.roots["@REALSEE/FIVE:1"]={}),Pi=Ci.Model=function(){function e(e){if(this.chunks=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.chunks=ki.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Li.create()),null!=e.chunks&&e.chunks.length)for(var r=0;r<e.chunks.length;++r)Ci.Chunk.encode(e.chunks[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Si||(e=Si.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ci.Model;e.pos<r;){var i=e.uint32();if(i>>>3==1)n.chunks&&n.chunks.length||(n.chunks=[]),n.chunks.push(Ci.Chunk.decode(e,e.uint32()));else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Si||(e=new Si(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.chunks&&e.hasOwnProperty("chunks")){if(!Array.isArray(e.chunks))return"chunks: array expected";for(var t=0;t<e.chunks.length;++t){var r=Ci.Chunk.verify(e.chunks[t]);if(r)return"chunks."+r}}return null},e.fromObject=function(e){if(e instanceof Ci.Model)return e;var t=new Ci.Model;if(e.chunks){if(!Array.isArray(e.chunks))throw TypeError(".Model.chunks: array expected");t.chunks=[];for(var r=0;r<e.chunks.length;++r){if("object"!=_typeof2(e.chunks[r]))throw TypeError(".Model.chunks: object expected");t.chunks[r]=Ci.Chunk.fromObject(e.chunks[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.chunks=[]),e.chunks&&e.chunks.length){r.chunks=[];for(var n=0;n<e.chunks.length;++n)r.chunks[n]=Ci.Chunk.toObject(e.chunks[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}();Ci.Chunk=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.vertices=null,e.prototype.faces=null,e.prototype.name="",e.prototype.texture="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Li.create()),Ci.Vertices.encode(e.vertices,t.uint32(10).fork()).ldelim(),Ci.Faces.encode(e.faces,t.uint32(18).fork()).ldelim(),t.uint32(26).string(e.name),null!=e.texture&&Object.hasOwnProperty.call(e,"texture")&&t.uint32(34).string(e.texture),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Si||(e=Si.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ci.Chunk;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.vertices=Ci.Vertices.decode(e,e.uint32());break;case 2:n.faces=Ci.Faces.decode(e,e.uint32());break;case 3:n.name=e.string();break;case 4:n.texture=e.string();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("vertices"))throw ki.ProtocolError("missing required 'vertices'",{instance:n});if(!n.hasOwnProperty("faces"))throw ki.ProtocolError("missing required 'faces'",{instance:n});if(!n.hasOwnProperty("name"))throw ki.ProtocolError("missing required 'name'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof Si||(e=new Si(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";var t=Ci.Vertices.verify(e.vertices);if(t)return"vertices."+t;var r=Ci.Faces.verify(e.faces);return r?"faces."+r:ki.isString(e.name)?null!=e.texture&&e.hasOwnProperty("texture")&&!ki.isString(e.texture)?"texture: string expected":null:"name: string expected"},e.fromObject=function(e){if(e instanceof Ci.Chunk)return e;var t=new Ci.Chunk;if(null!=e.vertices){if("object"!=_typeof2(e.vertices))throw TypeError(".Chunk.vertices: object expected");t.vertices=Ci.Vertices.fromObject(e.vertices)}if(null!=e.faces){if("object"!=_typeof2(e.faces))throw TypeError(".Chunk.faces: object expected");t.faces=Ci.Faces.fromObject(e.faces)}return null!=e.name&&(t.name=String(e.name)),null!=e.texture&&(t.texture=String(e.texture)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.vertices=null,r.faces=null,r.name="",r.texture=""),null!=e.vertices&&e.hasOwnProperty("vertices")&&(r.vertices=Ci.Vertices.toObject(e.vertices,t)),null!=e.faces&&e.hasOwnProperty("faces")&&(r.faces=Ci.Faces.toObject(e.faces,t)),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.texture&&e.hasOwnProperty("texture")&&(r.texture=e.texture),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ci.Vertices=function(){function e(e){if(this.xyz=[],this.uvs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.xyz=ki.emptyArray,e.prototype.uvs=ki.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Li.create()),null!=e.xyz&&e.xyz.length){t.uint32(10).fork();for(var r=0;r<e.xyz.length;++r)t.float(e.xyz[r]);t.ldelim()}if(null!=e.uvs&&e.uvs.length){t.uint32(18).fork();for(var n=0;n<e.uvs.length;++n)t.float(e.uvs[n]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Si||(e=Si.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ci.Vertices;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:if(n.xyz&&n.xyz.length||(n.xyz=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.xyz.push(e.float());else n.xyz.push(e.float());break;case 2:if(n.uvs&&n.uvs.length||(n.uvs=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)n.uvs.push(e.float());else n.uvs.push(e.float());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Si||(e=new Si(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.xyz&&e.hasOwnProperty("xyz")){if(!Array.isArray(e.xyz))return"xyz: array expected";for(var t=0;t<e.xyz.length;++t)if("number"!=typeof e.xyz[t])return"xyz: number[] expected"}if(null!=e.uvs&&e.hasOwnProperty("uvs")){if(!Array.isArray(e.uvs))return"uvs: array expected";for(var r=0;r<e.uvs.length;++r)if("number"!=typeof e.uvs[r])return"uvs: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ci.Vertices)return e;var t=new Ci.Vertices;if(e.xyz){if(!Array.isArray(e.xyz))throw TypeError(".Vertices.xyz: array expected");t.xyz=[];for(var r=0;r<e.xyz.length;++r)t.xyz[r]=Number(e.xyz[r])}if(e.uvs){if(!Array.isArray(e.uvs))throw TypeError(".Vertices.uvs: array expected");t.uvs=[];for(var n=0;n<e.uvs.length;++n)t.uvs[n]=Number(e.uvs[n])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.xyz=[],r.uvs=[]),e.xyz&&e.xyz.length){r.xyz=[];for(var n=0;n<e.xyz.length;++n)r.xyz[n]=t.json&&!isFinite(e.xyz[n])?String(e.xyz[n]):e.xyz[n]}if(e.uvs&&e.uvs.length){r.uvs=[];for(var i=0;i<e.uvs.length;++i)r.uvs[i]=t.json&&!isFinite(e.uvs[i])?String(e.uvs[i]):e.uvs[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ci.Faces=function(){function e(e){if(this.indices=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.indices=ki.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Li.create()),null!=e.indices&&e.indices.length){t.uint32(10).fork();for(var r=0;r<e.indices.length;++r)t.uint32(e.indices[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Si||(e=Si.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ci.Faces;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.indices&&n.indices.length||(n.indices=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.indices.push(e.uint32());else n.indices.push(e.uint32());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Si||(e=new Si(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.indices&&e.hasOwnProperty("indices")){if(!Array.isArray(e.indices))return"indices: array expected";for(var t=0;t<e.indices.length;++t)if(!ki.isInteger(e.indices[t]))return"indices: integer[] expected"}return null},e.fromObject=function(e){if(e instanceof Ci.Faces)return e;var t=new Ci.Faces;if(e.indices){if(!Array.isArray(e.indices))throw TypeError(".Faces.indices: array expected");t.indices=[];for(var r=0;r<e.indices.length;++r)t.indices[r]=e.indices[r]>>>0}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.indices=[]),e.indices&&e.indices.length){r.indices=[];for(var n=0;n<e.indices.length;++n)r.indices[n]=e.indices[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}();var _i=(new r$3.Matrix4).set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function Bi(e){var t=e.match(/(group|floor)-?(\d+)/);return t?parseInt(t[2],10):0}function Ui(e){var t=e.match(/(chunk)-?(\d+)/);return t?parseInt(t[2],10):0}function Ri(e){var t=e.indices,r=e.vertices,n=e.uvs,i=new r$3.BufferGeometry;i.setIndex(new r$3.BufferAttribute(new Uint32Array(t),1)),i.setAttribute("position",new r$3.BufferAttribute(new Float32Array(r),3)),i.attributes.position.applyMatrix4(_i),Re(n)||i.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(n),2));for(var o=new Float32Array(r.length),a=new r$3.Vector3,s=new r$3.Vector3,c=new r$3.Vector3,u=new r$3.Vector3,l=new r$3.Vector3,f=new r$3.Vector3,h=0,p=i.index.array.length,d=void 0,m=void 0,g=void 0;h<p;h+=3)d=3*t[h+0],m=3*t[h+1],g=3*t[h+2],a.x=r[d],a.y=r[d+1],a.z=r[d+2],s.x=r[m],s.y=r[m+1],s.z=r[m+2],c.x=r[g],c.y=r[g+1],c.z=r[g+2],u.x=c.x-s.x,u.y=c.y-s.y,u.z=c.z-s.z,l.x=a.x-s.x,l.y=a.y-s.y,l.z=a.z-s.z,f.x=u.y*l.z-u.z*l.y,f.y=u.z*l.x-u.x*l.z,f.z=u.x*l.y-u.y*l.x,o[d]+=f.x,o[d+1]+=f.y,o[d+2]+=f.z,o[m]+=f.x,o[m+1]+=f.y,o[m+2]+=f.z,o[g]+=f.x,o[g+1]+=f.y,o[g+2]+=f.z;return i.setAttribute("normal",new r$3.BufferAttribute(o,3)),i}function Qi(e,t,r,n){var i=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:zi.isInitialized()},ti(t,["format","quality","size"]));return e=t.transform?t.transform(e,i):ai(e,i),new bi({allowHosts:r,networkSubscribe:n}).load(e,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:new r$3.Vector2(1024,1024),preInit:!0}).then((function(e){var t=e.body;return t.needsUpdate=!0,t}))}function Yi(e){var t=new ut;return e.catch((function(){return null})).then((function(e){t.uniforms.map.value=e,t.uniforms.exposure.value=3.3})),t}function Fi(e,t,r,n,i,o,a){void 0===i&&(i={});for(var s=0,c=e;s<c.length;s++){var u=c[s];u.chunkName=Ui(u.name),u.floorName=Bi(u.name),u.texture&&(u.texture=r[u.chunkName]=r[u.chunkName]||t+u.texture)}e.sort((function(e,t){return 1e3*e.floorName+e.chunkName-(1e3*t.floorName+t.chunkName)}));var l=[],f=[],h=Promise.resolve();return(h=(h=h.then((function(){return Wt((function(){for(var t=e.length,r=0;r<t;r++){var s,c=e[r],u=Bi(c.name),f=l[u]=l[u]||{geometries:[],materials:[]},h=Ri({vertices:c.vertices.xyz,uvs:c.vertices.uvs,indices:c.faces.indices});if(h.name="model_geo_chunk_"+r,f.geometries.push(h),c.texture)(s=Yi(c.texture in i?i[c.texture]:i[c.texture]=Qi(c.texture,n,o,a))).name="model_mtl_chunk_"+r,f.materials.push(s);else(s=new ut).defines.USE_MAP=!1,s.uniforms.color.value=new r$3.Color(16777215),s.name="model_mtl_chunk_"+r,f.materials.push(s)}}))}))).then((function(){return Wt((function(){for(var e=0;e<l.length;e++){var t=l[e];if(t){var r=Oi.mergeBufferGeometries(t.geometries,!0);t.geometries.forEach((function(e){return e.dispose()}));var n=new Je(r,t.materials);n.floorIndex=e,n.name="model_floor_"+e,f.push(n)}}}))}))).then((function(){var e=Object.keys(i).map((function(e){return i[e].catch((function(){}))}));return Promise.all(e).then((function(){return f}))}))}function Vi(e,t){return!1!==(e=Object.assign({},e)).autoResize&&(e.size=t>96?Math.min(e.size||1/0,100):t>48?Math.min(e.size||1/0,200):t>24?Math.min(e.size||1/0,400):t>12?Math.min(e.size||1/0,800):Math.min(e.size||1/0,1024)),e}function Hi(e){return 0===e.indexOf("//")||/^[0-9a-z]+\:\/\//i.test(e)}var Gi=o$2.Reader,Wi=o$2.Writer,qi=o$2.util,Ki=o$2.roots["@REALSEE/FIVE:0"]||(o$2.roots["@REALSEE/FIVE:0"]={}),Zi=Ki.Model=function(){function e(e){if(this.meshes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.meshes=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.meshes&&e.meshes.length)for(var r=0;r<e.meshes.length;++r)Ki.Mesh.encode(e.meshes[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Model;e.pos<r;){var i=e.uint32();if(i>>>3==1)n.meshes&&n.meshes.length||(n.meshes=[]),n.meshes.push(Ki.Mesh.decode(e,e.uint32()));else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.meshes&&e.hasOwnProperty("meshes")){if(!Array.isArray(e.meshes))return"meshes: array expected";for(var t=0;t<e.meshes.length;++t){var r=Ki.Mesh.verify(e.meshes[t]);if(r)return"meshes."+r}}return null},e.fromObject=function(e){if(e instanceof Ki.Model)return e;var t=new Ki.Model;if(e.meshes){if(!Array.isArray(e.meshes))throw TypeError(".Model.meshes: array expected");t.meshes=[];for(var r=0;r<e.meshes.length;++r){if("object"!=_typeof2(e.meshes[r]))throw TypeError(".Model.meshes: object expected");t.meshes[r]=Ki.Mesh.fromObject(e.meshes[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.meshes=[]),e.meshes&&e.meshes.length){r.meshes=[];for(var n=0;n<e.meshes.length;++n)r.meshes[n]=Ki.Mesh.toObject(e.meshes[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}();function Xi(e){for(var t=[0,0,0],r=0;r<e.attributes.normal.array.length/9;r++)t[0]=e.attributes.normal.array[9*r],t[1]=e.attributes.normal.array[9*r+1],t[2]=e.attributes.normal.array[9*r+2],e.attributes.normal.array[9*r]=e.attributes.normal.array[9*r+6],e.attributes.normal.array[9*r+1]=e.attributes.normal.array[9*r+7],e.attributes.normal.array[9*r+2]=e.attributes.normal.array[9*r+8],e.attributes.normal.array[9*r+6]=t[0],e.attributes.normal.array[9*r+7]=t[1],e.attributes.normal.array[9*r+8]=t[2];for(r=0;r<e.attributes.position.array.length/9;r++)t[0]=e.attributes.position.array[9*r],t[1]=e.attributes.position.array[9*r+1],t[2]=e.attributes.position.array[9*r+2],e.attributes.position.array[9*r]=e.attributes.position.array[9*r+6],e.attributes.position.array[9*r+1]=e.attributes.position.array[9*r+7],e.attributes.position.array[9*r+2]=e.attributes.position.array[9*r+8],e.attributes.position.array[9*r+6]=t[0],e.attributes.position.array[9*r+7]=t[1],e.attributes.position.array[9*r+8]=t[2];for(r=0;r<e.attributes.uv.array.length/6;r++)t[0]=e.attributes.uv.array[6*r],t[1]=e.attributes.uv.array[6*r+1],e.attributes.uv.array[6*r]=e.attributes.uv.array[6*r+4],e.attributes.uv.array[6*r+1]=e.attributes.uv.array[6*r+5],e.attributes.uv.array[6*r+4]=t[0],e.attributes.uv.array[6*r+5]=t[1];e.attributes.normal.needsUpdate=!0,e.attributes.position.needsUpdate=!0,e.attributes.uv.needsUpdate=!0}function Ji(e){var t=e.position,r=e.normal,n=e.uv,i=e.uv2,o=e.groups,a=new r$3.BufferGeometry;a.setAttribute("position",new r$3.BufferAttribute(new Float32Array(t.array),3)),r&&a.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(r.array),3)),n&&a.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(n.array),2)),i&&a.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(i.array),2));for(var s=0,c=o;s<c.length;s++){var u=c[s];a.addGroup(u.start,u.count,u.materialIndex)}return a}function $i(e,t,r,n,i,o){if(o.hasOwnProperty(e))return o[e];Hi(e=e.split("?")[0])||(e=t+e),0===(e=e.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")&&(e="https:"+e);var a=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:zi.isInitialized()},ti(r,["quality","format"]));return o[e=r.transform?r.transform(e,a):ai(e,a)]=i.load(e,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping,preInit:!0}).then((function(e){var t=e.body;return n&&t.repeat.copy(n),t.needsUpdate=!0,t.updateMatrix(),t}))}function en(e,t,r,n,i){var o=[],a=new ut,s=a.uniforms;s.exposure.value=4.3;var c=a.defines;if(c.USE_MAP=!1,c.USE_UV=!1,e.kd&&(s.diffuse.value=(new r$3.Color).fromArray(e.kd.rgb)),e.mapkd){var u=null;if(e.mapkdrepeat){var l=e.mapkdrepeat.split(/\s+/).map((function(e){return Number(e)})),f=l[0],h=l[1];u=new r$3.Vector2(f,h)}o.push($i(e.mapkd,t,r,u,n,i).then((function(e){c.USE_MAP=!0,c.USE_UV=!0,s.map.value=e,s.uvTransform.value=e.matrix})).catch((function(e){})))}if(e.ks&&(s.specular.value=(new r$3.Color).fromArray(e.ks.rgb)),e.mapks&&o.push($i(e.mapks,t,r,null,n,i).then((function(e){s.specularMap.value=e})).catch((function(e){}))),e.ke&&(s.emissive.value=(new r$3.Color).fromArray(e.ke.rgb)),e.mapke&&o.push($i(e.mapke,t,r,null,n,i).then((function(e){s.emissiveMap.value=e})).catch((function(e){}))),e.norm&&o.push($i(e.norm,t,r,null,n,i).then((function(e){s.normalMap.value=e})).catch((function(e){}))),e.mapbump&&o.push($i(e.mapbump,t,r,null,n,i).then((function(e){s.bumpMap.value=e})).catch((function(e){}))),e.bump&&o.push($i(e.bump,t,r,null,n,i).then((function(e){s.bumpMap.value=e})).catch((function(e){}))),"number"==typeof e.ns&&(s.shininess.value=e.ns),"number"==typeof e.d){var p=e.d;p>0&&p<1&&(a.originOpacity=p,a.opacity=p)}return{material:a,textureReady:Promise.all(o).then((function(){}))}}function tn(e,t,r,n,i){for(var o,a=[],s=[],c=(o=e,Zi.decode(o).meshes),u=new bi({allowHosts:n,networkSubscribe:i}),l=new r$3.Matrix4,f=new r$3.Vector3,h=new r$3.Quaternion,p=new r$3.Vector3,d={},m=0,g=c;m<g.length;m++){var v=g[m],y=v.name,b=v.chunks,_=v.matrix;if("Ceiling"!==y&&"CeilingDrop"!==y)for(var A=0,M=_;A<M.length;A++){var x=M[A];l.elements=x.elements;var w=new et;w.renderOrder=-3;for(var $=0;$<b.length;$++){var E=Ji(b[$].geometry);E.applyMatrix4(l),l.decompose(f,h,p),p.x*p.y*p.z<0&&E.attributes.normal&&E.attributes.position&&E.attributes.uv&&Xi(E);for(var T=[],S=0,O=b[$].material;S<O.length;S++){var N=en(O[S],t,r,u,d),D=N.material,I=N.textureReady;s.push(I),T.push(D)}var P=new Je(E,T);P.name="chunk_"+$,w.add(P)}w.floorIndex=0,w.name=y,a.push(w)}}return Promise.all(s).catch((function(){})).then((function(){return d={},a}))}function nn(e){var t;return new((t=r$3.Triangle).bind.apply(t,t$3.__spreadArray([void 0],e.map((function(e){return new r$3.Vector3(e.x,e.y,e.z)})),!1)))}Ki.Mesh=function(){function e(e){if(this.chunks=[],this.matrix=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.chunks=qi.emptyArray,e.prototype.matrix=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),t.uint32(10).string(e.name),null!=e.chunks&&e.chunks.length)for(var r=0;r<e.chunks.length;++r)Ki.Chunk.encode(e.chunks[r],t.uint32(18).fork()).ldelim();if(null!=e.matrix&&e.matrix.length)for(var n=0;n<e.matrix.length;++n)Ki.Matrix.encode(e.matrix[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Mesh;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 2:n.chunks&&n.chunks.length||(n.chunks=[]),n.chunks.push(Ki.Chunk.decode(e,e.uint32()));break;case 3:n.matrix&&n.matrix.length||(n.matrix=[]),n.matrix.push(Ki.Matrix.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("name"))throw qi.ProtocolError("missing required 'name'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(!qi.isString(e.name))return"name: string expected";if(null!=e.chunks&&e.hasOwnProperty("chunks")){if(!Array.isArray(e.chunks))return"chunks: array expected";for(var t=0;t<e.chunks.length;++t){var r=Ki.Chunk.verify(e.chunks[t]);if(r)return"chunks."+r}}if(null!=e.matrix&&e.hasOwnProperty("matrix")){if(!Array.isArray(e.matrix))return"matrix: array expected";for(var n=0;n<e.matrix.length;++n){var i=Ki.Matrix.verify(e.matrix[n]);if(i)return"matrix."+i}}return null},e.fromObject=function(e){if(e instanceof Ki.Mesh)return e;var t=new Ki.Mesh;if(null!=e.name&&(t.name=String(e.name)),e.chunks){if(!Array.isArray(e.chunks))throw TypeError(".Mesh.chunks: array expected");t.chunks=[];for(var r=0;r<e.chunks.length;++r){if("object"!=_typeof2(e.chunks[r]))throw TypeError(".Mesh.chunks: object expected");t.chunks[r]=Ki.Chunk.fromObject(e.chunks[r])}}if(e.matrix){if(!Array.isArray(e.matrix))throw TypeError(".Mesh.matrix: array expected");t.matrix=[];for(var n=0;n<e.matrix.length;++n){if("object"!=_typeof2(e.matrix[n]))throw TypeError(".Mesh.matrix: object expected");t.matrix[n]=Ki.Matrix.fromObject(e.matrix[n])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.chunks=[],r.matrix=[]),t.defaults&&(r.name=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.chunks&&e.chunks.length){r.chunks=[];for(var n=0;n<e.chunks.length;++n)r.chunks[n]=Ki.Chunk.toObject(e.chunks[n],t)}if(e.matrix&&e.matrix.length){r.matrix=[];for(var i=0;i<e.matrix.length;++i)r.matrix[i]=Ki.Matrix.toObject(e.matrix[i],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Matrix=function(){function e(e){if(this.elements=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elements=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.elements&&e.elements.length)for(var r=0;r<e.elements.length;++r)t.uint32(13).float(e.elements[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Matrix;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.elements&&n.elements.length||(n.elements=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.elements.push(e.float());else n.elements.push(e.float());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.elements&&e.hasOwnProperty("elements")){if(!Array.isArray(e.elements))return"elements: array expected";for(var t=0;t<e.elements.length;++t)if("number"!=typeof e.elements[t])return"elements: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ki.Matrix)return e;var t=new Ki.Matrix;if(e.elements){if(!Array.isArray(e.elements))throw TypeError(".Matrix.elements: array expected");t.elements=[];for(var r=0;r<e.elements.length;++r)t.elements[r]=Number(e.elements[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.elements=[]),e.elements&&e.elements.length){r.elements=[];for(var n=0;n<e.elements.length;++n)r.elements[n]=t.json&&!isFinite(e.elements[n])?String(e.elements[n]):e.elements[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Chunk=function(){function e(e){if(this.material=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.geometry=null,e.prototype.material=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),Ki.Geometry.encode(e.geometry,t.uint32(18).fork()).ldelim(),null!=e.material&&e.material.length)for(var r=0;r<e.material.length;++r)Ki.Material.encode(e.material[r],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Chunk;e.pos<r;){var i=e.uint32();switch(i>>>3){case 2:n.geometry=Ki.Geometry.decode(e,e.uint32());break;case 3:n.material&&n.material.length||(n.material=[]),n.material.push(Ki.Material.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("geometry"))throw qi.ProtocolError("missing required 'geometry'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";var t=Ki.Geometry.verify(e.geometry);if(t)return"geometry."+t;if(null!=e.material&&e.hasOwnProperty("material")){if(!Array.isArray(e.material))return"material: array expected";for(var r=0;r<e.material.length;++r){var n=Ki.Material.verify(e.material[r]);if(n)return"material."+n}}return null},e.fromObject=function(e){if(e instanceof Ki.Chunk)return e;var t=new Ki.Chunk;if(null!=e.geometry){if("object"!=_typeof2(e.geometry))throw TypeError(".Chunk.geometry: object expected");t.geometry=Ki.Geometry.fromObject(e.geometry)}if(e.material){if(!Array.isArray(e.material))throw TypeError(".Chunk.material: array expected");t.material=[];for(var r=0;r<e.material.length;++r){if("object"!=_typeof2(e.material[r]))throw TypeError(".Chunk.material: object expected");t.material[r]=Ki.Material.fromObject(e.material[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.material=[]),t.defaults&&(r.geometry=null),null!=e.geometry&&e.hasOwnProperty("geometry")&&(r.geometry=Ki.Geometry.toObject(e.geometry,t)),e.material&&e.material.length){r.material=[];for(var n=0;n<e.material.length;++n)r.material[n]=Ki.Material.toObject(e.material[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Geometry=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.position=null,e.prototype.uv=null,e.prototype.uv2=null,e.prototype.normal=null,e.prototype.groups=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),Ki.Position.encode(e.position,t.uint32(10).fork()).ldelim(),null!=e.uv&&Object.hasOwnProperty.call(e,"uv")&&Ki.UV.encode(e.uv,t.uint32(18).fork()).ldelim(),null!=e.uv2&&Object.hasOwnProperty.call(e,"uv2")&&Ki.UV.encode(e.uv2,t.uint32(26).fork()).ldelim(),Ki.Normal.encode(e.normal,t.uint32(34).fork()).ldelim(),null!=e.groups&&e.groups.length)for(var r=0;r<e.groups.length;++r)Ki.Group.encode(e.groups[r],t.uint32(42).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Geometry;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.position=Ki.Position.decode(e,e.uint32());break;case 2:n.uv=Ki.UV.decode(e,e.uint32());break;case 3:n.uv2=Ki.UV.decode(e,e.uint32());break;case 4:n.normal=Ki.Normal.decode(e,e.uint32());break;case 5:n.groups&&n.groups.length||(n.groups=[]),n.groups.push(Ki.Group.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("position"))throw qi.ProtocolError("missing required 'position'",{instance:n});if(!n.hasOwnProperty("normal"))throw qi.ProtocolError("missing required 'normal'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";var t=Ki.Position.verify(e.position);if(t)return"position."+t;if(null!=e.uv&&e.hasOwnProperty("uv")){var r=Ki.UV.verify(e.uv);if(r)return"uv."+r}if(null!=e.uv2&&e.hasOwnProperty("uv2")){var n=Ki.UV.verify(e.uv2);if(n)return"uv2."+n}var i=Ki.Normal.verify(e.normal);if(i)return"normal."+i;if(null!=e.groups&&e.hasOwnProperty("groups")){if(!Array.isArray(e.groups))return"groups: array expected";for(var o=0;o<e.groups.length;++o){var a=Ki.Group.verify(e.groups[o]);if(a)return"groups."+a}}return null},e.fromObject=function(e){if(e instanceof Ki.Geometry)return e;var t=new Ki.Geometry;if(null!=e.position){if("object"!=_typeof2(e.position))throw TypeError(".Geometry.position: object expected");t.position=Ki.Position.fromObject(e.position)}if(null!=e.uv){if("object"!=_typeof2(e.uv))throw TypeError(".Geometry.uv: object expected");t.uv=Ki.UV.fromObject(e.uv)}if(null!=e.uv2){if("object"!=_typeof2(e.uv2))throw TypeError(".Geometry.uv2: object expected");t.uv2=Ki.UV.fromObject(e.uv2)}if(null!=e.normal){if("object"!=_typeof2(e.normal))throw TypeError(".Geometry.normal: object expected");t.normal=Ki.Normal.fromObject(e.normal)}if(e.groups){if(!Array.isArray(e.groups))throw TypeError(".Geometry.groups: array expected");t.groups=[];for(var r=0;r<e.groups.length;++r){if("object"!=_typeof2(e.groups[r]))throw TypeError(".Geometry.groups: object expected");t.groups[r]=Ki.Group.fromObject(e.groups[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.groups=[]),t.defaults&&(r.position=null,r.uv=null,r.uv2=null,r.normal=null),null!=e.position&&e.hasOwnProperty("position")&&(r.position=Ki.Position.toObject(e.position,t)),null!=e.uv&&e.hasOwnProperty("uv")&&(r.uv=Ki.UV.toObject(e.uv,t)),null!=e.uv2&&e.hasOwnProperty("uv2")&&(r.uv2=Ki.UV.toObject(e.uv2,t)),null!=e.normal&&e.hasOwnProperty("normal")&&(r.normal=Ki.Normal.toObject(e.normal,t)),e.groups&&e.groups.length){r.groups=[];for(var n=0;n<e.groups.length;++n)r.groups[n]=Ki.Group.toObject(e.groups[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Position=function(){function e(e){if(this.array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.array=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.array&&e.array.length){t.uint32(10).fork();for(var r=0;r<e.array.length;++r)t.float(e.array[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Position;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.array&&n.array.length||(n.array=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.array.push(e.float());else n.array.push(e.float());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.array&&e.hasOwnProperty("array")){if(!Array.isArray(e.array))return"array: array expected";for(var t=0;t<e.array.length;++t)if("number"!=typeof e.array[t])return"array: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ki.Position)return e;var t=new Ki.Position;if(e.array){if(!Array.isArray(e.array))throw TypeError(".Position.array: array expected");t.array=[];for(var r=0;r<e.array.length;++r)t.array[r]=Number(e.array[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.array=[]),e.array&&e.array.length){r.array=[];for(var n=0;n<e.array.length;++n)r.array[n]=t.json&&!isFinite(e.array[n])?String(e.array[n]):e.array[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.UV=function(){function e(e){if(this.array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.array=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.array&&e.array.length){t.uint32(10).fork();for(var r=0;r<e.array.length;++r)t.float(e.array[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.UV;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.array&&n.array.length||(n.array=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.array.push(e.float());else n.array.push(e.float());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.array&&e.hasOwnProperty("array")){if(!Array.isArray(e.array))return"array: array expected";for(var t=0;t<e.array.length;++t)if("number"!=typeof e.array[t])return"array: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ki.UV)return e;var t=new Ki.UV;if(e.array){if(!Array.isArray(e.array))throw TypeError(".UV.array: array expected");t.array=[];for(var r=0;r<e.array.length;++r)t.array[r]=Number(e.array[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.array=[]),e.array&&e.array.length){r.array=[];for(var n=0;n<e.array.length;++n)r.array[n]=t.json&&!isFinite(e.array[n])?String(e.array[n]):e.array[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Normal=function(){function e(e){if(this.array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.array=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.array&&e.array.length){t.uint32(10).fork();for(var r=0;r<e.array.length;++r)t.float(e.array[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Normal;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.array&&n.array.length||(n.array=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.array.push(e.float());else n.array.push(e.float());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.array&&e.hasOwnProperty("array")){if(!Array.isArray(e.array))return"array: array expected";for(var t=0;t<e.array.length;++t)if("number"!=typeof e.array[t])return"array: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ki.Normal)return e;var t=new Ki.Normal;if(e.array){if(!Array.isArray(e.array))throw TypeError(".Normal.array: array expected");t.array=[];for(var r=0;r<e.array.length;++r)t.array[r]=Number(e.array[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.array=[]),e.array&&e.array.length){r.array=[];for(var n=0;n<e.array.length;++n)r.array[n]=t.json&&!isFinite(e.array[n])?String(e.array[n]):e.array[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Group=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.start=0,e.prototype.count=0,e.prototype.materialIndex=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Wi.create()),t.uint32(8).uint32(e.start),t.uint32(16).uint32(e.count),t.uint32(24).uint32(e.materialIndex),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Group;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.start=e.uint32();break;case 2:n.count=e.uint32();break;case 3:n.materialIndex=e.uint32();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("start"))throw qi.ProtocolError("missing required 'start'",{instance:n});if(!n.hasOwnProperty("count"))throw qi.ProtocolError("missing required 'count'",{instance:n});if(!n.hasOwnProperty("materialIndex"))throw qi.ProtocolError("missing required 'materialIndex'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=_typeof2(e)||null===e?"object expected":qi.isInteger(e.start)?qi.isInteger(e.count)?qi.isInteger(e.materialIndex)?null:"materialIndex: integer expected":"count: integer expected":"start: integer expected"},e.fromObject=function(e){if(e instanceof Ki.Group)return e;var t=new Ki.Group;return null!=e.start&&(t.start=e.start>>>0),null!=e.count&&(t.count=e.count>>>0),null!=e.materialIndex&&(t.materialIndex=e.materialIndex>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.start=0,r.count=0,r.materialIndex=0),null!=e.start&&e.hasOwnProperty("start")&&(r.start=e.start),null!=e.count&&e.hasOwnProperty("count")&&(r.count=e.count),null!=e.materialIndex&&e.hasOwnProperty("materialIndex")&&(r.materialIndex=e.materialIndex),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Material=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.kd=null,e.prototype.ks=null,e.prototype.ke=null,e.prototype.mapkd="",e.prototype.mapks="",e.prototype.mapke="",e.prototype.norm="",e.prototype.mapbump="",e.prototype.bump="",e.prototype.mapd="",e.prototype.ns=0,e.prototype.d=0,e.prototype.tr=0,e.prototype.mapkdrepeat="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Wi.create()),null!=e.kd&&Object.hasOwnProperty.call(e,"kd")&&Ki.Color.encode(e.kd,t.uint32(10).fork()).ldelim(),null!=e.ks&&Object.hasOwnProperty.call(e,"ks")&&Ki.Color.encode(e.ks,t.uint32(18).fork()).ldelim(),null!=e.ke&&Object.hasOwnProperty.call(e,"ke")&&Ki.Color.encode(e.ke,t.uint32(26).fork()).ldelim(),null!=e.mapkd&&Object.hasOwnProperty.call(e,"mapkd")&&t.uint32(34).string(e.mapkd),null!=e.mapks&&Object.hasOwnProperty.call(e,"mapks")&&t.uint32(42).string(e.mapks),null!=e.mapke&&Object.hasOwnProperty.call(e,"mapke")&&t.uint32(50).string(e.mapke),null!=e.norm&&Object.hasOwnProperty.call(e,"norm")&&t.uint32(58).string(e.norm),null!=e.mapbump&&Object.hasOwnProperty.call(e,"mapbump")&&t.uint32(66).string(e.mapbump),null!=e.bump&&Object.hasOwnProperty.call(e,"bump")&&t.uint32(74).string(e.bump),null!=e.mapd&&Object.hasOwnProperty.call(e,"mapd")&&t.uint32(82).string(e.mapd),null!=e.ns&&Object.hasOwnProperty.call(e,"ns")&&t.uint32(93).float(e.ns),null!=e.d&&Object.hasOwnProperty.call(e,"d")&&t.uint32(101).float(e.d),null!=e.tr&&Object.hasOwnProperty.call(e,"tr")&&t.uint32(109).float(e.tr),null!=e.mapkdrepeat&&Object.hasOwnProperty.call(e,"mapkdrepeat")&&t.uint32(114).string(e.mapkdrepeat),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Material;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.kd=Ki.Color.decode(e,e.uint32());break;case 2:n.ks=Ki.Color.decode(e,e.uint32());break;case 3:n.ke=Ki.Color.decode(e,e.uint32());break;case 4:n.mapkd=e.string();break;case 5:n.mapks=e.string();break;case 6:n.mapke=e.string();break;case 7:n.norm=e.string();break;case 8:n.mapbump=e.string();break;case 9:n.bump=e.string();break;case 10:n.mapd=e.string();break;case 11:n.ns=e.float();break;case 12:n.d=e.float();break;case 13:n.tr=e.float();break;case 14:n.mapkdrepeat=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.kd&&e.hasOwnProperty("kd")){var t=Ki.Color.verify(e.kd);if(t)return"kd."+t}if(null!=e.ks&&e.hasOwnProperty("ks")){var r=Ki.Color.verify(e.ks);if(r)return"ks."+r}if(null!=e.ke&&e.hasOwnProperty("ke")){var n=Ki.Color.verify(e.ke);if(n)return"ke."+n}return null!=e.mapkd&&e.hasOwnProperty("mapkd")&&!qi.isString(e.mapkd)?"mapkd: string expected":null!=e.mapks&&e.hasOwnProperty("mapks")&&!qi.isString(e.mapks)?"mapks: string expected":null!=e.mapke&&e.hasOwnProperty("mapke")&&!qi.isString(e.mapke)?"mapke: string expected":null!=e.norm&&e.hasOwnProperty("norm")&&!qi.isString(e.norm)?"norm: string expected":null!=e.mapbump&&e.hasOwnProperty("mapbump")&&!qi.isString(e.mapbump)?"mapbump: string expected":null!=e.bump&&e.hasOwnProperty("bump")&&!qi.isString(e.bump)?"bump: string expected":null!=e.mapd&&e.hasOwnProperty("mapd")&&!qi.isString(e.mapd)?"mapd: string expected":null!=e.ns&&e.hasOwnProperty("ns")&&"number"!=typeof e.ns?"ns: number expected":null!=e.d&&e.hasOwnProperty("d")&&"number"!=typeof e.d?"d: number expected":null!=e.tr&&e.hasOwnProperty("tr")&&"number"!=typeof e.tr?"tr: number expected":null!=e.mapkdrepeat&&e.hasOwnProperty("mapkdrepeat")&&!qi.isString(e.mapkdrepeat)?"mapkdrepeat: string expected":null},e.fromObject=function(e){if(e instanceof Ki.Material)return e;var t=new Ki.Material;if(null!=e.kd){if("object"!=_typeof2(e.kd))throw TypeError(".Material.kd: object expected");t.kd=Ki.Color.fromObject(e.kd)}if(null!=e.ks){if("object"!=_typeof2(e.ks))throw TypeError(".Material.ks: object expected");t.ks=Ki.Color.fromObject(e.ks)}if(null!=e.ke){if("object"!=_typeof2(e.ke))throw TypeError(".Material.ke: object expected");t.ke=Ki.Color.fromObject(e.ke)}return null!=e.mapkd&&(t.mapkd=String(e.mapkd)),null!=e.mapks&&(t.mapks=String(e.mapks)),null!=e.mapke&&(t.mapke=String(e.mapke)),null!=e.norm&&(t.norm=String(e.norm)),null!=e.mapbump&&(t.mapbump=String(e.mapbump)),null!=e.bump&&(t.bump=String(e.bump)),null!=e.mapd&&(t.mapd=String(e.mapd)),null!=e.ns&&(t.ns=Number(e.ns)),null!=e.d&&(t.d=Number(e.d)),null!=e.tr&&(t.tr=Number(e.tr)),null!=e.mapkdrepeat&&(t.mapkdrepeat=String(e.mapkdrepeat)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.kd=null,r.ks=null,r.ke=null,r.mapkd="",r.mapks="",r.mapke="",r.norm="",r.mapbump="",r.bump="",r.mapd="",r.ns=0,r.d=0,r.tr=0,r.mapkdrepeat=""),null!=e.kd&&e.hasOwnProperty("kd")&&(r.kd=Ki.Color.toObject(e.kd,t)),null!=e.ks&&e.hasOwnProperty("ks")&&(r.ks=Ki.Color.toObject(e.ks,t)),null!=e.ke&&e.hasOwnProperty("ke")&&(r.ke=Ki.Color.toObject(e.ke,t)),null!=e.mapkd&&e.hasOwnProperty("mapkd")&&(r.mapkd=e.mapkd),null!=e.mapks&&e.hasOwnProperty("mapks")&&(r.mapks=e.mapks),null!=e.mapke&&e.hasOwnProperty("mapke")&&(r.mapke=e.mapke),null!=e.norm&&e.hasOwnProperty("norm")&&(r.norm=e.norm),null!=e.mapbump&&e.hasOwnProperty("mapbump")&&(r.mapbump=e.mapbump),null!=e.bump&&e.hasOwnProperty("bump")&&(r.bump=e.bump),null!=e.mapd&&e.hasOwnProperty("mapd")&&(r.mapd=e.mapd),null!=e.ns&&e.hasOwnProperty("ns")&&(r.ns=t.json&&!isFinite(e.ns)?String(e.ns):e.ns),null!=e.d&&e.hasOwnProperty("d")&&(r.d=t.json&&!isFinite(e.d)?String(e.d):e.d),null!=e.tr&&e.hasOwnProperty("tr")&&(r.tr=t.json&&!isFinite(e.tr)?String(e.tr):e.tr),null!=e.mapkdrepeat&&e.hasOwnProperty("mapkdrepeat")&&(r.mapkdrepeat=e.mapkdrepeat),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}(),Ki.Color=function(){function e(e){if(this.rgb=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rgb=qi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wi.create()),null!=e.rgb&&e.rgb.length)for(var r=0;r<e.rgb.length;++r)t.uint32(13).float(e.rgb[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Gi||(e=Gi.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ki.Color;e.pos<r;){var i=e.uint32();if(i>>>3==1)if(n.rgb&&n.rgb.length||(n.rgb=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.rgb.push(e.float());else n.rgb.push(e.float());else e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof Gi||(e=new Gi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=_typeof2(e)||null===e)return"object expected";if(null!=e.rgb&&e.hasOwnProperty("rgb")){if(!Array.isArray(e.rgb))return"rgb: array expected";for(var t=0;t<e.rgb.length;++t)if("number"!=typeof e.rgb[t])return"rgb: number[] expected"}return null},e.fromObject=function(e){if(e instanceof Ki.Color)return e;var t=new Ki.Color;if(e.rgb){if(!Array.isArray(e.rgb))throw TypeError(".Color.rgb: array expected");t.rgb=[];for(var r=0;r<e.rgb.length;++r)t.rgb[r]=Number(e.rgb[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.rgb=[]),e.rgb&&e.rgb.length){r.rgb=[];for(var n=0;n<e.rgb.length;++n)r.rgb[n]=t.json&&!isFinite(e.rgb[n])?String(e.rgb[n]):e.rgb[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},e}();var rn={at3d:function(e,t){for(var r=Vi(t.textureOptions,e.textures.length),n={},i=0,o=e.textures;i<o.length;i++){var a=o[i];n[a]=Qi(a,r,t.allowHosts,t.networkSubscribe)}return Promise.resolve().then((function(){return Ut(e.file,{responseType:"arraybuffer",allowHosts:t.allowHosts,networkSubscribe:t.networkSubscribe})})).then((function(e){return ei(e.body)})).then((function(e){return Wt((function(){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];try{var o=Pi.decode(i);t.push.apply(t,o.chunks)}catch(e){console.error(e)}}return t}))})).then((function(i){return Wt((function(){return Fi(i,e.textureBase,e.textures.slice(),r,n,t.allowHosts,t.networkSubscribe)}))}))},pbm:function(e,t){for(var r=Vi(t.textureOptions,e.textures.length),n={},i=0,o=e.textures;i<o.length;i++){var a=o[i];n[a]=Qi(a,r,t.allowHosts,t.networkSubscribe)}return Promise.resolve().then((function(){return Ut(e.file,{responseType:"arraybuffer",allowHosts:t.allowHosts,networkSubscribe:t.networkSubscribe})})).then((function(e){return Wt((function(){var t=new Uint8Array(e.body),r=Pi.decode(t);return[].concat(r.chunks)}))})).then((function(i){return Wt((function(){return Fi(i,e.textureBase,e.textures.slice(),r,n,t.allowHosts,t.networkSubscribe)}))}))},dome:function(e,t){return Promise.resolve().then((function(){return Ut(e.file,{responseType:"arraybuffer",allowHosts:t.allowHosts,networkSubscribe:t.networkSubscribe})})).then((function(r){return tn(new Uint8Array(r.body),e.textureBase,t.textureOptions,t.allowHosts,t.networkSubscribe)}))},domez:function(e,t){return Promise.resolve().then((function(){return Ut(e.file,{responseType:"arraybuffer",allowHosts:t.allowHosts,networkSubscribe:t.networkSubscribe})})).then((function(e){return ei(e.body)})).then((function(e){var t=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(t),n=0;return e.forEach((function(e){r.set(e,n),n+=e.length})),r})).then((function(r){return tn(r,e.textureBase,t.textureOptions,t.allowHosts,t.networkSubscribe)}))}},on=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.empty=!0,r.name="model",r.loaded=!1,r.bvhs=Object.assign([],{loaded:!1}),r.bounding=new r$3.Box3,r.shownFloor=null,r.floorLength=0,r.networkSubscribe=t.networkSubscribe,r.allowHosts=t.allowHosts,r.renderOrder=-3,r}return t$3.__extends(t,e),Object.defineProperty(t.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),t.prototype.getEdges=function(e){var t;void 0===e&&(e=30/180*Math.PI);for(var r=Math.cos(e),n=[],i=0,o=this.children;i<o.length;i++){var a=o[i];if(a instanceof Je){for(var s={},c=["a","b","c"],u=Oi.mergeVertices(a.geometry),l=u.getAttribute("position").array,f=(null===(t=u.getIndex())||void 0===t?void 0:t.array)||[],h=[],p=[],d=0,m=l.length;d<m;d+=3)h.push(new r$3.Vector3(l[d],l[d+1],l[d+2]));for(d=0,m=f.length;d<m;d+=3){var g=f[d],v=f[d+1],y=f[d+2],b=(new r$3.Vector3).crossVectors(h[v].clone().sub(h[g]),h[y].clone().sub(h[g])).normalize();p.push({a:g,b:v,c:y,normal:b})}for(d=0,m=p.length;d<m;d++)for(var _=p[d],A=0;A<3;A++){var M=_[c[A]],x=_[c[(A+1)%3]],w=[Math.min(M,x),Math.max(M,x)];void 0===s[$=w[0]+"-"+w[1]]?s[$]={index1:w[0],index2:w[1],face1:d}:s[$].face2=d}for(var $ in s){var E=s[$];if(void 0===E.face2||p[E.face1].normal.dot(p[E.face2].normal)<=r){var T=h[E.index1],S=h[E.index2];n.push(new r$3.Line3(T,S))}}u.dispose(),h.length=0,p.length=0}}return n},t.prototype.hasFloors=function(){return this.hasFloors_()},t.prototype.hasFloors_=function(){var e=[];return this.traverse((function(t){t instanceof Je&&(e[t.floorIndex]=!0)})),e.length},t.prototype.show=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.shownFloor,i=null,o=1,a=null!==(e=t[1])&&void 0!==e?e:.1,s=0!==t.length;this.shownFloor=i=s?t[0]:null,this.traverse((function(e){e instanceof Je&&e.material.forEach((function(t){null===i||i===e.floorIndex?t.opacity=t.originOpacity*o:t.opacity=t.originOpacity*a}))})),n!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},t.prototype.intersectRaycaster=function(e,t){var r=e.ray,n=r.origin,i=r.direction;if(Re(t))if(Re(this.shownFloor)){var o=this.floorLength;t=[];for(var a=-1;a<o;a++)t.push(a)}else t=[this.shownFloor];var s=[],c=[];Array.isArray(t)?c.push.apply(c,t):c.push(t);for(var u=function(t){var r=l.bvhs&&l.bvhs[t];if(r){var o=new Mt(n.x,n.y,n.z),a=new Mt(i.x,i.y,i.z);(c=r.intersectRay(o,a,!0).map((function(e){var t=e.intersectionPoint,r=e.triangle,i=new r$3.Vector3(t.x,t.y,t.z);return{point:i,face:{normal:nn(r).getNormal(new r$3.Vector3)},distance:n.distanceTo(i)}}))).length&&s.push.apply(s,c)}else{var c,u=[];l.traverse((function(e){e instanceof Je&&e.floorIndex===t&&u.push(e)})),(c=e.intersectObjects(u).map((function(e){var t=e.face?{normal:e.face.normal}:void 0;return{point:e.point,face:t,distance:e.distance}}))).length&&s.push.apply(s,c)}},l=this,f=0,h=c;f<h.length;f++)u(h[f]);return s.filter((function(t){var r=t.distance;return r<=e.far&&r>=e.near})).sort((function(e,t){return e.distance-t.distance}))},t.prototype.buildBVH=function(){var e=[];this.traverse((function(t){t instanceof Je&&(e[t.floorIndex]=e[t.floorIndex]||[],e[t.floorIndex].push(t.geometry))})),this.bvhs.length=0;for(var t=0,r=e;t<r.length;t++){for(var n=r[t],i=0,o=0,a=n;o<a.length;o++)i+=(f=a[o]).index?f.index.array.length:f.attributes.position.array.length;for(var s=new Float32Array(3*i),c=0,u=0,l=n;u<l.length;u++){for(var f,h=(f=l[u]).index?f.index.array:null,p=f.attributes.position.array,d=h?h.length:p.length/3,m=0;m<d;m++){var g=3*(c+m),v=h?3*h[m]:3*m;s[g+0]=p[v+0],s[g+1]=p[v+1],s[g+2]=p[v+2]}c+=d}var y=new vt(s,50);this.bvhs.push(y)}this.bvhs.loaded=!0,this.emit("bvhLoaded")},t.prototype.load=function(e,t){var r=this;if(void 0===t&&(t={}),!0===this.loaded)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var n=function(e,t){void 0===t&&(t=[]);var r=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(e);if(!r)return"";for(var n=0,i=String(r[1]).trim().split(".").slice(1).reverse();n<i.length;n++){var o=i[n],a=t.indexOf(o);if(a>=0)return t[a]}return""}(e.file,Object.keys(rn)),i=rn[n];if(!i)throw new Error("[MODEL LOAD ERROR]: file type(".concat(n,") does not support."));return this.name=e.file,i(e,{textureOptions:t,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then((function(t){for(var n=[],i=0,o=t;i<o.length;i++)(u=o[i]).traverse((function(e){e instanceof Je&&(e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere(),n.push(e.geometry.boundingBox))})),r.add(u);r.floorLength=r.hasFloors_(),r.bounding=function(e){for(var t=new r$3.Box3,r=0,n=e;r<n.length;r++){var i=n[r];t.union(i)}return t}(n);for(var a=r.bounding.getCenter(new r$3.Vector3),s=0,c=t;s<c.length;s++){var u;(u=c[s]).traverse((function(e){e instanceof Je&&e.material.forEach((function(e){e.uniforms.modelCenter.value=a}))}))}n.length=0,r.loaded=!0,r.empty=!1,r.name=e.file,Xe.shared.add((function(){r.emit("geometryLoaded"),r.emit("materialLoaded"),r.emit("loaded")}),!0,1)})).catch((function(e){return r.name="",r.emit("error",e),Promise.reject(e)}))},t.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},t}($e);Object.assign(on.prototype,{on:Tt.prototype.on,once:Tt.prototype.once,off:Tt.prototype.off,emit:Tt.prototype.emit,hasListener:Tt.prototype.hasListener});var sn=2*Math.PI;function an(e){return(e%sn+sn)%sn}var un=Math.PI,cn=2*un;function ln(e,t,r){if(e===t)return t;var n=t-e;return Math.abs(n)<=r?t:e+(n>0?1:-1)*r}var hn=function(){function e(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={work:null,option:{}}}return e.prototype.toJSON=function(){return this.raw.work},e}();function dn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];e=e.map((function(e){return e.trim()})).filter((function(e){return e.length>0&&!/^\/+$/.test(e)}));for(var n=0;n<e.length;n++){var i=0===n,o=n===e.length-1,a=e[n];i||(a=a.replace(/^\/+/,"")),o||(a=a.replace(/\/+$/,"")),r.push(a)}return r.join("/")}function pn(e){return e instanceof Error}function An(e,t){if(e===t)return!0;if(e&&t&&"object"==_typeof2(e)&&"object"==_typeof2(t)){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!An(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){var o=i[n];if(!An(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}function fn(e){return"number"==typeof e}function Mn(e){return 0==(e&e-1)&&0!==e}function gn(e,t){void 0===t&&(t=!1);var r=_typeof2(e);if("string"===r)return JSON.stringify(e);if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(e instanceof Array){for(var n="[",i=e.length-1,o=0;o<i;o++)n+=gn(e[o],!1)+",";return i>-1&&(n+=gn(e[o],!1)),n+"]"}if(e instanceof Object){if("function"==typeof e.toJSON)return gn(e.toJSON(),t);var a=Object.keys(e).sort(),s=a.length;for(n="",o=0;o<s;){var c=a[o],u=gn(e[c],!0);void 0!==u&&(o&&""!==n&&(n+=","),n+=JSON.stringify(c)+":"+u),o++}return"{"+n+"}"}switch(r){case"function":case"undefined":return t?void 0:null;case"number":return 0;default:return isFinite(e)?e:null}}function yn(e){return String(gn(e,!1))}function mn(e){var t,r,n,i=JSON.parse(e),o="undefined"!=typeof location?location.hostname:"",a=Date.now();if("object"!=_typeof2(i))return new Error("input is not an object");if(0===o.length||jt(o)||bt.filter((function(e){return zt(e,o)})).length>0){var s=String(null!==(t=i.certificate)&&void 0!==t?t:"");if(s){var c=new ze;return c.readCertPEM(s),{issuer:c.getSubjectString()}}return{issuer:"none"}}var u=String(null!==(r=i.certificate)&&void 0!==r?r:"");if(!u)return new Error("certificate is not existed.");var l=new ze;l.readCertPEM(u);var f=String(null!==(n=i._signature)&&void 0!==n?n:"");if(!f)return new Error("signature is not existed.");if(!1===function(e,t,r){var n=new ze;if("string"==typeof r?n.readCertPEM(r):n.readCertHex(r.hex),!1===Le(n))return!1;var i=new K$1;return i.readCertPubKeyHex(n.hex,6),!!i.verify(e,C$2(t))}(yn(function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];-1===t.indexOf(o)&&(r[o]=e[o])}return r}(i,["_signature"])),f,l))return new Error("signature verify failed.");var h=new Date("string"==typeof i.expire_at&&/^\d+$/.test(i.expire_at)?Number(i.expire_at):i.expire_at);return a<h.getTime()?0===(Array.isArray(i.allow_hosts)?i.allow_hosts:[]).filter((function(e){return zt(e,o)})).length?function(e){return new Error("host(".concat(JSON.stringify(e),") is not allowed."))}(o):{issuer:l.getSubjectString()}:function(e){return new Error("date(".concat(e.toString(),") expired."))}(h)}var vn=new WeakMap;function Nn(e,t,r){var n,i=JSON.stringify(t),o=JSON.stringify(e),a=mn(o);e=JSON.parse(o),t=JSON.parse(i);var s=new hn;s.issuer=a instanceof Error?"none":a.issuer,s.raw={work:e,options:t};var c=null!==(n=e.base_url)&&void 0!==n?n:"";c&&"/"!==c[c.length-1]&&(c+="/");var u=function(e,t){return 0===e.indexOf(t)},l=function(e,n){var i,o=e;if(!0===t.jsonp){o=e.replace(/([\?\#].*)?$/i,"");var a=Ie("".concat(o)).slice(0,7);o="".concat(o,".").concat(a,".jsonp")}if(!0===t.shortPath){var s=o.replace(c,"").split("."),u=null!==(i=s.shift())&&void 0!==i?i:"",l=s.join(".");o=dn(c,Ie(u))+(l?"."+l:"")}var f=o.replace(c,"");return t.baseURL&&(o=dn(t.baseURL,f)),r&&r(e,o,f,n),o},f=function(t,r){var n,i,o,a,s,f,h=t;if(!Hi(t)){var p=null!==(f=null!==(a=null!==(i=null===(n=e.panorama)||void 0===n?void 0:n.pano_high_cube_base_url)&&void 0!==i?i:null===(o=e.panorama)||void 0===o?void 0:o.pano_cube_base_url)&&void 0!==a?a:null===(s=e.panorama)||void 0===s?void 0:s.base_url)&&void 0!==f?f:"";p&&(p=dn(p,String(r))),h=dn(p,h)}return Hi(h)||(h=dn(c,h)),u(h,c)||console.warn("".concat(h," is not start with base_url(").concat(c,").")),l(h,"panorama")},h=function(e){var t=e;return Hi(t)||(t=dn(c,e)),u(t,c)||console.warn("".concat(t," is not start with base_url(").concat(c,").")),l(t,"model")},p=function(e,t){void 0===t&&(t="");var r=e;return Hi(r)||(r=dn(t,r)),Hi(r)||(r=dn(c,r)),u(r,c)||console.warn("".concat(r," is not start with base_url(").concat(c,").")),l(r,"texture")};if(s.workCode=String(e.work_code||e.code||e.vr_code||e.workCode),s.name=String(e.name),s.expire=new Date("string"==typeof e.expire_at&&/^\d+$/.test(e.expire_at)?Number(e.expire_at):e.expire_at),s.allowHosts=e.allow_hosts||[],pn(a))return a;if(e.initial&&("Floorplan"!==e.initial.mode&&"Topview"!==e.initial.mode&&"Panorama"!==e.initial.mode&&"VRPanorama"!==e.initial.mode&&"Model"!==e.initial.mode&&"DepthPanorama"!==e.initial.mode||(s.initial.mode=e.initial.mode),fn(e.initial.latitude)&&(s.initial.latitude=e.initial.latitude),fn(e.initial.longitude)?s.initial.longitude=e.initial.longitude:fn(e.initial.heading)&&(s.initial.longitude=-(360*(e.initial.heading-.25)+90)/180*Math.PI),fn(e.initial.fov)&&(s.initial.fov=e.initial.fov),fn(e.initial.panoIndex)?s.initial.panoIndex=e.initial.panoIndex:fn(e.initial.pano_index)?s.initial.panoIndex=e.initial.pano_index:fn(e.initial.pano)&&(s.initial.panoIndex=e.initial.pano)),pn(a))return a;if(e.model){var d={bvh:!0,async:!1,textureBase:"",textures:[]};"boolean"==typeof t.modelBvh?d.bvh=t.modelBvh:"boolean"==typeof e.model.bvh?d.bvh=e.model.bvh:"boolean"==typeof e.bvh&&(d.bvh=e.bvh),e.model.file?d.file=h(e.model.file):e.model.file_url&&(d.file=h(e.model.file_url)),e.model.textureBase?d.textureBase=e.model.textureBase:e.model.material_base_url&&(d.textureBase=e.model.material_base_url),Array.isArray(e.model.textures)?d.textures=e.model.textures.map((function(e){return p(e,d.textureBase)})):Array.isArray(e.model.material_textures)&&(d.textures=e.model.material_textures.map((function(e){return p(e,d.textureBase)}))),d.file&&(s.model=d)}if(pn(a))return a;if(e.observers&&Array.isArray(e.observers)){var m=[];e.panorama&&(Array.isArray(e.panorama)?m=e.panorama:Array.isArray(e.panorama.list)?m=e.panorama.list:Array.isArray(e.panorama.info)&&(m=e.panorama.info));for(var g=0;g<e.observers.length;g++){var v={},y=e.observers[g];if(!y)break;var b=m[g]||{};y=Object.assign({},y,b,{active:!1!==y.active&&!1!==b.active}),v.panoIndex=g,v.active=!1!==y.active,v.loadable=!0===y.loadable,v.images={up:f(y.images?y.images.up:y.up,g),down:f(y.images?y.images.down:y.down,g),right:f(y.images?y.images.right:y.right,g),left:f(y.images?y.images.left:y.left,g),front:f(y.images?y.images.front:y.front,g),back:f(y.images?y.images.back:y.back,g)};var _=y.images?y.images.depth:y.depth;_&&(v.images.depth=f(_,g));var A=y.images?y.images.luminance:y.luminance;A&&(v.images.luminance={up:f(A.up,g),down:f(A.down,g),right:f(A.right,g),left:f(A.left,g),front:f(A.front,g),back:f(A.back,g)});var M=y.images?y.images.tiles:y.tiles;if(M){for(var x=[],w=function(e){var t=e.match(/\/cube_(\d+)\//);if(t){var r=Number(t[1]);if(Mn(r))return r}return!1},$=function(e,t){return e.replace(/\/cube_(\d+)\//,(function(){return"/cube_".concat(t,"/")}))},E=0,T=M;E<T.length;E++){var S=T[E];if("number"==typeof S){var O=S,N=w(v.images.front);if(!1===N)continue;if((R=Math.max(N,512*Math.pow(2,O)))>2048){var D=$(v.images.up,R),I=$(v.images.down,R),P=$(v.images.right,R),j=$(v.images.left,R),C=$(v.images.front,R),L=$(v.images.back,R);x.push({level:O,size:R,up:D,down:I,right:P,left:j,front:C,back:L})}else D=v.images.up,I=v.images.down,P=v.images.right,j=v.images.left,C=v.images.front,L=v.images.back,x.push({level:O,size:R,up:D,down:I,right:P,left:j,front:C,back:L})}else{var R;if("number"!=typeof(O=S.level))continue;if("number"!=typeof(R=S.size))continue;D=f(S.up,g),I=f(S.down,g),P=f(S.right,g),j=f(S.left,g),C=f(S.front,g),L=f(S.back,g),x.push({level:O,size:R,up:D,down:I,right:P,left:j,front:C,back:L})}}x.sort((function(e,t){return e.level-t.level})),v.images.tiles=x}if(y.position instanceof r$3.Vector3)v.position=y.position.clone();else{if(!Array.isArray(y.position))break;v.position=(new r$3.Vector3).fromArray(y.position)}if(y.standingPosition instanceof r$3.Vector3)v.standingPosition=y.standingPosition.clone();else if(Array.isArray(y.standingPosition))v.standingPosition=(new r$3.Vector3).fromArray(y.standingPosition);else if(y.standing_position instanceof r$3.Vector3)v.standingPosition=y.standing_position.clone();else{if(!Array.isArray(y.standing_position))break;v.standingPosition=(new r$3.Vector3).fromArray(y.standing_position)}if(y.quaternion instanceof r$3.Quaternion)v.quaternion=y.quaternion.clone();else if(Array.isArray(y.quaternion))v.quaternion=(new r$3.Quaternion).fromArray(y.quaternion);else{if(!y.quaternion)break;var z=y.quaternion,k=z.x,B=z.y,U=z.z,F=z.w;v.quaternion=new r$3.Quaternion(k,B,U,F)}if(Array.isArray(y.accessibleNodes)?v.accessibleNodes=y.accessibleNodes.slice():Array.isArray(y.accessible_nodes)&&(v.accessibleNodes=y.accessible_nodes.slice()),Array.isArray(y.visibleNodes)?v.visibleNodes=y.visibleNodes.slice():Array.isArray(y.visible_nodes)&&(v.visibleNodes=y.visible_nodes.slice()),fn(y.floorIndex)?v.floorIndex=y.floorIndex:fn(y.floor_index)?v.floorIndex=y.floor_index:v.floorIndex=0,y.video){var G={};"string"==typeof y.video.source&&(G.source=y.video.source),y.video.matrix instanceof r$3.Matrix4?G.matrix=y.video.matrix.clone():Array.isArray(y.video.matrix)&&(G.matrix=(new r$3.Matrix4).fromArray(y.video.matrix)),y.video.size instanceof r$3.Vector2?G.size=y.video.size.clone():Array.isArray(y.video.size)&&(G.size=(new r$3.Vector2).fromArray(y.video.size)),G.source&&G.matrix&&G.size&&(v.video=G)}s.observers[g]=v}}if(pn(a))return a;for(var V=0,H=s.observers;V<H.length;V++){if(!(v=H[V]).accessibleNodes){v.accessibleNodes=[];for(var W=0;W<s.observers.length;W++)s.observers[W]!==v&&v.accessibleNodes.push(W)}if(!v.visibleNodes)for(v.visibleNodes=[],W=0;W<s.observers.length;W++)s.observers[W]!==v&&v.visibleNodes.push(W)}if(pn(a))return a;var Q=xt(s);return vn.set(Q,{work:o,options:i}),Q}function Dn(e,t,r){"string"==typeof e&&"{"===e.trim()[0]&&(e=JSON.parse(e));var n=vn.get(e);if(n){if(t&&!An(JSON.parse(n.options),t))throw new Error("[PARSE FAILED]: work is parsed with different options.");return e}var i=Nn(e,null!=t?t:{},r);if(pn(i))throw new Error("[PARSE FAILED]: "+i.message);return i}function wn(e,t){e.mode=t.mode,e.panoIndex=t.panoIndex,e.longitude=t.longitude,e.latitude=t.latitude,e.fov=t.fov,e.offset.copy(t.offset)}function Tn(e,t){return e.panoIndex===t.panoIndex&&e.mode===t.mode&&Ve(e.longitude,t.longitude,2*Math.PI)&&Ve(e.latitude,t.latitude)&&Ve(e.fov,t.fov)&&Ge(e.offset,t.offset)}var xn=function(e){return Number(e)};function En(e,t,r){var n;void 0===t&&(t=xn),void 0===r&&(r=!1);for(var i,o=1/0,a=0,s=e;a<s.length;a++){var c=s[a],u=t(c);u<=o&&(i=(n=[c,u])[0],o=n[1])}return r?[i,o]:i}function jn(e,t,r){return Math.max(t,Math.min(r,e))}function zn(e){for(var t in e)return!1;return!0}function In(e){return{longitude:e.longitude,latitude:e.latitude,fov:e.fov,offset:e.offset.clone()}}
/*! Hammer.JS - v2.0.7 - 2016-04-22
			 * http://hammerjs.github.io/
			 *
			 * Copyright (c) 2016 Jorik Tangelder;
			 * Licensed under the MIT license */var bn=function(e,t,r,n){var i,o=["","webkit","Moz","MS","ms","o"],a=t.createElement?t.createElement("div"):n,s=Math.round,c=Math.abs,u=Date.now;function l(e,t,r){return setTimeout(v(e,r),t)}function f(e,t,r){return!!Array.isArray(e)&&(h(e,r[t],r),!0)}function h(e,t,r){var i;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==n)for(i=0;i<e.length;)t.call(r,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(r,e[i],i,e)}function p(t,r,n){var i="DEPRECATED METHOD: "+r+"\n"+n+" AT \n";return function(){var r=new Error("get-stack-trace"),n=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,n),t.apply(this,arguments)}}i="function"!=typeof Object.assign?function(e){if(e===n||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i!==n&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign;var d=p((function(e,t,r){for(var i=Object.keys(t),o=0;o<i.length;)(!r||r&&e[i[o]]===n)&&(e[i[o]]=t[i[o]]),o++;return e}),"extend","Use `assign`."),m=p((function(e,t){return d(e,t,!0)}),"merge","Use `assign`.");function g(e,t,r){var n,o=t.prototype;(n=e.prototype=Object.create(o)).constructor=e,n._super=o,r&&i(n,r)}function v(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return"function"==typeof e?e.apply(t&&t[0]||n,t):e}function b(e,t){return e===n?t:e}function _(e,t,r){h(w(t),(function(t){e.addEventListener(t,r,!1)}))}function A(e,t,r){h(w(t),(function(t){e.removeEventListener(t,r,!1)}))}function M(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function $(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function E(e){return Array.prototype.slice.call(e,0)}function T(e,t,r){for(var n=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];$(i,a)<0&&n.push(e[o]),i[o]=a,o++}return r&&(n=t?n.sort((function(e,r){return e[t]>r[t]})):n.sort()),n}function S(e,t){for(var r,i,a=t[0].toUpperCase()+t.slice(1),s=0;s<o.length;){if((i=(r=o[s])?r+a:t)in e)return i;s++}return n}var O=1;function N(t){var r=t.ownerDocument||t;return r.defaultView||r.parentWindow||e}var D="ontouchstart"in e,I=S(e,"PointerEvent")!==n,P=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",C="mouse",L=["x","y"],R=["clientX","clientY"];function z(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&r.handler(t)},this.init()}function k(e,t,r){var i=r.pointers.length,o=r.changedPointers.length,a=1&t&&i-o==0,s=12&t&&i-o==0;r.isFirst=!!a,r.isFinal=!!s,a&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,i=t.pointers,o=i.length;r.firstInput||(r.firstInput=B(t)),o>1&&!r.firstMultiple?r.firstMultiple=B(t):1===o&&(r.firstMultiple=!1);var a=r.firstInput,s=r.firstMultiple,l=s?s.center:a.center,f=t.center=U(i);t.timeStamp=u(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=H(l,f),t.distance=V(l,f),function(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y}),t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}(r,t),t.offsetDirection=G(t.deltaX,t.deltaY);var h=F(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x,t.overallVelocityY=h.y,t.overallVelocity=c(h.x)>c(h.y)?h.x:h.y,t.scale=s?function(e,t){return V(t[0],t[1],R)/V(e[0],e[1],R)}(s.pointers,i):1,t.rotation=s?function(e,t){return H(t[1],t[0],R)+H(e[1],e[0],R)}(s.pointers,i):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,i,o,a,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(u>25||s.velocity===n)){var l=t.deltaX-s.deltaX,f=t.deltaY-s.deltaY,h=F(u,l,f);i=h.x,o=h.y,r=c(h.x)>c(h.y)?h.x:h.y,a=G(l,f),e.lastInterval=t}else r=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=r,t.velocityX=i,t.velocityY=o,t.direction=a}(r,t);var p=e.element;M(t.srcEvent.target,p)&&(p=t.srcEvent.target),t.target=p}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function B(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:s(e.pointers[r].clientX),clientY:s(e.pointers[r].clientY)},r++;return{timeStamp:u(),pointers:t,center:U(t),deltaX:e.deltaX,deltaY:e.deltaY}}function U(e){var t=e.length;if(1===t)return{x:s(e[0].clientX),y:s(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:s(r/t),y:s(n/t)}}function F(e,t,r){return{x:t/e||0,y:r/e||0}}function G(e,t){return e===t?1:c(e)>=c(t)?e<0?2:4:t<0?8:16}function V(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function H(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(N(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4},Q="mousedown",Y="mousemove mouseup";function q(){this.evEl=Q,this.evWin=Y,this.pressed=!1,z.apply(this,arguments)}g(q,z,{handler:function(e){var t=W[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:C,srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},X={2:j,3:"pen",4:C,5:"kinect"},Z="pointerdown",J="pointermove pointerup pointercancel";function ee(){this.evEl=Z,this.evWin=J,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(Z="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),g(ee,z,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=K[n],o=X[e.pointerType]||e.pointerType,a=o==j,s=$(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),r&&t.splice(s,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8},re="touchstart",ne="touchstart touchmove touchend touchcancel";function ie(){this.evTarget=re,this.evWin=ne,this.started=!1,z.apply(this,arguments)}function oe(e,t){var r=E(e.touches),n=E(e.changedTouches);return 12&t&&(r=T(r.concat(n),"identifier",!0)),[r,n]}g(ie,z,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var r=oe.call(this,e,t);12&t&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:j,srcEvent:e})}}});var ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8},se="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=se,this.targetIds={},z.apply(this,arguments)}function ue(e,t){var r=E(e.touches),n=this.targetIds;if(3&t&&1===r.length)return n[r[0].identifier]=!0,[r,r];var i,o,a=E(e.changedTouches),s=[],c=this.target;if(o=r.filter((function(e){return M(e.target,c)})),1===t)for(i=0;i<o.length;)n[o[i].identifier]=!0,i++;for(i=0;i<a.length;)n[a[i].identifier]&&s.push(a[i]),12&t&&delete n[a[i].identifier],i++;return s.length?[T(o.concat(s),"identifier",!0),s]:void 0}function le(){z.apply(this,arguments);var e=v(this.handler,this);this.touch=new ce(this.manager,e),this.mouse=new q(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function fe(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)}),2500)}}function pe(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],o=Math.abs(t-i.x),a=Math.abs(r-i.y);if(o<=25&&a<=25)return!0}return!1}g(ce,z,{handler:function(e){var t=ae[e.type],r=ue.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:j,srcEvent:e})}}),g(le,z,{handler:function(e,t,r){var n=r.pointerType==j,i=r.pointerType==C;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)fe.call(this,t,r);else if(i&&pe.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var de=a?S(a.style,"touchAction"):n,me=de!==n,ge="compute",ve="auto",ye="manipulation",be="none",_e="pan-x",Ae="pan-y",Me=function(){if(!me)return!1;var t={},r=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!r||e.CSS.supports("touch-action",n)})),t}();function xe(e,t){this.manager=e,this.set(t)}xe.prototype={set:function(e){e==ge&&(e=this.compute()),me&&this.manager.element.style&&Me[e]&&(this.manager.element.style[de]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,(function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(x(e,be))return be;var t=x(e,_e),r=x(e,Ae);return t&&r?be:t||r?t?_e:Ae:x(e,ye)?ye:ve}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=x(n,be)&&!Me.none,o=x(n,Ae)&&!Me["pan-y"],a=x(n,_e)&&!Me["pan-x"];if(i){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}if(!a||!o)return i||o&&6&r||a&&24&r?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var we=32;function $e(e){this.options=i({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=b(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ee(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Te(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Se(e,t){var r=t.manager;return r?r.get(e):e}function Oe(){$e.apply(this,arguments)}function Ne(){Oe.apply(this,arguments),this.pX=null,this.pY=null}function De(){Oe.apply(this,arguments)}function Ie(){$e.apply(this,arguments),this._timer=null,this._input=null}function Pe(){Oe.apply(this,arguments)}function je(){Oe.apply(this,arguments)}function Ce(){$e.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Le(e,t){return(t=t||{}).recognizers=b(t.recognizers,Le.defaults.preset),new Re(e,t)}function Re(e,t){this.options=i({},Le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(I?ee:P?ce:D?le:q))(this,k),this.touchAction=new xe(this,this.options.touchAction),ze(this,!0),h(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function ze(e,t){var r,n=e.element;n.style&&(h(e.options.cssProps,(function(i,o){r=S(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""})),t||(e.oldCssProps={}))}return $e.prototype={defaults:{},set:function(e){return i(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(f(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Se(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return f(e,"dropRecognizeWith",this)||(e=Se(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(f(e,"requireFailure",this))return this;var t=this.requireFail;return-1===$(t,e=Se(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(f(e,"dropRequireFailure",this))return this;e=Se(e,this);var t=$(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<8&&n(t.options.event+Ee(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=8&&n(t.options.event+Ee(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=we},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=i({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=we);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},g(Oe,$e,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,i=this.attrTest(e);return n&&(8&r||!i)?16|t:n||i?4&r?8|t:2&t?4|t:2:we}}),g(Ne,Oe,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Ae),24&e&&t.push(_e),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,r=o!=this.pX,n=Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,r=a!=this.pY,n=Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},attrTest:function(e){return Oe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),g(De,Oe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),g(Ie,$e,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ve]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!r||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=l((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return we},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),g(Pe,Oe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),g(je,Oe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ne.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return 30&r?t=e.overallVelocity:6&r?t=e.overallVelocityX:24&r&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&c(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),g(Ce,$e,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ye]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&i&&r){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||V(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=l((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return we},failTimeout:function(){return this._timer=l((function(){this.state=we}),this.options.interval,this),we},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Le.VERSION="2.0.7",Le.defaults={domEvents:!1,touchAction:ge,enable:!0,inputTarget:null,inputClass:null,preset:[[Pe,{enable:!1}],[De,{enable:!1},["rotate"]],[je,{direction:6}],[Ne,{direction:6},["swipe"]],[Ce],[Ce,{event:"doubletap",taps:2},["tap"]],[Ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Re.prototype={set:function(e){return i(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<n.length;)r=n[o],2===t.stopped||i&&r!=i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e),!i&&14&r.state&&(i=t.curRecognizer=r),o++}},get:function(e){if(e instanceof $e)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(f(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(f(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=$(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==n&&t!==n){var r=this.handlers;return h(w(e),(function(e){r[e]=r[e]||[],r[e].push(t)})),this}},off:function(e,t){if(e!==n){var r=this.handlers;return h(w(e),(function(e){t?r[e]&&r[e].splice($(r[e],t),1):delete r[e]})),this}},emit:function(e,r){this.options.domEvents&&function(e,r){var n=t.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=r,r.target.dispatchEvent(n)}(e,r);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){r.type=e,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](r),i++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},i(Le,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:we,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Re,Input:z,TouchAction:xe,TouchInput:ce,MouseInput:q,PointerEventInput:ee,TouchMouseInput:le,SingleTouchInput:ie,Recognizer:$e,AttrRecognizer:Oe,Tap:Ce,Pan:Ne,Swipe:je,Pinch:De,Rotate:Pe,Press:Ie,on:_,off:A,each:h,merge:m,extend:d,assign:i,inherit:g,bindFn:v,prefixed:S}),Le}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{});function On(e,t){var r=document.mozFullScreen?"DOMMouseScroll":"mousewheel",n=!!window.addEventListener,i=!!window.attachEvent,o=function(e,t){var r=document.mozFullScreen?"DOMMouseScroll":"mousewheel",n=!!window.addEventListener,i=!!window.attachEvent;return t.__mouseWheelWrapper=function(o){if(o=o||window.event,n&&o.preventDefault(),i&&(o.returnValue=!1),"DOMMouseScroll"==r||"mousewheel"==r){var a=o.wheelDelta;o.delta=a?a/120:-(o.delta||0)/3}t.call(e,o)}}(e,t);n?e.addEventListener(r,o,!1):i&&e.attachEvent("on"+r,o)}function Sn(e,t,r){var n=t.offsetWidth,i=t.offsetHeight,o=t.getBoundingClientRect(),a=o.top,s=o.left;return r&&(s+=n*r.left,a+=i*(1-r.bottom-r.height),n*=r.width,i*=r.height),new r$3.Vector2((e.x-s)/n*2-1,-(e.y-a)/i*2+1)}!function(){try{var e=document.createElement("canvas");!window.WebGLRenderingContext||!e.getContext("webgl")&&e.getContext("experimental-webgl")}catch(e){return!1}}();var Ln=new r$3.OrthographicCamera(-1,1,1,-1,0,1),kn=new r$3.BufferGeometry;kn.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),kn.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var Cn=new r$3.Mesh(kn),Pn=new r$3.Scene;Pn.add(Cn);var _n=function(){function e(e,t){var r;this.renderer=e,this.material=new r$3.ShaderMaterial({vertexShader:null!==(r=t.vertex)&&void 0!==r?r:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:t.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},t.uniforms),defines:Object.assign({},t.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return e.prototype.render=function(e,t){var r=this.renderer.getRenderTarget(),n=Cn.material;this.material.uniforms.inputBuffer.value=e.texture,Cn.material=this.material,this.renderer.setRenderTarget(t||null),this.renderer.render(Pn,Ln),this.renderer.setRenderTarget(r),Cn.material=n},e.prototype.dispose=function(){this.material.dispose()},e}(),Bn=function(){function e(e){this.renderer=e,this.material=new r$3.ShaderMaterial({vertexShader:"\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nuniform vec3 inputValue;\nvoid main() {\n  gl_FragColor = vec4(inputValue, 1.0);\n}\n",uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return e.prototype.render=function(e,t){var r=this.renderer.getRenderTarget(),n=Cn.material;this.material.uniforms.inputValue.value.copy(e),Cn.material=this.material,this.renderer.setRenderTarget(t||null),this.renderer.render(Pn,Ln),this.renderer.setRenderTarget(r),Cn.material=n},e.prototype.dispose=function(){this.material.dispose()},e}(),Un=function(e){function t(t){return e.call(this,t,{fragment:"\nuniform sampler2D inputBuffer;\nvarying vec2 vUv;\nvoid main() {\n  gl_FragColor = texture2D(inputBuffer, vUv);\n}\n"})||this}return t$3.__extends(t,e),t}(_n),Rn=function(){function e(e){this.enable=!0,this.renderer=e,this.copyPass=new Un(this.renderer)}return e.prototype.render=function(e,t){this.copyPass.render(e)},e.prototype.dispose=function(){this.copyPass.dispose()},e}();function Qn(e,t,r){return e+(t-e)*r}function Yn(e,t){var r=t[1]-t[0];return e<t[0]?Yn(e+r,t):e>=t[1]?Yn(e-r,t):e}function Fn(e,t,r,n){return n?function(e,t,r,n){var i=n[1]-n[0];return e=Yn(e,n),Qn((t=Yn(t,n))-e>i/2?e+i:e-t>i/2?e-i:e,t,r)}(e,t,r,n):Qn(e,t,r)}var Vn=function(){function e(e){for(var t in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ke(),this.startVelocity=0,this.duration=0,this.keyframes=[],e){var r=e[t];"number"==typeof r?(this.value[t]=r,this.config[t]={circle:!1}):(this.value[t]=r.value,this.config[t]={circle:r.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return e.prototype.getProgress=function(e){var t=e-this.startTime;return t<0?0:t>=this.duration?1:1-function(e,t,r,n){var i=(t*r+2)/Math.pow(r,3),o=-(2*t*r+3)/Math.pow(r,2),a=t;return i*Math.pow(n,3)+o*Math.pow(n,2)+a*n+1}(0,this.startVelocity,this.duration,t)},e.prototype.getValue=function(e){for(var t=1;t<this.keyframes.length;t++)if(this.keyframes[t].progress>e){var r=this.keyframes[t-1],n=this.keyframes[t],i={};for(var o in this.config){var a=(e-r.progress)/(n.progress-r.progress);i[o]=Fn(r.value[o],n.value[o],a,this.config[o].circle)}return i}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},e.prototype.getProgressVelocity=function(e){var t=e-this.startTime;return t>=this.duration?0:function(e,t,r,n){var i=(t*r+2)/Math.pow(r,3),o=-(2*t*r+3)/Math.pow(r,2),a=t;return 3*i*Math.pow(n,2)+2*o*n+a}(0,this.startVelocity,this.duration,t)},e.prototype.update=function(e){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(e))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},e.prototype.getKeyFrameSegment=function(e){for(var t=this.getProgress(e),r=1;r<this.keyframes.length;r++)if(this.keyframes[r].progress>t)return[this.keyframes[r-1],this.keyframes[r]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},e.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},e.prototype.set=function(e,t,r,n){var i;void 0===r&&(r=0),n=null!=n?n:Ke();var o=this.getProgress(n),a=this.getValue(o),s={};for(var c in this.config)s[c]=null!==(i=e[c])&&void 0!==i?i:a[c];var u=[{progress:0,value:a},{progress:1,value:s}];return this.setKeyFrames(u,t,r,n)},e.prototype.setKeyFrames=function(e,t,r,n){var i=this;if(void 0===r&&(r=0),e.length<2)throw new Error("keyframes invalid.");return this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise((function(o,a){n=null!=n?n:Ke(),i.progress=0,i.ended=!1,i.startTime=n,i.startVelocity=r,i.keyframes=e,i.duration=t,0===t?(i.progress=1,i.value=t$3.__assign({},e[e.length-1].value)):i.value=t$3.__assign({},e[0].value),i.callbacks=[o,a]}))},e.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},e}(),Hn=function(e){function t(r){var n,i=e.call(this)||this,o=t.parseArgs(r);return i.pending=!0,i.userAction=o.initial[3],i.destroyed=!1,i.ident=o.ident,i.scene=o.scene,i.helper=o.helper,i.camera=o.camera,i.renderer=o.renderer,i.scissor=o.scissor,i.element=o.element,i.model=o.model,i.enableIOSEDR=null!==(n=o.enableIOSEDR)&&void 0!==n&&n,i.work=o.work,i.imageOptions=o.imageOptions,i.videoTexture=o.videoTexture,i.networkSubscribe=o.networkSubscribe,i.needsRender=!0,i.maxFov=120,i.minFov=40,i.maxLatitude=+Math.PI/2,i.minLatitude=-Math.PI/2,i.cameraMotion=new Vn({longitude:{value:i.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:i.camera.pose.latitude,fov:i.camera.pose.fov}),i.eventUnbinds=[o.element].concat(o.extraElements||[]).map((function(e){return i.bindEvents(e)})),Xe.shared.add((function(){return i.initAnimation.apply(i,o.initial)}),!0),i}return t$3.__extends(t,e),t.parseArgs=function(e){return t$3.__assign({},e)},t.initAnimationEndState=function(e){var t=this.parseArgs(e);return{longitude:t.camera.pose.longitude,latitude:t.camera.pose.latitude,fov:t.camera.pose.fov,offset:t.camera.pose.offset.clone()}},t.prototype.destroy=function(){var e;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var t=0,r=this.eventUnbinds;t<r.length;t++)(0,r[t])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,null===(e=this.pressState)||void 0===e||e.stop(),delete this.pressState},t.prototype.isReady=function(){return!1===this.pending&&!0===this.cameraMotion.ended},t.prototype.bindExtraElement=function(e){for(var t=0,r=this.eventUnbinds;t<r.length;t++)if(r[t].element===e)return;this.eventUnbinds.push(this.bindEvents(e))},t.prototype.unbindExtraElement=function(e){for(var t=0,r=this.eventUnbinds;t<r.length&&r[t].element!==e;t++);},t.prototype.updateRenderSize=function(){this.needsRender=!0},t.prototype.updateModel=function(e){this.model=e,this.needsRender=!0},t.prototype.updateWork=function(e,t,r,n,i){return this.work=e,this.userAction=i,!1},t.prototype.updateTime=function(e,t){if(!this.destroyed){var r={};this.cameraMotion.ended&&(this.cameraMotion.update(e),r.longitude=this.cameraMotion.value.longitude,r.latitude=this.cameraMotion.value.latitude,r.fov=this.cameraMotion.value.fov),zn(r)&&this.setCamera(r)}},t.prototype.render=function(e){this.renderer.render(this.scene,this.camera)},t.prototype.postProcessing=function(e,t){this.destroyed||(this.effect||(this.effect=new Rn(this.renderer)),this.effect.render(e,t))},t.prototype.updateCamera=function(e,t,r){return this.userAction=r,this.cameraMotion.set(e,t)},t.prototype.getTargetPose=function(){var e=this.cameraMotion.getKeyFrameSegment(Ke())[1];return{longitude:e.value.longitude,latitude:e.value.latitude,fov:e.value.fov,offset:this.camera.pose.offset.clone()}},t.prototype.moveToPano=function(e,t,r){void 0===t&&(t={}),this.userAction=r;var n={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};t.moveStartCallback&&t.moveStartCallback(e,n),this.emit("moveToPano",e,this.userAction),this.emit("panoWillArrive",e,n,this.userAction),this.emit("panoArrived",e,n,this.userAction),t.moveEndCallback&&t.moveEndCallback(e,n)},t.prototype.initAnimation=function(e,t,r,n){this.pending=!1,this.userAction=n},t.prototype.setCamera=function(e){var t,r,n,i,o;void 0===e&&(e={});var a=null!==(t=e.longitude)&&void 0!==t?t:this.camera.pose.longitude,s=null!==(r=e.latitude)&&void 0!==r?r:this.camera.pose.latitude,c=null!==(n=e.fov)&&void 0!==n?n:this.camera.pose.fov,u=null!==(i=e.distance)&&void 0!==i?i:this.camera.pose.distance,l=null!==(o=e.offset)&&void 0!==o?o:this.camera.pose.offset,f=this.camera.position.clone(),h=He(a,this.camera.pose.longitude,2*Math.PI)||He(s,this.camera.pose.latitude),p=He(c,this.camera.pose.fov),d=He(u,this.camera.pose.distance),m=We(l,this.camera.pose.offset);this.camera.setFromPose({longitude:a,latitude:s,fov:c,distance:u,offset:l});var g=We(f,this.camera.position);p&&this.emit("cameraFovUpdate",c,this.userAction),h&&this.emit("cameraDirectionUpdate",{longitude:a,latitude:s},this.userAction),g&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(p||h||m||d)&&this.emit("cameraUpdate",{longitude:a,latitude:s,fov:c,offset:l},this.userAction),this.needsRender=!0,(Yt||0!==Vt.length)&&(Yt&&clearTimeout(Yt),Yt=window.setTimeout(Gt,200))},t.prototype.onPanGesture=function(e){var t=this.panState,r=e.pointers.length;if(e.isFinal?delete this.panState:this.panState={pointerLength:r,x:e.center.x,y:e.center.y},void 0!==t&&t.pointerLength===r){var n=e.pointers.map((function(e){return ti(e,["x","y"])}));this.emit("wantsGesture","pan",n,e.isFinal)||this.emit("gesture","pan",n,e.isFinal)}},t.prototype.onTapGesture=function(e){var t=e.pointers.map((function(e){return ti(e,["x","y"])}));this.emit("wantsGesture","tap",t,!0)||this.emit("gesture","tap",t,!0)},t.prototype.onPressGesture=function(e,t){var r,n=[e];if(this.emit("wantsGesture","press",n,t))return null===(r=this.pressState)||void 0===r||r.stop(),void delete this.pressState;this.emit("gesture","press",n,t)},t.prototype.onPinchGesture=function(e){var t=e.pointers.map((function(e){return ti(e,["x","y"])}));this.emit("wantsGesture","pinch",t,e.isFinal)||this.emit("gesture","pinch",t,e.isFinal)},t.prototype.onMouseWheel=function(e){var t=[{x:e.clientX,y:e.clientY,delta:e.delta}];this.emit("wantsGesture","mouseWheel",t,!1)||this.emit("gesture","mouseWheel",t,!1)},t.prototype.onMouseMove=function(e){},t.prototype.onMouseOut=function(){},t.prototype.relativeClientPosition=function(e){return Sn(e,this.element,this.scissor)},t.prototype.bindEvents=function(e){var t=this,r=function(e){var r=Sn(e,t.element,t.scissor);return!(Math.abs(r.x)>1||Math.abs(r.y)>1)},n=new bn.Manager(e),i=function(e){return e.session.firstInput||null};n.add(new bn.Pan({threshold:10,pointers:0})),n.add(new bn.Tap({interval:410})),n.add(new bn.Pinch({threshold:0,pointers:2}).recognizeWith(n.get("pan"))),n.on("panstart pan",(function(e){var o=i(n);o&&!r(o.center)||(t.onPanGesture(e),f())})),n.on("tap",(function(e){var o=i(n);o&&!r(o.center)||(t.onTapGesture(e),f())})),n.on("pinchstart pinch pinchend",(function(e){var o=i(n);o&&!r(o.center)||(t.onPinchGesture(e),f())}));var o=function(e){var n={x:e.clientX,y:e.clientY};r(n)&&(t.onMouseWheel(e),f())},a=function(e){if(!((n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"node").match(/android/i)||n.match(/webos/i)||n.match(/ipad|iphone|ipod/i)||n.match(/iemobile/i)||n.match(/opera mini/i)||n.match(/blackberry/i)||n.match(/windows phone/i))){var n,i={x:e.clientX,y:e.clientY};r(i)?(t.onMouseMove(e),t.pressState&&Math.abs(e.clientX-t.pressState.x)>10&&Math.abs(e.clientY-t.pressState.y)>10&&f()):t.onMouseOut()}},s=function(){t.onMouseOut(),f()},c=function e(n,i){if(r(n)){t.pressState={x:n.x,y:n.y,time:t.pressState?t.pressState.time:i,stop:Qe};var o=i-t.pressState.time;t.onPressGesture({x:n.x,y:n.y,delta:o},!1),t.pressState&&(t.pressState.stop=Xe.shared.add((function(t){return e({x:n.x,y:n.y},t)}),!0,1))}else f()},u=function(e){f(),e.touches.length>1||e.changedTouches.length<=0||c({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},Ke())},l=function(e){f(),c({x:e.clientX,y:e.clientY},Ke())},f=function(){var e;if(t.pressState){var r=Ke()-t.pressState.time;t.onPressGesture({x:t.pressState.x,y:t.pressState.y,delta:r},!0),null===(e=t.pressState)||void 0===e||e.stop(),delete t.pressState}},h=function(t){if(t&&"function"==typeof t.preventDefault&&t.currentTarget===e&&t.preventDefault(),"function"==typeof getSelection){var r=getSelection();r&&r.focusNode&&(r.removeAllRanges&&r.removeAllRanges(),r.empty&&r.empty())}};return On(e,o),bn.on(e,"mousemove",a),bn.on(e,"mouseout",s),bn.on(e,"touchstart",u),bn.on(e,"touchend",f),bn.on(e,"touchcancel",f),bn.on(e,"mousedown",l),bn.on(e,"mouseup",f),bn.on(e,"touchstart",h),Object.assign((function(){n.destroy(),function(e,t){var r=document.mozFullScreen?"DOMMouseScroll":"mousewheel",n=!!window.addEventListener,i=!!window.attachEvent;t.__mouseWheelWrapper&&(n?e.removeEventListener(r,t.__mouseWheelWrapper,!1):i&&e.detachEvent("on"+r,t.__mouseWheelWrapper),delete t.__mouseWheelWrapper)}(e,o),bn.off(e,"mousemove",a),bn.off(e,"mouseout",s),bn.off(e,"touchstart",u),bn.off(e,"touchend",f),bn.off(e,"touchcancel",f),bn.off(e,"mousedown",l),bn.off(e,"mouseup",f),bn.off(e,"touchstart",h)}),{element:e})},t}(Tt),Gn=function(e){function t(r){var n,i,o,a,s=this,c=t.parseArgs(r);return(s=e.call(this,c)||this).defaultLongitude=c.defaultLongitude,s.defaultLatitude=c.defaultLatitude,s.defaultFov=c.defaultFov,s.maxFov=c.maxFov,s.minFov=c.minFov,s.maxLatitude=c.maxLatitude,s.minLatitude=c.minLatitude,s.locationMotion=new Vn({x:s.camera.pose.offset.x,y:s.camera.pose.offset.y,z:s.camera.pose.offset.z,distance:s.camera.pose.distance,modelAlpha:null!==(i=null===(n=s.model.getMaterial())||void 0===n?void 0:n.modelAlpha)&&void 0!==i?i:0,perspToOrtho:null!==(a=null===(o=s.model.getMaterial())||void 0===o?void 0:o.perspToOrtho)&&void 0!==a?a:0}),s}return t$3.__extends(t,e),t.parseArgs=function(t){var r,n,i,o,a,s,c,u=e.parseArgs.call(this,t);return t$3.__assign(t$3.__assign({},u),{defaultLongitude:null!==(r=t.defaultLongitude)&&void 0!==r?r:Math.PI/4,defaultLatitude:null!==(n=t.defaultLatitude)&&void 0!==n?n:Math.PI/4,defaultFov:null!==(i=t.defaultFov)&&void 0!==i?i:80,maxFov:null!==(o=t.maxFov)&&void 0!==o?o:120,minFov:null!==(a=t.minFov)&&void 0!==a?a:40,maxLatitude:null!==(s=t.maxLatitude)&&void 0!==s?s:+Math.PI/2,minLatitude:null!==(c=t.minLatitude)&&void 0!==c?c:-Math.PI/2})},t.initAnimationEndPose=function(e){var t,r,n,i=this.parseArgs(e),o=e.initial[1];return{longitude:null!==(t=o.longitude)&&void 0!==t?t:i.defaultLongitude,latitude:jn(null!==(r=o.latitude)&&void 0!==r?r:i.defaultLatitude,i.minLatitude,i.maxLatitude),fov:null!==(n=o.fov)&&void 0!==n?n:i.defaultFov,offset:e.model.bounding.getCenter(new r$3.Vector3)}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},t.prototype.isReady=function(){return!1!==this.locationMotion.ended&&e.prototype.isReady.call(this)},t.prototype.updateWork=function(e,t,r,n,i){return this.work=e,!0},t.prototype.updateModel=function(t){e.prototype.updateModel.call(this,t);var r=t.bounding.getCenter(new r$3.Vector3),n=this.cameraDistance(t);this.locationMotion.set({x:r.x,y:r.y,z:r.z,distance:n},0).catch(Qe)},t.prototype.updateTime=function(e,t){if(!this.destroyed){var r={},n={};this.locationMotion.ended||(this.locationMotion.update(e),r.modelAlpha=this.locationMotion.value.modelAlpha,r.perspToOrtho=jn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),n.distance=this.locationMotion.value.distance,n.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(e),n.longitude=this.cameraMotion.value.longitude,n.latitude=this.cameraMotion.value.latitude,n.fov=this.cameraMotion.value.fov),zn(r)||this.model.setMaterial(r),zn(n)||this.setCamera(n)}},t.prototype.getTargetPose=function(){var e=this.cameraMotion.getKeyFrameSegment(Ke())[1],t=this.locationMotion.getKeyFrameSegment(Ke())[1];return{longitude:e.value.longitude,latitude:e.value.latitude,fov:e.value.fov,offset:new r$3.Vector3(t.value.x,t.value.y,t.value.z)}},t.prototype.initAnimation=function(e,t,r,n){var i,o,a,s=this;if(!this.destroyed){this.pending=!1,this.userAction=n;var c=this.model.bounding.getCenter(new r$3.Vector3),u={longitude:null!==(i=t.longitude)&&void 0!==i?i:this.defaultLongitude,latitude:jn(null!==(o=t.latitude)&&void 0!==o?o:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:jn(null!==(a=t.fov)&&void 0!==a?a:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},l=this.cameraDistance(this.model),f=ti(u,["longitude","latitude","fov"]),h={x:c.x,y:c.y,z:c.z,distance:l,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",e,u,this.userAction),this.cameraMotion.set(f,r).catch(Qe),this.locationMotion.set(h,r).then((function(){s.emit("initAnimationEnded",e,u,s.userAction)}),(function(t){var r=In(s.camera.pose);s.emit("initAnimationEnded",e,r,s.userAction)}))}},t.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},t.prototype.cameraDistance=function(e){var t=e.bounding,r=this.camera.aspect,n=Math.pow(Math.pow(t.max.x-t.min.x+1,2)+Math.pow(t.max.y-t.min.y+1,2)+Math.pow(t.max.z-t.min.z+1,2),.5),i=n/2/Math.tan(Math.PI*this.defaultFov/360);return r<1&&(i/=r),isNaN(i)?n:i},t.prototype.getForwardPanoIndexOrNot=function(e){var t=this.work.observers.filter((function(e){return e.active})),r=this.model.intersectRaycaster(e)[0];if(!r)return null;var n=En(t,(function(e){return e.standingPosition.distanceTo(r.point)}),!0),i=n[0];return n[1]<5?this.work.observers.indexOf(i):null},t.prototype.coordinatesChangeWithOffset=function(e,t){var r=this.element,n=this.camera,i=r.offsetWidth,o=r.offsetHeight,a=2*t.x/i*n.fov/30,s=2*t.y/o*n.fov/30;return{longitude:an(e.longitude+a),latitude:jn(e.latitude+s,this.minLatitude,this.maxLatitude)}},t.prototype.requestInteriaMovement=function(e){var t=this;if(!1!==this.interiaMovement){var r=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},e),n=r.longitude,i=r.latitude,o={longitude:n,latitude:i,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset};this.cameraMotion.set({longitude:n,latitude:i},0).catch(Qe);var a=Math.abs(e.x)>1||Math.abs(e.y)>1;this.emit("interiaPan",o,!a),a?Xe.shared.add((function(){t.requestInteriaMovement({x:.8*e.x,y:.8*e.y})}),!0,1):this.interiaMovement=!1}},t.prototype.onPanGesture=function(e){var t=this,r=this.panState,n=e.pointers.length;if(e.isFinal?delete this.panState:this.panState={pointerLength:n,x:e.center.x,y:e.center.y},void 0!==r&&r.pointerLength===n){var i=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pan",i,e.isFinal)){var o={x:e.center.x-r.x,y:e.center.y-r.y},a=this.relativeClientPosition(e.center),s=this.camera.pose.latitude<Math.PI/6||a.y<0?-1:1;o.x*=s;var c=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},o),u={longitude:c.longitude,latitude:c.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset};this.emit("wantsPanGesture",u,e.isFinal)||(this.emit("gesture","pan",i,e.isFinal),this.emit("panGesture",u,e.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:u.longitude,latitude:u.latitude,fov:u.fov},0).catch(Qe),e.isFinal&&(this.emit("wantsInteriaPan",u)||(this.interiaMovement=!0,Xe.shared.getFrameTime((function(r){var n=e.velocityX*r*s,i=e.velocityY*r,o=Math.sqrt(n*n+i*i);o>100&&(n=n/o*100,i=i/o*100),t.requestInteriaMovement({x:n,y:i})})))))}}},t.prototype.onPinchGesture=function(e){var t,r=null===(t=this.pinchState)||void 0===t?void 0:t.fov,n=!1;if("pinchstart"===e.type)return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if("pinchend"===e.type&&(n=!0,delete this.panState,delete this.pinchState),void 0!==r){var i=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pinch",i,n)){var o=jn(r/e.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",e.scale,o,n)||this.emit("wantsChangeCameraFov",o)||(this.emit("gesture","pinch",i,n),this.emit("pinchGesture",e.scale,o,n),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:o},0).catch(Qe))}}},t.prototype.onMouseWheel=function(e){var t=this,r=e.delta,n=[{x:e.clientX,y:e.clientY}];if(!this.emit("wantsGesture","mouseWheel",n,!1)){var i=this.minFov,o=this.maxFov,a=jn(this.camera.fov-r,i,o);this.emit("wantsMouseWheel",r,a,!1)||this.emit("wantsChangeCameraFov",a)||(this.emit("gesture","mouseWheel",n,!1),this.emit("mouseWheel",r,a,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:a},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout((function(){delete t.mouseWheelState,t.emit("wantsGesture","mouseWheel",n,!0)||t.emit("wantsMouseWheel",r,a,!0)||(t.emit("gesture","mouseWheel",n,!0),t.emit("mouseWheel",0,a,!0))}),200)})}},t.prototype.onTapGesture=function(e){var t=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","tap",t,!0)){var r=this.relativeClientPosition(e.center),n=new r$3.Raycaster;if(n.setFromCamera(r,this.camera),!this.emit("wantsTapGesture",n,r,!0)){this.emit("gesture","tap",t,!0),this.emit("tapGesture",n,r,!0),this.interiaMovement=!1;var i=this.getForwardPanoIndexOrNot(n);if(!Re(i)){this.emit("panoSelected",i);var o={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",i,o,!0)}}}},t.prototype.onPressGesture=function(e,t){var r,n,i=[e];if(this.emit("wantsGesture","press",i,t))return null===(r=this.pressState)||void 0===r||r.stop(),void delete this.pressState;var o=this.relativeClientPosition(e),a=new r$3.Raycaster;if(a.setFromCamera(o,this.camera),this.emit("wantsPressGesture",a,o,e.delta,t))return null===(n=this.pressState)||void 0===n||n.stop(),void delete this.pressState;this.emit("gesture","press",i,t),this.emit("pressGesture",a,o,e.delta,t)},t}(Hn),Wn=function(e){function t(r){var n=t.parseArgs(r);return e.call(this,n)||this}return t$3.__extends(t,e),t.parseArgs=function(t){var r=[t.initial[0],t$3.__assign(t$3.__assign({},t.initial[1]),{longitude:0,latitude:Math.PI/2}),t.initial[2],t.initial[3]],n=t$3.__assign(t$3.__assign({},t),{initial:r,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return e.parseArgs.call(this,n)},t.initAnimationEndPose=function(t){var r=this.parseArgs(t);return e.initAnimationEndPose.call(this,r)},t.prototype.updateModel=function(e){this.model=e,this.needsRender=!0;var t=e.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:t.x,y:t.y,z:t.z,distance:this.cameraDistance(e)},0).catch(Qe)},t.prototype.initAnimation=function(e,t,r,n){var i,o=this;if(!this.destroyed){this.pending=!1,this.userAction=n;var a=this.model.bounding.getCenter(new r$3.Vector3),s={longitude:0,latitude:Math.PI/2,fov:jn(null!==(i=t.fov)&&void 0!==i?i:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},c=this.cameraDistance(this.model),u=ti(s,["longitude","latitude","fov"]),l={x:a.x,y:a.y,z:a.z,distance:c,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(u,r).catch(Qe),this.locationMotion.set(l,r).then((function(){o.emit("initAnimationEnded",e,s,o.userAction)}),(function(t){var r=In(o.camera.pose);o.emit("initAnimationEnded",e,r,o.userAction)}))}},t.prototype.getZoomOffsetFromFov=function(e,t,r){var n=new r$3.Vector3(0,-1,0),i=Math.tan(r/2*Math.PI/180),o=Math.tan(t.fov/2*Math.PI/180),a=(o-i)/o,s=new r$3.Raycaster;s.setFromCamera(e,t);var c=s.ray.direction,u=c.angleTo(n),l=this.cameraDistance(this.model),f=l*Math.tan(u),h=c.clone().setLength(l*Math.cos(u)).projectOnPlane(n),p=h.length(),d=a/p*h.x*f,m=a/p*h.z*f;return new r$3.Vector3(d,0,m)},t.prototype.requestInteriaMovement=function(e){},t.prototype.onPanGesture=function(e){var t=this.renderer.getSize(new r$3.Vector2),r=this.panState,n=e.pointers.length;if(e.isFinal?delete this.panState:this.panState={pointerLength:n,x:e.center.x,y:e.center.y},void 0!==r&&r.pointerLength===n){var i=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pan",i,e.isFinal)){var o=e.center.x-r.x,a=e.center.y-r.y,s=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),c=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);s.add(function(e,t){var r=new r$3.Vector3;return r.setFromMatrixColumn(t,0),r.multiplyScalar(-e),r}(2*o*c/t.y,this.camera.matrix)),s.add(function(e,t,r){var n=new r$3.Vector3;return n.setFromMatrixColumn(r,0),n.crossVectors(t,n),n.multiplyScalar(e),n}(2*a*c/t.y,this.camera.up,this.camera.matrix));var u=this.model.bounding,l=u.getCenter(new r$3.Vector3),f=(u.max.x-u.min.x)/this.defaultFov*this.cameraMotion.value.fov,h=(u.max.y,u.min.y,this.defaultFov,this.cameraMotion.value.fov,(u.max.z-u.min.z)/this.defaultFov*this.cameraMotion.value.fov);s.x=jn(s.x,l.x-f,l.x+f),s.z=jn(s.z,l.z-h,l.z+h),s.y=l.y;var p={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:s};this.emit("wantsPanGesture",p,e.isFinal)||(this.emit("gesture","pan",i,e.isFinal),this.emit("panGesture",p,e.isFinal),this.userAction=!0,this.locationMotion.set({x:s.x,y:s.y,z:s.z},0).catch(Qe))}}},t.prototype.onPinchGesture=function(e){var t,r=null===(t=this.pinchState)||void 0===t?void 0:t.fov,n=!1;if("pinchstart"===e.type)return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if("pinchend"===e.type&&(n=!0,delete this.panState,delete this.pinchState),void 0!==r){var i=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pinch",i,n)){var o=jn(r/e.scale,this.minFov,this.maxFov),a=this.relativeClientPosition({x:e.center.x,y:e.center.y}),s=this.getZoomOffsetFromFov(a,this.camera,o),c=this.camera.pose.offset.clone().add(s);this.emit("wantsPinchGesture",e.scale,o,n)||this.emit("wantsChangeCameraFov",o)||(this.emit("gesture","pinch",i,n),this.emit("pinchGesture",e.scale,o,n),this.userAction=!0,this.locationMotion.set({x:c.x,y:c.y,z:c.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:o},0).catch(Qe))}}},t.prototype.onMouseWheel=function(e){var t=this,r=e.delta,n=[{x:e.clientX,y:e.clientY}];if(!this.emit("wantsGesture","mouseWheel",n,!1)){var i=jn(this.cameraMotion.value.fov-r,this.minFov,this.maxFov),o=this.relativeClientPosition({x:e.clientX,y:e.clientY}),a=this.getZoomOffsetFromFov(o,this.camera,i),s=this.camera.pose.offset.clone().add(a);this.emit("wantsMouseWheel",r,i,!1)||this.emit("wantsChangeCameraFov",i)||(this.emit("gesture","mouseWheel",n,!1),this.emit("mouseWheel",r,i,!1),this.userAction=!0,this.locationMotion.set({x:s.x,y:s.y,z:s.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:i},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout((function(){delete t.mouseWheelState,t.emit("wantsGesture","mouseWheel",n,!0)||t.emit("wantsMouseWheel",r,i,!0)||t.emit("wantsChangeCameraFov",i)||(t.emit("gesture","mouseWheel",n,!0),t.emit("mouseWheel",0,i,!0))}),200)})}},t}(Gn);function qn(e,t){void 0===t&&(t=!1);var r=_typeof2(e);if("string"===r)return JSON.stringify(e);if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(e instanceof Array){for(var n="[",i=e.length-1,o=0;o<i;o++)n+=qn(e[o],!1)+",";return i>-1&&(n+=qn(e[o],!1)),n+"]"}if(e instanceof Object){if("function"==typeof e.toJSON)return qn(e.toJSON(),t);var a=Object.keys(e).sort(),s=a.length;for(n="",o=0;o<s;){var c=a[o],u=qn(e[c],!0);void 0!==u&&(o&&""!==n&&(n+=","),n+=JSON.stringify(c)+":"+u),o++}return"{"+n+"}"}switch(r){case"function":case"undefined":return t?void 0:null;case"number":return e;default:return isFinite(e)?e:null}}function Kn(e){return Ie(String(qn(e,!1)))}var Zn=function(e){function t(){var t=e.call(this)||this,r=new r$3.RingBufferGeometry(.04,.08,32),n=new r$3.MeshBasicMaterial({color:1245179,opacity:.8,side:r$3.DoubleSide,transparent:!0});return t.ringMesh=new r$3.Mesh(r,n),t.ringMesh.renderOrder=100,t.add(t.ringMesh),t}return t$3.__extends(t,e),t.prototype.dispose=function(){this.remove(this.ringMesh),this.ringMesh.geometry.dispose(),Array.isArray(this.ringMesh.material)?this.ringMesh.material.forEach((function(e){return e.dispose()})):this.ringMesh.material.dispose()},t}(r$3.Object3D);function Xn(){return new Zn}var Jn=function(e){function t(r){var n=this,i=t.parseArgs(r);return(n=e.call(this,i)||this).defaultLongitude=i.defaultLongitude,n.defaultLatitude=i.defaultLongitude,n.defaultFov=i.defaultFov,n.maxFov=i.maxFov,n.minFov=i.minFov,n.maxLatitude=i.maxLatitude,n.minLatitude=i.minLatitude,n.moveSpeed=i.moveSpeed,n.intersectMeshCreator=i.intersectMeshCreator,n.interiaMovement=!1,n.intersectMesh=n.intersectMeshCreator(),n.intersectMesh.name="intersect",n.intersectMesh.visible=!1,n.helper.add(n.intersectMesh),n}return t$3.__extends(t,e),t.parseArgs=function(t){var r,n,i,o,a,s,c,u,l,f=e.parseArgs.call(this,t);return t$3.__assign(t$3.__assign({},f),{defaultLongitude:null!==(r=t.defaultLongitude)&&void 0!==r?r:0,defaultLatitude:null!==(n=t.defaultLatitude)&&void 0!==n?n:0,defaultFov:null!==(i=t.defaultFov)&&void 0!==i?i:90,maxFov:null!==(o=t.maxFov)&&void 0!==o?o:120,minFov:null!==(a=t.minFov)&&void 0!==a?a:40,maxLatitude:null!==(s=t.maxLatitude)&&void 0!==s?s:+Math.PI/2,minLatitude:null!==(c=t.minLatitude)&&void 0!==c?c:-Math.PI/2,moveSpeed:null!==(u=t.moveSpeed)&&void 0!==u?u:3.2,intersectMeshCreator:null!==(l=t.intersectMeshCreator)&&void 0!==l?l:Xn})},t.initAnimationEndPose=function(e){var t,r,n,i=this.parseArgs(e),o=e.initial,a=o[0],s=o[1];return{longitude:null!==(t=s.longitude)&&void 0!==t?t:i.defaultLongitude,latitude:jn(null!==(r=s.latitude)&&void 0!==r?r:i.defaultLatitude,i.minLatitude,i.maxLatitude),fov:jn(null!==(n=s.fov)&&void 0!==n?n:i.defaultFov,i.minFov,i.maxFov),offset:i.work.observers[a].position.clone()}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},t.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&e.prototype.isReady.call(this)},t.prototype.calculateMovingDuration=function(e,t){switch(_typeof2(e)){case"function":return e(t,this.moveSpeed);case"number":return e;case"string":return Number(e);default:return Math.floor(Math.max(Math.min(t/this.moveSpeed*1e3,1500),500))}},t.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},t.prototype.coordinatesForOffset=function(e){var t=this.cameraMotion.value.fov,r=this.camera.aspect,n=this.renderer.getSize(new r$3.Vector2);return{longitude:2*e.x/n.x*t/95*r,latitude:-2*e.y/n.y*t/95}},t.prototype.cameraBounce=function(){var e=this.cameraMotion.value,t=e.longitude,r=e.latitude,n=e.fov,i=[{progress:0,value:{longitude:t,latitude:r,fov:n}},{progress:.5,value:{longitude:t,latitude:r,fov:.98*n}},{progress:1,value:{longitude:t,latitude:r,fov:n}}];this.cameraMotion.setKeyFrames(i,500).catch(Qe)},t.prototype.requestInteriaMovement=function(e){var t=this;if(!1!==this.interiaMovement){var r=this.coordinatesForOffset(e),n=an(this.cameraMotion.value.longitude+r.longitude),i=jn(this.cameraMotion.value.latitude+r.latitude,this.minLatitude,this.maxLatitude),o={longitude:n,latitude:i,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:n,latitude:i},0).catch(Qe);var a=Math.abs(e.x)>1||Math.abs(e.y)>1;this.emit("interiaPan",o,!a),a?Xe.shared.add((function(){var r={x:.9*e.x,y:.9*e.y*.7};t.requestInteriaMovement(r)}),!0,1):this.interiaMovement=!1}},t.prototype.onPanGesture=function(e){var t=this,r=this.panState,n=e.pointers.length;if(e.isFinal?delete this.panState:this.panState={pointerLength:n,x:e.center.x,y:e.center.y},void 0!==r&&r.pointerLength===n){var i=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pan",i,e.isFinal)){var o={x:e.center.x-r.x,y:e.center.y-r.y},a=this.coordinatesForOffset(o),s=an(this.cameraMotion.value.longitude+a.longitude),c=jn(this.cameraMotion.value.latitude+a.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(e.overallVelocityX)>.2&&Math.atan2(Math.abs(e.overallVelocityY),Math.abs(e.overallVelocityX))<Math.PI/6.923&&(c=this.cameraMotion.value.latitude);var u={longitude:s,latitude:c,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",u,e.isFinal)){this.emit("gesture","pan",i,e.isFinal),this.emit("panGesture",u,e.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var l={longitude:u.longitude,latitude:u.latitude,fov:u.fov};this.cameraMotion.set(l,0).catch(Qe),e.isFinal&&(this.emit("wantsInteriaPan",u)||Xe.shared.getFrameTime((function(r){t.interiaMovement=!0;var n=e.velocityX*r,i=e.velocityY*r,o=Math.sqrt(n*n+i*i);o>100&&(n=n/o*100,i=i/o*100),Math.abs(i/n)<Math.tan(20/180*Math.PI)&&(i=0),t.requestInteriaMovement({x:n,y:i})})))}}}},t.prototype.onPinchGesture=function(e){var t,r=null===(t=this.pinchState)||void 0===t?void 0:t.fov,n=e.scale,i=!1;if("pinchstart"===e.type)return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if("pinchend"===e.type&&(i=!0,delete this.panState,delete this.pinchState),void 0!==r){var o=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","pinch",o,i)){var a=jn(r/n,this.minFov,this.maxFov);this.emit("wantsPinchGesture",n,a,i)||this.emit("wantsChangeCameraFov",a)||(this.emit("gesture","pinch",o,i),this.emit("pinchGesture",n,a,i),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:a},0).catch(Qe))}}},t.prototype.onMouseWheel=function(e){var t=this,r=e.delta,n=[{x:e.clientX,y:e.clientY}];if(!this.emit("wantsGesture","mouseWheel",n,!1)){var i=jn(this.cameraMotion.value.fov-r,this.minFov,this.maxFov);this.emit("wantsMouseWheel",r,i,!1)||this.emit("wantsChangeCameraFov",i)||(this.emit("gesture","mouseWheel",n,!1),this.emit("mouseWheel",r,i,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:i},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout((function(){delete t.mouseWheelState,t.emit("wantsGesture","mouseWheel",n,!0)||t.emit("wantsMouseWheel",r,i,!0)||t.emit("wantsChangeCameraFov",i)||(t.emit("gesture","mouseWheel",n,!0),t.emit("mouseWheel",0,i,!0))}),200)})}},t.prototype.onMouseMove=function(e){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&!0===this.model.bvhs.loaded&&!this.panState){var t=this.relativeClientPosition({x:e.clientX,y:e.clientY}),r=new r$3.Raycaster;if(r.setFromCamera(t,this.camera),this.emit("wantsShowIntersectionOnModel",r))this.hideIntersectMesh();else{var n=this.model.intersectRaycaster(r)[0];if(n&&n.face){var i=n.face.normal,o=i.clone().multiplyScalar(.05),a=n.point.clone().add(o);this.intersectMesh.position.copy(a);var s=a.clone().add(o);if(this.intersectMesh.lookAt(s),Math.abs(i.y)>.99){var c=this.camera.position.clone().sub(a);this.intersectMesh.rotation.z=-Math.atan2(c.z,c.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",n,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:e.clientX,clientY:e.clientY}}}},t.prototype.onMouseOut=function(){this.intersectMesh.parent&&!0===this.intersectMesh.visible&&this.hideIntersectMesh()},t.prototype.onPressGesture=function(e,t){var r,n,i=[e];if(this.emit("wantsGesture","press",i,t))return null===(r=this.pressState)||void 0===r||r.stop(),void delete this.pressState;var o=this.relativeClientPosition(e),a=new r$3.Raycaster;if(a.setFromCamera(o,this.camera),this.emit("wantsPressGesture",a,o,e.delta,t))return null===(n=this.pressState)||void 0===n||n.stop(),void delete this.pressState;this.emit("gesture","press",i,t),this.emit("pressGesture",a,o,e.delta,t)},t}(Hn),$n=nt(),er=new r$3.Texture($n);$n.onload=function(){return er.needsUpdate=!0},$n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var tr=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),ir=new r$3.MeshBasicMaterial({map:er,transparent:!0});function nr(){if("undefined"==typeof document){var e=new r$3.Texture;return Object.assign(e,{draw:function(e){},retain:!1,pool:!1})}var t=document.createElement("canvas"),r=512,n=256,i=190;t.setAttribute("width",String(r)),t.setAttribute("height",String(r));var o=new r$3.Texture(t),a=t.getContext("2d");if(!a)throw Error("cannot create canvas context");var s=a.createRadialGradient(n,n,150,n,n,0);function c(){var e=Math.PI/12,t=2*Math.PI/3;a&&(a.beginPath(),a.arc(n,n,i,0*t,1*t-e),a.stroke(),a.beginPath(),a.arc(n,n,i,1*t,2*t-e),a.stroke(),a.beginPath(),a.arc(n,n,i,2*t,3*t-e),a.stroke())}function u(e){a&&(a.clearRect(0,0,r,r),a.lineWidth=20,-1!==e&&(a.globalCompositeOperation="source-over",a.strokeStyle="rgba(255, 255, 255, 1)",c(),a.globalCompositeOperation="source-in",a.beginPath(),a.arc(n,n,i,0,2*Math.PI*e),a.strokeStyle="rgba(255, 255, 255, 1)",a.stroke(),a.globalCompositeOperation="source-over",a.strokeStyle="rgba(255, 255, 255, "+(e?.5:1)+")",c()),a.beginPath(),a.arc(n,n,150,0,2*Math.PI),a.closePath(),a.fillStyle=s,a.fill(),a.fillStyle="rgba(255, 255, 255, 0.01)",a.fillRect(0,0,r,r),o.needsUpdate=!0)}return s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.15,"rgba(255, 255, 255, 1)"),s.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),s.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),s.addColorStop(1,"rgba(255, 255, 255, 0.0)"),u(0),Object.assign(o,{draw:u,retain:!1,pool:!1})}var rr=[],or=nr();or.draw(0);var sr=nr();sr.draw(1);var ar=nr();ar.draw(-1);var ur=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function cr(){return new r$3.Mesh(ur,new r$3.MeshBasicMaterial({map:or,transparent:!0}))}function lr(e,t){var r=e.map;0===t||1===t?(!0===r.pool&&(r.retain=!1),0===t&&(e.map=or),1===t&&(e.map=sr)):(!0!==r.pool&&(e.map=function(){for(var e=0,t=rr;e<t.length;e++){var r=t[e];if(!1===r.retain)return r}var n=nr();return n.pool=!0,n.retain=!0,rr.push(n),n}()),e.map.draw(t))}var hr,dr=function(e){function t(){var t=e.call(this)||this;return t.loading=!1,t.disabled=!1,t.current=!1,t.progress=0,t.opacity=0,t.centerMesh=cr(),t.centerMesh.position.y+=.01,t.add(t.centerMesh),t.loadingMesh=new r$3.Mesh(tr,ir),t.loadingMesh.position.y+=.011,t.progressMotion=new Vn({progress:t.progress}),t.opacityMotion=new Vn({opacity:t.opacity}),t.needsRender=!0,t}return t$3.__extends(t,e),t.prototype.setLoading=function(e){var t=this;this.loading=e,this.stopInterval&&this.stopInterval(),e?(this.add(this.loadingMesh),this.stopInterval=Xe.shared.add((function(){t.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),t.needsRender=!0}))):this.remove(this.loadingMesh),this.needsRender=!0},t.prototype.setDisabled=function(e){this.disabled=e,function(e,t){var r=e.map;!0===r.pool&&(r.retain=!1),e.map=t?ar:or}(this.centerMesh.material,e),this.needsRender=!0},t.prototype.setProgress=function(e){this.setLoading(!1),this.setDisabled(!1),this.progress=e=jn(e,0,1),e!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:e},120).catch(Qe)},t.prototype.setOpacity=function(e){this.opacity=e=jn(e,0,1),this.current&&(e=1),e!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:e},500).catch(Qe)},t.prototype.setCurrent=function(e){this.current!==e&&(this.current=e,this.setOpacity(this.opacity))},t.prototype.updateTime=function(e,t){this.opacityMotion.ended||(this.opacityMotion.update(e),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(e),lr(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},t.prototype.dispose=function(){this.setLoading(!1),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},t}(r$3.Object3D),pr,Ar=function(e){function t(t,r){return void 0===r&&(r=.5),e.call(this,t,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(r)},fragment:"\n#include <common>\nuniform sampler2D inputBuffer;\nuniform float scale;\nvarying vec2 vUv;\n\nvoid main() {\n  float u = (vUv.x - 0.5) * scale + 0.5;\n  float v = (vUv.y - 0.5) * scale + 0.5;\n  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;\n  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);\n  gl_FragColor = vec4(luminance);\n}\n"})||this}return t$3.__extends(t,e),t}(_n),fr=function(e){function t(t,r){void 0===r&&(r=.002);var n=e.call(this,t,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(r)},fragment:"\n        uniform sampler2D targetBuffer;\n        uniform sampler2D inputBuffer;\n        uniform float step;\n        varying vec2 vUv;\n        void main() {\n\n          #ifdef GL_EXT_shader_texture_lod\n            #if __VERSION__ < 300\n              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;\n            #else\n              float target = textureLod(targetBuffer, vUv, 5.0).r;\n            #endif\n          #else\n            float target = texture2D(targetBuffer, vUv).r;\n          #endif\n          float current = texture2D(inputBuffer, vUv).r;\n\n          float result;\n          if (abs(target - current) < step) {\n            result = target;\n          } else if (target - current > 0.0) {\n            result = current + step;\n          } else {\n            result = current - step;\n          }\n          gl_FragColor = vec4(result, result, result, 1.0);\n        }\n      "})||this;return n.material.extensions.shaderTextureLOD=!0,n}return t$3.__extends(t,e),Object.defineProperty(t.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(e){this.material.uniforms.targetBuffer.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(e){this.material.uniforms.step.value=e},enumerable:!1,configurable:!0}),t}(_n),Mr=function(e){function t(t){var r=e.call(this,t,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:"\n        #include <common>\n        uniform sampler2D inputBuffer;\n        uniform sampler2D luminanceAdaptiveBuffer;\n        uniform float progress;\n        varying vec2 vUv;\n\n        void main() {\n          float middleGrey = 0.8;\n          float whitePoint = 8.0;\n          float exposure = 1.5;\n          vec4 inputColor = texture2D(inputBuffer, vUv);\n          vec3 rgb = inputColor.rgb * exposure;\n          float alpha = inputColor.a;\n          float luminance = linearToRelativeLuminance(rgb);\n          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;\n          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);\n          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));\n          lumCompressed /= (1.0 + lumScaled);\n          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);\n          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);\n        }\n      "})||this;return r.material.transparent=!0,r}return t$3.__extends(t,e),Object.defineProperty(t.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(e){this.material.uniforms.luminanceAdaptiveBuffer.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(e){this.material.uniforms.progress.value=e},enumerable:!1,configurable:!0}),t}(_n),gr=function(e){function t(t){var r=e.call(this,t)||this;return r.enableTime=Ke(),r.renderer=t,r.valuePass=new Bn(r.renderer),r.luminancePass=new Ar(r.renderer,.75),r.nextStepPass=new fr(r.renderer,.002),r.luminanceAdaptivePass=new Mr(r.renderer),r}return t$3.__extends(t,e),t.prototype.render=function(e){if(!this.enable)return this.enableTime=null,void this.copyPass.render(e);null===this.enableTime&&(this.enableTime=Ke()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(e,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ke()-this.enableTime)/3e3,1),this.luminanceAdaptivePass.render(e)},t.prototype.dispose=function(){var e,t,r;null===(e=this.luminanceTargetBuffer)||void 0===e||e.dispose(),null===(t=this.luminancePrevBuffer)||void 0===t||t.dispose(),null===(r=this.luminanceNextBuffer)||void 0===r||r.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},t}(Rn),yr=["up","down","left","right","front","back"],mr=null!==(pr=Math.SQRT1_2)&&void 0!==pr?pr:Math.sqrt(2),vr={up:new r$3.Quaternion(mr,0,0,mr),down:new r$3.Quaternion(-mr,0,0,mr),left:new r$3.Quaternion(0,mr,0,mr),right:new r$3.Quaternion(0,-mr,0,mr),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},Nr=(new r$3.Quaternion).setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Dr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),wr=new Float32Array([0,0,1,0,0,1,1,1]),Tr=new Uint8Array([0,1,2,1,3,2]),xr=new r$3.BufferGeometry;xr.setAttribute("position",new r$3.BufferAttribute(Dr,3)),xr.setAttribute("uv",new r$3.BufferAttribute(wr,2)),xr.setIndex(new r$3.BufferAttribute(Tr,1));var Er=function(e){function t(){var t=e.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n#if defined(USE_LUMINANCE)\nuniform sampler2D luminanceMap;\n#endif\nuniform sampler2D map;\nvarying vec2 vUv;\n\nvoid main() {\n  gl_FragColor = texture2D(map, vUv);\n  #if defined(USE_LUMINANCE)\n  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;\n  #endif\n}\n"})||this;return t.depthTest=!1,t.depthWrite=!1,t.blending=r$3.NoBlending,t.map=t.uniforms.map.value,t.luminanceMap=t.uniforms.luminanceMap.value,Object.defineProperties(t,{map:{get:function(){return this.uniforms.map.value},set:function(e){this.uniforms.map.value=e}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(e){this.uniforms.luminanceMap.value=e,this.defines.USE_LUMINANCE=null!==e,this.needsUpdate=!0}}}),t}return t$3.__extends(t,e),t}(r$3.ShaderMaterial),jr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=0,t.sideCount=0,t.col=0,t.row=0,t.index=0,t.type="up",t}return t$3.__extends(t,e),t}(r$3.Box3),zr=function(e){function t(t,r){var n=this,i=new Er;return i.visible=!1,(n=e.call(this,xr,i)||this).position.copy(t.getCenter(new r$3.Vector3)),n.quaternion.copy(vr[t.type]),n.scale.setScalar(1/Math.pow(2,t.level)),n.level=t.level,n.activeTime=-1,n.disposed=!1,n.needsRender=!1,n.frustumCulled=!1,r.then((function(e){var t=e[0],r=e[1];n.disposed?(t.dispose(),null==r||r.dispose()):(n.material.map=t,n.material.luminanceMap=r,n.material.needsUpdate=!0,n.material.visible=!0,n.needsRender=!0)})).catch(Qe),n}return t$3.__extends(t,e),t.getBox=function(e,t,r){var n=new jr,i=Math.pow(2,e),o=1/i,a=r%i,s=Math.floor(r/i);switch(n.level=e,n.index=r,n.sideCount=i,n.row=s,n.col=a,n.type=t,t){case"up":n.min.y=.5,n.max.y=.5,n.min.x=+a*o-.5,n.max.x=+a*o-.5+o,n.min.z=-s*o+.5-o,n.max.z=-s*o+.5;break;case"down":n.min.y=-.5,n.max.y=-.5,n.min.x=+a*o-.5,n.max.x=+a*o-.5+o,n.min.z=+s*o-.5,n.max.z=+s*o-.5+o;break;case"left":n.min.x=-.5,n.max.x=-.5,n.min.z=-a*o+.5-o,n.max.z=-a*o+.5,n.min.y=-s*o+.5-o,n.max.y=-s*o+.5;break;case"right":n.min.x=.5,n.max.x=.5,n.min.z=+a*o-.5,n.max.z=+a*o-.5+o,n.min.y=-s*o+.5-o,n.max.y=-s*o+.5;break;case"front":n.min.z=-.5,n.max.z=-.5,n.min.x=+a*o-.5,n.max.x=+a*o-.5+o,n.min.y=-s*o+.5-o,n.max.y=-s*o+.5;break;case"back":n.min.z=.5,n.max.z=.5,n.min.x=-a*o+.5-o,n.max.x=-a*o+.5,n.min.y=-s*o+.5-o,n.max.y=-s*o+.5}return n},t.prototype.dispose=function(){var e;this.disposed=!0,this.material.map&&(this.material.map.dispose(),null===(e=this.material.luminanceMap)||void 0===e||e.dispose()),this.material.dispose()},t}(r$3.Mesh),Ir=function(e){function t(){var t=e.call(this)||this;return t.needsRender=!1,t.name="tiling",t}return t$3.__extends(t,e),t}(r$3.Group),br=function(){function e(e,t){this.disposed=!1,this.textureLoader=new bi(e),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=t,this.object=new Ir}return e.prototype.setAllowHosts=function(e){this.textureLoader.setAllowHosts(e)},e.prototype.setNetworkSubscribe=function(e){this.textureLoader.setNetworkSubscribe(e)},e.prototype.cleanup=function(){for(var e=0;e<this.tiles.length;e++)if(this.tiles[e]){var t=this.tiles[e],r="level-group:"+e,n=this.object.getObjectByName(r);for(var i in t){var o=t[i];o.dispose(),n.remove(o),delete t[i],this.object.needsRender=!0}}},e.prototype.setRotation=function(e){if(!this.disposed){var t=(new r$3.Quaternion).multiplyQuaternions(e,Nr);this.object.quaternion.equals(t)||(this.object.quaternion.copy(t),this.object.needsRender=!0)}},e.prototype.setPosition=function(e){this.disposed||this.object.position.equals(e)||(this.object.position.copy(e),this.object.needsRender=!0)},e.prototype.setResource=function(e){if(!this.disposed&&this.resource!==e){this.cleanup(),this.resource=e;for(var t=0;t<e.length;t++){var r=e[t].level;this.tiles[r]={};var n="level-group:"+r,i=this.object.getObjectByName(n);i||((i=new r$3.Group).name=n,i.renderOrder=-2),this.object.add(i)}this.object.needsRender=!0}},e.prototype.setLuminance=function(e){this.luminance=e},e.prototype.getTileResources=function(e){for(var t,r=null!==(t=this.imageOptions.size)&&void 0!==t?t:2048,n=[],i=this.resource.length-1;i>=0;i--)this.resource[i].level<=e&&512*Math.pow(2,this.resource[i].level)>r&&n.unshift(this.resource[i]);return n},e.prototype.update=function(e,t,r){var n=this;if(!this.disposed){this.level=t;var i=(new r$3.PerspectiveCamera).copy(e);i.position.set(0,0,0),i.quaternion.premultiply(this.object.quaternion.clone().inverse()),i.updateMatrixWorld(!0),i.updateProjectionMatrix();for(var o=i.getWorldDirection(new r$3.Vector3),a=(new r$3.Frustum).setFromProjectionMatrix((new r$3.Matrix4).multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse)),s=this.getTileResources(t),c=function(e){if(e){for(var t=[],i=e.level,s=Math.pow(2,i),c=s*s,l=u.object.getObjectByName("level-group:"+i),f=0,h=yr;f<h.length;f++)for(var p=h[f],d=0;d<c;d++){var m=zr.getBox(i,p,d);a.intersectsBox(m)&&t.push(m)}t.sort((function(e,t){return e.getCenter(new r$3.Vector3).angleTo(o)-t.getCenter(new r$3.Vector3).angleTo(o)}));for(var g=[],v=0,y=t;v<y.length;v++){var b=(m=y[v]).sideCount,_=m.row,A=m.col,M=(p=m.type,"tile-level:".concat(i,"-face:").concat(p,"-row:").concat(_,"-col:").concat(A));if(!u.tiles[i][M]){var x=e[p],w=e.size,$=w/b,E=[$*A,$*_,$,$],T=t$3.__assign({key:"pano_tile.".concat(u.panoIndex,".").concat(p,".").concat(i,".").concat(_,".").concat(A),basisLoaderInitialized:zi.isInitialized(),cut:E},ti(u.imageOptions,["format"]));i<=1&&("jpg"===T.format||/\.jpg$/.test(x))?(1024!==$&&(T.size=1024),T.quality=70):512!==$&&(T.size=512);var S=u.imageOptions.transform?u.imageOptions.transform(x,T):ai(x,T),O=u.textureLoader.load(S,{magFilter:r$3.LinearFilter,minFilter:r$3.NearestFilter,preInit:!0}).then((function(e){return e.body})),N=null;if(u.luminance){var D=u.luminance[p],I=D.match(/\/cube_(\d+)\//),P=!!I&&Number(I[1]);if(!1!==P){var j=w/P,C=t$3.__assign(t$3.__assign({},T),{size:256,cut:[E[0]/j,E[1]/j,E[2]/j,E[3]/j],key:"pano_tile_luminance.".concat(u.panoIndex,".").concat(p,".").concat(i,".").concat(_,".").concat(A)}),L=u.imageOptions.transform?u.imageOptions.transform(D,C):ai(D,C);N=u.textureLoader.load(L,{format:r$3.LuminanceFormat,preInit:!0}).then((function(e){return e.body})).catch((function(){return null}))}}(k=u.tiles[i][M]=new zr(m,Promise.all([O,N]))).name=M,k.renderOrder=i,l.add(k)}u.tiles[i][M].activeTime=r,g.push(M)}for(var R=0,z=Object.keys(u.tiles[i]).sort((function(e,t){return n.tiles[i][t].activeTime-n.tiles[i][e].activeTime})).slice(Math.max(24,g.length));R<z.length;R++){M=z[R];var k=u.tiles[i][M];l.remove(k),k.dispose(),delete u.tiles[i][M],u.object.needsRender=!0}}},u=this,l=0,f=s;l<f.length;l++)c(f[l]);for(var h=0;h<this.tiles.length;h++)if(this.tiles[h]){var p=s.length>0&&h<=s[s.length-1].level;for(var d in this.tiles[h])this.tiles[h][d].visible!==p&&(this.tiles[h][d].visible=p,this.object.needsRender=!0)}}},e.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},e}(),Or=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Sr=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Lr=new r$3.BufferGeometry;Lr.setAttribute("position",new r$3.BufferAttribute(Or,3)),Lr.setIndex(new r$3.BufferAttribute(Sr,1));var kr=function(){function e(){this.material=new r$3.ShaderMaterial({vertexShader:"\n#if defined(USE_PANO_VIDEO)\nvarying vec3 worldPosition;\n#endif\nvoid main() {\n  vec4 transformed = vec4(position, 1.0);\n  #if defined(USE_PANO_VIDEO)\n  worldPosition = (modelMatrix * transformed).xyz;\n  #endif\n  gl_Position = projectionMatrix * modelViewMatrix * transformed;\n}\n",fragmentShader:"\nuniform vec2 size;\nuniform mat4 matrix;\nuniform float alpha;\nuniform sampler2D map;\n#if defined(USE_PANO_VIDEO)\nvarying vec3 worldPosition;\n#endif\n#include <common>\nvoid main() {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n  #if defined(USE_PANO_VIDEO)\n  vec3 cameraToVertex = worldPosition - cameraPosition;\n  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;\n  vec2 uv = vec2(\n    0.5 + mapCoods.x / mapCoods.z / size.x,\n    0.5 - mapCoods.y / mapCoods.z / size.y\n  );\n  vec4 videoColor = texture2D(map, uv);\n  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));\n  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));\n  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);\n  #endif\n}\n",uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh(Lr,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Vn({alpha:0})}return e.prototype.setMaterial=function(e){e?(this.material.uniforms.size.value=e.size,this.material.uniforms.matrix.value=e.matrix,this.material.uniforms.map.value=e.map,this.alphaMotion.set({alpha:e.alpha},500).catch(Qe),this.material.uniforms.alpha.value=e.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe));var t=null!==e;t!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=t,this.material.needsUpdate=!0,this.object.visible=null!==e)},e.prototype.updateTime=function(e){this.alphaMotion.ended||(this.alphaMotion.update(e),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},e.prototype.dispose=function(){this.material.dispose()},e}(),Cr=(new r$3.Matrix4).makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Pr=new r$3.Vector3(-1,1,1),_r=function(e){function t(r){var n,i,o,a,s,c,u,l=this,f=t.parseArgs(r);(l=e.call(this,f)||this).initAnimationed=!1,l.currentPanoIndex=f.initial[0],l.maxAccessibleDistance=f.maxAccessibleDistance,l.panoTapTriggerRadius=f.panoTapTriggerRadius,l.panoCircleMeshCreator=f.panoCircleMeshCreator,l.tileLevelForFov=f.tileLevelForFov;var h=l.model.getMaterial()||{},p=h.pano0,d=h.pano1;p&&(null==d?void 0:d.map)!==p.map&&(l.model.setMaterial({pano0:d}),p.map.dispose(),null===(n=p.luminanceMap)||void 0===n||n.dispose()),l.boundingMesh=l.generateBoundingMesh(),l.boundingMesh.setMaterial(l.model.getMaterial()||{}),l.boundingMesh.visible=!1,l.scene.add(l.boundingMesh),l.panoMeshes=[],l.updatePanoMeshes(),l.locationMotion=new Vn({count:0,distance:l.camera.pose.distance,modelAlpha:null!==(o=null===(i=l.model.getMaterial())||void 0===i?void 0:i.modelAlpha)&&void 0!==o?o:0,perspToOrtho:null!==(s=null===(a=l.model.getMaterial())||void 0===a?void 0:a.perspToOrtho)&&void 0!==s?s:0}),l.panoResources={},l.panoResources[l.locationMotion.keyframes[0].key=l.locationMotion.keyframes[1].key=Fe()]={panoIndex:l.currentPanoIndex,workCode:l.work.workCode,panoPicture:null!==(u=null===(c=l.model.getMaterial())||void 0===c?void 0:c.pano1)&&void 0!==u?u:null,position:l.camera.pose.offset.clone(),effect:"fly"};var m={allowHosts:l.work.allowHosts,networkSubscribe:l.networkSubscribe};return l.textureLoader=new bi(m),l.tiling=new br(m,l.imageOptions),l.scene.add(l.tiling.object),l.panoVideo=new kr,l.scene.add(l.panoVideo.object),l}return t$3.__extends(t,e),t.parseArgs=function(t){var r,n,i,o,a=e.parseArgs.call(this,t);return t$3.__assign(t$3.__assign({},a),{maxAccessibleDistance:null!==(r=t.maxAccessibleDistance)&&void 0!==r?r:5,panoTapTriggerRadius:null!==(n=t.panoTapTriggerRadius)&&void 0!==n?n:.5,panoCircleMeshCreator:null!==(i=t.panoCircleMeshCreator)&&void 0!==i?i:function(){return new dr},tileLevelForFov:null!==(o=t.tileLevelForFov)&&void 0!==o?o:function(e,t){var r,n=2*Math.atan(Math.tan(e/180*Math.PI/2)*(t.width/t.height))/Math.PI*180,i=Math.max(t.width/n,t.height/e),o=null!==(r=a.imageOptions.size)&&void 0!==r?r:2048;return o<8192&&i>18?4:o<4096&&i>14?3:o<2048&&i>10?2:o<1024&&i>6?1:0}})},t.initAnimationEndPose=function(t){var r=this.parseArgs(t);return e.initAnimationEndPose.call(this,r)},t.prototype.destroy=function(){var t,r,n=this;e.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach((function(e){n.helper.remove(e),e.dispose()})),this.panoMeshes.length=0),this.interiaMovement=!1;var i=this.videoTexture.image;i.pause(),i.oncanplay=function(){},i.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var o=null!==(t=this.model.getMaterial())&&void 0!==t?t:{},a=o.pano0,s=o.pano1,c=0,u=Object.keys(this.panoResources);c<u.length;c++){var l=u[c],f=this.panoResources[l];if(f.panoPicture){var h=f.panoPicture.map;h&&h!==(null==a?void 0:a.map)&&h!==(null==s?void 0:s.map)&&(h.dispose(),null===(r=f.panoPicture.luminanceMap)||void 0===r||r.dispose(),f.panoPicture=null)}delete this.panoResources[l]}},t.prototype.isReady=function(){return!0===this.locationMotion.ended&&e.prototype.isReady.call(this)},t.prototype.updateWork=function(e,t,r,n,i){var o=this;this.userAction=i,this.work=e,this.currentPanoIndex=t,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var a={},s=!0;this.boundingMesh&&(a=this.boundingMesh.getMaterial()||{},s=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=s,this.boundingMesh.setMaterial(a),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var c=0,u=this.panoMeshes;c<u.length;c++)u[c].visible=!1;return this.moveToPano(t,{effect:"fade",duration:n,longitude:r.longitude,latitude:r.latitude,fov:r.fov,moveEndCallback:function(){o.initAnimationed=!0},moveCancelCallback:function(){o.initAnimationed=!0}},i),!0},t.prototype.updateModel=function(e){this.model=e;var t={},r=!0;this.boundingMesh&&(t=this.boundingMesh.getMaterial()||{},r=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=r,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(t),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},t.prototype.updateTime=function(e,t){var r,n,i,o,a,s,c;if(!this.destroyed){var u={},l={},f=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),h=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]);if(!1===this.locationMotion.ended){this.locationMotion.update(e);var p=this.locationMotion.getKeyFrameSegment(e),d=p[0],m=p[1],g=this.panoResourceFromLocationMotionKeyframe(d),v=this.panoResourceFromLocationMotionKeyframe(m),y=(new r$3.Vector3).copy(g.position),b=(new r$3.Vector3).copy(v.position),_=this.locationMotion.value.count-m.value.count+1;u.modelAlpha=this.locationMotion.value.modelAlpha,u.perspToOrtho=jn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),u.useBlackTransition="instant"===v.effect,v.panoPicture&&(_<1?g.panoPicture&&(u.pano0=g.panoPicture):u.pano0=v.panoPicture,u.pano1=v.panoPicture),"fade"===v.effect&&(u.pano0&&g.panoPicture&&(u.pano0={map:u.pano0.map,luminanceMap:u.pano0.luminanceMap,matrix:g.panoPicture.matrix.clone().setPosition(v.position)}),y.copy(b)),u.progress=_,l.distance=this.locationMotion.value.distance,l.offset=new r$3.Vector3(y.x+(b.x-y.x)*_,y.y+(b.y-y.y)*_,y.z+(b.z-y.z)*_);for(var A=[],M=[],x=0,w=this.locationMotion.keyframes;x<w.length;x++){var $=w[x],E=$.key,T=$.progress;void 0!==E&&(A.push(E),T>=this.locationMotion.progress&&M.push(E))}for(var S=0,O=Object.keys(this.panoResources);S<O.length;S++){var N=O[S];if(!(M.indexOf(N)>=0)){var D=this.panoResources[N];if(D.panoPicture){var I=D.panoPicture.map;if(I){if(I===(null===(r=u.pano0)||void 0===r?void 0:r.map))continue;if(I===(null===(n=u.pano1)||void 0===n?void 0:n.map))continue;I.dispose(),null===(i=D.panoPicture.luminanceMap)||void 0===i||i.dispose(),D.panoPicture=null}}A.indexOf(N)>=0||delete this.panoResources[N]}}g.workCode===v.workCode?this.currentPanoIndex=_<.5?g.panoIndex:v.panoIndex:this.currentPanoIndex=v.panoIndex,this.emit("movingToPano",h.panoIndex,f.panoIndex,this.locationMotion.progress)}if(!1===this.cameraMotion.ended&&(this.cameraMotion.update(e),l.longitude=this.cameraMotion.value.longitude,l.latitude=this.cameraMotion.value.latitude,l.fov=this.cameraMotion.value.fov),!1===zn(u)&&(this.model.setMaterial(u),this.boundingMesh.setMaterial(u)),!1===zn(l)&&this.setCamera(l),this.camera.pose.distance>.1)for(var P=0;P<this.work.observers.length;P++)(R=this.panoMeshes[P])&&(R.visible=!1);else{var j=this.work.observers[this.currentPanoIndex];if(j){var C=j.visibleNodes.concat(this.currentPanoIndex),L=this.getForwardPanoIndexOrNot();for(P=0;P<this.work.observers.length;P++){var R,z=this.work.observers[P];if(R=this.panoMeshes[P])if(z.loadable||z.active)if(-1!==C.indexOf(P)){R.visible=!0;var k=R.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);R.setCurrent(L===P),R.setOpacity(k<.01?0:jn(1.5/k,0,1)),R.updateTime(e,t)}else R.visible=!1;else R.visible=!1}}}if(this.boundingMesh.visible=Boolean(null===(o=this.boundingMesh.getMaterial())||void 0===o?void 0:o.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position),!1!==this.tileLevelForFov&&this.initAnimationed){var B=h.panoIndex,U=this.work.observers[B];if(U)if(Ge(this.camera.position,U.position)){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance(null!==(a=U.images.luminance)&&void 0!==a?a:null),this.tiling.panoIndex!==B&&this.tiling.cleanup(),this.tiling.panoIndex=B,this.tiling.setResource(null!==(c=null===(s=U.images)||void 0===s?void 0:s.tiles)&&void 0!==c?c:[]),this.tiling.setRotation(U.quaternion),this.tiling.setPosition(U.position);var F=this.renderer.getSize(new r$3.Vector2);F.width*=this.scissor.width,F.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,F),e)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(e)}},t.prototype.render=function(t){var r=this.work.observers[this.currentPanoIndex];r&&r.video&&(this.needsRender=!0),e.prototype.render.call(this,t)},t.prototype.postProcessing=function(e,t){if(!this.destroyed)return this.effect||(this.effect=new gr(this.renderer)),this.effect.render(e,t)},t.prototype.getTargetPose=function(){var e=this.cameraMotion.getKeyFrameSegment(Ke())[1],t=this.locationMotion.getKeyFrameSegment(Ke())[1],r=this.panoResourceFromLocationMotionKeyframe(t),n=this.work.observers[r.panoIndex];return{longitude:e.value.longitude,latitude:e.value.latitude,fov:e.value.fov,offset:n?n.position.clone():this.camera.position.clone()}},t.prototype.moveToPano=function(e,t,r){var n,i,o,a=this,s=this.work.observers[e],c=t$3.__assign({key:"pano.".concat(e),basisLoaderInitialized:zi.isInitialized()},ti(this.imageOptions,["format","size","quality"])),u=null!==(n=this.imageOptions.transform)&&void 0!==n?n:ai,l={right:u(s.images.right,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".right")})),left:u(s.images.left,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".left")})),up:u(s.images.up,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".up")})),down:u(s.images.down,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".down")})),front:u(s.images.front,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".front")})),back:u(s.images.back,t$3.__assign(t$3.__assign({},c),{key:"".concat(c.key,".back")}))},f={key:"pano_luminance.".concat(e),basisLoaderInitialized:zi.isInitialized(),size:c.size?c.size/2:1024},h=this.enableIOSEDR&&s.images.luminance?{right:u(s.images.luminance.right,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".right")})),left:u(s.images.luminance.left,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".left")})),up:u(s.images.luminance.up,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".up")})),down:u(s.images.luminance.down,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".down")})),front:u(s.images.luminance.front,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".front")})),back:u(s.images.luminance.back,t$3.__assign(t$3.__assign({},f),{key:"".concat(f.key,".back")}))}:null,p="pano:"+Kn(l);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===p)return;var d=this.pendingTextureTask.panoIndex;null===(i=this.panoMeshes[d])||void 0===i||i.setProgress(0),this.emit("textureAbort",d,s),this.pendingTextureTask.onError(new Error("texture aborted"))}var m,g=this.model.getMaterial()||{},v=g.pano0,y=g.pano1;if(v&&v.map.name===p&&null!==v.luminanceMap===this.enableIOSEDR?m=v:(null==y?void 0:y.map.name)===p&&null!==y.luminanceMap===this.enableIOSEDR&&(m=y),m){var b={panoIndex:e,workCode:this.work.workCode,effect:null!==(o=t.effect)&&void 0!==o?o:"fly",panoPicture:{map:m.map,luminanceMap:m.luminanceMap,matrix:(new r$3.Matrix4).compose(s.position,s.quaternion,Pr)},position:s.position.clone()};this.doMoveToPano(e,b,t,r)}else this.pending=!0,this.pendingTextureTask={panoIndex:e,hash:p,onLoad:function(n,i){var o,c;if(a.pending=!1,a.destroyed)n.body.dispose();else{n.body.name=p,a.emit("panoLoaded",e);var u={panoIndex:e,workCode:a.work.workCode,effect:null!==(o=t.effect)&&void 0!==o?o:"fly",panoPicture:{map:n.body,luminanceMap:null!==(c=null==i?void 0:i.body)&&void 0!==c?c:null,matrix:(new r$3.Matrix4).compose(s.position,s.quaternion,Pr)},position:s.position.clone()};a.doMoveToPano(e,u,t,r)}},onError:function(r){a.pending=!1,t.moveCancelCallback&&t.moveCancelCallback(),a.emit("panoLoadError",r,e),a.emit("moveToPanoCanceled",e)}},Promise.all([this.textureLoader.loadCube(l,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,(function(t){var r,n;(null===(r=a.pendingTextureTask)||void 0===r?void 0:r.hash)===p&&(null===(n=a.panoMeshes[e])||void 0===n||n.setProgress(t)),a.emit("textureLoading",t,e,s)}),this.renderer),h?this.textureLoader.loadCube(h,{format:r$3.LuminanceFormat}).catch((function(){return null})):Promise.resolve(null)]).then((function(t){var r,n,i=t[0],o=t[1];(null===(r=a.pendingTextureTask)||void 0===r?void 0:r.hash)===p?(a.pendingTextureTask.onLoad(i,o),null===(n=a.panoMeshes[e])||void 0===n||n.setProgress(0),delete a.pendingTextureTask,a.emit("textureLoaded",e,s,i.meta)):(i.body.dispose(),null==o||o.body.dispose())})).catch((function(t){var r,n;(null===(r=a.pendingTextureTask)||void 0===r?void 0:r.hash)===p&&(a.pendingTextureTask.onError(t),null===(n=a.panoMeshes[e])||void 0===n||n.setProgress(0),delete a.pendingTextureTask,a.emit("textureError",t,e,s),a.emit("error",t))})),this.emit("textureStartLoad",e,s)},t.prototype.initAnimation=function(e,t,r,n){var i,o,a,s=this;if(!this.destroyed){var c=!1;this.pending=!1,this.userAction=n,this.moveToPano(e,{longitude:null!==(i=t.longitude)&&void 0!==i?i:this.defaultLongitude,latitude:jn(null!==(o=t.latitude)&&void 0!==o?o:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:jn(null!==(a=t.fov)&&void 0!==a?a:this.defaultFov,this.minFov,this.maxFov),duration:r,moveStartCallback:function(e,t){c=!0,s.emit("initAnimationWillStart",e,t,s.userAction)},moveEndCallback:function(e,t){s.emit("initAnimationEnded",e,t,s.userAction),s.initAnimationed=!0},moveCancelCallback:function(){var e={longitude:s.camera.pose.longitude,latitude:s.camera.pose.latitude,fov:s.camera.pose.fov,offset:s.camera.pose.offset.clone()};!1===c&&s.emit("initAnimationWillStart",s.currentPanoIndex,e,s.userAction),s.emit("initAnimationEnded",s.currentPanoIndex,e,s.userAction),s.initAnimationed=!0}},n)}},t.prototype.panoResourceFromLocationMotionKeyframe=function(e){return this.panoResources[e.key]},t.prototype.locationMotionKeyframesLength=function(e){for(var t=0,r=1;r<e.length;r++){var n=this.panoResourceFromLocationMotionKeyframe(e[r-1]).position,i=this.panoResourceFromLocationMotionKeyframe(e[r]).position;t+=n.distanceTo(i)*(e[r].value.count-e[r-1].value.count)}return t},t.prototype.updatePanoMeshes=function(e){void 0===e&&(e=!0);for(var t={},r=0,n=this.panoMeshes;r<n.length;r++)t[(s=n[r]).name]=s;this.panoMeshes.length=0;for(var i=0;i<this.work.observers.length;i++){var o="panoCircle_".concat(this.work.workCode,"_").concat(i),a=this.work.observers[i],s=void 0;if(t[o]?(s=t[o],delete t[o]):((s=this.panoCircleMeshCreator()).name=o,this.helper.add(s)),s.position.copy(a.standingPosition),e&&this.model.loaded&&this.model.bvhs.loaded){var c=new r$3.Vector3(0,-1,0),u=new r$3.Vector3(0,1,0).add(s.position),l=new r$3.Raycaster(u,c,0,1),f=this.model.intersectRaycaster(l)[0];f&&f.point.distanceTo(s.position)>.01&&s.position.copy(f.point)}this.panoMeshes[i]=s}for(var h=0,p=Object.keys(t);h<p.length;h++){var d=p[h];this.helper.remove(t[d]),t[d].dispose(),delete t[d]}},t.prototype.generateBoundingMesh=function(e){void 0===e&&(e=!1);for(var t=this.model.bounding.clone(),r=0,n=this.work.observers;r<n.length;r++){var i=n[r];t.expandByPoint(i.standingPosition),t.expandByPoint((new r$3.Vector3).fromArray([i.position.x,2*i.position.y-i.standingPosition.y,i.position.z]))}e&&t.expandByPoint(this.camera.position);var o=ht(t,new r$3.Vector3(1,0,1));return o.name="panorama_bounding",o},t.prototype.doMoveToPano=function(e,t,r,n){var i,o,a,s=this;void 0===r&&(r={}),this.userAction=n;var c,u,l,f=Ke(),h=Fe();if(this.tiling.cleanup(),this.panoResources[h]=t,this.locationMotion.ended){var p=this.locationMotion.getKeyFrameSegment(f);p[0];var d=p[1],m=this.locationMotion.value,g=this.panoResourceFromLocationMotionKeyframe(d).position,v=t.position;c=Math.max(g.distanceTo(v),1),u=[{key:d.key,progress:0,value:t$3.__assign(t$3.__assign({},m),{count:0})},{key:h,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],l=0}else{var y=this.locationMotion.getKeyFrameSegment(f),b=y[0],_=(d=y[1],m=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(b).position),A=(g=this.panoResourceFromLocationMotionKeyframe(d).position,v=t.position,d.value.count-m.count),M=Math.max(_.distanceTo(g),1)*A;c=M+Math.max(g.distanceTo(v),1),u=[{key:b.key,progress:0,value:t$3.__assign({},m)},{key:d.key,progress:M/c,value:d.value},{key:h,progress:1,value:{count:d.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var x=this.locationMotionKeyframesLength(this.locationMotion.keyframes),w=this.locationMotionKeyframesLength(u);l=this.locationMotion.getProgressVelocity(f)*x/w}var $=this.calculateMovingDuration(r.duration,c),E={longitude:r.longitude,latitude:r.latitude,fov:r.fov},T={longitude:null!==(i=E.longitude)&&void 0!==i?i:this.camera.pose.longitude,latitude:null!==(o=E.latitude)&&void 0!==o?o:this.camera.pose.latitude,fov:null!==(a=E.fov)&&void 0!==a?a:this.camera.pose.fov,offset:t.position.clone()};r.moveStartCallback&&r.moveStartCallback(e,T),this.emit("panoWillArrive",e,T,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(E,$).catch(Qe),this.locationMotion.setKeyFrames(u,$,l).then((function(){var t,i,o,a={longitude:s.camera.pose.longitude,latitude:s.camera.pose.latitude,fov:s.camera.pose.fov,offset:s.camera.pose.offset.clone()};r.moveEndCallback&&r.moveEndCallback(e,a),s.emit("panoArrived",e,a,n);var c=s.work.observers[s.currentPanoIndex];if(c&&c.video&&s.videoTexture&&s.videoTexture.image instanceof HTMLVideoElement){var u=Cr.clone().multiply(null!==(o=null===(i=null===(t=s.model.getMaterial())||void 0===t?void 0:t.pano1)||void 0===i?void 0:i.matrix)&&void 0!==o?o:new r$3.Matrix4).multiply(c.video.matrix),l={map:s.videoTexture,size:c.video.size,matrix:u,alpha:1},f=Fe(),h=s.videoTexture.image;h.setAttribute("uuid",f),(hr||(hr=new Promise((function(e){var t,r=document.createElement("video");r.muted=!0,r.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",r.addEventListener("timeupdate",(function n(){r.removeEventListener("timeupdate",n,!1),clearTimeout(t);var i=document.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");o?(o.drawImage(r,0,0,1,1),o.getImageData(0,0,1,1).data[3]>10?e(!0):e(!1)):e(!1)}),!1),r.addEventListener("canplay",(function e(){r.removeEventListener("canplay",e,!1),r.play()}),!1),t=window.setTimeout((function(){return e(!1)}),1e3)})))).then((function(e){e&&c.video&&h.getAttribute("uuid")===f&&(h.oncanplay=function(){h.oncanplay=Qe,h.play()},h.ontimeupdate=function(){h.currentTime>.5&&(h.ontimeupdate=Qe,s.panoVideo.setMaterial(l))},h.src=c.video.source)})).catch((function(){h.removeAttribute("uuid")}))}}),(function(){r.moveCancelCallback&&r.moveCancelCallback(),s.emit("moveToPanoCanceled",e)}))},t.prototype.getForwardPanoIndexOrNot=function(e){var t=this,r=this.camera.getWorldDirection(new r$3.Vector3),n=this.camera.position.clone(),i=this.work.observers[this.currentPanoIndex];if(!i)return null;var o=i.accessibleNodes.filter((function(e){if(e===t.currentPanoIndex)return!1;var r=t.work.observers[e],i=r.standingPosition.clone().sub(n);return 0!==i.length()&&!(i.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(r.loadable||r.active)})),a=(e?e.ray.direction.clone():r.clone()).setY(0);if(0===a.length())return null;for(var s=o.slice().sort((function(e,r){var i=t.work.observers[e].position.clone().setY(n.y),o=t.work.observers[r].position.clone().setY(n.y);return i.distanceTo(n)-o.distanceTo(n)})),c=0,u=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];c<u.length;c++)for(var l=u[c],f=0,h=s;f<h.length;f++){var p=h[f],d=this.work.observers[p].position.clone().setY(n.y).sub(n);if(0!==d.length()&&a.angleTo(d)<l)return p}return null},t.prototype.onTapGesture=function(e){var t=this,r=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","tap",r,!0)){var n=this.relativeClientPosition(e.center),i=new r$3.Raycaster;if(i.setFromCamera(n,this.camera),!this.emit("wantsTapGesture",i,n,!0)){this.emit("gesture","tap",r,!0),this.emit("tapGesture",i,n,!0),this.interiaMovement=!1;var o=this.camera.getWorldDirection(new r$3.Vector3).setY(0),a=null,s=this.work.observers[this.currentPanoIndex];if(s){var c=s.accessibleNodes.filter((function(e){if(e===t.currentPanoIndex)return!1;var r=t.work.observers[e];return!(r.position.distanceTo(t.camera.position)>t.maxAccessibleDistance)&&(r.loadable||r.active)})),u=this.model.intersectRaycaster(i)[0];if(u){var l=En(c,(function(e){var r=t.work.observers[e].standingPosition.clone();return r.clone().sub(t.camera.position).setY(0).angleTo(o)>Math.PI/2?1/0:r.distanceTo(u.point)}),!0),f=l[0];l[1]<this.panoTapTriggerRadius&&(a=f)}Re(a)&&(a=this.getForwardPanoIndexOrNot(i));for(var h=0,p=this.locationMotion.keyframes;h<p.length;h++){var d=p[h],m=this.panoResourceFromLocationMotionKeyframe(d);if(!(d.progress<this.locationMotion.progress)&&m.panoIndex===a){a=null;break}}if(this.emit("panoSelected",a),Re(a))!0===this.locationMotion.ended&&this.cameraBounce();else{var g=this.work.observers[a];if(g.active){for(var v={},y=Math.PI/6,b=Math.PI/12,_=new r$3.Vector3(0,1,0),A=g.position.clone().setY(0).sub(s.position.clone().setY(0)).normalize(),M=A.clone().applyAxisAngle(_,y),x=A.clone().applyAxisAngle(_,-y),w=[],$=[],E=[],T=0,S=g.accessibleNodes;T<S.length;T++)if((f=S[T])!==this.currentPanoIndex&&f!==a){var O=this.work.observers[f].position.clone().sub(g.position).setY(0);A.angleTo(O)<y?E.push(O):M.angleTo(O)<y?w.push(O):x.angleTo(O)<y&&$.push(O)}var N=(E.length>0?E:t$3.__spreadArray(t$3.__spreadArray([],w,!0),$,!0)).slice().sort((function(e,t){return e.angleTo(A)-t.angleTo(A)}))[0];N&&N.angleTo(o)>b&&(v.longitude=Math.atan2(-N.x,-N.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(v.latitude=jn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(v.fov=this.defaultFov),this.emit("wantsMoveToPano",a,v,!0)}else this.panoMeshes[a]&&(this.panoMeshes[a].setDisabled(!1),this.panoMeshes[a].setLoading(!0))}}}}},t}(Jn),Br=function(e,t){var r=void 0!==e?e:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{};var n=function(){return/Android/i.test(t.userAgent)||/iPhone|iPad|iPod/i.test(t.userAgent)},i=function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]},o=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},a=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(r,n){
/**
			         * @license
			         * cardboard-vr-display
			         * Copyright (c) 2015-2017 Google
			         * Licensed under the Apache License, Version 2.0 (the "License");
			         * you may not use this file except in compliance with the License.
			         * You may obtain a copy of the License at
			         *
			         * http://www.apache.org/licenses/LICENSE-2.0
			         *
			         * Unless required by applicable law or agreed to in writing, software
			         * distributed under the License is distributed on an "AS IS" BASIS,
			         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
			         * See the License for the specific language governing permissions and
			         * limitations under the License.
			         */
/**
			         * @license
			         * gl-preserve-state
			         * Copyright (c) 2016, Brandon Jones.
			         *
			         * Permission is hereby granted, free of charge, to any person obtaining a copy
			         * of this software and associated documentation files (the "Software"), to deal
			         * in the Software without restriction, including without limitation the rights
			         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
			         * copies of the Software, and to permit persons to whom the Software is
			         * furnished to do so, subject to the following conditions:
			         *
			         * The above copyright notice and this permission notice shall be included in
			         * all copies or substantial portions of the Software.
			         *
			         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
			         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
			         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
			         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
			         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
			         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
			         * THE SOFTWARE.
			         */
/**
			         * @license
			         * webvr-polyfill-dpdb
			         * Copyright (c) 2015-2017 Google
			         * Licensed under the Apache License, Version 2.0 (the "License");
			         * you may not use this file except in compliance with the License.
			         * You may obtain a copy of the License at
			         *
			         * http://www.apache.org/licenses/LICENSE-2.0
			         *
			         * Unless required by applicable law or agreed to in writing, software
			         * distributed under the License is distributed on an "AS IS" BASIS,
			         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
			         * See the License for the specific language governing permissions and
			         * limitations under the License.
			         */
/**
			         * @license
			         * nosleep.js
			         * Copyright (c) 2017, Rich Tibbett
			         *
			         * Permission is hereby granted, free of charge, to any person obtaining a copy
			         * of this software and associated documentation files (the "Software"), to deal
			         * in the Software without restriction, including without limitation the rights
			         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
			         * copies of the Software, and to permit persons to whom the Software is
			         * furnished to do so, subject to the following conditions:
			         *
			         * The above copyright notice and this permission notice shall be included in
			         * all copies or substantial portions of the Software.
			         *
			         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
			         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
			         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
			         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
			         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
			         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
			         * THE SOFTWARE.
			         */
!function(e,t){r.exports=t()}(0,(function(){var r,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,r){return e+(t-e)*r},a=function(){var e=/iPad|iPhone|iPod/.test(t.platform);return function(){return e}}(),s=function(){var e=-1!==t.userAgent.indexOf("Version")&&-1!==t.userAgent.indexOf("Android")&&-1!==t.userAgent.indexOf("Chrome");return function(){return e}}(),c=function(){var e=/^((?!chrome|android).)*safari/i.test(t.userAgent);return function(){return e}}(),u=function(){var e=-1!==t.userAgent.indexOf("Firefox")&&-1!==t.userAgent.indexOf("Android");return function(){return e}}(),l=function(){var e=t.userAgent.match(/.*Chrome\/([0-9]+)/),r=e?parseInt(e[1],10):null;return function(){return r}}(),f=function(){var e;return e=a()&&c()&&-1!==t.userAgent.indexOf("13_4"),function(){return e}}(),h=function(){var e=!1;if(65===l()){var r=t.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(r){var n=r[1].split("."),o=i(n,4);o[0],o[1];var a=o[2],s=o[3];e=3325===parseInt(a,10)&&parseInt(s,10)<148}}return function(){return e}}(),p=function(){var e=-1!==t.userAgent.indexOf("R7 Build");return function(){return e}}(),d=function(){var t=90==e.orientation||-90==e.orientation;return p()?!t:t},m=function(){return Math.max(e.screen.width,e.screen.height)*e.devicePixelRatio},g=function(){return Math.min(e.screen.width,e.screen.height)*e.devicePixelRatio},v=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},y=function(e,t,r,n){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var a=e.createProgram();for(var s in e.attachShader(a,i),e.attachShader(a,o),n)e.bindAttribLocation(a,n[s],s);return e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),a},b=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",o=0;o<n;o++)r[i=e.getActiveUniform(t,o).name.replace("[0]","")]=e.getUniformLocation(t,i);return r},_=function(){var r,n=!1;return r=t.userAgent||t.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(n=!0),n},A=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},M=function(t){if(a()){var r=t.style.width,n=t.style.height;t.style.width=parseInt(r)+1+"px",t.style.height=parseInt(n)+"px",setTimeout((function(){t.style.width=r,t.style.height=n}),100)}e.canvas=t},x=function(){var e=Math.PI/180,t=.25*Math.PI;function r(r,n,i,o){var a=Math.tan(n?n.upDegrees*e:t),s=Math.tan(n?n.downDegrees*e:t),c=Math.tan(n?n.leftDegrees*e:t),u=Math.tan(n?n.rightDegrees*e:t),l=2/(c+u),f=2/(a+s);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-(c-u)*l*.5,r[9]=(a-s)*f*.5,r[10]=o/(i-o),r[11]=-1,r[12]=0,r[13]=0,r[14]=o*i/(i-o),r[15]=0,r}var n=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);function o(e,t,o,a,s,c){r(e,a||null,c.depthNear,c.depthFar),function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,c=i+i,u=o+o,l=n*s,f=n*c,h=n*u,p=i*c,d=i*u,m=o*u,g=a*s,v=a*c,y=a*u;e[0]=1-(p+m),e[1]=f+y,e[2]=h-v,e[3]=0,e[4]=f-y,e[5]=1-(l+m),e[6]=d+g,e[7]=0,e[8]=h+v,e[9]=d-g,e[10]=1-(l+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1}(t,o.orientation||n,o.position||i),s&&function(e,t,r){var n,i,o,a,s,c,u,l,f,h,p,d,m=r[0],g=r[1],v=r[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=c,e[6]=u,e[7]=l,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*m+s*g+f*v+t[12],e[13]=i*m+c*g+h*v+t[13],e[14]=o*m+u*g+p*v+t[14],e[15]=a*m+l*g+d*v+t[15])}(t,t,s),function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],m=t[13],g=t[14],v=t[15],y=r*s-n*a,b=r*c-i*a,_=r*u-o*a,A=n*c-i*s,M=n*u-o*s,x=i*u-o*c,w=l*m-f*d,$=l*g-h*d,E=l*v-p*d,T=f*g-h*m,S=f*v-p*m,O=h*v-p*g,N=y*O-b*S+_*T+A*E-M*$+x*w;N&&(N=1/N,e[0]=(s*O-c*S+u*T)*N,e[1]=(i*S-n*O-o*T)*N,e[2]=(m*x-g*M+v*A)*N,e[3]=(h*M-f*x-p*A)*N,e[4]=(c*E-a*O-u*$)*N,e[5]=(r*O-i*E+o*$)*N,e[6]=(g*_-d*x-v*b)*N,e[7]=(l*x-h*_+p*b)*N,e[8]=(a*S-s*E+u*w)*N,e[9]=(n*E-r*S-o*w)*N,e[10]=(d*M-m*_+v*y)*N,e[11]=(f*_-l*M-p*y)*N,e[12]=(s*$-a*T-c*w)*N,e[13]=(r*T-n*$+i*w)*N,e[14]=(m*b-d*A-g*y)*N,e[15]=(l*A-f*b+h*y)*N)}(t,t)}return function(e,t,r){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,o(e.leftProjectionMatrix,e.leftViewMatrix,t,r._getFieldOfView("left"),r._getEyeOffset("left"),r),o(e.rightProjectionMatrix,e.rightViewMatrix,t,r._getFieldOfView("right"),r._getEyeOffset("right"),r),0))}}(),w=function(e){var t,r=e.indexOf("://");t=-1!==r?r+3:0;var n=e.indexOf("/",t);return-1===n&&(n=e.length),e.substring(0,n)},$=(r={},function(e,t){void 0===r[e]&&(console.warn("webvr-polyfill: "+t),r[e]=!0)}),E=function(e,t){$(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))};var T=function(e,t,r){if(t){for(var n=[],i=null,o=0;o<t.length;++o)switch(a=t[o]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((c=t[++o])<e.TEXTURE0||c>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(c),n.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(a))}for(r(e),o=0;o<t.length;++o){var a=t[o],s=n[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,s);break;case e.COLOR_CLEAR_VALUE:e.clearColor(s[0],s[1],s[2],s[3]);break;case e.COLOR_WRITEMASK:e.colorMask(s[0],s[1],s[2],s[3]);break;case e.CURRENT_PROGRAM:e.useProgram(s);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,s);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,s);break;case e.TEXTURE_BINDING_2D:if((c=t[++o])<e.TEXTURE0||c>e.TEXTURE31)break;e.activeTexture(c),e.bindTexture(e.TEXTURE_2D,s);break;case e.TEXTURE_BINDING_CUBE_MAP:var c;if((c=t[++o])<e.TEXTURE0||c>e.TEXTURE31)break;e.activeTexture(c),e.bindTexture(e.TEXTURE_CUBE_MAP,s);break;case e.VIEWPORT:e.viewport(s[0],s[1],s[2],s[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:s?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}i&&e.activeTexture(i)}}else r(e)},S=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),O=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function N(e,t,r,n){this.gl=e,this.cardboardUI=t,this.bufferScale=r,this.dirtySubmitFrameBindings=n,this.ctxAttribs=e.getContextAttributes(),this.instanceExt=e.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,a()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=y(e,S,O,this.attribs),this.uniforms=b(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}N.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},N.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];T(e,r,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},N.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;a()||(t.width=m()*this.bufferScale,t.height=g()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,n){e.lastBoundFramebuffer=n||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,n,i,o){e.colorMask[0]=t,e.colorMask[1]=n,e.colorMask[2]=i,e.colorMask[3]=o,e.realColorMask.call(r,t,n,i,o)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,n,i,o){e.clearColor[0]=t,e.clearColor[1]=n,e.clearColor[2]=i,e.clearColor[3]=o,e.realClearColor.call(r,t,n,i,o)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,n,i,o){e.viewport[0]=t,e.viewport[1]=n,e.viewport[2]=i,e.viewport[3]=o,e.realViewport.call(r,t,n,i,o)},this.isPatched=!0,M(t)}},N.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;a()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){M(t)}),1)}},N.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},N.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(this.dirtySubmitFrameBindings||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),T(e,r,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);var r=0,n=0;t.instanceExt&&(r=e.getVertexAttrib(t.attribs.position,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),n=e.getVertexAttrib(t.attribs.texCoord,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||a())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),t.instanceExt&&(0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,0),0!=n&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,0)),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor),t.instanceExt&&(0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,r),0!=n&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,n))})),a()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},N.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,n=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];T(t,n,(function(t){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),r.indexCount=i.length}}))},N.prototype.computeMeshVertices_=function(e,t,r){for(var n=new Float32Array(2*e*t*5),i=r.getLeftEyeVisibleTanAngles(),a=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(a),c=0,u=0;u<2;u++){for(var l=0;l<t;l++)for(var f=0;f<e;f++,c++){var h=f/(e-1),p=l/(t-1),d=h,m=p,g=o(i[0],i[2],h),v=o(i[3],i[1],p),y=Math.sqrt(g*g+v*v),b=r.distortion.distortInverse(y),_=v*b/y;h=(g*b/y-a[0])/(a[2]-a[0]),p=(_-a[3])/(a[1]-a[3]),h=2*(s.x+h*s.width-.5),p=2*(s.y+p*s.height-.5),n[5*c+0]=h,n[5*c+1]=p,n[5*c+2]=d,n[5*c+3]=m,n[5*c+4]=u}var A=i[2]-i[0];i[0]=-(A+i[0]),i[2]=A-i[2],A=a[2]-a[0],a[0]=-(A+a[0]),a[2]=A-a[2],s.x=1-(s.x+s.width)}return n},N.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,i=t/2,o=0,a=0,s=0;s<2;s++)for(var c=0;c<t;c++)for(var u=0;u<e;u++,o++)0!=u&&0!=c&&(u<=n==c<=i?(r[a++]=o,r[a++]=o-e-1,r[a++]=o-e,r[a++]=o-e-1,r[a++]=o,r[a++]=o-1):(r[a++]=o-1,r[a++]=o-e,r[a++]=o,r[a++]=o-e,r[a++]=o-1,r[a++]=o-e-1));return r},N.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r};var D=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),I=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),P=Math.PI/180,j=.3125,C=28;function L(e){this.gl=e,this.attribs={position:0},this.program=y(e,D,I,this.attribs),this.uniforms=b(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function R(e){this.coefficients=e}L.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},L.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?e(n):n.clientX<42&&n.clientY<42&&t(n)},r.addEventListener("click",this.listener,!1)},L.prototype.onResize=function(){var t=this.gl,r=this,n=[t.ARRAY_BUFFER_BINDING];T(t,n,(function(t){var n=[],i=t.drawingBufferWidth/2,o=Math.max(screen.width,screen.height)*e.devicePixelRatio,a=t.drawingBufferWidth/o*e.devicePixelRatio,s=4*a/2,c=42*a,u=C*a/2,l=14*a;function f(e,t){var r=(90-e)*P,o=Math.cos(r),a=Math.sin(r);n.push(j*o*u+i,j*a*u+u),n.push(t*o*u+i,t*a*u+u)}n.push(i-s,c),n.push(i-s,t.drawingBufferHeight),n.push(i+s,c),n.push(i+s,t.drawingBufferHeight),r.gearOffset=n.length/2;for(var h=0;h<=6;h++){var p=60*h;f(p,1),f(p+12,1),f(p+20,.75),f(p+40,.75),f(p+48,1)}function d(e,r){n.push(l+e,t.drawingBufferHeight-l-r)}r.gearVertexCount=n.length/2-r.gearOffset,r.arrowOffset=n.length/2;var m=s/Math.sin(45*P);d(0,u),d(u,0),d(u+m,m),d(m,u+m),d(m,u-m),d(0,u),d(u,2*u),d(u+m,2*u-m),d(m,u-m),d(0,u),d(m,u-s),d(C*a,u-s),d(m,u+s),d(C*a,u+s),r.arrowVertexCount=n.length/2-r.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)}))},L.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];T(e,r,(function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()}))},L.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),function(e,t,r,n,i,o,a){var s=1/(t-r),c=1/(n-i),u=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*c,e[14]=(a+o)*u,e[15]=1}(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},R.prototype.distortInverse=function(e){for(var t=0,r=1,n=e-this.distort(t);Math.abs(r-t)>1e-4;){var i=e-this.distort(r),o=r-i*((r-t)/(i-n));t=r,r=o,n=i}return r},R.prototype.distort=function(e){for(var t=e*e,r=0,n=0;n<this.coefficients.length;n++)r=t*(r+this.coefficients[n]);return(r+1)*e};var z=Math.PI/180,k=180/Math.PI,B=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0};B.prototype={constructor:B,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*n-a*r,u=s*r+a*t-i*n,l=s*n+i*r-o*t,f=-i*t-o*r-a*n;return this.x=c*s+f*-i+u*-a-l*-o,this.y=u*s+f*-o+l*-i-c*-a,this.z=l*s+f*-a+c*-o-u*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this}};var U,F,G=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1};function V(e){this.width=e.width||m(),this.height=e.height||g(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}G.prototype={constructor:G,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),c=Math.sin(r/2);return this.x=a*i*o+n*s*c,this.y=n*s*o-a*i*c,this.z=n*i*c+a*s*o,this.w=n*i*o-a*s*c,this},setFromEulerYXZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),c=Math.sin(r/2);return this.x=a*i*o+n*s*c,this.y=n*s*o-a*i*c,this.z=n*i*c-a*s*o,this.w=n*i*o+a*s*c,this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,i=e.z,o=e.w,a=t.x,s=t.y,c=t.z,u=t.w;return this.x=r*u+o*a+n*c-i*s,this.y=n*u+o*s+i*a-r*c,this.z=i*u+o*c+r*s-n*a,this.w=o*u-r*a-n*s-i*c,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,n=this.y,i=this.z,o=this.w,a=o*e.w+r*e.x+n*e.y+i*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=r,this.y=n,this.z=i,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var u=Math.sin((1-t)*s)/c,l=Math.sin(t*s)/c;return this.w=o*u+this.w*l,this.x=r*u+this.x*l,this.y=n*u+this.y*l,this.z=i*u+this.z*l,this},setFromUnitVectors:(1e-6,function(e,t){return void 0===U&&(U=new B),(F=e.dot(t)+1)<1e-6?(F=0,Math.abs(e.x)>Math.abs(e.z)?U.set(-e.y,e.x,0):U.set(0,-e.z,e.y)):U.crossVectors(e,t),this.x=U.x,this.y=U.y,this.z=U.z,this.w=F,this.normalize(),this})};var H=new V({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),W=new V({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Q={CardboardV1:new q({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new q({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Y(e,t){this.viewer=Q.CardboardV2,this.updateDeviceParams(e),this.distortion=new R(this.viewer.distortionCoefficients);for(var r=0;r<t.length;r++){var n=t[r];Q[n.id]=new q(n)}}function q(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}Y.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},Y.prototype.getDevice=function(){return this.device},Y.prototype.setViewer=function(e){this.viewer=e,this.distortion=new R(this.viewer.distortionCoefficients)},Y.prototype.determineDevice_=function(e){if(!e)return a()?(console.warn("Using fallback iOS device measurements."),W):(console.warn("Using fallback Android device measurements."),H);var t=.0254,r=t/e.xdpi,n=t/e.ydpi;return new V({widthMeters:r*m(),heightMeters:n*g(),bevelMeters:.001*e.bevelMm})},Y.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-a,c=k*Math.atan(r.distort(i/n)),u=k*Math.atan(r.distort(o/n)),l=k*Math.atan(r.distort(a/n)),f=k*Math.atan(r.distort(s/n));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(u,e.fov),downDegrees:Math.min(l,e.fov),upDegrees:Math.min(f,e.fov)}},Y.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=Math.tan(-z*e.fov),i=Math.tan(z*e.fov),o=Math.tan(z*e.fov),a=Math.tan(-z*e.fov),s=t.widthMeters/4,c=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-c,l=e.interLensDistance/2-s,f=-u,h=e.screenLensDistance,p=r.distort((l-s)/h),d=r.distort((f+c)/h),m=r.distort((l+s)/h),g=r.distort((f-c)/h),v=new Float32Array(4);return v[0]=Math.max(n,p),v[1]=Math.min(i,d),v[2]=Math.min(o,m),v[3]=Math.max(a,g),v},Y.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-z*e.fov)),o=r.distortInverse(Math.tan(z*e.fov)),a=r.distortInverse(Math.tan(z*e.fov)),s=r.distortInverse(Math.tan(-z*e.fov)),c=t.widthMeters/4,u=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-u,f=e.interLensDistance/2-c,h=-l,p=e.screenLensDistance,d=(f-c)/p,m=(h+u)/p,g=(f+c)/p,v=(h-u)/p;return n[0]=Math.max(i,d),n[1]=Math.min(o,m),n[2]=Math.min(a,g),n[3]=Math.max(s,v),n},Y.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,n=t.screenLensDistance,i=(r.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-r.bevelMeters,a=(e[0]*n+i)/r.widthMeters,s=(e[1]*n+o)/r.heightMeters,c=(e[2]*n+i)/r.widthMeters,u=(e[3]*n+o)/r.heightMeters;return{x:a,y:u,width:c-a,height:s-u}},Y.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Y.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},Y.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:k*Math.atan(e.outerDist),rightDegrees:k*Math.atan(e.innerDist),downDegrees:k*Math.atan(e.bottomDist),upDegrees:k*Math.atan(e.topDist)}},Y.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,n=t.screenLensDistance,i=r.widthMeters/n,o=r.heightMeters/n,a=r.width/i,s=r.height/o,c=Math.round((e.eyePosX-e.outerDist)*a),u=Math.round((e.eyePosY-e.bottomDist)*s);return{x:c,y:u,width:Math.round((e.eyePosX+e.innerDist)*a)-c,height:Math.round((e.eyePosY+e.topDist)*s)-u}},Y.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=e.interLensDistance/2/n,o=t.widthMeters/n,a=t.heightMeters/n,s=o/2-i,c=(e.baselineLensDistance-t.bevelMeters)/n,u=e.fov,l=r.distortInverse(Math.tan(z*u)),f=Math.min(s,l),h=Math.min(i,l),p=Math.min(c,l);return{outerDist:f,innerDist:h,topDist:Math.min(a-c,l),bottomDist:p,eyePosX:s,eyePosY:c}},Y.Viewers=Q;var K={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function X(e,t){if(this.dpdb=K,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,n=this;r.open("GET",e,!0),r.addEventListener("load",(function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),r.send()}}function Z(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function J(e,t){this.set(e,t)}function ee(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new J,this.currentGyroMeasurement=new J,this.previousGyroMeasurement=new J,a()?this.filterQ=new G(-1,0,0,1):this.filterQ=new G(1,0,0,1),this.previousFilterQ=new G,this.previousFilterQ.copy(this.filterQ),this.accelQ=new G,this.isOrientationInitialized=!1,this.estimatedGravity=new B,this.measuredGravity=new B,this.gyroIntegralQ=new G}function te(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new G,this.previousTimestampS=null,this.deltaQ=new G,this.outQ=new G}function re(t,r,n,i){this.yawOnly=n,this.accelerometer=new B,this.gyroscope=new B,this.filter=new ee(t,i),this.posePredictor=new te(r,i),this.isFirefoxAndroid=u(),this.isIOS=a();var o=l();this.isDeviceMotionInRadians=!this.isIOS&&o&&o<66,this.isWithoutDeviceMotion=h()||f(),this.filterToWorldQ=new G,a()?this.filterToWorldQ.setFromAxisAngle(new B(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new B(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new G,this.worldToScreenQ=new G,this.originalPoseAdjustQ=new G,this.originalPoseAdjustQ.setFromAxisAngle(new B(0,0,1),-e.orientation*Math.PI/180),this.setScreenTransform_(),d()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new G,this.orientationOut_=new Float32Array(4),this.start()}X.prototype.getDeviceParams=function(){return this.deviceParams},X.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},X.prototype.calcDeviceParams_=function(){var r=this.dpdb;if(!r)return console.error("DPDB not available."),null;if(1!=r.format)return console.error("DPDB has unexpected format version."),null;if(!r.devices||!r.devices.length)return console.error("DPDB does not have a devices section."),null;var n=t.userAgent||t.vendor||e.opera,i=m(),o=g();if(!r.devices)return console.error("DPDB has no devices section."),null;for(var s=0;s<r.devices.length;s++){var c=r.devices[s];if(c.rules)if("ios"==c.type||"android"==c.type){if(a()==("ios"==c.type)){for(var u=!1,l=0;l<c.rules.length;l++){var f=c.rules[l];if(this.ruleMatches_(f,n,i,o)){u=!0;break}}if(u)return new Z({xdpi:c.dpi[0]||c.dpi,ydpi:c.dpi[1]||c.dpi,bevelMm:c.bw})}}else console.warn("Device["+s+"] has invalid type.");else console.warn("Device["+s+"] has no rules section.")}return console.warn("No DPDB device match."),null},X.prototype.ruleMatches_=function(e,t,r,n){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],o=e.res[1];if(Math.min(r,n)!=Math.min(i,o)||Math.max(r,n)!=Math.max(i,o))return!1}return!0},J.prototype.set=function(e,t){this.sample=e,this.timestampS=t},J.prototype.copy=function(e){this.set(e.sample,e.timestampS)},ee.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ee.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t),function(e){return!(isNaN(e)||e<=.001||e>1)}(t-this.previousGyroMeasurement.timestampS)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ee.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new G;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new G;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",k*function(e){return e.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(e.w)}(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new G;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ee.prototype.getOrientation=function(){return this.filterQ},ee.prototype.accelToQuaternion_=function(e){var t=new B;t.copy(e),t.normalize();var r=new G;return r.setFromUnitVectors(new B(0,0,-1),t),r.inverse(),r},ee.prototype.gyroToQuaternionDelta_=function(e,t){var r=new G,n=new B;return n.copy(e),n.normalize(),r.setFromAxisAngle(n,e.length()*t),r},te.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var n=new B;n.copy(t),n.normalize();var i=t.length();if(i<20*z)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(k*i).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var o=i*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},re.prototype.getPosition=function(){return null},re.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var t=(new G).setFromAxisAngle(new B(0,0,-1),0),r=new G;return-90===e.orientation?r.setFromAxisAngle(new B(0,1,0),Math.PI/-2):r.setFromAxisAngle(new B(0,1,0),Math.PI/2),t.multiply(r)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((r=new G).setFromAxisAngle(new B(1,0,0),-Math.PI/2),r),t=this._deviceOrientationQ,(n=new G).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.orientationOut_[0]=n.x,this.orientationOut_[1]=n.y,this.orientationOut_[2]=n.z,this.orientationOut_[3]=n.w,this.orientationOut_;var r,n,i=this.filter.getOrientation();return t=this.posePredictor.getPrediction(i,this.gyroscope,this.previousTimestampS),(n=new G).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.orientationOut_[0]=n.x,this.orientationOut_[1]=n.y,this.orientationOut_[2]=n.z,this.orientationOut_[3]=n.w,this.orientationOut_},re.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),d()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},re.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new G;var t=e.alpha,r=e.beta,n=e.gamma;t=(t||0)*Math.PI/180,r=(r||0)*Math.PI/180,n=(n||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(r,t,-n)},re.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},re.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,n=e.timeStamp/1e3,i=n-this.previousTimestampS;return i<0?($("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=n)):i<=.001||i>1?($("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=n)):(this.accelerometer.set(-t.x,-t.y,-t.z),r&&(p()?this.gyroscope.set(-r.beta,r.alpha,r.gamma):this.gyroscope.set(r.alpha,r.beta,r.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,n)),this.filter.addAccelMeasurement(this.accelerometer,n),void(this.previousTimestampS=n))},re.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},re.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},re.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),e.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new B(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new B(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},re.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),a()&&function(){var t=e.self!==e.top,r=w(document.referrer),n=w(e.location.href);return t&&r!==n}()&&e.addEventListener("message",this.onMessageCallback_),e.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?e.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):e.addEventListener("devicemotion",this.onDeviceMotionCallback_)},re.prototype.stop=function(){e.removeEventListener("devicemotion",this.onDeviceMotionCallback_),e.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),e.removeEventListener("orientationchange",this.onOrientationChangeCallback_),e.removeEventListener("message",this.onMessageCallback_)};var ne=new B(1,0,0),ie=new B(0,0,1),oe=new G;oe.setFromAxisAngle(ne,-Math.PI/2),oe.multiply((new G).setFromAxisAngle(ie,Math.PI/2));var ae=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new G,this._outQ=new G,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return n(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new re(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(oe),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function se(){this.loadIcon_();var e=document.createElement("div");(o=e.style).position="fixed",o.top=0,o.right=0,o.bottom=0,o.left=0,o.backgroundColor="gray",o.fontFamily="sans-serif",o.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(o=t.style).marginLeft="25%",o.marginTop="25%",o.width="50%",e.appendChild(t);var r=document.createElement("div");(o=r.style).textAlign="center",o.fontSize="16px",o.lineHeight="24px",o.margin="24px 25%",o.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var n=document.createElement("div");(o=n.style).backgroundColor="#CFD8DC",o.position="fixed",o.bottom=0,o.width="100%",o.height="48px",o.padding="14px 24px",o.boxSizing="border-box",o.color="#656A6B",e.appendChild(n);var i=document.createElement("div");i.style.float="left",i.innerHTML="No Cardboard viewer?";var o,a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(o=a.style).float="right",o.fontWeight=600,o.textTransform="uppercase",o.borderLeft="1px solid gray",o.paddingLeft="24px",o.textDecoration="none",o.color="#656A6B",n.appendChild(i),n.appendChild(a),this.overlay=e,this.text=r,this.hide()}se.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;d()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},se.prototype.hide=function(){this.overlay.style.display="none"},se.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},se.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},se.prototype.update=function(){this.disableShowTemporarily(),!d()&&_()?this.show():this.hide()},se.prototype.loadIcon_=function(){this.icon=function(e,t){return"data:"+e+","+encodeURIComponent(t)}("image/svg+xml","<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")};var ce="WEBVR_CARDBOARD_VIEWER";function ue(e){try{this.selectedKey=localStorage.getItem(ce)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(Y.Viewers),this.root=null,this.onChangeCallbacks_=[]}ue.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},ue.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},ue.prototype.getCurrentViewer=function(){return Y.Viewers[this.selectedKey]},ue.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},ue.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},ue.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},ue.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Y.Viewers[this.selectedKey]){this.fireOnChange_(Y.Viewers[this.selectedKey]);try{localStorage.setItem(ce,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},ue.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div");(i=r.style).position="fixed",i.left=0,i.top=0,i.width="100%",i.height="100%",i.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var n=document.createElement("div"),i=n.style;for(var o in i.boxSizing="border-box",i.position="fixed",i.top="24px",i.left="50%",i.marginLeft="-140px",i.width="280px",i.padding="24px",i.overflow="hidden",i.background="#fafafa",i.fontFamily="'Roboto', sans-serif",i.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer")),e)n.appendChild(this.createChoice_(o,e[o].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(n),t},ue.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},ue.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,r.appendChild(n),r.appendChild(i),r},ue.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",t),r};var le=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(r,n){!function(e,t){r.exports=t()}(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(r,n,i){var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=i(1),s=void 0!==t&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(t.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!e.MSStream,c=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",a),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return o(t,[{key:"enable",value:function(){s?(this.disable(),this.noSleepTimer=e.setInterval((function(){e.location.href="/",e.setTimeout(e.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(e.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();r.exports=c},function(e,t,r){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])}))}))),fe=1e3,he=[0,0,.5,1],pe=[.5,0,.5,1],de=e.requestAnimationFrame,me=e.cancelAnimationFrame;function ge(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return E("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function ve(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=fe++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return E("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ge({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&_()&&(this.wakelock_=new le)}ve.prototype.getFrameData=function(e){return x(e,this._getPose(),this)},ve.prototype.getPose=function(){return E("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},ve.prototype.resetPose=function(){return E("VRDisplay.prototype.resetPose"),this._resetPose()},ve.prototype.getImmediatePose=function(){return E("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},ve.prototype.requestAnimationFrame=function(e){return de(e)},ve.prototype.cancelAnimationFrame=function(e){return me(e)},ve.prototype.wrapForFullscreen=function(e){if(a())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},ve.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},ve.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(E("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise((function(n,i){if(r.capabilities.canPresent)if(0==e.length||e.length>r.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var o=e[0];if(o.source){var c=o.leftBounds||he,u=o.rightBounds||pe;if(t){var l=r.layer_;l.source!==o.source&&(l.source=o.source);for(var f=0;f<4;f++)l.leftBounds[f]=c[f],l.rightBounds[f]=u[f];return r.wrapForFullscreen(r.layer_.source),r.updatePresent_(),void n()}if(r.layer_={predistorted:o.predistorted,source:o.source,leftBounds:c.slice(0),rightBounds:u.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var h=r.wrapForFullscreen(r.layer_.source);r.addFullscreenListeners_(h,(function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;r.isPresenting=h===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(e){console.error("screen.orientation.lock() failed due to",e.message)})),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.disableWakeLock(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()}),(function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.disableWakeLock(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))})),function(e){if(s())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(h)?(r.enableWakeLock(),r.waitingForPresent_=!0):(a()||s())&&(r.enableWakeLock(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||a()||(v(),i(new Error("Unable to present.")))}else n()}else i(new Error("VRDisplay is not capable of presenting."))}))},ve.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(r,n){e?(!v()&&a()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),s()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))}))},ve.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},ve.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});e.dispatchEvent(t)},ve.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});e.dispatchEvent(t)},ve.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},ve.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},ve.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},ve.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},ve.prototype.beginPresent_=function(){},ve.prototype.endPresent_=function(){},ve.prototype.submitFrame=function(e){},ve.prototype.getEyeParameters=function(e){return null};var ye={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},be="left",_e="right";function Ae(t){var r=A({},ye);t=A(r,t||{}),ve.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new ge({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ae(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new X(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Y(this.dpdb_.getDeviceParams(),t.ADDITIONAL_VIEWERS),this.viewerSelector_=new ue(t.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new se),a()&&e.addEventListener("resize",this.onResize_.bind(this))}return Ae.prototype=Object.create(ve.prototype),Ae.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Ae.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Ae.prototype._getFieldOfView=function(e){var t;if(e==be)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=_e)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Ae.prototype._getEyeOffset=function(e){var t;if(e==be)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=_e)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Ae.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),r=this._getFieldOfView(e),n={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(n,"fieldOfView",{enumerable:!0,get:function(){return E("VRFieldOfView","VRFrameData's projection matrices"),r}}),n},Ae.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Ae.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Ae.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=m()*this.bufferScale_,t.canvas.height=g()*this.bufferScale_,this.cardboardUI_=new L(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new L(t)),this.distorter_=new N(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(d()&&_()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),e.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),e.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Ae.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),e.removeEventListener("orientationchange",this.orientationHandler),e.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Ae.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Ae.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));var r=t.canvas;r.width==this.lastWidth&&r.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=r.width,this.lastHeight=r.height,this.cardboardUI_.render()}},Ae.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Ae.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),M(t.canvas)}},Ae.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Ae.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});e.dispatchEvent(t)},Ae.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Ae.VRDisplay=ve,Ae}))}))),s={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function c(r){this.config=o(o({},s),r),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in t,this.native={},this.native.getVRDisplays=t.getVRDisplays,this.native.VRFrameData=e.VRFrameData,this.native.VRDisplay=e.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&n())&&(this.enable(),this.getVRDisplays().then((function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()})))}c.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(n()){var e=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},c.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var r=this.native.VRFrameData,n=new this.native.VRFrameData,o=this.native.VRDisplay.prototype.getFrameData;e.VRDisplay.prototype.getFrameData=function(e){e instanceof r?o.call(this,e):(o.call(this,n),e.pose=n.pose,i(n.leftProjectionMatrix,e.leftProjectionMatrix),i(n.rightProjectionMatrix,e.rightProjectionMatrix),i(n.leftViewMatrix,e.leftViewMatrix),i(n.rightViewMatrix,e.rightViewMatrix))}}t.getVRDisplays=this.getVRDisplays.bind(this),e.VRDisplay=a.VRDisplay,e.VRFrameData=a.VRFrameData},c.prototype.getVRDisplays=function(){var e=this;return this.config,this.hasNative?this.native.getVRDisplays.call(t).then((function(t){return t.length>0?t:e.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},c.version="0.10.12",c.VRFrameData=a.VRFrameData,c.VRDisplay=a.VRDisplay;var u=Object.freeze({default:c}),l=u&&c||u;return void 0!==r&&r.window&&(r.document||(r.document=r.window.document),r.navigator||(r.navigator=r.window.navigator)),l}("undefined"!=typeof window?window:{screen:{width:512,height:512}},"undefined"!=typeof navigator?navigator:{userAgent:"node"});function Ur(e,t){var r,n,i,o,a=new r$3.Vector3,s=new r$3.Vector3,c=null;"VRFrameData"in window&&(c=new window.VRFrameData),"undefined"!=typeof navigator&&navigator.getVRDisplays&&navigator.getVRDisplays().then((function(e){n=e,e.length>0?r=e[0]:t&&t(new Error("HMD not available"))})).catch((function(){console.warn("THREE.VREffect: Unable to get VR Displays")})),this.isPresenting=!1,this.scale=1;var u=this,l=e.getSize(new r$3.Vector2),f=!1,h=e.getPixelRatio();this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),n},this.setSize=function(t,n,i){if(l=new r$3.Vector2(t,n),f=i,u.isPresenting){var o=r.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*o.renderWidth,o.renderHeight,!1)}else e.setPixelRatio(h),e.setSize(t,n,i)};var p=e.domElement,d=[0,0,.5,1],m=[.5,0,.5,1];function g(){var t=u.isPresenting;if(u.isPresenting=void 0!==r&&r.isPresenting,u.isPresenting){var n=r.getEyeParameters("left"),i=n.renderWidth,o=n.renderHeight;t||(h=e.getPixelRatio(),l=e.getSize(new r$3.Vector2),e.setPixelRatio(1),e.setSize(2*i,o,!1))}else t&&(e.setPixelRatio(h),e.setSize(l.width,l.height,f))}window.addEventListener("vrdisplaypresentchange",g,!1),this.setFullScreen=function(e){return new Promise((function(t,n){void 0!==r?u.isPresenting!==e?e?(r.requestPresent([{source:p}]),t()):(r.exitPresent(),t()):t():n(new Error("No VR hardware found."))}))},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==r?r.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==r?r.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==r&&u.isPresenting&&r.submitFrame()},this.autoSubmitFrame=!0;var v=new r$3.PerspectiveCamera;v.layers.enable(1);var y=new r$3.PerspectiveCamera;function b(e,t,r,n){var i=Math.PI/180;return function(e,t,r,n){r=void 0===r?.01:r,n=void 0===n?1e4:n;var i=(t=void 0===t||t)?-1:1,o=new r$3.Matrix4,a=o.elements,s=function(e){var t=2/(e.leftTan+e.rightTan),r=2/(e.upTan+e.downTan);return{scale:[t,r],offset:[(e.leftTan-e.rightTan)*t*.5,(e.upTan-e.downTan)*r*.5]}}(e);return a[0]=s.scale[0],a[1]=0,a[2]=s.offset[0]*i,a[3]=0,a[4]=0,a[5]=s.scale[1],a[6]=-s.offset[1]*i,a[7]=0,a[8]=0,a[9]=0,a[10]=n/(r-n)*-i,a[11]=n*r/(r-n),a[12]=0,a[13]=0,a[14]=i,a[15]=0,o.transpose(),o}({upTan:Math.tan(e.upDegrees*i),downTan:Math.tan(e.downDegrees*i),leftTan:Math.tan(e.leftDegrees*i),rightTan:Math.tan(e.rightDegrees*i)},t,r,n)}y.layers.enable(2),this.render=function(t,n){var l,f;if(r&&u.isPresenting){var h=t.autoUpdate;h&&(t.updateMatrixWorld(),t.autoUpdate=!1);var p=r.getEyeParameters("left"),g=r.getEyeParameters("right");a.fromArray(p.offset),s.fromArray(g.offset),Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var _,A,M=e.getSize(new r$3.Vector2),x=r.getLayers();if(x.length){var w=x[0];_=null!==w.leftBounds&&4===(null===(l=w.leftBounds)||void 0===l?void 0:l.length)?w.leftBounds:d,A=null!==w.rightBounds&&4===(null===(f=w.rightBounds)||void 0===f?void 0:f.length)?w.rightBounds:m}else _=d,A=m;i={x:Math.round(M.width*_[0]),y:Math.round(M.height*_[1]),width:Math.round(M.width*_[2]),height:Math.round(M.height*_[3])},o={x:Math.round(M.width*A[0]),y:Math.round(M.height*A[1]),width:Math.round(M.width*A[2]),height:Math.round(M.height*A[3])},e.setScissorTest(!0),e.autoClear&&e.clear(),null===n.parent&&n.updateMatrixWorld(),n.matrixWorld.decompose(v.position,v.quaternion,v.scale),n.matrixWorld.decompose(y.position,y.quaternion,y.scale);var $=this.scale;return v.translateOnAxis(a,$),y.translateOnAxis(s,$),r.getFrameData&&c?(r.depthNear=n.near,r.depthFar=n.far,r.getFrameData(c),v.projectionMatrix.elements=[].slice.call(c.leftProjectionMatrix),y.projectionMatrix.elements=[].slice.call(c.rightProjectionMatrix)):(v.projectionMatrix=b(p.fieldOfView,!0,n.near,n.far),y.projectionMatrix=b(g.fieldOfView,!0,n.near,n.far)),e.setViewport(i.x,i.y,i.width,i.height),e.setScissor(i.x,i.y,i.width,i.height),e.render(t,v),e.setViewport(o.x,o.y,o.width,o.height),e.setScissor(o.x,o.y,o.width,o.height),e.render(t,y),e.setViewport(0,0,M.width,M.height),e.setScissorTest(!1),h&&(t.autoUpdate=!0),void(u.autoSubmitFrame&&u.submitFrame())}e.render(t,n)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",g,!1)}}var Rr=new r$3.SphereBufferGeometry(.1,32,32);function Qr(e,t){e.setValues({color:t})}var Yr=function(e){function t(){var t=e.call(this)||this,r=new r$3.MeshBasicMaterial({color:8900346,opacity:.5,transparent:!0});return t.mesh=new r$3.Mesh(Rr,r),t.current=!1,t.add(t.mesh),t.loading=!1,t.disabled=!1,t.progress=0,t.opacity=1,t.needsRender=!0,t}return t$3.__extends(t,e),t.prototype.draw=function(){this.progress>0?Qr(this.mesh.material,16776960):this.current?Qr(this.mesh.material,65280):Qr(this.mesh.material,8900346)},t.prototype.setDisabled=function(e){this.disabled!==e&&(this.disabled=e)},t.prototype.setLoading=function(e){this.loading!==e&&(this.loading=e)},t.prototype.setProgress=function(e){this.progress!==e&&(this.progress=e)},t.prototype.setOpacity=function(e){this.opacity!==e&&(this.opacity=e)},t.prototype.setCurrent=function(e){this.current!==e&&(this.current=e,this.draw())},t.prototype.updateTime=function(e,t){},t.prototype.dispose=function(){this.remove(this.mesh),Array.isArray(this.mesh.material)?this.mesh.material.forEach((function(e){return e.dispose()})):this.mesh.material.dispose()},t}(r$3.Object3D),Fr=null,Vr=[{zh:"1. 进入: 将手机横屏放入VR眼镜中",en:"1. Enter: Put your phone<br/> horizontally into the VR glasses",ja:"1. 入力：電話をVRメガネに水平に置きます"},{zh:"2. 前进: 视角中心对准蓝点, 直至变绿",en:"2. Forward: align the center of the viewing<br/> angle with the blue dot, until it turns green",ja:"2. 前方：緑色に変わるまで、<br/>視野角の中心を青い点に合わせます"},{zh:"3. 退出: 将手机竖屏再触碰屏幕",en:"3. Exit: Put the phone in portrait<br/> orientation and then touch the screen",ja:"3. 終了：電話を縦向きにしてから<br/>画面にタッチします"}],Hr=function(e){function t(r){var n=this;Re(Fr)&&(Fr=new Br(r.webvrPolyfillConfig||{}));var i=t.parseArgs(r);return(n=e.call(this,i)||this).effect=new Ur(n.renderer),n.effect.setSize(n.element.offsetWidth,n.element.offsetHeight),n.effect.isPresenting=!0,n.initHelper(n.element),n}return t$3.__extends(t,e),t.parseArgs=function(t){var r=t$3.__assign(t$3.__assign({},t),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return e.parseArgs.call(this,r)},t.initAnimationEndPose=function(t){var r=this.parseArgs(t);return e.initAnimationEndPose.call(this,r)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.destroyHelper();for(var t=0,r=this.panoMeshes;t<r.length;t++){var n=r[t];this.helper.remove(n),n.dispose()}this.panoMeshes.length=0},t.prototype.isReady=function(){return!1},t.prototype.updateRenderSize=function(){this.effect.isPresenting=!1,this.effect.setSize(this.element.offsetWidth,this.element.offsetHeight),this.effect.isPresenting=!0,this.needsRender=!0,this.setHelperElementSize()},t.prototype.updatePanoMeshes=function(){var e=this;this.panoMeshes.forEach((function(t){e.helper.remove(t),t.dispose()})),this.panoMeshes.length=0;for(var t=0;t<this.work.observers.length;t++){var r=this.work.observers[t],n=new Yr;n.name="panoSphere_".concat(this.work.workCode,"_").concat(t),n.position.copy(r.position),n.needsRender=!0,this.helper.add(n),this.panoMeshes[t]=n}},t.prototype.updateTime=function(e,t){var r,n;if(!this.destroyed){this.needsRender=!0,this.intersect(e);var i={},o={};if(!1===this.locationMotion.ended){this.locationMotion.update(e);var a=this.locationMotion.getKeyFrameSegment(e),s=a[0],c=a[1],u=this.panoResourceFromLocationMotionKeyframe(s),l=this.panoResourceFromLocationMotionKeyframe(c),f=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),h=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),p=u.position,d=l.position,m=this.locationMotion.value.count-c.value.count+1;i.modelAlpha=this.locationMotion.value.modelAlpha,i.perspToOrtho=jn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),i.useBlackTransition="instant"===l.effect,l.panoPicture&&(m<1?u.panoPicture&&(i.pano0=u.panoPicture):i.pano0=l.panoPicture,i.pano1=l.panoPicture),"fade"===l.effect&&(i.pano0&&u.panoPicture&&(i.pano0={map:i.pano0.map,luminanceMap:i.pano0.luminanceMap,matrix:u.panoPicture.matrix.clone().setPosition(l.position)}),p.copy(d)),i.progress=m,o.distance=this.locationMotion.value.distance,o.offset=new r$3.Vector3(p.x+(d.x-p.x)*m,p.y+(d.y-p.y)*m,p.z+(d.z-p.z)*m);for(var g=[],v=[],y=0,b=this.locationMotion.keyframes;y<b.length;y++){var _=(D=b[y]).key,A=D.progress;void 0!==_&&(g.push(_),A>=this.locationMotion.progress&&v.push(_))}for(var M=0,x=Object.keys(this.panoResources);M<x.length;M++){var w=x[M];if(!(v.indexOf(w)>=0)){var $=this.panoResources[w];if($.panoPicture){var E=$.panoPicture.map;if(E){if(E===(null===(r=i.pano0)||void 0===r?void 0:r.map))continue;if(E===(null===(n=i.pano1)||void 0===n?void 0:n.map))continue;E.dispose(),$.panoPicture=null}}g.indexOf(w)>=0||delete this.panoResources[w]}}this.currentPanoIndex=m<.5?u.panoIndex:l.panoIndex,this.emit("movingToPano",h.panoIndex,f.panoIndex,this.locationMotion.progress)}for(var T=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),S=[],O=0,N=this.locationMotion.keyframes;O<N.length;O++){var D;(D=N[O]).progress>=this.locationMotion.progress&&S.push(this.panoResourceFromLocationMotionKeyframe(D).panoIndex)}for(var I=0;I<this.work.observers.length;I++){var P=this.work.observers[I],j=this.panoMeshes[I];if(j.visible=!0,S.indexOf(I)>=0)j.visible=!1;else if(P.loadable||P.active)if(-1===T.indexOf(I))j.visible=!1;else{j.visible=!0;var C=j.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);C<.01?j.setOpacity(0):j.setOpacity(jn(1.5/C,0,1))}else j.visible=!0}!1===zn(i)&&(this.model.setMaterial(i),this.boundingMesh.setMaterial(i)),o.offset&&this.camera.position.copy(o.offset);var L=this.camera.pose.longitude,R=this.camera.pose.latitude,z=this.effect.getVRDisplay();if(z){var k=z.getPose();k&&k.orientation&&this.camera.quaternion.fromArray(k.orientation)}this.camera.updateMatrixWorld(),this.camera.computePose(),L===this.camera.pose.longitude&&R===this.camera.pose.latitude||(this.cameraMotion.set(ti(this.camera.pose,["longitude","latitude"]),0).catch(Qe),this.emit("cameraDirectionUpdate",ti(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",In(ti(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},t.prototype.render=function(){this.effect.render(this.scene,this.camera)},t.prototype.setCamera=function(e){},t.prototype.initHelper=function(e){for(var t=this,r="five_webvr_helper_"+Fe(),n=1,i=document.getElementsByTagName("meta"),o=0;o<i.length;o++){var a=i[o];if("viewport"===a.getAttribute("name")){var s=(a.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);s&&(n=Number(s[1])),isNaN(n)&&(n=1)}}var c=document.createElement("style");c.setAttribute("type","text/css");var u,l,f=(l=function(e){return Math.floor(e*n)+"px"},"\n    .".concat(u=r,"{\n      font-family:sans-serif;\n      background:#394043;color:#ffffff;\n      position:absolute;display:none;\n      -webkit-tap-highlight-color:rgba(0,0,0,0);\n    }\n    .").concat(u," img{\n      position:absolute;top:50%;left:50%;\n      -webkit-transform:translate(-50%,-100%);\n      -moz-transform:translate(-50%,-100%);\n      transform:translate(-50%,-100%);\n      pointer-events:none;\n      width:").concat(l(132),";\n      height:").concat(l(162),";\n    }\n    .").concat(u," ol{\n      position:absolute;top:50%;left:50%;\n      -webkit-transform:translate(-50%,0);\n      -moz-transform:translate(-50%,0);\n      transform:translate(-50%,0);\n      pointer-events:none;\n      margin-top:").concat(l(38),";\n      font-size:").concat(l(16),";\n      line-height:").concat(l(30),";\n    }\n    .").concat(u," li{\n      list-style-type:none;\n      white-space:nowrap;\n      position:relative;\n      padding-left:").concat(l(14),";\n      margin-bottom:").concat(l(12),";\n    }\n    @media screen and (orientation: portrait){\n      .").concat(u,"{display: block!important}\n    }\n  "));"styleSheet"in c?c.styleSheet.cssText=f:c.appendChild(document.createTextNode(f));var h=this.helperElement=document.createElement("div");h.className=r,h.innerHTML='\n      <img src="'.concat("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTMycHgiIGhlaWdodD0iMTYycHgiIHZpZXdCb3g9IjAgMCAxMzIgMTYyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ni4xICg0NDQ2MykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cG9seWdvbiBpZD0icGF0aC0xIiBwb2ludHM9IjY1Ljk4NTM0MjMgOTMuMTg5NjU1MiAwIDkzLjE4OTY1NTIgMCAwLjI0NzE1NTE3MiAxMzEuOTcwNjg1IDAuMjQ3MTU1MTcyIDEzMS45NzA2ODUgOTMuMTg5NjU1MiI+PC9wb2x5Z29uPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9vemhtS1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE4LjAwMDAwMCwgLTE4NC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMDAwMDAwLCAxODQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iUGFnZS0xIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaXBob25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNS4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4yMDIzNzg3LDMyLjI2OTE1MzIgQzYyLjIwODU3NTQsMzQuNDI4MDQyOSA2MC42ODkzNDU5LDM3LjA2MDgzNTEgNTguODA3NjA4MiwzOC4xNDI4NjEgTDU1Ljg3MDM2MjMsMzkuODQwMjM3NyBMNTUuMTc5NDI3OSwzOC42Mzc0MTMgTDU1LjEzNTAxOCwyMi4xNTMwMzY0IEw1Ni4zMTM0Mjc5LDIyLjE0Njg0MTYgQzU2LjMxMzQyNzksMjMuNDk1MjQ0MiA1Ny4yNjk3ODg1LDI0LjAzOTM1NDUgNTguNDQ3MTY1NiwyMy4zNTU4NjEgQzU5LjYxODM0NTksMjIuNjc4NTYyMyA2MC41NjIzMTMxLDIxLjAzOTAwMzkgNjAuNTYyMzEzMSwxOS42OTY3OTYxIEw2Mi4xNjQxNjU2LDE5LjY5MDYwMTMgTDYyLjIwMjM3ODcsMzIuMjY5MTUzMiBaIiBpZD0iRmlsbC0xIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4xMjAxNjg5LDUuMjYzNjIyNzMgTDYyLjE2MzU0NTksMTkuNjkxMzI0IEw2MC41NjI3MjYyLDE5LjY5NjQ4NjQgQzYwLjU1NTQ5NjcsMTguMzQxODg5IDU5LjYwNTMzMjgsMTcuNzk3Nzc4NiA1OC40Mjc5NTU3LDE4LjQ3NTA3NzMgQzU3LjI1Njc3NTQsMTkuMTUyMzc2IDU2LjMwNjYxMTUsMjAuNzk4MTI5MiA1Ni4zMTI4MDgyLDIyLjE0NzU2NDMgTDU1LjEzNTQzMTEsMjIuMTUyNzI2NiBMNTUuMDkxMDIxMyw3LjAxMDU1Nzc5IEw1NC4zOTQ5MjMsNS44MDc3MzMxMiBMNTguNzA2ODA4MiwzLjMxOTQ4NjM2IEM2MC41ODc1MTMxLDIuMjMxMjY1NTggNjIuMTIwMTY4OSwzLjEwNDczMzEyIDYyLjEyMDE2ODksNS4yNjM2MjI3MyIgaWQ9IkZpbGwtMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjAuMTEyNjM3NywxOS45NTYxNTE5IEM2MC4xMTI2Mzc3LDIxLjAxMzM5ODcgNTkuMzY0OSwyMi4zMTEyMTA0IDU4LjQ0MDU1NTcsMjIuODQyOTMxMiBDNTcuNTE2MjExNSwyMy4zNzU2ODQ0IDU2Ljc2MjI3NywyMi45NDUxNDU1IDU2Ljc2MjI3NywyMS44ODY4NjYyIEM1Ni43NTYwODAzLDIwLjgyMzQyNDcgNTcuNTAzODE4LDE5LjUyNTYxMyA1OC40MzQzNTksMTguOTkzODkyMiBDNTkuMzUyNTA2NiwxOC40NjIxNzE0IDYwLjEwNjQ0MSwxOC44OTI3MTA0IDYwLjExMjYzNzcsMTkuOTU2MTUxOSIgaWQ9IkZpbGwtNyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS4wMTA4NTkwMiw1My4yOTE1MzQ0IEw4Ljk5MTIzNjA3LDQ1LjYxOTI2ODIgQzguOTkxMjM2MDcsNDUuNDc0NzIyNyA4Ljg5MDAyMjk1LDQ1LjQxNjkwNDUgOC43NjQwMjI5NSw0NS40ODYwNzk5IEM4LjYzNjk5MDE2LDQ1LjU2MzUxNDkgOC41NDE5NzM3Nyw0NS43MzM4NzIxIDguNTQxOTczNzcsNDUuODc4NDE3NSBMOC41NjA1NjM5Myw1My41NTE3MTYyIEM4LjU2MDU2MzkzLDUzLjY5MTA5OTQgOC42NjI4MDk4NCw1My43NDY4NTI2IDguNzgyNjEzMTEsNTMuNjc3Njc3MyBDOC45MDk2NDU5LDUzLjYwMjMwNzEgOS4wMTA4NTkwMiw1My40MzE5NSA5LjAxMDg1OTAyLDUzLjI5MTUzNDQgTDkuMDEwODU5MDIsNTMuMjkxNTM0NCBaIE01NS4xNzk1MzExLDM4LjYzNzcyMjcgTDU1Ljg3MDQ2NTYsMzkuODQwNTQ3NCBMOS4xODc0NjU1Nyw2Ni43ODE3NTUyIEM3LjMwNzc5MzQ0LDY3Ljg3MTAwODQgNS43NzUxMzc3LDY2Ljk5NjUwODQgNS43NzUxMzc3LDY0LjgzODY1MTMgTDUuNjkyNTE0NzUsMzcuODMyMzk4MSBDNS42ODYzMTgwMywzNS42NzU1NzM0IDcuMjA1NTQ3NTQsMzMuMDQxNzQ4NyA5LjA4NzI4NTI1LDMxLjk1ODY5MDMgTDU0LjM5NDYxMzEsNS44MDgzNTI2IEw1NS4wOTA3MTE1LDcuMDExMTc3MjcgTDExLjg5ODUzMTEsMzEuOTM5MDczNCBMMTEuOTg3MzUwOCw2My41NjU2MTg4IEw1NS4xNzk1MzExLDM4LjYzNzcyMjcgWiIgaWQ9IkZpbGwtOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IEM1NC44NjYyODY5LDAuMDAwNTE2MjMzNzY2IDU0LjM0Njc5NTEsMC4xNTAyMjQwMjYgNTMuNzk4Mzg1MiwwLjQ2NzE5MTU1OCBMNC4xNzkxNzIxMywyOS4xMDU3NzYgQzIuMjk5NSwzMC4xOTA4OTk0IDAuNzgwMjcwNDkyLDMyLjgyMTYyNjYgMC43ODU0MzQ0MjYsMzQuOTgxNTQ4NyBMMC44NjI4OTM0NDMsNjEuOTg3ODAxOSBDMC44NjU5OTE4MDMsNjMuMDYwNTM1NyAxLjI0Mzk5MTgsNjMuODE1MjY5NSAxLjg1NTQwMTY0LDY0LjE2OTQwNTggTDYuNzY0MjM3Nyw2Ny4wMjIxMTM2IEM2LjE1Mzg2MDY2LDY2LjY2Njk0NDggNS43NzQ4Mjc4Nyw2NS45MTIyMTEgNS43NzE3Mjk1MSw2NC44Mzk0NzczIEw1LjY5NTMwMzI4LDM3LjgzMzIyNCBDNS42ODkxMDY1NiwzNS42NzQzMzQ0IDcuMjA4MzM2MDcsMzMuMDQyNTc0NyA5LjA4ODAwODIsMzEuOTU3NDUxMyBMNTguNzA3MjIxMywzLjMxODg2Njg4IEM1OS4yNTY2NjM5LDMuMDAxODk5MzUgNTkuNzc1MTIzLDIuODUyMTkxNTYgNjAuMjM0NzEzMSwyLjg1MjE5MTU2IEM2MC41NjgzMDMzLDIuODUyMTkxNTYgNjAuODY5ODc3LDIuOTMwNjU5MDkgNjEuMTMwMTM5MywzLjA4MTM5OTM1IEw1Ni4yMjAyNzA1LDAuMjMwNzU2NDk0IEM1NS45NjEwNDEsMC4wNzg5ODM3NjYyIDU1LjY1ODQzNDQsMC4wMDA1MTYyMzM3NjYgNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IE01NS4zMjU4NzcsMC42MzM0MTg4MzEgQzU1LjU0Mzc5NTEsMC42MzM0MTg4MzEgNTUuNzM3OTU5LDAuNjgxOTQ0ODA1IDU1LjkwMjE3MjEsMC43NzY5MzE4MTggTDU4Ljg5NjIyMTMsMi41MTY2Mzk2MSBDNTguNzI4OTA5OCwyLjU4Nzg3OTg3IDU4LjU2MDU2NTYsMi42NzM1NzQ2OCA1OC4zOTExODg1LDIuNzcxNjU5MDkgTDguNzcxOTc1NDEsMzEuNDEwMjQzNSBDNi42ODQ3MTMxMSwzMi42MTQxMDA2IDUuMDU0OTc1NDEsMzUuNDM2ODY2OSA1LjA2MjIwNDkyLDM3LjgzNTI4OSBMNS4xMzg2MzExNSw2NC44NDE1NDIyIEM1LjEzODYzMTE1LDY1LjAyMTE5MTYgNS4xNDg5NTkwMiw2NS4xOTU2Nzg2IDUuMTY3NTQ5MTgsNjUuMzYyOTM4MyBMMi4xNzM1LDYzLjYyMzIzMDUgQzEuNzM4Njk2NzIsNjMuMzcwMjc2IDEuNDk4MDU3MzgsNjIuNzg3OTY0MyAxLjQ5NTk5MTgsNjEuOTg1NzM3IEwxLjQxOTU2NTU3LDM0Ljk3OTQ4MzggQzEuNDEzMzY4ODUsMzMuMDU5MDk0MiAyLjgyMzEyMjk1LDMwLjYxOTM3MzQgNC40OTUyMDQ5MiwyOS42NTQwMTYyIEw1NC4xMTU0NTA4LDEuMDE0Mzk5MzUgQzU0LjU0ODE4ODUsMC43NjU1NzQ2NzUgNTQuOTY2NDY3MiwwLjYzMzQxODgzMSA1NS4zMjU4NzcsMC42MzM0MTg4MzEiIGlkPSJGaWxsLTM1Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjA4ODUyNDU5LDMyLjI3NDIxMjMgQzkuMDMzNzg2ODksMzIuMjc0MjEyMyA4Ljk4MDA4MTk3LDMyLjI1OTc1NzggOC45Mjk0NzU0MSwzMi4yMzE4ODEyIEw0LjM4OTM0NDI2LDI5LjU5MzkyNjYgQzQuMjM3NTI0NTksMjkuNTA2MTY2OSA0LjE4NTg4NTI1LDI5LjMxMjA2MyA0LjI3MzY3MjEzLDI5LjE2MTMyMjcgQzQuMzYyNDkxOCwyOS4wMDk1NSA0LjU1NjY1NTc0LDI4Ljk1OTk5MTYgNC43MDc0NDI2MiwyOS4wNDY3MTg4IEw5LjI0NzU3Mzc3LDMxLjY4NDY3MzQgQzkuMzk4MzYwNjYsMzEuNzcyNDMzMSA5LjQ1LDMxLjk2NTUwNDUgOS4zNjIyMTMxMSwzMi4xMTcyNzczIEM5LjMwMzM0NDI2LDMyLjIxNzQyNjYgOS4xOTY5NjcyMSwzMi4yNzQyMTIzIDkuMDg4NTI0NTksMzIuMjc0MjEyMyIgaWQ9IkZpbGwtMzciPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTU4LjcwNzYzNDQsMy42MzUzMTgxOCBDNTguNjUyODk2NywzLjYzNTMxODE4IDU4LjU5OTE5MTgsMy42MjE4OTYxIDU4LjU0ODU4NTIsMy41OTI5ODcwMSBMNTMuOTY5MjA4MiwwLjkzMjMxODE4MiBDNTMuODE4NDIxMywwLjg0NDU1ODQ0MiA1My43NjY3ODIsMC42NTA0NTQ1NDUgNTMuODU0NTY4OSwwLjQ5OTcxNDI4NiBDNTMuOTQyMzU1NywwLjM0NjkwOTA5MSA1NC4xMzY1MTk3LDAuMjk4MzgzMTE3IDU0LjI4NzMwNjYsMC4zODUxMTAzOSBMNTguODY2NjgzNiwzLjA0NTc3OTIyIEM1OS4wMTc0NzA1LDMuMTMzNTM4OTYgNTkuMDY5MTA5OCwzLjMyNjYxMDM5IDU4Ljk4MTMyMywzLjQ3ODM4MzEyIEM1OC45MjI0NTQxLDMuNTc5NTY0OTQgNTguODE2MDc3LDMuNjM1MzE4MTggNTguNzA3NjM0NCwzLjYzNTMxODE4IiBpZD0iRmlsbC0zOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy4zMjA5MjYyMyw2My4zMzk5MjE0IEMyLjc5NjI3MDQ5LDYzLjMzOTkyMTQgMi4zNzA3NjIzLDYyLjkxNTU3NzMgMi4zNzA3NjIzLDYyLjM5MDA1MTMgTDIuMzcwNzYyMyw1OC4xMzAwOTAzIEMyLjM3MDc2MjMsNTcuNjA0NTY0MyAyLjc5NjI3MDQ5LDU3LjE4MDIyMDEgMy4zMjA5MjYyMyw1Ny4xODAyMjAxIEMzLjg0NTU4MTk3LDU3LjE4MDIyMDEgNC4yNzAwNTczOCw1Ny42MDQ1NjQzIDQuMjcwMDU3MzgsNTguMTMwMDkwMyBMNC4yNzAwNTczOCw2Mi4zOTAwNTEzIEM0LjI3MDA1NzM4LDYyLjkxNTU3NzMgMy44NDU1ODE5Nyw2My4zMzk5MjE0IDMuMzIwOTI2MjMsNjMuMzM5OTIxNCIgaWQ9IkZpbGwtNDEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNjguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkNsaXAtNDYiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBDODAuMzMyNzcwNiw1MC4yNzIxNzI0IDgxLjQ3MTM3MTgsNDguNjk5MjkzMSA4Mi43NjcwNzczLDQ3Ljk1MDUzNDUgQzgzLjM3MDM5MDIsNDcuNjAyMDg2MiA4My45NDIxMjAyLDQ3LjQ3OTcyNDEgODQuMzM4OTMwMSw0Ny42MTUwNTE3IEM4NC42MTI2NDc5LDQ3LjcwNzQzMSA4NC44MTgzNDExLDQ3LjkyNjIyNDEgODQuOTY3MzQ3Miw0OC4yODQzOTY2IEw4OC41NTQwMjIxLDU2LjkxOTQzMSBDODguNTYzNzM5OSw1Ni45NDEzMTAzIDg4LjU3NjY5NjksNTYuOTYwNzU4NiA4OC41ODcyMjQ1LDU2Ljk4MTAxNzIgQzg4LjU5Nzc1MjEsNTcuMDAwNDY1NSA4OC42MDU4NTAzLDU3LjAxOTkxMzggODguNjE3OTk3NSw1Ny4wMzg1NTE3IEM4OC42MzUwMDM3LDU3LjA2NDQ4MjggODguNjU1MjQ5MSw1Ny4wODcxNzI0IDg4LjY3NDY4NDcsNTcuMTA5ODYyMSBDODguNjg1MjEyMyw1Ny4xMjM2Mzc5IDg4LjY5NDkzMDEsNTcuMTM4MjI0MSA4OC43MDYyNjc1LDU3LjE0OTU2OSBDODguNzMyMTgxNiw1Ny4xNzYzMTAzIDg4Ljc2MDUyNTIsNTcuMTk5ODEwMyA4OC43ODk2Nzg1LDU3LjIyMTY4OTcgQzg4Ljc5Nzc3NjcsNTcuMjI4MTcyNCA4OC44MDUwNjUsNTcuMjM1NDY1NSA4OC44MTMxNjMyLDU3LjI0MTk0ODMgQzg5LjAwNzUxOSw1Ny4zNzgwODYyIDg5LjI2MjYxMSw1Ny40MjEwMzQ1IDg5LjQ5OTg4NzEsNTcuMzMyNzA2OSBMODkuODMxMTAxOCw1Ny4yMDc5MTM4IEw5MC4wNzQ4NTY0LDU3LjExODc3NTkgQzkwLjIxMDkwNTUsNTcuMDY4NTM0NSA5MC4zNDc3NjQ0LDU3LjAxODI5MzEgOTAuNDg1NDMzMSw1Ni45Njk2NzI0IEM5MC43ODY2ODQ3LDU2Ljg2MTg5NjYgOTEuMDkwMzY1Niw1Ni43NTk3OTMxIDkxLjM5NDA0NjYsNTYuNjU3Njg5NyBMOTIuMzY1MDE2LDU2LjM0MTY1NTIgQzkyLjgwMjMxNjYsNTYuMjAzMDg2MiA5My4yNDA0MjcsNTYuMDY4NTY5IDkzLjY4MjU4NjUsNTUuOTQwNTM0NSBDOTMuODUxMDI4Miw1NS44OTE5MTM4IDk0LjAxOTQ2OTksNTUuODQ0OTEzOCA5NC4xODc5MTE3LDU1Ljc5NjI5MzEgTDk0LjI3OTQyMDksNTUuNzcxMTcyNCBDOTQuNjg0MzI4OCw1NS42NTc3MjQxIDk1LjA5MDA0NjYsNTUuNTQ5OTQ4MyA5NS40OTczODQsNTUuNDQ2MjI0MSBMOTUuNjA2NzA5Miw1NS40MTcwNTE3IEM5NS43NjMwMDM3LDU1LjM3NjUzNDUgOTUuOTIwMTA4LDU1LjMzNjAxNzIgOTYuMDc3MjEyMyw1NS4yOTc5MzEgQzk2LjU2NjM0MTEsNTUuMTc3MTg5NyA5Ny4wNTU0Njk5LDU1LjA2Mzc0MTQgOTcuNTQ2MjE4NCw1NC45NTUxNTUyIEw5Ny44NTM5NDg1LDU0Ljg4NTQ2NTUgQzk4LjQ0NDMwNDMsNTQuNzU5MDUxNyA5OS4wMzcwODk2LDU0LjY0MjM2MjEgOTkuNjI3NDQ1NCw1NC41MzM3NzU5IEwxMDAuMDIxMDE2LDU0LjQ2NjUxNzIgQzEwMC42MTU0MjEsNTQuMzYxMTcyNCAxMDEuMjA5MDE2LDU0LjI2NjM2MjEgMTAxLjgwNDIzMSw1NC4xNzk2NTUyIEwxMDIuMjY1MDE2LDU0LjExMjM5NjYgQzEwMi45NjA2NDgsNTQuMDE2Nzc1OSAxMDMuNjQ3MzcyLDUzLjkzNDEyMDcgMTA0LjMwNTc1Miw1My44NjYwNTE3IEwxMDQuODM2MTgyLDUzLjgxNzQzMSBDMTA1LjIyNjUxMyw1My43ODE3NzU5IDEwNS42MTUyMjUsNTMuNzQ3NzQxNCAxMDYuMDA0NzQ2LDUzLjcyMDE4OTcgQzEwNi4yMTQ0ODgsNTMuNzA0NzkzMSAxMDYuNDIxODAxLDUzLjY5MjYzNzkgMTA2LjYzMDczNCw1My42Nzk2NzI0IEMxMDcuMDAwMDEsNTMuNjU3NzkzMSAxMDcuMzY2ODU2LDUzLjYzODM0NDggMTA3LjczNTMyMyw1My42MjM3NTg2IEMxMDcuOTUyMzUzLDUzLjYxNDg0NDggMTA4LjE2OTM4NCw1My42MDUxMjA3IDEwOC4zODU2MDUsNTMuNTk4NjM3OSBDMTA4LjY0Nzk4NSw1My41OTIxNTUyIDEwOC45MTAzNjYsNTMuNTg3MjkzMSAxMDkuMTczNTU2LDUzLjU4NDA1MTcgQzEwOS42NzgwNzEsNTMuNTc1OTQ4MyAxMTAuMTc4NTM3LDUzLjU3Njc1ODYgMTEwLjY4MDYyMyw1My41ODQ4NjIxIEwxMTAuNzY0MDM0LDUzLjU4NTY3MjQgQzExMC45ODE4NzUsNTMuNTg4OTEzOCAxMTEuMTk5NzE1LDUzLjU5MjE1NTIgMTExLjQxNTEyNiw1My41OTc4Mjc2IEMxMTEuNjI4MTA4LDUzLjYwNTEyMDcgMTExLjg0MDI4LDUzLjYxNDg0NDggMTEyLjA1MjQ1Miw1My42MjM3NTg2IEMxMTIuMzE0MDIyLDUzLjYzNDI5MzEgMTEyLjU3NDc4Myw1My42NDcyNTg2IDExMi44MzQ3MzQsNTMuNjYyNjU1MiBDMTEzLjA0NDQ3Niw1My42NzQ4MTAzIDExMy4yNTQyMTgsNTMuNjg5Mzk2NiAxMTMuNDYzOTYxLDUzLjcwNDc5MzEgQzExMy43MjQ3MjEsNTMuNzI0MjQxNCAxMTMuOTg1NDgyLDUzLjc0NDUgMTE0LjI0MzgxMyw1My43NjcxODk3IEMxMTQuNDMzMzEsNTMuNzg1MDE3MiAxMTQuNjIxOTk4LDUzLjgwMjg0NDggMTE0LjgwOTA2NSw1My44MjIyOTMxIEMxMTUuMDczODc1LDUzLjg0OTAzNDUgMTE1LjMzNjI1NSw1My44Nzk4Mjc2IDExNS41OTYyMDYsNTMuOTExNDMxIEMxMTUuNzgwMDM0LDUzLjkzMzMxMDMgMTE1Ljk2MzA1Myw1My45NTYgMTE2LjE0NDQ1Miw1My45ODAzMTAzIEMxMTYuNDEyNTAxLDU0LjAxNjc3NTkgMTE2LjY3ODEyLDU0LjA1NzI5MzEgMTE2Ljk0MTMxLDU0LjA5ODYyMDcgTDExNy4wOTExMjYsNTQuMTIxMzEwMyBDMTE3LjIxMDE2OSw1NC4xMzkxMzc5IDExNy4zMjY3ODMsNTQuMTU3Nzc1OSAxMTcuNDQyNTg3LDU0LjE3NjQxMzggQzExNy43MzA4ODEsNTQuMjI1ODQ0OCAxMTguMDE1MTI2LDU0LjI3OTMyNzYgMTE4LjMwMDk5MSw1NC4zMzUyNDE0IEwxMTguNDQ2NzU4LDU0LjM2MTk4MjggQzExOC41MzUwMjgsNTQuMzc4MTg5NyAxMTguNjIzMjk4LDU0LjM5NTIwNjkgMTE4LjcxMjM3OCw1NC40MTMwMzQ1IEMxMTkuMDE3Njc5LDU0LjQ3NDYyMDcgMTE5LjMxNzMxLDU0LjU0NDMxMDMgMTE5LjYxNTMyMyw1NC42MTQgTDExOS45NzE2NDIsNTQuNjk0MjI0MSBDMTIwLjM4NDY0OCw1NC43OTU1MTcyIDEyMC43OTE5ODUsNTQuOTAyNDgyOCAxMjEuMTkyODQ0LDU1LjAxNjc0MTQgQzEyMS42MjkzMzUsNTUuMTQyMzQ0OCAxMjIuMDU2OTE4LDU1LjI3NjA1MTcgMTIyLjQ3ODgzMiw1NS40MTc4NjIxIEMxMjIuNTU0MTQ1LDU1LjQ0MjE3MjQgMTIyLjYyNzAyOCw1NS40Njk3MjQxIDEyMi43MDA3MjEsNTUuNDk1NjU1MiBMMTIyLjg1NjIwNiw1NS41NTMxODk3IEMxMjMuMTQ1MzEsNTUuNjU0NDgyOCAxMjMuNDMyNzk1LDU1Ljc1NjU4NjIgMTIzLjcxNjIzMSw1NS44Njc2MDM0IEMxMjMuNzc2OTY3LDU1Ljg5MTEwMzQgMTIzLjgzNTI3NCw1NS45MTYyMjQxIDEyMy44OTQzOSw1NS45NDA1MzQ1IEwxMjQuMDQwOTY3LDU2LjAwMTMxMDMgQzEyNC40MTc1MzEsNTYuMTU0NDY1NSAxMjQuNzg1MTg4LDU2LjMxNDkxMzggMTI1LjE0MzkzNiw1Ni40ODI2NTUyIEwxMjUuMjMwNTg3LDU2LjUyMzE3MjQgQzEyNS4zMjc3NjQsNTYuNTY3NzQxNCAxMjUuNDI0OTQyLDU2LjYxMzEyMDcgMTI1LjUyMjEyLDU2LjY2MTc0MTQgQzEyNS44NTk4MTMsNTYuODI3MDUxNyAxMjYuMTYwMjU1LDU2Ljk4MTgyNzYgMTI2LjQzNTU5Myw1Ny4xMzA5MzEgQzEyNi40MzU1OTMsNTcuMzczMjI0MSAxMjYuNDM1NTkzLDU3LjY4NjgyNzYgMTI2LjQzNjQwMiw1OC4wMDM2NzI0IEwxMjYuNDM2NDAyLDU4LjAyNzE3MjQgQzExNy40MzUyOTgsNTMuNTMzIDEwMy4wNTg2MzYsNTMuNTYyMTcyNCA5MC4wMjU0NTc3LDU4LjE5ODE1NTIgTDg4LjQ5ODE0NDgsNTguMTg2IEw3OC44MzI5OTE0LDU1LjY4NzcwNjkgTDc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBaIE03Ni4yNDQwMDk4LDU3LjQ1OTkzMSBMNzYuMjQ3MjQ5MSw1Ni40MjI2ODk3IEM3Ni4yNDcyNDkxLDU2LjQxNTM5NjYgNzYuMjQ0ODE5Niw1Ni40MDg5MTM4IDc2LjI0NDgxOTYsNTYuNDAxNjIwNyBDNzYuMjQ0MDA5OCw1Ni4zODg2NTUyIDc2LjI0NTYyOTQsNTYuMzc0ODc5MyA3Ni4yNDQwMDk4LDU2LjM2MTkxMzggTDc2LjI0NDAwOTgsNTYuMjI5MDE3MiBDNzYuMjQ0MDA5OCw1NS45NjI0MTM4IDc2LjEwMjI5Miw1NS43MTY4NzkzIDc1Ljg3MTQ5NDUsNTUuNTgzOTgyOCBDNzUuNzMyMjA2MSw1NS41MDM3NTg2IDc1LjU3MzQ4MjIsNTUuNDc3ODI3NiA3NS40MTg4MDc0LDU1LjQ5NDg0NDggQzc1LjI5MzI4NTksNTUuNDE3ODYyMSA3NS4xNjQ1MjUyLDU1LjM0MzMxMDMgNzUuMDQyMjQyOSw1NS4yNjM4OTY2IEM3NS4wMDQxODE2LDU1LjIzODc3NTkgNzQuOTY4NTQ5Nyw1NS4yMTI4NDQ4IDc0LjkyOTY3ODUsNTUuMTg2OTEzOCBDNzQuNjg5MTYzMiw1NS4wMjgwODYyIDc0LjQ1MjY5NjksNTQuODY1MjA2OSA3NC4yMjY3NTgzLDU0LjY5ODI3NTkgQzc0LjIxMjk5MTQsNTQuNjg3NzQxNCA3NC4xOTkyMjQ1LDU0LjY3NzIwNjkgNzQuMTg1NDU3Nyw1NC42Njc0ODI4IEM3My42Nzc3MDMxLDU0LjI4OTg2MjEgNzMuMjA1NTgwNCw1My44OTQ0MTM4IDcyLjc3Mzk0ODUsNTMuNDgwMzI3NiBDNzMuNDc3Njc4NSw1MS45MzAxMzc5IDczLjg0NjE0NDgsNTAuMzY2OTgyOCA3My44NDIwOTU3LDQ4LjkzMDI0MTQgQzczLjgzNzIzNjgsNDcuMTYyODc5MyA3My4yNDYwNzEyLDQ1Ljc1NTMxMDMgNzIuMTc3MTE0MSw0NC45NjYwMzQ1IEM3MS43MzczODQsNDQuNjQwMjc1OSA3MS4yMjgwMDk4LDQ0LjQzNjg3OTMgNzAuNjc3MzM1LDQ0LjM0NjEyMDcgQzcwLjY4Nzg2MjYsNDQuMzIzNDMxIDcwLjY5ODM5MDIsNDQuMjk3NSA3MC43MDg5MTc4LDQ0LjI3NDgxMDMgQzcwLjcxMDUzNzQsNDQuMjcxNTY5IDcwLjczMzIxMjMsNDQuMjI3IDcwLjczNDgzMTksNDQuMjIzNzU4NiBDNzAuNzk3OTk3NSw0NC4wOTI0ODI4IDcwLjg2NzY0MTcsNDMuOTYyODI3NiA3MC45MzcyODU5LDQzLjgzMDc0MTQgTDcxLjE4MjY2MDEsNDMuMzU2Njg5NyBDNzEuMjM2MTA4LDQzLjI2MjY4OTcgNzEuMjkxOTg1Myw0My4xNjc4NzkzIDcxLjM0ODY3MjQsNDMuMDczMDY5IEw3MS40MTUwNzczLDQyLjk2Mjg2MjEgQzcxLjUzNDkzMDEsNDIuNzYxMDg2MiA3MS42NTg4MzE5LDQyLjU1ODUgNzEuNzkwMDIyMSw0Mi4zNTY3MjQxIEM3MS44NzAxOTM5LDQyLjIzMjc0MTQgNzEuOTUzNjA0OSw0Mi4xMDg3NTg2IDcyLjAzNzgyNTgsNDEuOTg2Mzk2NiBDNzIuMTc1NDk0NSw0MS43ODYyNDE0IDcyLjMxODAyMjEsNDEuNTg2ODk2NiA3Mi40NjU0MDg2LDQxLjM4OTE3MjQgTDcyLjU2MTc3NjcsNDEuMjU3ODk2NiBDNzIuNjU0OTA1NSw0MS4xMzIyOTMxIDcyLjc0ODAzNDQsNDEuMDA1ODc5MyA3Mi44NDUyMTIzLDQwLjg4MjcwNjkgQzcyLjg4NDg5MzMsNDAuODMxNjU1MiA3Mi45MjcwMDM3LDQwLjc4MjIyNDEgNzIuOTY5MTE0MSw0MC43MzExNzI0IEw3My4wNTk4MTM1LDQwLjYyMzM5NjYgQzczLjIwOTYyOTQsNDAuNDQwMjU4NiA3My4zNTk0NDU0LDQwLjI1NzkzMSA3My41MzM1NTU4LDQwLjA1Nzc3NTkgQzczLjc2NTk3MywzOS43OTAzNjIxIDc0LjAxMDUzNzQsMzkuNTI0NTY5IDc0LjI2NDAwOTgsMzkuMjU5NTg2MiBDNzQuMzQ0MTgxNiwzOS4xNzUzMTAzIDc0LjQyNTE2MzIsMzkuMDkxMDM0NSA3NC41MDg1NzQyLDM5LjAwNjc1ODYgQzc0Ljc1NzE4NzcsMzguNzUxNSA3NS4wMTM4OTk0LDM4LjUwMDI5MzEgNzUuMjg1MTg3NywzOC4yNDM0MTM4IEw3NS4zNjEzMTA0LDM4LjE3MTI5MzEgQzc1LjQ1NjA1ODksMzguMDgxMzQ0OCA3NS41NTU2NjYzLDM3Ljk5MzgyNzYgNzUuNjU1MjczNiwzNy45MDM4NzkzIEw3NS44NzM5MjM5LDM3LjcwODU4NjIgQzc2LjAzODMxNjYsMzcuNTYxMTAzNCA3Ni4yMDE4OTk0LDM3LjQxNTI0MTQgNzYuMzcyNzcwNiwzNy4yNjkzNzkzIEM3Ni40NzM5OTc1LDM3LjE4NDI5MzEgNzYuNTc3NjU0LDM3LjA5ODM5NjYgNzYuNjgxMzEwNCwzNy4wMTMzMTAzIEw3Ni43ODkwMTYsMzYuOTIzMzYyMSBDNzcuMDIzODYyNiwzNi43MzEzMTAzIDc3LjI2MDMyODgsMzYuNTM5MjU4NiA3Ny41MDQwODM0LDM2LjM0ODgyNzYgQzc3LjY1NzEzODcsMzYuMjMwNTE3MiA3Ny44MTE4MTM1LDM2LjExMjIwNjkgNzcuOTY3Mjk4MiwzNS45OTQ3MDY5IEM3OC4yMTc1MzEzLDM1LjgwNTg5NjYgNzguNDc1MDUyOCwzNS42MTk1MTcyIDc4LjczNDE5MzksMzUuNDMzOTQ4MyBMNzguODA0NjQ3OSwzNS4zODQ1MTcyIEM3OC45MzkwNzczLDM1LjI4ODg5NjYgNzkuMDc0MzE2NiwzNS4xOTI0NjU1IDc5LjIxMDM2NTYsMzUuMDk3NjU1MiBDNzkuNTAxMDg5NiwzNC44OTgzMTAzIDc5Ljc5OTkxMTcsMzQuNzAwNTg2MiA4MC4xMDAzNTM0LDM0LjUwNTI5MzEgTDgwLjI3Njg5MzMsMzQuMzg4NjAzNCBDODAuMzcwMDIyMSwzNC4zMjc4Mjc2IDgwLjQ2MjM0MTEsMzQuMjY2MjQxNCA4MC41NjExMzg3LDM0LjIwNDY1NTIgTDgwLjgzNDg1NjQsMzQuMDM0NDgyOCBDODEuMTkzNjA0OSwzMy44MTE2Mzc5IDgxLjU1NTU5MjYsMzMuNTkwNDEzOCA4MS45MzA1Mzc0LDMzLjM3MTYyMDcgQzgyLjM0NzU5MjYsMzMuMTI5MzI3NiA4Mi43NzE5MzYyLDMyLjg5MzUxNzIgODMuMjAxMTM4NywzMi42NjA5NDgzIEM4My4yOTAyMTg0LDMyLjYxMzk0ODMgODMuMzc4NDg4MywzMi41NjY5NDgzIDgzLjQ2ODM3NzksMzIuNTIwNzU4NiBMODQuMjAyODgxLDMyLjEzOTA4NjIgQzg0LjMwMjQ4ODMsMzIuMDg3MjI0MSA4NC40MDI5MDU1LDMyLjAzNTM2MjEgODQuNTAxNzAzMSwzMS45ODUxMjA3IEw4NS4yOTM3MDMxLDMxLjYwMTAxNzIgQzg1LjQ3MjY3MjQsMzEuNTEzNSA4NS42NTI0NTE1LDMxLjQyNjc5MzEgODUuODM0NjYwMSwzMS4zNDI1MTcyIEM4Ni4wMTg0ODgzLDMxLjI1NjYyMDcgODYuMjA0NzQ2LDMxLjE3MzE1NTIgODYuMzkxMDAzNywzMS4wODg4NzkzIEM4Ni42NTc0MzMxLDMwLjk2ODk0ODMgODYuOTI1NDgyMiwzMC44NDkwMTcyIDg3LjE5NTE1MDksMzAuNzMzOTQ4MyBDODcuMzg1NDU3NywzMC42NTA0ODI4IDg3LjU3NjU3NDIsMzAuNTcwMjU4NiA4Ny43NzAxMjAyLDMwLjQ5MDAzNDUgQzg4LjAzOTc4OSwzMC4zNzczOTY2IDg4LjMxMTg4NzEsMzAuMjY2Mzc5MyA4OC41ODQ3OTUxLDMwLjE1Nzc5MzEgQzg4Ljc3NjcyMTUsMzAuMDgxNjIwNyA4OC45Njk0NTc3LDMwLjAwNDYzNzkgODkuMTYwNTc0MiwyOS45MzA4OTY2IEM4OS40MTA4MDc0LDI5LjgzNTI3NTkgODkuNjYxMDQwNSwyOS43NDIwODYyIDg5LjkxMjg5MzMsMjkuNjQ5NzA2OSBDODkuOTE1MzIyNywyOS42NDg4OTY2IDkwLjAwNDQwMjUsMjkuNjE1NjcyNCA5MC4wMDYwMjIxLDI5LjYxNDg2MjEgTDkwLjE0NDUwMDYsMjkuNTYzIEM5MC4yODYyMTg0LDI5LjUxMTk0ODMgOTAuNDI3MTI2NCwyOS40NTkyNzU5IDkwLjU3MTI3MzYsMjkuNDA5MDM0NSBDOTAuNjg1NDU3NywyOS4zNjc3MDY5IDkwLjgwMTI2MTMsMjkuMzI4ODEwMyA5MC45MTYyNTUyLDI5LjI4OTkxMzggTDkxLjAyODgxOTYsMjkuMjUxODI3NiBDOTEuMTc5NDQ1NCwyOS4xOTkxNTUyIDkxLjMzMDg4MSwyOS4xNDcyOTMxIDkxLjQ4MzkzNjIsMjkuMDk1NDMxIEw5Mi40NTI0NzYxLDI4Ljc4MDIwNjkgQzkyLjg4OTc3NjcsMjguNjQyNDQ4MyA5My4zMjcwNzczLDI4LjUwNzkzMSA5My43NjY4MDc0LDI4LjM3OTg5NjYgQzkzLjk2NjAyMjEsMjguMzIyMzYyMSA5NC4xNjYwNDY2LDI4LjI2NjQ0ODMgOTQuMzY3NjkwOCwyOC4yMDk3MjQxIEM5NC43NzA5NzkxLDI4LjA5Nzg5NjYgOTUuMTc1ODg3MSwyNy45ODg1IDk1LjU4MzIyNDUsMjcuODgzOTY1NSBMOTUuNzIyNTEyOSwyNy44NDkxMjA3IEM5NS44Njk4OTk0LDI3LjgxMDIyNDEgOTYuMDE2NDc2MSwyNy43NzIxMzc5IDk2LjE2Mzg2MjYsMjcuNzM1NjcyNCBDOTYuNjUyMTgxNiwyNy42MTY1NTE3IDk3LjE0MTMxMDQsMjcuNTAyMjkzMSA5Ny42MzY5MTc4LDI3LjM5MzcwNjkgTDk3Ljk0MDU5ODgsMjcuMzI0ODI3NiBDOTguNTMwOTU0NiwyNy4xOTc2MDM0IDk5LjEyMjkzMDEsMjcuMDgxNzI0MSA5OS43MTQwOTU3LDI2Ljk3MzEzNzkgTDEwMC4xMDc2NjYsMjYuOTA1ODc5MyBDMTAwLjcwMTI2MSwyNi44MDA1MzQ1IDEwMS4yOTQwNDcsMjYuNzA1NzI0MSAxMDEuODg3NjQyLDI2LjYxODIwNjkgTDEwMi4zNTI0NzYsMjYuNTUwOTQ4MyBDMTAzLjAzMjcyMSwyNi40NTY5NDgzIDEwMy43MTk0NDUsMjYuMzc1MTAzNCAxMDQuMzkyNDAyLDI2LjMwNjIyNDEgTDEwNC45MjQ0NTIsMjYuMjU2NzkzMSBDMTA1LjMxMzE2MywyNi4yMjAzMjc2IDEwNS43MDEwNjUsMjYuMTg3MTAzNCAxMDYuMDg5Nzc3LDI2LjE1OTU1MTcgQzEwNi4yOTc4OTksMjYuMTQ0MTU1MiAxMDYuNTA1MjEyLDI2LjEzMTE4OTcgMTA2LjcxODE5NCwyNi4xMTgyMjQxIEMxMDYuOTY1OTk4LDI2LjEwMzYzNzkgMTA3LjIxMjE4MiwyNi4wOTIyOTMxIDEwNy40NTkxNzUsMjYuMDgwOTQ4MyBMMTA3LjUxOTkxMiw0NS4yODQ1IEw4OS42Mjc4MzgsNTUuNjIxMjU4NiBMODYuMzQyNDE0Nyw0Ny43MTMxMDM0IEM4Ni4wMjkwMTYsNDYuOTU3MDUxNyA4NS41MDE4MjU4LDQ2LjQzNTE4OTcgODQuODE3NTMxMyw0Ni4yMDI2MjA3IEM4NC4wMDIwNDY2LDQ1LjkyNTQ4MjggODMuMDEwODMxOSw0Ni4wODgzNjIxIDgyLjAyMjg1NjQsNDYuNjU5NjU1MiBDODAuMzgyMTY5Myw0Ny42MDc3NTg2IDc5LjAwNTQ4MjIsNDkuNDg0NTE3MiA3OC40MzA1MTI5LDUxLjU1OSBMNzYuMjQ0MDA5OCw1OS40NTkwNTE3IEw3Ni4yNDQwMDk4LDU3LjQ1OTkzMSBaIE01OC4wMzEyNDkxLDExLjkwMTUzNDUgTDMuMjI1MzM0OTcsNDMuNjE4NDMxIEwzLjIyNTMzNDk3LDM3Ljc5NTI5MzEgQzMuMjI1MzM0OTcsMzUuMDY3NjcyNCA0LjY5MTEwMTg0LDMyLjUyNTYyMDcgNy4wNTA5MDU1MiwzMS4xNjAxODk3IEw1NC4zMDQ0NzYxLDMuODE0MjkzMSBDNTUuMDgyNzA5MiwzLjM2MjkzMTAzIDU2LjAxMDc1ODMsMy4zNjIxMjA2OSA1Ni43ODgxODE2LDMuODEyNjcyNDEgQzU3LjU2NjQxNDcsNC4yNjE2MDM0NSA1OC4wMzEyNDkxLDUuMDY2Mjc1ODYgNTguMDMxMjQ5MSw1Ljk2NDk0ODI4IEw1OC4wMzEyNDkxLDExLjkwMTUzNDUgWiBNMTI3LjIwOTc3NywyNS40Mzk5NjU1IEMxMjcuMTQ5ODUsMjUuNDA2NzQxNCAxMjcuMDg5OTI0LDI1LjM3NDMyNzYgMTI3LjAyOTk5OCwyNS4zNDI3MjQxIEMxMjYuOTUzMDY1LDI1LjMwMjIwNjkgMTI2Ljg4MDE4MiwyNS4yNjA4NzkzIDEyNi44MDMyNDksMjUuMjIwMzYyMSBDMTI2LjgwMjQzOSwyNS4yMTk1NTE3IDEyNi44MDE2MjksMjUuMjE5NTUxNyAxMjYuODAxNjI5LDI1LjIxOTU1MTcgQzEyNi42NDEyODYsMjUuMTM1Mjc1OSAxMjYuNDc5MzIzLDI1LjA1NDI0MTQgMTI2LjMxNTc0LDI0Ljk3MzIwNjkgQzEyNi4yOTcxMTQsMjQuOTY0MjkzMSAxMjYuMjc5Mjk4LDI0Ljk1NTM3OTMgMTI2LjI2MTQ4MiwyNC45NDU2NTUyIEMxMjYuMTU3ODI2LDI0Ljg5NTQxMzggMTI2LjA1MDkzLDI0Ljg0NTk4MjggMTI1LjkwNjc4MywyNC43Nzg3MjQxIEMxMjUuOTAzNTQ0LDI0Ljc3NjI5MzEgMTI1Ljg2NDY3MiwyNC43NTg0NjU1IDEyNS44NjA2MjMsMjQuNzU2MDM0NSBDMTI1Ljg0MzYxNywyNC43NDc5MzEgMTI1LjgyNDk5MSwyNC43NDE0NDgzIDEyNS44MDc5ODUsMjQuNzMyNTM0NSBDMTI1LjQ5Mjk2NywyNC41ODgyOTMxIDEyNS4xNzE0NywyNC40NDgxMDM0IDEyNC44NDUxMTQsMjQuMzEzNTg2MiBDMTI0Ljc5MjQ3NiwyNC4yOTA4OTY2IDEyNC43NDIyNjcsMjQuMjY2NTg2MiAxMjQuNjg4ODIsMjQuMjQ1NTE3MiBMMTI0LjU2MDg2OSwyNC4xOTEyMjQxIEMxMjQuNDg3OTg1LDI0LjE2MTI0MTQgMTI0LjQxNTEwMiwyNC4xMzEyNTg2IDEyNC4zNDA1OTksMjQuMTAyMDg2MiBDMTI0LjMxOTU0NCwyNC4wOTMxNzI0IDEyNC4yOTYwNTksMjQuMDg1ODc5MyAxMjQuMjc0MTk0LDI0LjA3Nzc3NTkgQzEyNC4yNTIzMjksMjQuMDY4ODYyMSAxMjQuMjI4MDM0LDI0LjA2MDc1ODYgMTI0LjIwNjE2OSwyNC4wNTE4NDQ4IEMxMjMuOTUzNTA3LDIzLjk1NjIyNDEgMTIzLjY5NzYwNSwyMy44NjMwMzQ1IDEyMy40MzkyNzQsMjMuNzcxNDY1NSBMMTIzLjI4NzgzOCwyMy43MTYzNjIxIEMxMjMuMjA1MjM3LDIzLjY4NjM3OTMgMTIzLjEyMTgyNiwyMy42NTYzOTY2IDEyMy4wMzc2MDUsMjMuNjI4MDM0NSBDMTIyLjU5NTQ0NSwyMy40Nzg5MzEgMTIyLjE0NTk5OCwyMy4zMzk1NTE3IDEyMS42ODY4MzIsMjMuMjA3NDY1NSBDMTIxLjI2ODE1NywyMy4wODgzNDQ4IDEyMC44NDMwMDQsMjIuOTc2NTE3MiAxMjAuNDEwNTYyLDIyLjg3MDM2MjEgQzEyMC4zMzM2MjksMjIuODUxNzI0MSAxMjAuMjU1MDc3LDIyLjgzNDcwNjkgMTIwLjE3NzMzNSwyMi44MTY4NzkzIEwxMjAuMDQxMjg2LDIyLjc4Njg5NjYgQzExOS43Mjg2OTcsMjIuNzEzOTY1NSAxMTkuNDE0NDg4LDIyLjY0MTg0NDggMTE5LjA5NDYxMSwyMi41NzYyMDY5IEwxMTguNjY3ODM4LDIyLjQ5NTk4MjggQzExOC4zNzIyNTUsMjIuNDM4NDQ4MyAxMTguMDc2NjcyLDIyLjM4MTcyNDEgMTE3Ljc3NzA0LDIyLjMzMTQ4MjggQzExNy42NTQ3NTgsMjIuMzExMjI0MSAxMTcuNTMxNjY2LDIyLjI5MjU4NjIgMTE3LjQwODU3NCwyMi4yNzMxMzc5IEwxMTcuMjU3MTM5LDIyLjI0OTYzNzkgQzExNi45ODE4MDEsMjIuMjA2Njg5NyAxMTYuNzA3Mjc0LDIyLjE2NDU1MTcgMTE2LjQzMDMxNywyMi4xMjcyNzU5IEMxMTYuMjY1MTE0LDIyLjEwNTM5NjYgMTE2LjA5OTEwMiwyMi4wODUxMzc5IDExNS45MzMwOSwyMi4wNjQwNjkgTDExNS44NjQyNTUsMjIuMDU1OTY1NSBDMTE1LjYwOTE2MywyMi4wMjUxNzI0IDExNS4zNTI0NTIsMjEuOTk1MTg5NyAxMTUuMTEwMzE3LDIxLjk3MDg3OTMgQzExNS4xMDQ2NDgsMjEuOTcwMDY5IDExNS4wNTI4MiwyMS45NjM1ODYyIDExNS4wNDc5NjEsMjEuOTYzNTg2MiBDMTE0Ljg1NTIyNSwyMS45NDQxMzc5IDExNC42NjAwNTksMjEuOTI0Njg5NyAxMTQuNDYzMjc0LDIxLjkwNjg2MjEgQzExNC4xOTY4NDQsMjEuODgzMzYyMSAxMTMuOTI4Nzk1LDIxLjg2MjI5MzEgMTEzLjY1OTEyNiwyMS44NDI4NDQ4IEMxMTMuNDQyMDk2LDIxLjgyNjYzNzkgMTEzLjIyNTA2NSwyMS44MTEyNDE0IDExMy4wMTQ1MTMsMjEuNzk5MDg2MiBMMTEyLjkyMDU3NCwyMS43OTQyMjQxIEMxMTIuNjgxNjc5LDIxLjc4MDQ0ODMgMTEyLjQ0MTE2MywyMS43NjgyOTMxIDExMi4xOTk4MzgsMjEuNzU3NzU4NiBDMTExLjk4MzYxNywyMS43NDg4NDQ4IDExMS43NjY1ODcsMjEuNzM5OTMxIDExMS41NDc5MzYsMjEuNzMzNDQ4MyBDMTExLjMyMzYxNywyMS43MjYxNTUyIDExMS4wOTg0ODgsMjEuNzIyOTEzOCAxMTAuODcyNTUsMjEuNzIwNDgyOCBMMTEwLjc4ODMyOSwyMS43MTg4NjIxIEMxMTAuMjc0MDk2LDIxLjcxMDc1ODYgMTA5Ljc2MTQ4MiwyMS43MDk5NDgzIDEwOS4yMzgzNDEsMjEuNzE3MjQxNCBDMTA4Ljk2ODY3MiwyMS43MjEyOTMxIDEwOC42OTk4MTMsMjEuNzI0NTM0NSAxMDguNDI4NTI1LDIxLjczMzQ0ODMgQzEwOC4yNTQ0MTUsMjEuNzM4MzEwMyAxMDguMDc5NDk0LDIxLjc0NTYwMzQgMTA3LjkwNDU3NCwyMS43NTI4OTY2IEwxMDcuNzU3MTg4LDIxLjc1Nzc1ODYgQzEwNy4zODIyNDMsMjEuNzczOTY1NSAxMDcuMDA1Njc5LDIxLjc5MjYwMzQgMTA2LjYyMDIwNiwyMS44MTY5MTM4IEMxMDYuNDA3MjI1LDIxLjgyOTA2OSAxMDYuMTk1MDUzLDIxLjg0Mjg0NDggMTA1Ljk4MjA3MSwyMS44NTc0MzEgQzEwNS41ODQ0NTIsMjEuODg2NjAzNCAxMDUuMTg2MDIyLDIxLjkyMTQ0ODMgMTA0Ljc4NTE2MywyMS45NTc5MTM4IEwxMDQuMjQwOTY3LDIyLjAwODE1NTIgQzEwMy41NjM5NjEsMjIuMDc3MDM0NSAxMDIuODYwMjMxLDIyLjE2MTMxMDMgMTAyLjE1MDAyMiwyMi4yNjAxNzI0IEwxMDEuNjczMDQsMjIuMzI5MDUxNyBDMTAxLjA2NDg2OSwyMi40MTczNzkzIDEwMC40NTc1MDcsMjIuNTE1NDMxIDk5Ljg0NjA5NTcsMjIuNjIzMjA2OSBMOTkuNDQ2MDQ2NiwyMi42OTIwODYyIEM5OC44Mzk0OTQ1LDIyLjgwMzEwMzQgOTguMjMzNzUyMSwyMi45MjIyMjQxIDk3LjYyMzE1MDksMjMuMDUzNSBMOTcuMzEyMTgxNiwyMy4xMjQgQzk2LjgxMDA5NTcsMjMuMjM1MDE3MiA5Ni4zMDgwMDk4LDIzLjM1MDA4NjIgOTUuODA4MzUzNCwyMy40NzQ4NzkzIEM5NS42MzkxMDE4LDIzLjUxNTM5NjYgOTUuNDcwNjYwMSwyMy41NTkxNTUyIDk1LjMwMjIxODQsMjMuNjAyOTEzOCBMOTUuMjEyMzI4OCwyMy42MjU2MDM0IEM5NC43OTYwODM0LDIzLjczMjU2OSA5NC4zODA2NDc5LDIzLjg0NDM5NjYgOTMuOTY2MDIyMSwyMy45NTk0NjU1IEM5My43NjExMzg3LDI0LjAxNyA5My41NTYyNTUyLDI0LjA3NDUzNDUgOTMuMzUwNTYyLDI0LjEzMzY4OTcgQzkyLjkwMDMwNDMsMjQuMjY0OTY1NSA5Mi40NTE2NjYzLDI0LjQwMjcyNDEgOTIuMDAzODM4LDI0LjU0NDUzNDUgTDkxLjgxNzU4MDQsMjQuNjAyMDY5IEM5MS43MjIwMjIxLDI0LjYzMTI0MTQgOTEuNjI3MjczNiwyNC42NjA0MTM4IDkxLjUzMzMzNSwyNC42OTEyMDY5IEM5MS40MTUxMDE4LDI0LjcyOTI5MzEgOTEuMjk2ODY4NywyNC43Njk4MTAzIDkxLjE3ODYzNTYsMjQuODEwMzI3NiBMOTAuMDc0MDQ2NiwyNS4xODg3NTg2IEM4OS45MjUwNDA1LDI1LjI0MTQzMSA4OS43Nzc2NTQsMjUuMjk1NzI0MSA4OS42MzAyNjc1LDI1LjM1MDAxNzIgTDg5LjM5Nzg1MDMsMjUuNDM1OTEzOCBDODkuMTQwMzI4OCwyNS41MzE1MzQ1IDg4Ljg4MjgwNzQsMjUuNjI2MzQ0OCA4OC42MjYwOTU3LDI1LjcyNTIwNjkgQzg4LjQyNjg4MSwyNS44MDIxODk3IDg4LjIzMDA5NTcsMjUuODc5MTcyNCA4OC4wMzQxMjAyLDI1Ljk1ODU4NjIgQzg3Ljc1MzExNDEsMjYuMDcwNDEzOCA4Ny40NzM3Mjc2LDI2LjE4MzA1MTcgODcuMTk1OTYwNywyNi4yOTk3NDE0IEM4Ny4xMDkzMTA0LDI2LjMzNjIwNjkgODcuMDIyNjYwMSwyNi4zNzI2NzI0IDg2LjkzNjAwOTgsMjYuNDA5OTQ4MyBDODYuODk4NzU4MywyNi40MjUzNDQ4IDg2Ljg2MDY5NjksMjYuNDQxNTUxNyA4Ni44MjI2MzU2LDI2LjQ1Njk0ODMgQzg2Ljc1MDU2MiwyNi40ODc3NDE0IDg2LjY3NzY3ODUsMjYuNTE3NzI0MSA4Ni42MDU2MDQ5LDI2LjU0OTMyNzYgQzg2LjMyNzgzOCwyNi42NjkyNTg2IDg2LjA1MjUwMDYsMjYuNzkxNjIwNyA4NS43Nzg3ODI4LDI2LjkxNTYwMzQgQzg1LjcxMDc1ODMsMjYuOTQ2Mzk2NiA4NS42NDM1NDM2LDI2Ljk3NzE4OTcgODUuNTc1NTE5LDI3LjAwNzE3MjQgQzg1LjQ4NjQzOTMsMjcuMDQ4NSA4NS4zOTY1NDk3LDI3LjA4OTAxNzIgODUuMzA3NDY5OSwyNy4xMjk1MzQ1IEM4NS4yNzM0NTc3LDI3LjE0NTc0MTQgODUuMjM5NDQ1NCwyNy4xNTk1MTcyIDg1LjIwNjI0MjksMjcuMTc1NzI0MSBDODUuMDQxMDQwNSwyNy4yNTI3MDY5IDg0Ljg3ODI2NzUsMjcuMzMxMzEwMyA4NC43MTU0OTQ1LDI3LjQwOTkxMzggTDg0LjIwNzczOTksMjcuNjU0NjM3OSBDODQuMTk1NTkyNiwyNy42NjExMjA3IDg0LjE4MzQ0NTQsMjcuNjY2NzkzMSA4NC4xNzEyOTgyLDI3LjY3MjQ2NTUgQzg0LjA3MDg4MSwyNy43MjE4OTY2IDgzLjk3MDQ2MzgsMjcuNzY5NzA2OSA4My44NzA4NTY0LDI3LjgxOTk0ODMgQzgzLjg1ODcwOTIsMjcuODI2NDMxIDgzLjg0NjU2MiwyNy44MzIxMDM0IDgzLjgzNDQxNDcsMjcuODM3Nzc1OSBDODMuNzI1ODk5NCwyNy44OTI4NzkzIDgzLjYxOTgxMzUsMjcuOTQ3OTgyOCA4My41MTI5MTc4LDI4LjAwMzg5NjYgTDgzLjE1NDk3OTEsMjguMTkwMjc1OSBDODIuOTM2MzI4OCwyOC4zMDQ1MzQ1IDgyLjcxNTI0OTEsMjguNDE1NTUxNyA4Mi40OTkwMjgyLDI4LjUzMjI0MTQgTDgyLjQ5MzM1OTUsMjguNTM1NDgyOCBDODIuMDUxMiwyOC43NzQ1MzQ1IDgxLjYxMzA4OTYsMjkuMDE3NjM3OSA4MS4xODIyNjc1LDI5LjI2ODg0NDggQzgwLjc5NTE3NTUsMjkuNDkzMzEwMyA4MC40MjAyMzA3LDI5LjcyMzQ0ODMgODAuMDUwOTU0NiwyOS45NTI3NzU5IEw3OS43NjI2NjAxLDMwLjEzMTA1MTcgQzc5Ljc1NjE4MTYsMzAuMTM1MTAzNCA3OS43NTA1MTI5LDMwLjEzOTE1NTIgNzkuNzQ0ODQ0MiwzMC4xNDIzOTY2IEM3OS42MDE1MDY3LDMwLjIzMjM0NDggNzkuNDY1NDU3NywzMC4zMjU1MzQ1IDc5LjMyNDU0OTcsMzAuNDE3MTAzNCBMNzkuMjg4MTA4LDMwLjQ0MDYwMzQgQzc5LjIyNzM3MTgsMzAuNDgwMzEwMyA3OS4xNjk4NzQ4LDMwLjUyMDAxNzIgNzkuMTA5OTQ4NSwzMC41NTk3MjQxIEM3Mi4zODkyODU5LDM0Ljk3NzcyNDEgNjguNDQyMjQyOSw0MC4zMjM1NjkgNjguMDcyMTU3MSw0NS41NTY3NzU5IEw2OC4wNTExMDE4LDQ1Ljg0NzY4OTcgQzY4LjA0Nzg2MjYsNDUuOTA5Mjc1OSA2OC4wNTExMDE4LDQ1Ljk3MDg2MjEgNjguMDQ4NjcyNCw0Ni4wMzMyNTg2IEM2OC4wNDU0MzMxLDQ2LjE0ODMyNzYgNjguMDMyNDc2MSw0Ni4yNjQyMDY5IDY4LjAzMjQ3NjEsNDYuMzc4NDY1NSBDNjguMDM4MTQ0OCw1MC4wMjUwMTcyIDY5Ljc5OTQ5NDUsNTMuMjI3NSA3My4xNDU2NTQsNTUuNzUwOTEzOCBDNzMuMTU1MzcxOCw1NS43NTgyMDY5IDczLjE2NTg5OTQsNTUuNzY2MzEwMyA3My4xNzY0MjcsNTUuNzczNjAzNCBDNzMuMzYxODc0OCw1NS45MTI5ODI4IDczLjU1MDU2Miw1Ni4wNDk5MzEgNzMuNzQ1NzI3Niw1Ni4xODUyNTg2IEM3My43ODM3ODksNTYuMjExMTg5NyA3My44MjE4NTAzLDU2LjIzNzkzMSA3My44NTk5MTE3LDU2LjI2Mzg2MjEgQzczLjg3NDQ4ODMsNTYuMjczNTg2MiA3My44ODY2MzU2LDU2LjI4MzMxMDMgNzMuOTAwNDAyNSw1Ni4yOTMwMzQ1IEw3My4xODkzODQsNTYuNzAzMDY5IEwzOC41NjQ4OTMzLDM2LjY5OTcwNjkgTDY4LjIyODQ1MTUsMTkuNTMzMzYyMSBDNjguMjMyNTAwNiwxOS41MzA5MzEgNjguMjM3MzU5NSwxOS41Mjc2ODk3IDY4LjI0MTQwODYsMTkuNTI2MDY5IEw5My4zNzY0NzYxLDQuOTc5NTY4OTcgTDEyOC4wMDAxNTcsMjQuOTgzNzQxNCBMMTI3LjIwOTc3NywyNS40Mzk5NjU1IFogTTEyOC4wMDUwMTYsMjkuMjMzMTg5NyBDMTI4LjAxMzkyNCwyOS4xNzI0MTM4IDEyOC4wMTIzMDQsMjkuMTEwODI3NiAxMjguMDA1MDE2LDI5LjA0OTI0MTQgTDEyOC4wMTE0OTQsMjYuNjk3NjIwNyBMMTI4Ljc0NDM3OCwyNi4yNzQ2MjA3IEwxMjguNzQ0Mzc4LDU3Ljc0MTkzMSBMMTI3LjkyOTcwMyw1OC4yMTM1NTE3IEwxMjguMDA1MDE2LDI5LjIzMzE4OTcgWiBNMTA4LjI2NjU2Miw0Ni41NzM3NTg2IEwxMTkuNDkyMjMxLDUzLjA1OTc1ODYgQzExOS4zMzE4ODcsNTMuMDIzMjkzMSAxMTkuMTczMTYzLDUyLjk4NjAxNzIgMTE5LjAxMDM5LDUyLjk1Mjc5MzEgQzExOC45MTQwMjIsNTIuOTMyNTM0NSAxMTguODE2MDM0LDUyLjkxNDcwNjkgMTE4LjcxODA0Nyw1Mi44OTYwNjkgTDExOC41ODExODgsNTIuODcwOTQ4MyBDMTE4LjI4NjQxNSw1Mi44MTQyMjQxIDExNy45OTI0NTIsNTIuNzU4MzEwMyAxMTcuNjkyMDEsNTIuNzA3MjU4NiBDMTE3LjU2ODEwOCw1Mi42ODYxODk3IDExNy40NDI1ODcsNTIuNjY3NTUxNyAxMTcuMzE3ODc1LDUyLjY0ODEwMzQgTDExNy4xNjk2NzksNTIuNjI0NjAzNCBDMTE2Ljg5NTk2MSw1Mi41ODI0NjU1IDExNi42MjE0MzMsNTIuNTQxMTM3OSAxMTYuMzQyODU2LDUyLjUwMzA1MTcgQzExNi4xNTQ5NzksNTIuNDc4NzQxNCAxMTUuOTY2MjkyLDUyLjQ1NDQzMSAxMTUuNzc1OTg1LDUyLjQzMTc0MTQgQzExNS41MDU1MDcsNTIuMzk5MzI3NiAxMTUuMjM1MDI4LDUyLjM2NzcyNDEgMTE0Ljk2MDUwMSw1Mi4zMzkzNjIxIEMxMTQuNzY3NzY0LDUyLjMxOTEwMzQgMTE0LjU3MjU5OSw1Mi4zMDEyNzU5IDExNC4zNzgyNDMsNTIuMjgyNjM3OSBDMTE0LjExMTgxMyw1Mi4yNTkxMzc5IDExMy44NDIxNDUsNTIuMjM4MDY5IDExMy41NzI0NzYsNTIuMjE3ODEwMyBDMTEzLjM1NjI1NSw1Mi4yMDI0MTM4IDExMy4xMzkyMjUsNTIuMTg3MDE3MiAxMTIuOTIyMTk0LDUyLjE3NDg2MjEgQzExMi42NTQxNDUsNTIuMTU4NjU1MiAxMTIuMzg0NDc2LDUyLjE0NTY4OTcgMTEyLjExNTYxNyw1Mi4xMzQzNDQ4IEMxMTEuODk4NTg3LDUyLjEyNDYyMDcgMTExLjY4MDc0Niw1Mi4xMTU3MDY5IDExMS40NjA0NzYsNTIuMTA5MjI0MSBDMTExLjIzNjE1Nyw1Mi4xMDE5MzEgMTExLjAxMTAyOCw1Mi4wOTg2ODk3IDExMC43ODY3MDksNTIuMDk1NDQ4MyBMMTEwLjcwMjQ4OCw1Mi4wOTM4Mjc2IEMxMTAuMTg2NjM2LDUyLjA4NjUzNDUgMTA5LjY2ODM1Myw1Mi4wODU3MjQxIDEwOS4xNTI1MDEsNTIuMDkzMDE3MiBDMTA4Ljg4MjgzMiw1Mi4wOTcwNjkgMTA4LjYxMzE2Myw1Mi4xMDExMjA3IDEwOC4zNDI2ODUsNTIuMTA5MjI0MSBDMTA4LjExOTk4NSw1Mi4xMTU3MDY5IDEwNy44OTY0NzYsNTIuMTI0NjIwNyAxMDcuNjczNzc3LDUyLjEzNDM0NDggQzEwNy4yOTcyMTIsNTIuMTQ4OTMxIDEwNi45MTk4MzgsNTIuMTY4Mzc5MyAxMDYuNTQxNjU0LDUyLjE5MTg3OTMgQzEwNi4zMjcwNTMsNTIuMjA0ODQ0OCAxMDYuMTEyNDUyLDUyLjIxNzgxMDMgMTA1Ljg5Nzg1LDUyLjIzNDAxNzIgQzEwNS40OTg2MTEsNTIuMjYyMzc5MyAxMDUuMDk4NTYyLDUyLjI5NjQxMzggMTA0LjY5OTMyMyw1Mi4zMzM2ODk3IEwxMDQuNTIzNTkzLDUyLjM0OTA4NjIgQzEwNC40MDA1MDEsNTIuMzYwNDMxIDEwNC4yNzc0MDksNTIuMzcxNzc1OSAxMDQuMTUzNTA3LDUyLjM4MzkzMSBDMTAzLjQ3ODkzLDUyLjQ1MjgxMDMgMTAyLjc3NTIsNTIuNTM3ODk2NiAxMDIuMDYwMTMzLDUyLjYzNTk0ODMgTDEwMS41ODk2MjksNTIuNzA0ODI3NiBDMTAwLjk4MDY0OCw1Mi43OTMxNTUyIDEwMC4zNzE2NjYsNTIuODkwMzk2NiA5OS43NjI2ODQ3LDUyLjk5ODE3MjQgTDk5LjM1OTM5NjMsNTMuMDY3ODYyMSBDOTguNzUzNjU0LDUzLjE3OTY4OTcgOTguMTQ3MTAxOCw1My4yOTggOTcuNTQxMzU5NSw1My40Mjc2NTUyIEw5Ny4yMjcxNTA5LDUzLjQ5OTc3NTkgQzk2LjcyMzQ0NTQsNTMuNjA5OTgyOCA5Ni4yMjIxNjkzLDUzLjcyNjY3MjQgOTUuNzIwODkzMyw1My44NTA2NTUyIEM5NS42OTE3Mzk5LDUzLjg1NzEzNzkgOTUuNjYyNTg2NSw1My44NjUyNDE0IDk1LjYzNDI0MjksNTMuODcxNzI0MSBMMTA4LjI2NjU2Miw0Ni41NzM3NTg2IFogTTEwOS4wMDkxNjMsNDUuMjgyODc5MyBMMTA4Ljk0ODQyNywyNi4wMjkwODYyIEMxMDkuMDUyODkzLDI2LjAyNjY1NTIgMTA5LjE1NjU1LDI2LjAyNDIyNDEgMTA5LjI2MDIwNiwyNi4wMjI2MDM0IEMxMDkuNzY1NTMxLDI2LjAxNTMxMDMgMTEwLjI2NTk5OCwyNi4wMTUzMTAzIDExMC43NjY0NjQsMjYuMDIzNDEzOCBMMTEwLjg0OTg3NSwyNi4wMjQyMjQxIEMxMTEuMDY4NTI1LDI2LjAyODI3NTkgMTExLjI4NzE3NSwyNi4wMzE1MTcyIDExMS41MDI1ODcsMjYuMDM4IEMxMTEuNzE0NzU4LDI2LjA0MzY3MjQgMTExLjkyNTMxLDI2LjA1MzM5NjYgMTEyLjEzNzQ4MiwyNi4wNjMxMjA3IEMxMTIuMzcxNTE5LDI2LjA3MjAzNDUgMTEyLjYwMzEyNiwyNi4wODMzNzkzIDExMi44Mzk1OTMsMjYuMDk3MTU1MiBDMTEyLjg0MTIxMiwyNi4wOTcxNTUyIDExMi45MTgxNDUsMjYuMTAxMjA2OSAxMTIuOTE5NzY0LDI2LjEwMTIwNjkgQzExMy4xMzExMjYsMjYuMTEzMzYyMSAxMTMuMzQwODY5LDI2LjEyNzk0ODMgMTEzLjU1MDYxMSwyNi4xNDQxNTUyIEMxMTMuODExMzcyLDI2LjE2Mjc5MzEgMTE0LjA3MTMyMywyNi4xODMwNTE3IDExNC4zMzA0NjQsMjYuMjA3MzYyMSBDMTE0LjUxOTE1MSwyNi4yMjM1NjkgMTE0LjcwNjIxOCwyNi4yNDEzOTY2IDExNC45NDEwNjUsMjYuMjY2NTE3MiBDMTE1LjE5MDQ4OCwyNi4yOTI0NDgzIDExNS40Mzc0ODIsMjYuMzIgMTE1LjY4Mjg1NiwyNi4zNDk5ODI4IEMxMTUuODY2Njg1LDI2LjM3MjY3MjQgMTE2LjA0ODg5MywyNi4zOTUzNjIxIDExNi4yMjk0ODIsMjYuNDE4ODYyMSBDMTE2LjQ5NzUzMSwyNi40NTUzMjc2IDExNi43NjMxNTEsMjYuNDk1ODQ0OCAxMTcuMDI5NTgsMjYuNTM3OTgyOCBMMTE3LjE0NTM4NCwyNi41NTU4MTAzIEMxMTcuMjczMzM1LDI2LjU3NTI1ODYgMTE3LjQwMjA5NiwyNi41OTQ3MDY5IDExNy41MzAwNDcsMjYuNjE2NTg2MiBDMTE3LjgxNzUzMSwyNi42NjUyMDY5IDExOC4xMDE3NzcsMjYuNzE4Njg5NyAxMTguMzg1MjEyLDI2Ljc3Mzc5MzEgTDExOC43OTc0MDksMjYuODUyMzk2NiBDMTE5LjEwMjcwOSwyNi45MTQ3OTMxIDExOS40MDMxNTEsMjYuOTgzNjcyNCAxMTkuNzAyNzgzLDI3LjA1NDE3MjQgTDEyMC4wNTgyOTIsMjcuMTMzNTg2MiBDMTIwLjQ3MTI5OCwyNy4yMzQwNjkgMTIwLjg3NzgyNiwyNy4zNDE4NDQ4IDEyMS4yNzc4NzUsMjcuNDU2MTAzNCBDMTIxLjcxNDM2NiwyNy41ODA4OTY2IDEyMi4xNDM1NjgsMjcuNzE0NjAzNCAxMjIuNTY0NjcyLDI3Ljg1NjQxMzggQzEyMi42MzUxMjYsMjcuODc5OTEzOCAxMjIuNzA1NTgsMjcuOTA1MDM0NSAxMjIuNzc1MjI1LDI3LjkzMTc3NTkgTDEyMi45NDUyODYsMjcuOTkyNTUxNyBDMTIzLjIzMjc3MSwyOC4wOTQ2NTUyIDEyMy41MjAyNTUsMjguMTk2NzU4NiAxMjMuNzk5NjQyLDI4LjMwNTM0NDggQzEyMy44NjExODgsMjguMzI5NjU1MiAxMjMuOTIwMzA0LDI4LjM1Mzk2NTUgMTIzLjk4MDIzMSwyOC4zNzkwODYyIEwxMjQuMTI3NjE3LDI4LjQ0MDY3MjQgQzEyNC41MDMzNzIsMjguNTkzODI3NiAxMjQuODcxODM4LDI4Ljc1NDI3NTkgMTI1LjIzMzAxNiwyOC45MjM2Mzc5IEwxMjUuNjA2MzQxLDI5LjA5OTQ4MjggQzEyNS43Nzk2NDIsMjkuMTg0NTY5IDEyNS45NTA1MTMsMjkuMjcyMDg2MiAxMjYuMTE3MzM1LDI5LjM1NzE3MjQgQzEyNi4yNTE3NjQsMjkuNDI3NjcyNCAxMjYuMzgyMTQ1LDI5LjUwMTQxMzggMTI2LjUxNDE0NSwyOS41NzI3MjQxIEwxMjYuNDQ3NzQsNTUuMzU3MDg2MiBMMTA5LjAwOTE2Myw0NS4yODI4NzkzIFogTTc5LjEwOTEzODcsMzIuMzU0NjM3OSBDNzkuMTM3NDgyMiwzMi4zMzUxODk3IDc5LjE2NDIwNjEsMzIuMzE1NzQxNCA3OS4xOTE3Mzk5LDMyLjI5NjI5MzEgQzc5LjU4NzczOTksMzIuMDIxNTg2MiA3OS45OTUwNzczLDMxLjc1MjU1MTcgODAuNDEyMTMyNSwzMS40ODU5NDgzIEM4MC40NTUwNTI4LDMxLjQ1NzU4NjIgODAuNDk4NzgyOCwzMS40MjkyMjQxIDgwLjU0MjUxMjksMzEuNDAxNjcyNCBDODAuOTkzNTgwNCwzMS4xMTQ4MTAzIDgxLjQ1NTk4NTMsMzAuODM0NDMxIDgxLjkzMDUzNzQsMzAuNTU4MTAzNCBDODIuMzUwMDIyMSwzMC4zMTMzNzkzIDgyLjc3Njc5NTEsMzAuMDc1OTQ4MyA4My4yMDY4MDc0LDI5Ljg0MzM3OTMgTDg0LjAxODI0MjksMjkuNDIwMzc5MyBDODQuMTcwNDg4MywyOS4zNDI1ODYyIDg0LjMyMTExNDEsMjkuMjYxNTUxNyA4NC40NzQxNjkzLDI5LjE4NDU2OSBMODQuNTAxNzAzMSwyOS4xNzA3OTMxIEw4NS4zMDUwNDA1LDI4Ljc4MDIwNjkgQzg1LjQ4NDgxOTYsMjguNjk0MzEwMyA4NS42NjI5NzkxLDI4LjYwNjc5MzEgODUuODQ0Mzc3OSwyOC41MjI1MTcyIEM4Ni4wMjQ5NjY5LDI4LjQzOTA1MTcgODYuMjA3OTg1MywyOC4zNTYzOTY2IDg2LjM5MTAwMzcsMjguMjczNzQxNCBDODYuNjU3NDMzMSwyOC4xNTM4MTAzIDg2LjkyNTQ4MjIsMjguMDM0Njg5NyA4Ny4xOTUxNTA5LDI3LjkxODgxMDMgQzg3LjM4NjI2NzUsMjcuODM2MTU1MiA4Ny41NzgxOTM5LDI3Ljc1NTEyMDcgODcuNzcwMTIwMiwyNy42NzQwODYyIEM4OC4wMzk3ODksMjcuNTYyMjU4NiA4OC4zMTE4ODcxLDI3LjQ1MjA1MTcgODguNTg0Nzk1MSwyNy4zNDM0NjU1IEM4OC43NzY3MjE1LDI3LjI2NjQ4MjggODguOTY5NDU3NywyNy4xOTExMjA3IDg5LjE2MDU3NDIsMjcuMTE2NTY5IEM4OS40MTA4MDc0LDI3LjAyMDk0ODMgODkuNjYxMDQwNSwyNi45MjY5NDgzIDg5LjkxMjg5MzMsMjYuODM0NTY5IEM4OS45MTUzMjI3LDI2LjgzMzc1ODYgOTAuMDA0NDAyNSwyNi44MDA1MzQ1IDkwLjAwNjAyMjEsMjYuNzk5NzI0MSBMOTAuMTQ0NTAwNiwyNi43NDk0ODI4IEM5MC4yODYyMTg0LDI2LjY5NjgxMDMgOTAuNDI3MTI2NCwyNi42NDQ5NDgzIDkwLjU3MTI3MzYsMjYuNTkzODk2NiBMOTEuNjU0ODA3NCwyNi4yMjI3NTg2IEM5MS43NjczNzE4LDI2LjE4Mzg2MjEgOTEuODc5OTM2MiwyNi4xNDQ5NjU1IDkxLjk5NTczOTksMjYuMTA4NSBMOTIuNDUyNDc2MSwyNS45NjU4NzkzIEM5Mi44ODk3NzY3LDI1LjgyNzMxMDMgOTMuMzI3MDc3MywyNS42OTM2MDM0IDkzLjc2NjgwNzQsMjUuNTY1NTY5IEM5My45NjY4MzE5LDI1LjUwNzIyNDEgOTQuMTY2ODU2NCwyNS40NTEzMTAzIDk0LjM2NzY5MDgsMjUuMzk1Mzk2NiBDOTQuNzcwOTc5MSwyNS4yODE5NDgzIDk1LjE3NjY5NjksMjUuMTczMzYyMSA5NS41ODMyMjQ1LDI1LjA2ODgyNzYgTDk1LjY3MzkyMzksMjUuMDQ2MTM3OSBDOTUuODM3NTA2NywyNS4wMDQgOTYuMDAwMjc5OCwyNC45NjE4NjIxIDk2LjE2Mzg2MjYsMjQuOTIxMzQ0OCBDOTYuNjUyMTgxNiwyNC44MDE0MTM4IDk3LjE0MTMxMDQsMjQuNjg3MTU1MiA5Ny42MzA0MzkzLDI0LjU4MDE4OTcgTDk3Ljk0MDU5ODgsMjQuNTA5Njg5NyBDOTguNTMwOTU0NiwyNC4zODMyNzU5IDk5LjEyMjkzMDEsMjQuMjY2NTg2MiA5OS43MTQwOTU3LDI0LjE1OCBMMTAwLjEwNjg1NiwyNC4wODk5MzEgQzEwMC43MDEyNjEsMjMuOTg1Mzk2NiAxMDEuMjk0MDQ3LDIzLjg5MDU4NjIgMTAxLjg4NzY0MiwyMy44MDM4NzkzIEwxMDIuMzUyNDc2LDIzLjczNjYyMDcgQzEwMy4wNDY0ODgsMjMuNjQxIDEwMy43MzI0MDIsMjMuNTU4MzQ0OCAxMDQuMzkyNDAyLDIzLjQ5MTA4NjIgTDEwNC45MjI4MzIsMjMuNDQyNDY1NSBDMTA1LjMxMjM1MywyMy40MDYgMTA1LjcwMTA2NSwyMy4zNzI3NzU5IDEwNi4wODk3NzcsMjMuMzQ0NDEzOCBDMTA2LjI5Nzg5OSwyMy4zMjk4Mjc2IDEwNi41MDUyMTIsMjMuMzE2MDUxNyAxMDYuNzE5MDA0LDIzLjMwMzg5NjYgQzEwNy4wODc0NywyMy4yODEyMDY5IDEwNy40NTM1MDcsMjMuMjYyNTY5IDEwNy44MTc5MjQsMjMuMjQ3MTcyNCBMMTA3Ljk2NTMxLDIzLjI0MTUgQzEwOC4xMzM3NTIsMjMuMjM1MDE3MiAxMDguMzAzMDA0LDIzLjIyNzcyNDEgMTA4LjQ3MjI1NSwyMy4yMjI4NjIxIEMxMDguNzM1NDQ1LDIzLjIxNTU2OSAxMDguOTk3ODI2LDIzLjIxMTUxNzIgMTA5LjI2MDIwNiwyMy4yMDc0NjU1IEMxMDkuNzY1NTMxLDIzLjIwMDk4MjggMTEwLjI2NTk5OCwyMy4yMDE3OTMxIDExMC43NjY0NjQsMjMuMjA4Mjc1OSBMMTEwLjg0OTg3NSwyMy4yMDkwODYyIEMxMTEuMDY4NTI1LDIzLjIxMzEzNzkgMTExLjI4NzE3NSwyMy4yMTYzNzkzIDExMS41MDQyMDYsMjMuMjIyODYyMSBDMTExLjcxNjM3OCwyMy4yMjkzNDQ4IDExMS45MjYxMiwyMy4yMzkwNjkgMTEyLjEzNTg2MywyMy4yNDcxNzI0IEMxMTIuMzY5ODk5LDIzLjI1Njg5NjYgMTEyLjYwMzEyNiwyMy4yNjkwNTE3IDExMi44Mzk1OTMsMjMuMjgyMDE3MiBDMTEyLjg0MTIxMiwyMy4yODIwMTcyIDExMi45MTgxNDUsMjMuMjg2MDY5IDExMi45MTk3NjQsMjMuMjg2MDY5IEMxMTMuMTMxMTI2LDIzLjI5OTAzNDUgMTEzLjM0MDg2OSwyMy4zMTM2MjA3IDExMy41NTA2MTEsMjMuMzI5MDE3MiBDMTEzLjgxMTM3MiwyMy4zNDc2NTUyIDExNC4wNzEzMjMsMjMuMzY5NTM0NSAxMTQuMzMyMDgzLDIzLjM5MjIyNDEgQzExNC41MTk5NjEsMjMuNDA5MjQxNCAxMTQuNzA3MDI4LDIzLjQyNzA2OSAxMTQuOTQxMDY1LDIzLjQ1MTM3OTMgQzExNS4xOTA0ODgsMjMuNDc3MzEwMyAxMTUuNDM3NDgyLDIzLjUwNTY3MjQgMTE1LjY4Mjg1NiwyMy41MzU2NTUyIEwxMTUuNzUxNjkxLDIzLjU0NDU2OSBDMTE1LjkxMTIyNSwyMy41NjMyMDY5IDExNi4wNzA3NTgsMjMuNTgyNjU1MiAxMTYuMjI5NDgyLDIzLjYwNDUzNDUgQzExNi40OTgzNDEsMjMuNjQxODEwMyAxMTYuNzYzOTYxLDIzLjY4MTUxNzIgMTE3LjAyNzk2MSwyMy43MjIwMzQ1IEwxMTcuMTgxODI2LDIzLjc0NzE1NTIgQzExNy4yOTg0MzksMjMuNzY0MTcyNCAxMTcuNDE0MjQzLDIzLjc4MTE4OTcgMTE3LjUzMDA0NywyMy44MDE0NDgzIEMxMTcuODE3NTMxLDIzLjg1MDA2OSAxMTguMTAxNzc3LDIzLjkwNDM2MjEgMTE4LjM4NzY0MiwyMy45NTk0NjU1IEwxMTguNzk3NDA5LDI0LjAzNzI1ODYgQzExOS4xMDI3MDksMjQuMDk5NjU1MiAxMTkuNDAzMTUxLDI0LjE2OTM0NDggMTE5LjcwNTIxMiwyNC4yMzkwMzQ1IEwxMjAuMDU3NDgyLDI0LjMxODQ0ODMgQzEyMC40NzA0ODgsMjQuNDE5NzQxNCAxMjAuODc3ODI2LDI0LjUyNTg5NjYgMTIxLjI3Nzg3NSwyNC42NDA5NjU1IEMxMjEuNzE0MzY2LDI0Ljc2NTc1ODYgMTIyLjE0Mjc1OCwyNC44OTg2NTUyIDEyMi41NjQ2NzIsMjUuMDQxMjc1OSBDMTIyLjYzNTEyNiwyNS4wNjQ3NzU5IDEyMi43MDU1OCwyNS4wOTA3MDY5IDEyMi43NzUyMjUsMjUuMTE2NjM3OSBMMTIyLjk0NjA5NiwyNS4xNzgyMjQxIEMxMjMuMjMzNTgsMjUuMjc4NzA2OSAxMjMuNTIwMjU1LDI1LjM4MTYyMDcgMTIzLjc5OTY0MiwyNS40OTEwMTcyIEMxMjMuODYyODA3LDI1LjUxNDUxNzIgMTIzLjkyMjczNCwyNS41NDA0NDgzIDEyMy45ODM0NywyNS41NjYzNzkzIEwxMjQuMTI3NjE3LDI1LjYyNjM0NDggQzEyNC41MDQxODIsMjUuNzc4Njg5NyAxMjQuODcyNjQ4LDI1Ljk0MDc1ODYgMTI1LjI1NjUwMSwyNi4xMTkwMzQ1IEMxMjUuMjYwNTUsMjYuMTIwNjU1MiAxMjUuMzEzOTk4LDI2LjE0NjU4NjIgMTI1LjMxODA0NywyNi4xNDgyMDY5IEMxMjUuNDE2MDM0LDI2LjE5MzU4NjIgMTI1LjUxMzIxMiwyNi4yMzk3NzU5IDEyNS42MDc5NjEsMjYuMjg1MTU1MiBDMTI1Ljc4MDQ1MiwyNi4zNzAyNDE0IDEyNS45NTEzMjMsMjYuNDU2OTQ4MyAxMjYuMTE3MzM1LDI2LjU0MzY1NTIgQzEyNi4xMTk3NjQsMjYuNTQ0NDY1NSAxMjYuMTIzMDA0LDI2LjU0NjA4NjIgMTI2LjEyNTQzMywyNi41NDc3MDY5IEMxMjYuMjU5MDUzLDI2LjYxNzM5NjYgMTI2LjM5MTA1MywyNi42ODg3MDY5IDEyNi41MjIyNDMsMjYuNzYxNjM3OSBMMTI2LjUxOTAwNCwyNy44OTEyNTg2IEMxMjYuNDMzMTYzLDI3Ljg0NzUgMTI2LjM0ODk0MiwyNy44MDM3NDE0IDEyNi4yNjE0ODIsMjcuNzYwNzkzMSBMMTI1Ljg2MTQzMywyNy41NzExNzI0IEMxMjUuNDc5MiwyNy4zOTM3MDY5IDEyNS4wODgwNTksMjcuMjIzNTM0NSAxMjQuNjg4ODIsMjcuMDU5ODQ0OCBMMTI0LjU1ODQzOSwyNy4wMDYzNjIxIEMxMjQuNDg3MTc1LDI2Ljk3NjM3OTMgMTI0LjQxNDI5MiwyNi45NDU1ODYyIDEyNC4zNDA1OTksMjYuOTE3MjI0MSBDMTI0LjA0NjYzNiwyNi44MDEzNDQ4IDEyMy43NDQ1NzQsMjYuNjkzNTY5IDEyMy40MzkyNzQsMjYuNTg1NzkzMSBMMTIzLjI4NzgzOCwyNi41MzE1IEMxMjMuMjA1MjM3LDI2LjUwMTUxNzIgMTIzLjEyMTgyNiwyNi40NzA3MjQxIDEyMy4wMzc2MDUsMjYuNDQyMzYyMSBDMTIyLjU5NDYzNiwyNi4yOTQwNjkgMTIyLjE0NTk5OCwyNi4xNTM4NzkzIDEyMS42ODY4MzIsMjYuMDIyNjAzNCBDMTIxLjI2NzM0NywyNS45MDI2NzI0IDEyMC44NDMwMDQsMjUuNzkwODQ0OCAxMjAuNDEwNTYyLDI1LjY4NTUgQzEyMC4zMzg0ODgsMjUuNjY4NDgyOCAxMjAuMjYzOTg1LDI1LjY1MTQ2NTUgMTIwLjE4OTQ4MiwyNS42MzYwNjkgTDEyMC4wNDEyODYsMjUuNjAyMDM0NSBDMTE5LjcyODY5NywyNS41MjkxMDM0IDExOS40MTQ0ODgsMjUuNDU2OTgyOCAxMTkuMDk0NjExLDI1LjM5MTM0NDggTDExOC42Njc4MzgsMjUuMzEwMzEwMyBDMTE4LjM3MjI1NSwyNS4yNTI3NzU5IDExOC4wNzY2NzIsMjUuMTk2ODYyMSAxMTcuNzc3MDQsMjUuMTQ1ODEwMyBDMTE3LjY0MTgwMSwyNS4xMjM5MzEgMTE3LjUwNTc1MiwyNS4xMDIwNTE3IDExNy4zNjk3MDMsMjUuMDgyNjAzNCBMMTE3LjI1Nzk0OCwyNS4wNjM5NjU1IEMxMTYuOTgyNjExLDI1LjAyMTgyNzYgMTE2LjcwNzI3NCwyNC45Nzk2ODk3IDExNi40Mjc4ODcsMjQuOTQyNDEzOCBDMTE2LjI0MTYyOSwyNC45MTcyOTMxIDExNi4wNTM3NTIsMjQuODk0NjAzNCAxMTUuODY0MjU1LDI0Ljg3MDI5MzEgQzExNS42MDgzNTMsMjQuODM5NSAxMTUuMzUyNDUyLDI0LjgxMDMyNzYgMTE1LjA0Nzk2MSwyNC43Nzg3MjQxIEMxMTQuODU1MjI1LDI0Ljc1OTI3NTkgMTE0LjY2MDA1OSwyNC43Mzk4Mjc2IDExNC40NjQwODMsMjQuNzIyODEwMyBDMTE0LjE5NzY1NCwyNC42OTc2ODk3IDExMy45Mjg3OTUsMjQuNjc3NDMxIDExMy42NTkxMjYsMjQuNjU3MTcyNCBDMTEzLjQ0MjA5NiwyNC42NDE3NzU5IDExMy4yMjUwNjUsMjQuNjI1NTY5IDExMy4wMTQ1MTMsMjQuNjE0MjI0MSBMMTEyLjkyMDU3NCwyNC42MDkzNjIxIEMxMTIuNjgwODY5LDI0LjU5NDc3NTkgMTEyLjQ0MDM1MywyNC41ODM0MzEgMTEyLjE5OTgzOCwyNC41NzI4OTY2IEMxMTEuOTgzNjE3LDI0LjU2Mzk4MjggMTExLjc2NzM5NiwyNC41NTUwNjkgMTExLjU0NzkzNiwyNC41NDc3NzU5IEMxMTEuMzIzNjE3LDI0LjU0MTI5MzEgMTExLjA5ODQ4OCwyNC41MzgwNTE3IDExMC44NzI1NSwyNC41MzQgTDExMC43ODgzMjksMjQuNTMyMzc5MyBDMTEwLjI3NDA5NiwyNC41MjUwODYyIDEwOS43NjE0ODIsMjQuNTI0Mjc1OSAxMDkuMjM4MzQxLDI0LjUzMTU2OSBDMTA4Ljk2ODY3MiwyNC41MzU2MjA3IDEwOC42OTk4MTMsMjQuNTQwNDgyOCAxMDguNDI4NTI1LDI0LjU0ODU4NjIgQzEwOC40MTMxMzksMjQuNTQ5Mzk2NiAxMDguMzk2OTQyLDI0LjU1MDIwNjkgMTA4LjM4MTU1NiwyNC41NTAyMDY5IEMxMDguMzIzMjQ5LDI0LjUzNTYyMDcgMTA4LjI2MzMyMywyNC41MjUwODYyIDEwOC4yMDA5NjcsMjQuNTI1MDg2MiBMMTA4LjE5ODUzNywyNC41MjUwODYyIEMxMDguMTE5MTc1LDI0LjUyNTg5NjYgMTA4LjA0Mzg2MywyNC41NDIxMDM0IDEwNy45NzI1OTksMjQuNTY0NzkzMSBDMTA3LjkwMTMzNSwyNC41NjgwMzQ1IDEwNy44MjkyNjEsMjQuNTcwNDY1NSAxMDcuNzU3OTk4LDI0LjU3Mjg5NjYgQzEwNy4zODMwNTMsMjQuNTg5MTAzNCAxMDcuMDA3Mjk4LDI0LjYwNzc0MTQgMTA2LjYyMDIwNiwyNC42MzA0MzEgQzEwNi40MDcyMjUsMjQuNjQ0MjA2OSAxMDYuMTk1MDUzLDI0LjY1NzE3MjQgMTA1Ljk4MjA3MSwyNC42NzI1NjkgQzEwNS41ODQ0NTIsMjQuNzAwOTMxIDEwNS4xODUyMTIsMjQuNzM1Nzc1OSAxMDQuNzg2NzgzLDI0Ljc3MjI0MTQgTDEwNC42MTEwNTMsMjQuNzg5MjU4NiBDMTA0LjQ4Nzk2MSwyNC43OTg5ODI4IDEwNC4zNjQwNTksMjQuODEwMzI3NiAxMDQuMjQwMTU3LDI0LjgyMzI5MzEgQzEwMy41NTAxOTQsMjQuODk0NjAzNCAxMDIuODQ2NDY0LDI0Ljk3ODA2OSAxMDIuMTUwMDIyLDI1LjA3NDUgTDEwMS42NzMwNCwyNS4xNDMzNzkzIEMxMDEuMDY0ODY5LDI1LjIzMjUxNzIgMTAwLjQ1NjY5NywyNS4zMzA1NjkgOTkuODQ5MzM1LDI1LjQzNjcyNDEgTDk5LjQ0NTIzNjgsMjUuNTA2NDEzOCBDOTguODM5NDk0NSwyNS42MTgyNDE0IDk4LjIzMzc1MjEsMjUuNzM4MTcyNCA5Ny42Mjk2Mjk0LDI1Ljg2NzAxNzIgTDk3LjMxMjE4MTYsMjUuOTM5MTM3OSBDOTYuODEwMDk1NywyNi4wNDg1MzQ1IDk2LjMwODgxOTYsMjYuMTY2MDM0NSA5NS44MDgzNTM0LDI2LjI4ODM5NjYgQzk1LjY1NTI5ODIsMjYuMzI2NDgyOCA5NS41MDIyNDI5LDI2LjM2NjE4OTcgOTUuMzQ5MTg3NywyNi40MDU4OTY2IEw5NS4yMTM5NDg1LDI2LjQ0MDc0MTQgQzk0Ljc5NjA4MzQsMjYuNTQ3NzA2OSA5NC4zODA2NDc5LDI2LjY1ODcyNDEgOTMuOTY3NjQxNywyNi43NzQ2MDM0IEM5My43NjE5NDg1LDI2LjgzMTMyNzYgOTMuNTU2MjU1MiwyNi44ODg4NjIxIDkzLjM1MDU2MiwyNi45NDg4Mjc2IEM5Mi45MDAzMDQzLDI3LjA4MDEwMzQgOTIuNDUxNjY2MywyNy4yMTc4NjIxIDkyLjAwMzgzOCwyNy4zNTk2NzI0IEw5MS4wMDkzODQsMjcuNjgzIEM5MC44NTE0Njk5LDI3LjczNDg2MjEgOTAuNjk1OTg1MywyNy43ODk5NjU1IDkwLjU0NDU0OTcsMjcuODQyNjM3OSBMOTAuNDM5MjczNiwyNy44Nzc0ODI4IEM5MC4zMTY5OTE0LDI3LjkxOTYyMDcgOTAuMTk0NzA5MiwyNy45NjA5NDgzIDkwLjA3NDA0NjYsMjguMDAzMDg2MiBDODkuOTI1MDQwNSwyOC4wNTU3NTg2IDg5Ljc3NzY1NCwyOC4xMTAwNTE3IDg5LjYzMDI2NzUsMjguMTY1MTU1MiBMODkuMzk3ODUwMywyOC4yNTAyNDE0IEM4OS4xNDAzMjg4LDI4LjM0NTA1MTcgODguODgyODA3NCwyOC40NDA2NzI0IDg4LjYyNjA5NTcsMjguNTQwMzQ0OCBDODguNDI2ODgxLDI4LjYxNjUxNzIgODguMjMwMDk1NywyOC42OTQzMTAzIDg4LjAzNDEyMDIsMjguNzczNzI0MSBDODcuNzUzMTE0MSwyOC44ODQ3NDE0IDg3LjQ3MzcyNzYsMjguOTk4MTg5NyA4Ny4xOTc1ODA0LDI5LjExNDg3OTMgQzg2Ljk5OTE3NTUsMjkuMTk1OTEzOCA4Ni44MDE1ODA0LDI5LjI4MDE4OTcgODYuNjA1NjA0OSwyOS4zNjM2NTUyIEM4Ni4zMjc4MzgsMjkuNDg0Mzk2NiA4Ni4wNTI1MDA2LDI5LjYwNTk0ODMgODUuNzc4NzgyOCwyOS43Mjk5MzEgQzg1LjU4NjA0NjYsMjkuODE2NjM3OSA4NS4zOTQ5MzAxLDI5LjkwMjUzNDUgODUuMjA2MjQyOSwyOS45OTE2NzI0IEM4NS4wMTY3NDYsMzAuMDc5MTg5NyA4NC44MzA0ODgzLDMwLjE2OTEzNzkgODQuNjQzNDIwOSwzMC4yNTk4OTY2IEw4NC4yMDc3Mzk5LDMwLjQ2ODk2NTUgQzg0LjA4MzAyODIsMzAuNTMwNTUxNyA4My45NTkxMjY0LDMwLjU5MDUxNzIgODMuODM0NDE0NywzMC42NTI5MTM4IEM4My43MjU4OTk0LDMwLjcwNzIwNjkgODMuNjE5ODEzNSwzMC43NjMxMjA3IDgzLjUxMjkxNzgsMzAuODE5MDM0NSBMODIuNzgyNDYzOCwzMS4xOTc0NjU1IEM4Mi42ODUyODU5LDMxLjI0NzcwNjkgODIuNTg4MTA4LDMxLjI5ODc1ODYgODIuNDkzMzU5NSwzMS4zNDk4MTAzIEM4Mi4wNTEyLDMxLjU4ODg2MjEgODEuNjEzMDg5NiwzMS44MzI3NzU5IDgxLjE4MTQ1NzcsMzIuMDgzOTgyOCBDODAuNzk0MzY1NiwzMi4zMDkyNTg2IDgwLjQxOTQyMDksMzIuNTM3Nzc1OSA4MC4wNDg1MjUyLDMyLjc2ODcyNDEgTDc5Ljc2MzQ2OTksMzIuOTQ1Mzc5MyBDNzkuNjU5ODEzNSwzMy4wMTEwMTcyIDc5LjU1ODU4NjUsMzMuMDc3NDY1NSA3OS40NTczNTk1LDMzLjE0MzkxMzggTDc5LjI4ODEwOCwzMy4yNTU3NDE0IEM3OC45NzYzMjg4LDMzLjQ1OTEzNzkgNzguNjY2OTc5MSwzMy42NjMzNDQ4IDc4LjM2NTcyNzYsMzMuODcwNzkzMSBDNzguMjIxNTgwNCwzMy45NzA0NjU1IDc4LjA4MDY3MjQsMzQuMDcwMTM3OSA3Ny45Mzk3NjQ0LDM0LjE3MDYyMDcgTDc3Ljg2OTMxMDQsMzQuMjIwODYyMSBDNzcuNTk4ODMxOSwzNC40MTQ1MzQ1IDc3LjMzMDc4MjgsMzQuNjA4MjA2OSA3Ny4wNzAwMjIxLDM0LjgwNTEyMDcgQzc2LjkwODA1ODksMzQuOTI3NDgyOCA3Ni43NDc3MTUzLDM1LjA0OTg0NDggNzYuNTg5ODAxMiwzNS4xNzMwMTcyIEM3Ni4zMzQ3MDkyLDM1LjM3MTU1MTcgNzYuMDg2MDk1NywzNS41NzA4OTY2IDc1Ljg0MTUzMTMsMzUuNzczNDgyOCBMNzUuNzMzODI1OCwzNS44NjI2MjA3IEM3NS42MjQ1MDA2LDM1Ljk1MjU2OSA3NS41MTQzNjU2LDM2LjA0MjUxNzIgNzUuNDA3NDY5OSwzNi4xMzQwODYyIEM3NS4yMjc2OTA4LDM2LjI4ODA1MTcgNzUuMDU0MzkwMiwzNi40NDI4Mjc2IDc0Ljg4MTA4OTYsMzYuNTk2NzkzMSBMNzQuNjYyNDM5MywzNi43OTI4OTY2IEM3NC41NTQ3MzM3LDM2Ljg4OTMyNzYgNzQuNDQ3ODM4LDM2Ljk4NDk0ODMgNzQuMzM0NDYzOCwzNy4wOTAyOTMxIEw3NC4yNTc1MzEzLDM3LjE2NDg0NDggQzczLjk3NzMzNSwzNy40MjkwMTcyIDczLjcwNjA0NjYsMzcuNjk1NjIwNyA3My40NDUyODU5LDM3Ljk2MjIyNDEgQzczLjM1NzAxNiwzOC4wNTIxNzI0IDczLjI2OTU1NTgsMzguMTQyMTIwNyA3My4xODUzMzUsMzguMjMyMDY5IEM3Mi45MTY0NzYxLDM4LjUxMzI1ODYgNzIuNjU3MzM1LDM4Ljc5NTI1ODYgNzIuMzkzMzM1LDM5LjA5NzUxNzIgQzcyLjIyNDg5MzMsMzkuMjkxMTg5NyA3Mi4wNjUzNTk1LDM5LjQ4NDg2MjEgNzEuOTA3NDQ1NCwzOS42NzkzNDQ4IEw3MS44MjcyNzM2LDM5Ljc3NDk2NTUgQzcxLjc3NjI1NTIsMzkuODM1NzQxNCA3MS43MjYwNDY2LDM5Ljg5NTcwNjkgNzEuNjc3NDU3NywzOS45NTcyOTMxIEM3MS41NjgxMzI1LDQwLjA5NTg2MjEgNzEuNDY2MDk1Nyw0MC4yMzM2MjA3IDcxLjM2NDA1ODksNDAuMzcxMzc5MyBMNzEuMjcwMTIwMiw0MC40OTk0MTM4IEM3MS4yMTE4MTM1LDQwLjU3NzIwNjkgNzEuMTU5MTc1NSw0MC42NTU4MTAzIDcxLjEwMjQ4ODMsNDAuNzMzNjAzNCBDNzIuNjkxMzQ3MiwzNy44MDk4NzkzIDc1LjQyNzcxNTMsMzQuOTIxODEwMyA3OS4xMDkxMzg3LDMyLjM1NDYzNzkgTDc5LjEwOTEzODcsMzIuMzU0NjM3OSBaIE03MS42NjIwNzEyLDUyLjI3ODU4NjIgQzcxLjYxODM0MTEsNTIuMjI0MjkzMSA3MS41NzM4MDEyLDUyLjE3MTYyMDcgNzEuNTMyNTAwNiw1Mi4xMTczMjc2IEM3MS40MzA0NjM4LDUxLjk4NTI0MTQgNzEuMzM1NzE1Myw1MS44NTE1MzQ1IDcxLjI0MTc3NjcsNTEuNzE3MDE3MiBDNzEuMTk2NDI3LDUxLjY1MjE4OTcgNzEuMTQ5NDU3Nyw1MS41ODgxNzI0IDcxLjEwNjUzNzQsNTEuNTIzMzQ0OCBDNzEuMDE3NDU3Nyw1MS4zODk2Mzc5IDcwLjkzNDA0NjYsNTEuMjU0MzEwMyA3MC44NTMwNjUsNTEuMTE4MTcyNCBDNzAuODEwOTU0Niw1MS4wNDg0ODI4IDcwLjc2ODAzNDQsNTAuOTc4NzkzMSA3MC43MjgzNTM0LDUwLjkwODI5MzEgQzcwLjY1Mzg1MDMsNTAuNzc2MjA2OSA3MC41ODMzOTYzLDUwLjY0MjUgNzAuNTE1MzcxOCw1MC41MDc5ODI4IEM3MC40NzU2OTA4LDUwLjQzMDE4OTcgNzAuNDM2MDA5OCw1MC4zNTMyMDY5IDcwLjM5OTU2ODEsNTAuMjc0NjAzNCBDNzAuMzM4ODMxOSw1MC4xNDY1NjkgNzAuMjgyOTU0Niw1MC4wMTY5MTM4IDcwLjIyODY5NjksNDkuODg3MjU4NiBDNzAuMTkxNDQ1NCw0OS43OTgxMjA3IDcwLjE1NDE5MzksNDkuNzA4MTcyNCA3MC4xMjAxODE2LDQ5LjYxNzQxMzggQzcwLjA3NDgzMTksNDkuNDk4MjkzMSA3MC4wMzI3MjE1LDQ5LjM3NzU1MTcgNjkuOTkyMjMwNyw0OS4yNTY4MTAzIEM2OS45NTc0MDg2LDQ5LjE1MDY1NTIgNjkuOTIzMzk2Myw0OS4wNDQ1IDY5Ljg5MTgxMzUsNDguOTM4MzQ0OCBDNjkuODYwMjMwNyw0OC44MzEzNzkzIDY5LjgzMTg4NzEsNDguNzIyNzkzMSA2OS44MDQzNTM0LDQ4LjYxNDIwNjkgQzY5Ljc3Mjc3MDYsNDguNDg4NjAzNCA2OS43NDI4MDc0LDQ4LjM2MTM3OTMgNjkuNzE2ODkzMyw0OC4yMzMzNDQ4IEM2OS42OTgyNjc1LDQ4LjE0MzM5NjYgNjkuNjgwNDUxNSw0OC4wNTM0NDgzIDY5LjY2NTA2NSw0Ny45NjE4NzkzIEM2OS42NTI5MTc4LDQ3Ljg5MzgxMDMgNjkuNjQ0ODE5Niw0Ny44MjQ5MzEgNjkuNjM1MTAxOCw0Ny43NTY4NjIxIEM2OS42NTA0ODgzLDQ3LjY0NTg0NDggNjkuNjY5MTE0MSw0Ny41Mjk5NjU1IDY5LjY5MzQwODYsNDcuMzkxMzk2NiBDNjkuNzEzNjU0LDQ3LjI3NzEzNzkgNjkuNzMzODk5NCw0Ny4xNjIwNjkgNjkuNzU4MTkzOSw0Ny4wNDk0MzEgQzY5Ljc5Nzg3NDgsNDYuODYwNjIwNyA2OS44NDY0NjM4LDQ2LjY3MTgxMDMgNjkuODk2NjcyNCw0Ni40ODM4MTAzIEw2OS45MjkwNjUsNDYuMzYzMDY5IEM2OS45NDYwNzEyLDQ2LjI5NSA2OS45NjM4ODcxLDQ2LjIyNjkzMSA2OS45ODgxODE2LDQ2LjE1MDc1ODYgTDcwLjAzNTk2MDcsNDYuMDAyNDY1NSBDNzAuMDU4NjM1Niw0NS45MzExNTUyIDcwLjA4MzczOTksNDUuODU3NDEzOCA3MC4xMDg4NDQyLDQ1Ljc4NDQ4MjggQzcwLjU2MDcyMTUsNDUuNzk1ODI3NiA3MC45NjIzOTAyLDQ1LjkxOTgxMDMgNzEuMjkyNzk1MSw0Ni4xNjUzNDQ4IEM3MS45NzIyMzA3LDQ2LjY2Njk0ODMgNzIuMzQ4Nzk1MSw0Ny42NTE1MTcyIDcyLjM1Mjg0NDIsNDguOTM0MjkzMSBDNzIuMzU1MjczNiw0OS45NjQyNDE0IDcyLjExMTUxOSw1MS4xMjMwMzQ1IDcxLjY2MjA3MTIsNTIuMjc4NTg2MiBMNzEuNjYyMDcxMiw1Mi4yNzg1ODYyIFogTTc0LjAyMTg3NDgsNTcuOTQzNzA2OSBMNzQuNzU0NzU4Myw1Ny41MTk4OTY2IEw3NC43NTQ3NTgzLDU3LjUyOTYyMDcgTDc0LjczNTMyMjcsNjQuNTQ4MDE3MiBMNzQuNzM1MzIyNyw2NC41NDg4Mjc2IEM3NC43MzQ1MTI5LDY0LjYwNjM2MjEgNzQuNzQyNjExLDY0LjY2MjI3NTkgNzQuNzU0NzU4Myw2NC43MTU3NTg2IEw3NC43NTQ3NTgzLDg4Ljk4ODAxNzIgTDczLjkzOTI3MzYsODkuNDU4ODI3NiBMNzQuMDIxODc0OCw1Ny45NDM3MDY5IFogTTM3Ljc0MDUwMDYsNjkuMjE5NjU1MiBMMzcuODIyMjkyLDM3Ljk5MjIwNjkgTDcyLjUzMTgxMzUsNTguMDQ1IEw3Mi40NTQwNzEyLDg3LjgyMTkzMSBDNzIuNDQ2NzgyOCw4Ny44NjQwNjkgNzIuNDQ0MzUzNCw4Ny45MDUzOTY2IDcyLjQ0NDM1MzQsODcuOTQ3NTM0NSBDNzIuNDQ1MTYzMiw4OC4wMDUwNjkgNzIuNDQ1MTYzMiw4OC42MjgyMjQxIDcyLjQ0NTk3Myw4OS4yNTA1NjkgTDcyLjQ0NTk3Myw4OS4yNjkyMDY5IEwzNy43NDA1MDA2LDY5LjIxOTY1NTIgWiBNNTguNzMzMzU5NSwxMy4yMTc1MzQ1IEw2Ni41MjI5NzkxLDE4Ljc5ODM3OTMgTDM2LjcwNzk4NTMsMzYuMDUyMjQxNCBDMzYuNzAwNjk2OSwzNi4wNTcxMDM0IDM2LjY5NDIxODQsMzYuMDYyNzc1OSAzNi42ODc3Mzk5LDM2LjA2NzYzNzkgQzM2LjY3NzIxMjMsMzYuMDczMzEwMyAzNi42NjY2ODQ3LDM2LjA3ODk4MjggMzYuNjU2OTY2OSwzNi4wODYyNzU5IEMzNi42MzUxMDE4LDM2LjEwMTY3MjQgMzYuNjE0MDQ2NiwzNi4xMTcwNjkgMzYuNTkzODAxMiwzNi4xMzU3MDY5IEMzNi41ODczMjI3LDM2LjE0MDU2OSAzNi41ODE2NTQsMzYuMTQ2MjQxNCAzNi41NzUxNzU1LDM2LjE1MTkxMzggQzM2LjU3MTEyNjQsMzYuMTU1OTY1NSAzNi41NjcwNzczLDM2LjE2MDAxNzIgMzYuNTYyMjE4NCwzNi4xNjQwNjkgQzM2LjU1ODk3OTEsMzYuMTY3MzEwMyAzNi41NTU3Mzk5LDM2LjE3MDU1MTcgMzYuNTUyNTAwNiwzNi4xNzI5ODI4IEMzNi41Mjk4MjU4LDM2LjE5NTY3MjQgMzYuNTA4NzcwNiwzNi4yMTk5ODI4IDM2LjQ4OTMzNSwzNi4yNDUxMDM0IEMzNi40ODY5MDU1LDM2LjI0ODM0NDggMzYuNDg1Mjg1OSwzNi4yNTE1ODYyIDM2LjQ4Mjg1NjQsMzYuMjU0ODI3NiBDMzYuNDc3MTg3NywzNi4yNjIxMjA3IDM2LjQ3MjMyODgsMzYuMjY5NDEzOCAzNi40NjY2NjAxLDM2LjI3NTg5NjYgQzM2LjQ2NTg1MDMsMzYuMjc4MzI3NiAzNi40NjQyMzA3LDM2LjI3OTk0ODMgMzYuNDYyNjExLDM2LjI4MjM3OTMgQzM2LjQ1MjA4MzQsMzYuMjk3Nzc1OSAzNi40Mzk5MzYyLDM2LjMxMDc0MTQgMzYuNDMwMjE4NCwzNi4zMjY5NDgzIEMzNi4zNTAwNDY2LDM2LjQ2NzEzNzkgMzYuMzIwODkzMywzNi42MjE5MTM4IDM2LjMzNTQ2OTksMzYuNzcxODI3NiBMMzYuMjUzNjc4NSw2OC4xODk3MDY5IEwzLjg1Mzc1MjE1LDQ0Ljk3ODE4OTcgTDU4LjczMzM1OTUsMTMuMjE3NTM0NSBaIE0xMzAuNzI5MjM3LDIyLjgzMTQ2NTUgTDk0LjYxNzExNDEsMS45NjgzMjc1OSBDOTQuMjMzMjYxMywxLjc0NjI5MzEgOTMuODA0MDU4OSwxLjYzNTI3NTg2IDkzLjM3NTY2NjMsMS42MzUyNzU4NiBDOTIuOTQ2NDYzOCwxLjYzNTI3NTg2IDkyLjUxNzI2MTMsMS43NDYyOTMxIDkyLjEzMjU5ODgsMS45NjkxMzc5MyBMNjguMDM4MTQ0OCwxNS45MTM1NTE3IEw2MS4yNjA3OTUxLDExLjA1NTUzNDUgTDYxLjI2MDc5NTEsNS45NjI1MTcyNCBDNjEuMjYwNzk1MSwyLjgxMTg5NjU1IDU4LjY5NjEwOCwwLjI0NzE1NTE3MiA1NS41NDM0OTQ1LDAuMjQ3MTU1MTcyIEM1NC41NDgyMzA3LDAuMjQ3MTU1MTcyIDUzLjU2MTA2NSwwLjUxNTM3OTMxIDUyLjY4NzI3MzYsMS4wMjE4NDQ4MyBMNS40MzUzMjI3LDI4LjM2NjkzMSBDMi4wODM0OTQ0OCwzMC4zMDI4NDQ4IC0wLjAwMDE2MTk2MzE5LDMzLjkxNjE3MjQgLTAuMDAwMTYxOTYzMTksMzcuNzk1MjkzMSBMLTAuMDAwMTYxOTYzMTksNDQuOTEwOTMxIEMtMC4wMDAxNjE5NjMxOSw0NS43MTE1NTE3IDAuMzg2MTIwMjQ1LDQ2LjQ2NDM2MjEgMS4wMzcyMTIyNyw0Ni45MzAzMTAzIEwzNS41NDk5NDg1LDcxLjY2Mjg0NDggQzM1LjU2MjkwNTUsNzEuNjcyNTY5IDM1LjU3NjY3MjQsNzEuNjgyMjkzMSAzNS41ODk2Mjk0LDcxLjY5MTIwNjkgTDM1LjY2ODk5MTQsNzEuNzQ1NSBDMzUuNzIyNDM5Myw3MS43ODI3NzU5IDM1Ljc3NzUwNjcsNzEuODE3NjIwNyAzNS44MzQxOTM5LDcxLjg1MDAzNDUgTDcxLjUyNTIxMjMsOTIuNDY2MDE3MiBDNzEuOTk0OTA1NSw5Mi45MzUyMDY5IDcyLjYzMDYxMSw5My4xODk2NTUyIDczLjI3OTI3MzYsOTMuMTg5NjU1MiBDNzMuNzAwMzc3OSw5My4xODk2NTUyIDc0LjEyNzk2MDcsOTMuMDgxODc5MyA3NC41MTkxMDE4LDkyLjg1NTc5MzEgTDc2Ljc0MzY2NjMsOTEuNTY4OTY1NSBDNzcuNTExMzcxOCw5MS4xMjQ4OTY2IDc3Ljk4MzQ5NDUsOTAuMzA0ODI3NiA3Ny45ODM0OTQ1LDg5LjQxODMxMDMgTDc3Ljk4MzQ5NDUsNjUuMjQ4OTY1NSBDNzguMDA1MzU5NSw2NS4xODkgNzguMDI1NjA0OSw2NS4xMjc0MTM4IDc4LjA0MjYxMSw2NS4wNjUwMTcyIEw3OS42NTY1NzQyLDU5LjIzMzc3NTkgTDc5LjgxNjEwOCw1OS4yNzUxMDM0IEw4Ny43NzkwMjgyLDYxLjMzNjYyMDcgQzg3Ljk3NTAwMzcsNjEuMzg3NjcyNCA4OC4xNzY2NDc5LDYxLjQxNDQxMzggODguMzc5OTExNyw2MS40MTYwMzQ1IEw5MC4xMjc0OTQ1LDYxLjQzMDYyMDcgTDkwLjE0ODU0OTcsNjEuNDMwNjIwNyBDOTAuNDMzNjA0OSw2MS40MzA2MjA3IDkwLjcxNjIzMDcsNjEuMzgyIDkwLjk4NTA4OTYsNjEuMjg1NTY5IEM5Ny4wMjA2NDc5LDU5LjEyMzU2OSAxMDMuNzcyMDgzLDU3LjkzMjM2MjEgMTA5Ljk5NDcwOSw1Ny45MzIzNjIxIEMxMTYuMTk5NTE5LDU3LjkzMjM2MjEgMTIxLjc0OTE4OCw1OS4xMTU0NjU1IDEyNS42NzE5MzYsNjEuMjY5MzYyMSBDMTI1Ljk1NzgwMSw2MS41MjYyNDE0IDEyNi4zMDE5NzMsNjEuNzE0MjQxNCAxMjYuNjgwMTU3LDYxLjgxNjM0NDggQzEyNi44OTMxMzksNjEuODczODc5MyAxMjcuMTEwOTc5LDYxLjkwMjI0MTQgMTI3LjMyODAxLDYxLjkwMjI0MTQgQzEyNy43NTk2NDIsNjEuOTAyMjQxNCAxMjguMTg4MDM0LDYxLjc5MDQxMzggMTI4LjU2ODY0OCw2MS41NyBMMTMwLjcyODQyNyw2MC4zMjI4NzkzIEMxMzEuNDk2OTQyLDU5Ljg3OTYyMDcgMTMxLjk3MDY4NSw1OS4wNTk1NTE3IDEzMS45NzA2ODUsNTguMTcxNDEzOCBMMTMxLjk3MDY4NSwyNC45ODIxMjA3IEMxMzEuOTcwNjg1LDI0LjA5NDc5MzEgMTMxLjQ5Njk0MiwyMy4yNzQ3MjQxIDEzMC43MjkyMzcsMjIuODMxNDY1NSBMMTMwLjcyOTIzNywyMi44MzE0NjU1IFoiIGlkPSJGaWxsLTQ1IiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTk3LjUyODgwNzQsMjkuMzM4NDUzNCBDOTguMjg1OTg1MywyOC45MDA4NjcyIDk5LjAwMDI0MjksMjguNjc5NjQzMSA5OS42MjYyMzA3LDI4LjY3OTY0MzEgQzEwMC4wMjMwNCwyOC42Nzk2NDMxIDEwMC4zODM0MDksMjguNzY4NzgxIDEwMC42OTU5OTgsMjguOTQ5NDg3OSBDMTAxLjQ5MjA0NywyOS40MDczMzI4IDEwMS45MzMzOTYsMzAuNDM1NjYwMyAxMDEuOTM3NDQ1LDMxLjg0MjQxOSBDMTAxLjk0NjM1MywzNS4wOTUxNDMxIDk5LjY1MDUyNTIsMzkuMDcxNTA1MiA5Ni44MjAyMTg0LDQwLjcwNTk3MDcgQzk1LjU4MjgxOTYsNDEuNDE5ODg0NSA5NC40NTk2MDQ5LDQxLjU1NzY0MzEgOTMuNjU2MjY3NSw0MS4wOTQ5MzYyIEM5Mi44NTk0MDg2LDQwLjYzNTQ3MDcgOTIuNDE4MDU4OSwzOS42MDc5NTM0IDkyLjQxNDgxOTYsMzguMjAxMTk0OCBDOTIuNDA1MTAxOCwzNC45NDg0NzA3IDk0LjY5OTMxMDQsMzAuOTczNzI5MyA5Ny41Mjg4MDc0LDI5LjMzODQ1MzQgTTkyLjkxMzY2NjMsNDIuMzg3NDM2MiBDOTMuNDU4NjcyNCw0Mi43MDAyMjkzIDk0LjA2ODQ2MzgsNDIuODU2NjI1OSA5NC43MjExNzU1LDQyLjg1NjYyNTkgQzk1LjYwODczMzcsNDIuODU2NjI1OSA5Ni41NzY0NjM4LDQyLjU2NzMzMjggOTcuNTY0NDM5Myw0MS45OTY4NSBDMTAwLjg2MjAxLDQwLjA5MjUzOTcgMTAzLjQzNzIyNSwzNS42Mjk5NzA3IDEwMy40MjY2OTcsMzEuODM4MzY3MiBDMTAzLjQyMTAyOCwyOS44NzY1MjI0IDEwMi43MTQ4NjksMjguMzkxOTcwNyAxMDEuNDM4NTk5LDI3LjY1Njk4NzkgQzEwMC4xNTQyMzEsMjYuOTE3MTQzMSA5OC41MDEzOTYzLDI3LjA1NjUyMjQgOTYuNzgzNzc2NywyOC4wNDc1NzQxIEM5My40ODc4MjU4LDI5Ljk1MTg4NDUgOTAuOTE0MjMwNywzNC40MTQ0NTM0IDkwLjkyNTU2ODEsMzguMjA0NDM2MiBDOTAuOTMwNDI3LDQwLjE2NTQ3MDcgOTEuNjM3Mzk2Myw0MS42NTE2NDMxIDkyLjkxMzY2NjMsNDIuMzg3NDM2MiIgaWQ9IkZpbGwtNDMiIGZpbGw9IiNGRkZGRkYiIG1hc2s9InVybCgjbWFzay0yKSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03NC42MjY2OTc1LDU0LjgyNTc1MjggTDc3LjA0MDEwMDIsNTkuMDQ5MjA3NSBMNzcuMDQwMTAwMiw1OS4wNDkyMDc1IEM3Ny4zMDY0OTY4LDU5LjUxNTQwMTUgNzcuMTU3MTc5OCw2MC4xMDg3NjczIDc2LjcwMTg1Niw2MC4zOTMzNDQ3IEw3MS44NzUwNTA3LDYzLjQxMDA5OCBMNzEuODc1MDUwNyw2My40MTAwOTggQzcxLjQwNjcxNDEsNjMuNzAyODA4NCA3MC43ODk3NjM4LDYzLjU2MDQzNTIgNzAuNDk3MDUzNCw2My4wOTIwOTg3IEM3MC4zMzg5NjQ1LDYyLjgzOTE1NjMgNzAuMzAyMDQzNSw2Mi41Mjg4NDY4IDcwLjM5NjM2ODQsNjIuMjQ1ODcyIEw3Mi44MDk3NzExLDU1LjAwNTY2NCBMNzIuODA5NzcxMSw1NS4wMDU2NjQgQzcyLjk4NDQxODksNTQuNDgxNzIwNyA3My41NTA3Mzg4LDU0LjE5ODU2MDcgNzQuMDc0NjgyMiw1NC4zNzMyMDg0IEM3NC4zMDgwOTMxLDU0LjQ1MTAxMjEgNzQuNTA0NjI5MSw1NC42MTIxMzMxIDc0LjYyNjY5NzUsNTQuODI1NzUyOCBaIiBpZD0iVHJpYW5nbGUiIGZpbGwtb3BhY2l0eT0iMC4yNjYwNDk1OTIiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjc1ODUyMSwgNTguOTQxOTI3KSByb3RhdGUoMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC03My43NTg1MjEsIC01OC45NDE5MjcpICI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",'"/>\n      <ol>\n        ').concat(Vr.map((function(e){var t;return"<li>".concat(null!==(t=e[navigator.language.split("-")[0]])&&void 0!==t?t:e.zh,"</li>")})).join(""),"\n      </ol>\n    ");var p=new bn(h);e.parentNode&&(e.parentNode.insertBefore(c,e),e.parentNode.insertBefore(h,e),this.setHelperElementSize(),p.on("tap",(function(){return t.emit("vrWantsToExit")}))),this.destroyHelper=function(){p.destroy(),c.parentNode&&c.parentNode.removeChild(c),h.parentNode&&h.parentNode.removeChild(h)}},t.prototype.destroyHelper=function(){},t.prototype.setHelperElementSize=function(){if(this.helperElement){var e=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),t=e.x*this.scissor.left,r=e.y*(1-this.scissor.bottom-this.scissor.height),n=e.x*this.scissor.width,i=e.y*this.scissor.height;this.helperElement.style.marginLeft=t+"px",this.helperElement.style.marginTop=r+"px",this.helperElement.style.width=n+"px",this.helperElement.style.height=i+"px"}},t.prototype.intersect=function(e){if(!1!==this.locationMotion.ended){if(this.activePanoMesh&&this.activeTime&&e-this.activeTime>2e3){var t=this.panoMeshes.indexOf(this.activePanoMesh);return t>=0&&this.moveToPano(t,{},!0),delete this.activePanoMesh,void delete this.activeTime}for(var r=0,n=this.panoMeshes;r<n.length;r++)(l=n[r]).setCurrent(!1);for(var i=this.camera.getWorldDirection(new r$3.Vector3),o=new r$3.Raycaster(this.camera.position,i),a=void 0,s=[],c=0,u=this.panoMeshes;c<u.length;c++){var l;if(!1!==(l=u[c]).visible){var f=o.intersectObject(l,!0)[0];f&&s.push({panoMesh:l,intersection:f})}}var h=s.sort((function(e,t){return e.intersection.distance-t.intersection.distance}))[0];if(h&&(a=h.intersection,h.panoMesh.setCurrent(!0),this.activePanoMesh!==h.panoMesh&&(this.activePanoMesh=h.panoMesh,this.activeTime=e)),a||this.model.empty||(a=this.model.intersectRaycaster(o)[0]),a&&a.face){var p=a.face.normal,d=new r$3.Quaternion;d.setFromUnitVectors(new r$3.Vector3(0,0,-1),p),this.intersectMesh.quaternion.copy(d);var m=p.clone().multiplyScalar(.05),g=a.point.clone().add(m);this.intersectMesh.position.copy(g),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",a,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden")}else this.intersectMesh.visible=!1},t.prototype.onPanGesture=function(){},t.prototype.onTapGesture=function(){},t.prototype.onPinchGesture=function(){},t.prototype.onMouseMove=function(){},t.prototype.onMouseOut=function(){},t}(_r),Gr=function(e){function t(r){var n,i,o,a,s=this,c=t.parseArgs(r);return(s=e.call(this,c)||this).currentPanoIndex=c.initial[0],s.locationMotion=new Vn({x:s.camera.pose.offset.x,y:s.camera.pose.offset.y,z:s.camera.pose.offset.z,distance:s.camera.pose.distance,modelAlpha:null!==(i=null===(n=s.model.getMaterial())||void 0===n?void 0:n.modelAlpha)&&void 0!==i?i:0,perspToOrtho:null!==(a=null===(o=s.model.getMaterial())||void 0===o?void 0:o.perspToOrtho)&&void 0!==a?a:0}),s}return t$3.__extends(t,e),t.parseArgs=function(t){return e.parseArgs.call(this,t)},t.initAnimationEndPose=function(t){var r=this.parseArgs(t);return e.initAnimationEndPose.call(this,r)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.locationMotion.dispose()},t.prototype.isReady=function(){return!1!==this.locationMotion.ended&&e.prototype.isReady.call(this)},t.prototype.updateWork=function(e,t,r,n,i){this.work=e,this.currentPanoIndex=t,this.hideIntersectMesh();var o={duration:0,longitude:r.longitude,latitude:r.latitude,fov:r.fov};return this.moveToPano(t,o,i),!0},t.prototype.updateTime=function(e,t){if(!this.destroyed){var r={},n={};if(!this.locationMotion.ended){this.locationMotion.update(e),r.modelAlpha=this.locationMotion.value.modelAlpha,r.perspToOrtho=jn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),n.distance=this.locationMotion.value.distance,n.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var i=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),o=En(this.work.observers,(function(e){return e.position.distanceTo(i)}));this.currentPanoIndex=this.work.observers.indexOf(o)}this.cameraMotion.ended||(this.cameraMotion.update(e),n.longitude=this.cameraMotion.value.longitude,n.latitude=this.cameraMotion.value.latitude,n.fov=this.cameraMotion.value.fov),zn(r)||this.model.setMaterial(r),zn(n)||this.setCamera(n)}},t.prototype.initAnimation=function(e,t,r,n){var i,o,a,s=this;this.destroyed||(this.pending=!1,this.userAction=n,this.moveToPano(e,{longitude:null!==(i=t.longitude)&&void 0!==i?i:this.defaultLongitude,latitude:jn(null!==(o=t.latitude)&&void 0!==o?o:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:jn(null!==(a=t.fov)&&void 0!==a?a:this.defaultFov,this.minFov,this.maxFov),duration:r,moveStartCallback:function(e,t){s.emit("initAnimationWillStart",e,t,s.userAction)},moveEndCallback:function(e,t){s.emit("initAnimationEnded",e,t,s.userAction)},moveCancelCallback:function(){var e=s.currentPanoIndex,t={longitude:s.camera.pose.longitude,latitude:s.camera.pose.latitude,fov:s.camera.pose.fov,offset:s.camera.pose.offset.clone()};s.emit("initAnimationEnded",e,t,s.userAction)}},n))},t.prototype.getTargetPose=function(){var e=this.cameraMotion.getKeyFrameSegment(Ke())[1],t=this.locationMotion.getKeyFrameSegment(Ke())[1];return{longitude:e.value.longitude,latitude:e.value.latitude,fov:e.value.fov,offset:new r$3.Vector3(t.value.x,t.value.y,t.value.z)}},t.prototype.moveToPano=function(e,t,r){void 0===t&&(t={});var n=this.work.observers[e];n&&this.moveToPosition(n.position,t,r)},t.prototype.moveToPosition=function(e,t,r){var n,i,o,a=this;void 0===t&&(t={}),this.userAction=r;for(var s=Ke(),c=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(e),u=this.locationMotion.getProgressVelocity(s),l=0,f=1;f<this.locationMotion.keyframes.length;f++){var h=this.locationMotion.keyframes[f-1].value,p=h.x,d=h.y,m=h.z,g=this.locationMotion.keyframes[f].value,v=g.x,y=g.y,b=g.z;l+=Math.sqrt(Math.pow(v-p,2)+Math.pow(y-d,2)+Math.pow(b-m,2))}var _=0===c?0:u*l/c,A=this.calculateMovingDuration(t.duration,c),M={x:e.x,y:e.y,z:e.z,distance:0,modelAlpha:1,perspToOrtho:0},x={longitude:t.longitude,latitude:t.latitude,fov:t.fov},w={longitude:null!==(n=x.longitude)&&void 0!==n?n:this.camera.pose.longitude,latitude:null!==(i=x.latitude)&&void 0!==i?i:this.camera.pose.latitude,fov:null!==(o=x.fov)&&void 0!==o?o:this.camera.pose.fov,offset:e.clone()},$=En(this.work.observers,(function(t){return t.position.distanceTo(e)})),E=this.work.observers.indexOf($);this.emit("moveToPano",E,this.userAction),t.moveStartCallback&&t.moveStartCallback(E,w),this.emit("panoWillArrive",E,w,this.userAction),this.cameraMotion.set(x,A).catch(Qe),this.locationMotion.set(M,A,_).then((function(){var e=In(a.camera.pose);t.moveEndCallback&&t.moveEndCallback(E,e),a.emit("panoArrived",E,e,a.userAction)}),(function(){t.moveCancelCallback&&t.moveCancelCallback(),a.emit("moveToPanoCanceled",E)}))},t.prototype.onTapGesture=function(e){var t=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","tap",t,!0)){var r=this.relativeClientPosition(e.center),n=new r$3.Raycaster;if(n.setFromCamera(r,this.camera),!this.emit("wantsTapGesture",n,r,!0)){this.emit("gesture","tap",t,!0),this.emit("tapGesture",n,r,!0),this.interiaMovement=!1;var i=this.model.intersectRaycaster(n)[0];if(i&&i.face){var o=i.face.normal,a=i.point;if(new r$3.Vector3(0,1,0).angleTo(o)>Math.PI/3){var s=this.camera.position.clone().setY(a.y),c=a.clone().sub(s).setLength(.3),u=a.clone().sub(c);n.set(u,new r$3.Vector3(0,-1,0)),i=this.model.intersectRaycaster(n)[0]}}if(i){var l=i.point.clone(),f=En(this.work.observers.filter((function(e){return Math.abs(e.standingPosition.y-l.y)<1})),(function(e){return e.standingPosition.distanceTo(l)}));if(f)return l.y=f.position.y,void this.moveToPosition(l,{},!0)}this.cameraBounce()}}},t}(Jn),Wr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}("{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|ZnvH{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;9-rp|;\t6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-|yq]|vv|{-J-z|qryZnv-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\b\t9->;=6-7-}n{|Znv6;\b\tH--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-\n----rp?-n{s|zrqP||q-J-rp?5p||q;9-=;=6H----rpA-}n{|Qv}ynprzr{-J-rr?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-\n----rp?-n{s|zrqP||q-J-rp?5p||q;9-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-rr?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;-JJ-=;=6\n------qvn{pr-J-pnyrH----\fryr\n------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;H----\f--\f-ryr-\n----rp?-n{s|zrqP||q-J-rp?5p||q;9->;=6H----rpA-}n{|Qv}ynprzr{-J-rr?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv\tr5|yq]|vv|{;\b\t6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv-7-z|qrycvrZnv-7-ry]|vv|{H\f"),qr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=113,n=126,i=0,o="";return arguments[i].split(o).map((function(e){return e.charCodeAt(i)>n?e:String.fromCharCode((e.charCodeAt(i)+r)%n)})).join(o)}("{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-\n--rpA-}n{|P|y|-J-rrPor5}n{|Zn}9-}n{|d|yq]|vv|{;\b\t6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f"),Kr=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Zr=new r$3.SphereBufferGeometry(.01,128,128),Xr=function(){function e(e){void 0===e&&(e={}),this.textureLoader=new bi({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=e.allowHosts,this.networkSubscribe=e.networkSubscribe}return e.prototype.setAllowHosts=function(e){this.allowHosts=e,this.textureLoader.setAllowHosts(e)},e.prototype.setNetworkSubscribe=function(e){this.networkSubscribe=e,this.textureLoader.setNetworkSubscribe(e)},e.prototype.load=function(e,t,r,n,i,o,a,s){var c=[0,0],u=function(e,t){c[t]=e,a(.8*c[0]+.2*c[1])},l=[this.textureLoader.load(e,{viaAjax:!0},void 0,void 0,(function(e){return u(e,1)}),s),this.textureLoader.loadCube(t,{viaAjax:!0},void 0,void 0,(function(e){return u(e,0)}),s)];return Promise.all(l).then((function(e){var t=e[0],o=e[1],a={body:function(e,t,r,n){var i=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Wr,fragmentShader:qr,transparent:!0,uniforms:r$3.UniformsUtils.clone(Kr)}),o=t;return o.needsUpdate=!0,o.minFilter=r$3.LinearFilter,o.magFilter=r$3.LinearFilter,e.needsUpdate=!0,e.minFilter=r$3.LinearFilter,e.magFilter=r$3.LinearFilter,i.uniforms.opacity.value=0,i.uniforms.panoMap.value=o,i.uniforms.panoDisplacementMap.value=e,i.uniforms.panoPosition.value=r,i.uniforms.panoMatrix.value=n,Object.assign(new r$3.Mesh(Zr,i),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(t.body,o.body,r,n),meta:t$3.__spreadArray([t.meta],o.meta,!0)};return i(a),a})).catch((function(e){for(var t=0,r=l;t<r.length;t++)r[t].then((function(e){return e.body.dispose()})).catch(Qe);return o(e),Promise.reject(e)}))},e}(),Jr=new r$3.Vector3(-1,1,1),$r=function(e){function t(r){var n,i,o,a,s,c,u,l=this,f=t.parseArgs(r);return(l=e.call(this,f)||this).currentPanoIndex=f.initial[0],l.maxAccessibleDistance=f.maxAccessibleDistance,l.panoTapTriggerRadius=f.panoTapTriggerRadius,l.panoCircleMeshCreator=f.panoCircleMeshCreator,l.boundingMesh=l.generateBoundingMesh(),l.boundingMesh.setMaterial(l.model.getMaterial()||{}),l.boundingMesh.visible=!1,l.scene.add(l.boundingMesh),l.panoModelGroup=new r$3.Group,l.panoModelGroup.name="panoModels",l.scene.add(l.panoModelGroup),l.panoMeshes=[],l.updatePanoMeshes(),l.helper.remove(l.intersectMesh),l.locationMotion=new Vn({count:0,distance:l.camera.pose.distance,modelAlpha:null!==(i=null===(n=l.model.getMaterial())||void 0===n?void 0:n.modelAlpha)&&void 0!==i?i:0,perspToOrtho:null!==(a=null===(o=l.model.getMaterial())||void 0===o?void 0:o.perspToOrtho)&&void 0!==a?a:0}),l.panoResources={},l.panoResources[l.locationMotion.keyframes[0].key=l.locationMotion.keyframes[1].key=Fe()]={panoIndex:l.currentPanoIndex,workCode:l.work.workCode,matrix:null!==(u=null===(c=null===(s=l.model.getMaterial())||void 0===s?void 0:s.pano1)||void 0===c?void 0:c.matrix)&&void 0!==u?u:new r$3.Matrix4,position:l.camera.pose.offset.clone(),effect:"fly"},l.depthTextureLoader=new Xr({allowHosts:l.work.allowHosts,networkSubscribe:l.networkSubscribe}),l}return t$3.__extends(t,e),t.parseArgs=function(t){var r,n,i,o=e.parseArgs.call(this,t);return t$3.__assign(t$3.__assign({},o),{maxAccessibleDistance:null!==(r=t.maxAccessibleDistance)&&void 0!==r?r:5,panoTapTriggerRadius:null!==(n=t.panoTapTriggerRadius)&&void 0!==n?n:1,panoCircleMeshCreator:null!==(i=t.panoCircleMeshCreator)&&void 0!==i?i:function(){return new dr}})},t.initAnimationEndPose=function(t){var r=this.parseArgs(t);return e.initAnimationEndPose.call(this,r)},t.prototype.destroy=function(){var t,r=this;if(e.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var n=0,i=this.panoModelGroup.children;n<i.length;n++){var o=i[n];"function"==typeof o.dispose&&o.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach((function(e){r.helper.remove(e),e.dispose()})),this.panoMeshes.length=0);for(var a=null!==(t=this.model.getMaterial())&&void 0!==t?t:{},s=a.pano0,c=a.pano1,u=0,l=Object.keys(this.panoResources);u<l.length;u++){var f=l[u],h=this.panoResources[f];h.panoModel&&h.panoModel.material.uniforms.panoMap.value!==(null==s?void 0:s.map)&&h.panoModel.material.uniforms.panoMap.value!==(null==c?void 0:c.map)&&(this.panoModelGroup.remove(h.panoModel),h.panoModel.material.uniforms.panoMap.value.dispose(),h.panoModel.dispose(),delete h.panoModel),delete this.panoResources[f]}this.interiaMovement=!1},t.prototype.isReady=function(){return!1===this.locationMotion.ended&&e.prototype.isReady.call(this)},t.prototype.updateWork=function(e,t,r,n,i){this.userAction=i,this.work=e,this.currentPanoIndex=t,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var o={},a=!0;this.boundingMesh&&(o=this.boundingMesh.getMaterial()||{},a=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=a,this.boundingMesh.setMaterial(o),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var s=0,c=this.panoMeshes;s<c.length;s++)c[s].visible=!1;return this.moveToPano(t,{effect:"fade",duration:n,longitude:r.longitude,latitude:r.latitude,fov:r.fov},i),!0},t.prototype.updateTime=function(e,t){var r,n,i;if(!this.destroyed){var o={},a={};if(!1===this.locationMotion.ended){this.locationMotion.update(e);var s=this.locationMotion.getKeyFrameSegment(e),c=s[0],u=s[1],l=this.panoResourceFromLocationMotionKeyframe(c),f=this.panoResourceFromLocationMotionKeyframe(u),h=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),p=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),d=(new r$3.Vector3).copy(l.position),m=(new r$3.Vector3).copy(f.position),g=this.locationMotion.value.count-u.value.count+1;o.modelAlpha=this.locationMotion.value.modelAlpha,o.perspToOrtho=jn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),o.useBlackTransition="instant"===f.effect;for(var v=0,y=this.panoModelGroup.children;v<y.length;v++){var b=y[v];b.visible=b===l.panoModel||b===f.panoModel}l.panoModel&&(l.panoModel.material.uniforms.opacity.value=1-g,l.panoModel.material.depthTest=0!==g),f.panoModel&&(f.panoModel.material.uniforms.opacity.value=g,f.panoModel.material.depthTest=1!==g),f.panoModel&&(g<1?l.panoModel&&(o.pano0={map:l.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:l.matrix}):o.pano0={map:f.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:f.matrix},o.pano1={map:f.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:f.matrix}),"fade"===f.effect&&(o.pano0&&(o.pano0={map:o.pano0.map,luminanceMap:null,matrix:l.matrix.clone().setPosition(f.position)}),d.copy(m)),o.progress=g,a.distance=this.locationMotion.value.distance,a.offset=new r$3.Vector3(d.x+(m.x-d.x)*g,d.y+(m.y-d.y)*g,d.z+(m.z-d.z)*g);for(var _=[],A=[],M=0,x=this.locationMotion.keyframes;M<x.length;M++){var w=x[M],$=w.key,E=w.progress;void 0!==$&&(_.push($),E>=this.locationMotion.progress&&A.push($))}for(var T=0,S=Object.keys(this.panoResources);T<S.length;T++){var O=S[T];if(!(A.indexOf(O)>=0)){var N=this.panoResources[O];if(N.panoModel){if(N.panoModel.material.uniforms.panoMap.value===(null===(r=o.pano0)||void 0===r?void 0:r.map))continue;if(N.panoModel.material.uniforms.panoMap.value===(null===(n=o.pano1)||void 0===n?void 0:n.map))continue;this.panoModelGroup.remove(N.panoModel),N.panoModel.material.uniforms.panoMap.value.dispose(),N.panoModel.dispose(),delete N.panoModel}_.indexOf(O)>=0||delete this.panoResources[O]}}l.workCode===f.workCode?this.currentPanoIndex=g<.5?l.panoIndex:f.panoIndex:this.currentPanoIndex=f.panoIndex,this.emit("movingToPano",p.panoIndex,h.panoIndex,this.locationMotion.progress)}if(!1===this.cameraMotion.ended&&(this.cameraMotion.update(e),a.longitude=this.cameraMotion.value.longitude,a.latitude=this.cameraMotion.value.latitude,a.fov=this.cameraMotion.value.fov),!1===zn(o)&&(this.model.setMaterial(o),this.boundingMesh.setMaterial(o)),!1===zn(a)&&this.setCamera(a),this.camera.pose.distance>.1)for(var D=0;D<this.work.observers.length;D++)(C=this.panoMeshes[D])&&(C.visible=!1);else{var I=this.work.observers[this.currentPanoIndex];if(I){var P=I.visibleNodes.concat(this.currentPanoIndex),j=this.getForwardPanoIndexOrNot();for(D=0;D<this.work.observers.length;D++){var C,L=this.work.observers[D];if(C=this.panoMeshes[D])if(L.loadable||L.active)if(-1!==P.indexOf(D)){C.visible=!0;var R=C.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);C.setCurrent(j===D),C.setOpacity(R<.01?0:jn(1.5/R,0,1)),C.updateTime(e,t)}else C.visible=!1;else C.visible=!1}}}this.boundingMesh.visible=Boolean(null===(i=this.boundingMesh.getMaterial())||void 0===i?void 0:i.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},t.prototype.getTargetPose=function(){var e=this.cameraMotion.getKeyFrameSegment(Ke())[1],t=this.locationMotion.getKeyFrameSegment(Ke())[1],r=this.panoResourceFromLocationMotionKeyframe(t),n=this.work.observers[r.panoIndex];return{longitude:e.value.longitude,latitude:e.value.latitude,fov:e.value.fov,offset:n?n.position.clone():this.camera.position.clone()}},t.prototype.moveToPano=function(e,t,r){var n,i,o=this;void 0===t&&(t={});var a=this.work.observers[e].images.depth,s=t$3.__assign({key:"pano.".concat(e),basisLoaderInitialized:zi.isInitialized()},ti(this.imageOptions,["format","size","quality"])),c=null!==(n=this.imageOptions.transform)&&void 0!==n?n:ai,u={right:c(this.work.observers[e].images.right,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".right")})),left:c(this.work.observers[e].images.left,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".left")})),up:c(this.work.observers[e].images.up,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".up")})),down:c(this.work.observers[e].images.down,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".down")})),front:c(this.work.observers[e].images.front,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".front")})),back:c(this.work.observers[e].images.back,t$3.__assign(t$3.__assign({},s),{key:"pano.".concat(e,".back")}))},l=this.work.observers[e],f=l.position,h=l.quaternion,p=(new r$3.Matrix4).compose(f,h,new r$3.Vector3(-1,1,1)),d="pano:"+Kn(u);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===d)return;var m=this.pendingTextureTask.panoIndex;null===(i=this.panoMeshes[m])||void 0===i||i.setProgress(0),this.emit("textureAbort",m,this.work.observers[m]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:e,hash:d,onLoad:function(n){o.pending=!1,o.destroyed?n.body.dispose():(n.body.name=d,o.emit("panoLoaded",e),o.doMoveToPano(e,n.body,t,r))},onError:function(r){o.pending=!1,t.moveCancelCallback&&t.moveCancelCallback(),o.emit("panoLoadError",r,e),o.emit("moveToPanoCanceled",e)}},this.depthTextureLoader.load(a,u,f,p,(function(t){var r,n;(null===(r=o.pendingTextureTask)||void 0===r?void 0:r.hash)===d?(o.pendingTextureTask.onLoad(t),null===(n=o.panoMeshes[e])||void 0===n||n.setProgress(0),delete o.pendingTextureTask,o.emit("textureLoaded",e,o.work.observers[e],t.meta)):t.body.dispose()}),(function(t){var r,n;(null===(r=o.pendingTextureTask)||void 0===r?void 0:r.hash)===d&&(o.pendingTextureTask.onError(t),null===(n=o.panoMeshes[e])||void 0===n||n.setProgress(0),delete o.pendingTextureTask,o.emit("textureError",t,e,o.work.observers[e]),o.emit("error",t))}),(function(t){var r,n;(null===(r=o.pendingTextureTask)||void 0===r?void 0:r.hash)===d&&(null===(n=o.panoMeshes[e])||void 0===n||n.setProgress(t)),o.emit("textureLoading",t,e,o.work.observers[e])}),this.renderer),this.emit("textureStartLoad",e,this.work.observers[e])},t.prototype.initAnimation=function(e,t,r,n){var i,o,a,s=this;if(!this.destroyed){var c=!1;this.pending=!1,this.userAction=n,this.moveToPano(e,{longitude:null!==(i=t.longitude)&&void 0!==i?i:this.defaultLongitude,latitude:jn(null!==(o=t.latitude)&&void 0!==o?o:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:jn(null!==(a=t.fov)&&void 0!==a?a:this.defaultFov,this.minFov,this.maxFov),duration:r,moveStartCallback:function(e,t){c=!0,s.emit("initAnimationWillStart",e,t,s.userAction)},moveEndCallback:function(e,t){s.emit("initAnimationEnded",e,t,s.userAction)},moveCancelCallback:function(){var e=In(s.camera.pose);!1===c&&s.emit("initAnimationWillStart",s.currentPanoIndex,e,s.userAction),s.emit("initAnimationEnded",s.currentPanoIndex,e,s.userAction)}},n)}},t.prototype.panoResourceFromLocationMotionKeyframe=function(e){return this.panoResources[e.key]},t.prototype.locationMotionKeyframesLength=function(e){for(var t=0,r=1;r<e.length;r++){var n=this.panoResourceFromLocationMotionKeyframe(e[r-1]).position,i=this.panoResourceFromLocationMotionKeyframe(e[r]).position;t+=n.distanceTo(i)*(e[r].value.count-e[r-1].value.count)}return t},t.prototype.updatePanoMeshes=function(){for(var e={},t=0,r=this.panoMeshes;t<r.length;t++)e[(a=r[t]).name]=a;this.panoMeshes.length=0;for(var n=0;n<this.work.observers.length;n++){var i="panoCircle_".concat(this.work.workCode,"_").concat(n),o=this.work.observers[n],a=void 0;e[i]?(a=e[i],delete e[i]):((a=this.panoCircleMeshCreator()).name=i,this.helper.add(a)),a.position.copy(o.standingPosition),this.panoMeshes[n]=a}for(var s=0,c=Object.keys(e);s<c.length;s++){var u=c[s];this.helper.remove(e[u]),e[u].dispose(),delete e[u]}},t.prototype.generateBoundingMesh=function(e){void 0===e&&(e=!1);for(var t=this.model.bounding.clone(),r=0,n=this.work.observers;r<n.length;r++){var i=n[r];t.expandByPoint(i.standingPosition),t.expandByPoint((new r$3.Vector3).fromArray([i.position.x,2*i.position.y-i.standingPosition.y,i.position.z]))}e&&t.expandByPoint(this.camera.position);var o=ht(t,new r$3.Vector3(1,0,1));return o.name="panorama_bounding",o.frustumCulled=!1,o},t.prototype.doMoveToPano=function(e,t,r,n){var i,o,a,s,c=this;void 0===r&&(r={}),this.userAction=n;var u,l,f,h=Ke(),p=Fe(),d=this.work.observers[e],m=this.panoResources[p]={panoIndex:e,workCode:this.work.workCode,effect:null!==(i=r.effect)&&void 0!==i?i:"fly",panoModel:t,matrix:(new r$3.Matrix4).compose(d.position,d.quaternion,Jr),position:d.position.clone()};if(t.visible=!1,t.renderOrder=-1,this.panoModelGroup.add(t),this.locationMotion.ended){var g=this.locationMotion.getKeyFrameSegment(h);g[0];var v=g[1],y=this.locationMotion.value,b=this.panoResourceFromLocationMotionKeyframe(v).position,_=m.position;u=Math.max(b.distanceTo(_),1),l=[{key:v.key,progress:0,value:t$3.__assign(t$3.__assign({},y),{count:0})},{key:p,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],f=0}else{var A=this.locationMotion.getKeyFrameSegment(h),M=A[0],x=(v=A[1],y=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(M).position),w=(b=this.panoResourceFromLocationMotionKeyframe(v).position,_=m.position,v.value.count-y.count),$=Math.max(x.distanceTo(b),1)*w;u=$+Math.max(b.distanceTo(_),1),l=[{key:M.key,progress:0,value:t$3.__assign({},y)},{key:v.key,progress:$/u,value:v.value},{key:p,progress:1,value:{count:v.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var E=this.locationMotionKeyframesLength(this.locationMotion.keyframes),T=this.locationMotionKeyframesLength(l);f=this.locationMotion.getProgressVelocity(h)*E/T}var S=this.calculateMovingDuration(r.duration,u),O={longitude:r.longitude,latitude:r.latitude,fov:r.fov},N={longitude:null!==(o=O.longitude)&&void 0!==o?o:this.camera.pose.longitude,latitude:null!==(a=O.latitude)&&void 0!==a?a:this.camera.pose.latitude,fov:null!==(s=O.fov)&&void 0!==s?s:this.camera.pose.fov,offset:d.position.clone()};r.moveStartCallback&&r.moveStartCallback(e,N),this.emit("panoWillArrive",e,N,this.userAction),this.cameraMotion.set(O,S).catch(Qe),this.locationMotion.setKeyFrames(l,S,f).then((function(){var t={longitude:c.camera.pose.longitude,latitude:c.camera.pose.latitude,fov:c.camera.pose.fov,offset:c.camera.pose.offset.clone()};r.moveEndCallback&&r.moveEndCallback(e,t),c.emit("panoArrived",e,t,n)}),(function(){r.moveCancelCallback&&r.moveCancelCallback(),c.emit("moveToPanoCanceled",e)}))},t.prototype.getForwardPanoIndexOrNot=function(e){var t=this,r=this.camera.getWorldDirection(new r$3.Vector3),n=this.camera.position.clone(),i=this.work.observers[this.currentPanoIndex];if(!i)return null;var o=i.accessibleNodes.filter((function(e){if(e===t.currentPanoIndex)return!1;var r=t.work.observers[e],i=r.standingPosition.clone().sub(n);return 0!==i.length()&&!(i.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(r.loadable||r.active)})),a=(e?e.ray.direction.clone():r.clone()).setY(0);if(0===a.length())return null;for(var s=o.slice().sort((function(e,r){var i=t.work.observers[e].position.clone().setY(n.y),o=t.work.observers[r].position.clone().setY(n.y);return i.distanceTo(n)-o.distanceTo(n)})),c=0,u=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];c<u.length;c++)for(var l=u[c],f=0,h=s;f<h.length;f++){var p=h[f],d=this.work.observers[p].position.clone().setY(n.y).sub(n);if(0!==d.length()&&a.angleTo(d)<l)return p}return null},t.prototype.onTapGesture=function(e){var t=this,r=e.pointers.map((function(e){return ti(e,["x","y"])}));if(!this.emit("wantsGesture","tap",r,!0)){var n=this.relativeClientPosition(e.center),i=new r$3.Raycaster;if(i.setFromCamera(n,this.camera),!this.emit("wantsTapGesture",i,n,!0)){this.emit("gesture","tap",r,!0),this.emit("tapGesture",i,n,!0),this.interiaMovement=!1;var o=this.camera.getWorldDirection(new r$3.Vector3).setY(0),a=null,s=this.work.observers[this.currentPanoIndex];if(s){var c=s.accessibleNodes.filter((function(e){if(e===t.currentPanoIndex)return!1;var r=t.work.observers[e];return!(r.position.distanceTo(t.camera.position)>t.maxAccessibleDistance)&&(r.loadable||r.active)})),u=i.intersectObject(this.boundingMesh,!0)[0];if(u){var l=En(c,(function(e){var r=t.work.observers[e].standingPosition.clone();return r.clone().sub(t.camera.position).setY(0).angleTo(o)>Math.PI/2?1/0:r.distanceTo(u.point)}),!0),f=l[0];l[1]<this.panoTapTriggerRadius&&(a=f)}Re(a)&&(a=this.getForwardPanoIndexOrNot(i));for(var h=0,p=this.locationMotion.keyframes;h<p.length;h++){var d=p[h],m=this.panoResourceFromLocationMotionKeyframe(d);if(!(d.progress<this.locationMotion.progress)&&m.panoIndex===a){a=null;break}}if(this.emit("panoSelected",a),Re(a))!0===this.locationMotion.ended&&this.cameraBounce();else{var g=this.work.observers[a];if(g.active){for(var v={},y=Math.PI/6,b=Math.PI/12,_=new r$3.Vector3(0,1,0),A=g.position.clone().setY(0).sub(s.position.clone().setY(0)).normalize(),M=A.clone().applyAxisAngle(_,y),x=A.clone().applyAxisAngle(_,-y),w=[],$=[],E=[],T=0,S=g.accessibleNodes;T<S.length;T++)if((f=S[T])!==this.currentPanoIndex&&f!==a){var O=this.work.observers[f].position.clone().sub(g.position).setY(0);A.angleTo(O)<y?E.push(O):M.angleTo(O)<y?w.push(O):x.angleTo(O)<y&&$.push(O)}var N=(E.length>0?E:t$3.__spreadArray(t$3.__spreadArray([],w,!0),$,!0)).slice().sort((function(e,t){return e.angleTo(A)-t.angleTo(A)}))[0];N&&N.angleTo(o)>b&&(v.longitude=Math.atan2(-N.x,-N.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(v.latitude=jn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",a,v,!0)}else this.panoMeshes[a]&&(this.panoMeshes[a].setDisabled(!1),this.panoMeshes[a].setLoading(!0))}}}}},t}(Jn),eo=["Panorama","DepthPanorama","Model"],to$1={Floorplan:Gn,Topview:Wn,Panorama:_r,VRPanorama:Hr,Model:Gr,DepthPanorama:$r};function io(e){for(var t=0,r=eo;t<r.length;t++){var n=r[t];if("string"==typeof e){if(n===e)return!0}else if(e instanceof Hn&&e instanceof to$1[n])return!0}return!1}var no=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function ro(e){for(var t,r,n={},i=0,o=e.split(/(\;|\,)/);i<o.length;i++){var a=o[i].split("="),s=null===(t=a[0])||void 0===t?void 0:t.trim(),c=null===(r=a[1])||void 0===r?void 0:r.trim();s&&c&&(n[s]=c)}return n}function oo(){for(var e,t=document.getElementsByTagName("meta"),r=0;r<t.length;r++){var n=t[r];if("viewport"===n.getAttribute("name")){var i=ro(null!==(e=n.getAttribute("content"))&&void 0!==e?e:""),o=Number(i["initial-scale"]);if(!isNaN(o))return o}}return 1}var so=[351,63],ao=[20,20],uo=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),co=new Float32Array([0,0,1,0,0,1,1,1]),lo=new Uint8Array([0,1,2,1,3,2]),ho=new r$3.BufferGeometry;ho.setAttribute("position",new r$3.BufferAttribute(uo,3)),ho.setAttribute("uv",new r$3.BufferAttribute(co,2)),ho.setIndex(new r$3.BufferAttribute(lo,1));var po=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),Ao=new r$3.Mesh(ho,po),fo=new r$3.Scene;fo.add(Ao);var Mo=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);Mo.position.set(0,0,.5),Mo.lookAt(0,0,0);var go=new r$3.Vector4,yo=new r$3.Vector4;function mo(e){if(po.map){var t=e.getViewport(go),r=e.getScissor(yo),n=e.getScissorTest(),i=e.autoClear;e.setViewport(r.x+ao[0]/3,r.y+ao[1]/3,so[0]/3,so[1]/3),e.setScissor(r.x+ao[0]/3,r.y+ao[1]/3,so[0]/3,so[1]/3),e.setScissorTest(!0),e.autoClear=!1,e.render(fo,Mo),e.setViewport(t),e.setScissor(r),e.setScissorTest(n),e.autoClear=i}else{var o=new r$3.Texture,a=new Image;a.onload=function(){o.image=a,o.wrapS=r$3.ClampToEdgeWrapping,o.wrapT=r$3.ClampToEdgeWrapping,o.minFilter=r$3.LinearFilter,o.needsUpdate=!0,po.needsUpdate=!0,a.onload=function(){}},a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",po.map=o}}var vo=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),No=new r$3.Vector2,Do=new r$3.Frustum,wo=new r$3.Matrix4,To=new r$3.Clock,xo=new WeakMap,Eo=function(e){function t(t){var r,n,i,o,a,s,c,u,l,f;void 0===t&&(t={});var h=e.call(this)||this;if(h.ident=Fe(),h.panoIndex=0,h.needsRender=!1,h.onlyRenderIfNeeds=null===(r=t.onlyRenderIfNeeds)||void 0===r||r,h.imageOptions=t$3.__assign({},null!==(n=t.imageOptions)&&void 0!==n?n:{}),h.textureOptions=t$3.__assign({},null!==(i=t.textureOptions)&&void 0!==i?i:{}),h.poweredByRealsee=null===(o=t.poweredByRealsee)||void 0===o||o,h.extraElements=[],h.controllerInits={Panorama:Object.assign({},t.panorama),Model:Object.assign({},t.model),Floorplan:Object.assign({},t.floorplan),Topview:Object.assign({},t.topview),DepthPanorama:Object.assign({},t.depthPanorama),VRPanorama:Object.assign({},t.vrPanorama)},h.fps={testCount:0,testTime:Ke()},h.modeChangeDuration=null!==(a=t.modeChangeDuration)&&void 0!==a?a:1e3,h.panoramaLikeSavedPose={},"undefined"!=typeof window)if(t.renderer)t.renderer instanceof Ue&&h.throwError(new Error("cannot render a internal renderer")),h.renderer=t.renderer;else try{h.renderer=new Ue({preserveDrawingBuffer:t.preserveDrawingBuffer,backgroundColor:t.backgroundColor,backgroundAlpha:t.backgroundAlpha,antialias:t.antialias});var p=oo();h.renderer.setPixelRatio(1===p?window.devicePixelRatio:1),h.renderer.setSize(512,512)}catch(e){e instanceof Error&&h.throwError(e)}h.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:null!==(c=null===(s=h.renderer)||void 0===s?void 0:s.outputEncoding)&&void 0!==c?c:r$3.sRGBEncoding}),h.scissor=Object.assign({left:0,bottom:0,width:1,height:1},t.scissor),h.camera=new _e(80),h.scene=new Be,h.lastLoadWorkTask=Promise.resolve(),h.networkSubscribe=new Bt,h.networkSubscribe.on("network",(function(e,t,r,n){var i;h.emit("network",e,t,r,n),null===(i=h.analysis)||void 0===i||i.network(h.work,e,t,r,n)})),h.model=new on({allowHosts:[],networkSubscribe:h.networkSubscribe});var d=ht(vo);if(d.name="model_empty",h.model.add(d),h.model.visible=!1,h.readyCallbacks=[],h.modelPending=!1,h.syncingState=!1,h.scene.add(h.model),h.helperGroup=new r$3.Group,h.helperGroup.name="helper",h.scene.add(h.helperGroup),h.videoTexture=new r$3.VideoTexture(t.videoInstance||function(){var e=document.createElement("video");e.loop=!0,e.autoplay=!0,e.playsInline=!0,e.muted=!0,e.crossOrigin="";var t=function t(){document.removeEventListener("touchstart",t,!1),document.removeEventListener("mousedown",t,!1),e.muted=!1};return document.addEventListener("touchstart",t,!1),document.addEventListener("mousedown",t,!1),e}()),function(e){(t=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),e.add(t);var t=new r$3.DirectionalLight(16777215,.3);e.add(t),t=new r$3.AmbientLight(16777215,.3),e.add(t)}(h.scene),h.state={mode:null!==(u=h.currentMode)&&void 0!==u?u:"Panorama",panoIndex:null!==(l=h.panoIndex)&&void 0!==l?l:0,longitude:h.camera.pose.longitude,latitude:h.camera.pose.latitude,fov:h.camera.pose.fov,offset:h.camera.pose.offset.clone()},h.stateSynced=!1,h._enableIOSEDR=!1,h.destroyed=!1,h.paused=!0,"undefined"!=typeof window&&(!1!==t.play&&h.play(),!1!==(null!==(f=t.initialBasisLoader)&&void 0!==f&&f)&&("string"==typeof t.initialBasisLoader?h.initBasisLoader(t.initialBasisLoader):h.initBasisLoader()),h.stopAnimationLoop=Xe.shared.add((function(e,t){h.updateTime(e,t)}),!1,0,10)),h.plugins={},t.plugins&&t.plugins.length)for(var m=0,g=t.plugins;m<g.length;m++){var v=g[m];if("function"==typeof v)v(h);else if(Array.isArray(v)){var y=v[0],b=v[1],_=v[2];if("function"==typeof y){var A=y(h,_);"string"==typeof b&&(h.plugins[b]?h.throwError(new Error("plugin name ".concat(b," is exists."))):h.plugins[b]=A)}}}return h}return t$3.__extends(t,e),t.prototype.dispose=function(){var e;if(!0!==this.destroyed){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var t=this.getElement();t&&t.parentNode&&t.parentNode.removeChild(t),this.scene.remove(this.model);var r=this.model.getMaterial();r&&(r.pano0&&r.pano0.map.dispose(),r.pano1&&r.pano1.map!==(null===(e=r.pano0)||void 0===e?void 0:e.map)&&r.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof Ue&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},t.prototype.setScissor=function(e){Object.assign(this.scissor,e),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(t.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(e){this.helperGroup.visible!==e&&(this.helperGroup.visible=e,this.emit("helpersVisibleChange",e),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(e){this._enableIOSEDR!==e&&(this._enableIOSEDR=e,this.currentMode&&"Panorama"===this.currentMode&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enablePostProcessing",{get:function(){return void 0!==this.screenBuffer},set:function(e){var t,r;if(e){if(!this.screenBuffer){var n=this.getDrawingBufferSize(No);this.screenBuffer=new r$3.WebGLRenderTarget(n.x,n.y,{encoding:null!==(r=null===(t=this.renderer)||void 0===t?void 0:t.outputEncoding)&&void 0!==r?r:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),t.prototype.updateConfiguration=function(e){var t=!1;e.panorama&&(Object.assign(this.controllerInits.Panorama,e.panorama),"Panorama"===this.currentMode&&(t=!0)),e.model&&(Object.assign(this.controllerInits.Model,e.model),"Model"===this.currentMode&&(t=!0)),e.floorplan&&(Object.assign(this.controllerInits.Floorplan,e.floorplan),"Floorplan"===this.currentMode&&(t=!0)),e.topview&&(Object.assign(this.controllerInits.Topview,e.topview),"Topview"===this.currentMode&&(t=!0)),e.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,e.depthPanorama),"DepthPanorama"===this.currentMode&&(t=!0)),e.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,e.vrPanorama),"VRPanorama"===this.currentMode&&(t=!0)),e.imageOptions&&(Object.assign(this.imageOptions,e.imageOptions),"Panorama"!==this.currentMode&&"DepthPanorama"!==this.currentMode&&"VRPanorama"!==this.currentMode||(t=!0)),t&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},t.prototype.appendTo=function(e,t){if(void 0===t&&(t={}),this.renderer)if(this.renderer instanceof Ue){var r=this.getElement();if(r){e.appendChild(r),this.refresh(t);var n=window.getComputedStyle(e).position;"relative"!==n&&"absolute"!==n&&"fixed"!==n&&"sticky"!==n&&(e.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},t.prototype.refresh=function(e,t){if(void 0===e&&(e={}),this.renderer){var r=this.getElement();if(r){var n=r.parentNode;if(n&&n.nodeName){var i=e.width,o=void 0===i?n.offsetWidth:i,a=e.height,s=void 0===a?n.offsetHeight:a;this.renderer instanceof Ue&&(t&&this.renderer.setPixelRatio(t),this.renderer.setSize(o,s))}var c=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=c.x*this.scissor.width/(c.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},t.prototype.addExtraElement=function(e){var t=this;return-1===this.extraElements.indexOf(e)&&(this.extraElements.push(e),this.controller&&this.controller.bindExtraElement(e)),function(){return t.removeExtraElement(e)}},t.prototype.removeExtraElement=function(e){var t=this.extraElements.indexOf(e);-1!==t&&(this.extraElements.splice(t,1),this.controller&&this.controller.unbindExtraElement(e))},t.prototype.getPose=function(){var e=this.camera.copyPose();return{longitude:e.longitude,latitude:e.latitude,fov:e.fov,offset:e.offset}},t.prototype.getSize=function(e){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(e),e.x*=this.scissor.width,e.y*=this.scissor.height,e},t.prototype.getDrawingBufferSize=function(e){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(e),e.x*=this.scissor.width,e.y*=this.scissor.height,e},t.prototype.updateCamera=function(e,t,r){return void 0===r&&(r=!0),this.controller?this.controller.updateCamera(e,t,r):Promise.reject(new Error("controller is not initialized."))},t.prototype.getLongitudeAndLatitude=function(){var e=this.getPose();return{longitude:e.longitude,latitude:e.latitude}},t.prototype.getOffset=function(){return this.getPose().offset},t.prototype.getCameraLocal=function(){if("number"==typeof this.panoIndex&&this.controller&&this.work){var e=this.work.observers[this.panoIndex],t=new r$3.Object3D;return t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.set(1,1,1),t.updateMatrixWorld(!0),function(e,t){var r=new r$3.Vector3(0,0,-1);r.applyQuaternion(e.quaternion);var n=t.quaternion.clone().inverse();return r.applyQuaternion(n),{theta:Math.atan2(r.x,-r.z),phi:-Math.asin(r.y),lookAtVector:r}}(this.camera,t)}},t.prototype.initBasisLoader=function(e){try{if(!this.renderer)throw new Error("renderer is not initialized.");if("undefined"==typeof Promise||"undefined"==typeof WeakMap||"undefined"==typeof WebAssembly)throw new Error("Basis loader not support.");"string"==typeof e&&zi.setTranscoderPath(e),zi.workerConfig.format||zi.detectSupport(this.renderer),zi._allocateWorker(0)}catch(e){e instanceof Error&&this.throwError(e)}},Object.defineProperty(t.prototype,"work",{get:function(){var e=xo.get(this);if(e&&vn.get(e))return e},enumerable:!1,configurable:!0}),t.prototype.load=function(e,t,r,n){var i=this;if(void 0===n&&(n=!0),!this.renderer)throw new Error("renderer is not initialized");var o=this.lastLoadWorkTask.then((function(){return!(o=e)||"object"!=_typeof2(o)&&"function"!=typeof o||"function"!=typeof o.then?i.load_(e,t,r,n):e.then((function(e){return i.load_(e,t,r,n)}));var o}));return this.lastLoadWorkTask=o.catch((function(e){i.throwError(e)})),o},t.prototype.load_=function(e,r,n,i){var o,a,s,c,u,l,f,h,p,d=this;void 0===i&&(i=!0);var m,g,v,y=Dn(e),b=this.work;void 0===r&&(r=b?"inherit":"initial"),"inherit"===r?(m="number"==typeof this.panoIndex&&y.observers[this.panoIndex]?this.panoIndex:y.initial.panoIndex,g=null!==(o=this.currentMode)&&void 0!==o?o:y.initial.mode,v={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):"initial"===r?(g=null!==(a=this.currentMode)&&void 0!==a?a:y.initial.mode,m=y.initial.panoIndex,v=g===t.Mode.Panorama||g===t.Mode.DepthPanorama||g===t.Mode.Model||g===t.Mode.VRPanorama?{longitude:y.initial.longitude,latitude:y.initial.latitude,fov:y.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(m=null!==(s=r.panoIndex)&&void 0!==s?s:y.initial.panoIndex,g=null!==(u=null!==(c=r.mode)&&void 0!==c?c:this.currentMode)&&void 0!==u?u:"Panorama",v={longitude:null!==(l=r.longitude)&&void 0!==l?l:y.initial.longitude,latitude:null!==(f=r.latitude)&&void 0!==f?f:y.initial.latitude,fov:null!==(h=r.fov)&&void 0!==h?h:y.initial.fov}),this.emit("willLoad",e,y,{panoIndex:m,mode:g,longitude:v.longitude,latitude:v.latitude,fov:v.fov});var _=function(){var t;d.panoIndex=m,d.panoramaLikeSavedPose.longitude=y.initial.longitude,d.panoramaLikeSavedPose.latitude=y.initial.latitude,d.panoramaLikeSavedPose.fov=y.initial.fov;var r=d.controller?null!=n?n:d.modeChangeDuration:0,o=t$3.__assign(t$3.__assign({initial:[m,v,r,i]},d.commonParams()),d.controllerInits[g]);d.controller?!1===d.controller.updateWork(y,m,v,r,!0)&&(d.controller.destroy(),d.controller=d.applyController(g,o)):d.controller=d.applyController(g,o),d.emit("load",e,y,{panoIndex:m,mode:g,longitude:v.longitude,latitude:v.latitude,fov:v.fov}),null===(t=d.analysis)||void 0===t||t.work(y)},A=function(e){var t;void 0===e&&(e=Qe),y.model&&(d.model.name!==(null===(t=y.model)||void 0===t?void 0:t.file)?(d.emit("modelWillLoad",y.model),d.loadModel(y.model,y.allowHosts,e,!0)):e&&e())};return xo.set(this,y),g===t.Mode.Floorplan||g===t.Mode.Topview||g===t.Mode.Model?A((function(){_(),d.needsRender=!0})):(this.controller||(this.camera.setFromPose({distance:0,fov:y.initial.fov,longitude:y.initial.longitude,latitude:y.initial.latitude,offset:y.observers[y.initial.panoIndex].position}),this.needsRender=!0),_(),null===(p=this.controller)||void 0===p||p.once("panoLoaded",(function(){d.needsRender=!0,d.emit("cameraUpdate",d.camera.copyPose(),i),A()}))),this.ready().then((function(){d.emit("loaded",e,d.work)}))},t.prototype.changeMode=function(e,r,n,i,o){var a=this;if(void 0===r&&(r={}),void 0===n&&(n=this.modeChangeDuration),void 0===i&&(i=!0),void 0===o&&(o=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise((function(s,c){if(!t.Mode.hasOwnProperty(e)){var u=new Error('mode "'.concat(e,'" is not existed'));return a.throwError(u),void c(u)}if((e===t.Mode.Floorplan||e===t.Mode.Topview||e===t.Mode.Model)&&(Re(a.model)||!0!==a.model.loaded))return u=new Error("model is not ready."),a.throwError(u),void c(u);if(Re(a.controller))return u=new Error("controller is not ready."),a.throwError(u),void c(u);var l=a.controller,f=a.currentMode,h=function(){var u,h,p,d;if(a.emit("wantsChangeMode",e,f))c(new Error("change mode canceled."));else{if(a.controller&&!1===o&&f===e)e===t.Mode.Panorama||e===t.Mode.DepthPanorama||e===t.Mode.Model||e===t.Mode.VRPanorama?"number"==typeof r.panoIndex&&r.panoIndex!==a.panoIndex?a.controller.moveToPano(null!==(h=null!==(u=r.panoIndex)&&void 0!==u?u:a.panoIndex)&&void 0!==h?h:0,t$3.__assign({duration:n},r),i):a.controller.updateCamera(r,n,i):("number"==typeof r.panoIndex&&r.panoIndex!==a.panoIndex&&(a.panoIndex=r.panoIndex),a.controller.updateCamera(r,n,i));else{l.destroy();var m=null!==(d=null!==(p=r.panoIndex)&&void 0!==p?p:a.panoIndex)&&void 0!==d?d:0,g=io(e)?a.panoramaLikeSavedPose:{};"number"!=typeof r.longitude&&"number"!=typeof r.latitude||(g.longitude=r.longitude,g.latitude=r.latitude),"number"==typeof r.fov&&(g.fov=r.fov);var v=t$3.__assign(t$3.__assign({initial:[m,g,n,i]},a.commonParams()),a.controllerInits[e]);a.saveControllerPose(l),a.controller=a.applyController(e,v);var y=to$1[e].initAnimationEndPose(v);a.emit("modeChange",e,f,m,y)}s()}};e===t.Mode.VRPanorama?("undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){if("granted"==e)return Promise.resolve();var t=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(t)})):Promise.resolve()).then((function(){return h()})).catch((function(e){e instanceof Error&&(a.throwError(e),c(e))})):h()}))},t.prototype.getPixels=function(e,t,r,n,i){if(void 0===i&&(i=1),!this.renderer)throw new Error("renderer is not initialized.");var o=this.getPixelsRenderTarget,a=this.renderer.getSize(new r$3.Vector2);e=Math.min(Math.max(e,Math.floor(r/2)),Math.floor(a.x-r)),t=Math.min(Math.max(t,Math.floor(n/2)),Math.floor(a.y-n)),e*=i,t*=i,r*=i,n*=i,o.setSize(a.x*i,a.y*i),o.scissor.set(e,t,r,n),o.scissorTest=!0,this.renderer.setRenderTarget(o);var s=new Uint8Array(r*n*4);return this.controller?this.controller.render(To.getDelta()):this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(o,e,t,r,n,s),this.renderer.setRenderTarget(null),o.setSize(1,1),o.scissor.set(0,0,0,0),o.scissorTest=!1,s},t.prototype.getElement=function(){var e;return null===(e=this.renderer)||void 0===e?void 0:e.domElement},t.prototype.render=function(e,t){var r=this;if(void 0===t&&(t=!1),!this.renderer)return null;if(t){var n=this.renderer.getSize(new r$3.Vector2);this.scene.traverseVisible((function(e){e.setResolution&&e.setResolution(n.x,n.y)}))}if(this.controller&&this.screenBuffer&&null===this.renderer.getRenderTarget()){var i=this.getDrawingBufferSize(No);return this.screenBuffer.setSize(i.x,i.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(To.getDelta()),this.poweredByRealsee&&mo(this.renderer),this.renderer.setRenderTarget(null),e&&Xe.shared.add(e,!0),this.screenBuffer}return this.aroundScissor((function(){r.renderer&&(r.controller?r.controller.render(To.getDelta()):r.renderer.render(r.scene,r.camera),r.poweredByRealsee&&mo(r.renderer)),e&&Xe.shared.add(e,!0)})),null},t.prototype.updateTime=function(e,t){var r=this;if(!this.destroyed){this.syncingState=this.syncState(e,t),this.controller&&this.controller.updateTime(e,t),this.syncingState=!1;var n=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(n),n.x*=this.scissor.width,n.y*=this.scissor.height);var i=[];if(wo.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Do.setFromProjectionMatrix(wo),this.scene.traverse((function(e){e.setResolution&&e.setResolution(n.x,n.y),e.mixer instanceof r$3.AnimationMixer&&e.mixer.update(To.getDelta()),(e instanceof r$3.Mesh||e instanceof r$3.Line||e instanceof r$3.Points)&&(e instanceof r$3.ImmediateRenderObject||!e.frustumCulled||Do.intersectsObject(e))&&i.push(e)})),this.renderer&&!1===this.paused){var o=void 0;if(!0!==this.onlyRenderIfNeeds)o=this.render();else{for(var a=0,s=i;a<s.length;a++){var c=s[a],u=function(e){!0===e.needsRender?(e.needsRender=!1,r.needsRender=!0):e.mixer&&e.mixer.stats.actions.inUse>0&&(r.needsRender=!0)};u(c),c.traverseAncestors(u)}this.controller&&!0===this.controller.needsRender&&(this.controller.needsRender=!1,this.needsRender=!0),!1!==this.needsRender&&(o=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor((function(){return r.controller.postProcessing(r.screenBuffer,To.getDelta())})),this.hasListener("renderFrame")&&this.emit("renderFrame",void 0!==o)}if(this.fps.testTime&&e-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=e,this.fps.testCount=0,this.renderer){var l=function(e){var t=e.getError();if(t===e.NO_ERROR)return null;switch(t){case e.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case e.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case e.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case e.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case e.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case e.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());l&&this.throwError(l)}}},t.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof Ue&&this.renderer.clear(!0,!0,!0)},t.prototype.play=function(){this.needsRender=!0,this.paused=!1},t.prototype.moveToPano=function(e,r,n){void 0===r&&(r={}),void 0===n&&(n=!0);var i=this,o=i.controller,a=i.currentMode,s=i.renderer;o?s?a===t.Mode.Floorplan||a===t.Mode.Topview?Re(e)||(this.panoIndex=e,this.changeMode(t.Mode.Panorama,r,void 0,n)):o.moveToPano(e,r,n):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},t.prototype.preloadPano=function(e,t){var r=this;if(void 0===t&&(t=Qe),!this.work)return Promise.reject(new Error("work never loaded"));var n=this.work.observers[e],i=Ke();return Promise.all(["right","left","up","down","front","back"].map((function(t){var i=t$3.__assign({key:"pano.".concat(e,".").concat(t),basisLoaderInitialized:zi.isInitialized()},ti(r.imageOptions,["size","format","quality"])),o=n.images[t];return function(e,t){return void 0===t&&(t={}),e in Rt?Rt[e]:Rt[e]=new Promise((function(r,n){var i=document.createElement("link");i.href=e,i.rel=i.relList&&i.relList.supports("prefetch")?"prefetch":"preload",i.as="fetch",i.crossOrigin="";var o=Ke(),a=document.head||document.getElementsByTagName("head")[0];a&&a.appendChild(i);var s=!1;i.onload=function(){var n;if(!0!==s){s=!0,r();var i=Ke(),a={source:e,requestTime:o,responseTime:i,costs:i-o,headers:{}};null===(n=t.networkSubscribe)||void 0===n||n.emit("network",e,"Link","preload",JSON.stringify(a))}},i.onerror=function(r){var i;if(!0!==s){s=!0;var o=new St(e,"Link",0);n(o),null===(i=t.networkSubscribe)||void 0===i||i.emit("network",e,"Link","error",o.message)}}}))}(r.imageOptions.transform?r.imageOptions.transform(o,i):ai(o,i),{networkSubscribe:r.networkSubscribe})}))).then((function(){var e=Ke()-i;return t(e),e}))},t.prototype.project2d=function(e,t){if(void 0===t&&(t=!1),!this.renderer)return null;if(!1===this.model.empty&&t){var r=this.camera.position,n=e.clone().sub(r),i=new r$3.Raycaster(r,n.clone().normalize()),o=this.model.intersectRaycaster(i)[0];if(o&&o.distance+.01<n.length())return null}var a=e.clone().project(this.camera);if(Math.abs(a.z)>1)return null;var s=this.renderer.getSize(new r$3.Vector2),c=s.x*this.scissor.width,u=s.y*this.scissor.height,l=s.x*this.scissor.left+(a.x+1)/2*c,f=s.y*(1-this.scissor.bottom-this.scissor.height)+(1-a.y)/2*u;return new r$3.Vector2(l,f)},t.prototype.getRenderObjects=function(e){wo.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Do.setFromProjectionMatrix(wo),e||(e=this.scene);var t=[];return e.traverseVisible((function(e){(e instanceof r$3.Mesh||e instanceof r$3.Line||e instanceof r$3.Points)&&(e instanceof r$3.ImmediateRenderObject||!e.frustumCulled||Do.intersectsObject(e))&&t.push(e)})),t},t.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||t.Mode.Panorama,panoIndex:this.panoIndex||0})},t.prototype.setState=function(e,r,n){var i,o,a,s,c,u,l,f;void 0===r&&(r=!1),void 0===n&&(n=!0),!(e=Object.assign({},e)).offset||e instanceof r$3.Vector3||(e.offset=new r$3.Vector3(e.offset.x,e.offset.y,e.offset.z));var h,p,d,m,g=null!==(i=e.panoIndex)&&void 0!==i?i:this.state.panoIndex,v=null!==(o=e.mode)&&void 0!==o?o:this.state.mode;if(this.work)if(this.work.observers[g])if(e.mode!==t.Mode.Floorplan&&e.mode!==t.Mode.Topview&&e.mode!==t.Mode.Model||!Re(this.model)&&!0===this.model.loaded){if(this.state.mode!==v){var y=void 0;y=io(this.state.mode)&&io(v)?t$3.__assign({},this.state):io(v)?t$3.__assign({},this.panoramaLikeSavedPose):t$3.__assign({},e),"number"==typeof e.longitude&&(y.longitude=e.longitude),"number"==typeof e.latitude&&(y.latitude=e.latitude),"number"==typeof e.fov&&(y.fov=e.fov);var b=t$3.__assign(t$3.__assign({initial:[g,y,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[v]),_=to$1[v].initAnimationEndPose(b);h=_.longitude,p=_.latitude,d=_.fov,m=_.offset}else h=null!==(a=e.longitude)&&void 0!==a?a:this.state.longitude,p=null!==(s=e.latitude)&&void 0!==s?s:this.state.latitude,d=null!==(c=e.fov)&&void 0!==c?c:this.state.fov,m=null!==(u=e.offset)&&void 0!==u?u:this.state.offset;var A={panoIndex:g,mode:v,longitude:h,latitude:p,fov:d,offset:m};this.emit("setState",A),Tn(this.state,A)||(wn(this.state,A),this.controller&&(this.controller.userAction=n),r&&this.state.mode===A.mode&&(this.syncingState=this.syncState(Ke(),0,r),this.syncingState&&(null===(l=this.controller)||void 0===l||l.updateTime(Ke(),0),this.syncingState=!1)),this.emit("stateChange",this.state,n),null===(f=this.analysis)||void 0===f||f.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},t.prototype.aroundScissor=function(e){if(this.renderer){var t=new r$3.Vector2,r=0!==this.scissor.left||0!==this.scissor.bottom||1!==this.scissor.width||1!==this.scissor.height;if(r){this.renderer.getSize(t);var n=Math.floor(t.x*this.scissor.left),i=Math.floor(t.y*this.scissor.bottom),o=Math.floor(t.x*this.scissor.width),a=Math.floor(t.y*this.scissor.height);this.renderer.setViewport(n,i,o,a),this.renderer.setScissor(n,i,o,a),this.renderer.setScissorTest(!0)}e(),r&&(this.renderer.setViewport(0,0,t.x,t.y),this.renderer.setScissor(0,0,t.x,t.y),this.renderer.setScissorTest(!1))}},t.prototype.syncState=function(e,r,n){void 0===n&&(n=!1);var i=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var o={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,o,this.modeChangeDuration,this.controller.userAction),!0}if(!1===this.controller.isReady())return!1;if(this.readyCallbacks.length){var a=this.currentMode;if(a!==t.Mode.Floorplan&&a!==t.Mode.Topview&&a!==t.Mode.Model||!this.modelPending)for(var s=void 0;s=this.readyCallbacks.shift();)s()}if(this.controller instanceof to$1.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var c={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,c,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return c={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,c,!1),!0;if(this.controller instanceof to$1.Topview){var u=1,l=n?this.state.fov:ln(this.camera.pose.fov,this.state.fov,u),f=n?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(ln(this.camera.pose.offset.x,this.state.offset.x,.2),ln(this.camera.pose.offset.y,this.state.offset.y,.2),ln(this.camera.pose.offset.z,this.state.offset.z,.2));if(He(l,this.camera.pose.fov)||We(f,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:l},0).catch(Qe),this.controller.locationMotion.set({x:f.x,y:f.y,z:f.z},0).catch(Qe),!0}else{u=1;var h=Math.PI/45,p=(l=n?this.state.fov:ln(this.camera.pose.fov,this.state.fov,u),n?{longitude:this.state.longitude,latitude:this.state.latitude}:function(e,t,r){if(e.longitude===t.longitude&&e.latitude===t.latitude)return{longitude:t.longitude,latitude:t.latitude};var n=an(e.longitude),i=e.latitude,o=an(t.longitude),a=t.latitude;o-n>un?n+=cn:n-o>un&&(n-=cn);var s=r/Math.sqrt(Math.pow(o-n,2)+Math.pow(a-i,2));return s>=1?{longitude:t.longitude,latitude:t.latitude}:{longitude:n+(o-n)*s,latitude:i+(a-i)*s}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},h)),d=p.longitude,m=p.latitude;if(He(d,this.camera.pose.longitude,2*Math.PI)||He(m,this.camera.pose.latitude)||He(l,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:d,latitude:m,fov:l},0).catch(Qe),!0}return this.stateSynced=!0,!1===i&&this.emit("stateSynced",this.state),!1},t.prototype.ready=function(){var e=this;return new Promise((function(t){return e.readyCallbacks.push(t)}))},t.prototype.throwError=function(e){this.hasListener("error")?this.emit("error",e):console.error(e)},t.prototype.loadModel=function(e,t,r,n){var i=this,o=e.file;this.emit("modelWillLoad",e);var a=new on({allowHosts:t,networkSubscribe:this.networkSubscribe});a.once("bvhLoaded",(function(){var e,t;o===(null===(t=null===(e=i.work)||void 0===e?void 0:e.model)||void 0===t?void 0:t.file)&&i.emit("modelBvhLoaded",a)})),a.once("geometryLoaded",(function(){var e,t;o===(null===(t=null===(e=i.work)||void 0===e?void 0:e.model)||void 0===t?void 0:t.file)&&i.emit("modelGeometryLoaded",a)})),a.on("error",(function(e){var t,n,s,c;if(o===(null===(n=null===(t=i.work)||void 0===t?void 0:t.model)||void 0===n?void 0:n.file)){a.bounding.makeEmpty();for(var u=0,l=i.work.observers;u<l.length;u++){var f=l[u];a.bounding.expandByPoint(f.standingPosition),a.bounding.expandByPoint((new r$3.Vector3).fromArray([f.position.x,2*f.position.y-f.standingPosition.y,f.position.z]))}var h=ht(a.bounding,new r$3.Vector3(1,0,1));h.visible=!0,h.name="model_empty",a.add(h);var p,d=i.model;d&&(d.show(),p=d.getMaterial()||{},i.scene.remove(d),d.dispose(),a.setTransparent(d.getTransparent())),p&&a.setMaterial(p),i.model=a,i.scene.add(a),null===(s=i.controller)||void 0===s||s.updateModel(a),null===(c=i.renderer)||void 0===c||c.compile(i.scene,i.camera),i.emit("modelLoadError",e,a),i.throwError(e),i.modelPending=!1,r()}})),a.on("shownFloorChange",(function(e,t){var r,n;o===(null===(n=null===(r=i.work)||void 0===r?void 0:r.model)||void 0===n?void 0:n.file)&&i.emit("modelShownFloorChange",e,t)})),a.once("loaded",(function(){var t,n,s,c;if(o===(null===(n=null===(t=i.work)||void 0===t?void 0:t.model)||void 0===n?void 0:n.file)&&!i.destroyed){a.bounding.max.y-a.bounding.min.y<1.5&&(a.bounding.max.y=a.bounding.min.y+10);var u,l=i.model;l&&(l.show(),u=l.getMaterial()||{},i.scene.remove(l),l.dispose(),a.setTransparent(l.getTransparent())),u&&a.setMaterial(u),e.bvh&&a.buildBVH(),i.model=a,i.scene.add(a),null===(s=i.controller)||void 0===s||s.updateModel(a),null===(c=i.renderer)||void 0===c||c.compile(i.scene,i.camera),i.needsRender=!0,i.modelPending=!1,r(),i.emit("modelLoaded",a),i.emit("modelMaterialLoaded",a)}})),this.modelPending=!0,a.load(e,this.textureOptions).catch((function(e){return Qe}))},t.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},t.prototype.saveControllerPose=function(e){void 0===e&&(e=this.controller),e&&io(e)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},t.prototype.applyController=function(e,r){var n=this;if(!this.renderer)throw new Error("renderer is not initialized.");var i=to$1[e];e===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(e===t.Mode.Floorplan||e===t.Mode.Topview||e===t.Mode.Model),this.currentMode=e;for(var o=new i(r),a=function(e){o.on(e,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.emit.apply(n,t$3.__spreadArray([e],t,!1));if(i)return!1}))},s=0,c=no;s<c.length;s++)a(c[s]);var u=to$1[e].initAnimationEndPose(r),l=r.initial[3],f={panoIndex:r.initial[0],mode:e,longitude:u.longitude,latitude:u.latitude,fov:u.fov,offset:u.offset};return Tn(this.state,f)||(wn(this.state,f),this.emit("stateChange",this.state,l)),this.emit("currentStateChange",this.getCurrentState(),l),o.on("cameraUpdate",(function(t,r){var i;if(n.controller){var o=t$3.__assign(t$3.__assign({},n.controller.getTargetPose()),{panoIndex:n.panoIndex,mode:e});r&&!1===n.syncingState&&n.state.mode===o.mode&&!Tn(n.state,o)&&(wn(n.state,o),n.emit("stateChange",n.state,r),null===(i=n.analysis)||void 0===i||i.state(n.work,n.state))}n.emit("currentStateChange",n.getCurrentState(),r)})),o.on("initAnimationWillStart",(function(t,r,i){var o,a=t$3.__assign(t$3.__assign({},r),{panoIndex:t,mode:e});i&&n.state.mode===a.mode&&!Tn(n.state,a)&&(wn(n.state,a),n.emit("stateChange",n.state,i),null===(o=n.analysis)||void 0===o||o.state(n.work,n.state))})),o.on("initAnimationEnded",(function(t,r,i){var o,a=t$3.__assign(t$3.__assign({},r),{panoIndex:t,mode:e});i&&n.state.mode===a.mode&&!Tn(n.state,a)&&(wn(n.state,a),n.emit("stateChange",n.state,i),null===(o=n.analysis)||void 0===o||o.state(n.work,n.state))})),o.on("panoWillArrive",(function(t,r,i){var o;n.panoIndex=t;var a=t$3.__assign(t$3.__assign({},r),{panoIndex:t,mode:e});i&&n.state.mode===a.mode&&!Tn(n.state,a)&&(wn(n.state,a),n.emit("stateChange",n.state,i),null===(o=n.analysis)||void 0===o||o.state(n.work,n.state))})),o.on("panoArrived",(function(t,r,i){var o,a=t$3.__assign(t$3.__assign({},r),{panoIndex:t,mode:e});i&&n.state.mode===a.mode&&!Tn(n.state,a)&&(wn(n.state,a),n.emit("stateChange",n.state,i),null===(o=n.analysis)||void 0===o||o.state(n.work,n.state))})),o.on("moveToPano",(function(e,t){n.emit("currentStateChange",n.getCurrentState(),t)})),o.on("wantsMoveToPano",(function(e,t,r){var i=n.emit("wantsMoveToPano",e,t,r);i||(i=n.emit("wantsToMoveToPano",e,t,r)),i||n.moveToPano(e,t,r)})),o.on("vrWantsToExit",(function(){n.currentMode===t.Mode.VRPanorama&&n.changeMode(t.Mode.Panorama)})),o.on("error",(function(e){return n.throwError(e)})),o},t.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},t.Line=null,t}(Tt),useFiveState,useFiveProject2d$1,useFiveEventCallback,useFiveCurrentState,createFiveProvider,FiveCanvas;five.AnimationFrameLoop=Xe,five.BVH=vt,five.BVHNode=gt,five.BVHVector3=Mt,five.Camera=_e,exports("F",Five=five.Five=Eo),five.InternalWebGLRenderer=Ue,five.Model=on,five.NetworkSubscribe=Bt,five.PBMContainer=$e,five.PBMGroup=et,five.PBMMaterial=ut,five.PBMMesh=Je,five.PROXY_CONTROLLER_EVENT_NAMES=no,five.Scene=Be,five.Subscribe=Tt,five.defaultImageURLTransform=ai,five.getViewportScale=oo,exports("t",parseWork=five.parseWork=Dn),exports("i",useFiveState),exports("k",useFiveProject2d$1),exports("l",useFiveEventCallback),exports("u",useFiveCurrentState),exports("s",createFiveProvider),exports("q",FiveCanvas),Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$2.exports,n$2=require$$4,r$2=five;function o$1(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=u$1.createContext(null);function s$1(){var e=u$1.useContext(f$1);if(!e)throw new Error("FiveProvider never found.");return e.five}function c$1(){var e=u$1.useContext(f$1);if(!e)throw new Error("FiveProvider never found.");return e.loadWork}var l$2={display:"inline-block",overflow:"hidden"};function d(e,t){var r=s$1(),n=[r];void 0!==t&&(n=n.concat(t)),u$1.useLayoutEffect((function(){return e(r.scene)}),n)}var v$1=d;function p$1(e){return e$1.__assign({},e.state)}function h$1(e){var t=e.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(e.camera.position,t)}function m$1(e){return e.camera.getWorldDirection(new i$1.Vector3)}function y$1(e){return e.model.empty?"Empty":"Loaded"}function S(e,t){return t.indexOf(e)>=0}function g$1(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];void 0!==t[i]&&(e[i]=t[i])}}function C$1(e,t){if(S("loadWork",t))return e}function b(e,t){if(S("setState",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.setState.apply(e,t)}}function w$1(e,t){if(S("on",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.on.apply(e,t)}}function E$1(e,t){if(S("on",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.once.apply(e,t)}}function k(e,t){if(S("off",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.off.apply(e,t)}}function x(e,t){if(S("intersectRaycaster",t))return function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=e.model).intersectRaycaster.apply(t,r)}}function L$1(e,t){if(S("project2d",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.project2d.apply(e,t)}}function F(e,t){if(S("updateCamera",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.updateCamera.apply(e,t)}}function _$2(e,t){if(S("initBasisLoader",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.initBasisLoader.apply(e,t)}}function P$1(e,t){if(S("getPixels",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.getPixels.apply(e,t)}}function R$1(e,t){if(S("render",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.render.apply(e,t)}}function V(e,t){if(S("needsRender",t))return function(){e.needsRender=!0}}function M(e,t){if(S("preloadPano",t))return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.preloadPano.apply(e,t)}}function W$1(e,t){if(S("showFloor",t))return function(t){"number"==typeof t?e.model.show(t):e.model.show()}}function O$1(e,t){if(S("toggleHelperVisible",t))return function(t){e.helperVisible=t}}function j$1(e,t){for(var r={},n=t.length,i=-1;++i<n;){var o=t[i];o in e&&(r[o]=e[o])}return r}function N$1(e,t){for(var r=0;r<e.length;r++)for(var n=0;n<t.length;n++)if(e[r]===t[n])return!0;return!1}var A$1=function(){function e(e,t){this.values=e,this.listeners=[],this.onValuesChange=t}return e.prototype.on=function(e,t){var r=this,n=[e,t];return this.listeners.push(n),function(){var e=r.listeners.indexOf(n);e>=0&&r.listeners.splice(e,1)}},e.prototype.getValues=function(e){return j$1(this.values,e)},e.prototype.setValues=function(e,t){var r,n,i=[];for(var o in t)e.indexOf(o)>=0&&(r=t[o],n=this.values[o],!("number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n)||r===n))&&i.push(o);if(0!==i.length){for(var a=e$1.__assign({},this.values),s=0,c=i;s<c.length;s++){var u=c[s];this.values[u]=t[u]}this.onValuesChange&&this.onValuesChange(this.values,a);for(var l=0,f=this.listeners;l<f.length;l++){var h=f[l],p=h[0],d=h[1];if(N$1(p,i)){var m=j$1(a,p);d(j$1(this.values,p),m)}}}},e}();exports("q",FiveCanvas=react.FiveCanvas=function(e){var t=e.width,r=e.height,n=s$1(),i=u$1.createRef(),o=e$1.__assign({width:t,height:r},l$2);return u$1.useLayoutEffect((function(){if(i.current&&n.renderer){if(null!==n.renderer.domElement.parentNode&&n.renderer.domElement.parentNode!==i.current)throw new Error("There are more than 2 fiveCanvas in this context.");n.renderer.domElement.parentNode!==i.current&&i.current.appendChild(n.renderer.domElement),n.camera.aspect=t/r,n.camera.updateProjectionMatrix(),n.renderer.setSize(t,r),n.needsRender=!0}}),[t,r,i.current]),u$1.createElement("div",{ref:i,style:o})}),react.INJECTION_PROPNAME="$five",react.Store=A$1,react.createFiveFeature=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},exports("s",createFiveProvider=react.createFiveProvider=function(e){return void 0===e&&(e={}),function(t){function r(r){var n,i=t.call(this,r)||this,o=function(e){var t=void 0===e?{}:e,r=t.backgroundColor,n=void 0===r?1579548:r,i=t.backgroundAlpha,o=void 0===i?1:i,a=t.pixelRatio,s=void 0===a?1:a;if("undefined"!=typeof window){var c=a$1.shift();return c||((c=new i$1.WebGLRenderer({antialias:!1,alpha:!0})).outputEncoding=i$1.sRGBEncoding),c.setPixelRatio(s),c.setClearColor(n,o),c.autoClear=!0,c}}({pixelRatio:1===r$2.getViewportScale()?window.devicePixelRatio:1});return i.five=new r$2.Five(e$1.__assign({renderer:o},e)),(r.work||r.initialWork)&&i.five.load(r.work||r.initialWork,r.initialState,void 0,null===(n=r.initialUserAction)||void 0===n||n),i.five.on("load",(function(){var e;i.props.onWorkChange&&i.props.onWorkChange(null===(e=i.five)||void 0===e?void 0:e.work)})),i.five.on("stateChange",(function(e,t){i.props.onStateChange&&i.props.onStateChange(e,t)})),i.five.on("currentStateChange",(function(e,t){i.props.onCurrentStateChange&&i.props.onCurrentStateChange(e,t)})),i.five.on("error",(function(e){i.props.onError?i.props.onError(e):console.warn(e.message)})),i}return e$1.__extends(r,t),r.prototype.loadWork=function(e,t,r,n){if(void 0===n&&(n=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(e,t,r,n)},r.prototype.shouldComponentUpdate=function(e){var t,r;return e.work&&e.work!==(null===(t=this.five)||void 0===t?void 0:t.work)&&(null===(r=this.five)||void 0===r||r.load(e.work,e.initialState)),!0},r.prototype.componentWillUnmount=function(){var e;this.five&&(this.five.dispose(),(e=this.five.renderer)&&-1===a$1.indexOf(e)&&a$1.push(e),delete this.five)},r.prototype.render=function(){var e=this;return u$1.createElement(f$1.Provider,{value:{five:this.five,loadWork:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.loadWork.apply(e,t)}}},this.props.children)},r}(u$1.Component)}),react.createStore=function(e){var t=u$1.createContext(null);return{useStore:function(e){var r=u$1.useContext(t);if(null===r)throw new Error("StoreProvider never found.");var n=u$1.useRef(!0),i=u$1.useState(r.getValues(e)),o=i[0],a=i[1],s=e$1.__spreadArray([r],e,!0);return u$1.useLayoutEffect((function(){return n.current?n.current=!1:a(r.getValues(e)),r.on(e,(function(e){return a(e)}))}),s),[o,u$1.useCallback((function(t){return r.setValues(e,t)}),s)]},useStoreSetter:function(e){var r=u$1.useContext(t);if(null===r)throw new Error("StoreProvider never found.");return u$1.useCallback((function(t){return r.setValues(e,t)}),e$1.__spreadArray([r],e,!0))},watchStore:function(e,r,n){var i=u$1.useContext(t);if(null===i)throw new Error("StoreProvider never found.");var o=e$1.__spreadArray([i],e,!0);void 0!==n&&(o=o.concat(n)),u$1.useLayoutEffect((function(){return i.on(e,r)}),o)},useStoreAction:function(r){var n=u$1.useContext(t);if(null===n)throw new Error("StoreProvider never found.");return u$1.useCallback((function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e[r],a=o[0],s=o.slice(1),c=function(){return n.getValues(s)},u=function(e){return n.setValues(s,e)};return a.apply(void 0,e$1.__spreadArray([c,u],t,!1))}),[])},StoreProvider:function(e){function r(t){var r=e.call(this,t)||this;return r.store=new A$1(t.initialValue,(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.props.onValuesChange&&(e=r.props).onValuesChange.apply(e,t)})),r}return e$1.__extends(r,e),r.prototype.shouldComponentUpdate=function(e){return e.children!==this.props.children},r.prototype.render=function(){return u$1.createElement(t.Provider,{value:this.store},this.props.children)},r}(u$1.Component)}},react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var e=s$1();return{updateCamera:u$1.useCallback((function(t,r){return e.updateCamera(t,r)}),[e]),initBasisLoader:u$1.useCallback((function(t){return e.initBasisLoader(t)}),[e]),getPixels:u$1.useCallback((function(t,r,n,i,o){return e.getPixels(t,r,n,i,o)}),[e]),render:u$1.useCallback((function(t){return e.render(t)}),[e]),needsRender:u$1.useCallback((function(){return e.needsRender=!0}),[e]),preloadPano:u$1.useCallback((function(t,r){return e.preloadPano(t,r)}),[e])}},react.useFiveCameraDirection=function(){var e=s$1(),t=u$1.useState((function(){return m$1(e)})),r=t[0],n=t[1];return u$1.useLayoutEffect((function(){return e.on("cameraUpdate",(function(){return n(m$1(e))}))}),[e]),r},react.useFiveCameraRaycaster=function(){var e=s$1(),t=u$1.useState((function(){return h$1(e)})),r=t[0],n=t[1];return u$1.useLayoutEffect((function(){return e.on("cameraUpdate",(function(){return n(h$1(e))}))}),[e]),r},react.useFiveCurrentObserver=function(){var e=s$1(),t=u$1.useState((function(){return e.getCurrentState()})),r=t[0],n=t[1];return u$1.useLayoutEffect((function(){return e.on("currentStateChange",(function(){return n(e.getCurrentState())}))}),[e]),e.work?e.work.observers[r.panoIndex]:null},exports("u",useFiveCurrentState=react.useFiveCurrentState=function(){var e=s$1(),t=u$1.useState((function(){return e.getCurrentState()})),r=t[0],n=t[1],i=u$1.useCallback((function(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var i="function"==typeof t?t(e.getCurrentState()):t;e.setState(i,r,n)}),[e]);return u$1.useLayoutEffect((function(){return e.on("currentStateChange",(function(){return n(e.getCurrentState())}))}),[e]),[r,i]}),exports("l",useFiveEventCallback=react.useFiveEventCallback=function(e,t,r){var n=s$1(),i=[n,e];void 0!==r&&(i=i.concat(r)),u$1.useLayoutEffect((function(){return n.on(e,t)}),i)}),react.useFiveFloor=function(){var e=s$1(),t=u$1.useState(e.model.shownFloor),r=t[0],n=t[1],i=u$1.useState(e.model.floorLength),o=i[0],a=i[1],s=u$1.useCallback((function(t){"number"==typeof t?e.model.show(t):e.model.show()}),[e]);return u$1.useLayoutEffect((function(){var t=[];return t.push(e.on("modelShownFloorChange",(function(){return n(e.model.shownFloor)}))),t.push(e.on("modelLoaded",(function(){return a(e.model.floorLength)}))),function(){for(var e;e=t.shift();)e()}}),[e]),[r,o,s]},react.useFiveHelper=function(){var e=s$1(),t=u$1.useState(e.helperVisible),r=t[0],n=t[1],i=u$1.useCallback((function(t){e.helperVisible=t}),[e]);return u$1.useLayoutEffect((function(){return e.on("helpersVisibleChange",(function(e){return n(e)}))}),[e]),[r,i]},react.useFiveModelIntersectRaycaster=function(){var e=s$1();return u$1.useCallback((function(t){return e.model.intersectRaycaster(t)}),[e])},react.useFiveModelReadyState=function(){var e=s$1(),t=u$1.useState((function(){return y$1(e)})),r=t[0],n=t[1];return u$1.useLayoutEffect((function(){return e.on("modelLoaded",(function(){return n(y$1(e))}))}),[e]),r},exports("k",useFiveProject2d$1=react.useFiveProject2d=function(){var e=s$1(),t=u$1.useState((function(){return Symbol()}));t[0];var r=t[1];return u$1.useLayoutEffect((function(){return e.on("cameraUpdate",(function(){return r(Symbol())}))}),[e]),u$1.useCallback((function(t,r){return e.project2d(t,r)}),[e])}),react.useFiveScene=v$1,react.useFiveSceneEffect=d,exports("i",useFiveState=react.useFiveState=function(){var e=s$1(),t=u$1.useState((function(){return p$1(e)})),r=t[0],n=t[1],i=u$1.useCallback((function(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var i="function"==typeof t?t(e.getCurrentState()):t;e.setState(i,r,n)}),[e]);return u$1.useLayoutEffect((function(){return e.on("stateChange",(function(){return n(p$1(e))}))}),[e]),[r,i]}),react.useFiveWork=function(){var e=s$1(),t=c$1(),r=u$1.useState((function(){return e.work})),n=r[0],i=r[1];return u$1.useLayoutEffect((function(){return e.on("load",(function(){return i(e.work)}))}),[e]),[n,t]},react.withFive=function(e){return function(t){return u$1.forwardRef((function(r,n){var i=s$1(),o=c$1(),a=function(e,t){return[S("unsafe__fiveInstance",t)?e:void 0]}(i,e)[0],s=function(e,t){var r=S("state",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e$1.__assign({},e.state)}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("stateChange",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),c=s[0],u=s[1],l=function(e,t){var r=S("currentState",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.getCurrentState()}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("currentStateChange",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),f=l[0],h=l[1],p=function(e,t){var r=S("currentObserver",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.getCurrentState()}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("currentStateChange",(function(){return o(Symbol())}))}),[e]),[a?e.work?e.work.observers[a.panoIndex]:null:void 0,i]}(i,e),d=p[0],m=p[1],g=function(e,t){var r=S("work",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.work}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("load",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),v=g[0],y=g[1],_=function(e,t){var r=S("model",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.model}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("modelLoaded",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),A=_[0],w=_[1],$=function(e,t){return[S("scene",t)?e.scene:void 0]}(i,e)[0],E=function(e,t){var r=S("cameraDirection",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.camera.getWorldDirection(new i$1.Vector3)}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("cameraUpdate",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),T=E[0],O=E[1],N=function(e,t){var r=S("cameraRaycaster",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r){var t=e.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(e.camera.position,t)}}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("cameraUpdate",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),D=N[0],I=N[1],P=function(e,t){var r=S("modelReadyState",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.model.empty?"Empty":"Loaded"}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("modelLoaded",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),j=P[0],C=P[1],L=function(e,t){var r=S("shownFloor",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.model.shownFloor}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("modelShownFloorChange",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),R=L[0],z=L[1],B=function(e,t){var r=S("totalFloorLength",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.model.hasFloors()}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("modelLoaded",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),U=B[0],G=B[1],H=function(e,t){var r=S("helperVisible",t),n=u$1.useState(Symbol()),i=n[0],o=n[1],a=u$1.useMemo((function(){if(r)return e.helperVisible}),[e,i]);return u$1.useLayoutEffect((function(){if(r)return e.on("helpersVisibleChange",(function(){return o(Symbol())}))}),[e]),[a,i]}(i,e),W=H[0],Q=H[1],Y=u$1.useMemo((function(){var t={};return g$1(t,{setState:b(i,e),loadWork:C$1(o,e),on:w$1(i,e),once:E$1(i,e),off:k(i,e),intersectRaycaster:x(i,e),project2d:L$1(i,e),updateCamera:F(i,e),initBasisLoader:_$2(i,e),getPixels:P$1(i,e),render:R$1(i,e),needsRender:V(i,e),preloadPano:M(i,e),showFloor:W$1(i,e),toggleHelperVisible:O$1(i,e)}),t}),[i,o]),q=u$1.useMemo((function(){var e=e$1.__assign({},Y);return g$1(e,{unsafe__fiveInstance:a,state:c,currentState:f,currentObserver:d,work:v,model:A,scene:$,cameraDirection:T,cameraRaycaster:D,modelReadyState:j,shownFloor:R,totalFloorLength:U,helperVisible:W}),e}),[i,Y,u,h,m,y,w,O,I,C,z,G,Q]);return u$1.createElement(t,e$1.__assign({ref:n,$five:q},r))}))}};var Player$1={},App$1={},classnames={exports:{}};
/*!
			  Copyright (c) 2018 Jed Watson.
			  Licensed under the MIT License (MIT), see
			  http://jedwatson.github.io/classnames
			*/
!function(e){!function(){var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var o=_typeof2(i);if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var a=r.apply(null,i);a&&e.push(a)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var s in i)t.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r}()}(classnames);var classNames=exports("c",classnames.exports);function die(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var mockGlobal={};function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:mockGlobal}var assign$1=Object.assign,getDescriptor$1=Object.getOwnPropertyDescriptor,defineProperty$9=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy="undefined"!=typeof Proxy,plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var noop$2=function(){};function isFunction(e){return"function"==typeof e}function isStringish(e){switch(_typeof2(e)){case"string":case"symbol":case"number":return!0}return!1}function isObject$j(e){return null!==e&&"object"===_typeof2(e)}function isPlainObject(e){if(!isObject$j(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r.toString()===plainObjectString}function isGenerator(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function addHiddenProp(e,t,r){defineProperty$9(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function addHiddenFinalProp(e,t,r){defineProperty$9(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function createInstanceofPredicate(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return isObject$j(e)&&!0===e[r]}}function isES6Map(e){return e instanceof Map}function isES6Set(e){return e instanceof Set}var hasGetOwnPropertySymbols=void 0!==Object.getOwnPropertySymbols;function getPlainObjectKeys(e){var t=Object.keys(e);if(!hasGetOwnPropertySymbols)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter((function(t){return objectPrototype.propertyIsEnumerable.call(e,t)}))):t}var ownKeys$2="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function toPrimitive$3(e){return null===e?null:"object"===_typeof2(e)?""+e:e}function hasProp(e,t){return objectPrototype.hasOwnProperty.call(e,t)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(e){var t={};return ownKeys$2(e).forEach((function(r){t[r]=getDescriptor$1(e,r)})),t};function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),r&&_defineProperties$3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _extends$3(){return _extends$3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$3.apply(this,arguments)}function _inheritsLoose$1(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf$5(e,t)}function _setPrototypeOf$5(e,t){return _setPrototypeOf$5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf$5(e,t)}function _assertThisInitialized$5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _unsupportedIterableToArray$7(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$7(e,t):void 0}}function _arrayLikeToArray$7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createForOfIteratorHelperLoose(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=_unsupportedIterableToArray$7(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(e){return Object.assign((function(t,r){storeAnnotation(t,r,e)}),e)}function storeAnnotation(e,t,r){hasProp(e,storedAnnotationsSymbol)||addHiddenProp(e,storedAnnotationsSymbol,_extends$3({},e[storedAnnotationsSymbol])),isOverride(r)||(e[storedAnnotationsSymbol][t]=r)}function collectStoredAnnotations(e){return hasProp(e,storedAnnotationsSymbol)||addHiddenProp(e,storedAnnotationsSymbol,_extends$3({},e[storedAnnotationsSymbol])),e[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return reportObserved(this)},t.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},t.toString=function(){return this.name_},e}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(e,t,r){void 0===t&&(t=noop$2),void 0===r&&(r=noop$2);var n=new Atom(e);return t!==noop$2&&onBecomeObserved(n,t),r!==noop$2&&onBecomeUnobserved(n,r),n}function identityComparer(e,t){return e===t}function structuralComparer(e,t){return deepEqual(e,t)}function shallowComparer(e,t){return deepEqual(e,t,1)}function defaultComparer(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(e,t,r){return isObservable(e)?e:Array.isArray(e)?observable.array(e,{name:r}):isPlainObject(e)?observable.object(e,void 0,{name:r}):isES6Map(e)?observable.map(e,{name:r}):isES6Set(e)?observable.set(e,{name:r}):"function"!=typeof e||isAction(e)||isFlow(e)?e:isGenerator(e)?flow(e):autoAction(r,e)}function shallowEnhancer(e,t,r){return null==e||isObservableObject(e)||isObservableArray(e)||isObservableMap(e)||isObservableSet(e)?e:Array.isArray(e)?observable.array(e,{name:r,deep:!1}):isPlainObject(e)?observable.object(e,void 0,{name:r,deep:!1}):isES6Map(e)?observable.map(e,{name:r,deep:!1}):isES6Set(e)?observable.set(e,{name:r,deep:!1}):void 0}function referenceEnhancer(e){return e}function refStructEnhancer(e,t){return deepEqual(e,t)?t:e}var OVERRIDE="override",override=createDecoratorAnnotation({annotationType_:OVERRIDE,make_:make_,extend_:extend_});function isOverride(e){return e.annotationType_===OVERRIDE}function make_(e,t){return 0}function extend_(e,t,r,n){die("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function createActionAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$1,extend_:extend_$1}}function make_$1(e,t,r,n){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,r,!1)?0:1;if(n===e.target_)return null===this.extend_(e,t,r,!1)?0:2;if(isAction(r.value))return 1;var o=createActionDescriptor(e,this,t,r,!1);return defineProperty$9(n,t,o),2}function extend_$1(e,t,r,n){var i=createActionDescriptor(e,this,t,r);return e.defineProperty_(t,i,n)}function assertActionDescriptor(e,t,r,n){t.annotationType_,n.value}function createActionDescriptor(e,t,r,n,i){var o,a,s,c,u,l,f;void 0===i&&(i=globalState.safeDescriptors),assertActionDescriptor(e,t,r,n);var h,p=n.value;null!=(o=t.options_)&&o.bound&&(p=p.bind(null!=(h=e.proxy_)?h:e.target_));return{value:createAction(null!=(a=null==(s=t.options_)?void 0:s.name)?a:r.toString(),p,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function createFlowAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$2,extend_:extend_$2}}function make_$2(e,t,r,n){var i;if(n===e.target_)return null===this.extend_(e,t,r,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&!isFlow(e.target_[t])&&null===this.extend_(e,t,r,!1))return 0;if(isFlow(r.value))return 1;var o=createFlowDescriptor(e,this,t,r,!1,!1);return defineProperty$9(n,t,o),2}function extend_$2(e,t,r,n){var i,o=createFlowDescriptor(e,this,t,r,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,n)}function assertFlowDescriptor(e,t,r,n){t.annotationType_,n.value}function createFlowDescriptor(e,t,r,n,i,o){void 0===o&&(o=globalState.safeDescriptors),assertFlowDescriptor(e,t,r,n);var a,s=n.value;i&&(s=s.bind(null!=(a=e.proxy_)?a:e.target_));return{value:flow(s),configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function createComputedAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$3,extend_:extend_$3}}function make_$3(e,t,r){return null===this.extend_(e,t,r,!1)?0:1}function extend_$3(e,t,r,n){return assertComputedDescriptor(e,this,t,r),e.defineComputedProperty_(t,_extends$3({},this.options_,{get:r.get,set:r.set}),n)}function assertComputedDescriptor(e,t,r,n){t.annotationType_,n.get}function createObservableAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$4,extend_:extend_$4}}function make_$4(e,t,r){return null===this.extend_(e,t,r,!1)?0:1}function extend_$4(e,t,r,n){var i,o;return assertObservableDescriptor(e,this),e.defineObservableProperty_(t,r.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:deepEnhancer,n)}function assertObservableDescriptor(e,t,r,n){t.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(e){return{annotationType_:AUTO,options_:e,make_:make_$5,extend_:extend_$5}}function make_$5(e,t,r,n){var i,o,a,s;if(r.get)return computed.make_(e,t,r,n);if(r.set){var c=createAction(t.toString(),r.set);return n===e.target_?null===e.defineProperty_(t,{configurable:!globalState.safeDescriptors||e.isPlainObject_,set:c})?0:2:(defineProperty$9(n,t,{configurable:!0,set:c}),2)}if(n!==e.target_&&"function"==typeof r.value)return isGenerator(r.value)?(null!=(s=this.options_)&&s.autoBind?flow.bound:flow).make_(e,t,r,n):(null!=(a=this.options_)&&a.autoBind?autoAction.bound:autoAction).make_(e,t,r,n);var u,l=!1===(null==(i=this.options_)?void 0:i.deep)?observable.ref:observable;"function"==typeof r.value&&null!=(o=this.options_)&&o.autoBind&&(r.value=r.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,r,n)}function extend_$5(e,t,r,n){var i,o,a;if(r.get)return computed.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:!globalState.safeDescriptors||e.isPlainObject_,set:createAction(t.toString(),r.set)},n);"function"==typeof r.value&&null!=(i=this.options_)&&i.autoBind&&(r.value=r.value.bind(null!=(a=e.proxy_)?a:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?observable.ref:observable).extend_(e,t,r,n)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function asCreateObservableOptions(e){return e||defaultCreateObservableOptions}Object.freeze(defaultCreateObservableOptions);var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(e){return!0===e.deep?deepEnhancer:!1===e.deep?referenceEnhancer:getEnhancerFromAnnotation(e.defaultDecorator)}function getAnnotationFromOptions(e){var t;return e?null!=(t=e.defaultDecorator)?t:createAutoAnnotation(e):void 0}function getEnhancerFromAnnotation(e){var t,r;return e&&null!=(t=null==(r=e.options_)?void 0:r.enhancer)?t:deepEnhancer}function createObservable(e,t,r){if(!isStringish(t))return isObservable(e)?e:isPlainObject(e)?observable.object(e,t,r):Array.isArray(e)?observable.array(e,t):isES6Map(e)?observable.map(e,t):isES6Set(e)?observable.set(e,t):"object"===_typeof2(e)&&null!==e?e:observable.box(e,t);storeAnnotation(e,t,observableAnnotation)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function(e,t){var r=asCreateObservableOptions(t);return new ObservableValue(e,getEnhancerFromOptions(r),r.name,!0,r.equals)},array:function(e,t){var r=asCreateObservableOptions(t);return(!1===globalState.useProxies||!1===r.proxy?createLegacyArray:createObservableArray)(e,getEnhancerFromOptions(r),r.name)},map:function(e,t){var r=asCreateObservableOptions(t);return new ObservableMap(e,getEnhancerFromOptions(r),r.name)},set:function(e,t){var r=asCreateObservableOptions(t);return new ObservableSet(e,getEnhancerFromOptions(r),r.name)},object:function(e,t,r){return extendObservable(!1===globalState.useProxies||!1===(null==r?void 0:r.proxy)?asObservableObject({},r):asDynamicObservableObject({},r),e,t)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=exports("o",assign$1(createObservable,observableFactories)),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function(e,t){if(isStringish(t))return storeAnnotation(e,t,computedAnnotation);if(isPlainObject(e))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,e));var r=isPlainObject(t)?t:{};return r.get=e,r.name||(r.name=e.name||""),new ComputedValue(r)},_getDescriptor$config,_getDescriptor;Object.assign(computed,computedAnnotation),computed.struct=createDecoratorAnnotation(computedStructAnnotation);var currentActionId=0,nextActionId=1,isFunctionNameConfigurable=null!=(_getDescriptor$config=null==(_getDescriptor=getDescriptor$1((function(){}),"name"))?void 0:_getDescriptor.configurable)&&_getDescriptor$config,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1},_Symbol$toPrimitive;function createAction(e,t,r,n){function i(){return executeAction(e,r,t,n||this,arguments)}return void 0===r&&(r=!1),i.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=e,Object.defineProperty(i,"name",tmpNameDescriptor)),i}function executeAction(e,t,r,n,i){var o=_startAction(e,t);try{return r.apply(n,i)}catch(a){throw o.error_=a,a}finally{_endAction(o)}}function _startAction(e,t,r,n){var i=globalState.trackingDerivation,o=!t||!i;startBatch();var a=globalState.allowStateChanges;o&&(untrackedStart(),a=allowStateChangesStart(!0));var s={runAsAction_:o,prevDerivation_:i,prevAllowStateChanges_:a,prevAllowStateReads_:allowStateReadsStart(!0),notifySpy_:!1,startTime_:0,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=s.actionId_,s}function _endAction(e){currentActionId!==e.actionId_&&die(30),currentActionId=e.parentActionId_,void 0!==e.error_&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(e.prevAllowStateChanges_),allowStateReadsEnd(e.prevAllowStateReads_),endBatch(),e.runAsAction_&&untrackedEnd(e.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(e,t){var r=allowStateChangesStart(e);try{return t()}finally{allowStateChangesEnd(r)}}function allowStateChangesStart(e){var t=globalState.allowStateChanges;return globalState.allowStateChanges=e,t}function allowStateChangesEnd(e){globalState.allowStateChanges=e}_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(e,t){function r(t,r,n,i,o){var a;return void 0===n&&(n="ObservableValue"),void 0===o&&(o=comparer.default),(a=e.call(this,n)||this).enhancer=void 0,a.name_=void 0,a.equals=void 0,a.hasUnreportedChange_=!1,a.interceptors_=void 0,a.changeListeners_=void 0,a.value_=void 0,a.dehancer=void 0,a.enhancer=r,a.name_=n,a.equals=o,a.value_=r(t,void 0,n),a}_inheritsLoose$1(r,e);var n=r.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==globalState.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(hasInterceptors(this)){var t=interceptChange(this,{object:this,type:UPDATE,newValue:e});if(!t)return globalState.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?globalState.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return registerInterceptor(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return toPrimitive$3(this.get())},n[t]=function(){return this.valueOf()},r}(Atom,_Symbol$toPrimitive),isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(t){function r(e){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||die(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=createAction("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?comparer.structural:comparer.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var n=r.prototype;return n.onBecomeStale_=function(){propagateMaybeChanged(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},n.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),0!==globalState.inBatch||0!==this.observers_.size||this.keepAlive_){if(reportObserved(this),shouldCompute(this)){var e=globalState.trackingContext;this.keepAlive_&&!e&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=e}}else shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());var t=this.value_;if(isCaughtException(t))throw t.cause;return t},n.set=function(e){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},n.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,r=this.computeValue_(!0),n=t||isCaughtException(e)||isCaughtException(r)||!this.equals_(e,r);return n&&(this.value_=r),n},n.computeValue_=function(t){this.isComputing_=!0;var r,n=allowStateChangesStart(!1);if(t)r=trackDerivedFunction(this,this.derivation,this.scope_);else if(!0===globalState.disableErrorBoundaries)r=this.derivation.call(this.scope_);else try{r=this.derivation.call(this.scope_)}catch(e){r=new CaughtException(e)}return allowStateChangesEnd(n),this.isComputing_=!1,r},n.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},n.observe_=function(e,t){var r=this,n=!0,i=void 0;return autorun((function(){var o=r.get();if(!n||t){var a=untrackedStart();e({observableKind:"computed",debugObjectName:r.name_,type:UPDATE,object:r,newValue:o,oldValue:i}),untrackedEnd(a)}n=!1,i=o}))},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return toPrimitive$3(this.get())},n[t]=function(){return this.valueOf()},r}(_Symbol$toPrimitive$1),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_,TraceMode;!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(IDerivationState_||(IDerivationState_={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(TraceMode||(TraceMode={}));var CaughtException=function(e){this.cause=void 0,this.cause=e};function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(t){switch(t.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:for(var r=allowStateReadsStart(!0),n=untrackedStart(),i=t.observing_,o=i.length,a=0;a<o;a++){var s=i[a];if(isComputedValue(s)){if(globalState.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return untrackedEnd(n),allowStateReadsEnd(r),!0}if(t.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(n),allowStateReadsEnd(r),!0}}return changeDependenciesStateTo0(t),untrackedEnd(n),allowStateReadsEnd(r),!1}}function isComputingDerivation(){return null!==globalState.trackingDerivation}function checkIfStateModificationsAreAllowed(e){}function trackDerivedFunction(t,r,n){var i=allowStateReadsStart(!0);changeDependenciesStateTo0(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++globalState.runId;var o,a=globalState.trackingDerivation;if(globalState.trackingDerivation=t,globalState.inBatch++,!0===globalState.disableErrorBoundaries)o=r.call(n);else try{o=r.call(n)}catch(e){o=new CaughtException(e)}return globalState.inBatch--,globalState.trackingDerivation=a,bindDependencies(t),allowStateReadsEnd(i),o}function bindDependencies(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=IDerivationState_.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,a=0;a<o;a++){var s=r[a];0===s.diffValue_&&(s.diffValue_=1,i!==a&&(r[i]=s),i++),s.dependenciesState_>n&&(n=s.dependenciesState_)}for(r.length=i,e.newObserving_=null,o=t.length;o--;){var c=t[o];0===c.diffValue_&&removeObserver(c,e),c.diffValue_=0}for(;i--;){var u=r[i];1===u.diffValue_&&(u.diffValue_=0,addObserver(u,e))}n!==IDerivationState_.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function clearObserving(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)removeObserver(t[r],e);e.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(e){var t=untrackedStart();try{return e()}finally{untrackedEnd(t)}}function untrackedStart(){var e=globalState.trackingDerivation;return globalState.trackingDerivation=null,e}function untrackedEnd(e){globalState.trackingDerivation=e}function allowStateReadsStart(e){var t=globalState.allowStateReads;return globalState.allowStateReads=e,t}function allowStateReadsEnd(e){globalState.allowStateReads=e}function changeDependenciesStateTo0(e){if(e.dependenciesState_!==IDerivationState_.UP_TO_DATE_){e.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var persistentKeys=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],MobXGlobals=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var e=getGlobal();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(canMergeGlobalState=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new MobXGlobals).version&&(canMergeGlobalState=!1),canMergeGlobalState?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new MobXGlobals):(setTimeout((function(){isolateCalled||die(35)}),1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var e=getGlobal();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),globalState=new MobXGlobals}}function getGlobalState(){return globalState}function resetGlobalState(){var e=new MobXGlobals;for(var t in e)-1===persistentKeys.indexOf(t)&&(globalState[t]=e[t]);globalState.allowStateChanges=!globalState.enforceActions}function hasObservers(e){return e.observers_&&e.observers_.size>0}function getObservers(e){return e.observers_}function addObserver(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function removeObserver(e,t){e.observers_.delete(t),0===e.observers_.size&&queueForUnobservation(e)}function queueForUnobservation(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(e))}function startBatch(){globalState.inBatch++}function endBatch(){if(0==--globalState.inBatch){runReactions();for(var e=globalState.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation_=!1,0===r.observers_.size&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof ComputedValue&&r.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(e){var t=globalState.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&globalState.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&globalState.inBatch>0&&queueForUnobservation(e),!1)}function propagateChanged(e){e.lowestObserverState_!==IDerivationState_.STALE_&&(e.lowestObserverState_=IDerivationState_.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===IDerivationState_.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=IDerivationState_.STALE_})))}function propagateChangeConfirmed(e){e.lowestObserverState_!==IDerivationState_.STALE_&&(e.lowestObserverState_=IDerivationState_.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?t.dependenciesState_=IDerivationState_.STALE_:t.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(e.lowestObserverState_=IDerivationState_.UP_TO_DATE_)})))}function propagateMaybeChanged(e){e.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(e.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(e.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,e.onBecomeStale_())})))}var Reaction=function(){function t(e,t,r,n){void 0===e&&(e="Reaction"),void 0===n&&(n=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=r,this.requiresObservable_=n}var r=t.prototype;return r.onBecomeStale_=function(){this.schedule_()},r.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},r.isScheduled=function(){return this.isScheduled_},r.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var t=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}globalState.trackingContext=t,endBatch()}},r.track=function(e){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var t=globalState.trackingContext;globalState.trackingContext=this;var r=trackDerivedFunction(this,e,void 0);globalState.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(r)&&this.reportExceptionInDerivation_(r.cause),endBatch()}},r.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(globalState.disableErrorBoundaries)throw e;var r="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(r,e),globalState.globalReactionErrorHandlers.forEach((function(r){return r(e,t)}))}},r.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},r.getDisposer_=function(){var e=this.dispose.bind(this);return e[$mobx]=this,e},r.toString=function(){return"Reaction["+this.name_+"]"},r.trace=function(e){void 0===e&&(e=!1),trace(this,e)},t}();function onReactionError(e){return globalState.globalReactionErrorHandlers.push(e),function(){var t=globalState.globalReactionErrorHandlers.indexOf(e);t>=0&&globalState.globalReactionErrorHandlers.splice(t,1)}}var MAX_REACTION_ITERATIONS=100,reactionScheduler=function(e){return e()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var e=globalState.pendingReactions,t=0;e.length>0;){++t===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(e){var t=reactionScheduler;reactionScheduler=function(r){return e((function(){return t(r)}))}}function isSpyEnabled(){return!1}function spyReport(e){}function spyReportStart(e){}function spyReportEnd(e){}function spy(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(e){return function(t,r){return isFunction(t)?createAction(t.name||DEFAULT_ACTION_NAME,t,e):isFunction(r)?createAction(t,r,e):isStringish(r)?storeAnnotation(t,r,e?autoActionAnnotation:actionAnnotation):isStringish(t)?createDecoratorAnnotation(createActionAnnotation(e?AUTOACTION:ACTION,{name:t,autoAction:e})):void 0}}var action=exports("a",createActionFactory(!1));Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);function runInAction(e){return executeAction(e.name||DEFAULT_ACTION_NAME,!1,e,this,void 0)}function isAction(e){return isFunction(e)&&!0===e.isMobxAction}function autorun(e,t){var r,n;void 0===t&&(t=EMPTY_OBJECT);var i,o=null!=(r=null==(n=t)?void 0:n.name)?r:"Autorun";if(!t.scheduler&&!t.delay)i=new Reaction(o,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var a=createSchedulerFromOptions(t),s=!1;i=new Reaction(o,(function(){s||(s=!0,a((function(){s=!1,i.isDisposed_||i.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(i)}return i.schedule_(),i.getDisposer_()}Object.assign(autoAction,autoActionAnnotation),action.bound=createDecoratorAnnotation(actionBoundAnnotation),autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);var run$1=function(e){return e()};function createSchedulerFromOptions(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:run$1}function reaction(e,t,r){var n;void 0===r&&(r=EMPTY_OBJECT);var i,o,a=null!=(n=r.name)?n:"Reaction",s=action(a,r.onError?wrapErrorHandler(r.onError,t):t),c=!r.scheduler&&!r.delay,u=createSchedulerFromOptions(r),l=!0,f=!1,h=r.compareStructural?comparer.structural:r.equals||comparer.default,p=new Reaction(a,(function(){l||c?d():f||(f=!0,u(d))}),r.onError,r.requiresObservable);function d(){if(f=!1,!p.isDisposed_){var t=!1;p.track((function(){var r=allowStateChanges(!1,(function(){return e(p)}));t=l||!h(i,r),o=i,i=r})),(l&&r.fireImmediately||!l&&t)&&s(i,o,p),l=!1}}return p.schedule_(),p.getDisposer_()}function wrapErrorHandler(t,r){return function(){try{return r.apply(this,arguments)}catch(e){t.call(this,e)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(e,t,r){return interceptHook(ON_BECOME_OBSERVED,e,t,r)}function onBecomeUnobserved(e,t,r){return interceptHook(ON_BECOME_UNOBSERVED,e,t,r)}function interceptHook(e,t,r,n){var i="function"==typeof n?getAtom(t,r):getAtom(t),o=isFunction(n)?n:r,a=e+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var e=i[a];e&&(e.delete(o),0===e.size&&delete i[a])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(e){!0===e.isolateGlobalState&&isolateGlobalState();var t=e.useProxies,r=e.enforceActions;if(void 0!==t&&(globalState.useProxies=t===ALWAYS||t!==NEVER&&"undefined"!=typeof Proxy),"ifavailable"===t&&(globalState.verifyProxies=!0),void 0!==r){var n=r===ALWAYS?ALWAYS:r===OBSERVED;globalState.enforceActions=n,globalState.allowStateChanges=!0!==n&&n!==ALWAYS}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(globalState[t]=!!e[t])})),globalState.allowStateReads=!globalState.observableRequiresReaction,e.reactionScheduler&&setReactionScheduler(e.reactionScheduler)}function extendObservable(e,t,r,n){var i=getOwnPropertyDescriptors(t),o=asObservableObject(e,n)[$mobx];startBatch();try{ownKeys$2(i).forEach((function(e){o.extend_(e,i[e],!r||(!(e in r)||r[e]))}))}finally{endBatch()}return e}function getDependencyTree(e,t){return nodeToDependencyTree(getAtom(e,t))}function nodeToDependencyTree(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=unique(e.observing_).map(nodeToDependencyTree)),t}function getObserverTree(e,t){return nodeToObserverTree(getAtom(e,t))}function nodeToObserverTree(e){var t={name:e.name_};return hasObservers(e)&&(t.observers=Array.from(getObservers(e)).map(nodeToObserverTree)),t}function unique(e){return Array.from(new Set(e))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}function isFlowCancellationError(e){return e instanceof FlowCancellationError}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign((function(t,r){if(isStringish(r))return storeAnnotation(t,r,flowAnnotation);var n=t,i=n.name||"<unnamed flow>",o=function(){var t,r=this,o=arguments,a=++generatorId,s=action(i+" - runid: "+a+" - init",n).apply(r,o),c=void 0,u=new Promise((function(r,n){var o=0;function u(t){var r;c=void 0;try{r=action(i+" - runid: "+a+" - yield "+o++,s.next).call(s,t)}catch(e){return n(e)}f(r)}function l(t){var r;c=void 0;try{r=action(i+" - runid: "+a+" - yield "+o++,s.throw).call(s,t)}catch(e){return n(e)}f(r)}function f(e){if(!isFunction(null==e?void 0:e.then))return e.done?r(e.value):(c=Promise.resolve(e.value)).then(u,l);e.then(f,n)}t=n,u(void 0)}));return u.cancel=action(i+" - runid: "+a+" - cancel",(function(){try{c&&cancelPromise(c);var r=s.return(void 0),n=Promise.resolve(r.value);n.then(noop$2,noop$2),cancelPromise(n),t(new FlowCancellationError)}catch(e){t(e)}})),u};return o.isMobXFlow=!0,o}),flowAnnotation);function cancelPromise(e){isFunction(e.cancel)&&e.cancel()}function flowResult(e){return e}function isFlow(e){return!0===(null==e?void 0:e.isMobXFlow)}function interceptReads(e,t,r){var n;return isObservableMap(e)||isObservableArray(e)||isObservableValue(e)?n=getAdministration(e):isObservableObject(e)&&(n=getAdministration(e,t)),n.dehancer="function"==typeof t?t:r,function(){n.dehancer=void 0}}function intercept(e,t,r){return isFunction(r)?interceptProperty(e,t,r):interceptInterceptable(e,t)}function interceptInterceptable(e,t){return getAdministration(e).intercept_(t)}function interceptProperty(e,t,r){return getAdministration(e,t).intercept_(r)}function _isComputed(e,t){if(void 0===t)return isComputedValue(e);if(!1===isObservableObject(e))return!1;if(!e[$mobx].values_.has(t))return!1;var r=getAtom(e,t);return isComputedValue(r)}function isComputed(e){return _isComputed(e)}function isComputedProp(e,t){return _isComputed(e,t)}function _isObservable(e,t){return!!e&&(void 0!==t?!!isObservableObject(e)&&e[$mobx].values_.has(t):isObservableObject(e)||!!e[$mobx]||isAtom(e)||isReaction(e)||isComputedValue(e))}function isObservable(e){return _isObservable(e)}function isObservableProp(e,t){return _isObservable(e,t)}function keys$2(e){return isObservableObject(e)?e[$mobx].keys_():isObservableMap(e)||isObservableSet(e)?Array.from(e.keys()):isObservableArray(e)?e.map((function(e,t){return t})):void die(5)}function values$2(e){return isObservableObject(e)?keys$2(e).map((function(t){return e[t]})):isObservableMap(e)?keys$2(e).map((function(t){return e.get(t)})):isObservableSet(e)?Array.from(e.values()):isObservableArray(e)?e.slice():void die(6)}function entries(e){return isObservableObject(e)?keys$2(e).map((function(t){return[t,e[t]]})):isObservableMap(e)?keys$2(e).map((function(t){return[t,e.get(t)]})):isObservableSet(e)?Array.from(e.entries()):isObservableArray(e)?e.map((function(e,t){return[t,e]})):void die(7)}function set$2(e,t,r){if(2!==arguments.length||isObservableSet(e))isObservableObject(e)?e[$mobx].set_(t,r):isObservableMap(e)?e.set(t,r):isObservableSet(e)?e.add(t):isObservableArray(e)?("number"!=typeof t&&(t=parseInt(t,10)),t<0&&die("Invalid index: '"+t+"'"),startBatch(),t>=e.length&&(e.length=t+1),e[t]=r,endBatch()):die(8);else{startBatch();var n=t;try{for(var i in n)set$2(e,i,n[i])}finally{endBatch()}}}function remove$1(e,t){isObservableObject(e)?e[$mobx].delete_(t):isObservableMap(e)||isObservableSet(e)?e.delete(t):isObservableArray(e)?("number"!=typeof t&&(t=parseInt(t,10)),e.splice(t,1)):die(9)}function has$1(e,t){return isObservableObject(e)?e[$mobx].has_(t):isObservableMap(e)||isObservableSet(e)?e.has(t):isObservableArray(e)?t>=0&&t<e.length:void die(10)}function get$1(e,t){if(has$1(e,t))return isObservableObject(e)?e[$mobx].get_(t):isObservableMap(e)?e.get(t):isObservableArray(e)?e[t]:void die(11)}function apiDefineProperty(e,t,r){if(isObservableObject(e))return e[$mobx].defineProperty_(t,r);die(39)}function apiOwnKeys(e){if(isObservableObject(e))return e[$mobx].ownKeys_();die(38)}function observe(e,t,r,n){return isFunction(r)?observeObservableProperty(e,t,r,n):observeObservable(e,t,r)}function observeObservable(e,t,r){return getAdministration(e).observe_(t,r)}function observeObservableProperty(e,t,r,n){return getAdministration(e,t).observe_(r,n)}function cache(e,t,r){return e.set(t,r),r}function toJSHelper(e,t){if(null==e||"object"!==_typeof2(e)||e instanceof Date||!isObservable(e))return e;if(isObservableValue(e)||isComputedValue(e))return toJSHelper(e.get(),t);if(t.has(e))return t.get(e);if(isObservableArray(e)){var r=cache(t,e,new Array(e.length));return e.forEach((function(e,n){r[n]=toJSHelper(e,t)})),r}if(isObservableSet(e)){var n=cache(t,e,new Set);return e.forEach((function(e){n.add(toJSHelper(e,t))})),n}if(isObservableMap(e)){var i=cache(t,e,new Map);return e.forEach((function(e,r){i.set(r,toJSHelper(e,t))})),i}var o=cache(t,e,{});return apiOwnKeys(e).forEach((function(r){objectPrototype.propertyIsEnumerable.call(e,r)&&(o[r]=toJSHelper(e[r],t))})),o}function toJS(e,t){return toJSHelper(e,new Map)}function trace(){die("trace() is not available in production builds");for(var e=!1,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];"boolean"==typeof r[r.length-1]&&(e=r.pop());var i=getAtomFromArgs(r);if(!i)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=e?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(e){switch(e.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(e[0]);case 2:return getAtom(e[0],e[1])}}function transaction(e,t){void 0===t&&(t=void 0),startBatch();try{return e.apply(t)}finally{endBatch()}}function when(e,t,r){return 1===arguments.length||t&&"object"===_typeof2(t)?whenPromise(e,t):_when(e,t,r||{})}function _when(e,t,r){var n;if("number"==typeof r.timeout){var i=new Error("WHEN_TIMEOUT");n=setTimeout((function(){if(!a[$mobx].isDisposed_){if(a(),!r.onError)throw i;r.onError(i)}}),r.timeout)}r.name="When";var o=createAction("When-effect",t),a=autorun((function(t){allowStateChanges(!1,e)&&(t.dispose(),n&&clearTimeout(n),o())}),r);return a}function whenPromise(e,t){var r,n=new Promise((function(n,i){var o=_when(e,n,_extends$3({},t,{onError:i}));r=function(){o(),i(new Error("WHEN_CANCELLED"))}}));return n.cancel=r,n}function getAdm(e){return e[$mobx]}flow.bound=createDecoratorAnnotation(flowBoundAnnotation);var objectProxyTraps={has:function(e,t){return getAdm(e).has_(t)},get:function(e,t){return getAdm(e).get_(t)},set:function(e,t,r){var n;return!!isStringish(t)&&(null==(n=getAdm(e).set_(t,r,!0))||n)},deleteProperty:function(e,t){var r;return!!isStringish(t)&&(null==(r=getAdm(e).delete_(t,!0))||r)},defineProperty:function(e,t,r){var n;return null==(n=getAdm(e).defineProperty_(t,r))||n},ownKeys:function(e){return getAdm(e).ownKeys_()},preventExtensions:function(e){die(13)}};function asDynamicObservableObject(e,t){var r,n;return assertProxies(),null!=(n=(r=(e=asObservableObject(e,t))[$mobx]).proxy_)?n:r.proxy_=new Proxy(e,objectProxyTraps)}function hasInterceptors(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function registerInterceptor(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),once((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function interceptChange(e,t){var r=untrackedStart();try{for(var n=[].concat(e.interceptors_||[]),i=0,o=n.length;i<o&&((t=n[i](t))&&!t.type&&die(14),t);i++);return t}finally{untrackedEnd(r)}}function hasListeners(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function registerListener(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),once((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function notifyListeners(e,t){var r=untrackedStart(),n=e.changeListeners_;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](t);untrackedEnd(r)}}function makeObservable(e,t,r){var n=asObservableObject(e,r)[$mobx];startBatch();try{0,null!=t||(t=collectStoredAnnotations(e)),ownKeys$2(t).forEach((function(e){return n.make_(e,t[e])}))}finally{endBatch()}return e}var keysSymbol=Symbol("mobx-keys");function makeAutoObservable(e,t,r){if(isPlainObject(e))return extendObservable(e,e,t,r);var n=asObservableObject(e,r)[$mobx];if(!e[keysSymbol]){var i=Object.getPrototypeOf(e),o=new Set([].concat(ownKeys$2(e),ownKeys$2(i)));o.delete("constructor"),o.delete($mobx),addHiddenProp(i,keysSymbol,o)}startBatch();try{e[keysSymbol].forEach((function(e){return n.make_(e,!t||(!(e in t)||t[e]))}))}finally{endBatch()}return e}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function(e,t){var r=e[$mobx];return t===$mobx?r:"length"===t?r.getArrayLength_():"string"!=typeof t||isNaN(t)?hasProp(arrayExtensions,t)?arrayExtensions[t]:e[t]:r.get_(parseInt(t))},set:function(e,t,r){var n=e[$mobx];return"length"===t&&n.setArrayLength_(r),"symbol"===_typeof2(t)||isNaN(t)?e[t]=r:n.set_(parseInt(t),r),!0},preventExtensions:function(){die(15)}},ObservableArrayAdministration=function(){function e(e,t,r,n){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=n,this.atom_=new Atom(e),this.enhancer_=function(e,r){return t(e,r,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return registerInterceptor(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&die("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var r=new Array(e-t),n=0;n<e-t;n++)r[n]=void 0;this.spliceWithArray_(t,0,r)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&reserveArrayBuffer(e+t+1)},t.spliceWithArray_=function(e,t,r){var n=this;checkIfStateModificationsAreAllowed(this.atom_);var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===r&&(r=EMPTY_ARRAY),hasInterceptors(this)){var o=interceptChange(this,{object:this.proxy_,type:SPLICE,index:e,removedCount:t,added:r});if(!o)return EMPTY_ARRAY;t=o.removedCount,r=o.added}if(r=0===r.length?r:r.map((function(e){return n.enhancer_(e,void 0)})),this.legacyMode_){var a=r.length-t;this.updateArrayLength_(i,a)}var s=this.spliceItemsIntoValues_(e,t,r);return 0===t&&0===r.length||this.notifyArraySplice_(e,r,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,r){var n;if(r.length<MAX_SPLICE_SIZE)return(n=this.values_).splice.apply(n,[e,t].concat(r));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=r.length-t;for(var a=0;a<r.length;a++)this.values_[e+a]=r[a];for(var s=0;s<o.length;s++)this.values_[e+r.length+s]=o[s];return i},t.notifyArrayChildUpdate_=function(e,t,r){var n=!this.owned_&&isSpyEnabled(),i=hasListeners(this),o=i||n?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:r}:null;this.atom_.reportChanged(),i&&notifyListeners(this,o)},t.notifyArraySplice_=function(e,t,r){var n=!this.owned_&&isSpyEnabled(),i=hasListeners(this),o=i||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&notifyListeners(this,o)},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var r=this.values_;if(e<r.length){checkIfStateModificationsAreAllowed(this.atom_);var n=r[e];if(hasInterceptors(this)){var i=interceptChange(this,{type:UPDATE,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,n))!==n&&(r[e]=t,this.notifyArrayChildUpdate_(e,t,n))}else e===r.length?this.spliceWithArray_(e,0,[t]):die(17,e,r.length)},e}();function createObservableArray(e,t,r,n){void 0===r&&(r="ObservableArray"),void 0===n&&(n=!1),assertProxies();var i=new ObservableArrayAdministration(r,t,n,!1);addHiddenFinalProp(i.values_,$mobx,i);var o=new Proxy(i.values_,arrayTraps);if(i.proxy_=o,e&&e.length){var a=allowStateChangesStart(!0);i.spliceWithArray_(0,0,e),allowStateChangesEnd(a)}return o}var arrayExtensions={clear:function(){return this.splice(0)},replace:function(e){var t=this[$mobx];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o=this[$mobx];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,n)},spliceWithArray:function(e,t,r){return this[$mobx].spliceWithArray_(e,t,r)},push:function(){for(var e=this[$mobx],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.spliceWithArray_(e.values_.length,0,r),e.values_.length},pop:function(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[$mobx],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.spliceWithArray_(0,0,r),e.values_.length},reverse:function(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){globalState.trackingDerivation&&die(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[$mobx],r=t.dehanceValues_(t.values_).indexOf(e);return r>-1&&(this.splice(r,1),!0)}};function addArrayExtension(e,t){"function"==typeof Array.prototype[e]&&(arrayExtensions[e]=t(e))}function simpleFunc(e){return function(){var t=this[$mobx];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function mapLikeFunc(e){return function(t,r){var n=this,i=this[$mobx];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(r,e,i,n)}))}}function reduceLikeFunc(e){return function(){var t=this,r=this[$mobx];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(e,r,n){return i(e,r,n,t)},n[e].apply(n,arguments)}}addArrayExtension("concat",simpleFunc),addArrayExtension("flat",simpleFunc),addArrayExtension("includes",simpleFunc),addArrayExtension("indexOf",simpleFunc),addArrayExtension("join",simpleFunc),addArrayExtension("lastIndexOf",simpleFunc),addArrayExtension("slice",simpleFunc),addArrayExtension("toString",simpleFunc),addArrayExtension("toLocaleString",simpleFunc),addArrayExtension("every",mapLikeFunc),addArrayExtension("filter",mapLikeFunc),addArrayExtension("find",mapLikeFunc),addArrayExtension("findIndex",mapLikeFunc),addArrayExtension("flatMap",mapLikeFunc),addArrayExtension("forEach",mapLikeFunc),addArrayExtension("map",mapLikeFunc),addArrayExtension("some",mapLikeFunc),addArrayExtension("reduce",reduceLikeFunc),addArrayExtension("reduceRight",reduceLikeFunc);var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration),_Symbol$iterator,_Symbol$toStringTag;function isObservableArray(e){return isObject$j(e)&&isObservableArrayAdministration(e[$mobx])}var ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator,_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(e,t){function r(e,t,r){void 0===t&&(t=deepEnhancer),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=r,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,this.merge(e)}var n=r.prototype;return n.has_=function(e){return this.data_.has(e)},n.has=function(e){var t=this;if(!globalState.trackingDerivation)return this.has_(e);var r=this.hasMap_.get(e);if(!r){var n=r=new ObservableValue(this.has_(e),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(e,n),onBecomeUnobserved(n,(function(){return t.hasMap_.delete(e)}))}return r.get()},n.set=function(e,t){var r=this.has_(e);if(hasInterceptors(this)){var n=interceptChange(this,{type:r?UPDATE:ADD,object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return r?this.updateValue_(e,t):this.addValue_(e,t),this},n.delete=function(e){var t=this;if((checkIfStateModificationsAreAllowed(this.keysAtom_),hasInterceptors(this))&&!interceptChange(this,{type:DELETE,object:this,name:e}))return!1;if(this.has_(e)){var r=isSpyEnabled(),n=hasListeners(this),i=n||r?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return transaction((function(){var r;t.keysAtom_.reportChanged(),null==(r=t.hasMap_.get(e))||r.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&notifyListeners(this,i),!0}return!1},n.updateValue_=function(e,t){var r=this.data_.get(e);if((t=r.prepareNewValue_(t))!==globalState.UNCHANGED){var n=isSpyEnabled(),i=hasListeners(this),o=i||n?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:r.value_,name:e,newValue:t}:null;r.setNewValue_(t),i&&notifyListeners(this,o)}},n.addValue_=function(e,t){var r=this;checkIfStateModificationsAreAllowed(this.keysAtom_),transaction((function(){var n,i=new ObservableValue(t,r.enhancer_,"ObservableMap.key",!1);r.data_.set(e,i),t=i.value_,null==(n=r.hasMap_.get(e))||n.setNewValue_(!0),r.keysAtom_.reportChanged()}));var n=isSpyEnabled(),i=hasListeners(this),o=i||n?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:e,newValue:t}:null;i&&notifyListeners(this,o)},n.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},n.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},n.values=function(){var e=this,t=this.keys();return makeIterable({next:function(){var r=t.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:e.get(i)}}})},n.entries=function(){var e=this,t=this.keys();return makeIterable({next:function(){var r=t.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:[i,e.get(i)]}}})},n[e]=function(){return this.entries()},n.forEach=function(e,t){for(var r,n=_createForOfIteratorHelperLoose(this);!(r=n()).done;){var i=r.value,o=i[0],a=i[1];e.call(t,a,o,this)}},n.merge=function(e){var t=this;return isObservableMap(e)&&(e=new Map(e)),transaction((function(){isPlainObject(e)?getPlainObjectKeys(e).forEach((function(r){return t.set(r,e[r])})):Array.isArray(e)?e.forEach((function(e){var r=e[0],n=e[1];return t.set(r,n)})):isES6Map(e)?(e.constructor!==Map&&die(19,e),e.forEach((function(e,r){return t.set(r,e)}))):null!=e&&die(20,e)})),this},n.clear=function(){var e=this;transaction((function(){untracked((function(){for(var t,r=_createForOfIteratorHelperLoose(e.keys());!(t=r()).done;){var n=t.value;e.delete(n)}}))}))},n.replace=function(e){var t=this;return transaction((function(){for(var r,n=convertToMap(e),i=new Map,o=!1,a=_createForOfIteratorHelperLoose(t.data_.keys());!(r=a()).done;){var s=r.value;if(!n.has(s))if(t.delete(s))o=!0;else{var c=t.data_.get(s);i.set(s,c)}}for(var u,l=_createForOfIteratorHelperLoose(n.entries());!(u=l()).done;){var f=u.value,h=f[0],p=f[1],d=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var m=t.data_.get(h);i.set(h,m),d||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),v=i.keys(),y=g.next(),b=v.next();!y.done;){if(y.value!==b.value){t.keysAtom_.reportChanged();break}y=g.next(),b=v.next()}t.data_=i})),this},n.toString=function(){return"[object ObservableMap]"},n.toJSON=function(){return Array.from(this)},n.observe_=function(e,t){return registerListener(this,e)},n.intercept_=function(e){return registerInterceptor(this,e)},_createClass$3(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Map"}}]),r}(_Symbol$iterator,_Symbol$toStringTag),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap),_Symbol$iterator$1,_Symbol$toStringTag$1;function convertToMap(e){if(isES6Map(e)||isObservableMap(e))return e;if(Array.isArray(e))return new Map(e);if(isPlainObject(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}return die(21,e)}var ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator,_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(e,t){function r(e,t,r){void 0===t&&(t=deepEnhancer),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(e,n){return t(e,n,r)},e&&this.replace(e)}var n=r.prototype;return n.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.clear=function(){var e=this;transaction((function(){untracked((function(){for(var t,r=_createForOfIteratorHelperLoose(e.data_.values());!(t=r()).done;){var n=t.value;e.delete(n)}}))}))},n.forEach=function(e,t){for(var r,n=_createForOfIteratorHelperLoose(this);!(r=n()).done;){var i=r.value;e.call(t,i,i,this)}},n.add=function(e){var t=this;if((checkIfStateModificationsAreAllowed(this.atom_),hasInterceptors(this))&&!interceptChange(this,{type:ADD,object:this,newValue:e}))return this;if(!this.has(e)){transaction((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var r=hasListeners(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:e}:null;r&&notifyListeners(this,n)}return this},n.delete=function(e){var t=this;if(hasInterceptors(this)&&!interceptChange(this,{type:DELETE,object:this,oldValue:e}))return!1;if(this.has(e)){var r=hasListeners(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:e}:null;return transaction((function(){t.atom_.reportChanged(),t.data_.delete(e)})),r&&notifyListeners(this,n),!0}return!1},n.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},n.entries=function(){var e=0,t=Array.from(this.keys()),r=Array.from(this.values());return makeIterable({next:function(){var n=e;return e+=1,n<r.length?{value:[t[n],r[n]],done:!1}:{done:!0}}})},n.keys=function(){return this.values()},n.values=function(){this.atom_.reportObserved();var e=this,t=0,r=Array.from(this.data_.values());return makeIterable({next:function(){return t<r.length?{value:e.dehanceValue_(r[t++]),done:!1}:{done:!0}}})},n.replace=function(e){var t=this;return isObservableSet(e)&&(e=new Set(e)),transaction((function(){Array.isArray(e)||isES6Set(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&die("Cannot initialize set from "+e)})),this},n.observe_=function(e,t){return registerListener(this,e)},n.intercept_=function(e){return registerInterceptor(this,e)},n.toJSON=function(){return Array.from(this)},n.toString=function(){return"[object ObservableSet]"},n[e]=function(){return this.values()},_createClass$3(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Set"}}]),r}(_Symbol$iterator$1,_Symbol$toStringTag$1),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function e(e,t,r,n){void 0===t&&(t=new Map),void 0===n&&(n=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=r,this.defaultAnnotation_=n,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var r=this.values_.get(e);if(r instanceof ComputedValue)return r.set(t),!0;if(hasInterceptors(this)){var n=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:e,newValue:t});if(!n)return null;t=n.newValue}if((t=r.prepareNewValue_(t))!==globalState.UNCHANGED){var i=hasListeners(this),o=i?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:r.value_,name:e,newValue:t}:null;r.setNewValue_(t),i&&notifyListeners(this,o)}return!0},t.get_=function(e){return globalState.trackingDerivation&&!hasProp(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,r){return void 0===r&&(r=!1),hasProp(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):r?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,r)},t.has_=function(e){if(!globalState.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new ObservableValue(e in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var r;if(null!=(r=this.target_[storedAnnotationsSymbol])&&r[e])return;die(1,t.annotationType_,this.name_+"."+e.toString())}for(var n=this.target_;n&&n!==objectPrototype;){var i=getDescriptor$1(n,e);if(i){var o=t.make_(this,e,i,n);if(0===o)return;if(1===o)break}n=Object.getPrototypeOf(n)}recordAnnotationApplied(this,t,e)}},t.extend_=function(e,t,r,n){if(void 0===n&&(n=!1),!0===r&&(r=this.defaultAnnotation_),!1===r)return this.defineProperty_(e,t,n);var i=r.extend_(this,e,t,n);return i&&recordAnnotationApplied(this,r,e),i},t.defineProperty_=function(e,t,r){void 0===r&&(r=!1);try{startBatch();var n=this.delete_(e);if(!n)return n;if(hasInterceptors(this)){var i=interceptChange(this,{object:this.proxy_||this.target_,name:e,type:ADD,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=_extends$3({},t,{value:o}))}if(r){if(!Reflect.defineProperty(this.target_,e,t))return!1}else defineProperty$9(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{endBatch()}return!0},t.defineObservableProperty_=function(e,t,r,n){void 0===n&&(n=!1);try{startBatch();var i=this.delete_(e);if(!i)return i;if(hasInterceptors(this)){var o=interceptChange(this,{object:this.proxy_||this.target_,name:e,type:ADD,newValue:t});if(!o)return null;t=o.newValue}var a=getCachedObservablePropDescriptor(e),s={configurable:!globalState.safeDescriptors||this.isPlainObject_,enumerable:!0,get:a.get,set:a.set};if(n){if(!Reflect.defineProperty(this.target_,e,s))return!1}else defineProperty$9(this.target_,e,s);var c=new ObservableValue(t,r,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{endBatch()}return!0},t.defineComputedProperty_=function(e,t,r){void 0===r&&(r=!1);try{startBatch();var n=this.delete_(e);if(!n)return n;if(hasInterceptors(this))if(!interceptChange(this,{object:this.proxy_||this.target_,name:e,type:ADD,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=getCachedObservablePropDescriptor(e),o={configurable:!globalState.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(r){if(!Reflect.defineProperty(this.target_,e,o))return!1}else defineProperty$9(this.target_,e,o);this.values_.set(e,new ComputedValue(t)),this.notifyPropertyAddition_(e,void 0)}finally{endBatch()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!hasProp(this.target_,e))return!0;if(hasInterceptors(this)&&!interceptChange(this,{object:this.proxy_||this.target_,name:e,type:REMOVE}))return null;try{var r,n;startBatch();var i,o=hasListeners(this),a=this.values_.get(e),s=void 0;if(!a&&o)s=null==(i=getDescriptor$1(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(a&&(this.values_.delete(e),a instanceof ObservableValue&&(s=a.value_),propagateChanged(a)),this.keysAtom_.reportChanged(),null==(r=this.pendingKeys_)||null==(n=r.get(e))||n.set(e in this.target_),o){var c={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,o&&notifyListeners(this,c)}}finally{endBatch()}return!0},t.observe_=function(e,t){return registerListener(this,e)},t.intercept_=function(e){return registerInterceptor(this,e)},t.notifyPropertyAddition_=function(e,t){var r,n,i=hasListeners(this);if(i){var o=i?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&notifyListeners(this,o)}null==(r=this.pendingKeys_)||null==(n=r.get(e))||n.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys$2(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function asObservableObject(e,t){var r;if(hasProp(e,$mobx))return e;var n=null!=(r=null==t?void 0:t.name)?r:"ObservableObject",i=new ObservableObjectAdministration(e,new Map,String(n),getAnnotationFromOptions(t));return addHiddenProp(e,$mobx,i),e}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(e){return descriptorCache[e]||(descriptorCache[e]={get:function(){return this[$mobx].getObservablePropValue_(e)},set:function(t){return this[$mobx].setObservablePropValue_(e,t)}})}function isObservableObject(e){return!!isObject$j(e)&&isObservableObjectAdministration(e[$mobx])}function recordAnnotationApplied(e,t,r){var n;null==(n=e.target_[storedAnnotationsSymbol])||delete n[r]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function(){};function inherit(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(e,t,r){function n(t,r,n,i){var o;void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this;var a=new ObservableArrayAdministration(n,r,i,!0);if(a.proxy_=_assertThisInitialized$5(o),addHiddenFinalProp(_assertThisInitialized$5(o),$mobx,a),t&&t.length){var s=allowStateChangesStart(!0);o.spliceWithArray(0,0,t),allowStateChangesEnd(s)}return o}_inheritsLoose$1(n,e);var i=n.prototype;return i.concat=function(){this[$mobx].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return isObservableArray(e)?e.slice():e})))},i[r]=function(){var e=this,t=0;return makeIterable({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},_createClass$3(n,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(e){this[$mobx].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),n}(StubArray,Symbol.toStringTag,Symbol.iterator);function createArrayEntryDescriptor(e){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(e)},set:function(t){this[$mobx].set_(e,t)}}}function createArrayBufferItem(e){defineProperty$9(LegacyObservableArray.prototype,""+e,createArrayEntryDescriptor(e))}function reserveArrayBuffer(e){if(e>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var t=OBSERVABLE_ARRAY_BUFFER_SIZE;t<e+100;t++)createArrayBufferItem(t);OBSERVABLE_ARRAY_BUFFER_SIZE=e}}function createLegacyArray(e,t,r){return new LegacyObservableArray(e,t,r)}function getAtom(e,t){if("object"===_typeof2(e)&&null!==e){if(isObservableArray(e))return void 0!==t&&die(23),e[$mobx].atom_;if(isObservableSet(e))return e[$mobx];if(isObservableMap(e)){if(void 0===t)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||die(25,t,getDebugName(e)),r}if(isObservableObject(e)){if(!t)return die(26);var n=e[$mobx].values_.get(t);return n||die(27,t,getDebugName(e)),n}if(isAtom(e)||isComputedValue(e)||isReaction(e))return e}else if(isFunction(e)&&isReaction(e[$mobx]))return e[$mobx];die(28)}function getAdministration(e,t){return e||die(29),void 0!==t?getAdministration(getAtom(e,t)):isAtom(e)||isComputedValue(e)||isReaction(e)||isObservableMap(e)||isObservableSet(e)?e:e[$mobx]?e[$mobx]:void die(24,e)}function getDebugName(e,t){var r;if(void 0!==t)r=getAtom(e,t);else{if(isAction(e))return e.name;r=isObservableObject(e)||isObservableMap(e)||isObservableSet(e)?getAdministration(e):getAtom(e)}return r.name_}Object.entries(arrayExtensions).forEach((function(e){var t=e[0],r=e[1];"concat"!==t&&addHiddenProp(LegacyObservableArray.prototype,t,r)})),reserveArrayBuffer(1e3);var toString$c=objectPrototype.toString;function deepEqual(e,t,r){return void 0===r&&(r=-1),eq(e,t,r)}function eq(e,t,r,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=_typeof2(e);if("function"!==o&&"object"!==o&&"object"!=_typeof2(t))return!1;var a=toString$c.call(e);if(a!==toString$c.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++}e=unwrap(e),t=unwrap(t);var s="[object Array]"===a;if(!s){if("object"!=_typeof2(e)||"object"!=_typeof2(t))return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(isFunction(c)&&c instanceof c&&isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!eq(e[l],t[l],r-1,n,i))return!1}else{var f,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!hasProp(t,f=h[l])||!eq(e[f],t[f],r-1,n,i))return!1}return n.pop(),i.pop(),!0}function unwrap(e){return isObservableArray(e)?e.slice():isES6Map(e)||isObservableMap(e)||isES6Set(e)||isObservableSet(e)?Array.from(e.entries()):e}function makeIterable(e){return e[Symbol.iterator]=getSelf,e}function getSelf(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===getGlobal()[e]&&die("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":_typeof2(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:spy,extras:{getDebugName:getDebugName},$mobx:$mobx});var mobx_esm=Object.freeze((_Object$freeze2={__proto__:null},_defineProperty3(_Object$freeze2,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze2,"$mobx",$mobx),_defineProperty3(_Object$freeze2,"FlowCancellationError",FlowCancellationError),_defineProperty3(_Object$freeze2,"ObservableMap",ObservableMap),_defineProperty3(_Object$freeze2,"ObservableSet",ObservableSet),_defineProperty3(_Object$freeze2,"Reaction",Reaction),_defineProperty3(_Object$freeze2,"_allowStateChanges",allowStateChanges),_defineProperty3(_Object$freeze2,"_allowStateChangesInsideComputed",runInAction),_defineProperty3(_Object$freeze2,"_allowStateReadsEnd",allowStateReadsEnd),_defineProperty3(_Object$freeze2,"_allowStateReadsStart",allowStateReadsStart),_defineProperty3(_Object$freeze2,"_autoAction",autoAction),_defineProperty3(_Object$freeze2,"_endAction",_endAction),_defineProperty3(_Object$freeze2,"_getAdministration",getAdministration),_defineProperty3(_Object$freeze2,"_getGlobalState",getGlobalState),_defineProperty3(_Object$freeze2,"_interceptReads",interceptReads),_defineProperty3(_Object$freeze2,"_isComputingDerivation",isComputingDerivation),_defineProperty3(_Object$freeze2,"_resetGlobalState",resetGlobalState),_defineProperty3(_Object$freeze2,"_startAction",_startAction),_defineProperty3(_Object$freeze2,"action",action),_defineProperty3(_Object$freeze2,"autorun",autorun),_defineProperty3(_Object$freeze2,"comparer",comparer),_defineProperty3(_Object$freeze2,"computed",computed),_defineProperty3(_Object$freeze2,"configure",configure),_defineProperty3(_Object$freeze2,"createAtom",createAtom),_defineProperty3(_Object$freeze2,"defineProperty",apiDefineProperty),_defineProperty3(_Object$freeze2,"entries",entries),_defineProperty3(_Object$freeze2,"extendObservable",extendObservable),_defineProperty3(_Object$freeze2,"flow",flow),_defineProperty3(_Object$freeze2,"flowResult",flowResult),_defineProperty3(_Object$freeze2,"get",get$1),_defineProperty3(_Object$freeze2,"getAtom",getAtom),_defineProperty3(_Object$freeze2,"getDebugName",getDebugName),_defineProperty3(_Object$freeze2,"getDependencyTree",getDependencyTree),_defineProperty3(_Object$freeze2,"getObserverTree",getObserverTree),_defineProperty3(_Object$freeze2,"has",has$1),_defineProperty3(_Object$freeze2,"intercept",intercept),_defineProperty3(_Object$freeze2,"isAction",isAction),_defineProperty3(_Object$freeze2,"isBoxedObservable",isObservableValue),_defineProperty3(_Object$freeze2,"isComputed",isComputed),_defineProperty3(_Object$freeze2,"isComputedProp",isComputedProp),_defineProperty3(_Object$freeze2,"isFlow",isFlow),_defineProperty3(_Object$freeze2,"isFlowCancellationError",isFlowCancellationError),_defineProperty3(_Object$freeze2,"isObservable",isObservable),_defineProperty3(_Object$freeze2,"isObservableArray",isObservableArray),_defineProperty3(_Object$freeze2,"isObservableMap",isObservableMap),_defineProperty3(_Object$freeze2,"isObservableObject",isObservableObject),_defineProperty3(_Object$freeze2,"isObservableProp",isObservableProp),_defineProperty3(_Object$freeze2,"isObservableSet",isObservableSet),_defineProperty3(_Object$freeze2,"keys",keys$2),_defineProperty3(_Object$freeze2,"makeAutoObservable",makeAutoObservable),_defineProperty3(_Object$freeze2,"makeObservable",makeObservable),_defineProperty3(_Object$freeze2,"observable",observable),_defineProperty3(_Object$freeze2,"observe",observe),_defineProperty3(_Object$freeze2,"onBecomeObserved",onBecomeObserved),_defineProperty3(_Object$freeze2,"onBecomeUnobserved",onBecomeUnobserved),_defineProperty3(_Object$freeze2,"onReactionError",onReactionError),_defineProperty3(_Object$freeze2,"override",override),_defineProperty3(_Object$freeze2,"ownKeys",apiOwnKeys),_defineProperty3(_Object$freeze2,"reaction",reaction),_defineProperty3(_Object$freeze2,"remove",remove$1),_defineProperty3(_Object$freeze2,"runInAction",runInAction),_defineProperty3(_Object$freeze2,"set",set$2),_defineProperty3(_Object$freeze2,"spy",spy),_defineProperty3(_Object$freeze2,"toJS",toJS),_defineProperty3(_Object$freeze2,"trace",trace),_defineProperty3(_Object$freeze2,"transaction",transaction),_defineProperty3(_Object$freeze2,"untracked",untracked),_defineProperty3(_Object$freeze2,"values",values$2),_defineProperty3(_Object$freeze2,"when",when),_Object$freeze2));if(!react$2.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(e){e()}function observerBatching(e){e||(e=defaultNoopBatch),configure({reactionScheduler:e})}function printDebugValue(e){return getDependencyTree(e)}var FinalizationRegistryLocal="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function createTrackingData(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS}}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(e){var t=new Map,r=1,n=new e((function(e){var r=t.get(e);r&&(r.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,i,o){var a=r++;return n.register(o,a,e),e.current=createTrackingData(i),e.current.finalizationRegistryCleanupToken=a,t.set(a,e.current),e.current},recordReactionAsCommitted:function(e){n.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var e,t=new Set;function r(){void 0===e&&(e=setTimeout(n,CLEANUP_TIMER_LOOP_MILLIS))}function n(){e=void 0;var n=Date.now();t.forEach((function(e){var r=e.current;r&&n>=r.cleanAt&&(r.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&r()}return{addReactionToTrack:function(e,n,i){var o;return e.current=createTrackingData(n),o=e,t.add(o),r(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),n())},resetCleanupScheduleForTests:function(){var r,n;if(t.size>0){try{for(var i=__values(t),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.current;s&&(s.reaction.dispose(),a.current=null)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,globalIsUsingStaticRendering=!1;function enableStaticRendering(e){globalIsUsingStaticRendering=e}function isUsingStaticRendering(){return globalIsUsingStaticRendering}var __read$1=globalThis&&globalThis.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};function observerComponentNameFor(e){return"observer".concat(e)}var ObjectToBeRetainedByReact=function(){};function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver$1(t,r){if(void 0===r&&(r="observed"),isUsingStaticRendering())return t();var n=__read$1(React$g.useState(objectToBeRetainedByReactFactory),1)[0],i=__read$1(React$g.useState(),2)[1],o=function(){return i([])},a=React$g.useRef(null);if(!a.current)var s=new Reaction(observerComponentNameFor(r),(function(){c.mounted?o():c.changedBeforeMount=!0})),c=addReactionToTrack(a,s,n);var u,l,f=a.current.reaction;if(React$g.useDebugValue(f,printDebugValue),React$g.useEffect((function(){return recordReactionAsCommitted(a),a.current?(a.current.mounted=!0,a.current.changedBeforeMount&&(a.current.changedBeforeMount=!1,o())):(a.current={reaction:new Reaction(observerComponentNameFor(r),(function(){o()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){a.current.reaction.dispose(),a.current=null}}),[]),f.track((function(){try{u=t()}catch(e){l=e}})),l)throw l;return u}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};function observer$1(e,t){if(isUsingStaticRendering())return e;var r,n=__assign({forwardRef:!1},t),i=e.displayName||e.name,o=function(t,r){return useObserver$1((function(){return e(t,r)}),i)};return""!==i&&(o.displayName=i),e.contextTypes&&(o.contextTypes=e.contextTypes),r=n.forwardRef?react$2.exports.memo(react$2.exports.forwardRef(o)):react$2.exports.memo(o),copyStaticProperties$1(e,r),r}var hoistBlackList$1={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties$1(e,t){Object.keys(e).forEach((function(r){hoistBlackList$1[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}function ObserverComponent(e){var t=e.children,r=e.render,n=t||r;return"function"!=typeof n?null:useObserver$1(n)}function useLocalObservable(e,t){return react$2.exports.useState((function(){return observable(e(),t,{autoBind:!0})}))[0]}ObserverComponent.displayName="Observer";var __read=globalThis&&globalThis.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};function useAsObservableSource(e){var t=__read(react$2.exports.useState((function(){return observable(e,{},{deep:!1})})),1)[0];return runInAction((function(){Object.assign(t,e)})),t}function useLocalStore(e,t){var r=t&&useAsObservableSource(t);return react$2.exports.useState((function(){return observable(e(r),void 0,{autoBind:!0})}))[0]}function useObserver(e,t){return void 0===t&&(t="observed"),useObserver$1(e,t)}function useStaticRendering(e){enableStaticRendering(e)}observerBatching(reactDom.exports.unstable_batchedUpdates);var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},f=react$2.exports,g=60103;if(reactJsxRuntime_production_min.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,i={},o=null,a=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)n$1.call(t,n)&&!p.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:g,type:e,key:o,ref:a,props:i,_owner:m.current}}reactJsxRuntime_production_min.jsx=q,reactJsxRuntime_production_min.jsxs=q,jsxRuntime.exports=reactJsxRuntime_production_min;var jsx=exports("j",jsxRuntime.exports.jsx),jsxs=exports("b",jsxRuntime.exports.jsxs),Fragment=exports("h",jsxRuntime.exports.Fragment),symbolId=0;function createSymbol(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react "+e+" ("+symbolId+")";return symbolId++,t}var createdSymbols={};function newSymbol(e){return createdSymbols[e]||(createdSymbols[e]=createSymbol(e)),createdSymbols[e]}function shallowEqual(e,t){if(is(e,t))return!0;if("object"!==_typeof2(e)||null===e||"object"!==_typeof2(t)||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!Object.hasOwnProperty.call(t,r[i])||!is(e[r[i]],t[r[i]]))return!1;return!0}function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var hoistBlackList={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,displayName:1,propTypes:1};function copyStaticProperties(e,t){var r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach((function(n){hoistBlackList[n]||-1!==r.indexOf(n)||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}function setHiddenProp(e,t,r){Object.hasOwnProperty.call(e,t)?e[t]=r:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:r})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(e,t){var r=e[mobxMixins]=e[mobxMixins]||{},n=r[t]=r[t]||{};return n.locks=n.locks||0,n.methods=n.methods||[],n}function wrapper$1(e,t){for(var r=this,n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];t.locks++;try{var a;return null!=e&&(a=e.apply(this,i)),a}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(r,i)}))}}function wrapFunction(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];wrapper$1.call.apply(wrapper$1,[this,e,t].concat(n))}}function patch(e,t,r){var n=getMixins(e,t);n.methods.indexOf(r)<0&&n.methods.push(r);var i=Object.getOwnPropertyDescriptor(e,t);if(!i||!i[mobxPatchedDefinition]){var o=e[t],a=createDefinition(e,t,i?i.enumerable:void 0,n,o);Object.defineProperty(e,t,a)}}function createDefinition(e,t,r,n,i){var o,a=wrapFunction(i,n);return(o={})[mobxPatchedDefinition]=!0,o.get=function(){return a},o.set=function(i){if(this===e)a=wrapFunction(i,n);else{var o=createDefinition(this,t,r,n,i);Object.defineProperty(this,t,o)}},o.configurable=!0,o.enumerable=r,o}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(e){var t=e.prototype;if(e[mobxObserverProperty]){var r=getDisplayName(t);console.warn("The provided component class ("+r+") \n                has already been declared as an observer component.")}else e[mobxObserverProperty]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==react$2.exports.PureComponent)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=observerSCU;makeObservableProp(t,"props"),makeObservableProp(t,"state");var n=t.render;if("function"!=typeof n){var i=getDisplayName(t);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return t.render=function(){return makeComponentReactive.call(this,n)},patch(t,"componentWillUnmount",(function(){var e;if(!0!==isUsingStaticRendering()&&(null==(e=this.render[mobxAdminProperty])||e.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty])){var t=getDisplayName(this);console.warn("The reactive render of an observer class component ("+t+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),e}function getDisplayName(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function makeComponentReactive(t){var r=this;if(!0===isUsingStaticRendering())return t.call(this);setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var n=getDisplayName(this),i=t.bind(this),o=!1,a=new Reaction(n+".render()",(function(){if(!o&&(o=!0,!0!==r[mobxIsUnmounted])){var e=!0;try{setHiddenProp(r,isForcingUpdateKey,!0),r[skipRenderKey]||react$2.exports.Component.prototype.forceUpdate.call(r),e=!1}finally{setHiddenProp(r,isForcingUpdateKey,!1),e&&a.dispose()}}}));function s(){o=!1;var t=void 0,r=void 0;if(a.track((function(){try{r=allowStateChanges(!1,i)}catch(e){t=e}})),t)throw t;return r}return a.reactComponent=this,s[mobxAdminProperty]=a,this.render=s,s.call(this)}function observerSCU(e,t){return isUsingStaticRendering()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!shallowEqual(this.props,e)}function makeObservableProp(e,t){var r=newSymbol("reactProp_"+t+"_valueHolder"),n=newSymbol("reactProp_"+t+"_atomHolder");function i(){return this[n]||setHiddenProp(this,n,createAtom("reactive "+t)),this[n]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=!1;return allowStateReadsStart&&allowStateReadsEnd&&(e=allowStateReadsStart(!0)),i.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(e),this[r]},set:function(e){this[isForcingUpdateKey]||shallowEqual(this[r],e)?setHiddenProp(this,r,e):(setHiddenProp(this,r,e),setHiddenProp(this,skipRenderKey,!0),i.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1))}})}var hasSymbol="function"==typeof Symbol&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):"function"==typeof react$2.exports.forwardRef&&react$2.exports.forwardRef((function(e){return null})).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):"function"==typeof react$2.exports.memo&&react$2.exports.memo((function(e){return null})).$$typeof;function observer(e){if(!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),ReactMemoSymbol&&e.$$typeof===ReactMemoSymbol)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(ReactForwardRefSymbol&&e.$$typeof===ReactForwardRefSymbol){var t=e.render;if("function"!=typeof t)throw new Error("render property of ForwardRef was not a function");return react$2.exports.forwardRef((function(){var e=arguments;return react$2.exports.createElement(ObserverComponent,null,(function(){return t.apply(void 0,e)}))}))}return"function"!=typeof e||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(react$2.exports.Component,e)?makeClassComponentObserver(e):observer$1(e)}function _extends$2(){return _extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var MobXProviderContext=React$g.createContext({});function Provider(e){var t=e.children,r=_objectWithoutPropertiesLoose$1(e,["children"]),n=React$g.useContext(MobXProviderContext),i=React$g.useRef(_extends$2({},n,r)).current;return jsx(MobXProviderContext.Provider,{value:i,children:t})}function createStoreInjector(e,t,r,n){var i=React$g.forwardRef((function(t,r){var n=_extends$2({},t),i=React$g.useContext(MobXProviderContext);return Object.assign(n,e(i||{},n)||{}),r&&(n.ref=r),jsx("component",_objectSpread({},n))}));return n&&(i=observer(i)),i.isMobxInjector=!0,copyStaticProperties(t,i),i.wrappedComponent=t,i.displayName=getInjectName(t,r),i}function getInjectName(e,t){var r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?"inject-with-"+t+"("+r+")":"inject("+r+")"}function grabStoresByName(e){return function(t,r){return e.forEach((function(e){if(!(e in r)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");r[e]=t[e]}})),r}}function inject(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("function"==typeof arguments[0]){var n=arguments[0];return function(e){return createStoreInjector(n,e,n.name,!0)}}return function(e){return createStoreInjector(grabStoresByName(t),e,t.join("-"),!1)}}Provider.displayName="MobXProvider";var protoStoreKey=newSymbol("disposeOnUnmountProto"),instStoreKey=newSymbol("disposeOnUnmountInst");function runDisposersOnWillUnmount(){var e=this;[].concat(this[protoStoreKey]||[],this[instStoreKey]||[]).forEach((function(t){var r="string"==typeof t?e[t]:t;null!=r&&(Array.isArray(r)?r.map((function(e){return e()})):r())}))}function disposeOnUnmount(e,t){if(Array.isArray(t))return t.map((function(t){return disposeOnUnmount(e,t)}));var r=Object.getPrototypeOf(e).constructor,n=Object.getPrototypeOf(e.constructor),i=Object.getPrototypeOf(Object.getPrototypeOf(e));if(r!==React$g.Component&&r!==React$g.PureComponent&&n!==React$g.Component&&n!==React$g.PureComponent&&i!==React$g.Component&&i!==React$g.PureComponent)throw new Error("[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.");if("string"!=typeof t&&"function"!=typeof t&&!Array.isArray(t))throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var o="string"==typeof t,a=!!e[protoStoreKey]||!!e[instStoreKey];return(o?e[protoStoreKey]||(e[protoStoreKey]=[]):e[instStoreKey]||(e[instStoreKey]=[])).push(t),a||patch(e,"componentWillUnmount",runDisposersOnWillUnmount),"string"!=typeof t?t:void 0}function createChainableTypeChecker(e){function t(t,r,n,i,o,a){for(var s=arguments.length,c=new Array(s>6?s-6:0),u=6;u<s;u++)c[u-6]=arguments[u];return untracked((function(){if(i=i||"<<anonymous>>",a=a||n,null==r[n]){if(t){var s=null===r[n]?"null":"undefined";return new Error("The "+o+" `"+a+"` is marked as required in `"+i+"`, but its value is `"+s+"`.")}return null}return e.apply(void 0,[r,n,i,o,a].concat(c))}))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}function isSymbol$4(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function getPropType(e){var t=_typeof2(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":isSymbol$4(t,e)?"symbol":t}function getPreciseType(e){var t=getPropType(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function createObservableTypeCheckerCreator(e,t){return createChainableTypeChecker((function(r,n,i,o,a){return untracked((function(){if(e&&getPropType(r[n])===t.toLowerCase())return null;var o;switch(t){case"Array":o=isObservableArray;break;case"Object":o=isObservableObject;break;case"Map":o=isObservableMap;break;default:throw new Error("Unexpected mobxType: "+t)}var s=r[n];if(!o(s)){var c=getPreciseType(s),u=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+c+"` supplied to `"+i+"`, expected `mobx.Observable"+t+"`"+u+".")}return null}))}))}function createObservableArrayOfTypeChecker(e,t){return createChainableTypeChecker((function(r,n,i,o,a){for(var s=arguments.length,c=new Array(s>5?s-5:0),u=5;u<s;u++)c[u-5]=arguments[u];return untracked((function(){if("function"!=typeof t)return new Error("Property `"+a+"` of component `"+i+"` has invalid PropType notation.");var s=createObservableTypeCheckerCreator(e,"Array")(r,n,i,o,a);if(s instanceof Error)return s;for(var u=r[n],l=0;l<u.length;l++)if((s=t.apply(void 0,[u,l,i,o,a+"["+l+"]"].concat(c)))instanceof Error)return s;return null}))}))}var observableArray=createObservableTypeCheckerCreator(!1,"Array"),observableArrayOf=createObservableArrayOfTypeChecker.bind(null,!1),observableMap=createObservableTypeCheckerCreator(!1,"Map"),observableObject=createObservableTypeCheckerCreator(!1,"Object"),arrayOrObservableArray=createObservableTypeCheckerCreator(!0,"Array"),arrayOrObservableArrayOf=createObservableArrayOfTypeChecker.bind(null,!0),objectOrObservableObject=createObservableTypeCheckerCreator(!0,"Object"),PropTypes={observableArray:observableArray,observableArrayOf:observableArrayOf,observableMap:observableMap,observableObject:observableObject,arrayOrObservableArray:arrayOrObservableArray,arrayOrObservableArrayOf:arrayOrObservableArrayOf,objectOrObservableObject:objectOrObservableObject};if(!react$2.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");var mobxreact_esm=Object.freeze((_Object$freeze3={__proto__:null},_defineProperty3(_Object$freeze3,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze3,"MobXProviderContext",MobXProviderContext),_defineProperty3(_Object$freeze3,"PropTypes",PropTypes),_defineProperty3(_Object$freeze3,"Provider",Provider),_defineProperty3(_Object$freeze3,"disposeOnUnmount",disposeOnUnmount),_defineProperty3(_Object$freeze3,"inject",inject),_defineProperty3(_Object$freeze3,"observer",observer),_defineProperty3(_Object$freeze3,"Observer",ObserverComponent),_defineProperty3(_Object$freeze3,"enableStaticRendering",enableStaticRendering),_defineProperty3(_Object$freeze3,"isUsingStaticRendering",isUsingStaticRendering),_defineProperty3(_Object$freeze3,"observerBatching",observerBatching),_defineProperty3(_Object$freeze3,"useAsObservableSource",useAsObservableSource),_defineProperty3(_Object$freeze3,"useLocalObservable",useLocalObservable),_defineProperty3(_Object$freeze3,"useLocalStore",useLocalStore),_defineProperty3(_Object$freeze3,"useObserver",useObserver),_defineProperty3(_Object$freeze3,"useStaticRendering",useStaticRendering),_Object$freeze3)),require$$2=getAugmentedNamespace(mobxreact_esm),hooks={},Controller$3={},require$$5$1=getAugmentedNamespace(mobx_esm),animationFrame$1={};function _typeof$o(e){return _typeof$o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$o(e)}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getFrameTime=function(){var e=Date.now();return new Promise((function(r){t((function(){r(Date.now()-e)}))}))},e.nextFrame=function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(n<=0?r:function(){return e(r,n-1)})},e.requestAnimationFrameInterval=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=-1,o=0,a=-1,s=1e3/n;function c(r){-1===a&&(a=r),i=t(c),r-o<s||(o=r,e&&e(r-a))}return i=t(c),function(){r(i)}};var t=window.requestAnimationFrame||function(e){return setTimeout(e,16)},r=window.cancelAnimationFrame||clearTimeout,n=t;e.default=n}(animationFrame$1),Object.defineProperty(Controller$3,"__esModule",{value:!0}),Controller$3.ControllerContext=Controller$3.Controller=void 0;var _five$4=five,_mobx$2=require$$5$1,React$f=_interopRequireWildcard$m(react$2.exports),_animationFrame$1=animationFrame$1;function _getRequireWildcardCache$m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$m=function(e){return e?r:t})(e)}function _interopRequireWildcard$m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$o(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$4(e,t)}function _setPrototypeOf$4(e,t){return _setPrototypeOf$4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf$4(e,t)}function _createSuper$5(e){var t=_isNativeReflectConstruct$5();return function(){var r,n=_getPrototypeOf$3(e);if(t){var i=_getPrototypeOf$3(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn$3(this,r)}}function _possibleConstructorReturn$3(e,t){if(t&&("object"===_typeof$o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(e)}function _assertThisInitialized$4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf$3(e){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf$3(e)}function _defineProperty$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Controller$2=function(e){_inherits$3(r,e);var t=_createSuper$5(r);function r(){var e;return _classCallCheck$4(this,r),_defineProperty$2(_assertThisInitialized$4(e=t.call(this)),"playing",!1),_defineProperty$2(_assertThisInitialized$4(e),"visible",!1),_defineProperty$2(_assertThisInitialized$4(e),"drawerConfig",null),(0,_mobx$2.makeObservable)(_assertThisInitialized$4(e),{visible:_mobx$2.observable,setVisible:_mobx$2.action,playing:_mobx$2.observable,setPlaying:_mobx$2.action,drawerConfig:_mobx$2.observable.ref,openDrawer:_mobx$2.action}),(0,_mobx$2.reaction)((function(){return e.playing}),(function(t){e.emit(t?"playing":"paused")})),e}return _createClass$2(r,[{key:"isAudio",get:function(){var e,t;return!(null!==(e=this.videoAgentScene)&&void 0!==e&&null!==(t=e.videoAgentMesh.videoUrl)&&void 0!==t&&t.endsWith(".mp4"))}},{key:"setVisible",value:function(e){this.visible=e}},{key:"setPlaying",value:function(e){this.playing=e}},{key:"openDrawer",value:function(e){var t;e?this.drawerConfig=e:this.drawerConfig={content:"",height:null===(t=this.drawerConfig)||void 0===t?void 0:t.height}}},{key:"ready",get:function(){return!!this.videoAgentScene}},{key:"currentTime",get:function(){var e;return(null===(e=this.videoAgentScene)||void 0===e?void 0:e.videoAgentMesh.currentTime)||0}},{key:"currentKeyframes",get:function(){var e=this;return this.vreoUnit?this.vreoUnit.keyframes.filter((function(t){if(t.parsed)return!1;var r=e.currentTime-t.start;return r<=100&&r>=0})):[]}},{key:"videoInstance",get:function(){var e;return null===(e=this.videoAgentScene)||void 0===e?void 0:e.videoAgentMesh.videoInstance}},{key:"requestAnimationFrameLoop",value:function(e){var t,r,n,i,o=this;if(null!==(t=this.videoInstance)&&void 0!==t&&t.ended)return this.setPlaying(!1),void this.videoInstance.pause();this.playing?(null!==(r=this.videoInstance)&&void 0!==r&&r.paused&&this.playing&&this.videoInstance.play(),this.currentKeyframes.forEach((function(t){t.parsed||(t.parsed=!0,o.emit(t.type,t),e&&e(t.type,t))}))):null!==(n=this.videoInstance)&&void 0!==n&&n.paused||null===(i=this.videoInstance)||void 0===i||i.pause()}},{key:"run",value:function(e){var t=this;this.stopInterval||(this.stopInterval=(0,_animationFrame$1.requestAnimationFrameInterval)((function(){return t.requestAnimationFrameLoop(e)})))}},{key:"dispose",value:function(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach((function(e){return e.parsed=!1})),this.vreoUnit=void 0,this.videoInstance&&(this.videoInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}]),r}(_five$4.Subscribe);Controller$3.Controller=Controller$2;var ControllerContext=React$f.createContext(null);Controller$3.ControllerContext=ControllerContext,Object.defineProperty(hooks,"__esModule",{value:!0}),hooks.useController=useController,hooks.useFiveInstance=useFiveInstance,hooks.useFiveProject2d=useFiveProject2d;var _react$2=_interopRequireDefault$h(react$2.exports),_Controller$1=Controller$3;function _interopRequireDefault$h(e){return e&&e.__esModule?e:{default:e}}function useController(){var e=_react$2.default.useContext(_Controller$1.ControllerContext);if(!e)throw new Error('没有找到 "ControllerContext"');return e}function useFiveInstance(){var e=useController();if(!e.$five)throw new Error('没有找到 "five" 实例');return e.$five}function useFiveProject2d(){var e=useFiveInstance();return function(t){return e.project2d(t,!1)}}var CameraMovement$1={},CameraMovementPlugin$3={},typings={},CameraMovementEffect$1,Rotation$1;Object.defineProperty(typings,"__esModule",{value:!0}),typings.Rotation=typings.CameraMovementEffect=void 0,typings.CameraMovementEffect=CameraMovementEffect$1,function(e){e.Move="Move",e.Rotate="Rotate"}(CameraMovementEffect$1||(typings.CameraMovementEffect=CameraMovementEffect$1={})),typings.Rotation=Rotation$1,function(e){e.Clockwise="Clockwise",e.Anticlockwise="Anticlockwise",e.Loop="Loop"}(Rotation$1||(typings.Rotation=Rotation$1={}));var tween$1={},Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Easing.Bounce.In(2*e):.5*Easing.Bounce.Out(2*e-1)+.5}}},now;now="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var now$1=now,Group=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=now$1()),void 0===t&&(t=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var i=this._tweens[r[n]],o=!t;i&&!1===i.update(e,o)&&!t&&delete this._tweens[r[n]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),Interpolation={Linear:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=Interpolation.Utils.Linear;return t<0?o(e[0],e[1],n):t>1?o(e[r],e[r-1],r-n):o(e[i],e[i+1>r?r:i+1],n-i)},Bezier:function(e,t){for(var r=0,n=e.length-1,i=Math.pow,o=Interpolation.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-t,n-a)*i(t,a)*e[a]*o(n,a);return r},CatmullRom:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(i=Math.floor(n=r*(1+t))),o(e[(i-1+r)%r],e[i],e[(i+1)%r],e[(i+2)%r],n-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[r]-(o(e[r],e[r],e[r-1],e[r-1],n-r)-e[r]):o(e[i?i-1:0],e[i],e[r<i+1?r:i+1],e[r<i+2?r:i+2],n-i)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var n=t;n>1;n--)r*=n;return e[t]=r,r}}(),CatmullRom:function(e,t,r,n,i){var o=.5*(r-e),a=.5*(n-t),s=i*i;return(2*t-2*r+o+a)*(i*s)+(-3*t+3*r-2*o-a)*s+o*i+t}}},Sequence=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),mainGroup=new Group,Tween=function(){function e(e,t){void 0===t&&(t=mainGroup),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?now$1()+parseFloat(e):e:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,r,n){for(var i in r){var o=e[i],a=Array.isArray(o),s=a?"array":_typeof2(o),c=!a&&Array.isArray(r[i]);if("undefined"!==s&&"function"!==s){if(c){var u=r[i];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,o)),r[i]=[o].concat(u)}if("object"!==s&&!a||!o||c)void 0===t[i]&&(t[i]=o),a||(t[i]*=1),n[i]=c?r[i].slice().reverse():t[i]||0;else{for(var l in t[i]=a?[]:{},o)t[i][l]=o[l];n[i]=a?[]:{},this._setupProperties(o,t[i],r[i],n[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=now$1()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=now$1()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=now$1()),void 0===t&&(t=!0),this._isPaused)return!0;var r,n,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var o=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,r,n){for(var i in r)if(void 0!==t[i]){var o=t[i]||0,a=r[i],s=Array.isArray(e[i]),c=Array.isArray(a);!s&&c?e[i]=this._interpolationFunction(a,n):"object"===_typeof2(a)&&a?this._updateProperties(e[i],o,a,n):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[i]=o+(a-o)*n)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof r?this._valuesStartRepeat[e]+parseFloat(r):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN$1=mainGroup,getAll=TWEEN$1.getAll.bind(TWEEN$1),removeAll=TWEEN$1.removeAll.bind(TWEEN$1),add=TWEEN$1.add.bind(TWEEN$1),remove=TWEEN$1.remove.bind(TWEEN$1),update=TWEEN$1.update.bind(TWEEN$1),exports$1={Easing:Easing,Group:Group,Interpolation:Interpolation,now:now$1,Sequence:Sequence,nextId:nextId,Tween:Tween,VERSION:VERSION,getAll:getAll,removeAll:removeAll,add:add,remove:remove,update:update},tween_esm=Object.freeze((_Object$freeze4={__proto__:null},_defineProperty3(_Object$freeze4,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze4,"default",exports$1),_defineProperty3(_Object$freeze4,"Easing",Easing),_defineProperty3(_Object$freeze4,"Group",Group),_defineProperty3(_Object$freeze4,"Interpolation",Interpolation),_defineProperty3(_Object$freeze4,"Sequence",Sequence),_defineProperty3(_Object$freeze4,"Tween",Tween),_defineProperty3(_Object$freeze4,"VERSION",VERSION),_defineProperty3(_Object$freeze4,"add",add),_defineProperty3(_Object$freeze4,"getAll",getAll),_defineProperty3(_Object$freeze4,"nextId",nextId),_defineProperty3(_Object$freeze4,"now",now$1),_defineProperty3(_Object$freeze4,"remove",remove),_defineProperty3(_Object$freeze4,"removeAll",removeAll),_defineProperty3(_Object$freeze4,"update",update),_Object$freeze4)),require$$5=getAugmentedNamespace(tween_esm);!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0,e.default=a,e.tweenProgress=function(e,t){return a({progress:0},{progress:1},e,t)};var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=i(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(require$$5),n=animationFrame$1;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var o=r.Easing;function a(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.Linear.None,s=new r.Tween(e).to(t,i).easing(a);(0,n.nextFrame)((function(){return s.start(0)}));var c=(0,n.requestAnimationFrameInterval)((function(e){!1===s.update(e)&&c()})),u=[];return s.onDestroy=function(e){return u.push(e),s},s.destroy=function(){var e;for(this.stop(),Object.assign(s,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});e=u.shift();)e();c()},s}e.Easing=o}(tween$1),Object.defineProperty(CameraMovementPlugin$3,"__esModule",{value:!0}),CameraMovementPlugin$3.CameraMovementPlugin=void 0;var _five$3=five,_typings$1=typings,_tween$2=tween$1;function asyncGeneratorStep$6(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$6(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$6(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$6(o,n,i,a,s,"throw",e)}a(void 0)}))}}var PI_2$3=2*Math.PI;function formatLatitude$1(e){return e%PI_2$3}function formatLongitude$1(e){return(e%PI_2$3+PI_2$3)%PI_2$3}var getLongitudeParams=function e(t,r,n){var i=Math.PI,o=2*i;return t=formatLongitude$1(t),r=formatLongitude$1(r),n===_typings$1.Rotation.Anticlockwise&&t<r&&(t+=o),n===_typings$1.Rotation.Clockwise&&r<t&&(r+=o),n===_typings$1.Rotation.Loop&&r-t>i?e(t,r,_typings$1.Rotation.Anticlockwise):n===_typings$1.Rotation.Loop&&t-r>i?e(t,r,_typings$1.Rotation.Clockwise):{from:t,to:r}};function progressNumber$1(e,t,r){return e+(t-e)*r}var CameraMovementPlugin$2=function(e){var t=function(){var t=_asyncToGenerator$6(regeneratorRuntime.mark((function t(r,n){var i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=o.length>2&&void 0!==o[2]?o[2]:{preload:!0}).asyncStartCallback&&i.asyncStartCallback(),!r.mode||r.mode===e.currentMode){t.next=5;break}return t.next=5,new Promise((function(t){r.mode&&(e.once("modeChange",(function(n){e.once("initAnimationEnded",(function(){n===r.mode&&t(!0)}))})),e.changeMode(r.mode,{fov:r.fov||void 0,latitude:r.latitude||void 0,longitude:r.longitude||void 0,panoIndex:r.panoIndex||void 0}))}));case 5:if(r.mode!==_five$3.Five.Mode.Floorplan){t.next=7;break}return t.abrupt("return",!0);case 7:if(!i.preload||void 0===r.panoIndex||r.panoIndex===e.panoIndex){t.next=10;break}return t.next=10,e.preloadPano(r.panoIndex);case 10:if(i.asyncEndCallback&&i.asyncEndCallback(),void 0!==r.panoIndex||void 0!==r.fov||void 0!==r.latitude||void 0!==r.longitude){t.next=13;break}return t.abrupt("return",!0);case 13:return t.next=15,new Promise((function(t,i){var o=void 0!==r.panoIndex?r.panoIndex:e.panoIndex;void 0!==o?e.moveToPano(o,Object.assign({duration:n,moveEndCallback:function(){return t(!0)},moveCancelCallback:function(){return i(!1)}},r)):i(!1)}));case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r=function(t){var r=e.state,n=formatLatitude$1(r.latitude),i=formatLatitude$1(t.latitude),o=getLongitudeParams(r.longitude,t.longitude,t.rotation||_typings$1.Rotation.Loop),a=o.from,s=o.to;return{from:{latitude:n,longitude:a,fov:r.fov},to:{latitude:i,longitude:s,fov:t.fov}}},n=function(){var t=_asyncToGenerator$6(regeneratorRuntime.mark((function t(n,i){var o,a,s,c,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=u.length>2&&void 0!==u[2]?u[2]:{}).asyncStartCallback&&o.asyncStartCallback(),!n.mode||e.currentMode===n.mode){t.next=5;break}return t.next=5,e.changeMode(n.mode);case 5:if(n.mode!==_five$3.Five.Mode.Panorama||e.currentMode!==_five$3.Five.Mode.Panorama||void 0===n.panoIndex||n.panoIndex===e.panoIndex){t.next=11;break}if(!o.preload){t.next=9;break}return t.next=9,e.preloadPano(n.panoIndex);case 9:return t.next=11,new Promise((function(t,r){e.moveToPano(n.panoIndex,{moveEndCallback:function(){return t(!0)},moveCancelCallback:function(){return r(!1)}})}));case 11:return o.asyncEndCallback&&o.asyncEndCallback(),a=r(n),s=a.from,c=a.to,t.next=15,new Promise((function(t,r){var o=n.rotateSpeed?Math.ceil(Math.abs(c.longitude-s.longitude)/n.rotateSpeed*1e3):i,a=(0,_tween$2.tweenProgress)(o,_tween$2.Easing.Linear.None).onUpdate((function(t){var r=t.progress,n={};n.longitude=progressNumber$1(s.longitude,c.longitude,r),n.latitude=progressNumber$1(s.latitude,c.latitude,r),n.fov=progressNumber$1(s.fov,c.fov,r),e.setState(n,!0)})).onComplete((function(){t(!0)})).onDestroy((function(){t(!1)}));n.rotation===_typings$1.Rotation.Loop&&a.repeat(1/0).yoyo(!0),setTimeout((function(){a.destroy(),t(!0)}),i)}));case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{move:t,rotate:n}};CameraMovementPlugin$3.CameraMovementPlugin=CameraMovementPlugin$2;var VreoUnit={};Object.defineProperty(VreoUnit,"__esModule",{value:!0});var VreoKeyframeEnum_1=exports("V",VreoUnit.VreoKeyframeEnum=VreoUnit.PanoTagEnum=VreoUnit.PanoEffectEnum=VreoUnit.InfoPanelTypeEnum=void 0),VreoKeyframeEnum,PanoTagEnum,PanoEffectEnum,InfoPanelTypeEnum;function _typeof$n(e){return _typeof$n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$n(e)}exports("V",VreoKeyframeEnum_1=VreoUnit.VreoKeyframeEnum=VreoKeyframeEnum),function(e){e.CameraMovement="CameraMovement",e.PanoTag="PanoTag",e.PanoTextLabel="PanoTextLabel",e.Prompter="Prompter",e.UpdateVRPanorama="UpdateVRPanorama",e.ModelVideo="ModelVideo",e.PanoEffect="PanoEffect",e.InfoPanel="InfoPanel",e.VideoEffect="VideoEffect",e.Exit="Exit",e.Custom="Custom"}(VreoKeyframeEnum||exports("V",VreoKeyframeEnum_1=VreoUnit.VreoKeyframeEnum=VreoKeyframeEnum={})),VreoUnit.PanoTagEnum=PanoTagEnum,function(e){e.Text="Text",e.Image="Image"}(PanoTagEnum||(VreoUnit.PanoTagEnum=PanoTagEnum={})),VreoUnit.PanoEffectEnum=PanoEffectEnum,function(e){e.Distance="Distance"}(PanoEffectEnum||(VreoUnit.PanoEffectEnum=PanoEffectEnum={})),VreoUnit.InfoPanelTypeEnum=InfoPanelTypeEnum,function(e){e.Image="Image",e.Video="Video"}(InfoPanelTypeEnum||(VreoUnit.InfoPanelTypeEnum=InfoPanelTypeEnum={})),Object.defineProperty(CameraMovement$1,"__esModule",{value:!0}),CameraMovement$1.CameraMovement=CameraMovement;var React$e=_interopRequireWildcard$l(react$2.exports),_CameraMovementPlugin=CameraMovementPlugin$3,_typings=typings,_VreoUnit$8=VreoUnit,_hooks$b=hooks;function _getRequireWildcardCache$l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$l=function(e){return e?r:t})(e)}function _interopRequireWildcard$l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$n(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$l(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function asyncGeneratorStep$5(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$5(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$5(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$5(o,n,i,a,s,"throw",e)}a(void 0)}))}}function CameraMovement(){var e=(0,_hooks$b.useController)(),t=(0,_hooks$b.useFiveInstance)(),r=React$e.useRef();return React$e.useEffect((function(){var n=function(){var e=_asyncToGenerator$5(regeneratorRuntime.mark((function e(n){var i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.current||(r.current=(0,_CameraMovementPlugin.CameraMovementPlugin)(t,{})),i=n.start,o=n.end,a=n.data,a.effect===_typings.CameraMovementEffect.Rotate?r.current.rotate(a,o-i):r.current.move(a,o-i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.on(_VreoUnit$8.VreoKeyframeEnum.CameraMovement,n),function(){e.off(_VreoUnit$8.VreoKeyframeEnum.CameraMovement,n)}}),[e]),React$e.createElement(React$e.Fragment,null)}var InfoPanel$1={};function _typeof$m(e){return _typeof$m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$m(e)}Object.defineProperty(InfoPanel$1,"__esModule",{value:!0}),InfoPanel$1.InfoPanel=InfoPanel;var React$d=_interopRequireWildcard$k(react$2.exports),_VreoUnit$7=VreoUnit,_hooks$a=hooks;function _getRequireWildcardCache$k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$k=function(e){return e?r:t})(e)}function _interopRequireWildcard$k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$m(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$k(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function InfoPanelImg(e){var t=e.url;return React$d.createElement("div",{className:"vreo-infoPanel vreo-infoPanel--img"},React$d.createElement("img",{className:"vreo-infoPanelImg",src:t}))}function InfoPanelVideo(e){var t=e.url;return React$d.createElement("div",{className:"vreo-infoPanel vreo-infoPanel--video"},React$d.createElement("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:t}))}function InfoPanel(){var e=React$d.useRef(),t=(0,_hooks$a.useController)();return React$d.useEffect((function(){var r;if(!1!==(null===(r=t.configs)||void 0===r?void 0:r.keyframeMap.InfoPanel)){var n=function(r){var n=r.start,i=r.end,o=r.data;o.type===_VreoUnit$7.InfoPanelTypeEnum.Image?t.openDrawer({content:React$d.createElement(InfoPanelImg,{url:o.url}),height:"60vh"}):o.type===_VreoUnit$7.InfoPanelTypeEnum.Video&&t.openDrawer({content:React$d.createElement(InfoPanelVideo,{url:o.url}),height:"60vh"}),e.current=setTimeout((function(){return t.openDrawer(!1)}),i-n)};return t.on(_VreoUnit$7.VreoKeyframeEnum.InfoPanel,n),function(){t.off(_VreoUnit$7.VreoKeyframeEnum.InfoPanel,n),e.current&&clearTimeout(e.current)}}}),[t]),React$d.createElement(React$d.Fragment,null)}var ModelVideo$1={},ModelTVVideoPlugin$1={};function _typeof$l(e){return _typeof$l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$l(e)}Object.defineProperty(ModelTVVideoPlugin$1,"__esModule",{value:!0}),ModelTVVideoPlugin$1.ModelTVVideoPlugin=void 0;var THREE$6=_interopRequireWildcard$j(require$$4);function _getRequireWildcardCache$j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$j=function(e){return e?r:t})(e)}function _interopRequireWildcard$j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$l(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$j(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _slicedToArray$6(e,t){return _arrayWithHoles$6(e)||_iterableToArrayLimit$6(e,t)||_unsupportedIterableToArray$6(e,t)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$6(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$6(e,t):void 0}}function _arrayLikeToArray$6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$6(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$6(e){if(Array.isArray(e))return e}function asyncGeneratorStep$4(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$4(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$4(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$4(o,n,i,a,s,"throw",e)}a(void 0)}))}}var ModelTVVideoPlugin=function(e,t){var r={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:t.videoElement},n=function(e){r.videoTexture&&(r.videoTexture.image.muted=e,r.videoTexture.image.play())},i=function(){if(!r.enabled&&r.videoTexture){r.enabled=!0,r.videoMeshes=o(),r.videoMeshes.forEach((function(t){return e.scene.add(t)}));var t=function(){if(r.videoTexture){r.videoTexture.image.addEventListener("timeupdate",(function t(){var n;r.videoTexture&&(null===(n=r.videoTexture)||void 0===n||n.image.removeEventListener("timeupdate",t),r.videoTextureEnabled=!0,r.videoMeshes.forEach((function(e){e.material.map!==r.videoTexture&&(e.material.map=r.videoTexture)})),e.needsRender=!0)})),r.videoTexture&&r.videoMeshes.length&&r.videoTexture.image.play()}};if(!e.model.loaded)return e.once("modelLoaded",(function(){return t()}));t()}},o=function(){return r.rectPoints.map((function(e,t){var n=new THREE$6.BufferGeometry,i=128,o=[];o.push(e[0].x,e[0].y,e[0].z);for(var a=1;a<i;a++)o.push(e[0].x+(e[1].x-e[0].x)*a/i,e[0].y+(e[1].y-e[0].y)*a/i,e[0].z+(e[1].z-e[0].z)*a/i);o.push(e[1].x,e[1].y,e[1].z),o.push(e[2].x,e[2].y,e[2].z);for(var s=1;s<i;s++)o.push(e[2].x+(e[3].x-e[2].x)*s/i,e[2].y+(e[3].y-e[2].y)*s/i,e[2].z+(e[3].z-e[2].z)*s/i);o.push(e[3].x,e[3].y,e[3].z);var c=[];c.push(0,1);for(var u=1;u<i;u++)c.push(0,1-u/i);c.push(0,0),c.push(1,0);for(var l=1;l<i;l++)c.push(1,l/i);c.push(1,1);for(var f=[],h=0;h<i;h++)f.push(h,h+1,256-h,h,256-h,257-h);n.setAttribute("position",new THREE$6.BufferAttribute(new Float32Array(o),3)),n.setAttribute("uv",new THREE$6.BufferAttribute(new Float32Array(c),2)),n.setIndex(new THREE$6.BufferAttribute(new Uint32Array(f),1));var p=new THREE$6.MeshBasicMaterial({map:r.videoTextureEnabled?r.videoTexture:r.imageTexture,side:THREE$6.DoubleSide}),d=new THREE$6.Mesh(n,p);return d.renderOrder=1,d.name="video-".concat(t,"-").concat(performance.now()),d}))},a=function(e,t){return new Promise((function(r,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var o=window.URL||window.webkitURL;(t=t||document.createElement("video")).crossOrigin="anonymous",t.autoplay=!0,t.muted=!0,t.loop=!0,t.playsInline=!0,t.src=o.createObjectURL(i.response);var a=new THREE$6.VideoTexture(t);a.minFilter=THREE$6.LinearFilter,a.magFilter=THREE$6.LinearFilter,a.format=THREE$6.RGBFormat,r(Object.assign(a,{videoSource:e}))}else n(new Error("Video download Error: "+i.status))},i.onerror=function(e){return n(e)},i.open("GET",e),i.responseType="blob",i.send()}))},s=function(){var e=_asyncToGenerator$4(regeneratorRuntime.mark((function e(t,n){var o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.video_src,s=t.video_poster_src,c=t.points,r.videoSource=o,r.rectPoints=c.map((function(e){return e.map((function(e){var t=e.x,r=e.y,n=e.z;return new THREE$6.Vector3(t,r,n)}))})),r.imageTexture=(u=s,l=void 0,(l=(new THREE$6.TextureLoader).load(u)).minFilter=THREE$6.LinearFilter,l.magFilter=THREE$6.LinearFilter,l.format=THREE$6.RGBFormat,l),n&&(r.videoElement=n),e.next=7,a(r.videoSource,r.videoElement);case 7:r.videoTexture=e.sent,r.enabled=!!t.enable,r.enabled&&i();case 10:case"end":return e.stop()}var u,l}),e)})));return function(t,r){return e.apply(this,arguments)}}();return e.on("modeChange",(function(){return n(!0)})),e.on("wantsTapGesture",(function(t){if(r.enabled){var i=_slicedToArray$6(t.intersectObjects(e.scene.children,!0),1)[0];return i&&/^video/.test(i.object.name)?(r.videoTexture&&n(!r.videoTexture.image.muted),!1):void 0}})),e.on("panoArrived",(function(){if(r.enabled&&r.videoTexture&&!r.videoTexture.image.muted){var t=e.camera.position,i=r.rectPoints.find((function(r){var n=r.reduce((function(e,t){return new THREE$6.Vector3(e.x+t.x/r.length,e.y+t.y/r.length,e.z+t.z/r.length)}),new THREE$6.Vector3);return r.map((function(e){return new THREE$6.Vector3((e.x+n.x)/2,(e.y+n.y)/2,(e.z+n.z)/2)})).filter((function(r){r=r.clone().sub(t).normalize();var n=_slicedToArray$6(new THREE$6.Raycaster(t,r).intersectObjects(e.scene.children,!0),1)[0];return!!n&&/^video/.test(n.object.name)})).length>=2}));i||n(!0)}})),e.on("renderFrame",(function(){r.videoMeshes.forEach((function(e){e&&(e.needsRender=!0)}))})),e.on("load",(function(e){e.modelTVVideoData&&s(e.modelTVVideoData)})),{enable:i,disable:function(){r.enabled&&(r.enabled=!1,r.videoMeshes.forEach((function(t){t.geometry.dispose(),t.material.dispose(),e.scene.remove(t),r.videoTexture&&r.videoTexture.image.pause()})),r.videoMeshes=[],e.needsRender=!0)},load:s}};function _typeof$k(e){return _typeof$k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$k(e)}ModelTVVideoPlugin$1.ModelTVVideoPlugin=ModelTVVideoPlugin,Object.defineProperty(ModelVideo$1,"__esModule",{value:!0}),ModelVideo$1.ModelVideo=ModelVideo;var React$c=_interopRequireWildcard$i(react$2.exports),_ModelTVVideoPlugin=ModelTVVideoPlugin$1,_VreoUnit$6=VreoUnit,_hooks$9=hooks;function _getRequireWildcardCache$i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$i=function(e){return e?r:t})(e)}function _interopRequireWildcard$i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$k(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$i(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function asyncGeneratorStep$3(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$3(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$3(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$3(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ModelVideo(){var e=(0,_hooks$9.useController)(),t=(0,_hooks$9.useFiveInstance)(),r=React$c.useRef(),n=React$c.useRef();return React$c.useEffect((function(){var i=function(){var i=_asyncToGenerator$3(regeneratorRuntime.mark((function i(o){var a,s,c,u,l,f,h,p;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.current||(r.current=(0,_ModelTVVideoPlugin.ModelTVVideoPlugin)(t,{})),c=o.start,u=o.end,l=o.data,f=l.videoSrc,h=l.videoPosterSrc,p=l.vertexs,r.current.disable(),i.next=6,r.current.load({video_src:f.replace(/https*:/,""),video_poster_src:h.replace(/https*:/,""),points:[p]},null===(a=e.configs)||void 0===a||null===(s=a.videos)||void 0===s?void 0:s.modelTVVideo);case 6:r.current.enable(),n.current=setTimeout((function(){var e;return null===(e=r.current)||void 0===e?void 0:e.disable()}),u-c);case 8:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return e.on(_VreoUnit$6.VreoKeyframeEnum.ModelVideo,i),function(){e.off(_VreoUnit$6.VreoKeyframeEnum.ModelVideo,i),n.current&&clearTimeout(n.current)}}),[e]),React$c.createElement(React$c.Fragment,null)}var PanoEffect$1={},lineAnime={},line={};Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=e(require$$4),i=function(e){function t(){var t=e.call(this)||this;return t.type="LineSegmentsGeometry",t.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),t.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),t.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),t}return t$1.__extends(t,e),t.prototype.applyMatrix4=function(e){var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},t.prototype.setPositions=function(e){var t;t=e instanceof Float32Array?e:Array.isArray(e)?new Float32Array(e):new Float32Array;var r=new n.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(r,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},t.prototype.setColors=function(e){var t;t=e instanceof Float32Array?e:Array.isArray(e)?new Float32Array(e):new Float32Array;var r=new n.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(r,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(r,3,3)),this},t.prototype.fromWireframeGeometry=function(e){return this.setPositions(e.attributes.position.array),this},t.prototype.fromEdgesGeometry=function(e){return this.setPositions(e.attributes.position.array),this},t.prototype.fromMesh=function(e){return this.fromWireframeGeometry(new n.WireframeGeometry(e.geometry)),this},t.prototype.fromLineSegments=function(e){var t=e.geometry;if(t instanceof n.Geometry){var r=(new n.BufferGeometry).fromGeometry(t);this.setPositions(r.attributes.position.array)}else t instanceof n.BufferGeometry&&this.setPositions(t.attributes.position.array);return this},t.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new n.Box3);var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){var r=new n.Box3;this.boundingBox.setFromBufferAttribute(e),r.setFromBufferAttribute(t),this.boundingBox.union(r)}},t.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new n.Sphere),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){var r=this.boundingSphere.center;this.boundingBox.getCenter(r);for(var i=0,o=new n.Vector3,a=0,s=e.count;a<s;a++)o.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(o)),o.fromBufferAttribute(t,a),i=Math.max(i,r.distanceToSquared(o));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},t.prototype.toJSON=function(){},t}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"},o=function(e){function t(t){var r=e.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return r.type="LineMaterial",r.dashed=!1,Object.defineProperties(r,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),r.setValues(t),r}return t$1.__extends(t,e),t}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(e){function t(t,r){var n=e.call(this)||this;return n.type="LineSegments2",n.geometry=void 0!==t?t:new i,n.material=void 0!==r?r:new o({color:16777215*Math.random()}),n}return t$1.__extends(t,e),t.prototype.computeLineDistances=function(){for(var e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*t.count),o=new n.Vector3,a=new n.Vector3,s=0,c=0,u=t.count;s<u;s++,c+=2)o.fromBufferAttribute(t,s),a.fromBufferAttribute(r,s),i[c]=0===c?0:i[c-1],i[c+1]=i[c]+o.distanceTo(a);var l=new n.InstancedInterleavedBuffer(i,2,1);return e.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(l,1,0)),e.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(l,1,1)),this},t.prototype.raycast=function(e,t){null===e.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var r=e.ray,i=e.camera,o=i.projectionMatrix,a=this.geometry,s=this.material,c=s.resolution,u=s.linewidth,l=a.attributes.instanceStart,f=a.attributes.instanceEnd,h=new n.Vector4,p=new n.Vector4,d=new n.Vector4,m=new n.Vector3,g=new n.Matrix4,v=new n.Line3,y=new n.Vector3;r.at(1,d),d.w=1,d.applyMatrix4(i.matrixWorldInverse),d.applyMatrix4(o),d.multiplyScalar(1/d.w),d.x*=c.x/2,d.y*=c.y/2,d.z=0,m.copy(d);var b=this.matrixWorld;g.multiplyMatrices(i.matrixWorldInverse,b);for(var _=0,A=l.count;_<A;_++){h.fromBufferAttribute(l,_),p.fromBufferAttribute(f,_),h.w=1,p.w=1,h.applyMatrix4(g),p.applyMatrix4(g),h.applyMatrix4(o),p.applyMatrix4(o),h.multiplyScalar(1/h.w),p.multiplyScalar(1/p.w);var M=h.z<-1&&p.z<-1,x=h.z>1&&p.z>1;if(!M&&!x){h.x*=c.x/2,h.y*=c.y/2,p.x*=c.x/2,p.y*=c.y/2,v.start.copy(h),v.start.z=0,v.end.copy(p),v.end.z=0;var w=v.closestPointToPointParameter(m,!0);v.at(w,y);var $=n.MathUtils.lerp(h.z,p.z,w),E=$>=-1&&$<=1,T=m.distanceTo(y)<.5*u;if(E&&T){v.start.fromBufferAttribute(l,_),v.end.fromBufferAttribute(f,_),v.start.applyMatrix4(b),v.end.applyMatrix4(b);var S=new n.Vector3,O=new n.Vector3;r.distanceSqToSegment(v.start,v.end,O,S),t.push({point:O,pointOnLine:S,distance:r.origin.distanceTo(O),object:this,faceIndex:_})}}}},t}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="Line2",n}return t$1.__extends(t,e),t}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(e){function t(){var t=e.call(this)||this;return t.type="LineGeometry",t}return t$1.__extends(t,e),t.prototype.setPositions=function(t){for(var r=t.length-3,n=new Float32Array(2*r),i=0;i<r;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return e.prototype.setPositions.call(this,n),this},t.prototype.setColors=function(t){for(var r=t.length-3,n=new Float32Array(2*r),i=0;i<r;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return e.prototype.setColors.call(this,n),this},t.prototype.fromLine=function(e){var t=e.geometry;if(t instanceof n.Geometry){var r=(new n.BufferGeometry).fromGeometry(t);this.setPositions(r.attributes.position.array)}else t instanceof n.BufferGeometry&&this.setPositions(t.attributes.position.array);return this},t.prototype.copy=function(){return this},t}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(e){function t(t,r){void 0===t&&(t=new n.Vector3),void 0===r&&(r=new n.Vector3);var i=e.call(this)||this;i.type="FiveLine",i.needsRender=!0;var a=new u,l=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});i.line=new s(a,l);var f=new n.BufferGeometry,h=new n.PointsMaterial({color:14467195,size:8,map:c||(c=(new n.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return i.points=new n.Points(f,h),i.points.renderOrder=11,i.points.frustumCulled=!1,i.setPoints(t,r),i.add(i.line,i.points),i}return t$1.__extends(t,e),t.prototype.setPoints=function(e,t){var r=[].concat(e.toArray(),t.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(r),3)),this.line.geometry.setPositions(r),this.line.computeLineDistances(),this.needsRender=!0},t.prototype.getPoints=function(){var e=this.points.geometry.attributes.position.array;return[new n.Vector3(e[0],e[1],e[2]),new n.Vector3(e[3],e[4],e[5])]},t.prototype.setMaterial=function(e){var t=this.line.material;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];"dashed"===r?(t.dashed=n,n?t.defines.USE_DASH="":delete t.defines.USE_DASH,t.needsUpdate=!0):t[r]=e[r]}this.needsRender=!0},t.prototype.setResolution=function(e,t){var r=this.line.material.resolution;r.x===e&&r.y===t||(r.set(e,t),this.needsRender=!0)},t}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;var BetterTween$3={};function _typeof$j(e){return _typeof$j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$j(e)}Object.defineProperty(BetterTween$3,"__esModule",{value:!0}),BetterTween$3.BetterTween=void 0,BetterTween$3.tweenProgress=tweenProgress$1;var _tween$1=_interopRequireDefault$g(require$$5),_$1=animationFrame$1;function _interopRequireDefault$g(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$3(e,t)}function _setPrototypeOf$3(e,t){return _setPrototypeOf$3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf$3(e,t)}function _createSuper$4(e){var t=_isNativeReflectConstruct$4();return function(){var r,n=_getPrototypeOf$2(e);if(t){var i=_getPrototypeOf$2(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn$2(this,r)}}function _possibleConstructorReturn$2(e,t){if(t&&("object"===_typeof$j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(e)}function _assertThisInitialized$3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf$2(e){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf$2(e)}function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BetterTween$2=function(e){_inherits$2(r,e);var t=_createSuper$4(r);function r(){var e;_classCallCheck$3(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return _defineProperty$1(_assertThisInitialized$3(e=t.call.apply(t,[this].concat(i))),"disposeMethods",[]),_defineProperty$1(_assertThisInitialized$3(e),"onDispose",(function(t){return e.disposeMethods.push(t),_assertThisInitialized$3(e)})),_defineProperty$1(_assertThisInitialized$3(e),"play",(function(){return e.start(),e.animationFrameDisposer=(0,_$1.requestAnimationFrameInterval)((function(){return e.update()})),_assertThisInitialized$3(e)})),_defineProperty$1(_assertThisInitialized$3(e),"dispose",(function(){var t,r;e.stop(),null===(t=(r=e).animationFrameDisposer)||void 0===t||t.call(r),e.disposeMethods.forEach((function(e){return e()})),e.disposeMethods=[],_tween$1.default.remove(_assertThisInitialized$3(e))})),e}return r}(_tween$1.default.Tween);function tweenProgress$1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_tween$1.default.Easing.Linear.None,r=new BetterTween$2({progress:0}).to({progress:1});return void 0!==e&&r.duration(e),void 0!==t&&r.easing(t),r}function _typeof$i(e){return _typeof$i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$i(e)}BetterTween$3.BetterTween=BetterTween$2,function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,o){var a=(new r.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg=="),s=new r.Color(16777215),c=new n.Line;c.setMaterial({linewidth:2,color:s});var u=c.points.material;return u.map=a,u.color.set(s),c.line.material.depthTest=!1,(0,i.tweenProgress)().onUpdate((function(e){var r=e.progress,n=.5-r/2,i=.5+r/2,a=t.clone().lerp(o,n),s=t.clone().lerp(o,i);c.setPoints(a,s)})).onStart((function(){return e.scene.add(c)})).onDispose((function(){e.scene.remove(c),e.needsRender=!0}))};var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=o(r);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(i,s,c):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(require$$4),n=line,i=BetterTween$3;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}}(lineAnime),Object.defineProperty(PanoEffect$1,"__esModule",{value:!0}),PanoEffect$1.PanoEffect=PanoEffect;var React$b=_interopRequireWildcard$h(react$2.exports),_three$3=require$$4,_classnames$6=_interopRequireDefault$f(classnames.exports),_lineAnime=_interopRequireDefault$f(lineAnime),_hooks$8=hooks,_VreoUnit$5=VreoUnit;function _interopRequireDefault$f(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache$h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$h=function(e){return e?r:t})(e)}function _interopRequireWildcard$h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$i(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _slicedToArray$5(e,t){return _arrayWithHoles$5(e)||_iterableToArrayLimit$5(e,t)||_unsupportedIterableToArray$5(e,t)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$5(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$5(e,t):void 0}}function _arrayLikeToArray$5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$5(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$5(e){if(Array.isArray(e))return e}function PanoEffect(){var e=_slicedToArray$5(React$b.useState(null),2),t=e[0],r=e[1],n=(0,_hooks$8.useFiveInstance)(),i=React$b.useRef(null),o=_slicedToArray$5(React$b.useState(null),2),a=o[0],s=o[1],c=React$b.useRef(),u=(0,_hooks$8.useController)(),l=(0,_hooks$8.useFiveProject2d)(),f=function(){i.current&&i.current.dispose()};return React$b.useEffect((function(){var e=function(e){var t=e.start,o=e.end,a=_slicedToArray$5(e.data.twoVertexs,2),u=a[0],h=a[1],p=new _three$3.Vector3(u.x,u.y,u.z),d=new _three$3.Vector3(h.x,h.y,h.z);i.current=(0,_lineAnime.default)(n,p.clone(),d.clone()),i.current.play();var m=p.lerp(d,.5),g=p.distanceTo(d),v=l(m);if(v){var y=v.x,b=v.y;r({center:m,distance:g}),s({left:y,top:b}),c.current=setTimeout((function(){r(null),s(null),f()}),o-t)}};return u.on(_VreoUnit$5.VreoKeyframeEnum.PanoEffect,e),function(){u.off(_VreoUnit$5.VreoKeyframeEnum.PanoEffect,e),c.current&&clearTimeout(c.current),f()}}),[u]),React$b.useEffect((function(){var e=function(){if(null!=t&&t.center){var e=t.center,r=e.x,n=e.y,i=e.z,o=l(new _three$3.Vector3(r,n,i));if(o){var a=o.x,c=o.y;s({left:a,top:c})}}};return n.on("currentStateChange",e),function(){n.off("currentStateChange",e)}}),[null==t?void 0:t.center]),React$b.createElement(React$b.Fragment,null,React$b.createElement("div",{className:(0,_classnames$6.default)("PanoEffect",{"PanoEffect--notHidden":t}),style:{left:((null==a?void 0:a.left)||0)+"px",top:((null==a?void 0:a.top)||0)+"px"}},(null==t?void 0:t.distance.toFixed(4))+"m"))}var PanoTag$1={};function _typeof$h(e){return _typeof$h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$h(e)}Object.defineProperty(PanoTag$1,"__esModule",{value:!0}),PanoTag$1.PanoTag=PanoTag;var _classnames$5=_interopRequireDefault$e(classnames.exports),React$a=_interopRequireWildcard$g(react$2.exports),_three$2=require$$4,_hooks$7=hooks,_VreoUnit$4=VreoUnit;function _getRequireWildcardCache$g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$g=function(e){return e?r:t})(e)}function _interopRequireWildcard$g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$h(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _interopRequireDefault$e(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray$4(e,t){return _arrayWithHoles$4(e)||_iterableToArrayLimit$4(e,t)||_unsupportedIterableToArray$4(e,t)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$4(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$4(e,t):void 0}}function _arrayLikeToArray$4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$4(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$4(e){if(Array.isArray(e))return e}function PanoTag(){var e=_slicedToArray$4(React$a.useState(null),2),t=e[0],r=e[1],n=_slicedToArray$4(React$a.useState(null),2),i=n[0],o=n[1],a=React$a.useRef(),s=(0,_hooks$7.useController)(),c=(0,_hooks$7.useFiveInstance)(),u=(0,_hooks$7.useFiveProject2d)();React$a.useEffect((function(){var e;if(!1!==(null===(e=s.configs)||void 0===e?void 0:e.keyframeMap.PanoTag)){var t=function(e){var t=e.start,n=e.end,i=e.data,s=i.vertex,c=i.vertex,l=c.x,f=c.y,h=c.z,p=u(new _three$2.Vector3(l,f,h));if(p){var d=p.x,m=p.y;r({vertex:s,text:i.text||_VreoUnit$4.PanoTagEnum.Text,type:i.type,imgUrl:i.imgUrl}),o({left:d,top:m}),a.current=setTimeout((function(){r(null),o(null)}),n-t)}};return s.on(_VreoUnit$4.VreoKeyframeEnum.PanoTag,t),function(){s.off(_VreoUnit$4.VreoKeyframeEnum.PanoTag,t),a.current&&clearTimeout(a.current)}}}),[s]),React$a.useEffect((function(){var e=function(){if(null!=t&&t.vertex){var e=t.vertex,r=e.x,n=e.y,i=e.z,a=u(new _three$2.Vector3(r,n,i));if(a){var s=a.x,c=a.y;o({left:s,top:c})}}};return c.on("currentStateChange",e),function(){c.off("currentStateChange",e)}}),[null==t?void 0:t.vertex]);var l=function(){if(t)return t.type===_VreoUnit$4.PanoTagEnum.Text?React$a.createElement(React$a.Fragment,null,React$a.createElement("span",null,t.text)):t.type===_VreoUnit$4.PanoTagEnum.Image?React$a.createElement(React$a.Fragment,null,React$a.createElement("img",{className:"PanoTag-img",src:t.imgUrl,alt:t.text||""}),React$a.createElement("span",{className:"PanoTag-txt"},t.text)):void 0}();return React$a.createElement(React$a.Fragment,null,React$a.createElement("div",{className:(0,_classnames$5.default)("PanoTag",{"PanoTag--notHidden":t}),style:{left:((null==i?void 0:i.left)||0)+"px",top:((null==i?void 0:i.top)||0)+"px"}},React$a.createElement("div",{className:"PanoTag-point"}),React$a.createElement("div",{className:"PanoTag-content"},React$a.createElement("span",{className:"PanoTag-linewrap"},React$a.createElement("span",{className:"PanoTag-slashline"}),React$a.createElement("span",{className:"PanoTag-straightline"})),React$a.createElement("div",{onClick:function(){null!=t&&t.imgUrl},className:"PanoTag-box PanoTag-box--"+((null==t?void 0:t.type)||"")},l))))}var PanoTextLabel$1={};function _typeof$g(e){return _typeof$g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$g(e)}Object.defineProperty(PanoTextLabel$1,"__esModule",{value:!0}),PanoTextLabel$1.PanoTextLabel=PanoTextLabel;var _classnames$4=_interopRequireDefault$d(classnames.exports),React$9=_interopRequireWildcard$f(react$2.exports),_three$1=require$$4,_VreoUnit$3=VreoUnit,_hooks$6=hooks;function _getRequireWildcardCache$f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$f=function(e){return e?r:t})(e)}function _interopRequireWildcard$f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$g(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _interopRequireDefault$d(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray$3(e,t){return _arrayWithHoles$3(e)||_iterableToArrayLimit$3(e,t)||_unsupportedIterableToArray$3(e,t)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$3(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$3(e,t):void 0}}function _arrayLikeToArray$3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$3(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$3(e){if(Array.isArray(e))return e}function PanoTextLabel(){var e=_slicedToArray$3(React$9.useState(null),2),t=e[0],r=e[1],n=React$9.useRef(),i=(0,_hooks$6.useController)(),o=(0,_hooks$6.useFiveProject2d)();return React$9.useEffect((function(){var e;if(!1!==(null===(e=i.configs)||void 0===e?void 0:e.keyframeMap.PanoTextLabel)){var t=function(e){var t=e.start,i=e.end,a=e.data,s=a.vertex,c=s.x,u=s.y,l=s.z,f=o(new _three$1.Vector3(c,u,l));if(f){var h=f.x,p=f.y;Object.assign(window,{$PanoTextLabel:{setState:r}}),r({left:h,top:p,text:a.text||"",fontSize:a.fontSize||16}),n.current=setTimeout((function(){return r(null)}),i-t)}};return i.on(_VreoUnit$3.VreoKeyframeEnum.PanoTextLabel,t),Object.assign(window,{$panoTextLabel:{setState:r}}),function(){i.off(_VreoUnit$3.VreoKeyframeEnum.PanoTextLabel,t),n.current&&clearTimeout(n.current)}}}),[i]),React$9.createElement("div",{className:(0,_classnames$4.default)("PanoTextLabel",{"PanoTextLabel--notHidden":t}),style:{left:((null==t?void 0:t.left)||0)+"px",top:((null==t?void 0:t.top)||0)+"px"}},React$9.createElement("div",{className:"PanoTextLabel-wrapper"},React$9.createElement("div",{style:{fontSize:"".concat((null==t?void 0:t.fontSize)||16,"px")},className:"PanoText-innerText"},(null==t?void 0:t.text)||"")))}var Prompter$1={};function _extends$1(){return _extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function _setPrototypeOf$2(e,t){return _setPrototypeOf$2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf$2(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf$2(e,t)}function hasClass(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}function addClass(e,t){e.classList?e.classList.add(t):hasClass(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function replaceClassName(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=replaceClassName(e.className,t):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",t))}var config={disabled:!1},TransitionGroupContext=React$g.createContext(null),UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var i,o=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(i=EXITED,n.appearStatus=ENTERING):i=ENTERED:i=t.unmountOnExit||t.mountOnEnter?UNMOUNTED:EXITED,n.state={status:i},n.nextCallback=null,n}_inheritsLoose(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===UNMOUNTED?{status:EXITED}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==ENTERING&&r!==ENTERED&&(t=ENTERING):r!==ENTERING&&r!==ENTERED||(t=EXITING)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===ENTERING?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[ReactDOM$1.findDOMNode(this),n],o=i[0],a=i[1],s=this.getTimeouts(),c=n?s.appear:s.enter;!e&&!r||config.disabled?this.safeSetState({status:ENTERED},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:ENTERING},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:ENTERED},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:ReactDOM$1.findDOMNode(this);t&&!config.disabled?(this.props.onExit(n),this.safeSetState({status:EXITING},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:EXITED},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:EXITED},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:ReactDOM$1.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===UNMOUNTED)return null;var t=this.props,r=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var n=_objectWithoutPropertiesLoose(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$g.createElement(TransitionGroupContext.Provider,{value:null},"function"==typeof r?r(e,n):React$g.cloneElement(React$g.Children.only(r),n))},t}(React$g.Component);function noop$1(){}Transition.contextType=TransitionGroupContext,Transition.propTypes={},Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$1,onEntering:noop$1,onEntered:noop$1,onExit:noop$1,onExiting:noop$1,onExited:noop$1},Transition.UNMOUNTED=UNMOUNTED,Transition.EXITED=EXITED,Transition.ENTERING=ENTERING,Transition.ENTERED=ENTERED,Transition.EXITING=EXITING;var Transition$1=Transition,_addClass=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return addClass(e,t)}))},removeClass=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return removeClass$1(e,t)}))},CSSTransition=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,i=n?""+(n&&r?r+"-":"")+e:r[e];return{baseClassName:i,activeClassName:n?i+"-active":r[e+"Active"],doneClassName:n?i+"-done":r[e+"Done"]}},t}_inheritsLoose(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&i&&(n+=" "+i),"active"===r&&e&&e.scrollTop,n&&(this.appliedClasses[t][r]=n,_addClass(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,i=r.active,o=r.done;this.appliedClasses[t]={},n&&removeClass(e,n),i&&removeClass(e,i),o&&removeClass(e,o)},r.render=function(){var e=this.props;e.classNames;var t=_objectWithoutPropertiesLoose(e,["classNames"]);return React$g.createElement(Transition$1,_extends$1({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(React$g.Component);CSSTransition.defaultProps={classNames:""},CSSTransition.propTypes={};var CSSTransition$1=CSSTransition;function _assertThisInitialized$2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function getChildMapping(e,t){var r=Object.create(null);return e&&react$2.exports.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return t&&react$2.exports.isValidElement(e)?t(e):e}(e)})),r}function mergeChildMappings(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var c in t){if(i[c])for(n=0;n<i[c].length;n++){var u=i[c][n];s[i[c][n]]=r(u)}s[c]=r(c)}for(n=0;n<o.length;n++)s[o[n]]=r(o[n]);return s}function getProp(e,t,r){return null!=r[t]?r[t]:e.props[t]}function getInitialChildMapping(e,t){return getChildMapping(e.children,(function(r){return react$2.exports.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:getProp(r,"appear",e),enter:getProp(r,"enter",e),exit:getProp(r,"exit",e)})}))}function getNextChildMapping(e,t,r){var n=getChildMapping(e.children),i=mergeChildMappings(t,n);return Object.keys(i).forEach((function(o){var a=i[o];if(react$2.exports.isValidElement(a)){var s=o in t,c=o in n,u=t[o],l=react$2.exports.isValidElement(u)&&!u.props.in;!c||s&&!l?c||!s||l?c&&s&&react$2.exports.isValidElement(u)&&(i[o]=react$2.exports.cloneElement(a,{onExited:r.bind(null,a),in:u.props.in,exit:getProp(a,"exit",e),enter:getProp(a,"enter",e)})):i[o]=react$2.exports.cloneElement(a,{in:!1}):i[o]=react$2.exports.cloneElement(a,{onExited:r.bind(null,a),in:!0,exit:getProp(a,"exit",e),enter:getProp(a,"enter",e)})}})),i}var values$1=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},defaultProps={component:"div",childFactory:function(e){return e}},TransitionGroup=function(e){function t(t,r){var n,i=(n=e.call(this,t,r)||this).handleExited.bind(_assertThisInitialized$2(n));return n.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},n}_inheritsLoose(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r=t.children,n=t.handleExited;return{children:t.firstRender?getInitialChildMapping(e,n):getNextChildMapping(e,r,n),firstRender:!1}},r.handleExited=function(e,t){var r=getChildMapping(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=_extends$1({},t.children);return delete r[e.key],{children:r}})))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,n=_objectWithoutPropertiesLoose(e,["component","childFactory"]),i=this.state.contextValue,o=values$1(this.state.children).map(r);return delete n.appear,delete n.enter,delete n.exit,null===t?React$g.createElement(TransitionGroupContext.Provider,{value:i},o):React$g.createElement(TransitionGroupContext.Provider,{value:i},React$g.createElement(t,n,o))},t}(React$g.Component);TransitionGroup.propTypes={},TransitionGroup.defaultProps=defaultProps;var TransitionGroup$1=TransitionGroup,ReplaceTransition=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).handleEnter=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onEnter",0,r)},t.handleEntering=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onEntering",0,r)},t.handleEntered=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onEntered",0,r)},t.handleExit=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onExit",1,r)},t.handleExiting=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onExiting",1,r)},t.handleExited=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.handleLifecycle("onExited",1,r)},t}_inheritsLoose(t,e);var r=t.prototype;return r.handleLifecycle=function(e,t,r){var n,i=this.props.children,o=React$g.Children.toArray(i)[t];if(o.props[e]&&(n=o.props)[e].apply(n,r),this.props[e]){var a=o.props.nodeRef?void 0:ReactDOM$1.findDOMNode(this);this.props[e](a)}},r.render=function(){var e=this.props,t=e.children,r=e.in,n=_objectWithoutPropertiesLoose(e,["children","in"]),i=React$g.Children.toArray(t),o=i[0],a=i[1];return delete n.onEnter,delete n.onEntering,delete n.onEntered,delete n.onExit,delete n.onExiting,delete n.onExited,React$g.createElement(TransitionGroup$1,n,r?React$g.cloneElement(o,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):React$g.cloneElement(a,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(React$g.Component);ReplaceTransition.propTypes={};var ReplaceTransition$1=ReplaceTransition,_leaveRenders,_enterRenders;function areChildrenDifferent(e,t){return e!==t&&(!React$g.isValidElement(e)||!React$g.isValidElement(t)||null==e.key||e.key!==t.key)}var modes={out:"out-in",in:"in-out"},callHook=function(e,t,r){return function(){var n;e.props[t]&&(n=e.props)[t].apply(n,arguments),r()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(e){var t=e.current,r=e.changeState;return React$g.cloneElement(t,{in:!1,onExited:callHook(t,"onExited",(function(){r(ENTERING,null)}))})},_leaveRenders[modes.in]=function(e){var t=e.current,r=e.changeState,n=e.children;return[t,React$g.cloneElement(n,{in:!0,onEntered:callHook(n,"onEntered",(function(){r(ENTERING)}))})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(e){var t=e.children,r=e.changeState;return React$g.cloneElement(t,{in:!0,onEntered:callHook(t,"onEntered",(function(){r(ENTERED,React$g.cloneElement(t,{in:!0}))}))})},_enterRenders[modes.in]=function(e){var t=e.current,r=e.children,n=e.changeState;return[React$g.cloneElement(t,{in:!1,onExited:callHook(t,"onExited",(function(){n(ENTERED,React$g.cloneElement(r,{in:!0}))}))}),React$g.cloneElement(r,{in:!0})]},_enterRenders),SwitchTransition=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state={status:ENTERED,current:null},t.appeared=!1,t.changeState=function(e,r){void 0===r&&(r=t.state.current),t.setState({status:e,current:r})},t}_inheritsLoose(t,e);var r=t.prototype;return r.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===ENTERING&&e.mode===modes.in?{status:ENTERING}:t.current&&areChildrenDifferent(t.current,e.children)?{status:EXITING}:{current:React$g.cloneElement(e.children,{in:!0})}},r.render=function(){var e,t=this.props,r=t.children,n=t.mode,i=this.state,o=i.status,a=i.current,s={children:r,current:a,changeState:this.changeState,status:o};switch(o){case ENTERING:e=enterRenders[n](s);break;case EXITING:e=leaveRenders[n](s);break;case ENTERED:e=a}return React$g.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},e)},t}(React$g.Component);SwitchTransition.propTypes={},SwitchTransition.defaultProps={mode:modes.out};var SwitchTransition$1=SwitchTransition,esm=Object.freeze((_Object$freeze5={__proto__:null},_defineProperty3(_Object$freeze5,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze5,"CSSTransition",CSSTransition$1),_defineProperty3(_Object$freeze5,"ReplaceTransition",ReplaceTransition$1),_defineProperty3(_Object$freeze5,"SwitchTransition",SwitchTransition$1),_defineProperty3(_Object$freeze5,"TransitionGroup",TransitionGroup$1),_defineProperty3(_Object$freeze5,"Transition",Transition$1),_defineProperty3(_Object$freeze5,"config",config),_Object$freeze5)),require$$3$1=getAugmentedNamespace(esm);function _typeof$f(e){return _typeof$f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$f(e)}Object.defineProperty(Prompter$1,"__esModule",{value:!0}),Prompter$1.Prompter=Prompter;var React$8=_interopRequireWildcard$e(react$2.exports),_classnames$3=_interopRequireDefault$c(classnames.exports),_hooks$5=hooks,_reactTransitionGroup=require$$3$1,_VreoUnit$2=VreoUnit;function _interopRequireDefault$c(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache$e(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$e=function(e){return e?r:t})(e)}function _interopRequireWildcard$e(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$f(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$e(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$2(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}function Prompter(){var e=_slicedToArray$2(React$8.useState(""),2),t=e[0],r=e[1],n=_slicedToArray$2(React$8.useState(!0),2),i=n[0],o=n[1],a=React$8.useRef(null),s=(0,_hooks$5.useController)();return React$8.useEffect((function(){var e;if(!1!==(null===(e=s.configs)||void 0===e?void 0:e.keyframeMap.Prompter)){var t=function(e){var t=e.start,n=e.end,i=e.data;r(i.text),o(!1),a.current&&(clearTimeout(a.current),a.current=null),a.current=setTimeout((function(){o(!0),setTimeout((function(){return r("")}),500),a.current&&clearTimeout(a.current),a.current=null}),n-t)};return s.on(_VreoUnit$2.VreoKeyframeEnum.Prompter,t),function(){s.off(_VreoUnit$2.VreoKeyframeEnum.Prompter,t)}}}),[s]),React$8.createElement("div",{className:(0,_classnames$3.default)("vreo-prompter",{"vreo-prompter--hidden":i,"vreo-prompter--audio":s.isAudio})},t?React$8.createElement(_reactTransitionGroup.TransitionGroup,{className:"vreo-prompter-text"},React$8.createElement(_reactTransitionGroup.CSSTransition,{key:t,classNames:"vreo-prompter-text-transition",timeout:500,addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)}},React$8.createElement("div",{className:"vreo-prompter-innerText"},t))):void 0)}var UpdateVRPanorama$1={};function _typeof$e(e){return _typeof$e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$e(e)}Object.defineProperty(UpdateVRPanorama$1,"__esModule",{value:!0}),UpdateVRPanorama$1.UpdateVRPanorama=UpdateVRPanorama;var React$7=_interopRequireWildcard$d(react$2.exports),_five$2=five,_hooks$4=hooks,_VreoUnit$1=VreoUnit;function _getRequireWildcardCache$d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$d=function(e){return e?r:t})(e)}function _interopRequireWildcard$d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$e(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function UpdateVRPanorama(){var e=(0,_hooks$4.useController)(),t=(0,_hooks$4.useFiveInstance)();return React$7.useEffect((function(){var r=function(e){var r,n=e.data,i=n.panoIndex,o=n.images,a=JSON.parse(JSON.stringify(null===(r=t.work)||void 0===r?void 0:r.raw.work));a.panorama&&a.panorama.list&&a.panorama.list[i]?Object.assign(a.panorama.list[i],o):a.observers&&a.observers[i]&&a.observers[i].images&&Object.assign(a.observers[i].images,o);var s=(0,_five$2.parseWork)(a);t.load(s)};return e.on(_VreoUnit$1.VreoKeyframeEnum.UpdateVRPanorama,r),function(){e.off(_VreoUnit$1.VreoKeyframeEnum.UpdateVRPanorama,r)}}),[e]),React$7.createElement(React$7.Fragment,null)}var VideoEffect$1={};function _typeof$d(e){return _typeof$d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$d(e)}Object.defineProperty(VideoEffect$1,"__esModule",{value:!0}),VideoEffect$1.VideoEffect=VideoEffect;var _classnames$2=_interopRequireDefault$b(classnames.exports),React$6=_interopRequireWildcard$c(react$2.exports),_VreoUnit=VreoUnit,_hooks$3=hooks;function _getRequireWildcardCache$c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$c=function(e){return e?r:t})(e)}function _interopRequireWildcard$c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$d(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _interopRequireDefault$b(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep$2(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$2(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$2(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$2(o,n,i,a,s,"throw",e)}a(void 0)}))}}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$1(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var inlinePlay=function(e){if(e){e.addEventListener("canplaythrough",(function t(){e.removeEventListener("canplaythrough",t);try{e.play()}catch(r){}})),e.load()}},PI$1=Math.PI,PI_2$2=2*PI$1;function VideoEffect(){var e=React$6.useRef(null),t=React$6.useRef(),r=(0,_hooks$3.useController)(),n=React$6.useRef(),i=_slicedToArray$1(React$6.useState(!1),2),o=i[0],a=i[1],s=(0,_hooks$3.useFiveInstance)(),c=function(e){t.current&&(t.current.src=e)};return React$6.useEffect((function(){var e=function(){var e=_asyncToGenerator$2(regeneratorRuntime.mark((function e(r){var i,o,u,l,f,h,p,d,m,g,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.start,o=r.end,u=r.data,l=u.videoSrc,f=u.fov,h=u.direction,p=u.panoIndex,d=u.vector,m=function(){if(d)return[d.longitude,d.latitude];if(!h)return[0,0];var e=-Math.atan2(h.x,-h.z);return[e=(e%PI_2$2+PI_2$2)%PI_2$2,-Math.asin(h.y/1)]}(),g=_slicedToArray$1(m,2),v=g[0],y=g[1],s.setState({fov:f,panoIndex:p,longitude:v,latitude:y},!0),c(l),inlinePlay(t.current),a(!0),n.current=setTimeout((function(){var e,r;null!==(e=t.current)&&void 0!==e&&e.paused||(null===(r=t.current)||void 0===r||r.pause());a(!1),c("")}),o-i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.on(_VreoUnit.VreoKeyframeEnum.VideoEffect,e),function(){r.off(_VreoUnit.VreoKeyframeEnum.VideoEffect,e),n.current&&clearTimeout(n.current)}}),[r]),React$6.useEffect((function(){var n,i;if(e.current){var o=(null===(n=r.configs)||void 0===n||null===(i=n.videos)||void 0===i?void 0:i.videoEffect)||document.createElement("video");o.setAttribute("playsinline","true"),o.setAttribute("webkit-playsinline","true"),o.setAttribute("autoplay","true"),o.setAttribute("key","VideoEffect-video"),o.setAttribute("class","VideoEffect-video"),t.current=o,e.current.append(t.current),document.addEventListener("WeixinJSBridgeReady",(function(){var e;null===(e=t.current)||void 0===e||e.play()}),!1),e.current}}),[]),React$6.createElement("div",{ref:e,className:(0,_classnames$2.default)("VideoEffect",{"VideoEffect--visible":o})})}var VideoAgent$1={},VideoAgentScene$1={},VideoAgentMesh$1={},Preloader$1={};Object.defineProperty(Preloader$1,"__esModule",{value:!0}),Preloader$1.Preloader=void 0;var Preloader={blob:function(e){var t=function(){return null};return new Promise((function(r,n){var i=new XMLHttpRequest,o=function(){i.ontimeout=t,i.onreadystatechange=t,i.onprogress=t,i.onabort=t};i.ontimeout=function(){n(new Error("timeout")),o()},i.onreadystatechange=function(){4===i.readyState&&(0!==i.status||i.response)&&(200===i.status||0===i.status?(r(i.response),o()):(n(new Error("status:"+i.status)),o()))},i.open("GET",e,!0),i.responseType="blob",i.send(null)}))}};function _typeof$c(e){return _typeof$c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$c(e)}Preloader$1.Preloader=Preloader,Object.defineProperty(VideoAgentMesh$1,"__esModule",{value:!0}),VideoAgentMesh$1.VideoAgentMesh=void 0;var THREE$5=_interopRequireWildcard$b(require$$4),_Preloader=Preloader$1,_mobx$1=require$$5$1;function _getRequireWildcardCache$b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$b=function(e){return e?r:t})(e)}function _interopRequireWildcard$b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$c(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function asyncGeneratorStep$1(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator$1(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep$1(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep$1(o,n,i,a,s,"throw",e)}a(void 0)}))}}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return _setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf$1(e,t)}function _createSuper$3(e){var t=_isNativeReflectConstruct$3();return function(){var r,n=_getPrototypeOf$1(e);if(t){var i=_getPrototypeOf$1(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn$1(this,r)}}function _possibleConstructorReturn$1(e,t){if(t&&("object"===_typeof$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf$1(e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf$1(e)}var vertexShader="\nvarying vec2 vUv;\nvarying vec2 vColorUv;\nvarying vec2 vMaskUv;\nvoid main(){\n  vUv = uv;\n  vColorUv = vec2(uv.x / 2.0, uv.y);\n  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShaderTpl=function(){return"\nuniform int enable;\nuniform sampler2D map;\nvarying vec2 vUv;\nvarying vec2 vColorUv;\nvarying vec2 vMaskUv;\n\nvec3 hsv2rgb(vec3 c) {\n  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 rgb2hsv(vec3 c) {\n  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n  float d = q.x - min(q.w, q.y);\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);\n}\n\nvoid main(void) {\n  vec3 color = texture2D(map, vUv).xyz;\n  float amask = 1.0;\n\n  float ref = color.r;\n  if (ref < color.b) ref = color.b;\n  amask = color.g - ref + 0.1;\n  amask = smoothstep(0.1, 0.3, amask);\n  amask = 1.0 - amask;\n\n  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));\n  vec3 hsv = rgb2hsv(color);\n  float distance = abs(hsv.x - target.x);\n  if (distance < 0.15) {\n    hsv.y = 0.0;\n  }\n  color = hsv2rgb(hsv);\n\n  gl_FragColor = vec4(color.rgb, amask * float(enable));\n}\n"},cacheInstance={},VideoAgentMesh=function(e){_inherits$1(i,e);var t,r,n=_createSuper$3(i);function i(e,t,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(_classCallCheck$2(this,i),!s.videoInstance)if(cacheInstance.videoInstance)s.videoInstance=cacheInstance.videoInstance;else{var c=document.createElement("video");c.style.opacity="0",c.style.display="none",document.body.append(c),s.videoInstance=c,cacheInstance.videoInstance=c,c.playsInline=!0,c.controls=!1}var u=new THREE$5.PlaneGeometry(e,t,r,o),l=new THREE$5.VideoTexture(s.videoInstance),f=new THREE$5.ShaderMaterial({uniforms:{map:{value:l},enable:{value:0}},vertexShader:vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});if((a=n.call(this,u,f)).options=s,a.freeze=!1,a.paused=!0,cacheInstance.audioInstance)a.audioInstance=cacheInstance.audioInstance;else{var h=document.createElement("audio");h.crossOrigin="",h.muted=!1,h.setAttribute("playsinline","true"),h.setAttribute("webkit-playsinline","true"),h.setAttribute("autoplay","false"),h.setAttribute("style","display: none;"),document.body.appendChild(h),a.audioInstance=h,cacheInstance.audioInstance=h}(0,_mobx$1.makeObservable)(_assertThisInitialized$1(a),{paused:_mobx$1.observable});var p=function(e){return(0,_mobx$1.runInAction)((function(){return a.paused=e}))},d=function(){return p(!0)},m=function(){return p(!1)};return a.videoInstance.addEventListener("pause",d),a.videoInstance.addEventListener("play",m),a.$removeEventListener=function(){a.videoInstance.removeEventListener("pause",d),a.videoInstance.removeEventListener("play",m)},a}return _createClass$1(i,[{key:"videoInstance",get:function(){var e;return null!==(e=this.videoUrl)&&void 0!==e&&e.endsWith("mp3")?this.audioInstance:this.material.uniforms.map.value.image}},{key:"update",value:(r=_asyncToGenerator$1(regeneratorRuntime.mark((function e(t){var r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoUrl!==t){e.next=2;break}return e.abrupt("return");case 2:return this.videoUrl=t,this.freeze=!0,e.next=6,this.videoInstance.pause();case 6:return r=this.material.uniforms,this.videoInstance.muted=!0,e.t0=URL,e.next=11,_Preloader.Preloader.blob(this.videoUrl);case 11:return e.t1=e.sent,e.next=14,e.t0.createObjectURL.call(e.t0,e.t1);case 14:this.videoInstance.src=e.sent,this.videoInstance.setAttribute("data-src",this.videoUrl),n=function e(){var t;0!==i.videoInstance.currentTime&&(i.freeze=!1,i.videoInstance.muted=!1,r.enable.value=null!==(t=i.videoUrl)&&void 0!==t&&t.endsWith(".mp4")?1:0,i.videoInstance.removeEventListener("timeupdate",e,!1))},this.videoInstance.addEventListener("timeupdate",n,!1);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"play",value:(t=_asyncToGenerator$1(regeneratorRuntime.mark((function e(){var t,r=this,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=((t=n.length>0&&void 0!==n[0]?n[0]:"")||"").replace(/https*:/,"")){e.next=10;break}if(!this.videoUrl){e.next=8;break}return e.next=6,this.videoInstance.play();case 6:e.next=9;break;case 8:console.warn("警告：视频资源未初始化。");case 9:return e.abrupt("return",!0);case 10:if(t!==this.videoUrl){e.next=15;break}return this.videoInstance.currentTime=0,e.next=14,this.videoInstance.play();case 14:return e.abrupt("return",!0);case 15:return e.next=17,this.update(t);case 17:return this.videoInstance.pause(),e.next=20,new Promise((function(e){return setTimeout(_asyncToGenerator$1(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.videoInstance.currentTime=0,t.next=3,r.videoInstance.play();case 3:e(!0);case 4:case"end":return t.stop()}}),t)}))),20)}));case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"currentTime",get:function(){return 1e3*this.videoInstance.currentTime}},{key:"dispose",value:function(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}]),i}(THREE$5.Mesh);function _typeof$b(e){return _typeof$b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$b(e)}VideoAgentMesh$1.VideoAgentMesh=VideoAgentMesh,Object.defineProperty(VideoAgentScene$1,"__esModule",{value:!0}),VideoAgentScene$1.VideoAgentScene=void 0;var THREE$4=_interopRequireWildcard$a(require$$4),_VideoAgentMesh=VideoAgentMesh$1;function _getRequireWildcardCache$a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$a=function(e){return e?r:t})(e)}function _interopRequireWildcard$a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$b(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$a(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VideoAgentScene=function e(t){var r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_classCallCheck$1(this,e),_defineProperty(this,"scene",new THREE$4.Scene),_defineProperty(this,"camera",new THREE$4.OrthographicCamera(-240,240,135,-135)),_defineProperty(this,"renderer",new THREE$4.WebGLRenderer({alpha:!0})),_defineProperty(this,"run",(function(){!r.videoAgentMesh.paused&&!r.videoAgentMesh.freeze&&r.videoAgentMesh.currentTime>1e3&&r.renderer.render(r.scene,r.camera),requestAnimationFrame(r.run)})),_defineProperty(this,"dispose",(function(){var e;null===(e=r.videoAgentMesh)||void 0===e||e.dispose()})),this.container=t,this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);var i={width:t.offsetWidth,height:t.offsetHeight},o=this.renderer.domElement;o.classList.add("VideoAgent-canvas"),this.renderer.setSize(i.width*window.devicePixelRatio,i.height*window.devicePixelRatio),o.setAttribute("style","width: ".concat(i.width,"px;height: ").concat(i.height,"px;")),this.videoAgentMesh=new _VideoAgentMesh.VideoAgentMesh(480,270,1,1),n&&(t.append(o),this.scene.add(this.videoAgentMesh),this.run())};function _typeof$a(e){return _typeof$a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$a(e)}VideoAgentScene$1.VideoAgentScene=VideoAgentScene,Object.defineProperty(VideoAgent$1,"__esModule",{value:!0}),VideoAgent$1.VideoAgent=VideoAgent;var React$5=_interopRequireWildcard$9(react$2.exports),_hooks$2=hooks,_VideoAgentScene=VideoAgentScene$1;function _getRequireWildcardCache$9(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$9=function(e){return e?r:t})(e)}function _interopRequireWildcard$9(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$a(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$9(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function VideoAgent(e){var t=React$5.useRef(null),r=(0,_hooks$2.useController)();return React$5.useEffect((function(){if(!t.current)throw new Error("React 渲染异常，请稍后重试 ...");if(!r.videoAgentScene){var e=new _VideoAgentScene.VideoAgentScene(t.current);return r.videoAgentScene=e,function(){var e;r.dispose(),null===(e=r.videoAgentScene)||void 0===e||e.dispose()}}console.warn('"VideoAgentScene" 重复初始化，已被过滤 ...')}),[]),React$5.createElement("div",{className:"VideoAgent",onClick:function(){e.onClick&&e.onClick()},ref:t},React$5.createElement("div",{className:"VideoAgent-play"}))}function _typeof$9(e){return _typeof$9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$9(e)}Object.defineProperty(App$1,"__esModule",{value:!0}),App$1.App=App;var React$4=_interopRequireWildcard$8(react$2.exports),_classnames$1=_interopRequireDefault$a(classnames.exports),_mobxReact$1=require$$2,_hooks$1=hooks,_CameraMovement=CameraMovement$1,_InfoPanel=InfoPanel$1,_ModelVideo=ModelVideo$1,_PanoEffect=PanoEffect$1,_PanoTag=PanoTag$1,_PanoTextLabel=PanoTextLabel$1,_Prompter=Prompter$1,_UpdateVRPanorama=UpdateVRPanorama$1,_VideoEffect=VideoEffect$1,_VideoAgent=VideoAgent$1;function _interopRequireDefault$a(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache$8(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$8=function(e){return e?r:t})(e)}function _interopRequireWildcard$8(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$9(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$8(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var AppView=(0,_mobxReact$1.observer)((function(e){var t=e.controller;return React$4.createElement("div",{className:(0,_classnames$1.default)("vreo-panel",{"vreo-panel--hidden":!t.visible})},React$4.createElement("div",{className:"vreo-panel-inner"},React$4.createElement(_VideoAgent.VideoAgent,{onClick:function(){t.isAudio||(t.playing?t.setPlaying(!1):t.setPlaying(!0))}}),React$4.createElement(_Prompter.Prompter,null)))}));function App(){var e=(0,_hooks$1.useController)();return React$4.createElement(React$4.Fragment,null,React$4.createElement(React$4.Fragment,null,React$4.createElement(_CameraMovement.CameraMovement,null),React$4.createElement(_ModelVideo.ModelVideo,null),React$4.createElement(_UpdateVRPanorama.UpdateVRPanorama,null),React$4.createElement(_VideoEffect.VideoEffect,null),React$4.createElement(_PanoTag.PanoTag,null),React$4.createElement(_PanoTextLabel.PanoTextLabel,null),React$4.createElement(_InfoPanel.InfoPanel,null),React$4.createElement(_PanoEffect.PanoEffect,null)),React$4.createElement(AppView,{controller:e}))}var Drawer$1={};function _typeof$8(e){return _typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$8(e)}Object.defineProperty(Drawer$1,"__esModule",{value:!0}),Drawer$1.Drawer=Drawer;var React$3=_interopRequireWildcard$7(react$2.exports),_classnames=_interopRequireDefault$9(classnames.exports),_mobxReact=require$$2,_hooks=hooks;function _interopRequireDefault$9(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache$7(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$7=function(e){return e?r:t})(e)}function _interopRequireWildcard$7(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$8(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$7(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var DrawerView=(0,_mobxReact.observer)((function(e){var t,r=e.controller,n=function(){var e,t=null===(e=r.drawerConfig)||void 0===e?void 0:e.height;return t?"number"==typeof t?t+"px":t:"max-content"}();return React$3.createElement("div",{className:(0,_classnames.default)("vreo-drawer",{"vreo-drawer-visible":r.drawerConfig&&r.drawerConfig.content}),onClick:function(){return r.openDrawer(!1)}},React$3.createElement("div",{className:"vreo-drawer-inner",style:{height:n,maxHeight:"540px"}},(null===(t=r.drawerConfig)||void 0===t?void 0:t.content)||""))}));function Drawer(){var e=(0,_hooks.useController)();return React$3.createElement(DrawerView,{controller:e})}function _typeof$7(e){return _typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$7(e)}Object.defineProperty(Player$1,"__esModule",{value:!0}),Player$1.Player=void 0;var React$2=_interopRequireWildcard$6(react$2.exports),ReactDOM=_interopRequireWildcard$6(reactDom.exports),_five$1=five,_App=App$1,_Controller=Controller$3,_mobx=require$$5$1,_Drawer=Drawer$1;function _getRequireWildcardCache$6(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$6=function(e){return e?r:t})(e)}function _interopRequireWildcard$6(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$7(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$6(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function asyncGeneratorStep(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){asyncGeneratorStep(o,n,i,a,s,"next",e)}function s(e){asyncGeneratorStep(o,n,i,a,s,"throw",e)}a(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper$2(e){var t=_isNativeReflectConstruct$2();return function(){var r,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof$7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var Player=function(e){_inherits(n,e);var t,r=_createSuper$2(n);function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,n),(t=r.call(this)).controller=new _Controller.Controller,t.$five=t.controller.$five=e,!i.containter){var o=document.querySelector("#vreo-app")||document.createElement("div");ReactDOM.unmountComponentAtNode(o),o.setAttribute("id","vreo-app"),i.containter=o,document.body.append(o)}return t.configs=Object.freeze(Object.assign({keyframeMap:{}},i)),t.controller.configs=t.configs,ReactDOM.render(React$2.createElement(_Controller.ControllerContext.Provider,{value:t.controller},React$2.createElement(_App.App,null),React$2.createElement(_Drawer.Drawer,null)),i.containter),(0,_mobx.reaction)((function(){return t.controller.playing}),(function(e){t.emit(e?"playing":"paused")})),t}return _createClass(n,[{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,i,o,a=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:0,this.controller.visible){e.next=5;break}return this.controller.setVisible(!0),e.next=5,new Promise((function(e){setTimeout((function(){return e(!0)}),500)}));case 5:if(this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=t,null===(r=this.controller.videoInstance)||void 0===r||r.pause(),!t.video.url){e.next=13;break}return null!==(i=this.controller.videoAgentScene)&&void 0!==i&&i.videoAgentMesh.videoInstance&&(this.controller.videoAgentScene.videoAgentMesh.videoInstance.currentTime=n/1e3),e.next=12,null===(o=this.controller.videoAgentScene)||void 0===o?void 0:o.videoAgentMesh.play(t.video.url);case 12:this.play();case 13:return this.controller.run((function(e,t){return a.emit(e,t)})),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"paused",get:function(){return!this.controller.playing}},{key:"play",value:function(){return this.controller.playing||this.controller.setPlaying(!0),!0}},{key:"pause",value:function(){this.controller.setPlaying(!1)}},{key:"show",value:function(){this.controller.setVisible(!0)}},{key:"hide",value:function(){this.controller.setVisible(!1)}},{key:"dispose",value:function(){this.pause(),this.controller.dispose(),this.configs.containter&&ReactDOM.unmountComponentAtNode(this.configs.containter)}}]),n}(_five$1.Subscribe);function _typeof$6(e){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(e)}Player$1.Player=Player,console.log("\n\n┏━━━┓━━━━━━━━━┏┓━━━━━━━━━━━━━\n┃┏━┓┃━━━━━━━━━┃┃━━━━━━━━━━━━━\n┃┗━┛┃┏━━┓┏━━┓━┃┃━┏━━┓┏━━┓┏━━┓\n┃┏┓┏┛┃┏┓┃┗━┓┃━┃┃━┃━━┫┃┏┓┃┃┏┓┃\n┃┃┃┗┓┃┃━┫┃┗┛┗┓┃┗┓┣━━┃┃┃━┫┃┃━┫\n┗┛┗━┛┗━━┛┗━━━┛┗━┛┗━━┛┗━━┛┗━━┛\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ \n\n"),Object.defineProperty(react$1,"__esModule",{value:!0});var VreoProvider_1=exports("v",react$1.VreoProvider=void 0),useVreoAction_1=exports("e",react$1.useVreoAction=useVreoAction),useVreoEventCallback_1=exports("n",react$1.useVreoEventCallback=useVreoEventCallback),useVreoPausedState_1=exports("d",react$1.useVreoPausedState=useVreoPausedState),_react$1=react,React$1=_interopRequireWildcard$5(react$2.exports),_Player=Player$1;function _getRequireWildcardCache$5(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$5=function(e){return e?r:t})(e)}function _interopRequireWildcard$5(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$6(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$5(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var VreoContext=React$1.createContext(null),VreoProvider=function(e){var t=(0,_react$1.unsafe__useFiveInstance)(),r=_slicedToArray(React$1.useState(null),2),n=r[0],i=r[1],o=React$1.useRef(null);return React$1.useEffect((function(){return o.current=new _Player.Player(t),i(o.current),function(){var e;null===(e=o.current)||void 0===e||e.dispose()}}),[]),n?React$1.createElement(VreoContext.Provider,{value:n},e.children):React$1.createElement(React$1.Fragment,null)};function useVreoInstance(){var e=React$1.useContext(VreoContext);if(!e)throw new Error("VreoProvider never found.");return e}function useVreoAction(){var e=useVreoInstance(),t=React$1.useCallback((function(t,r){return e.load(t,r)}),[e]),r=React$1.useCallback((function(){return e.play()}),[e]);return{load:t,pause:React$1.useCallback((function(){return e.pause()}),[e]),show:React$1.useCallback((function(){return e.show()}),[e]),play:r,hide:React$1.useCallback((function(){return e.hide()}),[e]),dispose:React$1.useCallback((function(){return e.dispose()}),[e])}}function useVreoEventCallback(e,t,r){var n=useVreoInstance(),i=[n,e];void 0!==r&&(i=i.concat(r)),React$1.useEffect((function(){return n.on(e,t),function(){n.off(e,t)}}),i)}function useVreoPausedState(){var e=useVreoInstance(),t=_slicedToArray(React$1.useState(e.paused),2),r=t[0],n=t[1];return useVreoEventCallback("paused",(function(){return n(!0)})),useVreoEventCallback("playing",(function(){return n(!1)})),r}exports("v",VreoProvider_1=react$1.VreoProvider=VreoProvider);var TreasurePlugin$1={},check=function(e){return e&&e.Math==Math&&e},global$S=check("object"==("undefined"==typeof globalThis?"undefined":_typeof2(globalThis))&&globalThis)||check("object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window)||check("object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self)||check("object"==_typeof2(commonjsGlobal)&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$t=function(e){try{return!!e()}catch(t){return!0}},fails$s=fails$t,descriptors=!fails$s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),call$e=Function.prototype.call,functionCall=call$e.bind?call$e.bind(call$e):function(){return call$e.apply(call$e,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$1={}.propertyIsEnumerable,getOwnPropertyDescriptor$3=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$3&&!$propertyIsEnumerable$1.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$3(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable$1;var createPropertyDescriptor$4=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},FunctionPrototype$3=Function.prototype,bind$9=FunctionPrototype$3.bind,call$d=FunctionPrototype$3.call,callBind=bind$9&&bind$9.bind(call$d),functionUncurryThis=bind$9?function(e){return e&&callBind(call$d,e)}:function(e){return e&&function(){return call$d.apply(e,arguments)}},uncurryThis$z=functionUncurryThis,toString$b=uncurryThis$z({}.toString),stringSlice$5=uncurryThis$z("".slice),classofRaw$1=function(e){return stringSlice$5(toString$b(e),8,-1)},global$R=global$S,uncurryThis$y=functionUncurryThis,fails$r=fails$t,classof$a=classofRaw$1,Object$5=global$R.Object,split=uncurryThis$y("".split),indexedObject=fails$r((function(){return!Object$5("z").propertyIsEnumerable(0)}))?function(e){return"String"==classof$a(e)?split(e,""):Object$5(e)}:Object$5,global$Q=global$S,TypeError$g=global$Q.TypeError,requireObjectCoercible$7=function(e){if(null==e)throw TypeError$g("Can't call method on "+e);return e},IndexedObject$2=indexedObject,requireObjectCoercible$6=requireObjectCoercible$7,toIndexedObject$9=function(e){return IndexedObject$2(requireObjectCoercible$6(e))},isCallable$m=function(e){return"function"==typeof e},isCallable$l=isCallable$m,isObject$i=function(e){return"object"==_typeof2(e)?null!==e:isCallable$l(e)},global$P=global$S,isCallable$k=isCallable$m,aFunction=function(e){return isCallable$k(e)?e:void 0},getBuiltIn$8=function(e,t){return arguments.length<2?aFunction(global$P[e]):global$P[e]&&global$P[e][t]},uncurryThis$x=functionUncurryThis,objectIsPrototypeOf=uncurryThis$x({}.isPrototypeOf),getBuiltIn$7=getBuiltIn$8,engineUserAgent=getBuiltIn$7("navigator","userAgent")||"",global$O=global$S,userAgent$6=engineUserAgent,process$4=global$O.process,Deno=global$O.Deno,versions=process$4&&process$4.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent$6&&(match=userAgent$6.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$6.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION$3=engineV8Version,fails$q=fails$t,nativeSymbol=!!Object.getOwnPropertySymbols&&!fails$q((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41})),NATIVE_SYMBOL$1=nativeSymbol,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==_typeof2(Symbol.iterator),global$N=global$S,getBuiltIn$6=getBuiltIn$8,isCallable$j=isCallable$m,isPrototypeOf$3=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,Object$4=global$N.Object,isSymbol$3=USE_SYMBOL_AS_UID$1?function(e){return"symbol"==_typeof2(e)}:function(e){var t=getBuiltIn$6("Symbol");return isCallable$j(t)&&isPrototypeOf$3(t.prototype,Object$4(e))},global$M=global$S,String$6=global$M.String,tryToString$4=function(e){try{return String$6(e)}catch(t){return"Object"}},global$L=global$S,isCallable$i=isCallable$m,tryToString$3=tryToString$4,TypeError$f=global$L.TypeError,aCallable$7=function(e){if(isCallable$i(e))return e;throw TypeError$f(tryToString$3(e)+" is not a function")},aCallable$6=aCallable$7,getMethod$4=function(e,t){var r=e[t];return null==r?void 0:aCallable$6(r)},global$K=global$S,call$c=functionCall,isCallable$h=isCallable$m,isObject$h=isObject$i,TypeError$e=global$K.TypeError,ordinaryToPrimitive$1=function(e,t){var r,n;if("string"===t&&isCallable$h(r=e.toString)&&!isObject$h(n=call$c(r,e)))return n;if(isCallable$h(r=e.valueOf)&&!isObject$h(n=call$c(r,e)))return n;if("string"!==t&&isCallable$h(r=e.toString)&&!isObject$h(n=call$c(r,e)))return n;throw TypeError$e("Can't convert object to primitive value")},shared$4={exports:{}},global$J=global$S,defineProperty$8=Object.defineProperty,setGlobal$3=function(e,t){try{defineProperty$8(global$J,e,{value:t,configurable:!0,writable:!0})}catch(r){global$J[e]=t}return t},global$I=global$S,setGlobal$2=setGlobal$3,SHARED="__core-js_shared__",store$3=global$I[SHARED]||setGlobal$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$4.exports=function(e,t){return store$2[e]||(store$2[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var global$H=global$S,requireObjectCoercible$5=requireObjectCoercible$7,Object$3=global$H.Object,toObject$8=function(e){return Object$3(requireObjectCoercible$5(e))},uncurryThis$w=functionUncurryThis,toObject$7=toObject$8,hasOwnProperty=uncurryThis$w({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(e,t){return hasOwnProperty(toObject$7(e),t)},uncurryThis$v=functionUncurryThis,id$2=0,postfix=Math.random(),toString$a=uncurryThis$v(1..toString),uid$3=function(e){return"Symbol("+(void 0===e?"":e)+")_"+toString$a(++id$2+postfix,36)},global$G=global$S,shared$3=shared$4.exports,hasOwn$d=hasOwnProperty_1,uid$2=uid$3,NATIVE_SYMBOL=nativeSymbol,USE_SYMBOL_AS_UID=useSymbolAsUid,WellKnownSymbolsStore=shared$3("wks"),Symbol$1=global$G.Symbol,symbolFor=Symbol$1&&Symbol$1.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$2,wellKnownSymbol$k=function(e){if(!hasOwn$d(WellKnownSymbolsStore,e)||!NATIVE_SYMBOL&&"string"!=typeof WellKnownSymbolsStore[e]){var t="Symbol."+e;NATIVE_SYMBOL&&hasOwn$d(Symbol$1,e)?WellKnownSymbolsStore[e]=Symbol$1[e]:WellKnownSymbolsStore[e]=USE_SYMBOL_AS_UID&&symbolFor?symbolFor(t):createWellKnownSymbol(t)}return WellKnownSymbolsStore[e]},global$F=global$S,call$b=functionCall,isObject$g=isObject$i,isSymbol$2=isSymbol$3,getMethod$3=getMethod$4,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$j=wellKnownSymbol$k,TypeError$d=global$F.TypeError,TO_PRIMITIVE=wellKnownSymbol$j("toPrimitive"),toPrimitive$2=function(e,t){if(!isObject$g(e)||isSymbol$2(e))return e;var r,n=getMethod$3(e,TO_PRIMITIVE);if(n){if(void 0===t&&(t="default"),r=call$b(n,e,t),!isObject$g(r)||isSymbol$2(r))return r;throw TypeError$d("Can't convert object to primitive value")}return void 0===t&&(t="number"),ordinaryToPrimitive(e,t)},toPrimitive$1=toPrimitive$2,isSymbol$1=isSymbol$3,toPropertyKey$3=function(e){var t=toPrimitive$1(e,"string");return isSymbol$1(t)?t:t+""},global$E=global$S,isObject$f=isObject$i,document$3=global$E.document,EXISTS$1=isObject$f(document$3)&&isObject$f(document$3.createElement),documentCreateElement$2=function(e){return EXISTS$1?document$3.createElement(e):{}},DESCRIPTORS$e=descriptors,fails$p=fails$t,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$e&&!fails$p((function(){return 7!=Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$d=descriptors,call$a=functionCall,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,createPropertyDescriptor$3=createPropertyDescriptor$4,toIndexedObject$8=toIndexedObject$9,toPropertyKey$2=toPropertyKey$3,hasOwn$c=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$d?$getOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject$8(e),t=toPropertyKey$2(t),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor(e,t)}catch(r){}if(hasOwn$c(e,t))return createPropertyDescriptor$3(!call$a(propertyIsEnumerableModule$1.f,e,t),e[t])};var objectDefineProperty={},global$D=global$S,isObject$e=isObject$i,String$5=global$D.String,TypeError$c=global$D.TypeError,anObject$f=function(e){if(isObject$e(e))return e;throw TypeError$c(String$5(e)+" is not an object")},global$C=global$S,DESCRIPTORS$c=descriptors,IE8_DOM_DEFINE=ie8DomDefine,anObject$e=anObject$f,toPropertyKey$1=toPropertyKey$3,TypeError$b=global$C.TypeError,$defineProperty=Object.defineProperty;objectDefineProperty.f=DESCRIPTORS$c?$defineProperty:function(e,t,r){if(anObject$e(e),t=toPropertyKey$1(t),anObject$e(r),IE8_DOM_DEFINE)try{return $defineProperty(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError$b("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var DESCRIPTORS$b=descriptors,definePropertyModule$5=objectDefineProperty,createPropertyDescriptor$2=createPropertyDescriptor$4,createNonEnumerableProperty$7=DESCRIPTORS$b?function(e,t,r){return definePropertyModule$5.f(e,t,createPropertyDescriptor$2(1,r))}:function(e,t,r){return e[t]=r,e},redefine$a={exports:{}},uncurryThis$u=functionUncurryThis,isCallable$g=isCallable$m,store$1=sharedStore,functionToString$1=uncurryThis$u(Function.toString);isCallable$g(store$1.inspectSource)||(store$1.inspectSource=function(e){return functionToString$1(e)});var inspectSource$4=store$1.inspectSource,global$B=global$S,isCallable$f=isCallable$m,inspectSource$3=inspectSource$4,WeakMap$2=global$B.WeakMap,nativeWeakMap=isCallable$f(WeakMap$2)&&/native code/.test(inspectSource$3(WeakMap$2)),shared$2=shared$4.exports,uid$1=uid$3,keys$1=shared$2("keys"),sharedKey$3=function(e){return keys$1[e]||(keys$1[e]=uid$1(e))},hiddenKeys$5={},NATIVE_WEAK_MAP$1=nativeWeakMap,global$A=global$S,uncurryThis$t=functionUncurryThis,isObject$d=isObject$i,createNonEnumerableProperty$6=createNonEnumerableProperty$7,hasOwn$b=hasOwnProperty_1,shared$1=sharedStore,sharedKey$2=sharedKey$3,hiddenKeys$4=hiddenKeys$5,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$a=global$A.TypeError,WeakMap$1=global$A.WeakMap,set$1,get,has,enforce=function(e){return has(e)?get(e):set$1(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$d(t)||(r=get(t)).type!==e)throw TypeError$a("Incompatible receiver, "+e+" required");return r}};if(NATIVE_WEAK_MAP$1||shared$1.state){var store=shared$1.state||(shared$1.state=new WeakMap$1),wmget=uncurryThis$t(store.get),wmhas=uncurryThis$t(store.has),wmset=uncurryThis$t(store.set);set$1=function(e,t){if(wmhas(store,e))throw new TypeError$a(OBJECT_ALREADY_INITIALIZED);return t.facade=e,wmset(store,e,t),t},get=function(e){return wmget(store,e)||{}},has=function(e){return wmhas(store,e)}}else{var STATE=sharedKey$2("state");hiddenKeys$4[STATE]=!0,set$1=function(e,t){if(hasOwn$b(e,STATE))throw new TypeError$a(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$6(e,STATE,t),t},get=function(e){return hasOwn$b(e,STATE)?e[STATE]:{}},has=function(e){return hasOwn$b(e,STATE)}}var internalState={set:set$1,get:get,has:has,enforce:enforce,getterFor:getterFor},DESCRIPTORS$a=descriptors,hasOwn$a=hasOwnProperty_1,FunctionPrototype$2=Function.prototype,getDescriptor=DESCRIPTORS$a&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$a(FunctionPrototype$2,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$a||DESCRIPTORS$a&&getDescriptor(FunctionPrototype$2,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},global$z=global$S,isCallable$e=isCallable$m,hasOwn$9=hasOwnProperty_1,createNonEnumerableProperty$5=createNonEnumerableProperty$7,setGlobal$1=setGlobal$3,inspectSource$2=inspectSource$4,InternalStateModule$5=internalState,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,getInternalState$4=InternalStateModule$5.get,enforceInternalState$1=InternalStateModule$5.enforce,TEMPLATE=String(String).split("String");(redefine$a.exports=function(e,t,r,n){var i,o=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet,c=n&&void 0!==n.name?n.name:t;isCallable$e(r)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hasOwn$9(r,"name")||CONFIGURABLE_FUNCTION_NAME$1&&r.name!==c)&&createNonEnumerableProperty$5(r,"name",c),(i=enforceInternalState$1(r)).source||(i.source=TEMPLATE.join("string"==typeof c?c:""))),e!==global$z?(o?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=r:createNonEnumerableProperty$5(e,t,r)):a?e[t]=r:setGlobal$1(t,r)})(Function.prototype,"toString",(function(){return isCallable$e(this)&&getInternalState$4(this).source||inspectSource$2(this)}));var objectGetOwnPropertyNames={},ceil=Math.ceil,floor$3=Math.floor,toIntegerOrInfinity$6=function(e){var t=+e;return t!=t||0===t?0:(t>0?floor$3:ceil)(t)},toIntegerOrInfinity$5=toIntegerOrInfinity$6,max$3=Math.max,min$2=Math.min,toAbsoluteIndex$3=function(e,t){var r=toIntegerOrInfinity$5(e);return r<0?max$3(r+t,0):min$2(r,t)},toIntegerOrInfinity$4=toIntegerOrInfinity$6,min$1=Math.min,toLength$2=function(e){return e>0?min$1(toIntegerOrInfinity$4(e),9007199254740991):0},toLength$1=toLength$2,lengthOfArrayLike$7=function(e){return toLength$1(e.length)},toIndexedObject$7=toIndexedObject$9,toAbsoluteIndex$2=toAbsoluteIndex$3,lengthOfArrayLike$6=lengthOfArrayLike$7,createMethod$4=function(e){return function(t,r,n){var i,o=toIndexedObject$7(t),a=lengthOfArrayLike$6(o),s=toAbsoluteIndex$2(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},arrayIncludes={includes:createMethod$4(!0),indexOf:createMethod$4(!1)},uncurryThis$s=functionUncurryThis,hasOwn$8=hasOwnProperty_1,toIndexedObject$6=toIndexedObject$9,indexOf$1=arrayIncludes.indexOf,hiddenKeys$3=hiddenKeys$5,push$5=uncurryThis$s([].push),objectKeysInternal=function(e,t){var r,n=toIndexedObject$6(e),i=0,o=[];for(r in n)!hasOwn$8(hiddenKeys$3,r)&&hasOwn$8(n,r)&&push$5(o,r);for(;t.length>i;)hasOwn$8(n,r=t[i++])&&(~indexOf$1(o,r)||push$5(o,r));return o},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$2=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys$2)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$5=getBuiltIn$8,uncurryThis$r=functionUncurryThis,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,anObject$d=anObject$f,concat$3=uncurryThis$r([].concat),ownKeys$1=getBuiltIn$5("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule$1.f(anObject$d(e)),r=getOwnPropertySymbolsModule$1.f;return r?concat$3(t,r(e)):t},hasOwn$7=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$4=objectDefineProperty,copyConstructorProperties$1=function(e,t,r){for(var n=ownKeys(t),i=definePropertyModule$4.f,o=getOwnPropertyDescriptorModule.f,a=0;a<n.length;a++){var s=n[a];hasOwn$7(e,s)||r&&hasOwn$7(r,s)||i(e,s,o(t,s))}},fails$o=fails$t,isCallable$d=isCallable$m,replacement=/#|\.prototype\./,isForced$4=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&(isCallable$d(t)?fails$o(t):!!t)},normalize=isForced$4.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$4.data={},NATIVE=isForced$4.NATIVE="N",POLYFILL=isForced$4.POLYFILL="P",isForced_1=isForced$4,global$y=global$S,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$4=createNonEnumerableProperty$7,redefine$9=redefine$a.exports,setGlobal=setGlobal$3,copyConstructorProperties=copyConstructorProperties$1,isForced$3=isForced_1,_export=function(e,t){var r,n,i,o,a,s=e.target,c=e.global,u=e.stat;if(r=c?global$y:u?global$y[s]||setGlobal(s,{}):(global$y[s]||{}).prototype)for(n in t){if(o=t[n],i=e.noTargetGet?(a=getOwnPropertyDescriptor$2(r,n))&&a.value:r[n],!isForced$3(c?n:s+(u?".":"#")+n,e.forced)&&void 0!==i){if(_typeof2(o)==_typeof2(i))continue;copyConstructorProperties(o,i)}(e.sham||i&&i.sham)&&createNonEnumerableProperty$4(o,"sham",!0),redefine$9(r,n,o,e)}},$$q=_export,DESCRIPTORS$9=descriptors,objectDefinePropertyModule=objectDefineProperty;$$q({target:"Object",stat:!0,forced:!DESCRIPTORS$9,sham:!DESCRIPTORS$9},{defineProperty:objectDefinePropertyModule.f});var Controller$1={},redefine$8=redefine$a.exports,redefineAll$4=function(e,t,r){for(var n in t)redefine$8(e,n,t[n],r);return e},internalMetadata={exports:{}},objectGetOwnPropertyNamesExternal={},toPropertyKey=toPropertyKey$3,definePropertyModule$3=objectDefineProperty,createPropertyDescriptor$1=createPropertyDescriptor$4,createProperty$3=function(e,t,r){var n=toPropertyKey(t);n in e?definePropertyModule$3.f(e,n,createPropertyDescriptor$1(0,r)):e[n]=r},global$x=global$S,toAbsoluteIndex$1=toAbsoluteIndex$3,lengthOfArrayLike$5=lengthOfArrayLike$7,createProperty$2=createProperty$3,Array$3=global$x.Array,max$2=Math.max,arraySliceSimple=function(e,t,r){for(var n=lengthOfArrayLike$5(e),i=toAbsoluteIndex$1(t,n),o=toAbsoluteIndex$1(void 0===r?n:r,n),a=Array$3(max$2(o-i,0)),s=0;i<o;i++,s++)createProperty$2(a,s,e[i]);return a.length=s,a},classof$9=classofRaw$1,toIndexedObject$5=toIndexedObject$9,$getOwnPropertyNames=objectGetOwnPropertyNames.f,arraySlice$6=arraySliceSimple,windowNames="object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return $getOwnPropertyNames(e)}catch(t){return arraySlice$6(windowNames)}};objectGetOwnPropertyNamesExternal.f=function(e){return windowNames&&"Window"==classof$9(e)?getWindowNames(e):$getOwnPropertyNames(toIndexedObject$5(e))};var fails$n=fails$t,arrayBufferNonExtensible=fails$n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),fails$m=fails$t,isObject$c=isObject$i,classof$8=classofRaw$1,ARRAY_BUFFER_NON_EXTENSIBLE=arrayBufferNonExtensible,$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES$2=fails$m((function(){$isExtensible(1)})),objectIsExtensible=FAILS_ON_PRIMITIVES$2||ARRAY_BUFFER_NON_EXTENSIBLE?function(e){return!!isObject$c(e)&&((!ARRAY_BUFFER_NON_EXTENSIBLE||"ArrayBuffer"!=classof$8(e))&&(!$isExtensible||$isExtensible(e)))}:$isExtensible,fails$l=fails$t,freezing=!fails$l((function(){return Object.isExtensible(Object.preventExtensions({}))})),$$p=_export,uncurryThis$q=functionUncurryThis,hiddenKeys$1=hiddenKeys$5,isObject$b=isObject$i,hasOwn$6=hasOwnProperty_1,defineProperty$7=objectDefineProperty.f,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternalModule=objectGetOwnPropertyNamesExternal,isExtensible$1=objectIsExtensible,uid=uid$3,FREEZING=freezing,REQUIRED=!1,METADATA=uid("meta"),id$1=0,setMetadata=function(e){defineProperty$7(e,METADATA,{value:{objectID:"O"+id$1++,weakData:{}}})},fastKey$1=function(e,t){if(!isObject$b(e))return"symbol"==_typeof2(e)?e:("string"==typeof e?"S":"P")+e;if(!hasOwn$6(e,METADATA)){if(!isExtensible$1(e))return"F";if(!t)return"E";setMetadata(e)}return e[METADATA].objectID},getWeakData$1=function(e,t){if(!hasOwn$6(e,METADATA)){if(!isExtensible$1(e))return!0;if(!t)return!1;setMetadata(e)}return e[METADATA].weakData},onFreeze=function(e){return FREEZING&&REQUIRED&&isExtensible$1(e)&&!hasOwn$6(e,METADATA)&&setMetadata(e),e},enable=function(){meta.enable=function(){},REQUIRED=!0;var e=getOwnPropertyNamesModule.f,t=uncurryThis$q([].splice),r={};r[METADATA]=1,e(r).length&&(getOwnPropertyNamesModule.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===METADATA){t(n,i,1);break}return n},$$p({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=internalMetadata.exports={enable:enable,fastKey:fastKey$1,getWeakData:getWeakData$1,onFreeze:onFreeze};hiddenKeys$1[METADATA]=!0;var uncurryThis$p=functionUncurryThis,aCallable$5=aCallable$7,bind$8=uncurryThis$p(uncurryThis$p.bind),functionBindContext=function(e,t){return aCallable$5(e),void 0===t?e:bind$8?bind$8(e,t):function(){return e.apply(t,arguments)}},iterators={},wellKnownSymbol$i=wellKnownSymbol$k,Iterators$4=iterators,ITERATOR$5=wellKnownSymbol$i("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod$1=function(e){return void 0!==e&&(Iterators$4.Array===e||ArrayPrototype$1[ITERATOR$5]===e)},wellKnownSymbol$h=wellKnownSymbol$k,TO_STRING_TAG$3=wellKnownSymbol$h("toStringTag"),test$1={};test$1[TO_STRING_TAG$3]="z";var toStringTagSupport="[object z]"===String(test$1),global$w=global$S,TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$c=isCallable$m,classofRaw=classofRaw$1,wellKnownSymbol$g=wellKnownSymbol$k,TO_STRING_TAG$2=wellKnownSymbol$g("toStringTag"),Object$2=global$w.Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(r){}},classof$7=TO_STRING_TAG_SUPPORT$2?classofRaw:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object$2(e),TO_STRING_TAG$2))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(n=classofRaw(t))&&isCallable$c(t.callee)?"Arguments":n},classof$6=classof$7,getMethod$2=getMethod$4,Iterators$3=iterators,wellKnownSymbol$f=wellKnownSymbol$k,ITERATOR$4=wellKnownSymbol$f("iterator"),getIteratorMethod$2=function(e){if(null!=e)return getMethod$2(e,ITERATOR$4)||getMethod$2(e,"@@iterator")||Iterators$3[classof$6(e)]},global$v=global$S,call$9=functionCall,aCallable$4=aCallable$7,anObject$c=anObject$f,tryToString$2=tryToString$4,getIteratorMethod$1=getIteratorMethod$2,TypeError$9=global$v.TypeError,getIterator$1=function(e,t){var r=arguments.length<2?getIteratorMethod$1(e):t;if(aCallable$4(r))return anObject$c(call$9(r,e));throw TypeError$9(tryToString$2(e)+" is not iterable")},call$8=functionCall,anObject$b=anObject$f,getMethod$1=getMethod$4,iteratorClose$1=function(e,t,r){var n,i;anObject$b(e);try{if(!(n=getMethod$1(e,"return"))){if("throw"===t)throw r;return r}n=call$8(n,e)}catch(o){i=!0,n=o}if("throw"===t)throw r;if(i)throw n;return anObject$b(n),r},global$u=global$S,bind$7=functionBindContext,call$7=functionCall,anObject$a=anObject$f,tryToString$1=tryToString$4,isArrayIteratorMethod=isArrayIteratorMethod$1,lengthOfArrayLike$4=lengthOfArrayLike$7,isPrototypeOf$2=objectIsPrototypeOf,getIterator=getIterator$1,getIteratorMethod=getIteratorMethod$2,iteratorClose=iteratorClose$1,TypeError$8=global$u.TypeError,Result=function(e,t){this.stopped=e,this.result=t},ResultPrototype=Result.prototype,iterate$4=function(e,t,r){var n,i,o,a,s,c,u,l=r&&r.that,f=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),d=bind$7(t,l),m=function(e){return n&&iteratorClose(n,"normal",e),new Result(!0,e)},g=function(e){return f?(anObject$a(e),p?d(e[0],e[1],m):d(e[0],e[1])):p?d(e,m):d(e)};if(h)n=e;else{if(!(i=getIteratorMethod(e)))throw TypeError$8(tryToString$1(e)+" is not iterable");if(isArrayIteratorMethod(i)){for(o=0,a=lengthOfArrayLike$4(e);a>o;o++)if((s=g(e[o]))&&isPrototypeOf$2(ResultPrototype,s))return s;return new Result(!1)}n=getIterator(e,i)}for(c=n.next;!(u=call$7(c,n)).done;){try{s=g(u.value)}catch(v){iteratorClose(n,"throw",v)}if("object"==_typeof2(s)&&s&&isPrototypeOf$2(ResultPrototype,s))return s}return new Result(!1)},global$t=global$S,isPrototypeOf$1=objectIsPrototypeOf,TypeError$7=global$t.TypeError,anInstance$4=function(e,t){if(isPrototypeOf$1(t,e))return e;throw TypeError$7("Incorrect invocation")},wellKnownSymbol$e=wellKnownSymbol$k,ITERATOR$3=wellKnownSymbol$e("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$3]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}var checkCorrectnessOfIteration$2=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$3]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(error){}return r},defineProperty$6=objectDefineProperty.f,hasOwn$5=hasOwnProperty_1,wellKnownSymbol$d=wellKnownSymbol$k,TO_STRING_TAG$1=wellKnownSymbol$d("toStringTag"),setToStringTag$4=function(e,t,r){e&&!r&&(e=e.prototype),e&&!hasOwn$5(e,TO_STRING_TAG$1)&&defineProperty$6(e,TO_STRING_TAG$1,{configurable:!0,value:t})},global$s=global$S,isCallable$b=isCallable$m,String$4=global$s.String,TypeError$6=global$s.TypeError,aPossiblePrototype$1=function(e){if("object"==_typeof2(e)||isCallable$b(e))return e;throw TypeError$6("Can't set "+String$4(e)+" as a prototype")},uncurryThis$o=functionUncurryThis,anObject$9=anObject$f,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=uncurryThis$o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(error){}return function(r,n){return anObject$9(r),aPossiblePrototype(n),t?e(r,n):r.__proto__=n,r}}():void 0),isCallable$a=isCallable$m,isObject$a=isObject$i,setPrototypeOf$3=objectSetPrototypeOf,inheritIfRequired$2=function(e,t,r){var n,i;return setPrototypeOf$3&&isCallable$a(n=t.constructor)&&n!==r&&isObject$a(i=n.prototype)&&i!==r.prototype&&setPrototypeOf$3(e,i),e},$$o=_export,global$r=global$S,uncurryThis$n=functionUncurryThis,isForced$2=isForced_1,redefine$7=redefine$a.exports,InternalMetadataModule$1=internalMetadata.exports,iterate$3=iterate$4,anInstance$3=anInstance$4,isCallable$9=isCallable$m,isObject$9=isObject$i,fails$k=fails$t,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$2,setToStringTag$3=setToStringTag$4,inheritIfRequired$1=inheritIfRequired$2,collection$2=function(e,t,r){var n=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=n?"set":"add",a=global$r[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=uncurryThis$n(s[e]);redefine$7(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!isObject$9(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!isObject$9(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!isObject$9(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(isForced$2(e,!isCallable$9(a)||!(i||s.forEach&&!fails$k((function(){(new a).entries().next()})))))c=r.getConstructor(t,e,n,o),InternalMetadataModule$1.enable();else if(isForced$2(e,!0)){var f=new c,h=f[o](i?{}:-0,1)!=f,p=fails$k((function(){f.has(1)})),d=checkCorrectnessOfIteration$1((function(e){new a(e)})),m=!i&&fails$k((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));d||((c=t((function(e,t){anInstance$3(e,s);var r=inheritIfRequired$1(new a,e,c);return null!=t&&iterate$3(t,r[o],{that:r,AS_ENTRIES:n}),r}))).prototype=s,s.constructor=c),(p||m)&&(l("delete"),l("has"),n&&l("get")),(m||h)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,$$o({global:!0,forced:c!=a},u),setToStringTag$3(c,e),i||r.setStrong(c,e,n),c},classof$5=classofRaw$1,isArray$3=Array.isArray||function(e){return"Array"==classof$5(e)},uncurryThis$m=functionUncurryThis,fails$j=fails$t,isCallable$8=isCallable$m,classof$4=classof$7,getBuiltIn$4=getBuiltIn$8,inspectSource$1=inspectSource$4,noop=function(){},empty=[],construct$1=getBuiltIn$4("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$1=uncurryThis$m(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function(e){if(!isCallable$8(e))return!1;try{return construct$1(noop,empty,e),!0}catch(error){return!1}},isConstructorLegacy=function(e){if(!isCallable$8(e))return!1;switch(classof$4(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$1(constructorRegExp,inspectSource$1(e))}catch(error){return!0}};isConstructorLegacy.sham=!0;var isConstructor$3=!construct$1||fails$j((function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){e=!0}))||e}))?isConstructorLegacy:isConstructorModern,global$q=global$S,isArray$2=isArray$3,isConstructor$2=isConstructor$3,isObject$8=isObject$i,wellKnownSymbol$c=wellKnownSymbol$k,SPECIES$6=wellKnownSymbol$c("species"),Array$2=global$q.Array,arraySpeciesConstructor$1=function(e){var t;return isArray$2(e)&&(t=e.constructor,(isConstructor$2(t)&&(t===Array$2||isArray$2(t.prototype))||isObject$8(t)&&null===(t=t[SPECIES$6]))&&(t=void 0)),void 0===t?Array$2:t},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$2=function(e,t){return new(arraySpeciesConstructor(e))(0===t?0:t)},bind$6=functionBindContext,uncurryThis$l=functionUncurryThis,IndexedObject$1=indexedObject,toObject$6=toObject$8,lengthOfArrayLike$3=lengthOfArrayLike$7,arraySpeciesCreate$1=arraySpeciesCreate$2,push$4=uncurryThis$l([].push),createMethod$3=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,f){for(var h,p,d=toObject$6(c),m=IndexedObject$1(d),g=bind$6(u,l),v=lengthOfArrayLike$3(m),y=0,b=f||arraySpeciesCreate$1,_=t?b(c,v):r||a?b(c,0):void 0;v>y;y++)if((s||y in m)&&(p=g(h=m[y],y,d),e))if(t)_[y]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:push$4(_,h)}else switch(e){case 4:return!1;case 7:push$4(_,h)}return o?-1:n||i?i:_}},arrayIteration={forEach:createMethod$3(0),map:createMethod$3(1),filter:createMethod$3(2),some:createMethod$3(3),every:createMethod$3(4),find:createMethod$3(5),findIndex:createMethod$3(6),filterReject:createMethod$3(7)},uncurryThis$k=functionUncurryThis,redefineAll$3=redefineAll$4,getWeakData=internalMetadata.exports.getWeakData,anObject$8=anObject$f,isObject$7=isObject$i,anInstance$2=anInstance$4,iterate$2=iterate$4,ArrayIterationModule=arrayIteration,hasOwn$4=hasOwnProperty_1,InternalStateModule$4=internalState,setInternalState$4=InternalStateModule$4.set,internalStateGetterFor$1=InternalStateModule$4.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice=uncurryThis$k([].splice),id=0,uncaughtFrozenStore=function(e){return e.frozen||(e.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(e,t){return find(e.entries,(function(e){return e[0]===t}))};UncaughtFrozenStore.prototype={get:function(e){var t=findUncaughtFrozen(this,e);if(t)return t[1]},has:function(e){return!!findUncaughtFrozen(this,e)},set:function(e,t){var r=findUncaughtFrozen(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=findIndex(this.entries,(function(t){return t[0]===e}));return~t&&splice(this.entries,t,1),!!~t}};var collectionWeak$1={getConstructor:function(e,t,r,n){var i=e((function(e,i){anInstance$2(e,o),setInternalState$4(e,{type:t,id:id++,frozen:void 0}),null!=i&&iterate$2(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,a=internalStateGetterFor$1(t),s=function(e,t,r){var n=a(e),i=getWeakData(anObject$8(t),!0);return!0===i?uncaughtFrozenStore(n).set(t,r):i[n.id]=r,e};return redefineAll$3(o,{delete:function(e){var t=a(this);if(!isObject$7(e))return!1;var r=getWeakData(e);return!0===r?uncaughtFrozenStore(t).delete(e):r&&hasOwn$4(r,t.id)&&delete r[t.id]},has:function(e){var t=a(this);if(!isObject$7(e))return!1;var r=getWeakData(e);return!0===r?uncaughtFrozenStore(t).has(e):r&&hasOwn$4(r,t.id)}}),redefineAll$3(o,r?{get:function(e){var t=a(this);if(isObject$7(e)){var r=getWeakData(e);return!0===r?uncaughtFrozenStore(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},global$p=global$S,uncurryThis$j=functionUncurryThis,redefineAll$2=redefineAll$4,InternalMetadataModule=internalMetadata.exports,collection$1=collection$2,collectionWeak=collectionWeak$1,isObject$6=isObject$i,isExtensible=objectIsExtensible,enforceInternalState=internalState.enforce,NATIVE_WEAK_MAP=nativeWeakMap,IS_IE11=!global$p.ActiveXObject&&"ActiveXObject"in global$p,InternalWeakMap,wrapper=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection$1("WeakMap",wrapper,collectionWeak);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable();var WeakMapPrototype=$WeakMap.prototype,nativeDelete=uncurryThis$j(WeakMapPrototype.delete),nativeHas=uncurryThis$j(WeakMapPrototype.has),nativeGet=uncurryThis$j(WeakMapPrototype.get),nativeSet=uncurryThis$j(WeakMapPrototype.set);redefineAll$2(WeakMapPrototype,{delete:function(e){if(isObject$6(e)&&!isExtensible(e)){var t=enforceInternalState(this);return t.frozen||(t.frozen=new InternalWeakMap),nativeDelete(this,e)||t.frozen.delete(e)}return nativeDelete(this,e)},has:function(e){if(isObject$6(e)&&!isExtensible(e)){var t=enforceInternalState(this);return t.frozen||(t.frozen=new InternalWeakMap),nativeHas(this,e)||t.frozen.has(e)}return nativeHas(this,e)},get:function(e){if(isObject$6(e)&&!isExtensible(e)){var t=enforceInternalState(this);return t.frozen||(t.frozen=new InternalWeakMap),nativeHas(this,e)?nativeGet(this,e):t.frozen.get(e)}return nativeGet(this,e)},set:function(e,t){if(isObject$6(e)&&!isExtensible(e)){var r=enforceInternalState(this);r.frozen||(r.frozen=new InternalWeakMap),nativeHas(this,e)?nativeSet(this,e,t):r.frozen.set(e,t)}else nativeSet(this,e,t);return this}})}var $$n=_export,fails$i=fails$t,toIndexedObject$4=toIndexedObject$9,nativeGetOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,DESCRIPTORS$8=descriptors,FAILS_ON_PRIMITIVES$1=fails$i((function(){nativeGetOwnPropertyDescriptor(1)})),FORCED$5=!DESCRIPTORS$8||FAILS_ON_PRIMITIVES$1;$$n({target:"Object",stat:!0,forced:FORCED$5,sham:!DESCRIPTORS$8},{getOwnPropertyDescriptor:function(e,t){return nativeGetOwnPropertyDescriptor(toIndexedObject$4(e),t)}});var interopRequireDefault={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(interopRequireDefault);var _typeof$5={exports:{}};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$5);var runtime={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new S(n||[]);return o._invoke=function(e,t,r){var n=f;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=$(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?d:h,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(D){return{type:"throw",arg:D}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={};function g(){}function v(){}function y(){}var b={};c(b,o,(function(){return this}));var _=Object.getPrototypeOf,A=_&&_(_(O([])));A&&A!==r&&n.call(A,o)&&(b=A);var M=y.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===_typeof2(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function $(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,$(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=y,c(M,"constructor",y),c(y,"constructor",v),v.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},x(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(u(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(M),c(M,s,"Generator"),c(M,o,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"===("undefined"==typeof globalThis?"undefined":_typeof2(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(runtime);var regenerator=runtime.exports,fails$h=fails$t,arrayMethodIsStrict$4=function(e,t){var r=[][e];return!!r&&fails$h((function(){r.call(null,t||function(){throw 1},1)}))},$forEach=arrayIteration.forEach,arrayMethodIsStrict$3=arrayMethodIsStrict$4,STRICT_METHOD$3=arrayMethodIsStrict$3("forEach"),arrayForEach=STRICT_METHOD$3?[].forEach:function(e){return $forEach(this,e,arguments.length>1?arguments[1]:void 0)},$$m=_export,forEach$1=arrayForEach;$$m({target:"Array",proto:!0,forced:[].forEach!=forEach$1},{forEach:forEach$1});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement$1=documentCreateElement$2,classList=documentCreateElement$1("span").classList,DOMTokenListPrototype$2=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$2===Object.prototype?void 0:DOMTokenListPrototype$2,global$o=global$S,DOMIterables$1=domIterables,DOMTokenListPrototype$1=domTokenListPrototype,forEach=arrayForEach,createNonEnumerableProperty$3=createNonEnumerableProperty$7,handlePrototype$1=function(e){if(e&&e.forEach!==forEach)try{createNonEnumerableProperty$3(e,"forEach",forEach)}catch(error){e.forEach=forEach}};for(var COLLECTION_NAME$1 in DOMIterables$1)DOMIterables$1[COLLECTION_NAME$1]&&handlePrototype$1(global$o[COLLECTION_NAME$1]&&global$o[COLLECTION_NAME$1].prototype);handlePrototype$1(DOMTokenListPrototype$1);var internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$3=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS$7=descriptors,uncurryThis$i=functionUncurryThis,objectKeys$2=objectKeys$3,toIndexedObject$3=toIndexedObject$9,$propertyIsEnumerable=objectPropertyIsEnumerable.f,propertyIsEnumerable=uncurryThis$i($propertyIsEnumerable),push$3=uncurryThis$i([].push),createMethod$2=function(e){return function(t){for(var r,n=toIndexedObject$3(t),i=objectKeys$2(n),o=i.length,a=0,s=[];o>a;)r=i[a++],DESCRIPTORS$7&&!propertyIsEnumerable(n,r)||push$3(s,e?[r,n[r]]:n[r]);return s}},objectToArray={entries:createMethod$2(!0),values:createMethod$2(!1)},$$l=_export,$values=objectToArray.values;$$l({target:"Object",stat:!0},{values:function(e){return $values(e)}});var DESCRIPTORS$6=descriptors,FUNCTION_NAME_EXISTS=functionName.EXISTS,uncurryThis$h=functionUncurryThis,defineProperty$5=objectDefineProperty.f,FunctionPrototype$1=Function.prototype,functionToString=uncurryThis$h(FunctionPrototype$1.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec$1=uncurryThis$h(nameRE.exec),NAME="name";DESCRIPTORS$6&&!FUNCTION_NAME_EXISTS&&defineProperty$5(FunctionPrototype$1,NAME,{configurable:!0,get:function(){try{return regExpExec$1(nameRE,functionToString(this))[1]}catch(error){return""}}});var DESCRIPTORS$5=descriptors,definePropertyModule$2=objectDefineProperty,anObject$7=anObject$f,toIndexedObject$2=toIndexedObject$9,objectKeys$1=objectKeys$3,objectDefineProperties=DESCRIPTORS$5?Object.defineProperties:function(e,t){anObject$7(e);for(var r,n=toIndexedObject$2(t),i=objectKeys$1(t),o=i.length,a=0;o>a;)definePropertyModule$2.f(e,r=i[a++],n[r]);return e},getBuiltIn$3=getBuiltIn$8,html$2=getBuiltIn$3("document","documentElement"),anObject$6=anObject$f,defineProperties=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys=hiddenKeys$5,html$1=html$2,documentCreateElement=documentCreateElement$2,sharedKey$1=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),r="java"+SCRIPT+":";return t.style.display="none",html$1.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},activeXDocument,_NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(error){}_NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var e=enumBugKeys.length;e--;)delete _NullProtoObject[PROTOTYPE][enumBugKeys[e]];return _NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor[PROTOTYPE]=anObject$6(e),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=_NullProtoObject(),void 0===t?r:defineProperties(r,t)},wellKnownSymbol$b=wellKnownSymbol$k,create$4=objectCreate,definePropertyModule$1=objectDefineProperty,UNSCOPABLES=wellKnownSymbol$b("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&definePropertyModule$1.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create$4(null)});var addToUnscopables$3=function(e){ArrayPrototype[UNSCOPABLES][e]=!0},fails$g=fails$t,correctPrototypeGetter=!fails$g((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),global$n=global$S,hasOwn$3=hasOwnProperty_1,isCallable$7=isCallable$m,toObject$5=toObject$8,sharedKey=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),Object$1=global$n.Object,ObjectPrototype$1=Object$1.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?Object$1.getPrototypeOf:function(e){var t=toObject$5(e);if(hasOwn$3(t,IE_PROTO))return t[IE_PROTO];var r=t.constructor;return isCallable$7(r)&&t instanceof r?r.prototype:t instanceof Object$1?ObjectPrototype$1:null},fails$f=fails$t,isCallable$6=isCallable$m,getPrototypeOf$2=objectGetPrototypeOf,redefine$6=redefine$a.exports,wellKnownSymbol$a=wellKnownSymbol$k,ITERATOR$2=wellKnownSymbol$a("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$2(getPrototypeOf$2(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=null==IteratorPrototype$2||fails$f((function(){var e={};return IteratorPrototype$2[ITERATOR$2].call(e)!==e}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable$6(IteratorPrototype$2[ITERATOR$2])||redefine$6(IteratorPrototype$2,ITERATOR$2,(function(){return this}));var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$3=objectCreate,createPropertyDescriptor=createPropertyDescriptor$4,setToStringTag$2=setToStringTag$4,Iterators$2=iterators,returnThis$1=function(){return this},createIteratorConstructor$1=function(e,t,r,n){var i=t+" Iterator";return e.prototype=create$3(IteratorPrototype$1,{next:createPropertyDescriptor(+!n,r)}),setToStringTag$2(e,i,!1),Iterators$2[i]=returnThis$1,e},$$k=_export,call$6=functionCall,FunctionName=functionName,isCallable$5=isCallable$m,createIteratorConstructor=createIteratorConstructor$1,getPrototypeOf$1=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,setToStringTag$1=setToStringTag$4,createNonEnumerableProperty$2=createNonEnumerableProperty$7,redefine$5=redefine$a.exports,wellKnownSymbol$9=wellKnownSymbol$k,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol$9("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator$3=function(e,t,r,n,i,o,a){createIteratorConstructor(r,t,n);var s,c,u,l=function(e){if(e===i&&m)return m;if(!BUGGY_SAFARI_ITERATORS&&e in p)return p[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,e)}}return function(){return new r(this)}},f=t+" Iterator",h=!1,p=e.prototype,d=p[ITERATOR$1]||p["@@iterator"]||i&&p[i],m=!BUGGY_SAFARI_ITERATORS&&d||l(i),g="Array"==t&&p.entries||d;if(g&&(s=getPrototypeOf$1(g.call(new e)))!==Object.prototype&&s.next&&(getPrototypeOf$1(s)!==IteratorPrototype&&(setPrototypeOf$2?setPrototypeOf$2(s,IteratorPrototype):isCallable$5(s[ITERATOR$1])||redefine$5(s,ITERATOR$1,returnThis)),setToStringTag$1(s,f,!0)),PROPER_FUNCTION_NAME&&i==VALUES&&d&&d.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty$2(p,"name",VALUES):(h=!0,m=function(){return call$6(d,this)})),i)if(c={values:l(VALUES),keys:o?m:l(KEYS),entries:l(ENTRIES)},a)for(u in c)(BUGGY_SAFARI_ITERATORS||h||!(u in p))&&redefine$5(p,u,c[u]);else $$k({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS||h},c);return p[ITERATOR$1]!==m&&redefine$5(p,ITERATOR$1,m,{name:i}),Iterators$1[t]=m,c},toIndexedObject$1=toIndexedObject$9,addToUnscopables$2=addToUnscopables$3,Iterators=iterators,InternalStateModule$3=internalState,defineProperty$4=objectDefineProperty.f,defineIterator$2=defineIterator$3,DESCRIPTORS$4=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$3=InternalStateModule$3.set,getInternalState$3=InternalStateModule$3.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$2(Array,"Array",(function(e,t){setInternalState$3(this,{type:ARRAY_ITERATOR,target:toIndexedObject$1(e),index:0,kind:t})}),(function(){var e=getInternalState$3(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),values=Iterators.Arguments=Iterators.Array;if(addToUnscopables$2("keys"),addToUnscopables$2("values"),addToUnscopables$2("entries"),DESCRIPTORS$4&&"values"!==values.name)try{defineProperty$4(values,"name",{value:"values"})}catch(error){}var TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$3=classof$7,objectToString=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$3(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,redefine$4=redefine$a.exports,toString$9=objectToString;TO_STRING_TAG_SUPPORT||redefine$4(Object.prototype,"toString",toString$9,{unsafe:!0});var global$m=global$S,nativePromiseConstructor=global$m.Promise,getBuiltIn$2=getBuiltIn$8,definePropertyModule=objectDefineProperty,wellKnownSymbol$8=wellKnownSymbol$k,DESCRIPTORS$3=descriptors,SPECIES$5=wellKnownSymbol$8("species"),setSpecies$2=function(e){var t=getBuiltIn$2(e),r=definePropertyModule.f;DESCRIPTORS$3&&t&&!t[SPECIES$5]&&r(t,SPECIES$5,{configurable:!0,get:function(){return this}})},global$l=global$S,isConstructor$1=isConstructor$3,tryToString=tryToString$4,TypeError$5=global$l.TypeError,aConstructor$2=function(e){if(isConstructor$1(e))return e;throw TypeError$5(tryToString(e)+" is not a constructor")},anObject$5=anObject$f,aConstructor$1=aConstructor$2,wellKnownSymbol$7=wellKnownSymbol$k,SPECIES$4=wellKnownSymbol$7("species"),speciesConstructor$1=function(e,t){var r,n=anObject$5(e).constructor;return void 0===n||null==(r=anObject$5(n)[SPECIES$4])?t:aConstructor$1(r)},FunctionPrototype=Function.prototype,apply$4=FunctionPrototype.apply,bind$5=FunctionPrototype.bind,call$5=FunctionPrototype.call,functionApply="object"==("undefined"==typeof Reflect?"undefined":_typeof2(Reflect))&&Reflect.apply||(bind$5?call$5.bind(apply$4):function(){return call$5.apply(apply$4,arguments)}),uncurryThis$g=functionUncurryThis,arraySlice$5=uncurryThis$g([].slice),userAgent$5=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$5),classof$2=classofRaw$1,global$k=global$S,engineIsNode="process"==classof$2(global$k.process),global$j=global$S,apply$3=functionApply,bind$4=functionBindContext,isCallable$4=isCallable$m,hasOwn$2=hasOwnProperty_1,fails$e=fails$t,html=html$2,arraySlice$4=arraySlice$5,createElement=documentCreateElement$2,IS_IOS$1=engineIsIos,IS_NODE$2=engineIsNode,set=global$j.setImmediate,clear=global$j.clearImmediate,process$3=global$j.process,Dispatch=global$j.Dispatch,Function$3=global$j.Function,MessageChannel$1=global$j.MessageChannel,String$3=global$j.String,counter=0,queue$1={},ONREADYSTATECHANGE="onreadystatechange",location$1,defer,channel,port;try{location$1=global$j.location}catch(error){}var run=function(e){if(hasOwn$2(queue$1,e)){var t=queue$1[e];delete queue$1[e],t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global$j.postMessage(String$3(e),location$1.protocol+"//"+location$1.host)};set&&clear||(set=function(e){var t=arraySlice$4(arguments,1);return queue$1[++counter]=function(){apply$3(isCallable$4(e)?e:Function$3(e),void 0,t)},defer(counter),counter},clear=function(e){delete queue$1[e]},IS_NODE$2?defer=function(e){process$3.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel$1&&!IS_IOS$1?(channel=new MessageChannel$1,port=channel.port2,channel.port1.onmessage=listener,defer=bind$4(port.postMessage,port)):global$j.addEventListener&&isCallable$4(global$j.postMessage)&&!global$j.importScripts&&location$1&&"file:"!==location$1.protocol&&!fails$e(post)?(defer=post,global$j.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(e){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)});var task$1={set:set,clear:clear},userAgent$4=engineUserAgent,global$i=global$S,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$4)&&void 0!==global$i.Pebble,userAgent$3=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$3),global$h=global$S,bind$3=functionBindContext,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$1=engineIsNode,MutationObserver=global$h.MutationObserver||global$h.WebKitMutationObserver,document$2=global$h.document,process$2=global$h.process,Promise$1=global$h.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor$1(global$h,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise,then;queueMicrotask||(flush=function(){var e,t;for(IS_NODE$1&&(e=process$2.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(error){throw head?notify$1():last=void 0,error}}last=void 0,e&&e.enter()},IS_IOS||IS_NODE$1||IS_WEBOS_WEBKIT||!MutationObserver||!document$2?!IS_IOS_PEBBLE&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=bind$3(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$1?notify$1=function(){process$2.nextTick(flush)}:(macrotask=bind$3(macrotask,global$h),notify$1=function(){macrotask(flush)}):(toggle=!0,node=document$2.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}));var microtask$1=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify$1()),last=t},newPromiseCapability$2={},aCallable$3=aCallable$7,PromiseCapability=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=aCallable$3(t),this.reject=aCallable$3(r)};newPromiseCapability$2.f=function(e){return new PromiseCapability(e)};var anObject$4=anObject$f,isObject$5=isObject$i,newPromiseCapability$1=newPromiseCapability$2,promiseResolve$1=function(e,t){if(anObject$4(e),isObject$5(t)&&t.constructor===e)return t;var r=newPromiseCapability$1.f(e);return(0,r.resolve)(t),r.promise},global$g=global$S,hostReportErrors$1=function(e,t){var r=global$g.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))},perform$1=function(e){try{return{error:!1,value:e()}}catch(error){return{error:!0,value:error}}},Queue$1=function(){this.head=null,this.tail=null};Queue$1.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var queue=Queue$1,engineIsBrowser="object"==("undefined"==typeof window?"undefined":_typeof2(window)),$$j=_export,global$f=global$S,getBuiltIn$1=getBuiltIn$8,call$4=functionCall,NativePromise=nativePromiseConstructor,redefine$3=redefine$a.exports,redefineAll$1=redefineAll$4,setPrototypeOf$1=objectSetPrototypeOf,setToStringTag=setToStringTag$4,setSpecies$1=setSpecies$2,aCallable$2=aCallable$7,isCallable$3=isCallable$m,isObject$4=isObject$i,anInstance$1=anInstance$4,inspectSource=inspectSource$4,iterate$1=iterate$4,checkCorrectnessOfIteration=checkCorrectnessOfIteration$2,speciesConstructor=speciesConstructor$1,task=task$1.set,microtask=microtask$1,promiseResolve=promiseResolve$1,hostReportErrors=hostReportErrors$1,newPromiseCapabilityModule=newPromiseCapability$2,perform=perform$1,Queue=queue,InternalStateModule$2=internalState,isForced$1=isForced_1,wellKnownSymbol$6=wellKnownSymbol$k,IS_BROWSER=engineIsBrowser,IS_NODE=engineIsNode,V8_VERSION$2=engineV8Version,SPECIES$3=wellKnownSymbol$6("species"),PROMISE="Promise",getInternalState$2=InternalStateModule$2.getterFor(PROMISE),setInternalState$2=InternalStateModule$2.set,getInternalPromiseState=InternalStateModule$2.getterFor(PROMISE),NativePromisePrototype=NativePromise&&NativePromise.prototype,PromiseConstructor=NativePromise,PromisePrototype=NativePromisePrototype,TypeError$4=global$f.TypeError,document$1=global$f.document,process$1=global$f.process,newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$f.dispatchEvent),NATIVE_REJECTION_EVENT=isCallable$3(global$f.PromiseRejectionEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,SUBCLASSING=!1,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,FORCED$4=isForced$1(PROMISE,(function(){var e=inspectSource(PromiseConstructor),t=e!==String(PromiseConstructor);if(!t&&66===V8_VERSION$2)return!0;if(V8_VERSION$2>=51&&/native code/.test(e))return!1;var r=new PromiseConstructor((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[SPECIES$3]=n,!(SUBCLASSING=r.then((function(){}))instanceof n)||!t&&IS_BROWSER&&!NATIVE_REJECTION_EVENT})),INCORRECT_ITERATION=FORCED$4||!checkCorrectnessOfIteration((function(e){PromiseConstructor.all(e).catch((function(){}))})),isThenable=function(e){var t;return!(!isObject$4(e)||!isCallable$3(t=e.then))&&t},callReaction=function(e,t){var r,n,i,o=t.value,a=t.state==FULFILLED,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(t.rejection===UNHANDLED&&onHandleUnhandled(t),t.rejection=HANDLED),!0===s?r=o:(l&&l.enter(),r=s(o),l&&(l.exit(),i=!0)),r===e.promise?u(TypeError$4("Promise-chain cycle")):(n=isThenable(r))?call$4(n,r,c,u):c(r)):u(o)}catch(error){l&&!i&&l.exit(),u(error)}},notify=function(e,t){e.notified||(e.notified=!0,microtask((function(){for(var r,n=e.reactions;r=n.get();)callReaction(r,e);e.notified=!1,t&&!e.rejection&&onUnhandled(e)})))},dispatchEvent=function(e,t,r){var n,i;DISPATCH_EVENT?((n=document$1.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),global$f.dispatchEvent(n)):n={promise:t,reason:r},!NATIVE_REJECTION_EVENT&&(i=global$f["on"+e])?i(n):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(e){call$4(task,global$f,(function(){var t,r=e.facade,n=e.value;if(isUnhandled(e)&&(t=perform((function(){IS_NODE?process$1.emit("unhandledRejection",n,r):dispatchEvent(UNHANDLED_REJECTION,r,n)})),e.rejection=IS_NODE||isUnhandled(e)?UNHANDLED:HANDLED,t.error))throw t.value}))},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e){call$4(task,global$f,(function(){var t=e.facade;IS_NODE?process$1.emit("rejectionHandled",t):dispatchEvent(REJECTION_HANDLED,t,e.value)}))},bind$2=function(e,t,r){return function(n){e(t,n,r)}},internalReject=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=REJECTED,notify(e,!0))},internalResolve=function e(t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===r)throw TypeError$4("Promise can't be resolved itself");var i=isThenable(r);i?microtask((function(){var n={done:!1};try{call$4(i,r,bind$2(e,n,t),bind$2(internalReject,n,t))}catch(error){internalReject(n,error,t)}})):(t.value=r,t.state=FULFILLED,notify(t,!1))}catch(error){internalReject({done:!1},error,t)}}};if(FORCED$4&&(PromiseConstructor=function(e){anInstance$1(this,PromisePrototype),aCallable$2(e),call$4(Internal,this);var t=getInternalState$2(this);try{e(bind$2(internalResolve,t),bind$2(internalReject,t))}catch(error){internalReject(t,error)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(e){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll$1(PromisePrototype,{then:function(e,t){var r=getInternalPromiseState(this),n=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return r.parent=!0,n.ok=!isCallable$3(e)||e,n.fail=isCallable$3(t)&&t,n.domain=IS_NODE?process$1.domain:void 0,r.state==PENDING?r.reactions.add(n):microtask((function(){callReaction(n,r)})),n.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,t=getInternalState$2(e);this.promise=e,this.resolve=bind$2(internalResolve,t),this.reject=bind$2(internalReject,t)},newPromiseCapabilityModule.f=newPromiseCapability=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},isCallable$3(NativePromise)&&NativePromisePrototype!==Object.prototype)){nativeThen=NativePromisePrototype.then,SUBCLASSING||(redefine$3(NativePromisePrototype,"then",(function(e,t){var r=this;return new PromiseConstructor((function(e,t){call$4(nativeThen,r,e,t)})).then(e,t)}),{unsafe:!0}),redefine$3(NativePromisePrototype,"catch",PromisePrototype.catch,{unsafe:!0}));try{delete NativePromisePrototype.constructor}catch(error){}setPrototypeOf$1&&setPrototypeOf$1(NativePromisePrototype,PromisePrototype)}$$j({global:!0,wrap:!0,forced:FORCED$4},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1),setSpecies$1(PROMISE),PromiseWrapper=getBuiltIn$1(PROMISE),$$j({target:PROMISE,stat:!0,forced:FORCED$4},{reject:function(e){var t=newPromiseCapability(this);return call$4(t.reject,void 0,e),t.promise}}),$$j({target:PROMISE,stat:!0,forced:FORCED$4},{resolve:function(e){return promiseResolve(this,e)}}),$$j({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var t=this,r=newPromiseCapability(t),n=r.resolve,i=r.reject,o=perform((function(){var r=aCallable$2(t.resolve),o=[],a=0,s=1;iterate$1(e,(function(e){var c=a++,u=!1;s++,call$4(r,t,e).then((function(e){u||(u=!0,o[c]=e,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=newPromiseCapability(t),n=r.reject,i=perform((function(){var i=aCallable$2(t.resolve);iterate$1(e,(function(e){call$4(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var global$e=global$S,classof$1=classof$7,String$2=global$e.String,toString$8=function(e){if("Symbol"===classof$1(e))throw TypeError("Cannot convert a Symbol value to a string");return String$2(e)},uncurryThis$f=functionUncurryThis,toIntegerOrInfinity$3=toIntegerOrInfinity$6,toString$7=toString$8,requireObjectCoercible$4=requireObjectCoercible$7,charAt$4=uncurryThis$f("".charAt),charCodeAt$1=uncurryThis$f("".charCodeAt),stringSlice$4=uncurryThis$f("".slice),createMethod$1=function(e){return function(t,r){var n,i,o=toString$7(requireObjectCoercible$4(t)),a=toIntegerOrInfinity$3(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=charCodeAt$1(o,a))<55296||n>56319||a+1===s||(i=charCodeAt$1(o,a+1))<56320||i>57343?e?charAt$4(o,a):n:e?stringSlice$4(o,a,a+2):i-56320+(n-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$1(!1),charAt:createMethod$1(!0)},charAt$3=stringMultibyte.charAt,toString$6=toString$8,InternalStateModule$1=internalState,defineIterator$1=defineIterator$3,STRING_ITERATOR="String Iterator",setInternalState$1=InternalStateModule$1.set,getInternalState$1=InternalStateModule$1.getterFor(STRING_ITERATOR);defineIterator$1(String,"String",(function(e){setInternalState$1(this,{type:STRING_ITERATOR,string:toString$6(e),index:0})}),(function(){var e,t=getInternalState$1(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=charAt$3(r,n),t.index+=e.length,{value:e,done:!1})}));var global$d=global$S,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$1=createNonEnumerableProperty$7,wellKnownSymbol$5=wellKnownSymbol$k,ITERATOR=wellKnownSymbol$5("iterator"),TO_STRING_TAG=wellKnownSymbol$5("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(e,t){if(e){if(e[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty$1(e,ITERATOR,ArrayValues)}catch(error){e[ITERATOR]=ArrayValues}if(e[TO_STRING_TAG]||createNonEnumerableProperty$1(e,TO_STRING_TAG,t),DOMIterables[t])for(var r in ArrayIteratorMethods)if(e[r]!==ArrayIteratorMethods[r])try{createNonEnumerableProperty$1(e,r,ArrayIteratorMethods[r])}catch(error){e[r]=ArrayIteratorMethods[r]}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$d[COLLECTION_NAME]&&global$d[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var fails$d=fails$t,wellKnownSymbol$4=wellKnownSymbol$k,V8_VERSION$1=engineV8Version,SPECIES$2=wellKnownSymbol$4("species"),arrayMethodHasSpeciesSupport$4=function(e){return V8_VERSION$1>=51||!fails$d((function(){var t=[];return(t.constructor={})[SPECIES$2]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},$$i=_export,$map=arrayIteration.map,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$4,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$3("map");$$i({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{map:function(e){return $map(this,e,arguments.length>1?arguments[1]:void 0)}});var $$h=_export,$filter=arrayIteration.filter,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$4,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$2("filter");$$h({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{filter:function(e){return $filter(this,e,arguments.length>1?arguments[1]:void 0)}});var $$g=_export,$find=arrayIteration.find,addToUnscopables$1=addToUnscopables$3,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND]((function(){SKIPS_HOLES$1=!1})),$$g({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function(e){return $find(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$1(FIND);var $$f=_export,$findIndex=arrayIteration.findIndex,addToUnscopables=addToUnscopables$3,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX]((function(){SKIPS_HOLES=!1})),$$f({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function(e){return $findIndex(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables(FIND_INDEX);var $$e=_export,global$c=global$S,isArray$1=isArray$3,isConstructor=isConstructor$3,isObject$3=isObject$i,toAbsoluteIndex=toAbsoluteIndex$3,lengthOfArrayLike$2=lengthOfArrayLike$7,toIndexedObject=toIndexedObject$9,createProperty$1=createProperty$3,wellKnownSymbol$3=wellKnownSymbol$k,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$4,un$Slice=arraySlice$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport$1("slice"),SPECIES$1=wellKnownSymbol$3("species"),Array$1=global$c.Array,max$1=Math.max;$$e({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{slice:function(e,t){var r,n,i,o=toIndexedObject(this),a=lengthOfArrayLike$2(o),s=toAbsoluteIndex(e,a),c=toAbsoluteIndex(void 0===t?a:t,a);if(isArray$1(o)&&(r=o.constructor,(isConstructor(r)&&(r===Array$1||isArray$1(r.prototype))||isObject$3(r)&&null===(r=r[SPECIES$1]))&&(r=void 0),r===Array$1||void 0===r))return un$Slice(o,s,c);for(n=new(void 0===r?Array$1:r)(max$1(c-s,0)),i=0;s<c;s++,i++)s in o&&createProperty$1(n,i,o[s]);return n.length=i,n}});var toConsumableArray={exports:{}},arrayWithoutHoles={exports:{}},arrayLikeToArray={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayLikeToArray),function(e){var t=arrayLikeToArray.exports;e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithoutHoles);var iterableToArray={exports:{}};!function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArray);var unsupportedIterableToArray={exports:{}};!function(e){var t=arrayLikeToArray.exports;e.exports=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(unsupportedIterableToArray);var nonIterableSpread={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableSpread),function(e){var t=arrayWithoutHoles.exports,r=iterableToArray.exports,n=unsupportedIterableToArray.exports,i=nonIterableSpread.exports;e.exports=function(e){return t(e)||r(e)||n(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports}(toConsumableArray);var slicedToArray={exports:{}},arrayWithHoles={exports:{}};!function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithHoles);var iterableToArrayLimit={exports:{}};!function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArrayLimit);var nonIterableRest={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableRest),function(e){var t=arrayWithHoles.exports,r=iterableToArrayLimit.exports,n=unsupportedIterableToArray.exports,i=nonIterableRest.exports;e.exports=function(e,o){return t(e)||r(e,o)||n(e,o)||i()},e.exports.__esModule=!0,e.exports.default=e.exports}(slicedToArray);var asyncToGenerator={exports:{}};!function(e){function t(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void r(error)}s.done?t(c):Promise.resolve(c).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}(asyncToGenerator);var classCallCheck={exports:{}};!function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(classCallCheck);var createClass={exports:{}};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(createClass);var defineProperty$3={exports:{}};!function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}(defineProperty$3);var isNil$1={};function isNil(e){return!notNil(e)}function notNil(e){return null!=e}Object.defineProperty(isNil$1,"__esModule",{value:!0}),isNil$1.isNil=isNil,isNil$1.notNil=notNil;var constants={};Object.defineProperty(constants,"__esModule",{value:!0}),constants.TREASURE_TYPE=constants.TREASURE_BOX_TEXTURE_YELLOW_URL=constants.TREASURE_BOX_TEXTURE_RED_URL=constants.DEFAULT_TREASURE_OBJECT_URL=constants.DEFAULT_TREASURE_OBJECT_TYPE=constants.DEFAULT_TREASURE_OBJECT=constants.DEFAULT_TREASURE_FACE_ANIMATION_URLS=constants.DEFAULT_TREASURE_CONFIGS=constants.DEFAULT_TREASURE_CONFIG=void 0;var TREASURE_BASE_URL="//vrlab-public.ljcdn.com/release/static/image/release/baoxiang_xiaobei/1/",DEFAULT_TREASURE_OBJECT_TYPE="FBX";constants.DEFAULT_TREASURE_OBJECT_TYPE=DEFAULT_TREASURE_OBJECT_TYPE;var DEFAULT_TREASURE_OBJECT_URL=TREASURE_BASE_URL+"baoxiang_xiaobei.fbx";constants.DEFAULT_TREASURE_OBJECT_URL=DEFAULT_TREASURE_OBJECT_URL;var DEFAULT_TREASURE_OBJECT={url:DEFAULT_TREASURE_OBJECT_URL,type:DEFAULT_TREASURE_OBJECT_TYPE};constants.DEFAULT_TREASURE_OBJECT=DEFAULT_TREASURE_OBJECT;var DEFAULT_TREASURE_FACE_ANIMATION_URLS=[TREASURE_BASE_URL+"faces/1.png",TREASURE_BASE_URL+"faces/2.png",TREASURE_BASE_URL+"faces/3.png",TREASURE_BASE_URL+"faces/4.png",TREASURE_BASE_URL+"faces/5.png"];constants.DEFAULT_TREASURE_FACE_ANIMATION_URLS=DEFAULT_TREASURE_FACE_ANIMATION_URLS;var TREASURE_BOX_TEXTURE_YELLOW_URL=TREASURE_BASE_URL+"box_Base_Color.png";constants.TREASURE_BOX_TEXTURE_YELLOW_URL=TREASURE_BOX_TEXTURE_YELLOW_URL;var TREASURE_BOX_TEXTURE_RED_URL=TREASURE_BASE_URL+"box_Base_Color_red.png",TREASURE_TYPE;constants.TREASURE_BOX_TEXTURE_RED_URL=TREASURE_BOX_TEXTURE_RED_URL,constants.TREASURE_TYPE=TREASURE_TYPE,function(e){e[e.YELLOW=0]="YELLOW",e[e.RED=1]="RED"}(TREASURE_TYPE||(constants.TREASURE_TYPE=TREASURE_TYPE={}));var DEFAULT_TREASURE_CONFIG={scale:1,boxTextureUrl:void 0,objectUrl:DEFAULT_TREASURE_OBJECT_URL,faceAnimeTextureUrls:DEFAULT_TREASURE_FACE_ANIMATION_URLS};constants.DEFAULT_TREASURE_CONFIG=DEFAULT_TREASURE_CONFIG;var DEFAULT_TREASURE_CONFIGS=[{type:TREASURE_TYPE.YELLOW,config:DEFAULT_TREASURE_CONFIG},{type:TREASURE_TYPE.RED,config:{objectUrl:DEFAULT_TREASURE_OBJECT_URL,boxTextureUrl:TREASURE_BOX_TEXTURE_RED_URL,faceAnimeTextureUrls:DEFAULT_TREASURE_FACE_ANIMATION_URLS}}];constants.DEFAULT_TREASURE_CONFIGS=DEFAULT_TREASURE_CONFIGS;var TreasureObject$1={},global$b=global$S,uncurryThis$e=functionUncurryThis,aCallable$1=aCallable$7,isObject$2=isObject$i,hasOwn$1=hasOwnProperty_1,arraySlice$3=arraySlice$5,Function$2=global$b.Function,concat$2=uncurryThis$e([].concat),join=uncurryThis$e([].join),factories={},construct=function(e,t,r){if(!hasOwn$1(factories,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";factories[t]=Function$2("C,a","return new C("+join(n,",")+")")}return factories[t](e,r)},functionBind=Function$2.bind||function(e){var t=aCallable$1(this),r=t.prototype,n=arraySlice$3(arguments,1),i=function(){var r=concat$2(n,arraySlice$3(arguments));return this instanceof i?construct(t,r.length,r):t.apply(e,r)};return isObject$2(r)&&(i.prototype=r),i},$$d=_export,getBuiltIn=getBuiltIn$8,apply$2=functionApply,bind$1=functionBind,aConstructor=aConstructor$2,anObject$3=anObject$f,isObject$1=isObject$i,create$2=objectCreate,fails$c=fails$t,nativeConstruct=getBuiltIn("Reflect","construct"),ObjectPrototype=Object.prototype,push$2=[].push,NEW_TARGET_BUG=fails$c((function(){function e(){}return!(nativeConstruct((function(){}),[],e)instanceof e)})),ARGS_BUG=!fails$c((function(){nativeConstruct((function(){}))})),FORCED$3=NEW_TARGET_BUG||ARGS_BUG;$$d({target:"Reflect",stat:!0,forced:FORCED$3,sham:FORCED$3},{construct:function(e,t){aConstructor(e),anObject$3(t);var r=arguments.length<3?e:aConstructor(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return apply$2(push$2,n,t),new(apply$2(bind$1,e,n))}var i=r.prototype,o=create$2(isObject$1(i)?i:ObjectPrototype),a=apply$2(e,o,t);return isObject$1(a)?a:o}});var assertThisInitialized={exports:{}};!function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(assertThisInitialized);var inherits={exports:{}},setPrototypeOf={exports:{}};!function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(setPrototypeOf),function(e){var t=setPrototypeOf.exports;e.exports=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&t(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports}(inherits);var possibleConstructorReturn={exports:{}};!function(e){var t=_typeof$5.exports.default,r=assertThisInitialized.exports;e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(possibleConstructorReturn);var getPrototypeOf={exports:{}};!function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(getPrototypeOf);var uncurryThis$d=functionUncurryThis,requireObjectCoercible$3=requireObjectCoercible$7,toString$5=toString$8,quot=/"/g,replace$3=uncurryThis$d("".replace),createHtml=function(e,t,r,n){var i=toString$5(requireObjectCoercible$3(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+replace$3(toString$5(n),quot,"&quot;")+'"'),o+">"+i+"</"+t+">"},fails$b=fails$t,stringHtmlForced=function(e){return fails$b((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},$$c=_export,createHTML=createHtml,forcedStringHTMLMethod=stringHtmlForced;$$c({target:"String",proto:!0,forced:forcedStringHTMLMethod("sub")},{sub:function(){return createHTML(this,"sub","","")}});var TreasureFaceAnime$1={},$$b=_export,global$a=global$S,apply$1=functionApply,isCallable$2=isCallable$m,userAgent$2=engineUserAgent,arraySlice$2=arraySlice$5,MSIE=/MSIE .\./.test(userAgent$2),Function$1=global$a.Function,wrap=function(e){return function(t,r){var n=arguments.length>2,i=n?arraySlice$2(arguments,2):void 0;return e(n?function(){apply$1(isCallable$2(t)?t:Function$1(t),this,i)}:t,r)}};$$b({global:!0,bind:!0,forced:MSIE},{setTimeout:wrap(global$a.setTimeout),setInterval:wrap(global$a.setInterval)});var _interopRequireDefault$8=interopRequireDefault.exports,_typeof$4=_typeof$5.exports;Object.defineProperty(TreasureFaceAnime$1,"__esModule",{value:!0}),TreasureFaceAnime$1.TreasureFaceAnime=void 0;var _regenerator$4=_interopRequireDefault$8(regenerator),_asyncToGenerator2$4=_interopRequireDefault$8(asyncToGenerator.exports),_classCallCheck2$4=_interopRequireDefault$8(classCallCheck.exports),_createClass2$3=_interopRequireDefault$8(createClass.exports),_defineProperty2$4=_interopRequireDefault$8(defineProperty$3.exports),THREE$3=_interopRequireWildcard$4(require$$4);function _getRequireWildcardCache$4(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$4=function(e){return e?r:t})(e)}function _interopRequireWildcard$4(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$4(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$4(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var TreasureFaceAnime=function(){function e(t){var r=this;(0,_classCallCheck2$4.default)(this,e),(0,_defineProperty2$4.default)(this,"paused",!0),(0,_defineProperty2$4.default)(this,"faceAnimeStep",0),(0,_defineProperty2$4.default)(this,"play",(0,_asyncToGenerator2$4.default)(_regenerator$4.default.mark((function e(){var t,n;return _regenerator$4.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.paused){e.next=2;break}return e.abrupt("return",!0);case 2:return r.paused=!1,r.clearTimer(),t=r.faceMesh.material,e.next=7,r.faceTexturesPromise;case 7:if(n=e.sent,!r.paused){e.next=10;break}return e.abrupt("return",!1);case 10:return r.faceAnimeTimer=setInterval((function(){r.faceAnimeStep=(r.faceAnimeStep+1)%n.length;var e=n[r.faceAnimeStep];e.encoding=THREE$3.sRGBEncoding,t.map=e,r.five.needsRender=!0}),300),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})))),this.five=t.five,this.treasureGroup=t.treasureGroup,this.faceTexturesPromise=Promise.all(t.textureUrls.map(t.loadTexture)),this.faceMesh=this.treasureGroup.getObjectByName("face");var n=this.faceMesh.material.map;if(!n)throw new Error("初始化失败，不能从模型文件中找到对应的动画贴图");this.initialFaceTexture=n,this.initialFaceTexture.encoding=THREE$3.sRGBEncoding}return(0,_createClass2$3.default)(e,[{key:"pause",value:function(){return this.paused=!0,this.clearTimer(),!0}},{key:"dispose",value:function(){this.pause()}},{key:"setToInitialState",value:function(){this.faceMesh.material.map=this.initialFaceTexture,this.faceAnimeStep=0,this.five.needsRender=!0}},{key:"clearTimer",value:function(){this.faceAnimeTimer&&clearInterval(this.faceAnimeTimer),this.faceAnimeTimer=void 0}}]),e}();TreasureFaceAnime$1.TreasureFaceAnime=TreasureFaceAnime;var TreasureOpenAnime={},$$a=_export,uncurryThis$c=functionUncurryThis,$IndexOf=arrayIncludes.indexOf,arrayMethodIsStrict$2=arrayMethodIsStrict$4,un$IndexOf=uncurryThis$c([].indexOf),NEGATIVE_ZERO=!!un$IndexOf&&1/un$IndexOf([1],1,-0)<0,STRICT_METHOD$2=arrayMethodIsStrict$2("indexOf");$$a({target:"Array",proto:!0,forced:NEGATIVE_ZERO||!STRICT_METHOD$2},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return NEGATIVE_ZERO?un$IndexOf(this,e,t)||0:$IndexOf(this,e,t)}});var BetterTween$1={},$$9=_export,global$9=global$S,fails$a=fails$t,isArray=isArray$3,isObject=isObject$i,toObject$4=toObject$8,lengthOfArrayLike$1=lengthOfArrayLike$7,createProperty=createProperty$3,arraySpeciesCreate=arraySpeciesCreate$2,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$4,wellKnownSymbol$2=wellKnownSymbol$k,V8_VERSION=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$2("isConcatSpreadable"),MAX_SAFE_INTEGER=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",TypeError$3=global$9.TypeError,IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails$a((function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(e){if(!isObject(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray(e)},FORCED$2=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;$$9({target:"Array",proto:!0,forced:FORCED$2},{concat:function(e){var t,r,n,i,o,a=toObject$4(this),s=arraySpeciesCreate(a,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(isConcatSpreadable(o=-1===t?a:arguments[t])){if(c+(i=lengthOfArrayLike$1(o))>MAX_SAFE_INTEGER)throw TypeError$3(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(r=0;r<i;r++,c++)r in o&&createProperty(s,c,o[r])}else{if(c>=MAX_SAFE_INTEGER)throw TypeError$3(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(s,c++,o)}return s.length=c,s}});var animationFrame={},$$8=_export,global$8=global$S,uncurryThis$b=functionUncurryThis,Date$1=global$8.Date,getTime$1=uncurryThis$b(Date$1.prototype.getTime);$$8({target:"Date",stat:!0},{now:function(){return getTime$1(new Date$1)}});var uncurryThis$a=functionUncurryThis,redefine$2=redefine$a.exports,DatePrototype=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",un$DateToString=uncurryThis$a(DatePrototype[TO_STRING]),getTime=uncurryThis$a(DatePrototype.getTime);String(new Date(NaN))!=INVALID_DATE&&redefine$2(DatePrototype,TO_STRING,(function(){var e=getTime(this);return e==e?un$DateToString(this):INVALID_DATE})),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getFrameTime=function(){var e=Date.now();return new Promise((function(r){t((function(){r(Date.now()-e)}))}))},e.nextFrame=function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(n<=0?r:function(){return e(r,n-1)})},e.requestAnimationFrameInterval=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=-1,o=0,a=-1,s=1e3/n;function c(r){-1===a&&(a=r),i=t(c),r-o<s||(o=r,e&&e(r-a))}return i=t(c),function(){r(i)}};var t=window.requestAnimationFrame||function(e){return setTimeout(e,16)},r=window.cancelAnimationFrame||clearTimeout,n=t;e.default=n}(animationFrame);var _interopRequireDefault$7=interopRequireDefault.exports;Object.defineProperty(BetterTween$1,"__esModule",{value:!0}),BetterTween$1.BetterTween=void 0,BetterTween$1.tweenProgress=tweenProgress;var _classCallCheck2$3=_interopRequireDefault$7(classCallCheck.exports),_assertThisInitialized2$1=_interopRequireDefault$7(assertThisInitialized.exports),_inherits2$1=_interopRequireDefault$7(inherits.exports),_possibleConstructorReturn2$1=_interopRequireDefault$7(possibleConstructorReturn.exports),_getPrototypeOf2$1=_interopRequireDefault$7(getPrototypeOf.exports),_defineProperty2$3=_interopRequireDefault$7(defineProperty$3.exports),_tween=_interopRequireDefault$7(require$$5),_=animationFrame;function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var r,n=(0,_getPrototypeOf2$1.default)(e);if(t){var i=(0,_getPrototypeOf2$1.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,_possibleConstructorReturn2$1.default)(this,r)}}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var BetterTween=function(e){(0,_inherits2$1.default)(r,e);var t=_createSuper$1(r);function r(){var e;(0,_classCallCheck2$3.default)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,_defineProperty2$3.default)((0,_assertThisInitialized2$1.default)(e),"disposeMethods",[]),(0,_defineProperty2$3.default)((0,_assertThisInitialized2$1.default)(e),"onDispose",(function(t){return e.disposeMethods.push(t),(0,_assertThisInitialized2$1.default)(e)})),(0,_defineProperty2$3.default)((0,_assertThisInitialized2$1.default)(e),"play",(function(){return e.start(0),e.animationFrameDisposer=(0,_.requestAnimationFrameInterval)((function(t){return e.update(t)})),(0,_assertThisInitialized2$1.default)(e)})),(0,_defineProperty2$3.default)((0,_assertThisInitialized2$1.default)(e),"dispose",(function(){var t,r;e.stop(),null===(t=(r=e).animationFrameDisposer)||void 0===t||t.call(r),e.disposeMethods.forEach((function(e){return e()})),e.disposeMethods=[],_tween.default.remove((0,_assertThisInitialized2$1.default)(e))})),e}return r}(_tween.default.Tween);function tweenProgress(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_tween.default.Easing.Linear.None,r=new BetterTween({progress:0}).to({progress:1});return void 0!==e&&r.duration(e),void 0!==t&&r.easing(t),r}BetterTween$1.BetterTween=BetterTween;var _interopRequireDefault$6=interopRequireDefault.exports,_typeof$3=_typeof$5.exports;Object.defineProperty(TreasureOpenAnime,"__esModule",{value:!0}),TreasureOpenAnime.TreasurePluginOpenAnime=void 0;var _classCallCheck2$2=_interopRequireDefault$6(classCallCheck.exports),_createClass2$2=_interopRequireDefault$6(createClass.exports),_defineProperty2$2=_interopRequireDefault$6(defineProperty$3.exports),THREE$2=_interopRequireWildcard$3(require$$4),_BetterTween$1=BetterTween$1,_animationFrame=animationFrame;function _getRequireWildcardCache$3(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$3=function(e){return e?r:t})(e)}function _interopRequireWildcard$3(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$3(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$3(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var TreasurePluginOpenAnime=function(){function e(t){var r=this;(0,_classCallCheck2$2.default)(this,e),(0,_defineProperty2$2.default)(this,"hasPlayed",!1),(0,_defineProperty2$2.default)(this,"clock",new THREE$2.Clock),(0,_defineProperty2$2.default)(this,"onPlayFinished",(function(){var e;null===(e=r.animationDispose)||void 0===e||e.call(r);var t=r.treasureGroup.children.filter((function(e){return 0===e.name.indexOf("Plane")||0===e.name.indexOf("coin")}));(0,_BetterTween$1.tweenProgress)(300).onUpdate((function(e){var n=1-e.progress;t.forEach((function(e){e.material.opacity=n})),r.five.needsRender=!0})).play().onComplete((function(){var e,t;return null===(e=(t=r.params).onComplete)||void 0===e?void 0:e.call(t)}))})),this.five=t.five,this.params=t,this.treasureGroup=t.treasureGroup;var n=new THREE$2.AnimationMixer(this.treasureGroup);this.action=n.clipAction(t.animationClip),this.action.setLoop(THREE$2.LoopOnce,1),this.action.clampWhenFinished=!0}return(0,_createClass2$2.default)(e,[{key:"dispose",value:function(){var e;null===(e=this.animationDispose)||void 0===e||e.call(this),this.clock.stop()}},{key:"play",value:function(){var e=this;if(this.hasPlayed)return!1;this.hasPlayed=!0,this.action.play();var t=this.action.getMixer();return this.animationDispose=(0,_animationFrame.requestAnimationFrameInterval)((function(){var r=e.clock.getDelta();t.update(r),e.five.needsRender=!0})),t.addEventListener("finished",this.onPlayFinished),!0}}]),e}();TreasureOpenAnime.TreasurePluginOpenAnime=TreasurePluginOpenAnime;var to={};!function(e){var t=interopRequireDefault.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.to=i;var r=t(regenerator),n=t(asyncToGenerator.exports);function i(e){return o.apply(this,arguments)}function o(){return o=(0,n.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[null,n]);case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=11;break}return e.abrupt("return",[e.t0,null]);case 11:return e.abrupt("return",[new Error(""),null]);case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),o.apply(this,arguments)}var a=i;e.default=a}(to);var _interopRequireDefault$5=interopRequireDefault.exports,_typeof$2=_typeof$5.exports;Object.defineProperty(TreasureObject$1,"__esModule",{value:!0}),TreasureObject$1.TreasureObject=void 0;var _regenerator$3=_interopRequireDefault$5(regenerator),_slicedToArray2$1=_interopRequireDefault$5(slicedToArray.exports),_asyncToGenerator2$3=_interopRequireDefault$5(asyncToGenerator.exports),_classCallCheck2$1=_interopRequireDefault$5(classCallCheck.exports),_createClass2$1=_interopRequireDefault$5(createClass.exports),_assertThisInitialized2=_interopRequireDefault$5(assertThisInitialized.exports),_inherits2=_interopRequireDefault$5(inherits.exports),_possibleConstructorReturn2=_interopRequireDefault$5(possibleConstructorReturn.exports),_getPrototypeOf2=_interopRequireDefault$5(getPrototypeOf.exports),_defineProperty2$1=_interopRequireDefault$5(defineProperty$3.exports),THREE$1=_interopRequireWildcard$2(require$$4),TWEEN=_interopRequireWildcard$2(require$$5),_TreasureFaceAnime=TreasureFaceAnime$1,_TreasureOpenAnime=TreasureOpenAnime,_BetterTween=BetterTween$1,_to$1=_interopRequireDefault$5(to);function _getRequireWildcardCache$2(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$2=function(e){return e?r:t})(e)}function _interopRequireWildcard$2(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$2(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$2(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=(0,_getPrototypeOf2.default)(e);if(t){var i=(0,_getPrototypeOf2.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function copyMaterial(e){return new THREE$1.MeshBasicMaterial({map:e.map,opacity:e.opacity,transparent:e.transparent})}var TreasureObject=function(e){(0,_inherits2.default)(o,e);var t,r,n,i=_createSuper(o);function o(e){var t;(0,_classCallCheck2$1.default)(this,o),t=i.call(this),(0,_defineProperty2$1.default)((0,_assertThisInitialized2.default)(t),"name","treasureObject"),(0,_defineProperty2$1.default)((0,_assertThisInitialized2.default)(t),"opened",!1),(0,_defineProperty2$1.default)((0,_assertThisInitialized2.default)(t),"modelGroupPromise",Promise.resolve({modelGroup:new THREE$1.Group,originGroup:new THREE$1.Group})),(0,_defineProperty2$1.default)((0,_assertThisInitialized2.default)(t),"onFiveWantsTapGesture",(function(e){var r,n,i=e.intersectObject((0,_assertThisInitialized2.default)(t),!0);if(!!i&&i.length>0)return null===(r=(n=t.params).clickCallback)||void 0===r||r.call(n,t.treasureID),t.rotateToCamera(),t.open(),!1})),(0,_defineProperty2$1.default)((0,_assertThisInitialized2.default)(t),"onFivePanoArrived",(function(){t.position.distanceTo(t.five.camera.position)<3&&t.rotateToCamera()})),t.params=e,t.five=e.five,t.treasureID=e.id,t.position.copy(e.position);var r=.008*e.config.scale;return t.scale.fromArray([r,r,r]),t}return(0,_createClass2$1.default)(o,[{key:"load",value:(n=(0,_asyncToGenerator2$3.default)(_regenerator$3.default.mark((function e(){var t,r,n,i=this;return _regenerator$3.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.modelGroupPromise=this.getModelPromise(),e.next=3,this.modelGroupPromise;case 3:return t=e.sent,r=t.modelGroup,n=t.originGroup,this.add(r),this.openAnime=new _TreasureOpenAnime.TreasurePluginOpenAnime({five:this.five,treasureGroup:r,onComplete:function(){var e,t;return null===(e=(t=i.params).onOpenAnimationEnded)||void 0===e?void 0:e.call(t,i.treasureID)},animationClip:n.animations[0]}),this.faceAnime=new _TreasureFaceAnime.TreasureFaceAnime({five:this.five,treasureGroup:r,loadTexture:this.params.loadTexture,textureUrls:this.params.config.faceAnimeTextureUrls}),this.faceAnime.play(),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("wantsTapGesture",this.onFiveWantsTapGesture),this.five.needsRender=!0,e.abrupt("return",this);case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"show",value:(r=(0,_asyncToGenerator2$3.default)(_regenerator$3.default.mark((function e(t){var r,n,i,o=this;return _regenerator$3.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modelGroupPromise;case 2:return n=e.sent,i=n.modelGroup,(0,_BetterTween.tweenProgress)().duration(null!==(r=null==t?void 0:t.duration)&&void 0!==r?r:300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(e){var t=e.progress;i.children.forEach((function(e){var r=e;r.material&&(r.material.opacity=t),o.five.needsRender=!0}))})).play(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"hide",value:function(){var e=(0,_asyncToGenerator2$3.default)(_regenerator$3.default.mark((function e(t){var r,n,i,o=this;return _regenerator$3.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modelGroupPromise;case 2:return n=e.sent,i=n.modelGroup,(0,_BetterTween.tweenProgress)().duration(null!==(r=null==t?void 0:t.duration)&&void 0!==r?r:300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(e){var t=e.progress;i.children.forEach((function(e){var r=e;r.material&&(r.material.opacity=1-t),o.five.needsRender=!0}))})).play(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e,t;null===(e=this.faceAnime)||void 0===e||e.dispose(),null===(t=this.openAnime)||void 0===t||t.dispose(),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("wantsTapGesture",this.onFiveWantsTapGesture)}},{key:"rotateToCamera",value:function(){var e=this;if(!this.opened){var t=this.getWorldDirection(new THREE$1.Vector3).setY(0),r=this.five.camera.position.clone().sub(this.position).setY(0),n=t.clone().cross(r).y>0?1:-1,i=t.clone().angleTo(r),o=Math.ceil(i/8*1e3),a=this.rotation.y;(0,_BetterTween.tweenProgress)(o).onUpdate((function(t){var r=t.progress;e.rotation.y=a+r*i*n})).play()}}},{key:"open",value:function(){var e,t,r;return!!this.openAnime&&(!this.opened&&(this.opened=!0,null===(e=this.faceAnime)||void 0===e||e.pause(),null===(t=this.faceAnime)||void 0===t||t.setToInitialState(),null===(r=this.openAnime)||void 0===r||r.play(),!0))}},{key:"getModelPromise",value:(t=(0,_asyncToGenerator2$3.default)(_regenerator$3.default.mark((function e(){var t,r,n,i,o,a;return _regenerator$3.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.params.loadModelGroup(this.params.config.objectUrl);case 2:if(t=e.sent,(r=t.clone()).traverse((function(e){e instanceof THREE$1.Mesh&&(e.material=copyMaterial(e.material),e.material.map&&(e.material.map.encoding=THREE$1.sRGBEncoding),e.renderOrder=2)})),!this.params.config.boxTextureUrl){e.next=17;break}return e.next=8,(0,_to$1.default)(this.params.loadTexture(this.params.config.boxTextureUrl));case 8:if(n=e.sent,i=(0,_slicedToArray2$1.default)(n,2),o=i[0],a=i[1],!o&&a){e.next=14;break}throw new Error("加载盒子贴图失败");case 14:a.encoding=THREE$1.sRGBEncoding,r.getObjectByName("box").material.map=a,r.getObjectByName("box2").material.map=a;case 17:return e.abrupt("return",{modelGroup:r,originGroup:t});case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),o}(THREE$1.Object3D);TreasureObject$1.TreasureObject=TreasureObject;var getTextureLoader$1={},defineProperty$2=objectDefineProperty.f,create$1=objectCreate,redefineAll=redefineAll$4,bind=functionBindContext,anInstance=anInstance$4,iterate=iterate$4,defineIterator=defineIterator$3,setSpecies=setSpecies$2,DESCRIPTORS$2=descriptors,fastKey=internalMetadata.exports.fastKey,InternalStateModule=internalState,setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,collectionStrong$1={getConstructor:function(e,t,r,n){var i=e((function(e,i){anInstance(e,o),setInternalState(e,{type:t,index:create$1(null),first:void 0,last:void 0,size:0}),DESCRIPTORS$2||(e.size=0),null!=i&&iterate(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,a=internalStateGetterFor(t),s=function(e,t,r){var n,i,o=a(e),s=c(e,t);return s?s.value=r:(o.last=s={index:i=fastKey(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),DESCRIPTORS$2?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var r,n=a(e),i=fastKey(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return redefineAll(o,{clear:function(){for(var e=a(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,DESCRIPTORS$2?e.size=0:this.size=0},delete:function(e){var t=this,r=a(t),n=c(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),DESCRIPTORS$2?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=a(this),n=bind(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),redefineAll(o,r?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),DESCRIPTORS$2&&defineProperty$2(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=internalStateGetterFor(t),o=internalStateGetterFor(n);defineIterator(e,t,(function(e,t){setInternalState(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),setSpecies(t)}},collection=collection$2,collectionStrong=collectionStrong$1;collection("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),collectionStrong);var loadTexture$1={},_interopRequireDefault$4=interopRequireDefault.exports;Object.defineProperty(loadTexture$1,"__esModule",{value:!0}),loadTexture$1.loadTexture=loadTexture;var _regenerator$2=_interopRequireDefault$4(regenerator),_asyncToGenerator2$2=_interopRequireDefault$4(asyncToGenerator.exports),_three=require$$4,textureLoader=new _three.TextureLoader;function loadTexture(e){return _loadTexture$1.apply(this,arguments)}function _loadTexture$1(){return _loadTexture$1=(0,_asyncToGenerator2$2.default)(_regenerator$2.default.mark((function e(t){return _regenerator$2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){textureLoader.load(t,e,void 0,r)})));case 1:case"end":return e.stop()}}),e)}))),_loadTexture$1.apply(this,arguments)}Object.defineProperty(getTextureLoader$1,"__esModule",{value:!0}),getTextureLoader$1.getTextureLoader=getTextureLoader;var _loadTexture=loadTexture$1;function getTextureLoader(){var e=new Map;return{load:function(t){if(e.has(t))return e.get(t);var r=(0,_loadTexture.loadTexture)(t);return e.set(t,r),r},dispose:function(){e.forEach((function(e){return e.then((function(e){return e.dispose()}))})),e.clear()}}}var getExtraModelLoader$1={},loadFbxObj$1={},mod={},l=void 0,aa=mod;function r(e,t){var r,n=e.split("."),i=aa;!(n[0]in i)&&i.execScript&&i.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||t===l?i=i[r]?i[r]:i[r]={}:i[r]=t}var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function v(e){var r,n,i,o,a,s,c,u,l,f,h=e.length,p=0,d=Number.POSITIVE_INFINITY;for(u=0;u<h;++u)e[u]>p&&(p=e[u]),e[u]<d&&(d=e[u]);for(r=1<<p,n=new(t?Uint32Array:Array)(r),i=1,o=0,a=2;i<=p;){for(u=0;u<h;++u)if(e[u]===i){for(s=0,c=o,l=0;l<i;++l)s=s<<1|1&c,c>>=1;for(f=i<<16|u,l=s;l<r;l+=a)n[l]=f;++o}++i,o<<=1,a<<=1}return[n,p,d]}function w(e,r){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(e):e,this.m=!1,this.i=y,this.r=!1,!r&&(r={})||(r.index&&(this.a=r.index),r.bufferSize&&(this.h=r.bufferSize),r.bufferType&&(this.i=r.bufferType),r.resize&&(this.r=r.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var e=C(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var r=this.input,n=this.a,i=this.c,o=this.b,a=r.length,s=l,c=i.length,u=l;if(this.d=this.f=0,n+1>=a)throw Error("invalid uncompressed block header: LEN");if(s=r[n++]|r[n++]<<8,n+1>=a)throw Error("invalid uncompressed block header: NLEN");if(s===~(r[n++]|r[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+s>r.length)throw Error("input buffer is broken");switch(this.i){case A:for(;o+s>i.length;){if(s-=u=c-o,t)i.set(r.subarray(n,n+u),o),o+=u,n+=u;else for(;u--;)i[o++]=r[n++];this.b=o,i=this.e(),o=this.b}break;case y:for(;o+s>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)i.set(r.subarray(n,n+s),o),o+=s,n+=s;else for(;s--;)i[o++]=r[n++];this.a=n,this.b=o,this.c=i;break;case 1:this.j(ba,ca);break;case 2:var f,h,p,d,m=C(this,5)+257,g=C(this,5)+1,b=C(this,4)+4,_=new(t?Uint8Array:Array)(D.length),M=l,x=l,w=l,$=l,T=l;for(T=0;T<b;++T)_[D[T]]=C(this,3);if(!t)for(T=b,b=_.length;T<b;++T)_[D[T]]=0;for(f=v(_),M=new(t?Uint8Array:Array)(m+g),T=0,d=m+g;T<d;)switch(x=E(this,f)){case 16:for($=3+C(this,2);$--;)M[T++]=w;break;case 17:for($=3+C(this,3);$--;)M[T++]=0;w=0;break;case 18:for($=11+C(this,7);$--;)M[T++]=0;w=0;break;default:w=M[T++]=x}h=v(t?M.subarray(0,m):M.slice(0,m)),p=v(t?M.subarray(m):M.slice(m)),this.j(h,p);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P,fa;for(P=0,fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new(t?Uint8Array:Array)(30),R,ga;for(R=0,ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(e,t){for(var r,n=e.f,i=e.d,o=e.input,a=e.a,s=o.length;i<t;){if(a>=s)throw Error("input buffer is broken");n|=o[a++]<<i,i+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=i-t,e.a=a,r}function E(e,t){for(var r,n,i=e.f,o=e.d,a=e.input,s=e.a,c=a.length,u=t[0],l=t[1];o<l&&!(s>=c);)i|=a[s++]<<o,o+=8;if((n=(r=u[i&(1<<l)-1])>>>16)>o)throw Error("invalid code length: "+n);return e.f=i>>n,e.d=o-n,e.a=s,65535&r}function W(e,t){var r,n;if(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),r=e[this.a++],n=e[this.a++],(15&r)!==ha)throw Error("unsupported compression method");if(this.method=ha,0!=((r<<8)+n)%31)throw Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new w(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}w.prototype.j=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,o,a,s,c=r.length-258;256!==(i=E(this,e));)if(256>i)n>=c&&(this.b=n,r=this.e(),n=this.b),r[n++]=i;else for(s=I[o=i-257],0<K[o]&&(s+=C(this,K[o])),i=E(this,t),a=da[i],0<N[i]&&(a+=C(this,N[i])),n>=c&&(this.b=n,r=this.e(),n=this.b);s--;)r[n]=r[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},w.prototype.w=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,o,a,s,c=r.length;256!==(i=E(this,e));)if(256>i)n>=c&&(c=(r=this.e()).length),r[n++]=i;else for(s=I[o=i-257],0<K[o]&&(s+=C(this,K[o])),i=E(this,t),a=da[i],0<N[i]&&(a+=C(this,N[i])),n+s>c&&(c=(r=this.e()).length);s--;)r[n]=r[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},w.prototype.e=function(){var e,r,n=new(t?Uint8Array:Array)(this.b-32768),i=this.b-32768,o=this.c;if(t)n.set(o.subarray(32768,n.length));else for(e=0,r=n.length;e<r;++e)n[e]=o[e+32768];if(this.g.push(n),this.l+=n.length,t)o.set(o.subarray(i,i+32768));else for(e=0;32768>e;++e)o[e]=o[i+e];return this.b=32768,o},w.prototype.z=function(e){var r,n,i,o=this.input.length/this.a+1|0,a=this.input,s=this.c;return e&&("number"==typeof e.p&&(o=e.p),"number"==typeof e.u&&(o+=e.u)),2>o?n=(i=(a.length-this.a)/this.o[2]/2*258|0)<s.length?s.length+i:s.length<<1:n=s.length*o,t?(r=new Uint8Array(n)).set(s):r=s,this.c=r},w.prototype.n=function(){var e,r,n,i,o,a=0,s=this.c,c=this.g,u=new(t?Uint8Array:Array)(this.l+(this.b-32768));if(0===c.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,n=c.length;r<n;++r)for(i=0,o=(e=c[r]).length;i<o;++i)u[a++]=e[i];for(r=32768,n=this.b;r<n;++r)u[a++]=s[r];return this.g=[],this.buffer=u},w.prototype.v=function(){var e,r=this.b;return t?this.r?(e=new Uint8Array(r)).set(this.c.subarray(0,r)):e=this.c.subarray(0,r):(this.c.length>r&&(this.c.length=r),e=this.c),this.buffer=e},W.prototype.k=function(){var e,t,r=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"==typeof n){var i,o,a=n.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;n=a}for(var s,c=1,u=0,l=n.length,f=0;0<l;){l-=s=1024<l?1024:l;do{u+=c+=n[f++]}while(--s);c%=65521,u%=65521}if(t!==(u<<16|c)>>>0)throw Error("invalid adler-32 checksum")}return e};var ha=8;r("Zlib.Inflate",W),r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$$7,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$$7=0,X)Y[$$7++]=Z;for($$7=0,ia=Y.length;$$7<ia;++$$7)Z=Y[$$7],r("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(e,t,r){var n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;for(var i=e,o=n,a=Math.floor((i+o)/2);t<r[a]||t>=r[a+1];)t<r[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(e,t,r,n){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=r;++s){o[s]=t-n[e+1-s],a[s]=n[e+s]-t;for(var c=0,u=0;u<s;++u){var l=a[u+1],f=o[s-u],h=i[u]/(l+f);i[u]=c+l*h,c=f*h}i[s]=c}return i},calcBSplinePoint:function(e,t,r,n){for(var i=this.findSpan(e,n,t),o=this.calcBasisFunctions(i,n,e,t),a=new Vector4(0,0,0,0),s=0;s<=e;++s){var c=r[i-e+s],u=o[s],l=c.w*u;a.x+=c.x*l,a.y+=c.y*l,a.z+=c.z*l,a.w+=c.w*u}return a},calcBasisFunctionDerivatives:function(e,t,r,n,i){for(var o=[],a=0;a<=r;++a)o[a]=0;var s=[];for(a=0;a<=n;++a)s[a]=o.slice(0);var c=[];for(a=0;a<=r;++a)c[a]=o.slice(0);c[0][0]=1;for(var u=o.slice(0),l=o.slice(0),f=1;f<=r;++f){u[f]=t-i[e+1-f],l[f]=i[e+f]-t;for(var h=0,p=0;p<f;++p){var d=l[p+1],m=u[f-p];c[f][p]=d+m;var g=c[p][f-1]/c[f][p];c[p][f]=h+d*g,h=m*g}c[f][f]=h}for(f=0;f<=r;++f)s[0][f]=c[f][r];for(p=0;p<=r;++p){var v=0,y=1,b=[];for(a=0;a<=r;++a)b[a]=o.slice(0);b[0][0]=1;for(var _=1;_<=n;++_){var A=0,M=p-_,x=r-_;p>=_&&(b[y][0]=b[v][0]/c[x+1][M],A=b[y][0]*c[M][x]);var w=p-1<=x?_-1:r-p;for(f=M>=-1?1:-M;f<=w;++f)b[y][f]=(b[v][f]-b[v][f-1])/c[x+1][M+f],A+=b[y][f]*c[M+f][x];p<=x&&(b[y][_]=-b[v][_-1]/c[x+1][p],A+=b[y][_]*c[p][x]),s[_][p]=A;f=v;v=y,y=f}}for(p=r,_=1;_<=n;++_){for(f=0;f<=r;++f)s[_][f]*=p;p*=r-_}return s},calcBSplineDerivatives:function(e,t,r,n,i){for(var o=i<e?i:e,a=[],s=this.findSpan(e,n,t),c=this.calcBasisFunctionDerivatives(s,n,e,o,t),u=[],l=0;l<r.length;++l){var f=(p=r[l].clone()).w;p.x*=f,p.y*=f,p.z*=f,u[l]=p}for(var h=0;h<=o;++h){for(var p=u[s-e].clone().multiplyScalar(c[h][0]),d=1;d<=e;++d)p.add(u[s-e+d].clone().multiplyScalar(c[h][d]));a[h]=p}for(h=o+1;h<=i+1;++h)a[h]=new Vector4(0,0,0);return a},calcKoverI:function(e,t){for(var r=1,n=2;n<=e;++n)r*=n;var i=1;for(n=2;n<=t;++n)i*=n;for(n=2;n<=e-t;++n)i*=n;return r/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,r=[],n=[],i=0;i<t;++i){var o=e[i];r[i]=new Vector3(o.x,o.y,o.z),n[i]=o.w}for(var a=[],s=0;s<t;++s){var c=r[s].clone();for(i=1;i<=s;++i)c.sub(a[s-i].clone().multiplyScalar(this.calcKoverI(s,i)*n[i]));a[s]=c.divideScalar(n[0])}return a},calcNURBSDerivatives:function(e,t,r,n,i){var o=this.calcBSplineDerivatives(e,t,r,n,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,r,n,i,o,a,s){for(var c=this.findSpan(e,o,r),u=this.findSpan(t,a,n),l=this.calcBasisFunctions(c,o,e,r),f=this.calcBasisFunctions(u,a,t,n),h=[],p=0;p<=t;++p){h[p]=new Vector4(0,0,0,0);for(var d=0;d<=e;++d){var m=i[c-e+d][u-t+p].clone(),g=m.w;m.x*=g,m.y*=g,m.z*=g,h[p].add(m.multiplyScalar(l[d]))}}var v=new Vector4(0,0,0,0);for(p=0;p<=t;++p)v.add(h[p].multiplyScalar(f[p]));v.divideScalar(v.w),s.set(v.x,v.y,v.z)}},NURBSCurve=function(e,t,r,n,i){Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=i||this.knots.length-1;for(var o=0;o<r.length;++o){var a=r[o];this.controlPoints[o]=new Vector4(a.x,a.y,a.z,a.w)}};NURBSCurve.prototype=Object.create(Curve.prototype),NURBSCurve.prototype.constructor=NURBSCurve,NURBSCurve.prototype.getPoint=function(e,t){var r=t||new Vector3,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,n);return 1!=i.w&&i.divideScalar(i.w),r.set(i.x,i.y,i.z)},NURBSCurve.prototype.getTangent=function(e,t){var r=t||new Vector3,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,n,1);return r.copy(i[1]).normalize(),r};var FBXLoader=function(){var t,r,n;function i(e){Loader.call(this,e)}function o(e,t){this.textureLoader=e,this.manager=t}function a(){}function s(){}function c(){}function u(){}function l(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function f(){}function h(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(e){return e/46186158e3}i.prototype=Object.assign(Object.create(Loader.prototype),{constructor:i,load:function(t,r,n,i){var o=this,a=""===o.path?LoaderUtils.extractUrlBase(t):o.path,s=new FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.load(t,(function(n){try{r(o.parse(n,a))}catch(e){i?i(e):console.error(e),o.manager.itemError(t)}}),n,i)},parse:function(e,r){if(function(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===A(e,0,t.length)}(e))t=(new u).parse(e);else{var n=A(e);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(t){var n=e[t-1];return e=e.slice(r+t),r++,n}for(var i=0;i<t.length;++i){if(n(1)===t[i])return!1}return!0}(n))throw new Error("THREE.FBXLoader: Unknown format.");if(h(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+h(n));t=(new c).parse(n)}return new o(new TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin),this.manager).parse(t)}}),o.prototype={constructor:o,parse:function(){r=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),o=this.parseDeformers(),s=(new a).parse(o);return this.parseScene(o,s,i),n},parseConnections:function(){var e=new Map;"Connections"in t&&t.Connections.connections.forEach((function(t){var r=t[0],n=t[1],i=t[2];e.has(r)||e.set(r,{parents:[],children:[]});var o={ID:n,relationship:i};e.get(r).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});var a={ID:r,relationship:i};e.get(n).children.push(a)}));return e},parseImages:function(){var e={},r={};if("Video"in t.Objects){var n=t.Objects.Video;for(var i in n){var o=n[i];if(e[u=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var c=this.parseImage(n[i]);r[o.RelativeFilename||o.Filename]=c}}}}for(var u in e){var l=e[u];void 0!==r[l]?e[u]=r[l]:e[u]=e[u].split("\\").pop()}return e},parseImage:function(e){var t,r=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof r)return"data:"+t+";base64,"+r;var o=new Uint8Array(r);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(e){var r=new Map;if("Texture"in t.Objects){var n=t.Objects.Texture;for(var i in n){var o=this.parseTexture(n[i],e);r.set(parseInt(i),o)}}return r},parseTexture:function(e,t){var r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;var n=e.WrapModeU,i=e.WrapModeV,o=void 0!==n?n.value:0,a=void 0!==i?i.value:0;if(r.wrapS=0===o?RepeatWrapping:ClampToEdgeWrapping,r.wrapT=0===a?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;r.repeat.x=s[0],r.repeat.y=s[1]}return r},loadTexture:function(e,t){var n,i,o=this.textureLoader.path,a=r.get(e.id).children;void 0!==a&&a.length>0&&void 0!==t[a[0].ID]&&(0!==(n=t[a[0].ID]).indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));var s=e.FileName.slice(-3).toLowerCase();if("tga"===s){var c=this.manager.getHandler(".tga");null===c?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),i=new Texture):i=c.load(n)}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),i=new Texture):i=this.textureLoader.load(n);return this.textureLoader.setPath(o),i},parseMaterials:function(e){var r=new Map;if("Material"in t.Objects){var n=t.Objects.Material;for(var i in n){var o=this.parseMaterial(n[i],e);null!==o&&r.set(parseInt(i),o)}}return r},parseMaterial:function(e,t){var n=e.id,i=e.attrName,o=e.ShadingModel;if("object"===_typeof2(o)&&(o=o.value),!r.has(n))return null;var a,s=this.parseParameters(e,t,n);switch(o.toLowerCase()){case"phong":a=new MeshPhongMaterial;break;case"lambert":a=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new MeshPhongMaterial}return a.setValues(s),a.name=i,a},parseParameters:function(e,t,n){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=(new Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(i.emissive=(new Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new Color).fromArray(e.SpecularColor.value));var o=this;return r.get(n).children.forEach((function(e){var r=e.relationship;switch(r){case"Bump":i.bumpMap=o.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(t,e.ID),i.map.encoding=sRGBEncoding;break;case"DisplacementColor":i.displacementMap=o.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(t,e.ID),i.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=o.getTexture(t,e.ID),i.envMap.mapping=EquirectangularReflectionMapping,i.envMap.encoding=sRGBEncoding;break;case"SpecularColor":i.specularMap=o.getTexture(t,e.ID),i.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}})),i},getTexture:function(e,n){return"LayeredTexture"in t.Objects&&n in t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=r.get(n).children[0].ID),e.get(n)},parseDeformers:function(){var e={},n={};if("Deformer"in t.Objects){var i=t.Objects.Deformer;for(var o in i){var a=i[o],s=r.get(parseInt(o));if("Skin"===a.attrType){var c=this.parseSkeleton(s,i);c.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,e[o]=c}else if("BlendShape"===a.attrType){var u={id:o};u.rawTargets=this.parseMorphTargets(s,i),u.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[o]=u}}}return{skeletons:e,morphTargets:n}},parseSkeleton:function(e,t){var r=[];return e.children.forEach((function(e){var n=t[e.ID];if("Cluster"===n.attrType){var i={ID:e.ID,indices:[],weights:[],transformLink:(new Matrix4).fromArray(n.TransformLink.a)};"Indexes"in n&&(i.indices=n.Indexes.a,i.weights=n.Weights.a),r.push(i)}})),{rawBones:r,bones:[]}},parseMorphTargets:function(e,t){for(var n=[],i=0;i<e.children.length;i++){var o=e.children[i],a=t[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=r.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(s)}return n},parseScene:function(e,i,o){n=new Group$1;var a=this.parseModels(e.skeletons,i,o),c=t.Objects.Model,u=this;a.forEach((function(e){var t=c[e.ID];u.setLookAtProperties(e,t),r.get(e.ID).parents.forEach((function(t){var r=a.get(t.ID);void 0!==r&&r.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(e.skeletons,i,a),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=y(e.userData.transformData);e.applyMatrix4(t)}}));var l=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=l,n=n.children[0]),n.animations=l},parseModels:function(e,n,i){var o=new Map,a=t.Objects.Model;for(var s in a){var c=parseInt(s),u=a[s],l=r.get(c),f=this.buildSkeleton(l,e,c,u.attrName);if(!f){switch(u.attrType){case"Camera":f=this.createCamera(l);break;case"Light":f=this.createLight(l);break;case"Mesh":f=this.createMesh(l,n,i);break;case"NurbsCurve":f=this.createCurve(l,n);break;case"LimbNode":case"Root":f=new Bone;break;default:f=new Group$1}f.name=u.attrName?PropertyBinding.sanitizeNodeName(u.attrName):"",f.ID=c}this.getTransformData(f,u),o.set(c,f)}return o},buildSkeleton:function(e,t,r,n){var i=null;return e.parents.forEach((function(e){for(var o in t){var a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){var s=i;(i=new Bone).matrixWorld.copy(t.transformLink),i.name=n?PropertyBinding.sanitizeNodeName(n):"",i.ID=r,a.bones[o]=i,null!==s&&i.add(s)}}))}})),i},createCamera:function(e){var r,n;if(e.children.forEach((function(e){var r=t.Objects.NodeAttribute[e.ID];void 0!==r&&(n=r)})),void 0===n)r=new Object3D;else{var i=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(i=1);var o=1;void 0!==n.NearPlane&&(o=n.NearPlane.value/1e3);var a=1e3;void 0!==n.FarPlane&&(a=n.FarPlane.value/1e3);var s=window.innerWidth,c=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,c=n.AspectHeight.value);var u=s/c,l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);var f=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:r=new PerspectiveCamera(l,u,o,a),null!==f&&r.setFocalLength(f);break;case 1:r=new OrthographicCamera(-s/2,s/2,c/2,-c/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),r=new Object3D}}return r},createLight:function(e){var r,n;if(e.children.forEach((function(e){var r=t.Objects.NodeAttribute[e.ID];void 0!==r&&(n=r)})),void 0===n)r=new Object3D;else{var i;i=void 0===n.LightType?0:n.LightType.value;var o=16777215;void 0!==n.Color&&(o=(new Color).fromArray(n.Color.value));var a=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(a=0);var s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);switch(i){case 0:r=new PointLight(o,a,s,1);break;case 1:r=new DirectionalLight(o,a);break;case 2:var c=Math.PI/3;void 0!==n.InnerAngle&&(c=MathUtils.degToRad(n.InnerAngle.value));var u=0;void 0!==n.OuterAngle&&(u=MathUtils.degToRad(n.OuterAngle.value),u=Math.max(u,1)),r=new SpotLight(o,a,s,c,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),r=new PointLight(o,a)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(r.castShadow=!0)}return r},createMesh:function(e,t,r){var n,i=null,o=null,a=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),r.has(e.ID)&&a.push(r.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new MeshPhongMaterial({color:13421772}),a.push(o)),"color"in i.attributes&&a.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(a.forEach((function(e){e.skinning=!0})),(n=new SkinnedMesh(i,o)).normalizeSkinWeights()):n=new Mesh(i,o),n},createCurve:function(e,t){return new Line(e.children.reduce((function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e}),null),new LineBasicMaterial({color:3342591,linewidth:1}))},getTransformData:function(e,t){var r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),r.eulerOrder="RotationOrder"in t?b(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r},setLookAtProperties:function(e,i){"LookAtProperty"in i&&r.get(e.ID).children.forEach((function(r){if("LookAtProperty"===r.relationship){var i=t.Objects.Model[r.ID];if("Lcl_Translation"in i){var o=i.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(o),n.add(e.target)):e.lookAt((new Vector3).fromArray(o))}}}))},bindSkeleton:function(e,t,n){var i=this.parsePoseNodes();for(var o in e){var a=e[o];r.get(parseInt(a.ID)).parents.forEach((function(e){if(t.has(e.ID)){var o=e.ID;r.get(o).parents.forEach((function(e){n.has(e.ID)&&n.get(e.ID).bind(new Skeleton(a.bones),i[e.ID])}))}}))}},parsePoseNodes:function(){var e={};if("Pose"in t.Objects){var r=t.Objects.Pose;for(var n in r)if("BindPose"===r[n].attrType){var i=r[n].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new Matrix4).fromArray(t.Matrix.a)})):e[i.Node]=(new Matrix4).fromArray(i.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in t&&"AmbientColor"in t.GlobalSettings){var e=t.GlobalSettings.AmbientColor.value,r=e[0],i=e[1],o=e[2];if(0!==r||0!==i||0!==o){var a=new Color(r,i,o);n.add(new AmbientLight(a,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(r,n){e.setupMorphMaterial(t,r,n)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var i=e.uuid,o=t.uuid,a=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==i&&(a=!0)})):e.material.uuid===o&&e.uuid!==i&&(a=!0))})),!0===a){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},a.prototype={constructor:a,parse:function(e){var n=new Map;if("Geometry"in t.Objects){var i=t.Objects.Geometry;for(var o in i){var a=r.get(parseInt(o)),s=this.parseGeometry(a,i[o],e);n.set(parseInt(o),s)}}return n},parseGeometry:function(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(e,r,n){var i=n.skeletons,o=[],a=e.parents.map((function(e){return t.Objects.Model[e.ID]}));if(0!==a.length){var s=e.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&o.push(n.morphTargets[e.ID])}));var c=a[0],u={};"RotationOrder"in c&&(u.eulerOrder=b(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);var l=y(u);return this.genGeometry(r,s,o,l)}},genGeometry:function(e,t,r,n){var i=new BufferGeometry;e.attrName&&(i.name=e.attrName);var o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new Float32BufferAttribute(a.vertex,3);if(s.applyMatrix4(n),i.setAttribute("position",s),a.colors.length>0&&i.setAttribute("color",new Float32BufferAttribute(a.colors,3)),t&&(i.setAttribute("skinIndex",new Uint16BufferAttribute(a.weightsIndices,4)),i.setAttribute("skinWeight",new Float32BufferAttribute(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){var c=(new Matrix3).getNormalMatrix(n),u=new Float32BufferAttribute(a.normal,3);u.applyNormalMatrix(c),i.setAttribute("normal",u)}if(a.uvs.forEach((function(e,t){var r="uv"+(t+1).toString();0===t&&(r="uv"),i.setAttribute(r,new Float32BufferAttribute(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){var l=a.materialIndex[0],f=0;if(a.materialIndex.forEach((function(e,t){e!==l&&(i.addGroup(f,t-f,l),l=e,f=t)})),i.groups.length>0){var h=i.groups[i.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&i.addGroup(p,a.materialIndex.length-p,l)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,r,n),i},parseGeoNode:function(e,t){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var n=0;e.LayerElementUV[n];)r.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,i){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[i]})}))}))),r},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,i=!1,o=[],a=[],s=[],c=[],u=[],l=[],f=this;return e.vertexIndices.forEach((function(h,p){var d=!1;h<0&&(h^=-1,d=!0);var g=[],v=[];if(o.push(3*h,3*h+1,3*h+2),e.color){var y=m(p,r,h,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var b=[0,0,0,0],_=[0,0,0,0];v.forEach((function(e,t){var r=e,n=g[t];_.forEach((function(e,t,i){if(r>e){i[t]=r,r=e;var o=b[t];b[t]=n,n=o}}))})),g=b,v=_}for(;v.length<4;)v.push(0),g.push(0);for(var A=0;A<4;++A)u.push(v[A]),l.push(g[A])}if(e.normal){y=m(p,r,h,e.normal);a.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var M=m(p,r,h,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var n=m(p,r,h,e);void 0===c[t]&&(c[t]=[]),c[t].push(n[0]),c[t].push(n[1])})),n++,d&&(f.genFace(t,e,o,M,a,s,c,u,l,n),r++,n=0,o=[],a=[],s=[],c=[],u=[],l=[])})),t},genFace:function(e,t,r,n,i,o,a,s,c,u){for(var l=2;l<u;l++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[3*(l-1)]]),e.vertex.push(t.vertexPositions[r[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[r[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[r[3*l]]),e.vertex.push(t.vertexPositions[r[3*l+1]]),e.vertex.push(t.vertexPositions[r[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(l-1)]),e.weightsIndices.push(c[4*(l-1)+1]),e.weightsIndices.push(c[4*(l-1)+2]),e.weightsIndices.push(c[4*(l-1)+3]),e.weightsIndices.push(c[4*l]),e.weightsIndices.push(c[4*l+1]),e.weightsIndices.push(c[4*l+2]),e.weightsIndices.push(c[4*l+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(l-1)]),e.colors.push(o[3*(l-1)+1]),e.colors.push(o[3*(l-1)+2]),e.colors.push(o[3*l]),e.colors.push(o[3*l+1]),e.colors.push(o[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(l-1)]),e.normal.push(i[3*(l-1)+1]),e.normal.push(i[3*(l-1)+2]),e.normal.push(i[3*l]),e.normal.push(i[3*l+1]),e.normal.push(i[3*l+2])),t.uv&&t.uv.forEach((function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(a[r][0]),e.uvs[r].push(a[r][1]),e.uvs[r].push(a[r][2*(l-1)]),e.uvs[r].push(a[r][2*(l-1)+1]),e.uvs[r].push(a[r][2*l]),e.uvs[r].push(a[r][2*l+1])}))},addMorphTargets:function(e,r,n,i){if(0!==n.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var o=this;n.forEach((function(n){n.rawTargets.forEach((function(n){var a=t.Objects.Geometry[n.geoID];void 0!==a&&o.genMorphGeometry(e,r,a,i,n.name)}))}))}},genMorphGeometry:function(e,t,r,n,i){for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==r.Vertices?r.Vertices.a:[],s=void 0!==r.Indexes?r.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c),l=0;l<s.length;l++){var f=3*s[l];u[f]=a[3*l],u[f+1]=a[3*l+1],u[f+2]=a[3*l+2]}var h={vertexIndices:o,vertexPositions:u},p=new Float32BufferAttribute(this.genBuffers(h).vertex,3);p.name=i||r.attrName,p.applyMatrix4(n),e.morphAttributes.position.push(p)},parseNormals:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,i=[];return"IndexToDirect"===r&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:i,mappingType:t,referenceType:r}},parseUVs:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,i=[];return"IndexToDirect"===r&&(i=e.UVIndex.a),{dataSize:2,buffer:n,indices:i,mappingType:t,referenceType:r}},parseVertexColors:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,i=[];return"IndexToDirect"===r&&(i=e.ColorIndex.a),{dataSize:4,buffer:n,indices:i,mappingType:t,referenceType:r}},parseMaterialIndices:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.Materials.a,i=[],o=0;o<n.length;++o)i.push(o);return{dataSize:1,buffer:n,indices:i,mappingType:t,referenceType:r}},parseNurbsGeometry:function(e){if(void 0===NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new BufferGeometry;for(var r,n,i=t-1,o=e.KnotVector.a,a=[],s=e.Points.a,c=0,u=s.length;c<u;c+=4)a.push((new Vector4).fromArray(s,c));if("Closed"===e.Form)a.push(a[0]);else if("Periodic"===e.Form){r=i,n=o.length-1-r;for(c=0;c<i;++c)a.push(a[c])}var l=new NURBSCurve(i,o,a,r,n).getPoints(7*a.length),f=new Float32Array(3*l.length);l.forEach((function(e,t){e.toArray(f,3*t)}));var h=new BufferGeometry;return h.setAttribute("position",new BufferAttribute(f,3)),h}},s.prototype={constructor:s,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var r in t){var n=t[r],i=this.addClip(n);e.push(i)}return e},parseClips:function(){if(void 0!==t.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var r=this.parseAnimationLayers(e);return this.parseAnimStacks(r)}},parseAnimationCurveNodes:function(){var e=t.Objects.AnimationCurveNode,r=new Map;for(var n in e){var i=e[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};r.set(o.id,o)}}return r},parseAnimationCurves:function(e){var n=t.Objects.AnimationCurve;for(var i in n){var o={id:n[i].id,times:n[i].KeyTime.a.map(p),values:n[i].KeyValueFloat.a},a=r.get(o.id);if(void 0!==a){var s=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?e.get(s).curves.x=o:c.match(/Y/)?e.get(s).curves.y=o:c.match(/Z/)?e.get(s).curves.z=o:c.match(/d|DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=o)}}},parseAnimationLayers:function(e){var i=t.Objects.AnimationLayer,o=new Map;for(var a in i){var s=[],c=r.get(parseInt(a));if(void 0!==c)c.children.forEach((function(i,o){if(e.has(i.ID)){var a=e.get(i.ID);if(void 0!==a.curves.x||void 0!==a.curves.y||void 0!==a.curves.z){if(void 0===s[o])if(void 0!==(p=r.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){if(void 0===(u=t.Objects.Model[p.toString()]))return void console.warn("THREE.FBXLoader: Encountered a unused curve.",i);var c={modelName:u.attrName?PropertyBinding.sanitizeNodeName(u.attrName):"",ID:u.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===u.id&&(c.transform=e.matrix,e.userData.transformData&&(c.eulerOrder=e.userData.transformData.eulerOrder))})),c.transform||(c.transform=new Matrix4),"PreRotation"in u&&(c.preRotation=u.PreRotation.value),"PostRotation"in u&&(c.postRotation=u.PostRotation.value),s[o]=c}s[o]&&(s[o][a.attr]=a)}else if(void 0!==a.curves.morph){if(void 0===s[o]){var u,l=r.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,f=r.get(l).parents[0].ID,h=r.get(f).parents[0].ID,p=r.get(h).parents[0].ID;c={modelName:(u=t.Objects.Model[p]).attrName?PropertyBinding.sanitizeNodeName(u.attrName):"",morphName:t.Objects.Deformer[l].attrName};s[o]=c}s[o][a.attr]=a}}})),o.set(parseInt(a),s)}return o},parseAnimStacks:function(e){var n=t.Objects.AnimationStack,i={};for(var o in n){var a=r.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=e.get(a[0].ID);i[o]={name:n[o].attrName,layer:s}}return i},addClip:function(e){var t=[],r=this;return e.layer.forEach((function(e){t=t.concat(r.generateTracks(e))})),new AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],r=new Vector3,n=new Quaternion,i=new Vector3;if(e.transform&&e.transform.decompose(r,n,i),r=r.toArray(),n=(new Euler).setFromQuaternion(n,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var a=this.generateRotationTrack(e.modelName,e.R.curves,n,e.preRotation,e.postRotation,e.eulerOrder);void 0!==a&&t.push(a)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&t.push(c)}return t},generateVectorTrack:function(e,t,r,n){var i=this.getTimesForAllAxes(t);return new VectorKeyframeTrack(e+"."+n,i,this.getKeyframeTrackValues(i,t,r))},generateRotationTrack:function(e,t,r,n,i,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(MathUtils.degToRad));var a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,r);void 0!==n&&((n=n.map(MathUtils.degToRad)).push(o),n=(new Euler).fromArray(n),n=(new Quaternion).setFromEuler(n)),void 0!==i&&((i=i.map(MathUtils.degToRad)).push(o),i=(new Euler).fromArray(i),i=(new Quaternion).setFromEuler(i).inverse());for(var c=new Quaternion,u=new Euler,l=[],f=0;f<s.length;f+=3)u.set(s[f],s[f+1],s[f+2],o),c.setFromEuler(u),void 0!==n&&c.premultiply(n),void 0!==i&&c.multiply(i),c.toArray(l,f/3*4);return new QuaternionKeyframeTrack(e+".quaternion",a,l)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),i=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,r){return r.indexOf(e)==t})),t},getKeyframeTrackValues:function(e,t,r){var n=r,i=[],o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var r=t.x.values[o];i.push(r),n[0]=r}else i.push(n[0]);if(-1!==a){var c=t.y.values[a];i.push(c),n[1]=c}else i.push(n[1]);if(-1!==s){var u=t.z.values[s];i.push(u),n[2]=u}else i.push(n[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var r=e.values[t-1],n=e.values[t]-r,i=Math.abs(n);if(i>=180){for(var o=i/180,a=n/o,s=r+a,c=e.times[t-1],u=(e.times[t]-c)/o,l=c+u,f=[],h=[];l<e.times[t];)f.push(l),l+=u,h.push(s),s+=a;e.times=M(e.times,t,f),e.values=M(e.values,t,h)}}}},c.prototype={constructor:c,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new f,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,r=e.split(/[\r\n]+/);return r.forEach((function(e,n){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,r[++n]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:r},o=this.parseNodeAttr(n),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,i):r in a?("PoseNode"===r?a.PoseNode.push(i):void 0!==a[r].id&&(a[r]={},a[r][a[r].id]=a[r]),""!==o.id&&(a[r][o.id]=i)):"number"==typeof o.id?(a[r]={},a[r][o.id]=i):"Properties70"!==r&&(a[r]="PoseNode"===r?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}},parseNodeProperty:function(e,t,r){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===i&&(i=r.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===n){var a=i.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),u=i.split(",").slice(3);n="connections",function(e,t){for(var r=0,n=e.length,i=t.length;r<i;r++,n++)e[n]=t[r]}(i=[s,c],u=u.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=i),n in o&&Array.isArray(o[n])?o[n].push(i):"a"!==n?o[n]=i:o.a=i,this.setCurrentProp(o,n),"a"===n&&","!==i.slice(-1)&&(o.a=_(i))}else this.parseNodeSpecialProperty(e,n,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=_(t.a))},parseNodeSpecialProperty:function(e,t,r){var n=r.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=n[0],o=n[1],a=n[2],s=n[3],c=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=_(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}},u.prototype={constructor:u,parse:function(e){var t=new l(e);t.skip(23);var r=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+r);for(var n=new f;!this.endOfContent(t);){var i=this.parseNode(t,r);null!==i&&n.add(i.name,i)}return n},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var r={},n=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var o=e.getUint8(),a=e.getString(o);if(0===n)return null;for(var s=[],c=0;c<i;c++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",l=s.length>1?s[1]:"",f=s.length>2?s[2]:"";for(r.singleProperty=1===i&&e.getOffset()===n;n>e.getOffset();){var h=this.parseNode(e,t);null!==h&&this.parseSubNode(a,r,h)}return r.propertyList=s,"number"==typeof u&&(r.id=u),""!==l&&(r.attrName=l),""!==f&&(r.attrType=f),""!==a&&(r.name=a),r},parseSubNode:function(e,t,r){if(!0===r.singleProperty){var n=r.propertyList[0];Array.isArray(n)?(t[r.name]=r,r.a=n):t[r.name]=n}else if("Connections"===e&&"C"===r.name){var i=[];r.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===r.name){Object.keys(r).forEach((function(e){t[e]=r[e]}))}else if("Properties70"===e&&"P"===r.name){var o,a=r.propertyList[0],s=r.propertyList[1],c=r.propertyList[2],u=r.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[a]={type:s,type2:c,flag:u,value:o}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}void 0===Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new l(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return a.getBooleanArray(n);case"d":return a.getFloat64Array(n);case"f":return a.getFloat32Array(n);case"i":return a.getInt32Array(n);case"l":return a.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},l.prototype={constructor:l,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],r=0;r<e;r++)t[r]=this.getUint8();var n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),LoaderUtils.decodeText(new Uint8Array(t))}},f.prototype={constructor:f,add:function(e,t){this[e]=t}};var d=[];function m(e,t,r,n){var i;switch(n.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=r;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(i=n.indices[i]);var o=i*n.dataSize,a=o+n.dataSize;return function(e,t,r,n){for(var i=r,o=0;i<n;i++,o++)e[o]=t[i];return e}(d,n.buffer,o,a)}var g=new Euler,v=new Vector3;function y(e){var t,r=new Matrix4,n=new Matrix4,i=new Matrix4,o=new Matrix4,a=new Matrix4,s=new Matrix4,c=new Matrix4,u=new Matrix4,l=new Matrix4,f=new Matrix4,h=new Matrix4,p=e.inheritType?e.inheritType:0;(e.translation&&r.setPosition(v.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(MathUtils.degToRad)).push(e.eulerOrder),n.makeRotationFromEuler(g.fromArray(t)));e.rotation&&((t=e.rotation.map(MathUtils.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(g.fromArray(t)));e.postRotation&&((t=e.postRotation.map(MathUtils.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(g.fromArray(t)));e.scale&&a.scale(v.fromArray(e.scale)),e.scalingOffset&&c.setPosition(v.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(v.fromArray(e.scalingPivot)),e.rotationOffset&&u.setPosition(v.fromArray(e.rotationOffset)),e.rotationPivot&&l.setPosition(v.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f=e.parentMatrixWorld);var d=n.multiply(i).multiply(o),m=new Matrix4;f.extractRotation(m),(new Matrix4).copyPosition(f);var y=new Matrix4;y.getInverse(m).multiply(f);var b=new Matrix4;if(0===p)b.copy(m).multiply(d).multiply(y).multiply(a);else if(1===p)b.copy(m).multiply(y).multiply(d).multiply(a);else{var _=(new Matrix4).getInverse(a),A=(new Matrix4).multiply(y).multiply(_);b.copy(m).multiply(d).multiply(A).multiply(a)}var M=(new Matrix4).getInverse(l),x=(new Matrix4).getInverse(s),w=new Matrix4;w.copy(r).multiply(u).multiply(l).multiply(n).multiply(i).multiply(o).multiply(M).multiply(c).multiply(s).multiply(a).multiply(x);var $=(new Matrix4).copyPosition(w),E=(new Matrix4).copy(f).multiply($);return h.copyPosition(E),w=(new Matrix4).multiply(h).multiply(b)}function b(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function _(e){return e.split(",").map((function(e){return parseFloat(e)}))}function A(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),LoaderUtils.decodeText(new Uint8Array(e,t,r))}function M(e,t,r){return e.slice(0,t).concat(r).concat(e.slice(t))}return i}(),FBXLoader$1=Object.freeze((_Object$freeze6={__proto__:null},_defineProperty3(_Object$freeze6,Symbol.toStringTag,"Module"),_defineProperty3(_Object$freeze6,"FBXLoader",FBXLoader),_Object$freeze6)),require$$3=getAugmentedNamespace(FBXLoader$1),_interopRequireDefault$3=interopRequireDefault.exports;Object.defineProperty(loadFbxObj$1,"__esModule",{value:!0}),loadFbxObj$1.loadFbxObj=loadFbxObj;var _regenerator$1=_interopRequireDefault$3(regenerator),_asyncToGenerator2$1=_interopRequireDefault$3(asyncToGenerator.exports),_FBXLoader=require$$3,loader=new _FBXLoader.FBXLoader;function loadFbxObj(e){return _loadFbxObj$1.apply(this,arguments)}function _loadFbxObj$1(){return _loadFbxObj$1=(0,_asyncToGenerator2$1.default)(_regenerator$1.default.mark((function e(t){return _regenerator$1.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){loader.load(t,(function(t){e(t)}),void 0,(function(e){r(e)}))})));case 1:case"end":return e.stop()}}),e)}))),_loadFbxObj$1.apply(this,arguments)}Object.defineProperty(getExtraModelLoader$1,"__esModule",{value:!0}),getExtraModelLoader$1.getExtraModelLoader=getExtraModelLoader;var _loadFbxObj=loadFbxObj$1;function getExtraModelLoader(){var e=new Map;return{load:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FBX";if("FBX"!==r)return Promise.reject(new Error("不支持的类型"));if(e.has(t))return e.get(t);var n=(0,_loadFbxObj.loadFbxObj)(t);return e.set(t,n),n},dispose:function(){e.clear()}}}var _interopRequireDefault$2=interopRequireDefault.exports,_typeof$1=_typeof$5.exports;Object.defineProperty(Controller$1,"__esModule",{value:!0}),Controller$1.TreasurePluginController=void 0;var _regenerator=_interopRequireDefault$2(regenerator),_toConsumableArray2=_interopRequireDefault$2(toConsumableArray.exports),_slicedToArray2=_interopRequireDefault$2(slicedToArray.exports),_asyncToGenerator2=_interopRequireDefault$2(asyncToGenerator.exports),_classCallCheck2=_interopRequireDefault$2(classCallCheck.exports),_createClass2=_interopRequireDefault$2(createClass.exports),_defineProperty2=_interopRequireDefault$2(defineProperty$3.exports),THREE=_interopRequireWildcard$1(require$$4),_five=five,_isNil=isNil$1,_constants=constants,_TreasureObject=TreasureObject$1,_getTextureLoader=getTextureLoader$1,_getExtraModelLoader=getExtraModelLoader$1,_to=_interopRequireDefault$2(to);function _getRequireWildcardCache$1(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$1=function(e){return e?r:t})(e)}function _interopRequireWildcard$1(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$1(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$1(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var TreasurePluginController=function(){function e(t){var r=this;(0,_classCallCheck2.default)(this,e),(0,_defineProperty2.default)(this,"hooks",new _five.Subscribe),(0,_defineProperty2.default)(this,"treasures",[]),(0,_defineProperty2.default)(this,"textureLoader",(0,_getTextureLoader.getTextureLoader)()),(0,_defineProperty2.default)(this,"modelLoader",(0,_getExtraModelLoader.getExtraModelLoader)()),(0,_defineProperty2.default)(this,"dispose",(function(){r.modelLoader.dispose(),r.textureLoader.dispose(),r.five.scene.remove(r.selfGroup),r.treasures.forEach((function(e){return e.dispose()}))})),(0,_defineProperty2.default)(this,"onTreasureClick",(function(e){r.hooks.emit("tap",{id:e})})),(0,_defineProperty2.default)(this,"getTreasureObjectParams",(function(e){return{config:r.getConfig(e),position:(new THREE.Vector3).fromArray(Object.values(e.position)),id:e.id,five:r.five,loadTexture:r.textureLoader.load,loadModelGroup:r.modelLoader.load,clickCallback:r.onTreasureClick,onOpenAnimationEnded:r.onTreasureOpenAnimationEnded}})),(0,_defineProperty2.default)(this,"onTreasureOpenAnimationEnded",(function(e){r.hooks.emit("openAnimationEnded",{id:e})})),this.five=t,this.selfGroup=new THREE.Group,this.selfGroup.name="treasure-plugin-group",this.five.scene.add(this.selfGroup),this.five.once("dispose",this.dispose)}var t;return(0,_createClass2.default)(e,[{key:"load",value:(t=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(t,r){var n,i,o,a,s,c;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_to.default)(Promise.all(t.treasures.map(this.getTreasureObjectParams).filter(_isNil.notNil).map((function(e){return new _TreasureObject.TreasureObject(e).load()}))));case 2:if(i=e.sent,o=(0,_slicedToArray2.default)(i,2),a=o[0],s=o[1],!a&&s){e.next=8;break}throw a;case 8:return(n=this.treasures).push.apply(n,(0,_toConsumableArray2.default)(s)),null==r||r.appendTreasuresAfterLoaded,(c=this.selfGroup).add.apply(c,(0,_toConsumableArray2.default)(s)),this.five.needsRender=!0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"appendChild",value:function(e){return this.selfGroup.add(e),this.five.needsRender=!0,this}},{key:"appendChildByID",value:function(e){var t=this.getTreasureByID(e);if(!t)throw new Error("can not find treasure which has ID "+e);return this.appendChild(t),this}},{key:"getTreasureByID",value:function(e){return this.treasures.find((function(t){return t.treasureID===e}))}},{key:"removeTreasureByID",value:function(e){var t=this.treasures.findIndex((function(t){return t.treasureID===e}));if("number"!=typeof t)return!1;var r=this.treasures[t];return r.dispose(),this.selfGroup.remove(r),this.treasures.slice(t,1),!0}},{key:"getConfig",value:function(e){var t,r,n,i,o,a,s,c=null===(t=_constants.DEFAULT_TREASURE_CONFIGS.find((function(t){return t.type===e.type})))||void 0===t?void 0:t.config,u=_constants.DEFAULT_TREASURE_CONFIG;return{scale:null!==(r=null!==(n=null==e||null===(i=e.config)||void 0===i?void 0:i.scale)&&void 0!==n?n:null==c?void 0:c.scale)&&void 0!==r?r:u.scale,objectUrl:(null==e||null===(o=e.config)||void 0===o?void 0:o.object_url)||(null==c?void 0:c.objectUrl)||u.objectUrl,boxTextureUrl:(null==e||null===(a=e.config)||void 0===a?void 0:a.box_texture_url)||(null==c?void 0:c.boxTextureUrl)||u.boxTextureUrl,faceAnimeTextureUrls:(null==e||null===(s=e.config)||void 0===s?void 0:s.face_anime_texture_urls)||(null==c?void 0:c.faceAnimeTextureUrls)||u.faceAnimeTextureUrls}}}]),e}();Controller$1.TreasurePluginController=TreasurePluginController,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TREASURE_TYPE",{enumerable:!0,get:function(){return r.TREASURE_TYPE}}),e.default=e.TreasurePlugin=void 0;var t=Controller$1,r=constants,n=function(e){return new t.TreasurePluginController(e)};e.TreasurePlugin=n;var i=n;e.default=i}(TreasurePlugin$1);var TreasurePlugin=exports("T",getDefaultExportFromCjs(TreasurePlugin$1)),CameraMovementPlugin$1={},DESCRIPTORS$1=descriptors,uncurryThis$9=functionUncurryThis,call$3=functionCall,fails$9=fails$t,objectKeys=objectKeys$3,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,propertyIsEnumerableModule=objectPropertyIsEnumerable,toObject$3=toObject$8,IndexedObject=indexedObject,$assign=Object.assign,defineProperty$1=Object.defineProperty,concat$1=uncurryThis$9([].concat),objectAssign=!$assign||fails$9((function(){if(DESCRIPTORS$1&&1!==$assign({b:1},$assign(defineProperty$1({},"a",{enumerable:!0,get:function(){defineProperty$1(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=$assign({},e)[r]||objectKeys($assign({},t)).join("")!=n}))?function(e,t){for(var r=toObject$3(e),n=arguments.length,i=1,o=getOwnPropertySymbolsModule.f,a=propertyIsEnumerableModule.f;n>i;)for(var s,c=IndexedObject(arguments[i++]),u=o?concat$1(objectKeys(c),o(c)):objectKeys(c),l=u.length,f=0;l>f;)s=u[f++],DESCRIPTORS$1&&!call$3(a,c,s)||(r[s]=c[s]);return r}:$assign,$$6=_export,assign=objectAssign;$$6({target:"Object",stat:!0,forced:Object.assign!==assign},{assign:assign});var global$7=global$S,toIntegerOrInfinity$2=toIntegerOrInfinity$6,toString$4=toString$8,requireObjectCoercible$2=requireObjectCoercible$7,RangeError$2=global$7.RangeError,stringRepeat=function(e){var t=toString$4(requireObjectCoercible$2(this)),r="",n=toIntegerOrInfinity$2(e);if(n<0||n==1/0)throw RangeError$2("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},$$5=_export,repeat$1=stringRepeat;$$5({target:"String",proto:!0},{repeat:repeat$1});var tween={};!function(e){var t=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0,e.default=a,e.tweenProgress=function(e,t){return a({progress:0},{progress:1},e,t)};var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=i(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(require$$5),n=animationFrame;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var o=r.Easing;function a(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.Linear.None,s=new r.Tween(e).to(t,i).easing(a);(0,n.nextFrame)((function(){return s.start(0)}));var c=(0,n.requestAnimationFrameInterval)((function(e){!1===s.update(e)&&c()})),u=[];return s.onDestroy=function(e){return u.push(e),s},s.destroy=function(){var e;for(this.stop(),Object.assign(s,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});e=u.shift();)e();c()},s}e.Easing=o}(tween);var typing={},CameraMovementEffect,Rotation;Object.defineProperty(typing,"__esModule",{value:!0}),typing.Rotation=typing.CameraMovementEffect=void 0,typing.CameraMovementEffect=CameraMovementEffect,function(e){e.Move="Move",e.Rotate="Rotate"}(CameraMovementEffect||(typing.CameraMovementEffect=CameraMovementEffect={})),typing.Rotation=Rotation,function(e){e.Clockwise="Clockwise",e.Anticlockwise="Anticlockwise",e.Loop="Loop"}(Rotation||(typing.Rotation=Rotation={}));var formatRad$1={};Object.defineProperty(formatRad$1,"__esModule",{value:!0}),formatRad$1.formatLatitude=formatLatitude,formatRad$1.formatLongitude=formatLongitude,formatRad$1.formatRad=void 0;var PI_2$1=2*Math.PI;function formatLongitude(e){return(e%PI_2$1+PI_2$1)%PI_2$1}function formatLatitude(e){return e%PI_2$1}var formatRad=formatLongitude;formatRad$1.formatRad=formatRad;var calculateProgress={};Object.defineProperty(calculateProgress,"__esModule",{value:!0}),calculateProgress.progressNumber=progressNumber,calculateProgress.progressRad=progressRad;var _formatRad=formatRad$1,PI=Math.PI,PI_2=2*PI;function progressNumber(e,t,r){return e+(t-e)*r}function progressRad(e,t,r){return e=(0,_formatRad.formatRad)(e),(t=(0,_formatRad.formatRad)(t))-e>PI?(0,_formatRad.formatRad)(progressNumber(e+PI_2,t,r)):e-t>PI?(0,_formatRad.formatRad)(progressNumber(e-PI_2,t,r)):progressNumber(e,t,r)}!function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CameraMovementPlugin=void 0;var n=t(regenerator),i=t(asyncToGenerator.exports),o=five,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(require$$5),s=tween,c=typing,u=formatRad$1,l=calculateProgress;function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var h=function e(t,r,n){var i=Math.PI,o=2*i;return t=(0,u.formatLongitude)(t),r=(0,u.formatLongitude)(r),n===c.Rotation.Anticlockwise&&t<r&&(t+=o),n===c.Rotation.Clockwise&&r<t&&(r+=o),n===c.Rotation.Loop&&r-t>i?e(t,r,c.Rotation.Anticlockwise):n===c.Rotation.Loop&&t-r>i?e(t,r,c.Rotation.Clockwise):{from:t,to:r}},p=function(e){var t={},r=function(){var r=(0,i.default)(n.default.mark((function r(i,o){var a,s=arguments;return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:{preload:!0},t.interruptCallback&&t.interruptCallback(!1),!a.asyncStartCallback){r.next=5;break}return r.next=5,a.asyncStartCallback();case 5:if(!i.mode||i.mode===e.currentMode){r.next=8;break}return r.next=8,e.changeMode(i.mode);case 8:if(!a.preload||void 0===i.panoIndex||i.panoIndex===e.panoIndex){r.next=11;break}return r.next=11,e.preloadPano(i.panoIndex);case 11:if(!a.asyncEndCallback){r.next=14;break}return r.next=14,a.asyncEndCallback();case 14:if(void 0!==i.panoIndex||void 0!==i.fov||void 0!==i.latitude||void 0!==i.longitude){r.next=16;break}return r.abrupt("return",!0);case 16:return r.next=18,new Promise((function(t,r){var n=void 0!==i.panoIndex?i.panoIndex:e.panoIndex;void 0!==n?e.moveToPano(n,Object.assign({duration:o,moveEndCallback:function(){return t(!0)},moveCancelCallback:function(){return r(!1)}},i)):r(!1)}));case 18:return r.abrupt("return",r.sent);case 19:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),f=function(t){var r=e.state,n=(0,u.formatLatitude)(r.latitude),i=(0,u.formatLatitude)(t.latitude),o=h(r.longitude,t.longitude,t.rotation||c.Rotation.Loop),a=o.from,s=o.to;return{from:{latitude:n,longitude:a,fov:r.fov},to:{latitude:i,longitude:s,fov:t.fov}}},p=function(){var r=(0,i.default)(n.default.mark((function r(i,u){var h,p,d,m,g=arguments;return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(h=g.length>2&&void 0!==g[2]?g[2]:{},t.interruptCallback&&t.interruptCallback(!1),!h.asyncStartCallback){r.next=5;break}return r.next=5,h.asyncStartCallback();case 5:if(e.currentMode===o.Five.Mode.Panorama){r.next=8;break}return r.next=8,e.changeMode(o.Five.Mode.Panorama);case 8:if(void 0===i.panoIndex||i.panoIndex===e.panoIndex){r.next=14;break}if(!h.preload){r.next=12;break}return r.next=12,e.preloadPano(i.panoIndex);case 12:return r.next=14,new Promise((function(t,r){i.panoIndex?e.moveToPano(i.panoIndex,{moveEndCallback:function(){return t(!0)},moveCancelCallback:function(){return r(!1)}}):t(!0)}));case 14:if(!h.asyncEndCallback){r.next=17;break}return r.next=17,h.asyncEndCallback();case 17:return p=f(i),d=p.from,m=p.to,r.next=20,new Promise((function(r){var n=i.rotateSpeed?Math.ceil(Math.abs(m.longitude-d.longitude)/i.rotateSpeed*1e3):u,o=(0,s.tweenProgress)(n,a.Easing.Linear.None).onUpdate((function(t){var r=t.progress,n={};n.longitude=(0,l.progressNumber)(d.longitude,m.longitude,r),n.latitude=(0,l.progressNumber)(d.latitude,m.latitude,r),n.fov=(0,l.progressNumber)(d.fov,m.fov,r),e.setState(n,!0)})).onComplete((function(){r(!0)})).onDestroy((function(){r(!1)}));i.rotation===c.Rotation.Loop&&o.repeat(1/0).yoyo(!0),t.interruptCallback=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o.destroy(),t.interruptCallback=void 0,t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=void 0),r(e)},t.timeoutId=setTimeout((function(){t.interruptCallback&&t.interruptCallback(!0)}),u)}));case 20:return r.abrupt("return",r.sent);case 21:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return{move:r,rotate:p}};e.CameraMovementPlugin=p;var d=p;e.default=d}(CameraMovementPlugin$1);var CameraMovementPlugin=exports("C",getDefaultExportFromCjs(CameraMovementPlugin$1)),PanoFloorplanRadarPlugin$1={},Controller={},_extends={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_extends);var Content={},$$4=_export,$every=arrayIteration.every,arrayMethodIsStrict$1=arrayMethodIsStrict$4,STRICT_METHOD$1=arrayMethodIsStrict$1("every");$$4({target:"Array",proto:!0,forced:!STRICT_METHOD$1},{every:function(e){return $every(this,e,arguments.length>1?arguments[1]:void 0)}});var $$3=_export,toObject$2=toObject$8,nativeKeys=objectKeys$3,fails$8=fails$t,FAILS_ON_PRIMITIVES=fails$8((function(){nativeKeys(1)}));$$3({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES},{keys:function(e){return nativeKeys(toObject$2(e))}});var Camera={},throttle={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){t||(e.apply(void 0,arguments),t=setTimeout((function(){t=null}),r))}}}(throttle);var Camera_style={},px2rem={},uncurryThis$8=functionUncurryThis,thisNumberValue$2=uncurryThis$8(1..valueOf),whitespaces$1="\t\n\v\f\r                　\u2028\u2029\ufeff",uncurryThis$7=functionUncurryThis,requireObjectCoercible$1=requireObjectCoercible$7,toString$3=toString$8,whitespaces=whitespaces$1,replace$2=uncurryThis$7("".replace),whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(e){return function(t){var r=toString$3(requireObjectCoercible$1(t));return 1&e&&(r=replace$2(r,ltrim,"")),2&e&&(r=replace$2(r,rtrim,"")),r}},stringTrim={start:createMethod(1),end:createMethod(2),trim:createMethod(3)},DESCRIPTORS=descriptors,global$6=global$S,uncurryThis$6=functionUncurryThis,isForced=isForced_1,redefine$1=redefine$a.exports,hasOwn=hasOwnProperty_1,inheritIfRequired=inheritIfRequired$2,isPrototypeOf=objectIsPrototypeOf,isSymbol=isSymbol$3,toPrimitive=toPrimitive$2,fails$7=fails$t,getOwnPropertyNames=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,defineProperty=objectDefineProperty.f,thisNumberValue$1=thisNumberValue$2,trim=stringTrim.trim,NUMBER="Number",NativeNumber=global$6[NUMBER],NumberPrototype=NativeNumber.prototype,TypeError$2=global$6.TypeError,arraySlice$1=uncurryThis$6("".slice),charCodeAt=uncurryThis$6("".charCodeAt),toNumeric=function(e){var t=toPrimitive(e,"number");return"bigint"==typeof t?t:toNumber(t)},toNumber=function(e){var t,r,n,i,o,a,s,c,u=toPrimitive(e,"number");if(isSymbol(u))throw TypeError$2("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=trim(u),43===(t=charCodeAt(u,0))||45===t){if(88===(r=charCodeAt(u,2))||120===r)return NaN}else if(48===t){switch(charCodeAt(u,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(a=(o=arraySlice$1(u,2)).length,s=0;s<a;s++)if((c=charCodeAt(o,s))<48||c>i)return NaN;return parseInt(o,n)}return+u};if(isForced(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var NumberWrapper=function(e){var t=arguments.length<1?0:NativeNumber(toNumeric(e)),r=this;return isPrototypeOf(NumberPrototype,r)&&fails$7((function(){thisNumberValue$1(r)}))?inheritIfRequired(Object(t),r,NumberWrapper):t},keys=DESCRIPTORS?getOwnPropertyNames(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),j=0,key;keys.length>j;j++)hasOwn(NativeNumber,key=keys[j])&&!hasOwn(NumberWrapper,key)&&defineProperty(NumberWrapper,key,getOwnPropertyDescriptor(NativeNumber,key));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine$1(global$6,NUMBER,NumberWrapper)}var anObject$2=anObject$f,regexpFlags$1=function(){var e=anObject$2(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},fails$6=fails$t,global$5=global$S,$RegExp$2=global$5.RegExp,UNSUPPORTED_Y$1=fails$6((function(){var e=$RegExp$2("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),MISSED_STICKY=UNSUPPORTED_Y$1||fails$6((function(){return!$RegExp$2("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y$1||fails$6((function(){var e=$RegExp$2("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),regexpStickyHelpers={BROKEN_CARET:BROKEN_CARET,MISSED_STICKY:MISSED_STICKY,UNSUPPORTED_Y:UNSUPPORTED_Y$1},fails$5=fails$t,global$4=global$S,$RegExp$1=global$4.RegExp,regexpUnsupportedDotAll=fails$5((function(){var e=$RegExp$1(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),fails$4=fails$t,global$3=global$S,$RegExp=global$3.RegExp,regexpUnsupportedNcg=fails$4((function(){var e=$RegExp("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),call$2=functionCall,uncurryThis$5=functionUncurryThis,toString$2=toString$8,regexpFlags=regexpFlags$1,stickyHelpers=regexpStickyHelpers,shared=shared$4.exports,create=objectCreate,getInternalState=internalState.get,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$2=uncurryThis$5("".charAt),indexOf=uncurryThis$5("".indexOf),replace$1=uncurryThis$5("".replace),stringSlice$3=uncurryThis$5("".slice),UPDATES_LAST_INDEX_WRONG=function(){var e=/a/,t=/b*/g;return call$2(nativeExec,e,"a"),call$2(nativeExec,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG;PATCH&&(patchedExec=function(e){var t,r,n,i,o,a,s,c=this,u=getInternalState(c),l=toString$2(e),f=u.raw;if(f)return f.lastIndex=c.lastIndex,t=call$2(patchedExec,f,l),c.lastIndex=f.lastIndex,t;var h=u.groups,p=UNSUPPORTED_Y&&c.sticky,d=call$2(regexpFlags,c),m=c.source,g=0,v=l;if(p&&(d=replace$1(d,"y",""),-1===indexOf(d,"g")&&(d+="g"),v=stringSlice$3(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==charAt$2(l,c.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),r=new RegExp("^(?:"+m+")",d)),NPCG_INCLUDED&&(r=new RegExp("^"+m+"$(?!\\s)",d)),UPDATES_LAST_INDEX_WRONG&&(n=c.lastIndex),i=call$2(nativeExec,p?r:c,v),p?i?(i.input=stringSlice$3(i.input,g),i[0]=stringSlice$3(i[0],g),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&i&&(c.lastIndex=c.global?i.index+i[0].length:n),NPCG_INCLUDED&&i&&i.length>1&&call$2(nativeReplace,i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=create(null),o=0;o<h.length;o++)a[(s=h[o])[0]]=i[s[1]];return i});var regexpExec$2=patchedExec,$$2=_export,exec=regexpExec$2;$$2({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec});var uncurryThis$4=functionUncurryThis,redefine=redefine$a.exports,regexpExec$1=regexpExec$2,fails$3=fails$t,wellKnownSymbol$1=wellKnownSymbol$k,createNonEnumerableProperty=createNonEnumerableProperty$7,SPECIES=wellKnownSymbol$1("species"),RegExpPrototype=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(e,t,r,n){var i=wellKnownSymbol$1(e),o=!fails$3((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!fails$3((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[SPECIES]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return t=!0,null},r[i](""),!t}));if(!o||!a||r){var s=uncurryThis$4(/./[i]),c=t(i,""[e],(function(e,t,r,n,i){var a=uncurryThis$4(e),c=t.exec;return c===regexpExec$1||c===RegExpPrototype.exec?o&&!i?{done:!0,value:s(t,r,n)}:{done:!0,value:a(r,t,n)}:{done:!1}}));redefine(String.prototype,e,c[0]),redefine(RegExpPrototype,i,c[1])}n&&createNonEnumerableProperty(RegExpPrototype[i],"sham",!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex$1=function(e,t,r){return t+(r?charAt$1(e,t).length:1)},uncurryThis$3=functionUncurryThis,toObject$1=toObject$8,floor$2=Math.floor,charAt=uncurryThis$3("".charAt),replace=uncurryThis$3("".replace),stringSlice$2=uncurryThis$3("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(e,t,r,n,i,o){var a=r+e.length,s=n.length,c=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==i&&(i=toObject$1(i),c=SUBSTITUTION_SYMBOLS),replace(o,c,(function(o,c){var u;switch(charAt(c,0)){case"$":return"$";case"&":return e;case"`":return stringSlice$2(t,0,r);case"'":return stringSlice$2(t,a);case"<":u=i[stringSlice$2(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var f=floor$2(l/10);return 0===f?o:f<=s?void 0===n[f-1]?charAt(c,1):n[f-1]+charAt(c,1):o}u=n[l-1]}return void 0===u?"":u}))},global$2=global$S,call$1=functionCall,anObject$1=anObject$f,isCallable$1=isCallable$m,classof=classofRaw$1,regexpExec=regexpExec$2,TypeError$1=global$2.TypeError,regexpExecAbstract=function(e,t){var r=e.exec;if(isCallable$1(r)){var n=call$1(r,e,t);return null!==n&&anObject$1(n),n}if("RegExp"===classof(e))return call$1(regexpExec,e,t);throw TypeError$1("RegExp#exec called on incompatible receiver")},apply=functionApply,call=functionCall,uncurryThis$2=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,fails$2=fails$t,anObject=anObject$f,isCallable=isCallable$m,toIntegerOrInfinity$1=toIntegerOrInfinity$6,toLength=toLength$2,toString$1=toString$8,requireObjectCoercible=requireObjectCoercible$7,advanceStringIndex=advanceStringIndex$1,getMethod=getMethod$4,getSubstitution=getSubstitution$1,regExpExec=regexpExecAbstract,wellKnownSymbol=wellKnownSymbol$k,REPLACE=wellKnownSymbol("replace"),max=Math.max,min=Math.min,concat=uncurryThis$2([].concat),push$1=uncurryThis$2([].push),stringIndexOf=uncurryThis$2("".indexOf),stringSlice$1=uncurryThis$2("".slice),maybeToString=function(e){return void 0===e?e:String(e)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$2((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));fixRegExpWellKnownSymbolLogic("replace",(function(e,t,r){var n=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(e,r){var n=requireObjectCoercible(this),i=null==e?void 0:getMethod(e,REPLACE);return i?call(i,e,n,r):call(t,toString$1(n),e,r)},function(e,i){var o=anObject(this),a=toString$1(e);if("string"==typeof i&&-1===stringIndexOf(i,n)&&-1===stringIndexOf(i,"$<")){var s=r(t,o,a,i);if(s.done)return s.value}var c=isCallable(i);c||(i=toString$1(i));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var f=[];;){var h=regExpExec(o,a);if(null===h)break;if(push$1(f,h),!u)break;""===toString$1(h[0])&&(o.lastIndex=advanceStringIndex(a,toLength(o.lastIndex),l))}for(var p="",d=0,m=0;m<f.length;m++){for(var g=toString$1((h=f[m])[0]),v=max(min(toIntegerOrInfinity$1(h.index),a.length),0),y=[],b=1;b<h.length;b++)push$1(y,maybeToString(h[b]));var _=h.groups;if(c){var A=concat([g],y,v,a);void 0!==_&&push$1(A,_);var M=toString$1(apply(i,void 0,A))}else M=getSubstitution(g,a,v,y,_,i);v>=d&&(p+=stringSlice$1(a,d,v)+M,d=v+g.length)}return p+stringSlice$1(a,d)}]}),!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var $$1=_export,global$1=global$S,uncurryThis$1=functionUncurryThis,toIntegerOrInfinity=toIntegerOrInfinity$6,thisNumberValue=thisNumberValue$2,$repeat=stringRepeat,fails$1=fails$t,RangeError$1=global$1.RangeError,String$1=global$1.String,floor$1=Math.floor,repeat=uncurryThis$1($repeat),stringSlice=uncurryThis$1("".slice),un$ToFixed=uncurryThis$1(1..toFixed),pow=function e(t,r,n){return 0===r?n:r%2==1?e(t,r-1,n*t):e(t*t,r/2,n)},log=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},multiply=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=floor$1(i/1e7)},divide=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=floor$1(n/t),n=n%t*1e7},dataToString=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=String$1(e[t]);r=""===r?n:r+repeat("0",7-n.length)+n}return r},FORCED$1=fails$1((function(){return"0.000"!==un$ToFixed(8e-5,3)||"1"!==un$ToFixed(.9,0)||"1.25"!==un$ToFixed(1.255,2)||"1000000000000000128"!==un$ToFixed(0xde0b6b3a7640080,0)}))||!fails$1((function(){un$ToFixed({})}));$$1({target:"Number",proto:!0,forced:FORCED$1},{toFixed:function(e){var t,r,n,i,o=thisNumberValue(this),a=toIntegerOrInfinity(e),s=[0,0,0,0,0,0],c="",u="0";if(a<0||a>20)throw RangeError$1("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String$1(o);if(o<0&&(c="-",o=-o),o>1e-21)if(r=(t=log(o*pow(2,69,1))-69)<0?o*pow(2,-t,1):o/pow(2,t,1),r*=4503599627370496,(t=52-t)>0){for(multiply(s,0,r),n=a;n>=7;)multiply(s,1e7,0),n-=7;for(multiply(s,pow(10,n,1),0),n=t-1;n>=23;)divide(s,1<<23),n-=23;divide(s,1<<n),multiply(s,1,1),divide(s,2),u=dataToString(s)}else multiply(s,0,r),multiply(s,1<<-t,0),u=dataToString(s)+repeat("0",a);return u=a>0?c+((i=u.length)<=a?"0."+repeat("0",a-i)+u:stringSlice(u,0,i-a)+"."+stringSlice(u,i-a)):c+u}}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=Number("string"==typeof e?e.replace(/px/g,""):e);return(r/t).toFixed(5)+"rem"}}(px2rem);var _interopRequireDefault$1=interopRequireDefault.exports;Object.defineProperty(Camera_style,"__esModule",{value:!0}),Camera_style.rotateStyle=Camera_style.positionStyle=void 0;var _px2rem$1=_interopRequireDefault$1(px2rem),positionStyle={position:"absolute",left:"0",top:"0",width:"0",height:"0",transform:"none",pointerEvents:"none",transition:"transform 1s linear"};Camera_style.positionStyle=positionStyle;var rotateStyle={position:"absolute",left:"".concat((0,_px2rem$1.default)(-15)),top:"".concat((0,_px2rem$1.default)(-15)),width:"".concat((0,_px2rem$1.default)(17)),height:"".concat((0,_px2rem$1.default)(17)),backgroundSize:"100%",backgroundRepeat:"no-repeat",transformOrigin:"".concat((0,_px2rem$1.default)(15)," ").concat((0,_px2rem$1.default)(15)),transform:"rotate(45deg)",backgroundImage:"url('//vrlab-static.ljcdn.com/release/web/default-sidemap-camera.5e0b9a1a.png')"};Camera_style.rotateStyle=rotateStyle,function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=o?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(i,s,c):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(react$2.exports),i=t(throttle),o=Camera_style;function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}var s=n.memo((function(e){var t,r=function(t){var r=e.floorplanData.observers[t],n=Math.floor(r.positionInImage.x*e.width),i=Math.floor(r.positionInImage.y*e.height);return"translate(".concat(n,"px, ").concat(i,"px)")},a=function(){var e=u.getCurrentState().longitude,t=-1*Math.floor(e/Math.PI*180)+45;return"rotate(".concat(t,"deg)")},s=function(e){l.current&&(l.current.style.transform=r(e))},c=(0,i.default)((function(){f.current&&(f.current.style.transform=a())}),1e3/60),u=e.five,l=n.useRef(null),f=n.useRef(null),h={transform:r(u.getCurrentState().panoIndex)},p={transform:a()};n.useEffect((function(){var e=function(){s(u.getCurrentState().panoIndex),c()};return s(u.getCurrentState().panoIndex),c(),u.on("panoWillArrive",s),u.on("cameraUpdate",c),u.on("modelLoaded",e),function(){u.off("panoWillArrive",s),u.off("cameraUpdate",c),u.off("modelLoaded",e)}}));var d=Object.assign({},o.rotateStyle,null===(t=e.cameraImage)||void 0===t?void 0:t.style);return n.createElement("div",{ref:l,style:Object.assign({},o.positionStyle,h)},n.createElement("div",{ref:f,style:Object.assign({},d,p)}))}),(function(e,t){return Object.keys(e).every((function(r){return t[r]===e[r]}))}));e.default=s}(Camera);var NowFloor={},RoomHighlight={},arraySlice=arraySliceSimple,floor=Math.floor,mergeSort=function e(t,r){var n=t.length,i=floor(n/2);return n<8?insertionSort(t,r):merge(t,e(arraySlice(t,0,i),r),e(arraySlice(t,i),r),r)},insertionSort=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},merge=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},arraySort=mergeSort,userAgent$1=engineUserAgent,firefox=userAgent$1.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent=engineUserAgent,webkit=userAgent.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],$=_export,uncurryThis=functionUncurryThis,aCallable=aCallable$7,toObject=toObject$8,lengthOfArrayLike=lengthOfArrayLike$7,toString=toString$8,fails=fails$t,internalSort=arraySort,arrayMethodIsStrict=arrayMethodIsStrict$4,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,test=[],un$Sort=uncurryThis(test.sort),push=uncurryThis(test.push),FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),STRICT_METHOD=arrayMethodIsStrict("sort"),STABLE_SORT=!fails((function(){if(V8)return V8<70;if(!(FF&&FF>3)){if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)test.push({k:t+n,v:r})}for(test.sort((function(e,t){return t.v-e.v})),n=0;n<test.length;n++)t=test[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),FORCED=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD||!STABLE_SORT,getSortCompare=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:toString(t)>toString(r)?1:-1}};$({target:"Array",proto:!0,forced:FORCED},{sort:function(e){void 0!==e&&aCallable(e);var t=toObject(this);if(STABLE_SORT)return void 0===e?un$Sort(t):un$Sort(t,e);var r,n,i=[],o=lengthOfArrayLike(t);for(n=0;n<o;n++)n in t&&push(i,t[n]);for(internalSort(i,getSortCompare(e)),r=i.length,n=0;n<r;)t[n]=i[n++];for(;n<o;)delete t[n++];return t}});var formatPosition={};!function(e){var t=interopRequireDefault.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,r){var n=e.x,i=e.y,o=r.max,a=r.min;return{x:(n-a.x)*t,y:(o.y-i)*t}},e.floorplanPosition2ImagePosition=function(e,t){var r=t.bounding,n=r.max.x-r.min.x,i=r.max.y-r.min.y;return{x:(e.x-r.min.x)/n,y:(r.max.y-e.y)/i}},e.getFloorIndexFromModelPosition=function(e,t){var n=Math.max.apply(Math,(0,r.default)(t.work.observers.map((function(t){return e.z>=t.standingPosition.z?t.floorIndex:0}))));return n},e.modelPosition2FloorplanPosition=function(e,t){var r=1e3*e.x+t.bounding.origin.x,n=1e3*-e.z+t.bounding.origin.y;return{x:r,y:n}},e.pathD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",n=t.needZ,i=t.needA;n&&(e=e.concat(e[0]));return e.forEach((function(e,n){var o=t.format?t.format(e):e,a=o.x+","+o.y;return 0==n?r+="M"+a:i&&i[n]?r+="A"+i[n]+","+a:r+="L"+a})),r+(n?"Z":"")};var r=t(toConsumableArray.exports)}(formatPosition),function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(!e.five.work||!e.five.model)return i.createElement(i.Fragment,null);var t=e.floorplanData.floorDatas[e.floorIndex],r=i.useRef(null),a=e.floorplanData.observers;return i.createElement("div",{ref:r,className:"floorplan-plugin__room-highlight",style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"all"},onClick:function(t){if(r.current){var n=r.current.getBoundingClientRect(),i=new o.Vector2(t.clientX,t.clientY),s=new o.Vector2(n.left,n.top),c=i.clone().sub(s),u=new o.Vector2(c.x/r.current.clientWidth,c.y/r.current.clientHeight),l=a.filter((function(t){return t.floorIndex===e.floorIndex})).sort((function(e,t){var r=new o.Vector2(e.positionInImage.x,e.positionInImage.y),n=new o.Vector2(t.positionInImage.x,t.positionInImage.y);return r.distanceTo(u)-n.distanceTo(u)}))[0];e.five.moveToPano(l.index)}}},i.createElement("svg",{style:{width:"100%",height:"100%",overflow:"visible"}},t.rooms.map((function(t){return i.createElement(u,(0,n.default)({key:t.id},e,{data:t}))}))))};var n=t(_extends.exports),i=c(react$2.exports),o=require$$4,a=c(formatPosition);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function u(e){var t=e.floorplanData.bounding,r=(0,a.pathD)(e.data.path,{needZ:!0,format:function(r){return(0,a.default)(r,e.pxmm,t)}}),n=i.useRef(null);return i.createElement("path",{ref:n,d:r,fill:"#000",opacity:0,onMouseOver:function(){n.current&&(n.current.style.opacity="0.1")},onMouseOut:function(){n.current&&(n.current.style.opacity="0")}})}}(RoomHighlight);var FloorplanImage={};!function(e){var t=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,n,a=e.floorplanData,s=e.floorIndex,c=a.outlines[s],u=null===(t=a.outlines)||void 0===t||null===(n=t[s])||void 0===n?void 0:n.svgContent;if(!c&&!u)return null;return r.createElement("div",{className:"floorplan-plugin__base-image",style:{position:"absolute",zIndex:10,width:"100%",height:"100%",pointerEvents:"none"}},u?r.createElement(o,e):r.createElement(i,e))};var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var i=n(r);if(i&&i.has(e))return i.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,i&&i.set(e,o);return o}(react$2.exports);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e){var t,n=e.floorplanData,i=e.floorIndex,o=null===(t=n.outlines[i])||void 0===t?void 0:t.url;return o?r.createElement("img",{src:o,style:{width:"100%",height:"100%"}}):null}function o(e){var t,n=e.floorplanData,i=e.floorIndex,o=null===(t=n.outlines)||void 0===t?void 0:t[i].svgContent;if(!o)return null;return r.createElement("div",{className:"floorplan-plugin__base-image",style:{width:"100%",height:"100%"}},r.createElement("style",null,"\n        .floorplan-plugin__base-image svg [type='lineGroup'] path {\n          fill: #ffffff;\n          stroke: #ffffff;\n        }\n        .floorplan-plugin__base-image svg [type='lineItemGroup'] g g g g {\n          stroke: #ffffff;\n        }\n      "),r.createElement("div",{className:"floorplan-plugin__base-svg-image",dangerouslySetInnerHTML:{__html:o}}))}}(FloorplanImage);var ExtraObjects$1={},_interopRequireDefault=interopRequireDefault.exports,_typeof=_typeof$5.exports;Object.defineProperty(ExtraObjects$1,"__esModule",{value:!0}),ExtraObjects$1.ExtraObjects=ExtraObjects;var React=_interopRequireWildcard(react$2.exports),_px2rem=_interopRequireDefault(px2rem);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function ExtraObjects(e){return React.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",pointerEvents:"none"}},e.extraObjects.map((function(e){return React.createElement("div",{key:e.id,style:{width:0,height:0,position:"absolute",top:100*e.positionInImage.y+"%",left:100*e.positionInImage.x+"%"}},React.createElement("div",{style:{width:"".concat((0,_px2rem.default)(e.icon.width)),height:"".concat((0,_px2rem.default)(e.icon.height)),backgroundImage:"url(".concat(e.icon.url,")"),transform:"translate(-50%, -50%)"}}))})))}!function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,r=null==e||null===(t=e.extraObjects)||void 0===t?void 0:t.filter((function(t){return t.floorIndex===e.floorIndex}));return i.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},i.createElement(a.default,e),r&&i.createElement(s.ExtraObjects,{extraObjects:r}),e.hoverEnable&&i.createElement(o.default,(0,n.default)({},e,e.floorplanData)))};var n=t(_extends.exports),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(react$2.exports),o=t(RoomHighlight),a=t(FloorplanImage),s=ExtraObjects$1;function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}}(NowFloor);var index_style={};Object.defineProperty(index_style,"__esModule",{value:!0}),index_style.contentStyle=void 0;var contentStyle={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"};index_style.contentStyle=contentStyle,function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(_extends.exports),i=t(slicedToArray.exports),o=t(Camera),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(react$2.exports),s=t(NowFloor),c=index_style;function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=a.memo((function(e){if(!e.floorplanData)return null;var t=e.five,r=t.getCurrentState().panoIndex,u=t.work.observers,l=a.useState(u[r].floorIndex),f=(0,i.default)(l,2),h=f[0],p=f[1],d={width:e.width+"px",height:e.height+"px"},m=function(e){p(u[e].floorIndex)};return a.useEffect((function(){return t.on("panoArrived",m),function(){t.off("panoArrived",m)}}),[]),a.createElement("div",{style:Object.assign({},c.contentStyle,d)},a.createElement(s.default,(0,n.default)({},e,{floorIndex:h})),a.createElement(o.default,e))}),(function(e,t){return Object.keys(e).every((function(r){return t[r]===e[r]}))}));e.default=l}(Content);var formatData={},floorplanExtraObject={};Object.defineProperty(floorplanExtraObject,"__esModule",{value:!0}),floorplanExtraObject.FLOORPLANE_EXTRA_OBJECT_IMAGE=void 0;var FLOORPLANE_EXTRA_OBJECT_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";floorplanExtraObject.FLOORPLANE_EXTRA_OBJECT_IMAGE=FLOORPLANE_EXTRA_OBJECT_IMAGE,function(e){var t=interopRequireDefault.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return h.apply(this,arguments)},e.formatExtraObjects=function(e,t,r){return e.map((function(e){var n=e.position,a=e.icon?e.icon:{url:i.FLOORPLANE_EXTRA_OBJECT_IMAGE,width:45,height:48},s=(0,o.getFloorIndexFromModelPosition)(n,t),c=(0,o.modelPosition2FloorplanPosition)(n,r),u=(0,o.floorplanPosition2ImagePosition)(c,r);return{floorIndex:s,icon:a,id:e.id,position:c,positionInImage:u}}))};var r=t(regenerator),n=t(asyncToGenerator.exports),i=floorplanExtraObject,o=formatPosition;function a(e){return s.apply(this,arguments)}function s(){return s=(0,n.default)(r.default.mark((function e(t){var i,o,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Headers({"Content-Type":"text/plain"}),o=function(){var e=(0,n.default)(r.default.mark((function e(t){var n,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={index:t.index,url:t.url,svgUrl:t.svg_url},!t.svg_url){e.next=6;break}return e.next=4,fetch(t.svg_url,{headers:i}).then((function(e){return e.text()}));case 4:o=e.sent,n.svgContent=o;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,Promise.all(t.map(o));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(e){return{id:e.id,size:e.size,name:e.name,path:e.path,roomType:e.room_type,floorType:e.floor_type,roomLabel:{position:e.room_label.position,positionInImage:e.room_label.position_in_image},observerIndexs:e.observer_indexs}}function u(e){return{floorName:e.floor_name,floorIndex:e.floor_index,rooms:e.rooms.map(c)}}function l(e){return{index:e.index,floorIndex:e.floor_index,position:e.position,positionInImage:e.position_in_image}}function f(e){return{rad:e.rad,position:e.position,positionInImage:e.position_in_image,northRad:e.north_rad,roomId:e.room_id,floorIndex:e.floor_index}}function h(){return h=(0,n.default)(r.default.mark((function e(t){var n,i,o,s,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.outlines);case 2:return n=e.sent,i=t.computed_data.bounding,o=t.computed_data.floor_datas.map(u),s=t.computed_data.entrance?f(t.computed_data.entrance):null,c={outlines:n,entrance:s,bounding:i,floorDatas:o,observers:t.computed_data.observers.map(l)},e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}}(formatData),function(e){var t=interopRequireDefault.exports,r=_typeof$5.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(regenerator),i=t(_extends.exports),o=t(slicedToArray.exports),a=t(asyncToGenerator.exports),s=t(classCallCheck.exports),c=t(createClass.exports),u=t(defineProperty$3.exports),l=m(react$2.exports),f=t(Content),h=m(reactDom.exports),p=m(formatData);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}var g=function(){function e(t,r){var i=this;(0,s.default)(this,e),(0,u.default)(this,"pxmm",0),(0,u.default)(this,"wrapperSelector",""),(0,u.default)(this,"wrapper",null),(0,u.default)(this,"size",{width:0,height:0}),(0,u.default)(this,"configs",{}),(0,u.default)(this,"dispose",(function(){i.wrapper&&h.unmountComponentAtNode(i.wrapper)})),(0,u.default)(this,"load",function(){var e=(0,a.default)(n.default.mark((function e(t){var r,o,a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.wrapper||((r=document.querySelector(i.wrapperSelector))||console.warn("插件容器不存在，可能得到与预期不符的效果，是不是忘记初始化容器了？"),i.wrapper=r),o=JSON.parse(JSON.stringify(t)),e.next=4,(0,p.default)(o);case 4:return a=e.sent,i.data=a,e.next=8,new Promise((function(e){var t,r,n=i.five.work.observers[i.five.getCurrentState().panoIndex].floorIndex;if(null!==(t=a.outlines[n])&&void 0!==t&&t.svgContent)return e();var o=new Image,s=null===(r=a.outlines[n])||void 0===r?void 0:r.url;if(!s)return e();o.onload=function(){return e()},o.src=s}));case 8:i.updateSize(),i.render();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.five=t,(null==r?void 0:r.configs)&&Object.assign(this.configs,r.configs),"string"==typeof(null==r?void 0:r.wrapper)?this.wrapperSelector=r.wrapper:(null==r?void 0:r.wrapper)instanceof Element&&(this.wrapper=r.wrapper),t.once("dispose",this.dispose)}return(0,c.default)(e,[{key:"appendTo",value:function(e){this.wrapper=e}},{key:"changeConfigs",value:function(e){Object.assign(this.configs,e),this.render()}},{key:"setExtraObjectsWith3DPositions",value:function(e){this.orginExtraObjects=e,this.data&&(this.extraObjects=(0,p.formatExtraObjects)(e,this.five,this.data),this.render())}},{key:"updateSize",value:function(){if(this.data&&this.wrapper){var e=Math.min(this.wrapper.clientWidth,this.wrapper.clientHeight),t=this.data.bounding,r=t.max,n=t.min,i=r.x-n.x,a=r.y-n.y,s=i>a?[e,e/i*a]:[e/a*i,e],c=(0,o.default)(s,2),u=c[0],l=c[1];this.size={width:u,height:l},this.pxmm=u/i}}},{key:"render",value:function(){if(this.data&&this.pxmm&&this.wrapper){!this.extraObjects&&this.orginExtraObjects&&(this.extraObjects=(0,p.formatExtraObjects)(this.orginExtraObjects,this.five,this.data));var e={pxmm:this.pxmm,five:this.five,width:this.size.width,height:this.size.height,floorplanData:this.data,extraObjects:this.extraObjects,hoverEnable:this.configs.hoverEnable,cameraImage:this.configs.cameraImage};h.render(l.createElement(f.default,(0,i.default)({},e,this.configs)),this.wrapper)}}}]),e}();e.default=g}(Controller),function(e){var t=interopRequireDefault.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PanoFloorplanRadarPlugin=void 0;var r=t(Controller),n=function(e,t){return new r.default(e,t)};e.PanoFloorplanRadarPlugin=n;var i=n;e.default=i}(PanoFloorplanRadarPlugin$1);var PanoFloorplanRadarPlugin=exports("P",getDefaultExportFromCjs(PanoFloorplanRadarPlugin$1)),useFivePlugin$1={};Object.defineProperty(useFivePlugin$1,"__esModule",{value:!0});var useFivePlugin_2=exports("g",useFivePlugin$1.useFivePlugin=useFivePlugin),_react=react;function useFivePlugin(e){var t=(0,_react.unsafe__useFiveInstance)().plugins[e];if(!t)throw new Error('can not find plugin "'.concat(e,'"'));return t}}}}))})();
