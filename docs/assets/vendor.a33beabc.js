var yl=Object.defineProperty;var vl=Object.getOwnPropertySymbols;var Al=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable;var ml=(va,_o,xo)=>_o in va?yl(va,_o,{enumerable:!0,configurable:!0,writable:!0,value:xo}):va[_o]=xo,gl=(va,_o)=>{for(var xo in _o||(_o={}))Al.call(_o,xo)&&ml(va,xo,_o[xo]);if(vl)for(var xo of vl(_o))Ml.call(_o,xo)&&ml(va,xo,_o[xo]);return va};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(va){return va&&va.__esModule&&Object.prototype.hasOwnProperty.call(va,"default")?va.default:va}function getAugmentedNamespace(va){if(va.__esModule)return va;var _o=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(va).forEach(function(xo){var bo=Object.getOwnPropertyDescriptor(va,xo);Object.defineProperty(_o,xo,bo.get?bo:{enumerable:!0,get:function(){return va[xo]}})}),_o}var _global={exports:{}},global$l=_global.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=global$l);var hasOwnProperty$1={}.hasOwnProperty,_has=function(va,_o){return hasOwnProperty$1.call(va,_o)},_fails=function(va){try{return!!va()}catch{return!0}},_descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),_core={exports:{}},core$6=_core.exports={version:"2.6.12"};typeof __e=="number"&&(__e=core$6);var _objectDp={},_isObject=function(va){return typeof va=="object"?va!==null:typeof va=="function"},isObject$u=_isObject,_anObject=function(va){if(!isObject$u(va))throw TypeError(va+" is not an object!");return va},isObject$t=_isObject,document$2=_global.exports.document,is$1=isObject$t(document$2)&&isObject$t(document$2.createElement),_domCreate=function(va){return is$1?document$2.createElement(va):{}},_ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a!=7}),isObject$s=_isObject,_toPrimitive=function(va,_o){if(!isObject$s(va))return va;var xo,bo;if(_o&&typeof(xo=va.toString)=="function"&&!isObject$s(bo=xo.call(va))||typeof(xo=va.valueOf)=="function"&&!isObject$s(bo=xo.call(va))||!_o&&typeof(xo=va.toString)=="function"&&!isObject$s(bo=xo.call(va)))return bo;throw TypeError("Can't convert object to primitive value")},anObject$D=_anObject,IE8_DOM_DEFINE$1=_ie8DomDefine,toPrimitive$a=_toPrimitive,dP$b=Object.defineProperty;_objectDp.f=_descriptors?Object.defineProperty:function(_o,xo,bo){if(anObject$D(_o),xo=toPrimitive$a(xo,!0),anObject$D(bo),IE8_DOM_DEFINE$1)try{return dP$b(_o,xo,bo)}catch{}if("get"in bo||"set"in bo)throw TypeError("Accessors not supported!");return"value"in bo&&(_o[xo]=bo.value),_o};var _propertyDesc=function(va,_o){return{enumerable:!(va&1),configurable:!(va&2),writable:!(va&4),value:_o}},dP$a=_objectDp,createDesc$4=_propertyDesc,_hide=_descriptors?function(va,_o,xo){return dP$a.f(va,_o,createDesc$4(1,xo))}:function(va,_o,xo){return va[_o]=xo,va},_redefine={exports:{}},id$3=0,px$1=Math.random(),_uid=function(va){return"Symbol(".concat(va===void 0?"":va,")_",(++id$3+px$1).toString(36))},_shared={exports:{}},_library=!1,core$5=_core.exports,global$k=_global.exports,SHARED="__core-js_shared__",store$3=global$k[SHARED]||(global$k[SHARED]={});(_shared.exports=function(va,_o){return store$3[va]||(store$3[va]=_o!==void 0?_o:{})})("versions",[]).push({version:core$5.version,mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"});var _functionToString=_shared.exports("native-function-to-string",Function.toString),global$j=_global.exports,hide$7=_hide,has$b=_has,SRC=_uid("src"),$toString$2=_functionToString,TO_STRING$2="toString",TPL=(""+$toString$2).split(TO_STRING$2);_core.exports.inspectSource=function(va){return $toString$2.call(va)};(_redefine.exports=function(va,_o,xo,bo){var wo=typeof xo=="function";wo&&(has$b(xo,"name")||hide$7(xo,"name",_o)),va[_o]!==xo&&(wo&&(has$b(xo,SRC)||hide$7(xo,SRC,va[_o]?""+va[_o]:TPL.join(String(_o)))),va===global$j?va[_o]=xo:bo?va[_o]?va[_o]=xo:hide$7(va,_o,xo):(delete va[_o],hide$7(va,_o,xo)))})(Function.prototype,TO_STRING$2,function(){return typeof this=="function"&&this[SRC]||$toString$2.call(this)});var _aFunction=function(va){if(typeof va!="function")throw TypeError(va+" is not a function!");return va},aFunction$e=_aFunction,_ctx=function(va,_o,xo){if(aFunction$e(va),_o===void 0)return va;switch(xo){case 1:return function(bo){return va.call(_o,bo)};case 2:return function(bo,wo){return va.call(_o,bo,wo)};case 3:return function(bo,wo,Eo){return va.call(_o,bo,wo,Eo)}}return function(){return va.apply(_o,arguments)}},global$i=_global.exports,core$4=_core.exports,hide$6=_hide,redefine$7=_redefine.exports,ctx$9=_ctx,PROTOTYPE$3="prototype",$export$23=function(va,_o,xo){var bo=va&$export$23.F,wo=va&$export$23.G,Eo=va&$export$23.S,To=va&$export$23.P,So=va&$export$23.B,$o=wo?global$i:Eo?global$i[_o]||(global$i[_o]={}):(global$i[_o]||{})[PROTOTYPE$3],Do=wo?core$4:core$4[_o]||(core$4[_o]={}),No=Do[PROTOTYPE$3]||(Do[PROTOTYPE$3]={}),Oo,Lo,Co,Ro;wo&&(xo=_o);for(Oo in xo)Lo=!bo&&$o&&$o[Oo]!==void 0,Co=(Lo?$o:xo)[Oo],Ro=So&&Lo?ctx$9(Co,global$i):To&&typeof Co=="function"?ctx$9(Function.call,Co):Co,$o&&redefine$7($o,Oo,Co,va&$export$23.U),Do[Oo]!=Co&&hide$6(Do,Oo,Ro),To&&No[Oo]!=Co&&(No[Oo]=Co)};global$i.core=core$4;$export$23.F=1;$export$23.G=2;$export$23.S=4;$export$23.P=8;$export$23.B=16;$export$23.W=32;$export$23.U=64;$export$23.R=128;var _export=$export$23,_meta={exports:{}},META$1=_uid("meta"),isObject$r=_isObject,has$a=_has,setDesc=_objectDp.f,id$2=0,isExtensible$1=Object.isExtensible||function(){return!0},FREEZE=!_fails(function(){return isExtensible$1(Object.preventExtensions({}))}),setMeta=function(va){setDesc(va,META$1,{value:{i:"O"+ ++id$2,w:{}}})},fastKey$1=function(va,_o){if(!isObject$r(va))return typeof va=="symbol"?va:(typeof va=="string"?"S":"P")+va;if(!has$a(va,META$1)){if(!isExtensible$1(va))return"F";if(!_o)return"E";setMeta(va)}return va[META$1].i},getWeak$2=function(va,_o){if(!has$a(va,META$1)){if(!isExtensible$1(va))return!0;if(!_o)return!1;setMeta(va)}return va[META$1].w},onFreeze=function(va){return FREEZE&&meta$5.NEED&&isExtensible$1(va)&&!has$a(va,META$1)&&setMeta(va),va},meta$5=_meta.exports={KEY:META$1,NEED:!1,fastKey:fastKey$1,getWeak:getWeak$2,onFreeze},_wks={exports:{}},store$2=_shared.exports("wks"),uid$4=_uid,Symbol$1=_global.exports.Symbol,USE_SYMBOL=typeof Symbol$1=="function",$exports=_wks.exports=function(va){return store$2[va]||(store$2[va]=USE_SYMBOL&&Symbol$1[va]||(USE_SYMBOL?Symbol$1:uid$4)("Symbol."+va))};$exports.store=store$2;var def=_objectDp.f,has$9=_has,TAG$2=_wks.exports("toStringTag"),_setToStringTag=function(va,_o,xo){va&&!has$9(va=xo?va:va.prototype,TAG$2)&&def(va,TAG$2,{configurable:!0,value:_o})},_wksExt={};_wksExt.f=_wks.exports;var global$h=_global.exports,core$3=_core.exports,wksExt$1=_wksExt,defineProperty$1=_objectDp.f,_wksDefine=function(va){var _o=core$3.Symbol||(core$3.Symbol=global$h.Symbol||{});va.charAt(0)!="_"&&!(va in _o)&&defineProperty$1(_o,va,{value:wksExt$1.f(va)})},toString$2={}.toString,_cof=function(va){return toString$2.call(va).slice(8,-1)},cof$7=_cof,_iobject=Object("z").propertyIsEnumerable(0)?Object:function(va){return cof$7(va)=="String"?va.split(""):Object(va)},_defined=function(va){if(va==null)throw TypeError("Can't call method on  "+va);return va},IObject$3=_iobject,defined$9=_defined,_toIobject=function(va){return IObject$3(defined$9(va))},ceil=Math.ceil,floor$3=Math.floor,_toInteger=function(va){return isNaN(va=+va)?0:(va>0?floor$3:ceil)(va)},toInteger$9=_toInteger,min$2=Math.min,_toLength=function(va){return va>0?min$2(toInteger$9(va),9007199254740991):0},toInteger$8=_toInteger,max$1=Math.max,min$1=Math.min,_toAbsoluteIndex=function(va,_o){return va=toInteger$8(va),va<0?max$1(va+_o,0):min$1(va,_o)},toIObject$b=_toIobject,toLength$m=_toLength,toAbsoluteIndex$6=_toAbsoluteIndex,_arrayIncludes=function(va){return function(_o,xo,bo){var wo=toIObject$b(_o),Eo=toLength$m(wo.length),To=toAbsoluteIndex$6(bo,Eo),So;if(va&&xo!=xo){for(;Eo>To;)if(So=wo[To++],So!=So)return!0}else for(;Eo>To;To++)if((va||To in wo)&&wo[To]===xo)return va||To||0;return!va&&-1}},shared$2=_shared.exports("keys"),uid$3=_uid,_sharedKey=function(va){return shared$2[va]||(shared$2[va]=uid$3(va))},has$8=_has,toIObject$a=_toIobject,arrayIndexOf$1=_arrayIncludes(!1),IE_PROTO$2=_sharedKey("IE_PROTO"),_objectKeysInternal=function(va,_o){var xo=toIObject$a(va),bo=0,wo=[],Eo;for(Eo in xo)Eo!=IE_PROTO$2&&has$8(xo,Eo)&&wo.push(Eo);for(;_o.length>bo;)has$8(xo,Eo=_o[bo++])&&(~arrayIndexOf$1(wo,Eo)||wo.push(Eo));return wo},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$keys$3=_objectKeysInternal,enumBugKeys$1=_enumBugKeys,_objectKeys=Object.keys||function(_o){return $keys$3(_o,enumBugKeys$1)},_objectGops={};_objectGops.f=Object.getOwnPropertySymbols;var _objectPie={};_objectPie.f={}.propertyIsEnumerable;var getKeys$4=_objectKeys,gOPS$2=_objectGops,pIE$2=_objectPie,_enumKeys=function(va){var _o=getKeys$4(va),xo=gOPS$2.f;if(xo)for(var bo=xo(va),wo=pIE$2.f,Eo=0,To;bo.length>Eo;)wo.call(va,To=bo[Eo++])&&_o.push(To);return _o},cof$6=_cof,_isArray=Array.isArray||function(_o){return cof$6(_o)=="Array"},defined$8=_defined,_toObject=function(va){return Object(defined$8(va))},dP$9=_objectDp,anObject$C=_anObject,getKeys$3=_objectKeys,_objectDps=_descriptors?Object.defineProperties:function(_o,xo){anObject$C(_o);for(var bo=getKeys$3(xo),wo=bo.length,Eo=0,To;wo>Eo;)dP$9.f(_o,To=bo[Eo++],xo[To]);return _o},document$1=_global.exports.document,_html=document$1&&document$1.documentElement,anObject$B=_anObject,dPs=_objectDps,enumBugKeys=_enumBugKeys,IE_PROTO$1=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$2="prototype",createDict=function(){var va=_domCreate("iframe"),_o=enumBugKeys.length,xo="<",bo=">",wo;for(va.style.display="none",_html.appendChild(va),va.src="javascript:",wo=va.contentWindow.document,wo.open(),wo.write(xo+"script"+bo+"document.F=Object"+xo+"/script"+bo),wo.close(),createDict=wo.F;_o--;)delete createDict[PROTOTYPE$2][enumBugKeys[_o]];return createDict()},_objectCreate=Object.create||function(_o,xo){var bo;return _o!==null?(Empty[PROTOTYPE$2]=anObject$B(_o),bo=new Empty,Empty[PROTOTYPE$2]=null,bo[IE_PROTO$1]=_o):bo=createDict(),xo===void 0?bo:dPs(bo,xo)},_objectGopnExt={},_objectGopn={},$keys$2=_objectKeysInternal,hiddenKeys=_enumBugKeys.concat("length","prototype");_objectGopn.f=Object.getOwnPropertyNames||function(_o){return $keys$2(_o,hiddenKeys)};var toIObject$9=_toIobject,gOPN$5=_objectGopn.f,toString$1={}.toString,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(va){try{return gOPN$5(va)}catch{return windowNames.slice()}};_objectGopnExt.f=function(_o){return windowNames&&toString$1.call(_o)=="[object Window]"?getWindowNames(_o):gOPN$5(toIObject$9(_o))};var _objectGopd={},pIE$1=_objectPie,createDesc$3=_propertyDesc,toIObject$8=_toIobject,toPrimitive$9=_toPrimitive,has$7=_has,IE8_DOM_DEFINE=_ie8DomDefine,gOPD$8=Object.getOwnPropertyDescriptor;_objectGopd.f=_descriptors?gOPD$8:function(_o,xo){if(_o=toIObject$8(_o),xo=toPrimitive$9(xo,!0),IE8_DOM_DEFINE)try{return gOPD$8(_o,xo)}catch{}if(has$7(_o,xo))return createDesc$3(!pIE$1.f.call(_o,xo),_o[xo])};var global$g=_global.exports,has$6=_has,DESCRIPTORS$5=_descriptors,$export$22=_export,redefine$6=_redefine.exports,META=_meta.exports.KEY,$fails$2=_fails,shared$1=_shared.exports,setToStringTag$3=_setToStringTag,uid$2=_uid,wks$3=_wks.exports,wksExt=_wksExt,wksDefine=_wksDefine,enumKeys=_enumKeys,isArray$2=_isArray,anObject$A=_anObject,isObject$q=_isObject,toObject$k=_toObject,toIObject$7=_toIobject,toPrimitive$8=_toPrimitive,createDesc$2=_propertyDesc,_create=_objectCreate,gOPNExt=_objectGopnExt,$GOPD$1=_objectGopd,$GOPS=_objectGops,$DP$1=_objectDp,$keys$1=_objectKeys,gOPD$7=$GOPD$1.f,dP$8=$DP$1.f,gOPN$4=gOPNExt.f,$Symbol=global$g.Symbol,$JSON=global$g.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE$1="prototype",HIDDEN=wks$3("_hidden"),TO_PRIMITIVE$1=wks$3("toPrimitive"),isEnum$1={}.propertyIsEnumerable,SymbolRegistry=shared$1("symbol-registry"),AllSymbols=shared$1("symbols"),OPSymbols=shared$1("op-symbols"),ObjectProto$1=Object[PROTOTYPE$1],USE_NATIVE$1=typeof $Symbol=="function"&&!!$GOPS.f,QObject=global$g.QObject,setter=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,setSymbolDesc=DESCRIPTORS$5&&$fails$2(function(){return _create(dP$8({},"a",{get:function(){return dP$8(this,"a",{value:7}).a}})).a!=7})?function(va,_o,xo){var bo=gOPD$7(ObjectProto$1,_o);bo&&delete ObjectProto$1[_o],dP$8(va,_o,xo),bo&&va!==ObjectProto$1&&dP$8(ObjectProto$1,_o,bo)}:dP$8,wrap$1=function(va){var _o=AllSymbols[va]=_create($Symbol[PROTOTYPE$1]);return _o._k=va,_o},isSymbol$1=USE_NATIVE$1&&typeof $Symbol.iterator=="symbol"?function(va){return typeof va=="symbol"}:function(va){return va instanceof $Symbol},$defineProperty$3=function(_o,xo,bo){return _o===ObjectProto$1&&$defineProperty$3(OPSymbols,xo,bo),anObject$A(_o),xo=toPrimitive$8(xo,!0),anObject$A(bo),has$6(AllSymbols,xo)?(bo.enumerable?(has$6(_o,HIDDEN)&&_o[HIDDEN][xo]&&(_o[HIDDEN][xo]=!1),bo=_create(bo,{enumerable:createDesc$2(0,!1)})):(has$6(_o,HIDDEN)||dP$8(_o,HIDDEN,createDesc$2(1,{})),_o[HIDDEN][xo]=!0),setSymbolDesc(_o,xo,bo)):dP$8(_o,xo,bo)},$defineProperties=function(_o,xo){anObject$A(_o);for(var bo=enumKeys(xo=toIObject$7(xo)),wo=0,Eo=bo.length,To;Eo>wo;)$defineProperty$3(_o,To=bo[wo++],xo[To]);return _o},$create=function(_o,xo){return xo===void 0?_create(_o):$defineProperties(_create(_o),xo)},$propertyIsEnumerable=function(_o){var xo=isEnum$1.call(this,_o=toPrimitive$8(_o,!0));return this===ObjectProto$1&&has$6(AllSymbols,_o)&&!has$6(OPSymbols,_o)?!1:xo||!has$6(this,_o)||!has$6(AllSymbols,_o)||has$6(this,HIDDEN)&&this[HIDDEN][_o]?xo:!0},$getOwnPropertyDescriptor$1=function(_o,xo){if(_o=toIObject$7(_o),xo=toPrimitive$8(xo,!0),!(_o===ObjectProto$1&&has$6(AllSymbols,xo)&&!has$6(OPSymbols,xo))){var bo=gOPD$7(_o,xo);return bo&&has$6(AllSymbols,xo)&&!(has$6(_o,HIDDEN)&&_o[HIDDEN][xo])&&(bo.enumerable=!0),bo}},$getOwnPropertyNames=function(_o){for(var xo=gOPN$4(toIObject$7(_o)),bo=[],wo=0,Eo;xo.length>wo;)!has$6(AllSymbols,Eo=xo[wo++])&&Eo!=HIDDEN&&Eo!=META&&bo.push(Eo);return bo},$getOwnPropertySymbols=function(_o){for(var xo=_o===ObjectProto$1,bo=gOPN$4(xo?OPSymbols:toIObject$7(_o)),wo=[],Eo=0,To;bo.length>Eo;)has$6(AllSymbols,To=bo[Eo++])&&(xo?has$6(ObjectProto$1,To):!0)&&wo.push(AllSymbols[To]);return wo};USE_NATIVE$1||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var _o=uid$2(arguments.length>0?arguments[0]:void 0),xo=function(bo){this===ObjectProto$1&&xo.call(OPSymbols,bo),has$6(this,HIDDEN)&&has$6(this[HIDDEN],_o)&&(this[HIDDEN][_o]=!1),setSymbolDesc(this,_o,createDesc$2(1,bo))};return DESCRIPTORS$5&&setter&&setSymbolDesc(ObjectProto$1,_o,{configurable:!0,set:xo}),wrap$1(_o)},redefine$6($Symbol[PROTOTYPE$1],"toString",function(){return this._k}),$GOPD$1.f=$getOwnPropertyDescriptor$1,$DP$1.f=$defineProperty$3,_objectGopn.f=gOPNExt.f=$getOwnPropertyNames,_objectPie.f=$propertyIsEnumerable,$GOPS.f=$getOwnPropertySymbols,DESCRIPTORS$5&&!_library&&redefine$6(ObjectProto$1,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(va){return wrap$1(wks$3(va))});$export$22($export$22.G+$export$22.W+$export$22.F*!USE_NATIVE$1,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j$3=0;es6Symbols.length>j$3;)wks$3(es6Symbols[j$3++]);for(var wellKnownSymbols=$keys$1(wks$3.store),k$2=0;wellKnownSymbols.length>k$2;)wksDefine(wellKnownSymbols[k$2++]);$export$22($export$22.S+$export$22.F*!USE_NATIVE$1,"Symbol",{for:function(va){return has$6(SymbolRegistry,va+="")?SymbolRegistry[va]:SymbolRegistry[va]=$Symbol(va)},keyFor:function(_o){if(!isSymbol$1(_o))throw TypeError(_o+" is not a symbol!");for(var xo in SymbolRegistry)if(SymbolRegistry[xo]===_o)return xo},useSetter:function(){setter=!0},useSimple:function(){setter=!1}});$export$22($export$22.S+$export$22.F*!USE_NATIVE$1,"Object",{create:$create,defineProperty:$defineProperty$3,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor$1,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES=$fails$2(function(){$GOPS.f(1)});$export$22($export$22.S+$export$22.F*FAILS_ON_PRIMITIVES,"Object",{getOwnPropertySymbols:function(_o){return $GOPS.f(toObject$k(_o))}});$JSON&&$export$22($export$22.S+$export$22.F*(!USE_NATIVE$1||$fails$2(function(){var va=$Symbol();return _stringify([va])!="[null]"||_stringify({a:va})!="{}"||_stringify(Object(va))!="{}"})),"JSON",{stringify:function(_o){for(var xo=[_o],bo=1,wo,Eo;arguments.length>bo;)xo.push(arguments[bo++]);if(Eo=wo=xo[1],!(!isObject$q(wo)&&_o===void 0||isSymbol$1(_o)))return isArray$2(wo)||(wo=function(To,So){if(typeof Eo=="function"&&(So=Eo.call(this,To,So)),!isSymbol$1(So))return So}),xo[1]=wo,_stringify.apply($JSON,xo)}});$Symbol[PROTOTYPE$1][TO_PRIMITIVE$1]||_hide($Symbol[PROTOTYPE$1],TO_PRIMITIVE$1,$Symbol[PROTOTYPE$1].valueOf);setToStringTag$3($Symbol,"Symbol");setToStringTag$3(Math,"Math",!0);setToStringTag$3(global$g.JSON,"JSON",!0);var $export$21=_export;$export$21($export$21.S,"Object",{create:_objectCreate});var $export$20=_export;$export$20($export$20.S+$export$20.F*!_descriptors,"Object",{defineProperty:_objectDp.f});var $export$1$=_export;$export$1$($export$1$.S+$export$1$.F*!_descriptors,"Object",{defineProperties:_objectDps});var $export$1_=_export,core$2=_core.exports,fails$b=_fails,_objectSap=function(va,_o){var xo=(core$2.Object||{})[va]||Object[va],bo={};bo[va]=_o(xo),$export$1_($export$1_.S+$export$1_.F*fails$b(function(){xo(1)}),"Object",bo)},toIObject$6=_toIobject,$getOwnPropertyDescriptor=_objectGopd.f;_objectSap("getOwnPropertyDescriptor",function(){return function(_o,xo){return $getOwnPropertyDescriptor(toIObject$6(_o),xo)}});var has$5=_has,toObject$j=_toObject,IE_PROTO=_sharedKey("IE_PROTO"),ObjectProto=Object.prototype,_objectGpo=Object.getPrototypeOf||function(va){return va=toObject$j(va),has$5(va,IE_PROTO)?va[IE_PROTO]:typeof va.constructor=="function"&&va instanceof va.constructor?va.constructor.prototype:va instanceof Object?ObjectProto:null},toObject$i=_toObject,$getPrototypeOf=_objectGpo;_objectSap("getPrototypeOf",function(){return function(_o){return $getPrototypeOf(toObject$i(_o))}});var toObject$h=_toObject,$keys=_objectKeys;_objectSap("keys",function(){return function(_o){return $keys(toObject$h(_o))}});_objectSap("getOwnPropertyNames",function(){return _objectGopnExt.f});var isObject$p=_isObject,meta$4=_meta.exports.onFreeze;_objectSap("freeze",function(va){return function(xo){return va&&isObject$p(xo)?va(meta$4(xo)):xo}});var isObject$o=_isObject,meta$3=_meta.exports.onFreeze;_objectSap("seal",function(va){return function(xo){return va&&isObject$o(xo)?va(meta$3(xo)):xo}});var isObject$n=_isObject,meta$2=_meta.exports.onFreeze;_objectSap("preventExtensions",function(va){return function(xo){return va&&isObject$n(xo)?va(meta$2(xo)):xo}});var isObject$m=_isObject;_objectSap("isFrozen",function(va){return function(xo){return isObject$m(xo)?va?va(xo):!1:!0}});var isObject$l=_isObject;_objectSap("isSealed",function(va){return function(xo){return isObject$l(xo)?va?va(xo):!1:!0}});var isObject$k=_isObject;_objectSap("isExtensible",function(va){return function(xo){return isObject$k(xo)?va?va(xo):!0:!1}});var DESCRIPTORS$4=_descriptors,getKeys$2=_objectKeys,gOPS$1=_objectGops,pIE=_objectPie,toObject$g=_toObject,IObject$2=_iobject,$assign=Object.assign,_objectAssign=!$assign||_fails(function(){var va={},_o={},xo=Symbol(),bo="abcdefghijklmnopqrst";return va[xo]=7,bo.split("").forEach(function(wo){_o[wo]=wo}),$assign({},va)[xo]!=7||Object.keys($assign({},_o)).join("")!=bo})?function(_o,xo){for(var bo=toObject$g(_o),wo=arguments.length,Eo=1,To=gOPS$1.f,So=pIE.f;wo>Eo;)for(var $o=IObject$2(arguments[Eo++]),Do=To?getKeys$2($o).concat(To($o)):getKeys$2($o),No=Do.length,Oo=0,Lo;No>Oo;)Lo=Do[Oo++],(!DESCRIPTORS$4||So.call($o,Lo))&&(bo[Lo]=$o[Lo]);return bo}:$assign,$export$1Z=_export;$export$1Z($export$1Z.S+$export$1Z.F,"Object",{assign:_objectAssign});var _sameValue=Object.is||function(_o,xo){return _o===xo?_o!==0||1/_o==1/xo:_o!=_o&&xo!=xo},$export$1Y=_export;$export$1Y($export$1Y.S,"Object",{is:_sameValue});var isObject$j=_isObject,anObject$z=_anObject,check=function(va,_o){if(anObject$z(va),!isObject$j(_o)&&_o!==null)throw TypeError(_o+": can't set as prototype!")},_setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(va,_o,xo){try{xo=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2),xo(va,[]),_o=!(va instanceof Array)}catch{_o=!0}return function(wo,Eo){return check(wo,Eo),_o?wo.__proto__=Eo:xo(wo,Eo),wo}}({},!1):void 0),check},$export$1X=_export;$export$1X($export$1X.S,"Object",{setPrototypeOf:_setProto.set});var cof$5=_cof,TAG$1=_wks.exports("toStringTag"),ARG=cof$5(function(){return arguments}())=="Arguments",tryGet=function(va,_o){try{return va[_o]}catch{}},_classof=function(va){var _o,xo,bo;return va===void 0?"Undefined":va===null?"Null":typeof(xo=tryGet(_o=Object(va),TAG$1))=="string"?xo:ARG?cof$5(_o):(bo=cof$5(_o))=="Object"&&typeof _o.callee=="function"?"Arguments":bo},classof$5=_classof,test$1={};test$1[_wks.exports("toStringTag")]="z";test$1+""!="[object z]"&&_redefine.exports(Object.prototype,"toString",function(){return"[object "+classof$5(this)+"]"},!0);var _invoke=function(va,_o,xo){var bo=xo===void 0;switch(_o.length){case 0:return bo?va():va.call(xo);case 1:return bo?va(_o[0]):va.call(xo,_o[0]);case 2:return bo?va(_o[0],_o[1]):va.call(xo,_o[0],_o[1]);case 3:return bo?va(_o[0],_o[1],_o[2]):va.call(xo,_o[0],_o[1],_o[2]);case 4:return bo?va(_o[0],_o[1],_o[2],_o[3]):va.call(xo,_o[0],_o[1],_o[2],_o[3])}return va.apply(xo,_o)},aFunction$d=_aFunction,isObject$i=_isObject,invoke$1=_invoke,arraySlice$2=[].slice,factories={},construct=function(va,_o,xo){if(!(_o in factories)){for(var bo=[],wo=0;wo<_o;wo++)bo[wo]="a["+wo+"]";factories[_o]=Function("F,a","return new F("+bo.join(",")+")")}return factories[_o](va,xo)},_bind=Function.bind||function(_o){var xo=aFunction$d(this),bo=arraySlice$2.call(arguments,1),wo=function(){var Eo=bo.concat(arraySlice$2.call(arguments));return this instanceof wo?construct(xo,Eo.length,Eo):invoke$1(xo,Eo,_o)};return isObject$i(xo.prototype)&&(wo.prototype=xo.prototype),wo},$export$1W=_export;$export$1W($export$1W.P,"Function",{bind:_bind});var dP$7=_objectDp.f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME$1="name";NAME$1 in FProto||_descriptors&&dP$7(FProto,NAME$1,{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch{return""}}});var isObject$h=_isObject,getPrototypeOf$9=_objectGpo,HAS_INSTANCE=_wks.exports("hasInstance"),FunctionProto=Function.prototype;HAS_INSTANCE in FunctionProto||_objectDp.f(FunctionProto,HAS_INSTANCE,{value:function(va){if(typeof this!="function"||!isObject$h(va))return!1;if(!isObject$h(this.prototype))return va instanceof this;for(;va=getPrototypeOf$9(va);)if(this.prototype===va)return!0;return!1}});var _stringWs=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,$export$1V=_export,defined$7=_defined,fails$a=_fails,spaces=_stringWs,space="["+spaces+"]",non="\u200B\x85",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(va,_o,xo){var bo={},wo=fails$a(function(){return!!spaces[va]()||non[va]()!=non}),Eo=bo[va]=wo?_o(trim):spaces[va];xo&&(bo[xo]=Eo),$export$1V($export$1V.P+$export$1V.F*wo,"String",bo)},trim=exporter.trim=function(va,_o){return va=String(defined$7(va)),_o&1&&(va=va.replace(ltrim,"")),_o&2&&(va=va.replace(rtrim,"")),va},_stringTrim=exporter,$parseInt$2=_global.exports.parseInt,$trim$2=_stringTrim.trim,ws=_stringWs,hex=/^[-+]?0[xX]/,_parseInt=$parseInt$2(ws+"08")!==8||$parseInt$2(ws+"0x16")!==22?function(_o,xo){var bo=$trim$2(String(_o),3);return $parseInt$2(bo,xo>>>0||(hex.test(bo)?16:10))}:$parseInt$2,$export$1U=_export,$parseInt$1=_parseInt;$export$1U($export$1U.G+$export$1U.F*(parseInt!=$parseInt$1),{parseInt:$parseInt$1});var $parseFloat$2=_global.exports.parseFloat,$trim$1=_stringTrim.trim,_parseFloat=1/$parseFloat$2(_stringWs+"-0")!=-1/0?function(_o){var xo=$trim$1(String(_o),3),bo=$parseFloat$2(xo);return bo===0&&xo.charAt(0)=="-"?-0:bo}:$parseFloat$2,$export$1T=_export,$parseFloat$1=_parseFloat;$export$1T($export$1T.G+$export$1T.F*(parseFloat!=$parseFloat$1),{parseFloat:$parseFloat$1});var isObject$g=_isObject,setPrototypeOf=_setProto.set,_inheritIfRequired=function(va,_o,xo){var bo=_o.constructor,wo;return bo!==xo&&typeof bo=="function"&&(wo=bo.prototype)!==xo.prototype&&isObject$g(wo)&&setPrototypeOf&&setPrototypeOf(va,wo),va},global$f=_global.exports,has$4=_has,cof$4=_cof,inheritIfRequired$2=_inheritIfRequired,toPrimitive$7=_toPrimitive,fails$9=_fails,gOPN$3=_objectGopn.f,gOPD$6=_objectGopd.f,dP$6=_objectDp.f,$trim=_stringTrim.trim,NUMBER$1="Number",$Number=global$f[NUMBER$1],Base$1=$Number,proto$4=$Number.prototype,BROKEN_COF=cof$4(_objectCreate(proto$4))==NUMBER$1,TRIM="trim"in String.prototype,toNumber=function(va){var _o=toPrimitive$7(va,!1);if(typeof _o=="string"&&_o.length>2){_o=TRIM?_o.trim():$trim(_o,3);var xo=_o.charCodeAt(0),bo,wo,Eo;if(xo===43||xo===45){if(bo=_o.charCodeAt(2),bo===88||bo===120)return NaN}else if(xo===48){switch(_o.charCodeAt(1)){case 66:case 98:wo=2,Eo=49;break;case 79:case 111:wo=8,Eo=55;break;default:return+_o}for(var To=_o.slice(2),So=0,$o=To.length,Do;So<$o;So++)if(Do=To.charCodeAt(So),Do<48||Do>Eo)return NaN;return parseInt(To,wo)}}return+_o};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(_o){var xo=arguments.length<1?0:_o,bo=this;return bo instanceof $Number&&(BROKEN_COF?fails$9(function(){proto$4.valueOf.call(bo)}):cof$4(bo)!=NUMBER$1)?inheritIfRequired$2(new Base$1(toNumber(xo)),bo,$Number):toNumber(xo)};for(var keys$2=_descriptors?gOPN$3(Base$1):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j$2=0,key$1;keys$2.length>j$2;j$2++)has$4(Base$1,key$1=keys$2[j$2])&&!has$4($Number,key$1)&&dP$6($Number,key$1,gOPD$6(Base$1,key$1));$Number.prototype=proto$4,proto$4.constructor=$Number,_redefine.exports(global$f,NUMBER$1,$Number)}var cof$3=_cof,_aNumberValue=function(va,_o){if(typeof va!="number"&&cof$3(va)!="Number")throw TypeError(_o);return+va},toInteger$7=_toInteger,defined$6=_defined,_stringRepeat=function(_o){var xo=String(defined$6(this)),bo="",wo=toInteger$7(_o);if(wo<0||wo==1/0)throw RangeError("Count can't be negative");for(;wo>0;(wo>>>=1)&&(xo+=xo))wo&1&&(bo+=xo);return bo},$export$1S=_export,toInteger$6=_toInteger,aNumberValue$1=_aNumberValue,repeat$1=_stringRepeat,$toFixed=1 .toFixed,floor$2=Math.floor,data=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",ZERO="0",multiply=function(va,_o){for(var xo=-1,bo=_o;++xo<6;)bo+=va*data[xo],data[xo]=bo%1e7,bo=floor$2(bo/1e7)},divide=function(va){for(var _o=6,xo=0;--_o>=0;)xo+=data[_o],data[_o]=floor$2(xo/va),xo=xo%va*1e7},numToString=function(){for(var va=6,_o="";--va>=0;)if(_o!==""||va===0||data[va]!==0){var xo=String(data[va]);_o=_o===""?xo:_o+repeat$1.call(ZERO,7-xo.length)+xo}return _o},pow$1=function(va,_o,xo){return _o===0?xo:_o%2==1?pow$1(va,_o-1,xo*va):pow$1(va*va,_o/2,xo)},log=function(va){for(var _o=0,xo=va;xo>=4096;)_o+=12,xo/=4096;for(;xo>=2;)_o+=1,xo/=2;return _o};$export$1S($export$1S.P+$export$1S.F*(!!$toFixed&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!_fails(function(){$toFixed.call({})})),"Number",{toFixed:function(_o){var xo=aNumberValue$1(this,ERROR),bo=toInteger$6(_o),wo="",Eo=ZERO,To,So,$o,Do;if(bo<0||bo>20)throw RangeError(ERROR);if(xo!=xo)return"NaN";if(xo<=-1e21||xo>=1e21)return String(xo);if(xo<0&&(wo="-",xo=-xo),xo>1e-21)if(To=log(xo*pow$1(2,69,1))-69,So=To<0?xo*pow$1(2,-To,1):xo/pow$1(2,To,1),So*=4503599627370496,To=52-To,To>0){for(multiply(0,So),$o=bo;$o>=7;)multiply(1e7,0),$o-=7;for(multiply(pow$1(10,$o,1),0),$o=To-1;$o>=23;)divide(1<<23),$o-=23;divide(1<<$o),multiply(1,1),divide(2),Eo=numToString()}else multiply(0,So),multiply(1<<-To,0),Eo=numToString()+repeat$1.call(ZERO,bo);return bo>0?(Do=Eo.length,Eo=wo+(Do<=bo?"0."+repeat$1.call(ZERO,bo-Do)+Eo:Eo.slice(0,Do-bo)+"."+Eo.slice(Do-bo))):Eo=wo+Eo,Eo}});var $export$1R=_export,$fails$1=_fails,aNumberValue=_aNumberValue,$toPrecision=1 .toPrecision;$export$1R($export$1R.P+$export$1R.F*($fails$1(function(){return $toPrecision.call(1,void 0)!=="1"})||!$fails$1(function(){$toPrecision.call({})})),"Number",{toPrecision:function(_o){var xo=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return _o===void 0?$toPrecision.call(xo):$toPrecision.call(xo,_o)}});var $export$1Q=_export;$export$1Q($export$1Q.S,"Number",{EPSILON:Math.pow(2,-52)});var $export$1P=_export,_isFinite=_global.exports.isFinite;$export$1P($export$1P.S,"Number",{isFinite:function(_o){return typeof _o=="number"&&_isFinite(_o)}});var isObject$f=_isObject,floor$1=Math.floor,_isInteger=function(_o){return!isObject$f(_o)&&isFinite(_o)&&floor$1(_o)===_o},$export$1O=_export;$export$1O($export$1O.S,"Number",{isInteger:_isInteger});var $export$1N=_export;$export$1N($export$1N.S,"Number",{isNaN:function(_o){return _o!=_o}});var $export$1M=_export,isInteger=_isInteger,abs$1=Math.abs;$export$1M($export$1M.S,"Number",{isSafeInteger:function(_o){return isInteger(_o)&&abs$1(_o)<=9007199254740991}});var $export$1L=_export;$export$1L($export$1L.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});var $export$1K=_export;$export$1K($export$1K.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var $export$1J=_export,$parseFloat=_parseFloat;$export$1J($export$1J.S+$export$1J.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat});var $export$1I=_export,$parseInt=_parseInt;$export$1I($export$1I.S+$export$1I.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt});var _mathLog1p=Math.log1p||function(_o){return(_o=+_o)>-1e-8&&_o<1e-8?_o-_o*_o/2:Math.log(1+_o)},$export$1H=_export,log1p=_mathLog1p,sqrt=Math.sqrt,$acosh=Math.acosh;$export$1H($export$1H.S+$export$1H.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710&&$acosh(1/0)==1/0),"Math",{acosh:function(_o){return(_o=+_o)<1?NaN:_o>9490626562425156e-8?Math.log(_o)+Math.LN2:log1p(_o-1+sqrt(_o-1)*sqrt(_o+1))}});var $export$1G=_export,$asinh=Math.asinh;function asinh(va){return!isFinite(va=+va)||va==0?va:va<0?-asinh(-va):Math.log(va+Math.sqrt(va*va+1))}$export$1G($export$1G.S+$export$1G.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh});var $export$1F=_export,$atanh=Math.atanh;$export$1F($export$1F.S+$export$1F.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function(_o){return(_o=+_o)==0?_o:Math.log((1+_o)/(1-_o))/2}});var _mathSign=Math.sign||function(_o){return(_o=+_o)==0||_o!=_o?_o:_o<0?-1:1},$export$1E=_export,sign$2=_mathSign;$export$1E($export$1E.S,"Math",{cbrt:function(_o){return sign$2(_o=+_o)*Math.pow(Math.abs(_o),1/3)}});var $export$1D=_export;$export$1D($export$1D.S,"Math",{clz32:function(_o){return(_o>>>=0)?31-Math.floor(Math.log(_o+.5)*Math.LOG2E):32}});var $export$1C=_export,exp$3=Math.exp;$export$1C($export$1C.S,"Math",{cosh:function(_o){return(exp$3(_o=+_o)+exp$3(-_o))/2}});var $expm1$1=Math.expm1,_mathExpm1=!$expm1$1||$expm1$1(10)>22025.465794806718||$expm1$1(10)<22025.465794806718||$expm1$1(-2e-17)!=-2e-17?function(_o){return(_o=+_o)==0?_o:_o>-1e-6&&_o<1e-6?_o+_o*_o/2:Math.exp(_o)-1}:$expm1$1,$export$1B=_export,$expm1=_mathExpm1;$export$1B($export$1B.S+$export$1B.F*($expm1!=Math.expm1),"Math",{expm1:$expm1});var sign$1=_mathSign,pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126),roundTiesToEven=function(va){return va+1/EPSILON-1/EPSILON},_mathFround=Math.fround||function(_o){var xo=Math.abs(_o),bo=sign$1(_o),wo,Eo;return xo<MIN32?bo*roundTiesToEven(xo/MIN32/EPSILON32)*MIN32*EPSILON32:(wo=(1+EPSILON32/EPSILON)*xo,Eo=wo-(wo-xo),Eo>MAX32||Eo!=Eo?bo*(1/0):bo*Eo)},$export$1A=_export;$export$1A($export$1A.S,"Math",{fround:_mathFround});var $export$1z=_export,abs=Math.abs;$export$1z($export$1z.S,"Math",{hypot:function(_o,xo){for(var bo=0,wo=0,Eo=arguments.length,To=0,So,$o;wo<Eo;)So=abs(arguments[wo++]),To<So?($o=To/So,bo=bo*$o*$o+1,To=So):So>0?($o=So/To,bo+=$o*$o):bo+=So;return To===1/0?1/0:To*Math.sqrt(bo)}});var $export$1y=_export,$imul=Math.imul;$export$1y($export$1y.S+$export$1y.F*_fails(function(){return $imul(4294967295,5)!=-5||$imul.length!=2}),"Math",{imul:function(_o,xo){var bo=65535,wo=+_o,Eo=+xo,To=bo&wo,So=bo&Eo;return 0|To*So+((bo&wo>>>16)*So+To*(bo&Eo>>>16)<<16>>>0)}});var $export$1x=_export;$export$1x($export$1x.S,"Math",{log10:function(_o){return Math.log(_o)*Math.LOG10E}});var $export$1w=_export;$export$1w($export$1w.S,"Math",{log1p:_mathLog1p});var $export$1v=_export;$export$1v($export$1v.S,"Math",{log2:function(_o){return Math.log(_o)/Math.LN2}});var $export$1u=_export;$export$1u($export$1u.S,"Math",{sign:_mathSign});var $export$1t=_export,expm1$1=_mathExpm1,exp$2=Math.exp;$export$1t($export$1t.S+$export$1t.F*_fails(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(_o){return Math.abs(_o=+_o)<1?(expm1$1(_o)-expm1$1(-_o))/2:(exp$2(_o-1)-exp$2(-_o-1))*(Math.E/2)}});var $export$1s=_export,expm1=_mathExpm1,exp$1=Math.exp;$export$1s($export$1s.S,"Math",{tanh:function(_o){var xo=expm1(_o=+_o),bo=expm1(-_o);return xo==1/0?1:bo==1/0?-1:(xo-bo)/(exp$1(_o)+exp$1(-_o))}});var $export$1r=_export;$export$1r($export$1r.S,"Math",{trunc:function(_o){return(_o>0?Math.floor:Math.ceil)(_o)}});var $export$1q=_export,toAbsoluteIndex$5=_toAbsoluteIndex,fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export$1q($export$1q.S+$export$1q.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function(_o){for(var xo=[],bo=arguments.length,wo=0,Eo;bo>wo;){if(Eo=+arguments[wo++],toAbsoluteIndex$5(Eo,1114111)!==Eo)throw RangeError(Eo+" is not a valid code point");xo.push(Eo<65536?fromCharCode(Eo):fromCharCode(((Eo-=65536)>>10)+55296,Eo%1024+56320))}return xo.join("")}});var $export$1p=_export,toIObject$5=_toIobject,toLength$l=_toLength;$export$1p($export$1p.S,"String",{raw:function(_o){for(var xo=toIObject$5(_o.raw),bo=toLength$l(xo.length),wo=arguments.length,Eo=[],To=0;bo>To;)Eo.push(String(xo[To++])),To<wo&&Eo.push(String(arguments[To]));return Eo.join("")}});_stringTrim("trim",function(va){return function(){return va(this,3)}});var toInteger$5=_toInteger,defined$5=_defined,_stringAt=function(va){return function(_o,xo){var bo=String(defined$5(_o)),wo=toInteger$5(xo),Eo=bo.length,To,So;return wo<0||wo>=Eo?va?"":void 0:(To=bo.charCodeAt(wo),To<55296||To>56319||wo+1===Eo||(So=bo.charCodeAt(wo+1))<56320||So>57343?va?bo.charAt(wo):To:va?bo.slice(wo,wo+2):(To-55296<<10)+(So-56320)+65536)}},_iterators={},create$5=_objectCreate,descriptor=_propertyDesc,setToStringTag$2=_setToStringTag,IteratorPrototype={};_hide(IteratorPrototype,_wks.exports("iterator"),function(){return this});var _iterCreate=function(va,_o,xo){va.prototype=create$5(IteratorPrototype,{next:descriptor(1,xo)}),setToStringTag$2(va,_o+" Iterator")},$export$1o=_export,redefine$5=_redefine.exports,hide$5=_hide,Iterators$5=_iterators,$iterCreate=_iterCreate,setToStringTag$1=_setToStringTag,getPrototypeOf$8=_objectGpo,ITERATOR$5=_wks.exports("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(va,_o,xo,bo,wo,Eo,To){$iterCreate(xo,_o,bo);var So=function(Bo){if(!BUGGY&&Bo in Oo)return Oo[Bo];switch(Bo){case KEYS:return function(){return new xo(this,Bo)};case VALUES:return function(){return new xo(this,Bo)}}return function(){return new xo(this,Bo)}},$o=_o+" Iterator",Do=wo==VALUES,No=!1,Oo=va.prototype,Lo=Oo[ITERATOR$5]||Oo[FF_ITERATOR]||wo&&Oo[wo],Co=Lo||So(wo),Ro=wo?Do?So("entries"):Co:void 0,jo=_o=="Array"&&Oo.entries||Lo,zo,Io,Po;if(jo&&(Po=getPrototypeOf$8(jo.call(new va)),Po!==Object.prototype&&Po.next&&(setToStringTag$1(Po,$o,!0),typeof Po[ITERATOR$5]!="function"&&hide$5(Po,ITERATOR$5,returnThis))),Do&&Lo&&Lo.name!==VALUES&&(No=!0,Co=function(){return Lo.call(this)}),(BUGGY||No||!Oo[ITERATOR$5])&&hide$5(Oo,ITERATOR$5,Co),Iterators$5[_o]=Co,Iterators$5[$o]=returnThis,wo)if(zo={values:Do?Co:So(VALUES),keys:Eo?Co:So(KEYS),entries:Ro},To)for(Io in zo)Io in Oo||redefine$5(Oo,Io,zo[Io]);else $export$1o($export$1o.P+$export$1o.F*(BUGGY||No),_o,zo);return zo},$at$2=_stringAt(!0);_iterDefine(String,"String",function(va){this._t=String(va),this._i=0},function(){var va=this._t,_o=this._i,xo;return _o>=va.length?{value:void 0,done:!0}:(xo=$at$2(va,_o),this._i+=xo.length,{value:xo,done:!1})});var $export$1n=_export,$at$1=_stringAt(!1);$export$1n($export$1n.P,"String",{codePointAt:function(_o){return $at$1(this,_o)}});var isObject$e=_isObject,cof$2=_cof,MATCH$1=_wks.exports("match"),_isRegexp=function(va){var _o;return isObject$e(va)&&((_o=va[MATCH$1])!==void 0?!!_o:cof$2(va)=="RegExp")},isRegExp$3=_isRegexp,defined$4=_defined,_stringContext=function(va,_o,xo){if(isRegExp$3(_o))throw TypeError("String#"+xo+" doesn't accept regex!");return String(defined$4(va))},MATCH=_wks.exports("match"),_failsIsRegexp=function(va){var _o=/./;try{"/./"[va](_o)}catch{try{return _o[MATCH]=!1,!"/./"[va](_o)}catch{}}return!0},$export$1m=_export,toLength$k=_toLength,context$2=_stringContext,ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export$1m($export$1m.P+$export$1m.F*_failsIsRegexp(ENDS_WITH),"String",{endsWith:function(_o){var xo=context$2(this,_o,ENDS_WITH),bo=arguments.length>1?arguments[1]:void 0,wo=toLength$k(xo.length),Eo=bo===void 0?wo:Math.min(toLength$k(bo),wo),To=String(_o);return $endsWith?$endsWith.call(xo,To,Eo):xo.slice(Eo-To.length,Eo)===To}});var $export$1l=_export,context$1=_stringContext,INCLUDES="includes";$export$1l($export$1l.P+$export$1l.F*_failsIsRegexp(INCLUDES),"String",{includes:function(_o){return!!~context$1(this,_o,INCLUDES).indexOf(_o,arguments.length>1?arguments[1]:void 0)}});var $export$1k=_export;$export$1k($export$1k.P,"String",{repeat:_stringRepeat});var $export$1j=_export,toLength$j=_toLength,context=_stringContext,STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export$1j($export$1j.P+$export$1j.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function(_o){var xo=context(this,_o,STARTS_WITH),bo=toLength$j(Math.min(arguments.length>1?arguments[1]:void 0,xo.length)),wo=String(_o);return $startsWith?$startsWith.call(xo,wo,bo):xo.slice(bo,bo+wo.length)===wo}});var $export$1i=_export,fails$8=_fails,defined$3=_defined,quot=/"/g,createHTML=function(va,_o,xo,bo){var wo=String(defined$3(va)),Eo="<"+_o;return xo!==""&&(Eo+=" "+xo+'="'+String(bo).replace(quot,"&quot;")+'"'),Eo+">"+wo+"</"+_o+">"},_stringHtml=function(va,_o){var xo={};xo[va]=_o(createHTML),$export$1i($export$1i.P+$export$1i.F*fails$8(function(){var bo=""[va]('"');return bo!==bo.toLowerCase()||bo.split('"').length>3}),"String",xo)};_stringHtml("anchor",function(va){return function(xo){return va(this,"a","name",xo)}});_stringHtml("big",function(va){return function(){return va(this,"big","","")}});_stringHtml("blink",function(va){return function(){return va(this,"blink","","")}});_stringHtml("bold",function(va){return function(){return va(this,"b","","")}});_stringHtml("fixed",function(va){return function(){return va(this,"tt","","")}});_stringHtml("fontcolor",function(va){return function(xo){return va(this,"font","color",xo)}});_stringHtml("fontsize",function(va){return function(xo){return va(this,"font","size",xo)}});_stringHtml("italics",function(va){return function(){return va(this,"i","","")}});_stringHtml("link",function(va){return function(xo){return va(this,"a","href",xo)}});_stringHtml("small",function(va){return function(){return va(this,"small","","")}});_stringHtml("strike",function(va){return function(){return va(this,"strike","","")}});_stringHtml("sub",function(va){return function(){return va(this,"sub","","")}});_stringHtml("sup",function(va){return function(){return va(this,"sup","","")}});var $export$1h=_export;$export$1h($export$1h.S,"Date",{now:function(){return new Date().getTime()}});var $export$1g=_export,toObject$f=_toObject,toPrimitive$6=_toPrimitive;$export$1g($export$1g.P+$export$1g.F*_fails(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(_o){var xo=toObject$f(this),bo=toPrimitive$6(xo);return typeof bo=="number"&&!isFinite(bo)?null:xo.toISOString()}});var fails$7=_fails,getTime$1=Date.prototype.getTime,$toISOString=Date.prototype.toISOString,lz=function(va){return va>9?va:"0"+va},_dateToIsoString=fails$7(function(){return $toISOString.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!fails$7(function(){$toISOString.call(new Date(NaN))})?function(){if(!isFinite(getTime$1.call(this)))throw RangeError("Invalid time value");var _o=this,xo=_o.getUTCFullYear(),bo=_o.getUTCMilliseconds(),wo=xo<0?"-":xo>9999?"+":"";return wo+("00000"+Math.abs(xo)).slice(wo?-6:-4)+"-"+lz(_o.getUTCMonth()+1)+"-"+lz(_o.getUTCDate())+"T"+lz(_o.getUTCHours())+":"+lz(_o.getUTCMinutes())+":"+lz(_o.getUTCSeconds())+"."+(bo>99?bo:"0"+lz(bo))+"Z"}:$toISOString,$export$1f=_export,toISOString=_dateToIsoString;$export$1f($export$1f.P+$export$1f.F*(Date.prototype.toISOString!==toISOString),"Date",{toISOString});var DateProto=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING$1="toString",$toString$1=DateProto[TO_STRING$1],getTime=DateProto.getTime;new Date(NaN)+""!=INVALID_DATE&&_redefine.exports(DateProto,TO_STRING$1,function(){var _o=getTime.call(this);return _o===_o?$toString$1.call(this):INVALID_DATE});var anObject$y=_anObject,toPrimitive$5=_toPrimitive,NUMBER="number",_dateToPrimitive=function(va){if(va!=="string"&&va!==NUMBER&&va!=="default")throw TypeError("Incorrect hint");return toPrimitive$5(anObject$y(this),va!=NUMBER)},TO_PRIMITIVE=_wks.exports("toPrimitive"),proto$3=Date.prototype;TO_PRIMITIVE in proto$3||_hide(proto$3,TO_PRIMITIVE,_dateToPrimitive);var $export$1e=_export;$export$1e($export$1e.S,"Array",{isArray:_isArray});var anObject$x=_anObject,_iterCall=function(va,_o,xo,bo){try{return bo?_o(anObject$x(xo)[0],xo[1]):_o(xo)}catch(Eo){var wo=va.return;throw wo!==void 0&&anObject$x(wo.call(va)),Eo}},Iterators$4=_iterators,ITERATOR$4=_wks.exports("iterator"),ArrayProto$2=Array.prototype,_isArrayIter=function(va){return va!==void 0&&(Iterators$4.Array===va||ArrayProto$2[ITERATOR$4]===va)},$defineProperty$2=_objectDp,createDesc$1=_propertyDesc,_createProperty=function(va,_o,xo){_o in va?$defineProperty$2.f(va,_o,createDesc$1(0,xo)):va[_o]=xo},classof$4=_classof,ITERATOR$3=_wks.exports("iterator"),Iterators$3=_iterators,core_getIteratorMethod=_core.exports.getIteratorMethod=function(va){if(va!=null)return va[ITERATOR$3]||va["@@iterator"]||Iterators$3[classof$4(va)]},ITERATOR$2=_wks.exports("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR$2]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch{}var _iterDetect=function(va,_o){if(!_o&&!SAFE_CLOSING)return!1;var xo=!1;try{var bo=[7],wo=bo[ITERATOR$2]();wo.next=function(){return{done:xo=!0}},bo[ITERATOR$2]=function(){return wo},va(bo)}catch{}return xo},ctx$8=_ctx,$export$1d=_export,toObject$e=_toObject,call$1=_iterCall,isArrayIter$2=_isArrayIter,toLength$i=_toLength,createProperty$2=_createProperty,getIterFn$2=core_getIteratorMethod;$export$1d($export$1d.S+$export$1d.F*!_iterDetect(function(va){Array.from(va)}),"Array",{from:function(_o){var xo=toObject$e(_o),bo=typeof this=="function"?this:Array,wo=arguments.length,Eo=wo>1?arguments[1]:void 0,To=Eo!==void 0,So=0,$o=getIterFn$2(xo),Do,No,Oo,Lo;if(To&&(Eo=ctx$8(Eo,wo>2?arguments[2]:void 0,2)),$o!=null&&!(bo==Array&&isArrayIter$2($o)))for(Lo=$o.call(xo),No=new bo;!(Oo=Lo.next()).done;So++)createProperty$2(No,So,To?call$1(Lo,Eo,[Oo.value,So],!0):Oo.value);else for(Do=toLength$i(xo.length),No=new bo(Do);Do>So;So++)createProperty$2(No,So,To?Eo(xo[So],So):xo[So]);return No.length=So,No}});var $export$1c=_export,createProperty$1=_createProperty;$export$1c($export$1c.S+$export$1c.F*_fails(function(){function va(){}return!(Array.of.call(va)instanceof va)}),"Array",{of:function(){for(var _o=0,xo=arguments.length,bo=new(typeof this=="function"?this:Array)(xo);xo>_o;)createProperty$1(bo,_o,arguments[_o++]);return bo.length=xo,bo}});var fails$6=_fails,_strictMethod=function(va,_o){return!!va&&fails$6(function(){_o?va.call(null,function(){},1):va.call(null)})},$export$1b=_export,toIObject$4=_toIobject,arrayJoin$1=[].join;$export$1b($export$1b.P+$export$1b.F*(_iobject!=Object||!_strictMethod(arrayJoin$1)),"Array",{join:function(_o){return arrayJoin$1.call(toIObject$4(this),_o===void 0?",":_o)}});var $export$1a=_export,html$1=_html,cof$1=_cof,toAbsoluteIndex$4=_toAbsoluteIndex,toLength$h=_toLength,arraySlice$1=[].slice;$export$1a($export$1a.P+$export$1a.F*_fails(function(){html$1&&arraySlice$1.call(html$1)}),"Array",{slice:function(_o,xo){var bo=toLength$h(this.length),wo=cof$1(this);if(xo=xo===void 0?bo:xo,wo=="Array")return arraySlice$1.call(this,_o,xo);for(var Eo=toAbsoluteIndex$4(_o,bo),To=toAbsoluteIndex$4(xo,bo),So=toLength$h(To-Eo),$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=wo=="String"?this.charAt(Eo+Do):this[Eo+Do];return $o}});var $export$19=_export,aFunction$c=_aFunction,toObject$d=_toObject,fails$5=_fails,$sort=[].sort,test=[1,2,3];$export$19($export$19.P+$export$19.F*(fails$5(function(){test.sort(void 0)})||!fails$5(function(){test.sort(null)})||!_strictMethod($sort)),"Array",{sort:function(_o){return _o===void 0?$sort.call(toObject$d(this)):$sort.call(toObject$d(this),aFunction$c(_o))}});var isObject$d=_isObject,isArray$1=_isArray,SPECIES$3=_wks.exports("species"),_arraySpeciesConstructor=function(va){var _o;return isArray$1(va)&&(_o=va.constructor,typeof _o=="function"&&(_o===Array||isArray$1(_o.prototype))&&(_o=void 0),isObject$d(_o)&&(_o=_o[SPECIES$3],_o===null&&(_o=void 0))),_o===void 0?Array:_o},speciesConstructor$5=_arraySpeciesConstructor,_arraySpeciesCreate=function(va,_o){return new(speciesConstructor$5(va))(_o)},ctx$7=_ctx,IObject$1=_iobject,toObject$c=_toObject,toLength$g=_toLength,asc=_arraySpeciesCreate,_arrayMethods=function(va,_o){var xo=va==1,bo=va==2,wo=va==3,Eo=va==4,To=va==6,So=va==5||To,$o=_o||asc;return function(Do,No,Oo){for(var Lo=toObject$c(Do),Co=IObject$1(Lo),Ro=ctx$7(No,Oo,3),jo=toLength$g(Co.length),zo=0,Io=xo?$o(Do,jo):bo?$o(Do,0):void 0,Po,Bo;jo>zo;zo++)if((So||zo in Co)&&(Po=Co[zo],Bo=Ro(Po,zo,Lo),va)){if(xo)Io[zo]=Bo;else if(Bo)switch(va){case 3:return!0;case 5:return Po;case 6:return zo;case 2:Io.push(Po)}else if(Eo)return!1}return To?-1:wo||Eo?Eo:Io}},$export$18=_export,$forEach=_arrayMethods(0),STRICT=_strictMethod([].forEach,!0);$export$18($export$18.P+$export$18.F*!STRICT,"Array",{forEach:function(_o){return $forEach(this,_o,arguments[1])}});var $export$17=_export,$map$1=_arrayMethods(1);$export$17($export$17.P+$export$17.F*!_strictMethod([].map,!0),"Array",{map:function(_o){return $map$1(this,_o,arguments[1])}});var $export$16=_export,$filter=_arrayMethods(2);$export$16($export$16.P+$export$16.F*!_strictMethod([].filter,!0),"Array",{filter:function(_o){return $filter(this,_o,arguments[1])}});var $export$15=_export,$some=_arrayMethods(3);$export$15($export$15.P+$export$15.F*!_strictMethod([].some,!0),"Array",{some:function(_o){return $some(this,_o,arguments[1])}});var $export$14=_export,$every=_arrayMethods(4);$export$14($export$14.P+$export$14.F*!_strictMethod([].every,!0),"Array",{every:function(_o){return $every(this,_o,arguments[1])}});var aFunction$b=_aFunction,toObject$b=_toObject,IObject=_iobject,toLength$f=_toLength,_arrayReduce=function(va,_o,xo,bo,wo){aFunction$b(_o);var Eo=toObject$b(va),To=IObject(Eo),So=toLength$f(Eo.length),$o=wo?So-1:0,Do=wo?-1:1;if(xo<2)for(;;){if($o in To){bo=To[$o],$o+=Do;break}if($o+=Do,wo?$o<0:So<=$o)throw TypeError("Reduce of empty array with no initial value")}for(;wo?$o>=0:So>$o;$o+=Do)$o in To&&(bo=_o(bo,To[$o],$o,Eo));return bo},$export$13=_export,$reduce$1=_arrayReduce;$export$13($export$13.P+$export$13.F*!_strictMethod([].reduce,!0),"Array",{reduce:function(_o){return $reduce$1(this,_o,arguments.length,arguments[1],!1)}});var $export$12=_export,$reduce=_arrayReduce;$export$12($export$12.P+$export$12.F*!_strictMethod([].reduceRight,!0),"Array",{reduceRight:function(_o){return $reduce(this,_o,arguments.length,arguments[1],!0)}});var $export$11=_export,$indexOf=_arrayIncludes(!1),$native$1=[].indexOf,NEGATIVE_ZERO$1=!!$native$1&&1/[1].indexOf(1,-0)<0;$export$11($export$11.P+$export$11.F*(NEGATIVE_ZERO$1||!_strictMethod($native$1)),"Array",{indexOf:function(_o){return NEGATIVE_ZERO$1?$native$1.apply(this,arguments)||0:$indexOf(this,_o,arguments[1])}});var $export$10=_export,toIObject$3=_toIobject,toInteger$4=_toInteger,toLength$e=_toLength,$native=[].lastIndexOf,NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export$10($export$10.P+$export$10.F*(NEGATIVE_ZERO||!_strictMethod($native)),"Array",{lastIndexOf:function(_o){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var xo=toIObject$3(this),bo=toLength$e(xo.length),wo=bo-1;for(arguments.length>1&&(wo=Math.min(wo,toInteger$4(arguments[1]))),wo<0&&(wo=bo+wo);wo>=0;wo--)if(wo in xo&&xo[wo]===_o)return wo||0;return-1}});var toObject$a=_toObject,toAbsoluteIndex$3=_toAbsoluteIndex,toLength$d=_toLength,_arrayCopyWithin=[].copyWithin||function(_o,xo){var bo=toObject$a(this),wo=toLength$d(bo.length),Eo=toAbsoluteIndex$3(_o,wo),To=toAbsoluteIndex$3(xo,wo),So=arguments.length>2?arguments[2]:void 0,$o=Math.min((So===void 0?wo:toAbsoluteIndex$3(So,wo))-To,wo-Eo),Do=1;for(To<Eo&&Eo<To+$o&&(Do=-1,To+=$o-1,Eo+=$o-1);$o-- >0;)To in bo?bo[Eo]=bo[To]:delete bo[Eo],Eo+=Do,To+=Do;return bo},UNSCOPABLES=_wks.exports("unscopables"),ArrayProto$1=Array.prototype;ArrayProto$1[UNSCOPABLES]==null&&_hide(ArrayProto$1,UNSCOPABLES,{});var _addToUnscopables=function(va){ArrayProto$1[UNSCOPABLES][va]=!0},$export$$=_export;$export$$($export$$.P,"Array",{copyWithin:_arrayCopyWithin});_addToUnscopables("copyWithin");var toObject$9=_toObject,toAbsoluteIndex$2=_toAbsoluteIndex,toLength$c=_toLength,_arrayFill=function(_o){for(var xo=toObject$9(this),bo=toLength$c(xo.length),wo=arguments.length,Eo=toAbsoluteIndex$2(wo>1?arguments[1]:void 0,bo),To=wo>2?arguments[2]:void 0,So=To===void 0?bo:toAbsoluteIndex$2(To,bo);So>Eo;)xo[Eo++]=_o;return xo},$export$_=_export;$export$_($export$_.P,"Array",{fill:_arrayFill});_addToUnscopables("fill");var $export$Z=_export,$find$1=_arrayMethods(5),KEY$1="find",forced$1=!0;KEY$1 in[]&&Array(1)[KEY$1](function(){forced$1=!1});$export$Z($export$Z.P+$export$Z.F*forced$1,"Array",{find:function(_o){return $find$1(this,_o,arguments.length>1?arguments[1]:void 0)}});_addToUnscopables(KEY$1);var $export$Y=_export,$find=_arrayMethods(6),KEY="findIndex",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1});$export$Y($export$Y.P+$export$Y.F*forced,"Array",{findIndex:function(_o){return $find(this,_o,arguments.length>1?arguments[1]:void 0)}});_addToUnscopables(KEY);var global$e=_global.exports,dP$5=_objectDp,DESCRIPTORS$3=_descriptors,SPECIES$2=_wks.exports("species"),_setSpecies=function(va){var _o=global$e[va];DESCRIPTORS$3&&_o&&!_o[SPECIES$2]&&dP$5.f(_o,SPECIES$2,{configurable:!0,get:function(){return this}})};_setSpecies("Array");var _iterStep=function(va,_o){return{value:_o,done:!!va}},addToUnscopables=_addToUnscopables,step$1=_iterStep,Iterators$2=_iterators,toIObject$2=_toIobject,es6_array_iterator=_iterDefine(Array,"Array",function(va,_o){this._t=toIObject$2(va),this._i=0,this._k=_o},function(){var va=this._t,_o=this._k,xo=this._i++;return!va||xo>=va.length?(this._t=void 0,step$1(1)):_o=="keys"?step$1(0,xo):_o=="values"?step$1(0,va[xo]):step$1(0,[xo,va[xo]])},"values");Iterators$2.Arguments=Iterators$2.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries");var anObject$w=_anObject,_flags=function(){var va=anObject$w(this),_o="";return va.global&&(_o+="g"),va.ignoreCase&&(_o+="i"),va.multiline&&(_o+="m"),va.unicode&&(_o+="u"),va.sticky&&(_o+="y"),_o},global$d=_global.exports,inheritIfRequired$1=_inheritIfRequired,dP$4=_objectDp.f,gOPN$2=_objectGopn.f,isRegExp$2=_isRegexp,$flags$1=_flags,$RegExp=global$d.RegExp,Base=$RegExp,proto$2=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(_descriptors&&(!CORRECT_NEW||_fails(function(){return re2[_wks.exports("match")]=!1,$RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,"i")!="/a/i"}))){$RegExp=function(_o,xo){var bo=this instanceof $RegExp,wo=isRegExp$2(_o),Eo=xo===void 0;return!bo&&wo&&_o.constructor===$RegExp&&Eo?_o:inheritIfRequired$1(CORRECT_NEW?new Base(wo&&!Eo?_o.source:_o,xo):Base((wo=_o instanceof $RegExp)?_o.source:_o,wo&&Eo?$flags$1.call(_o):xo),bo?this:proto$2,$RegExp)};for(var proxy=function(va){va in $RegExp||dP$4($RegExp,va,{configurable:!0,get:function(){return Base[va]},set:function(_o){Base[va]=_o}})},keys$1=gOPN$2(Base),i$6=0;keys$1.length>i$6;)proxy(keys$1[i$6++]);proto$2.constructor=$RegExp,$RegExp.prototype=proto$2,_redefine.exports(global$d,"RegExp",$RegExp)}_setSpecies("RegExp");var regexpFlags=_flags,nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,LAST_INDEX$1="lastIndex",UPDATES_LAST_INDEX_WRONG=function(){var va=/a/,_o=/b*/g;return nativeExec.call(va,"a"),nativeExec.call(_o,"a"),va[LAST_INDEX$1]!==0||_o[LAST_INDEX$1]!==0}(),NPCG_INCLUDED=/()??/.exec("")[1]!==void 0,PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED;PATCH&&(patchedExec=function(_o){var xo=this,bo,wo,Eo,To;return NPCG_INCLUDED&&(wo=new RegExp("^"+xo.source+"$(?!\\s)",regexpFlags.call(xo))),UPDATES_LAST_INDEX_WRONG&&(bo=xo[LAST_INDEX$1]),Eo=nativeExec.call(xo,_o),UPDATES_LAST_INDEX_WRONG&&Eo&&(xo[LAST_INDEX$1]=xo.global?Eo.index+Eo[0].length:bo),NPCG_INCLUDED&&Eo&&Eo.length>1&&nativeReplace.call(Eo[0],wo,function(){for(To=1;To<arguments.length-2;To++)arguments[To]===void 0&&(Eo[To]=void 0)}),Eo});var _regexpExec=patchedExec,regexpExec$2=_regexpExec;_export({target:"RegExp",proto:!0,forced:regexpExec$2!==/./.exec},{exec:regexpExec$2});_descriptors&&/./g.flags!="g"&&_objectDp.f(RegExp.prototype,"flags",{configurable:!0,get:_flags});var anObject$v=_anObject,$flags=_flags,DESCRIPTORS$2=_descriptors,TO_STRING="toString",$toString=/./[TO_STRING],define$1=function(va){_redefine.exports(RegExp.prototype,TO_STRING,va,!0)};_fails(function(){return $toString.call({source:"a",flags:"b"})!="/a/b"})?define$1(function(){var _o=anObject$v(this);return"/".concat(_o.source,"/","flags"in _o?_o.flags:!DESCRIPTORS$2&&_o instanceof RegExp?$flags.call(_o):void 0)}):$toString.name!=TO_STRING&&define$1(function(){return $toString.call(this)});var at$1=_stringAt(!0),_advanceStringIndex=function(va,_o,xo){return _o+(xo?at$1(va,_o).length:1)},classof$3=_classof,builtinExec=RegExp.prototype.exec,_regexpExecAbstract=function(va,_o){var xo=va.exec;if(typeof xo=="function"){var bo=xo.call(va,_o);if(typeof bo!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return bo}if(classof$3(va)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return builtinExec.call(va,_o)},redefine$4=_redefine.exports,hide$4=_hide,fails$4=_fails,defined$2=_defined,wks$2=_wks.exports,regexpExec$1=_regexpExec,SPECIES$1=wks$2("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$4(function(){var va=/./;return va.exec=function(){var _o=[];return _o.groups={a:"7"},_o},"".replace(va,"$<a>")!=="7"}),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=function(){var va=/(?:)/,_o=va.exec;va.exec=function(){return _o.apply(this,arguments)};var xo="ab".split(va);return xo.length===2&&xo[0]==="a"&&xo[1]==="b"}(),_fixReWks=function(va,_o,xo){var bo=wks$2(va),wo=!fails$4(function(){var No={};return No[bo]=function(){return 7},""[va](No)!=7}),Eo=wo?!fails$4(function(){var No=!1,Oo=/a/;return Oo.exec=function(){return No=!0,null},va==="split"&&(Oo.constructor={},Oo.constructor[SPECIES$1]=function(){return Oo}),Oo[bo](""),!No}):void 0;if(!wo||!Eo||va==="replace"&&!REPLACE_SUPPORTS_NAMED_GROUPS||va==="split"&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var To=/./[bo],So=xo(defined$2,bo,""[va],function(Oo,Lo,Co,Ro,jo){return Lo.exec===regexpExec$1?wo&&!jo?{done:!0,value:To.call(Lo,Co,Ro)}:{done:!0,value:Oo.call(Co,Lo,Ro)}:{done:!1}}),$o=So[0],Do=So[1];redefine$4(String.prototype,va,$o),hide$4(RegExp.prototype,bo,_o==2?function(No,Oo){return Do.call(No,this,Oo)}:function(No){return Do.call(No,this)})}},anObject$u=_anObject,toLength$b=_toLength,advanceStringIndex$2=_advanceStringIndex,regExpExec$2=_regexpExecAbstract;_fixReWks("match",1,function(va,_o,xo,bo){return[function(Eo){var To=va(this),So=Eo==null?void 0:Eo[_o];return So!==void 0?So.call(Eo,To):new RegExp(Eo)[_o](String(To))},function(wo){var Eo=bo(xo,wo,this);if(Eo.done)return Eo.value;var To=anObject$u(wo),So=String(this);if(!To.global)return regExpExec$2(To,So);var $o=To.unicode;To.lastIndex=0;for(var Do=[],No=0,Oo;(Oo=regExpExec$2(To,So))!==null;){var Lo=String(Oo[0]);Do[No]=Lo,Lo===""&&(To.lastIndex=advanceStringIndex$2(So,toLength$b(To.lastIndex),$o)),No++}return No===0?null:Do}]});var anObject$t=_anObject,toObject$8=_toObject,toLength$a=_toLength,toInteger$3=_toInteger,advanceStringIndex$1=_advanceStringIndex,regExpExec$1=_regexpExecAbstract,max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g,maybeToString=function(va){return va===void 0?va:String(va)};_fixReWks("replace",2,function(va,_o,xo,bo){return[function(To,So){var $o=va(this),Do=To==null?void 0:To[_o];return Do!==void 0?Do.call(To,$o,So):xo.call(String($o),To,So)},function(Eo,To){var So=bo(xo,Eo,this,To);if(So.done)return So.value;var $o=anObject$t(Eo),Do=String(this),No=typeof To=="function";No||(To=String(To));var Oo=$o.global;if(Oo){var Lo=$o.unicode;$o.lastIndex=0}for(var Co=[];;){var Ro=regExpExec$1($o,Do);if(Ro===null||(Co.push(Ro),!Oo))break;var jo=String(Ro[0]);jo===""&&($o.lastIndex=advanceStringIndex$1(Do,toLength$a($o.lastIndex),Lo))}for(var zo="",Io=0,Po=0;Po<Co.length;Po++){Ro=Co[Po];for(var Bo=String(Ro[0]),ko=max(min(toInteger$3(Ro.index),Do.length),0),Uo=[],Qo=1;Qo<Ro.length;Qo++)Uo.push(maybeToString(Ro[Qo]));var qo=Ro.groups;if(No){var Zo=[Bo].concat(Uo,ko,Do);qo!==void 0&&Zo.push(qo);var Xo=String(To.apply(void 0,Zo))}else Xo=wo(Bo,Do,ko,Uo,qo,To);ko>=Io&&(zo+=Do.slice(Io,ko)+Xo,Io=ko+Bo.length)}return zo+Do.slice(Io)}];function wo(Eo,To,So,$o,Do,No){var Oo=So+Eo.length,Lo=$o.length,Co=SUBSTITUTION_SYMBOLS_NO_NAMED;return Do!==void 0&&(Do=toObject$8(Do),Co=SUBSTITUTION_SYMBOLS),xo.call(No,Co,function(Ro,jo){var zo;switch(jo.charAt(0)){case"$":return"$";case"&":return Eo;case"`":return To.slice(0,So);case"'":return To.slice(Oo);case"<":zo=Do[jo.slice(1,-1)];break;default:var Io=+jo;if(Io===0)return Ro;if(Io>Lo){var Po=floor(Io/10);return Po===0?Ro:Po<=Lo?$o[Po-1]===void 0?jo.charAt(1):$o[Po-1]+jo.charAt(1):Ro}zo=$o[Io-1]}return zo===void 0?"":zo})}});var anObject$s=_anObject,sameValue=_sameValue,regExpExec=_regexpExecAbstract;_fixReWks("search",1,function(va,_o,xo,bo){return[function(Eo){var To=va(this),So=Eo==null?void 0:Eo[_o];return So!==void 0?So.call(Eo,To):new RegExp(Eo)[_o](String(To))},function(wo){var Eo=bo(xo,wo,this);if(Eo.done)return Eo.value;var To=anObject$s(wo),So=String(this),$o=To.lastIndex;sameValue($o,0)||(To.lastIndex=0);var Do=regExpExec(To,So);return sameValue(To.lastIndex,$o)||(To.lastIndex=$o),Do===null?-1:Do.index}]});var anObject$r=_anObject,aFunction$a=_aFunction,SPECIES=_wks.exports("species"),_speciesConstructor=function(va,_o){var xo=anObject$r(va).constructor,bo;return xo===void 0||(bo=anObject$r(xo)[SPECIES])==null?_o:aFunction$a(bo)},isRegExp$1=_isRegexp,anObject$q=_anObject,speciesConstructor$4=_speciesConstructor,advanceStringIndex=_advanceStringIndex,toLength$9=_toLength,callRegExpExec=_regexpExecAbstract,regexpExec=_regexpExec,fails$3=_fails,$min=Math.min,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex",MAX_UINT32=4294967295,SUPPORTS_Y=!fails$3(function(){RegExp(MAX_UINT32,"y")});_fixReWks("split",2,function(va,_o,xo,bo){var wo;return"abbc"[$SPLIT](/(b)*/)[1]=="c"||"test"[$SPLIT](/(?:)/,-1)[LENGTH]!=4||"ab"[$SPLIT](/(?:ab)*/)[LENGTH]!=2||"."[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]?wo=function(Eo,To){var So=String(this);if(Eo===void 0&&To===0)return[];if(!isRegExp$1(Eo))return xo.call(So,Eo,To);for(var $o=[],Do=(Eo.ignoreCase?"i":"")+(Eo.multiline?"m":"")+(Eo.unicode?"u":"")+(Eo.sticky?"y":""),No=0,Oo=To===void 0?MAX_UINT32:To>>>0,Lo=new RegExp(Eo.source,Do+"g"),Co,Ro,jo;(Co=regexpExec.call(Lo,So))&&(Ro=Lo[LAST_INDEX],!(Ro>No&&($o.push(So.slice(No,Co.index)),Co[LENGTH]>1&&Co.index<So[LENGTH]&&$push.apply($o,Co.slice(1)),jo=Co[0][LENGTH],No=Ro,$o[LENGTH]>=Oo)));)Lo[LAST_INDEX]===Co.index&&Lo[LAST_INDEX]++;return No===So[LENGTH]?(jo||!Lo.test(""))&&$o.push(""):$o.push(So.slice(No)),$o[LENGTH]>Oo?$o.slice(0,Oo):$o}:"0"[$SPLIT](void 0,0)[LENGTH]?wo=function(Eo,To){return Eo===void 0&&To===0?[]:xo.call(this,Eo,To)}:wo=xo,[function(To,So){var $o=va(this),Do=To==null?void 0:To[_o];return Do!==void 0?Do.call(To,$o,So):wo.call(String($o),To,So)},function(Eo,To){var So=bo(wo,Eo,this,To,wo!==xo);if(So.done)return So.value;var $o=anObject$q(Eo),Do=String(this),No=speciesConstructor$4($o,RegExp),Oo=$o.unicode,Lo=($o.ignoreCase?"i":"")+($o.multiline?"m":"")+($o.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),Co=new No(SUPPORTS_Y?$o:"^(?:"+$o.source+")",Lo),Ro=To===void 0?MAX_UINT32:To>>>0;if(Ro===0)return[];if(Do.length===0)return callRegExpExec(Co,Do)===null?[Do]:[];for(var jo=0,zo=0,Io=[];zo<Do.length;){Co.lastIndex=SUPPORTS_Y?zo:0;var Po=callRegExpExec(Co,SUPPORTS_Y?Do:Do.slice(zo)),Bo;if(Po===null||(Bo=$min(toLength$9(Co.lastIndex+(SUPPORTS_Y?0:zo)),Do.length))===jo)zo=advanceStringIndex(Do,zo,Oo);else{if(Io.push(Do.slice(jo,zo)),Io.length===Ro)return Io;for(var ko=1;ko<=Po.length-1;ko++)if(Io.push(Po[ko]),Io.length===Ro)return Io;zo=jo=Bo}}return Io.push(Do.slice(jo)),Io}]});var _anInstance=function(va,_o,xo,bo){if(!(va instanceof _o)||bo!==void 0&&bo in va)throw TypeError(xo+": incorrect invocation!");return va},_forOf={exports:{}},ctx$6=_ctx,call=_iterCall,isArrayIter$1=_isArrayIter,anObject$p=_anObject,toLength$8=_toLength,getIterFn$1=core_getIteratorMethod,BREAK={},RETURN$1={},exports$1=_forOf.exports=function(va,_o,xo,bo,wo){var Eo=wo?function(){return va}:getIterFn$1(va),To=ctx$6(xo,bo,_o?2:1),So=0,$o,Do,No,Oo;if(typeof Eo!="function")throw TypeError(va+" is not iterable!");if(isArrayIter$1(Eo)){for($o=toLength$8(va.length);$o>So;So++)if(Oo=_o?To(anObject$p(Do=va[So])[0],Do[1]):To(va[So]),Oo===BREAK||Oo===RETURN$1)return Oo}else for(No=Eo.call(va);!(Do=No.next()).done;)if(Oo=call(No,To,Do.value,_o),Oo===BREAK||Oo===RETURN$1)return Oo};exports$1.BREAK=BREAK;exports$1.RETURN=RETURN$1;var ctx$5=_ctx,invoke=_invoke,html=_html,cel=_domCreate,global$c=_global.exports,process$4=global$c.process,setTask=global$c.setImmediate,clearTask=global$c.clearImmediate,MessageChannel$1=global$c.MessageChannel,Dispatch=global$c.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run$1=function(){var va=+this;if(queue.hasOwnProperty(va)){var _o=queue[va];delete queue[va],_o()}},listener=function(va){run$1.call(va.data)};(!setTask||!clearTask)&&(setTask=function(_o){for(var xo=[],bo=1;arguments.length>bo;)xo.push(arguments[bo++]);return queue[++counter]=function(){invoke(typeof _o=="function"?_o:Function(_o),xo)},defer(counter),counter},clearTask=function(_o){delete queue[_o]},_cof(process$4)=="process"?defer=function(va){process$4.nextTick(ctx$5(run$1,va,1))}:Dispatch&&Dispatch.now?defer=function(va){Dispatch.now(ctx$5(run$1,va,1))}:MessageChannel$1?(channel=new MessageChannel$1,port=channel.port2,channel.port1.onmessage=listener,defer=ctx$5(port.postMessage,port,1)):global$c.addEventListener&&typeof postMessage=="function"&&!global$c.importScripts?(defer=function(va){global$c.postMessage(va+"","*")},global$c.addEventListener("message",listener,!1)):ONREADYSTATECHANGE in cel("script")?defer=function(va){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run$1.call(va)}}:defer=function(va){setTimeout(ctx$5(run$1,va,1),0)});var _task={set:setTask,clear:clearTask},global$b=_global.exports,macrotask=_task.set,Observer=global$b.MutationObserver||global$b.WebKitMutationObserver,process$3=global$b.process,Promise$1=global$b.Promise,isNode$2=_cof(process$3)=="process",_microtask=function(){var va,_o,xo,bo=function(){var So,$o;for(isNode$2&&(So=process$3.domain)&&So.exit();va;){$o=va.fn,va=va.next;try{$o()}catch(Do){throw va?xo():_o=void 0,Do}}_o=void 0,So&&So.enter()};if(isNode$2)xo=function(){process$3.nextTick(bo)};else if(Observer&&!(global$b.navigator&&global$b.navigator.standalone)){var wo=!0,Eo=document.createTextNode("");new Observer(bo).observe(Eo,{characterData:!0}),xo=function(){Eo.data=wo=!wo}}else if(Promise$1&&Promise$1.resolve){var To=Promise$1.resolve(void 0);xo=function(){To.then(bo)}}else xo=function(){macrotask.call(global$b,bo)};return function(So){var $o={fn:So,next:void 0};_o&&(_o.next=$o),va||(va=$o,xo()),_o=$o}},_newPromiseCapability={},aFunction$9=_aFunction;function PromiseCapability(va){var _o,xo;this.promise=new va(function(bo,wo){if(_o!==void 0||xo!==void 0)throw TypeError("Bad Promise constructor");_o=bo,xo=wo}),this.resolve=aFunction$9(_o),this.reject=aFunction$9(xo)}_newPromiseCapability.f=function(va){return new PromiseCapability(va)};var _perform=function(va){try{return{e:!1,v:va()}}catch(_o){return{e:!0,v:_o}}},global$a=_global.exports,navigator$1=global$a.navigator,_userAgent=navigator$1&&navigator$1.userAgent||"",anObject$o=_anObject,isObject$c=_isObject,newPromiseCapability$2=_newPromiseCapability,_promiseResolve=function(va,_o){if(anObject$o(va),isObject$c(_o)&&_o.constructor===va)return _o;var xo=newPromiseCapability$2.f(va),bo=xo.resolve;return bo(_o),xo.promise},redefine$3=_redefine.exports,_redefineAll=function(va,_o,xo){for(var bo in _o)redefine$3(va,bo,_o[bo],xo);return va},global$9=_global.exports,ctx$4=_ctx,classof$2=_classof,$export$X=_export,isObject$b=_isObject,aFunction$8=_aFunction,anInstance$5=_anInstance,forOf$6=_forOf.exports,speciesConstructor$3=_speciesConstructor,task=_task.set,microtask$2=_microtask(),newPromiseCapabilityModule=_newPromiseCapability,perform$1=_perform,userAgent$3=_userAgent,promiseResolve$1=_promiseResolve,PROMISE="Promise",TypeError$2=global$9.TypeError,process$2=global$9.process,versions=process$2&&process$2.versions,v8=versions&&versions.v8||"",$Promise=global$9[PROMISE],isNode$1=classof$2(process$2)=="process",empty=function(){},Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,newPromiseCapability$1=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var va=$Promise.resolve(1),_o=(va.constructor={})[require("./_wks")("species")]=function(xo){xo(empty,empty)};return(isNode$1||typeof PromiseRejectionEvent=="function")&&va.then(empty)instanceof _o&&v8.indexOf("6.6")!==0&&userAgent$3.indexOf("Chrome/66")===-1}catch{}}(),isThenable=function(va){var _o;return isObject$b(va)&&typeof(_o=va.then)=="function"?_o:!1},notify=function(va,_o){if(!va._n){va._n=!0;var xo=va._c;microtask$2(function(){for(var bo=va._v,wo=va._s==1,Eo=0,To=function(So){var $o=wo?So.ok:So.fail,Do=So.resolve,No=So.reject,Oo=So.domain,Lo,Co,Ro;try{$o?(wo||(va._h==2&&onHandleUnhandled(va),va._h=1),$o===!0?Lo=bo:(Oo&&Oo.enter(),Lo=$o(bo),Oo&&(Oo.exit(),Ro=!0)),Lo===So.promise?No(TypeError$2("Promise-chain cycle")):(Co=isThenable(Lo))?Co.call(Lo,Do,No):Do(Lo)):No(bo)}catch(jo){Oo&&!Ro&&Oo.exit(),No(jo)}};xo.length>Eo;)To(xo[Eo++]);va._c=[],va._n=!1,_o&&!va._h&&onUnhandled(va)})}},onUnhandled=function(va){task.call(global$9,function(){var _o=va._v,xo=isUnhandled(va),bo,wo,Eo;if(xo&&(bo=perform$1(function(){isNode$1?process$2.emit("unhandledRejection",_o,va):(wo=global$9.onunhandledrejection)?wo({promise:va,reason:_o}):(Eo=global$9.console)&&Eo.error&&Eo.error("Unhandled promise rejection",_o)}),va._h=isNode$1||isUnhandled(va)?2:1),va._a=void 0,xo&&bo.e)throw bo.v})},isUnhandled=function(va){return va._h!==1&&(va._a||va._c).length===0},onHandleUnhandled=function(va){task.call(global$9,function(){var _o;isNode$1?process$2.emit("rejectionHandled",va):(_o=global$9.onrejectionhandled)&&_o({promise:va,reason:va._v})})},$reject=function(va){var _o=this;_o._d||(_o._d=!0,_o=_o._w||_o,_o._v=va,_o._s=2,_o._a||(_o._a=_o._c.slice()),notify(_o,!0))},$resolve=function(va){var _o=this,xo;if(!_o._d){_o._d=!0,_o=_o._w||_o;try{if(_o===va)throw TypeError$2("Promise can't be resolved itself");(xo=isThenable(va))?microtask$2(function(){var bo={_w:_o,_d:!1};try{xo.call(va,ctx$4($resolve,bo,1),ctx$4($reject,bo,1))}catch(wo){$reject.call(bo,wo)}}):(_o._v=va,_o._s=1,notify(_o,!1))}catch(bo){$reject.call({_w:_o,_d:!1},bo)}}};USE_NATIVE||($Promise=function(_o){anInstance$5(this,$Promise,PROMISE,"_h"),aFunction$8(_o),Internal.call(this);try{_o(ctx$4($resolve,this,1),ctx$4($reject,this,1))}catch(xo){$reject.call(this,xo)}},Internal=function(_o){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=_redefineAll($Promise.prototype,{then:function(_o,xo){var bo=newPromiseCapability$1(speciesConstructor$3(this,$Promise));return bo.ok=typeof _o=="function"?_o:!0,bo.fail=typeof xo=="function"&&xo,bo.domain=isNode$1?process$2.domain:void 0,this._c.push(bo),this._a&&this._a.push(bo),this._s&&notify(this,!1),bo.promise},catch:function(va){return this.then(void 0,va)}}),OwnPromiseCapability=function(){var va=new Internal;this.promise=va,this.resolve=ctx$4($resolve,va,1),this.reject=ctx$4($reject,va,1)},newPromiseCapabilityModule.f=newPromiseCapability$1=function(va){return va===$Promise||va===Wrapper?new OwnPromiseCapability(va):newGenericPromiseCapability(va)});$export$X($export$X.G+$export$X.W+$export$X.F*!USE_NATIVE,{Promise:$Promise});_setToStringTag($Promise,PROMISE);_setSpecies(PROMISE);Wrapper=_core.exports[PROMISE];$export$X($export$X.S+$export$X.F*!USE_NATIVE,PROMISE,{reject:function(_o){var xo=newPromiseCapability$1(this),bo=xo.reject;return bo(_o),xo.promise}});$export$X($export$X.S+$export$X.F*!USE_NATIVE,PROMISE,{resolve:function(_o){return promiseResolve$1(this,_o)}});$export$X($export$X.S+$export$X.F*!(USE_NATIVE&&_iterDetect(function(va){$Promise.all(va).catch(empty)})),PROMISE,{all:function(_o){var xo=this,bo=newPromiseCapability$1(xo),wo=bo.resolve,Eo=bo.reject,To=perform$1(function(){var So=[],$o=0,Do=1;forOf$6(_o,!1,function(No){var Oo=$o++,Lo=!1;So.push(void 0),Do++,xo.resolve(No).then(function(Co){Lo||(Lo=!0,So[Oo]=Co,--Do||wo(So))},Eo)}),--Do||wo(So)});return To.e&&Eo(To.v),bo.promise},race:function(_o){var xo=this,bo=newPromiseCapability$1(xo),wo=bo.reject,Eo=perform$1(function(){forOf$6(_o,!1,function(To){xo.resolve(To).then(bo.resolve,wo)})});return Eo.e&&wo(Eo.v),bo.promise}});var isObject$a=_isObject,_validateCollection=function(va,_o){if(!isObject$a(va)||va._t!==_o)throw TypeError("Incompatible receiver, "+_o+" required!");return va},dP$3=_objectDp.f,create$4=_objectCreate,redefineAll$4=_redefineAll,ctx$3=_ctx,anInstance$4=_anInstance,forOf$5=_forOf.exports,$iterDefine=_iterDefine,step=_iterStep,setSpecies$1=_setSpecies,DESCRIPTORS$1=_descriptors,fastKey=_meta.exports.fastKey,validate$6=_validateCollection,SIZE=DESCRIPTORS$1?"_s":"size",getEntry=function(va,_o){var xo=fastKey(_o),bo;if(xo!=="F")return va._i[xo];for(bo=va._f;bo;bo=bo.n)if(bo.k==_o)return bo},_collectionStrong={getConstructor:function(va,_o,xo,bo){var wo=va(function(Eo,To){anInstance$4(Eo,wo,_o,"_i"),Eo._t=_o,Eo._i=create$4(null),Eo._f=void 0,Eo._l=void 0,Eo[SIZE]=0,To!=null&&forOf$5(To,xo,Eo[bo],Eo)});return redefineAll$4(wo.prototype,{clear:function(){for(var To=validate$6(this,_o),So=To._i,$o=To._f;$o;$o=$o.n)$o.r=!0,$o.p&&($o.p=$o.p.n=void 0),delete So[$o.i];To._f=To._l=void 0,To[SIZE]=0},delete:function(Eo){var To=validate$6(this,_o),So=getEntry(To,Eo);if(So){var $o=So.n,Do=So.p;delete To._i[So.i],So.r=!0,Do&&(Do.n=$o),$o&&($o.p=Do),To._f==So&&(To._f=$o),To._l==So&&(To._l=Do),To[SIZE]--}return!!So},forEach:function(To){validate$6(this,_o);for(var So=ctx$3(To,arguments.length>1?arguments[1]:void 0,3),$o;$o=$o?$o.n:this._f;)for(So($o.v,$o.k,this);$o&&$o.r;)$o=$o.p},has:function(To){return!!getEntry(validate$6(this,_o),To)}}),DESCRIPTORS$1&&dP$3(wo.prototype,"size",{get:function(){return validate$6(this,_o)[SIZE]}}),wo},def:function(va,_o,xo){var bo=getEntry(va,_o),wo,Eo;return bo?bo.v=xo:(va._l=bo={i:Eo=fastKey(_o,!0),k:_o,v:xo,p:wo=va._l,n:void 0,r:!1},va._f||(va._f=bo),wo&&(wo.n=bo),va[SIZE]++,Eo!=="F"&&(va._i[Eo]=bo)),va},getEntry,setStrong:function(va,_o,xo){$iterDefine(va,_o,function(bo,wo){this._t=validate$6(bo,_o),this._k=wo,this._l=void 0},function(){for(var bo=this,wo=bo._k,Eo=bo._l;Eo&&Eo.r;)Eo=Eo.p;return!bo._t||!(bo._l=Eo=Eo?Eo.n:bo._t._f)?(bo._t=void 0,step(1)):wo=="keys"?step(0,Eo.k):wo=="values"?step(0,Eo.v):step(0,[Eo.k,Eo.v])},xo?"entries":"values",!xo,!0),setSpecies$1(_o)}},global$8=_global.exports,$export$W=_export,redefine$2=_redefine.exports,redefineAll$3=_redefineAll,meta$1=_meta.exports,forOf$4=_forOf.exports,anInstance$3=_anInstance,isObject$9=_isObject,fails$2=_fails,$iterDetect$1=_iterDetect,setToStringTag=_setToStringTag,inheritIfRequired=_inheritIfRequired,_collection=function(va,_o,xo,bo,wo,Eo){var To=global$8[va],So=To,$o=wo?"set":"add",Do=So&&So.prototype,No={},Oo=function(Io){var Po=Do[Io];redefine$2(Do,Io,Io=="delete"?function(Bo){return Eo&&!isObject$9(Bo)?!1:Po.call(this,Bo===0?0:Bo)}:Io=="has"?function(ko){return Eo&&!isObject$9(ko)?!1:Po.call(this,ko===0?0:ko)}:Io=="get"?function(ko){return Eo&&!isObject$9(ko)?void 0:Po.call(this,ko===0?0:ko)}:Io=="add"?function(ko){return Po.call(this,ko===0?0:ko),this}:function(ko,Uo){return Po.call(this,ko===0?0:ko,Uo),this})};if(typeof So!="function"||!(Eo||Do.forEach&&!fails$2(function(){new So().entries().next()})))So=bo.getConstructor(_o,va,wo,$o),redefineAll$3(So.prototype,xo),meta$1.NEED=!0;else{var Lo=new So,Co=Lo[$o](Eo?{}:-0,1)!=Lo,Ro=fails$2(function(){Lo.has(1)}),jo=$iterDetect$1(function(Io){new So(Io)}),zo=!Eo&&fails$2(function(){for(var Io=new So,Po=5;Po--;)Io[$o](Po,Po);return!Io.has(-0)});jo||(So=_o(function(Io,Po){anInstance$3(Io,So,va);var Bo=inheritIfRequired(new To,Io,So);return Po!=null&&forOf$4(Po,wo,Bo[$o],Bo),Bo}),So.prototype=Do,Do.constructor=So),(Ro||zo)&&(Oo("delete"),Oo("has"),wo&&Oo("get")),(zo||Co)&&Oo($o),Eo&&Do.clear&&delete Do.clear}return setToStringTag(So,va),No[va]=So,$export$W($export$W.G+$export$W.W+$export$W.F*(So!=To),No),Eo||bo.setStrong(So,va,wo),So},strong$1=_collectionStrong,validate$5=_validateCollection,MAP="Map",es6_map=_collection(MAP,function(va){return function(){return va(this,arguments.length>0?arguments[0]:void 0)}},{get:function(_o){var xo=strong$1.getEntry(validate$5(this,MAP),_o);return xo&&xo.v},set:function(_o,xo){return strong$1.def(validate$5(this,MAP),_o===0?0:_o,xo)}},strong$1,!0),strong=_collectionStrong,validate$4=_validateCollection,SET="Set",es6_set=_collection(SET,function(va){return function(){return va(this,arguments.length>0?arguments[0]:void 0)}},{add:function(_o){return strong.def(validate$4(this,SET),_o=_o===0?0:_o,_o)}},strong),es6_weakMap={exports:{}},redefineAll$2=_redefineAll,getWeak$1=_meta.exports.getWeak,anObject$n=_anObject,isObject$8=_isObject,anInstance$2=_anInstance,forOf$3=_forOf.exports,createArrayMethod$1=_arrayMethods,$has=_has,validate$3=_validateCollection,arrayFind$1=createArrayMethod$1(5),arrayFindIndex$1=createArrayMethod$1(6),id$1=0,uncaughtFrozenStore$1=function(va){return va._l||(va._l=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.a=[]},findUncaughtFrozen=function(va,_o){return arrayFind$1(va.a,function(xo){return xo[0]===_o})};UncaughtFrozenStore.prototype={get:function(va){var _o=findUncaughtFrozen(this,va);if(_o)return _o[1]},has:function(va){return!!findUncaughtFrozen(this,va)},set:function(va,_o){var xo=findUncaughtFrozen(this,va);xo?xo[1]=_o:this.a.push([va,_o])},delete:function(va){var _o=arrayFindIndex$1(this.a,function(xo){return xo[0]===va});return~_o&&this.a.splice(_o,1),!!~_o}};var _collectionWeak={getConstructor:function(va,_o,xo,bo){var wo=va(function(Eo,To){anInstance$2(Eo,wo,_o,"_i"),Eo._t=_o,Eo._i=id$1++,Eo._l=void 0,To!=null&&forOf$3(To,xo,Eo[bo],Eo)});return redefineAll$2(wo.prototype,{delete:function(Eo){if(!isObject$8(Eo))return!1;var To=getWeak$1(Eo);return To===!0?uncaughtFrozenStore$1(validate$3(this,_o)).delete(Eo):To&&$has(To,this._i)&&delete To[this._i]},has:function(To){if(!isObject$8(To))return!1;var So=getWeak$1(To);return So===!0?uncaughtFrozenStore$1(validate$3(this,_o)).has(To):So&&$has(So,this._i)}}),wo},def:function(va,_o,xo){var bo=getWeak$1(anObject$n(_o),!0);return bo===!0?uncaughtFrozenStore$1(va).set(_o,xo):bo[va._i]=xo,va},ufstore:uncaughtFrozenStore$1},global$7=_global.exports,each=_arrayMethods(0),redefine$1=_redefine.exports,meta=_meta.exports,assign$1=_objectAssign,weak$1=_collectionWeak,isObject$7=_isObject,validate$2=_validateCollection,NATIVE_WEAK_MAP=_validateCollection,IS_IE11=!global$7.ActiveXObject&&"ActiveXObject"in global$7,WEAK_MAP="WeakMap",getWeak=meta.getWeak,isExtensible=Object.isExtensible,uncaughtFrozenStore=weak$1.ufstore,InternalMap,wrapper$1=function(va){return function(){return va(this,arguments.length>0?arguments[0]:void 0)}},methods={get:function(_o){if(isObject$7(_o)){var xo=getWeak(_o);return xo===!0?uncaughtFrozenStore(validate$2(this,WEAK_MAP)).get(_o):xo?xo[this._i]:void 0}},set:function(_o,xo){return weak$1.def(validate$2(this,WEAK_MAP),_o,xo)}},$WeakMap=es6_weakMap.exports=_collection(WEAK_MAP,wrapper$1,methods,weak$1,!0,!0);NATIVE_WEAK_MAP&&IS_IE11&&(InternalMap=weak$1.getConstructor(wrapper$1,WEAK_MAP),assign$1(InternalMap.prototype,methods),meta.NEED=!0,each(["delete","has","get","set"],function(va){var _o=$WeakMap.prototype,xo=_o[va];redefine$1(_o,va,function(bo,wo){if(isObject$7(bo)&&!isExtensible(bo)){this._f||(this._f=new InternalMap);var Eo=this._f[va](bo,wo);return va=="set"?this:Eo}return xo.call(this,bo,wo)})}));var weak=_collectionWeak,validate$1=_validateCollection,WEAK_SET="WeakSet";_collection(WEAK_SET,function(va){return function(){return va(this,arguments.length>0?arguments[0]:void 0)}},{add:function(_o){return weak.def(validate$1(this,WEAK_SET),_o,!0)}},weak,!1,!0);var global$6=_global.exports,hide$3=_hide,uid$1=_uid,TYPED=uid$1("typed_array"),VIEW$2=uid$1("view"),ABV=!!(global$6.ArrayBuffer&&global$6.DataView),CONSTR=ABV,i$5=0,l$5=9,Typed,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");for(;i$5<l$5;)(Typed=global$6[TypedArrayConstructors[i$5++]])?(hide$3(Typed.prototype,TYPED,!0),hide$3(Typed.prototype,VIEW$2,!0)):CONSTR=!1;var _typed={ABV,CONSTR,TYPED,VIEW:VIEW$2},_typedBuffer={},toInteger$2=_toInteger,toLength$7=_toLength,_toIndex=function(va){if(va===void 0)return 0;var _o=toInteger$2(va),xo=toLength$7(_o);if(_o!==xo)throw RangeError("Wrong length!");return xo};(function(va){var _o=_global.exports,xo=_descriptors,bo=_typed,wo=_hide,Eo=_redefineAll,To=_fails,So=_anInstance,$o=_toInteger,Do=_toLength,No=_toIndex,Oo=_objectGopn.f,Lo=_objectDp.f,Co=_arrayFill,Ro=_setToStringTag,jo="ArrayBuffer",zo="DataView",Io="prototype",Po="Wrong length!",Bo="Wrong index!",ko=_o[jo],Uo=_o[zo],Qo=_o.Math,qo=_o.RangeError,Zo=_o.Infinity,Xo=ko,Fo=Qo.abs,Go=Qo.pow,Vo=Qo.floor,Wo=Qo.log,Yo=Qo.LN2,Ko="buffer",ts="byteLength",Jo="byteOffset",rs=xo?"_b":Ko,ls=xo?"_l":ts,ss=xo?"_o":Jo;function us(cs,bs,Ls){var Js=new Array(Ls),Qs=Ls*8-bs-1,Gs=(1<<Qs)-1,fu=Gs>>1,ru=bs===23?Go(2,-24)-Go(2,-77):0,eu=0,Vs=cs<0||cs===0&&1/cs<0?1:0,Hs,Ys,tu;for(cs=Fo(cs),cs!=cs||cs===Zo?(Ys=cs!=cs?1:0,Hs=Gs):(Hs=Vo(Wo(cs)/Yo),cs*(tu=Go(2,-Hs))<1&&(Hs--,tu*=2),Hs+fu>=1?cs+=ru/tu:cs+=ru*Go(2,1-fu),cs*tu>=2&&(Hs++,tu/=2),Hs+fu>=Gs?(Ys=0,Hs=Gs):Hs+fu>=1?(Ys=(cs*tu-1)*Go(2,bs),Hs=Hs+fu):(Ys=cs*Go(2,fu-1)*Go(2,bs),Hs=0));bs>=8;Js[eu++]=Ys&255,Ys/=256,bs-=8);for(Hs=Hs<<bs|Ys,Qs+=bs;Qs>0;Js[eu++]=Hs&255,Hs/=256,Qs-=8);return Js[--eu]|=Vs*128,Js}function ms(cs,bs,Ls){var Js=Ls*8-bs-1,Qs=(1<<Js)-1,Gs=Qs>>1,fu=Js-7,ru=Ls-1,eu=cs[ru--],Vs=eu&127,Hs;for(eu>>=7;fu>0;Vs=Vs*256+cs[ru],ru--,fu-=8);for(Hs=Vs&(1<<-fu)-1,Vs>>=-fu,fu+=bs;fu>0;Hs=Hs*256+cs[ru],ru--,fu-=8);if(Vs===0)Vs=1-Gs;else{if(Vs===Qs)return Hs?NaN:eu?-Zo:Zo;Hs=Hs+Go(2,bs),Vs=Vs-Gs}return(eu?-1:1)*Hs*Go(2,Vs-bs)}function As(cs){return cs[3]<<24|cs[2]<<16|cs[1]<<8|cs[0]}function Os(cs){return[cs&255]}function Es(cs){return[cs&255,cs>>8&255]}function Ms(cs){return[cs&255,cs>>8&255,cs>>16&255,cs>>24&255]}function $s(cs){return us(cs,52,8)}function ks(cs){return us(cs,23,4)}function zs(cs,bs,Ls){Lo(cs[Io],bs,{get:function(){return this[Ls]}})}function Cs(cs,bs,Ls,Js){var Qs=+Ls,Gs=No(Qs);if(Gs+bs>cs[ls])throw qo(Bo);var fu=cs[rs]._b,ru=Gs+cs[ss],eu=fu.slice(ru,ru+bs);return Js?eu:eu.reverse()}function xs(cs,bs,Ls,Js,Qs,Gs){var fu=+Ls,ru=No(fu);if(ru+bs>cs[ls])throw qo(Bo);for(var eu=cs[rs]._b,Vs=ru+cs[ss],Hs=Js(+Qs),Ys=0;Ys<bs;Ys++)eu[Vs+Ys]=Hs[Gs?Ys:bs-Ys-1]}if(!bo.ABV)ko=function(bs){So(this,ko,jo);var Ls=No(bs);this._b=Co.call(new Array(Ls),0),this[ls]=Ls},Uo=function(bs,Ls,Js){So(this,Uo,zo),So(bs,ko,zo);var Qs=bs[ls],Gs=$o(Ls);if(Gs<0||Gs>Qs)throw qo("Wrong offset!");if(Js=Js===void 0?Qs-Gs:Do(Js),Gs+Js>Qs)throw qo(Po);this[rs]=bs,this[ss]=Gs,this[ls]=Js},xo&&(zs(ko,ts,"_l"),zs(Uo,Ko,"_b"),zs(Uo,ts,"_l"),zs(Uo,Jo,"_o")),Eo(Uo[Io],{getInt8:function(bs){return Cs(this,1,bs)[0]<<24>>24},getUint8:function(bs){return Cs(this,1,bs)[0]},getInt16:function(bs){var Ls=Cs(this,2,bs,arguments[1]);return(Ls[1]<<8|Ls[0])<<16>>16},getUint16:function(bs){var Ls=Cs(this,2,bs,arguments[1]);return Ls[1]<<8|Ls[0]},getInt32:function(bs){return As(Cs(this,4,bs,arguments[1]))},getUint32:function(bs){return As(Cs(this,4,bs,arguments[1]))>>>0},getFloat32:function(bs){return ms(Cs(this,4,bs,arguments[1]),23,4)},getFloat64:function(bs){return ms(Cs(this,8,bs,arguments[1]),52,8)},setInt8:function(bs,Ls){xs(this,1,bs,Os,Ls)},setUint8:function(bs,Ls){xs(this,1,bs,Os,Ls)},setInt16:function(bs,Ls){xs(this,2,bs,Es,Ls,arguments[2])},setUint16:function(bs,Ls){xs(this,2,bs,Es,Ls,arguments[2])},setInt32:function(bs,Ls){xs(this,4,bs,Ms,Ls,arguments[2])},setUint32:function(bs,Ls){xs(this,4,bs,Ms,Ls,arguments[2])},setFloat32:function(bs,Ls){xs(this,4,bs,ks,Ls,arguments[2])},setFloat64:function(bs,Ls){xs(this,8,bs,$s,Ls,arguments[2])}});else{if(!To(function(){ko(1)})||!To(function(){new ko(-1)})||To(function(){return new ko,new ko(1.5),new ko(NaN),ko.name!=jo})){ko=function(bs){return So(this,ko),new Xo(No(bs))};for(var Bs=ko[Io]=Xo[Io],Fs=Oo(Xo),Zs=0,bu;Fs.length>Zs;)(bu=Fs[Zs++])in ko||wo(ko,bu,Xo[bu]);Bs.constructor=ko}var Au=new Uo(new ko(2)),ds=Uo[Io].setInt8;Au.setInt8(0,2147483648),Au.setInt8(1,2147483649),(Au.getInt8(0)||!Au.getInt8(1))&&Eo(Uo[Io],{setInt8:function(bs,Ls){ds.call(this,bs,Ls<<24>>24)},setUint8:function(bs,Ls){ds.call(this,bs,Ls<<24>>24)}},!0)}Ro(ko,jo),Ro(Uo,zo),wo(Uo[Io],bo.VIEW,!0),va[jo]=ko,va[zo]=Uo})(_typedBuffer);var $export$V=_export,$typed$1=_typed,buffer=_typedBuffer,anObject$m=_anObject,toAbsoluteIndex$1=_toAbsoluteIndex,toLength$6=_toLength,isObject$6=_isObject,ArrayBuffer$1=_global.exports.ArrayBuffer,speciesConstructor$2=_speciesConstructor,$ArrayBuffer$1=buffer.ArrayBuffer,$DataView$1=buffer.DataView,$isView=$typed$1.ABV&&ArrayBuffer$1.isView,$slice$1=$ArrayBuffer$1.prototype.slice,VIEW$1=$typed$1.VIEW,ARRAY_BUFFER$1="ArrayBuffer";$export$V($export$V.G+$export$V.W+$export$V.F*(ArrayBuffer$1!==$ArrayBuffer$1),{ArrayBuffer:$ArrayBuffer$1});$export$V($export$V.S+$export$V.F*!$typed$1.CONSTR,ARRAY_BUFFER$1,{isView:function(_o){return $isView&&$isView(_o)||isObject$6(_o)&&VIEW$1 in _o}});$export$V($export$V.P+$export$V.U+$export$V.F*_fails(function(){return!new $ArrayBuffer$1(2).slice(1,void 0).byteLength}),ARRAY_BUFFER$1,{slice:function(_o,xo){if($slice$1!==void 0&&xo===void 0)return $slice$1.call(anObject$m(this),_o);for(var bo=anObject$m(this).byteLength,wo=toAbsoluteIndex$1(_o,bo),Eo=toAbsoluteIndex$1(xo===void 0?bo:xo,bo),To=new(speciesConstructor$2(this,$ArrayBuffer$1))(toLength$6(Eo-wo)),So=new $DataView$1(this),$o=new $DataView$1(To),Do=0;wo<Eo;)$o.setUint8(Do++,So.getUint8(wo++));return To}});_setSpecies(ARRAY_BUFFER$1);var $export$U=_export;$export$U($export$U.G+$export$U.W+$export$U.F*!_typed.ABV,{DataView:_typedBuffer.DataView});var _typedArray={exports:{}};if(_descriptors){var LIBRARY=_library,global$5=_global.exports,fails$1=_fails,$export$T=_export,$typed=_typed,$buffer=_typedBuffer,ctx$2=_ctx,anInstance$1=_anInstance,propertyDesc=_propertyDesc,hide$2=_hide,redefineAll$1=_redefineAll,toInteger$1=_toInteger,toLength$5=_toLength,toIndex=_toIndex,toAbsoluteIndex=_toAbsoluteIndex,toPrimitive$4=_toPrimitive,has$3=_has,classof$1=_classof,isObject$5=_isObject,toObject$7=_toObject,isArrayIter=_isArrayIter,create$3=_objectCreate,getPrototypeOf$7=_objectGpo,gOPN$1=_objectGopn.f,getIterFn=core_getIteratorMethod,uid=_uid,wks$1=_wks.exports,createArrayMethod=_arrayMethods,createArrayIncludes=_arrayIncludes,speciesConstructor$1=_speciesConstructor,ArrayIterators=es6_array_iterator,Iterators$1=_iterators,$iterDetect=_iterDetect,setSpecies=_setSpecies,arrayFill=_arrayFill,arrayCopyWithin=_arrayCopyWithin,$DP=_objectDp,$GOPD=_objectGopd,dP$2=$DP.f,gOPD$5=$GOPD.f,RangeError$1=global$5.RangeError,TypeError$1=global$5.TypeError,Uint8Array$1=global$5.Uint8Array,ARRAY_BUFFER="ArrayBuffer",SHARED_BUFFER="Shared"+ARRAY_BUFFER,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",PROTOTYPE="prototype",ArrayProto=Array[PROTOTYPE],$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(!0),arrayIndexOf=createArrayIncludes(!1),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR$1=wks$1("iterator"),TAG=wks$1("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,WRONG_LENGTH="Wrong length!",$map=createArrayMethod(1,function(va,_o){return allocate(speciesConstructor$1(va,va[DEF_CONSTRUCTOR]),_o)}),LITTLE_ENDIAN=fails$1(function(){return new Uint8Array$1(new Uint16Array([1]).buffer)[0]===1}),FORCED_SET=!!Uint8Array$1&&!!Uint8Array$1[PROTOTYPE].set&&fails$1(function(){new Uint8Array$1(1).set({})}),toOffset=function(va,_o){var xo=toInteger$1(va);if(xo<0||xo%_o)throw RangeError$1("Wrong offset!");return xo},validate=function(va){if(isObject$5(va)&&TYPED_ARRAY in va)return va;throw TypeError$1(va+" is not a typed array!")},allocate=function(va,_o){if(!(isObject$5(va)&&TYPED_CONSTRUCTOR in va))throw TypeError$1("It is not a typed array constructor!");return new va(_o)},speciesFromList=function(va,_o){return fromList(speciesConstructor$1(va,va[DEF_CONSTRUCTOR]),_o)},fromList=function(va,_o){for(var xo=0,bo=_o.length,wo=allocate(va,bo);bo>xo;)wo[xo]=_o[xo++];return wo},addGetter=function(va,_o,xo){dP$2(va,_o,{get:function(){return this._d[xo]}})},$from=function(_o){var xo=toObject$7(_o),bo=arguments.length,wo=bo>1?arguments[1]:void 0,Eo=wo!==void 0,To=getIterFn(xo),So,$o,Do,No,Oo,Lo;if(To!=null&&!isArrayIter(To)){for(Lo=To.call(xo),Do=[],So=0;!(Oo=Lo.next()).done;So++)Do.push(Oo.value);xo=Do}for(Eo&&bo>2&&(wo=ctx$2(wo,arguments[2],2)),So=0,$o=toLength$5(xo.length),No=allocate(this,$o);$o>So;So++)No[So]=Eo?wo(xo[So],So):xo[So];return No},$of=function(){for(var _o=0,xo=arguments.length,bo=allocate(this,xo);xo>_o;)bo[_o]=arguments[_o++];return bo},TO_LOCALE_BUG=!!Uint8Array$1&&fails$1(function(){arrayToLocaleString.call(new Uint8Array$1(1))}),$toLocaleString=function(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)},proto$1={copyWithin:function(_o,xo){return arrayCopyWithin.call(validate(this),_o,xo,arguments.length>2?arguments[2]:void 0)},every:function(_o){return arrayEvery(validate(this),_o,arguments.length>1?arguments[1]:void 0)},fill:function(_o){return arrayFill.apply(validate(this),arguments)},filter:function(_o){return speciesFromList(this,arrayFilter(validate(this),_o,arguments.length>1?arguments[1]:void 0))},find:function(_o){return arrayFind(validate(this),_o,arguments.length>1?arguments[1]:void 0)},findIndex:function(_o){return arrayFindIndex(validate(this),_o,arguments.length>1?arguments[1]:void 0)},forEach:function(_o){arrayForEach(validate(this),_o,arguments.length>1?arguments[1]:void 0)},indexOf:function(_o){return arrayIndexOf(validate(this),_o,arguments.length>1?arguments[1]:void 0)},includes:function(_o){return arrayIncludes(validate(this),_o,arguments.length>1?arguments[1]:void 0)},join:function(_o){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function(_o){return arrayLastIndexOf.apply(validate(this),arguments)},map:function(_o){return $map(validate(this),_o,arguments.length>1?arguments[1]:void 0)},reduce:function(_o){return arrayReduce.apply(validate(this),arguments)},reduceRight:function(_o){return arrayReduceRight.apply(validate(this),arguments)},reverse:function(){for(var _o=this,xo=validate(_o).length,bo=Math.floor(xo/2),wo=0,Eo;wo<bo;)Eo=_o[wo],_o[wo++]=_o[--xo],_o[xo]=Eo;return _o},some:function(_o){return arraySome(validate(this),_o,arguments.length>1?arguments[1]:void 0)},sort:function(_o){return arraySort.call(validate(this),_o)},subarray:function(_o,xo){var bo=validate(this),wo=bo.length,Eo=toAbsoluteIndex(_o,wo);return new(speciesConstructor$1(bo,bo[DEF_CONSTRUCTOR]))(bo.buffer,bo.byteOffset+Eo*bo.BYTES_PER_ELEMENT,toLength$5((xo===void 0?wo:toAbsoluteIndex(xo,wo))-Eo))}},$slice=function(_o,xo){return speciesFromList(this,arraySlice.call(validate(this),_o,xo))},$set=function(_o){validate(this);var xo=toOffset(arguments[1],1),bo=this.length,wo=toObject$7(_o),Eo=toLength$5(wo.length),To=0;if(Eo+xo>bo)throw RangeError$1(WRONG_LENGTH);for(;To<Eo;)this[xo+To]=wo[To++]},$iterators$1={entries:function(){return arrayEntries.call(validate(this))},keys:function(){return arrayKeys.call(validate(this))},values:function(){return arrayValues.call(validate(this))}},isTAIndex=function(va,_o){return isObject$5(va)&&va[TYPED_ARRAY]&&typeof _o!="symbol"&&_o in va&&String(+_o)==String(_o)},$getDesc=function(_o,xo){return isTAIndex(_o,xo=toPrimitive$4(xo,!0))?propertyDesc(2,_o[xo]):gOPD$5(_o,xo)},$setDesc=function(_o,xo,bo){return isTAIndex(_o,xo=toPrimitive$4(xo,!0))&&isObject$5(bo)&&has$3(bo,"value")&&!has$3(bo,"get")&&!has$3(bo,"set")&&!bo.configurable&&(!has$3(bo,"writable")||bo.writable)&&(!has$3(bo,"enumerable")||bo.enumerable)?(_o[xo]=bo.value,_o):dP$2(_o,xo,bo)};ALL_CONSTRUCTORS||($GOPD.f=$getDesc,$DP.f=$setDesc),$export$T($export$T.S+$export$T.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc}),fails$1(function(){arrayToString.call({})})&&(arrayToString=arrayToLocaleString=function(){return arrayJoin.call(this)});var $TypedArrayPrototype$=redefineAll$1({},proto$1);redefineAll$1($TypedArrayPrototype$,$iterators$1),hide$2($TypedArrayPrototype$,ITERATOR$1,$iterators$1.values),redefineAll$1($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString}),addGetter($TypedArrayPrototype$,"buffer","b"),addGetter($TypedArrayPrototype$,"byteOffset","o"),addGetter($TypedArrayPrototype$,"byteLength","l"),addGetter($TypedArrayPrototype$,"length","e"),dP$2($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}}),_typedArray.exports=function(va,_o,xo,bo){bo=!!bo;var wo=va+(bo?"Clamped":"")+"Array",Eo="get"+va,To="set"+va,So=global$5[wo],$o=So||{},Do=So&&getPrototypeOf$7(So),No=!So||!$typed.ABV,Oo={},Lo=So&&So[PROTOTYPE],Co=function(Bo,ko){var Uo=Bo._d;return Uo.v[Eo](ko*_o+Uo.o,LITTLE_ENDIAN)},Ro=function(Bo,ko,Uo){var Qo=Bo._d;bo&&(Uo=(Uo=Math.round(Uo))<0?0:Uo>255?255:Uo&255),Qo.v[To](ko*_o+Qo.o,Uo,LITTLE_ENDIAN)},jo=function(Bo,ko){dP$2(Bo,ko,{get:function(){return Co(this,ko)},set:function(Uo){return Ro(this,ko,Uo)},enumerable:!0})};No?(So=xo(function(Bo,ko,Uo,Qo){anInstance$1(Bo,So,wo,"_d");var qo=0,Zo=0,Xo,Fo,Go,Vo;if(!isObject$5(ko))Go=toIndex(ko),Fo=Go*_o,Xo=new $ArrayBuffer(Fo);else if(ko instanceof $ArrayBuffer||(Vo=classof$1(ko))==ARRAY_BUFFER||Vo==SHARED_BUFFER){Xo=ko,Zo=toOffset(Uo,_o);var Wo=ko.byteLength;if(Qo===void 0){if(Wo%_o||(Fo=Wo-Zo,Fo<0))throw RangeError$1(WRONG_LENGTH)}else if(Fo=toLength$5(Qo)*_o,Fo+Zo>Wo)throw RangeError$1(WRONG_LENGTH);Go=Fo/_o}else return TYPED_ARRAY in ko?fromList(So,ko):$from.call(So,ko);for(hide$2(Bo,"_d",{b:Xo,o:Zo,l:Fo,e:Go,v:new $DataView(Xo)});qo<Go;)jo(Bo,qo++)}),Lo=So[PROTOTYPE]=create$3($TypedArrayPrototype$),hide$2(Lo,"constructor",So)):(!fails$1(function(){So(1)})||!fails$1(function(){new So(-1)})||!$iterDetect(function(Bo){new So,new So(null),new So(1.5),new So(Bo)},!0))&&(So=xo(function(Bo,ko,Uo,Qo){anInstance$1(Bo,So,wo);var qo;return isObject$5(ko)?ko instanceof $ArrayBuffer||(qo=classof$1(ko))==ARRAY_BUFFER||qo==SHARED_BUFFER?Qo!==void 0?new $o(ko,toOffset(Uo,_o),Qo):Uo!==void 0?new $o(ko,toOffset(Uo,_o)):new $o(ko):TYPED_ARRAY in ko?fromList(So,ko):$from.call(So,ko):new $o(toIndex(ko))}),arrayForEach(Do!==Function.prototype?gOPN$1($o).concat(gOPN$1(Do)):gOPN$1($o),function(Bo){Bo in So||hide$2(So,Bo,$o[Bo])}),So[PROTOTYPE]=Lo,LIBRARY||(Lo.constructor=So));var zo=Lo[ITERATOR$1],Io=!!zo&&(zo.name=="values"||zo.name==null),Po=$iterators$1.values;hide$2(So,TYPED_CONSTRUCTOR,!0),hide$2(Lo,TYPED_ARRAY,wo),hide$2(Lo,VIEW,!0),hide$2(Lo,DEF_CONSTRUCTOR,So),(bo?new So(1)[TAG]!=wo:!(TAG in Lo))&&dP$2(Lo,TAG,{get:function(){return wo}}),Oo[wo]=So,$export$T($export$T.G+$export$T.W+$export$T.F*(So!=$o),Oo),$export$T($export$T.S,wo,{BYTES_PER_ELEMENT:_o}),$export$T($export$T.S+$export$T.F*fails$1(function(){$o.of.call(So,1)}),wo,{from:$from,of:$of}),BYTES_PER_ELEMENT in Lo||hide$2(Lo,BYTES_PER_ELEMENT,_o),$export$T($export$T.P,wo,proto$1),setSpecies(wo),$export$T($export$T.P+$export$T.F*FORCED_SET,wo,{set:$set}),$export$T($export$T.P+$export$T.F*!Io,wo,$iterators$1),!LIBRARY&&Lo.toString!=arrayToString&&(Lo.toString=arrayToString),$export$T($export$T.P+$export$T.F*fails$1(function(){new So(1).slice()}),wo,{slice:$slice}),$export$T($export$T.P+$export$T.F*(fails$1(function(){return[1,2].toLocaleString()!=new So([1,2]).toLocaleString()})||!fails$1(function(){Lo.toLocaleString.call([1,2])})),wo,{toLocaleString:$toLocaleString}),Iterators$1[wo]=Io?zo:Po,!LIBRARY&&!Io&&hide$2(Lo,ITERATOR$1,Po)}}else _typedArray.exports=function(){};_typedArray.exports("Int8",1,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Uint8",1,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Uint8",1,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}},!0);_typedArray.exports("Int16",2,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Uint16",2,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Int32",4,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Uint32",4,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Float32",4,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});_typedArray.exports("Float64",8,function(va){return function(xo,bo,wo){return va(this,xo,bo,wo)}});var $export$S=_export,aFunction$7=_aFunction,anObject$l=_anObject,rApply=(_global.exports.Reflect||{}).apply,fApply=Function.apply;$export$S($export$S.S+$export$S.F*!_fails(function(){rApply(function(){})}),"Reflect",{apply:function(_o,xo,bo){var wo=aFunction$7(_o),Eo=anObject$l(bo);return rApply?rApply(wo,xo,Eo):fApply.call(wo,xo,Eo)}});var $export$R=_export,create$2=_objectCreate,aFunction$6=_aFunction,anObject$k=_anObject,isObject$4=_isObject,fails=_fails,bind=_bind,rConstruct=(_global.exports.Reflect||{}).construct,NEW_TARGET_BUG=fails(function(){function va(){}return!(rConstruct(function(){},[],va)instanceof va)}),ARGS_BUG=!fails(function(){rConstruct(function(){})});$export$R($export$R.S+$export$R.F*(NEW_TARGET_BUG||ARGS_BUG),"Reflect",{construct:function(_o,xo){aFunction$6(_o),anObject$k(xo);var bo=arguments.length<3?_o:aFunction$6(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(_o,xo,bo);if(_o==bo){switch(xo.length){case 0:return new _o;case 1:return new _o(xo[0]);case 2:return new _o(xo[0],xo[1]);case 3:return new _o(xo[0],xo[1],xo[2]);case 4:return new _o(xo[0],xo[1],xo[2],xo[3])}var wo=[null];return wo.push.apply(wo,xo),new(bind.apply(_o,wo))}var Eo=bo.prototype,To=create$2(isObject$4(Eo)?Eo:Object.prototype),So=Function.apply.call(_o,To,xo);return isObject$4(So)?So:To}});var dP$1=_objectDp,$export$Q=_export,anObject$j=_anObject,toPrimitive$3=_toPrimitive;$export$Q($export$Q.S+$export$Q.F*_fails(function(){Reflect.defineProperty(dP$1.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(_o,xo,bo){anObject$j(_o),xo=toPrimitive$3(xo,!0),anObject$j(bo);try{return dP$1.f(_o,xo,bo),!0}catch{return!1}}});var $export$P=_export,gOPD$4=_objectGopd.f,anObject$i=_anObject;$export$P($export$P.S,"Reflect",{deleteProperty:function(_o,xo){var bo=gOPD$4(anObject$i(_o),xo);return bo&&!bo.configurable?!1:delete _o[xo]}});var $export$O=_export,anObject$h=_anObject,Enumerate=function(va){this._t=anObject$h(va),this._i=0;var _o=this._k=[],xo;for(xo in va)_o.push(xo)};_iterCreate(Enumerate,"Object",function(){var va=this,_o=va._k,xo;do if(va._i>=_o.length)return{value:void 0,done:!0};while(!((xo=_o[va._i++])in va._t));return{value:xo,done:!1}});$export$O($export$O.S,"Reflect",{enumerate:function(_o){return new Enumerate(_o)}});var gOPD$3=_objectGopd,getPrototypeOf$6=_objectGpo,has$2=_has,$export$N=_export,isObject$3=_isObject,anObject$g=_anObject;function get$1(va,_o){var xo=arguments.length<3?va:arguments[2],bo,wo;if(anObject$g(va)===xo)return va[_o];if(bo=gOPD$3.f(va,_o))return has$2(bo,"value")?bo.value:bo.get!==void 0?bo.get.call(xo):void 0;if(isObject$3(wo=getPrototypeOf$6(va)))return get$1(wo,_o,xo)}$export$N($export$N.S,"Reflect",{get:get$1});var gOPD$2=_objectGopd,$export$M=_export,anObject$f=_anObject;$export$M($export$M.S,"Reflect",{getOwnPropertyDescriptor:function(_o,xo){return gOPD$2.f(anObject$f(_o),xo)}});var $export$L=_export,getProto=_objectGpo,anObject$e=_anObject;$export$L($export$L.S,"Reflect",{getPrototypeOf:function(_o){return getProto(anObject$e(_o))}});var $export$K=_export;$export$K($export$K.S,"Reflect",{has:function(_o,xo){return xo in _o}});var $export$J=_export,anObject$d=_anObject,$isExtensible=Object.isExtensible;$export$J($export$J.S,"Reflect",{isExtensible:function(_o){return anObject$d(_o),$isExtensible?$isExtensible(_o):!0}});var gOPN=_objectGopn,gOPS=_objectGops,anObject$c=_anObject,Reflect$1=_global.exports.Reflect,_ownKeys=Reflect$1&&Reflect$1.ownKeys||function(_o){var xo=gOPN.f(anObject$c(_o)),bo=gOPS.f;return bo?xo.concat(bo(_o)):xo},$export$I=_export;$export$I($export$I.S,"Reflect",{ownKeys:_ownKeys});var $export$H=_export,anObject$b=_anObject,$preventExtensions=Object.preventExtensions;$export$H($export$H.S,"Reflect",{preventExtensions:function(_o){anObject$b(_o);try{return $preventExtensions&&$preventExtensions(_o),!0}catch{return!1}}});var dP=_objectDp,gOPD$1=_objectGopd,getPrototypeOf$5=_objectGpo,has$1=_has,$export$G=_export,createDesc=_propertyDesc,anObject$a=_anObject,isObject$2=_isObject;function set$1(va,_o,xo){var bo=arguments.length<4?va:arguments[3],wo=gOPD$1.f(anObject$a(va),_o),Eo,To;if(!wo){if(isObject$2(To=getPrototypeOf$5(va)))return set$1(To,_o,xo,bo);wo=createDesc(0)}if(has$1(wo,"value")){if(wo.writable===!1||!isObject$2(bo))return!1;if(Eo=gOPD$1.f(bo,_o)){if(Eo.get||Eo.set||Eo.writable===!1)return!1;Eo.value=xo,dP.f(bo,_o,Eo)}else dP.f(bo,_o,createDesc(0,xo));return!0}return wo.set===void 0?!1:(wo.set.call(bo,xo),!0)}$export$G($export$G.S,"Reflect",{set:set$1});var $export$F=_export,setProto=_setProto;setProto&&$export$F($export$F.S,"Reflect",{setPrototypeOf:function(_o,xo){setProto.check(_o,xo);try{return setProto.set(_o,xo),!0}catch{return!1}}});var $export$E=_export,$includes=_arrayIncludes(!0);$export$E($export$E.P,"Array",{includes:function(_o){return $includes(this,_o,arguments.length>1?arguments[1]:void 0)}});_addToUnscopables("includes");var isArray=_isArray,isObject$1=_isObject,toLength$4=_toLength,ctx$1=_ctx,IS_CONCAT_SPREADABLE=_wks.exports("isConcatSpreadable");function flattenIntoArray$2(va,_o,xo,bo,wo,Eo,To,So){for(var $o=wo,Do=0,No=To?ctx$1(To,So,3):!1,Oo,Lo;Do<bo;){if(Do in xo){if(Oo=No?No(xo[Do],Do,_o):xo[Do],Lo=!1,isObject$1(Oo)&&(Lo=Oo[IS_CONCAT_SPREADABLE],Lo=Lo!==void 0?!!Lo:isArray(Oo)),Lo&&Eo>0)$o=flattenIntoArray$2(va,_o,Oo,toLength$4(Oo.length),$o,Eo-1)-1;else{if($o>=9007199254740991)throw TypeError();va[$o]=Oo}$o++}Do++}return $o}var _flattenIntoArray=flattenIntoArray$2,$export$D=_export,flattenIntoArray$1=_flattenIntoArray,toObject$6=_toObject,toLength$3=_toLength,aFunction$5=_aFunction,arraySpeciesCreate$1=_arraySpeciesCreate;$export$D($export$D.P,"Array",{flatMap:function(_o){var xo=toObject$6(this),bo,wo;return aFunction$5(_o),bo=toLength$3(xo.length),wo=arraySpeciesCreate$1(xo,0),flattenIntoArray$1(wo,xo,xo,bo,0,1,_o,arguments[1]),wo}});_addToUnscopables("flatMap");var $export$C=_export,flattenIntoArray=_flattenIntoArray,toObject$5=_toObject,toLength$2=_toLength,toInteger=_toInteger,arraySpeciesCreate=_arraySpeciesCreate;$export$C($export$C.P,"Array",{flatten:function(){var _o=arguments[0],xo=toObject$5(this),bo=toLength$2(xo.length),wo=arraySpeciesCreate(xo,0);return flattenIntoArray(wo,xo,xo,bo,0,_o===void 0?1:toInteger(_o)),wo}});_addToUnscopables("flatten");var $export$B=_export,$at=_stringAt(!0),$fails=_fails,FORCED=$fails(function(){return"\u{20BB7}".at(0)!=="\u{20BB7}"});$export$B($export$B.P+$export$B.F*FORCED,"String",{at:function(_o){return $at(this,_o)}});var toLength$1=_toLength,repeat=_stringRepeat,defined$1=_defined,_stringPad=function(va,_o,xo,bo){var wo=String(defined$1(va)),Eo=wo.length,To=xo===void 0?" ":String(xo),So=toLength$1(_o);if(So<=Eo||To=="")return wo;var $o=So-Eo,Do=repeat.call(To,Math.ceil($o/To.length));return Do.length>$o&&(Do=Do.slice(0,$o)),bo?Do+wo:wo+Do},$export$A=_export,$pad$1=_stringPad,userAgent$2=_userAgent,WEBKIT_BUG$1=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(userAgent$2);$export$A($export$A.P+$export$A.F*WEBKIT_BUG$1,"String",{padStart:function(_o){return $pad$1(this,_o,arguments.length>1?arguments[1]:void 0,!0)}});var $export$z=_export,$pad=_stringPad,userAgent$1=_userAgent,WEBKIT_BUG=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(userAgent$1);$export$z($export$z.P+$export$z.F*WEBKIT_BUG,"String",{padEnd:function(_o){return $pad(this,_o,arguments.length>1?arguments[1]:void 0,!1)}});_stringTrim("trimLeft",function(va){return function(){return va(this,1)}},"trimStart");_stringTrim("trimRight",function(va){return function(){return va(this,2)}},"trimEnd");var $export$y=_export,defined=_defined,toLength=_toLength,isRegExp=_isRegexp,getFlags=_flags,RegExpProto=RegExp.prototype,$RegExpStringIterator=function(va,_o){this._r=va,this._s=_o};_iterCreate($RegExpStringIterator,"RegExp String",function(){var _o=this._r.exec(this._s);return{value:_o,done:_o===null}});$export$y($export$y.P,"String",{matchAll:function(_o){if(defined(this),!isRegExp(_o))throw TypeError(_o+" is not a regexp!");var xo=String(this),bo="flags"in RegExpProto?String(_o.flags):getFlags.call(_o),wo=new RegExp(_o.source,~bo.indexOf("g")?bo:"g"+bo);return wo.lastIndex=toLength(_o.lastIndex),new $RegExpStringIterator(wo,xo)}});_wksDefine("asyncIterator");_wksDefine("observable");var $export$x=_export,ownKeys$1=_ownKeys,toIObject$1=_toIobject,gOPD=_objectGopd,createProperty=_createProperty;$export$x($export$x.S,"Object",{getOwnPropertyDescriptors:function(_o){for(var xo=toIObject$1(_o),bo=gOPD.f,wo=ownKeys$1(xo),Eo={},To=0,So,$o;wo.length>To;)$o=bo(xo,So=wo[To++]),$o!==void 0&&createProperty(Eo,So,$o);return Eo}});var DESCRIPTORS=_descriptors,getKeys$1=_objectKeys,toIObject=_toIobject,isEnum=_objectPie.f,_objectToArray=function(va){return function(_o){for(var xo=toIObject(_o),bo=getKeys$1(xo),wo=bo.length,Eo=0,To=[],So;wo>Eo;)So=bo[Eo++],(!DESCRIPTORS||isEnum.call(xo,So))&&To.push(va?[So,xo[So]]:xo[So]);return To}},$export$w=_export,$values=_objectToArray(!1);$export$w($export$w.S,"Object",{values:function(_o){return $values(_o)}});var $export$v=_export,$entries=_objectToArray(!0);$export$v($export$v.S,"Object",{entries:function(_o){return $entries(_o)}});var _objectForcedPam=!_fails(function(){var va=Math.random();__defineSetter__.call(null,va,function(){}),delete _global.exports[va]}),$export$u=_export,toObject$4=_toObject,aFunction$4=_aFunction,$defineProperty$1=_objectDp;_descriptors&&$export$u($export$u.P+_objectForcedPam,"Object",{__defineGetter__:function(_o,xo){$defineProperty$1.f(toObject$4(this),_o,{get:aFunction$4(xo),enumerable:!0,configurable:!0})}});var $export$t=_export,toObject$3=_toObject,aFunction$3=_aFunction,$defineProperty=_objectDp;_descriptors&&$export$t($export$t.P+_objectForcedPam,"Object",{__defineSetter__:function(_o,xo){$defineProperty.f(toObject$3(this),_o,{set:aFunction$3(xo),enumerable:!0,configurable:!0})}});var $export$s=_export,toObject$2=_toObject,toPrimitive$2=_toPrimitive,getPrototypeOf$4=_objectGpo,getOwnPropertyDescriptor$1=_objectGopd.f;_descriptors&&$export$s($export$s.P+_objectForcedPam,"Object",{__lookupGetter__:function(_o){var xo=toObject$2(this),bo=toPrimitive$2(_o,!0),wo;do if(wo=getOwnPropertyDescriptor$1(xo,bo))return wo.get;while(xo=getPrototypeOf$4(xo))}});var $export$r=_export,toObject$1=_toObject,toPrimitive$1=_toPrimitive,getPrototypeOf$3=_objectGpo,getOwnPropertyDescriptor=_objectGopd.f;_descriptors&&$export$r($export$r.P+_objectForcedPam,"Object",{__lookupSetter__:function(_o){var xo=toObject$1(this),bo=toPrimitive$1(_o,!0),wo;do if(wo=getOwnPropertyDescriptor(xo,bo))return wo.set;while(xo=getPrototypeOf$3(xo))}});var forOf$2=_forOf.exports,_arrayFromIterable=function(va,_o){var xo=[];return forOf$2(va,!1,xo.push,xo,_o),xo},classof=_classof,from$1=_arrayFromIterable,_collectionToJson=function(va){return function(){if(classof(this)!=va)throw TypeError(va+"#toJSON isn't generic");return from$1(this)}},$export$q=_export;$export$q($export$q.P+$export$q.R,"Map",{toJSON:_collectionToJson("Map")});var $export$p=_export;$export$p($export$p.P+$export$p.R,"Set",{toJSON:_collectionToJson("Set")});var $export$o=_export,_setCollectionOf=function(va){$export$o($export$o.S,va,{of:function(){for(var xo=arguments.length,bo=new Array(xo);xo--;)bo[xo]=arguments[xo];return new this(bo)}})};_setCollectionOf("Map");_setCollectionOf("Set");_setCollectionOf("WeakMap");_setCollectionOf("WeakSet");var $export$n=_export,aFunction$2=_aFunction,ctx=_ctx,forOf$1=_forOf.exports,_setCollectionFrom=function(va){$export$n($export$n.S,va,{from:function(xo){var bo=arguments[1],wo,Eo,To,So;return aFunction$2(this),wo=bo!==void 0,wo&&aFunction$2(bo),xo==null?new this:(Eo=[],wo?(To=0,So=ctx(bo,arguments[2],2),forOf$1(xo,!1,function($o){Eo.push(So($o,To++))})):forOf$1(xo,!1,Eo.push,Eo),new this(Eo))}})};_setCollectionFrom("Map");_setCollectionFrom("Set");_setCollectionFrom("WeakMap");_setCollectionFrom("WeakSet");var $export$m=_export;$export$m($export$m.G,{global:_global.exports});var $export$l=_export;$export$l($export$l.S,"System",{global:_global.exports});var $export$k=_export,cof=_cof;$export$k($export$k.S,"Error",{isError:function(_o){return cof(_o)==="Error"}});var $export$j=_export;$export$j($export$j.S,"Math",{clamp:function(_o,xo,bo){return Math.min(bo,Math.max(xo,_o))}});var $export$i=_export;$export$i($export$i.S,"Math",{DEG_PER_RAD:Math.PI/180});var $export$h=_export,RAD_PER_DEG=180/Math.PI;$export$h($export$h.S,"Math",{degrees:function(_o){return _o*RAD_PER_DEG}});var _mathScale=Math.scale||function(_o,xo,bo,wo,Eo){return arguments.length===0||_o!=_o||xo!=xo||bo!=bo||wo!=wo||Eo!=Eo?NaN:_o===1/0||_o===-1/0?_o:(_o-xo)*(Eo-wo)/(bo-xo)+wo},$export$g=_export,scale=_mathScale,fround=_mathFround;$export$g($export$g.S,"Math",{fscale:function(_o,xo,bo,wo,Eo){return fround(scale(_o,xo,bo,wo,Eo))}});var $export$f=_export;$export$f($export$f.S,"Math",{iaddh:function(_o,xo,bo,wo){var Eo=_o>>>0,To=xo>>>0,So=bo>>>0;return To+(wo>>>0)+((Eo&So|(Eo|So)&~(Eo+So>>>0))>>>31)|0}});var $export$e=_export;$export$e($export$e.S,"Math",{isubh:function(_o,xo,bo,wo){var Eo=_o>>>0,To=xo>>>0,So=bo>>>0;return To-(wo>>>0)-((~Eo&So|~(Eo^So)&Eo-So>>>0)>>>31)|0}});var $export$d=_export;$export$d($export$d.S,"Math",{imulh:function(_o,xo){var bo=65535,wo=+_o,Eo=+xo,To=wo&bo,So=Eo&bo,$o=wo>>16,Do=Eo>>16,No=($o*So>>>0)+(To*So>>>16);return $o*Do+(No>>16)+((To*Do>>>0)+(No&bo)>>16)}});var $export$c=_export;$export$c($export$c.S,"Math",{RAD_PER_DEG:180/Math.PI});var $export$b=_export,DEG_PER_RAD=Math.PI/180;$export$b($export$b.S,"Math",{radians:function(_o){return _o*DEG_PER_RAD}});var $export$a=_export;$export$a($export$a.S,"Math",{scale:_mathScale});var $export$9=_export;$export$9($export$9.S,"Math",{umulh:function(_o,xo){var bo=65535,wo=+_o,Eo=+xo,To=wo&bo,So=Eo&bo,$o=wo>>>16,Do=Eo>>>16,No=($o*So>>>0)+(To*So>>>16);return $o*Do+(No>>>16)+((To*Do>>>0)+(No&bo)>>>16)}});var $export$8=_export;$export$8($export$8.S,"Math",{signbit:function(_o){return(_o=+_o)!=_o?_o:_o==0?1/_o==1/0:_o>0}});var $export$7=_export,core$1=_core.exports,global$4=_global.exports,speciesConstructor=_speciesConstructor,promiseResolve=_promiseResolve;$export$7($export$7.P+$export$7.R,"Promise",{finally:function(va){var _o=speciesConstructor(this,core$1.Promise||global$4.Promise),xo=typeof va=="function";return this.then(xo?function(bo){return promiseResolve(_o,va()).then(function(){return bo})}:va,xo?function(bo){return promiseResolve(_o,va()).then(function(){throw bo})}:va)}});var $export$6=_export,newPromiseCapability=_newPromiseCapability,perform=_perform;$export$6($export$6.S,"Promise",{try:function(va){var _o=newPromiseCapability.f(this),xo=perform(va);return(xo.e?_o.reject:_o.resolve)(xo.v),_o.promise}});var Map$1=es6_map,$export$5=_export,shared=_shared.exports("metadata"),store$1=shared.store||(shared.store=new es6_weakMap.exports),getOrCreateMetadataMap$1=function(va,_o,xo){var bo=store$1.get(va);if(!bo){if(!xo)return;store$1.set(va,bo=new Map$1)}var wo=bo.get(_o);if(!wo){if(!xo)return;bo.set(_o,wo=new Map$1)}return wo},ordinaryHasOwnMetadata$3=function(va,_o,xo){var bo=getOrCreateMetadataMap$1(_o,xo,!1);return bo===void 0?!1:bo.has(va)},ordinaryGetOwnMetadata$2=function(va,_o,xo){var bo=getOrCreateMetadataMap$1(_o,xo,!1);return bo===void 0?void 0:bo.get(va)},ordinaryDefineOwnMetadata$2=function(va,_o,xo,bo){getOrCreateMetadataMap$1(xo,bo,!0).set(va,_o)},ordinaryOwnMetadataKeys$2=function(va,_o){var xo=getOrCreateMetadataMap$1(va,_o,!1),bo=[];return xo&&xo.forEach(function(wo,Eo){bo.push(Eo)}),bo},toMetaKey$9=function(va){return va===void 0||typeof va=="symbol"?va:String(va)},exp=function(va){$export$5($export$5.S,"Reflect",va)},_metadata={store:store$1,map:getOrCreateMetadataMap$1,has:ordinaryHasOwnMetadata$3,get:ordinaryGetOwnMetadata$2,set:ordinaryDefineOwnMetadata$2,keys:ordinaryOwnMetadataKeys$2,key:toMetaKey$9,exp},metadata$7=_metadata,anObject$9=_anObject,toMetaKey$8=metadata$7.key,ordinaryDefineOwnMetadata$1=metadata$7.set;metadata$7.exp({defineMetadata:function(_o,xo,bo,wo){ordinaryDefineOwnMetadata$1(_o,xo,anObject$9(bo),toMetaKey$8(wo))}});var metadata$6=_metadata,anObject$8=_anObject,toMetaKey$7=metadata$6.key,getOrCreateMetadataMap=metadata$6.map,store=metadata$6.store;metadata$6.exp({deleteMetadata:function(_o,xo){var bo=arguments.length<3?void 0:toMetaKey$7(arguments[2]),wo=getOrCreateMetadataMap(anObject$8(xo),bo,!1);if(wo===void 0||!wo.delete(_o))return!1;if(wo.size)return!0;var Eo=store.get(xo);return Eo.delete(bo),!!Eo.size||store.delete(xo)}});var metadata$5=_metadata,anObject$7=_anObject,getPrototypeOf$2=_objectGpo,ordinaryHasOwnMetadata$2=metadata$5.has,ordinaryGetOwnMetadata$1=metadata$5.get,toMetaKey$6=metadata$5.key,ordinaryGetMetadata=function(va,_o,xo){var bo=ordinaryHasOwnMetadata$2(va,_o,xo);if(bo)return ordinaryGetOwnMetadata$1(va,_o,xo);var wo=getPrototypeOf$2(_o);return wo!==null?ordinaryGetMetadata(va,wo,xo):void 0};metadata$5.exp({getMetadata:function(_o,xo){return ordinaryGetMetadata(_o,anObject$7(xo),arguments.length<3?void 0:toMetaKey$6(arguments[2]))}});var Set$1=es6_set,from=_arrayFromIterable,metadata$4=_metadata,anObject$6=_anObject,getPrototypeOf$1=_objectGpo,ordinaryOwnMetadataKeys$1=metadata$4.keys,toMetaKey$5=metadata$4.key,ordinaryMetadataKeys=function(va,_o){var xo=ordinaryOwnMetadataKeys$1(va,_o),bo=getPrototypeOf$1(va);if(bo===null)return xo;var wo=ordinaryMetadataKeys(bo,_o);return wo.length?xo.length?from(new Set$1(xo.concat(wo))):wo:xo};metadata$4.exp({getMetadataKeys:function(_o){return ordinaryMetadataKeys(anObject$6(_o),arguments.length<2?void 0:toMetaKey$5(arguments[1]))}});var metadata$3=_metadata,anObject$5=_anObject,ordinaryGetOwnMetadata=metadata$3.get,toMetaKey$4=metadata$3.key;metadata$3.exp({getOwnMetadata:function(_o,xo){return ordinaryGetOwnMetadata(_o,anObject$5(xo),arguments.length<3?void 0:toMetaKey$4(arguments[2]))}});var metadata$2=_metadata,anObject$4=_anObject,ordinaryOwnMetadataKeys=metadata$2.keys,toMetaKey$3=metadata$2.key;metadata$2.exp({getOwnMetadataKeys:function(_o){return ordinaryOwnMetadataKeys(anObject$4(_o),arguments.length<2?void 0:toMetaKey$3(arguments[1]))}});var metadata$1=_metadata,anObject$3=_anObject,getPrototypeOf=_objectGpo,ordinaryHasOwnMetadata$1=metadata$1.has,toMetaKey$2=metadata$1.key,ordinaryHasMetadata=function(va,_o,xo){var bo=ordinaryHasOwnMetadata$1(va,_o,xo);if(bo)return!0;var wo=getPrototypeOf(_o);return wo!==null?ordinaryHasMetadata(va,wo,xo):!1};metadata$1.exp({hasMetadata:function(_o,xo){return ordinaryHasMetadata(_o,anObject$3(xo),arguments.length<3?void 0:toMetaKey$2(arguments[2]))}});var metadata=_metadata,anObject$2=_anObject,ordinaryHasOwnMetadata=metadata.has,toMetaKey$1=metadata.key;metadata.exp({hasOwnMetadata:function(_o,xo){return ordinaryHasOwnMetadata(_o,anObject$2(xo),arguments.length<3?void 0:toMetaKey$1(arguments[2]))}});var $metadata=_metadata,anObject$1=_anObject,aFunction$1=_aFunction,toMetaKey=$metadata.key,ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function(_o,xo){return function(wo,Eo){ordinaryDefineOwnMetadata(_o,xo,(Eo!==void 0?anObject$1:aFunction$1)(wo),toMetaKey(Eo))}}});var $export$4=_export,microtask$1=_microtask(),process$1=_global.exports.process,isNode=_cof(process$1)=="process";$export$4($export$4.G,{asap:function(_o){var xo=isNode&&process$1.domain;microtask$1(xo?xo.bind(_o):_o)}});var $export$3=_export,global$3=_global.exports,core=_core.exports,microtask=_microtask(),OBSERVABLE$1=_wks.exports("observable"),aFunction=_aFunction,anObject=_anObject,anInstance=_anInstance,redefineAll=_redefineAll,hide$1=_hide,forOf=_forOf.exports,RETURN=forOf.RETURN,getMethod=function(va){return va==null?void 0:aFunction(va)},cleanupSubscription=function(va){var _o=va._c;_o&&(va._c=void 0,_o())},subscriptionClosed=function(va){return va._o===void 0},closeSubscription=function(va){subscriptionClosed(va)||(va._o=void 0,cleanupSubscription(va))},Subscription=function(va,_o){anObject(va),this._c=void 0,this._o=va,va=new SubscriptionObserver(this);try{var xo=_o(va),bo=xo;xo!=null&&(typeof xo.unsubscribe=="function"?xo=function(){bo.unsubscribe()}:aFunction(xo),this._c=xo)}catch(wo){va.error(wo);return}subscriptionClosed(this)&&cleanupSubscription(this)};Subscription.prototype=redefineAll({},{unsubscribe:function(){closeSubscription(this)}});var SubscriptionObserver=function(va){this._s=va};SubscriptionObserver.prototype=redefineAll({},{next:function(_o){var xo=this._s;if(!subscriptionClosed(xo)){var bo=xo._o;try{var wo=getMethod(bo.next);if(wo)return wo.call(bo,_o)}catch(Eo){try{closeSubscription(xo)}finally{throw Eo}}}},error:function(_o){var xo=this._s;if(subscriptionClosed(xo))throw _o;var bo=xo._o;xo._o=void 0;try{var wo=getMethod(bo.error);if(!wo)throw _o;_o=wo.call(bo,_o)}catch(Eo){try{cleanupSubscription(xo)}finally{throw Eo}}return cleanupSubscription(xo),_o},complete:function(_o){var xo=this._s;if(!subscriptionClosed(xo)){var bo=xo._o;xo._o=void 0;try{var wo=getMethod(bo.complete);_o=wo?wo.call(bo,_o):void 0}catch(Eo){try{cleanupSubscription(xo)}finally{throw Eo}}return cleanupSubscription(xo),_o}}});var $Observable=function(_o){anInstance(this,$Observable,"Observable","_f")._f=aFunction(_o)};redefineAll($Observable.prototype,{subscribe:function(_o){return new Subscription(_o,this._f)},forEach:function(_o){var xo=this;return new(core.Promise||global$3.Promise)(function(bo,wo){aFunction(_o);var Eo=xo.subscribe({next:function(To){try{return _o(To)}catch(So){wo(So),Eo.unsubscribe()}},error:wo,complete:bo})})}});redefineAll($Observable,{from:function(_o){var xo=typeof this=="function"?this:$Observable,bo=getMethod(anObject(_o)[OBSERVABLE$1]);if(bo){var wo=anObject(bo.call(_o));return wo.constructor===xo?wo:new xo(function(Eo){return wo.subscribe(Eo)})}return new xo(function(Eo){var To=!1;return microtask(function(){if(!To){try{if(forOf(_o,!1,function(So){if(Eo.next(So),To)return RETURN})===RETURN)return}catch(So){if(To)throw So;Eo.error(So);return}Eo.complete()}}),function(){To=!0}})},of:function(){for(var _o=0,xo=arguments.length,bo=new Array(xo);_o<xo;)bo[_o]=arguments[_o++];return new(typeof this=="function"?this:$Observable)(function(wo){var Eo=!1;return microtask(function(){if(!Eo){for(var To=0;To<bo.length;++To)if(wo.next(bo[To]),Eo)return;wo.complete()}}),function(){Eo=!0}})}});hide$1($Observable.prototype,OBSERVABLE$1,function(){return this});$export$3($export$3.G,{Observable:$Observable});_setSpecies("Observable");var global$2=_global.exports,$export$2=_export,userAgent=_userAgent,slice=[].slice,MSIE=/MSIE .\./.test(userAgent),wrap=function(va){return function(_o,xo){var bo=arguments.length>2,wo=bo?slice.call(arguments,2):!1;return va(bo?function(){(typeof _o=="function"?_o:Function(_o)).apply(this,wo)}:_o,xo)}};$export$2($export$2.G+$export$2.B+$export$2.F*MSIE,{setTimeout:wrap(global$2.setTimeout),setInterval:wrap(global$2.setInterval)});var $export$1=_export,$task=_task;$export$1($export$1.G+$export$1.B,{setImmediate:$task.set,clearImmediate:$task.clear});var $iterators=es6_array_iterator,getKeys=_objectKeys,redefine=_redefine.exports,global$1=_global.exports,hide=_hide,Iterators=_iterators,wks=_wks.exports,ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1};for(var collections=getKeys(DOMIterables),i$4=0;i$4<collections.length;i$4++){var NAME=collections[i$4],explicit=DOMIterables[NAME],Collection=global$1[NAME],proto=Collection&&Collection.prototype,key;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}var runtime={exports:{}};(function(va){(function(_o){var xo=Object.prototype,bo=xo.hasOwnProperty,wo,Eo=typeof Symbol=="function"?Symbol:{},To=Eo.iterator||"@@iterator",So=Eo.asyncIterator||"@@asyncIterator",$o=Eo.toStringTag||"@@toStringTag",Do=_o.regeneratorRuntime;if(Do){va.exports=Do;return}Do=_o.regeneratorRuntime=va.exports;function No(Jo,rs,ls,ss){var us=rs&&rs.prototype instanceof Io?rs:Io,ms=Object.create(us.prototype),As=new Yo(ss||[]);return ms._invoke=Fo(Jo,ls,As),ms}Do.wrap=No;function Oo(Jo,rs,ls){try{return{type:"normal",arg:Jo.call(rs,ls)}}catch(ss){return{type:"throw",arg:ss}}}var Lo="suspendedStart",Co="suspendedYield",Ro="executing",jo="completed",zo={};function Io(){}function Po(){}function Bo(){}var ko={};ko[To]=function(){return this};var Uo=Object.getPrototypeOf,Qo=Uo&&Uo(Uo(Ko([])));Qo&&Qo!==xo&&bo.call(Qo,To)&&(ko=Qo);var qo=Bo.prototype=Io.prototype=Object.create(ko);Po.prototype=qo.constructor=Bo,Bo.constructor=Po,Bo[$o]=Po.displayName="GeneratorFunction";function Zo(Jo){["next","throw","return"].forEach(function(rs){Jo[rs]=function(ls){return this._invoke(rs,ls)}})}Do.isGeneratorFunction=function(Jo){var rs=typeof Jo=="function"&&Jo.constructor;return rs?rs===Po||(rs.displayName||rs.name)==="GeneratorFunction":!1},Do.mark=function(Jo){return Object.setPrototypeOf?Object.setPrototypeOf(Jo,Bo):(Jo.__proto__=Bo,$o in Jo||(Jo[$o]="GeneratorFunction")),Jo.prototype=Object.create(qo),Jo},Do.awrap=function(Jo){return{__await:Jo}};function Xo(Jo){function rs(us,ms,As,Os){var Es=Oo(Jo[us],Jo,ms);if(Es.type==="throw")Os(Es.arg);else{var Ms=Es.arg,$s=Ms.value;return $s&&typeof $s=="object"&&bo.call($s,"__await")?Promise.resolve($s.__await).then(function(ks){rs("next",ks,As,Os)},function(ks){rs("throw",ks,As,Os)}):Promise.resolve($s).then(function(ks){Ms.value=ks,As(Ms)},Os)}}typeof _o.process=="object"&&_o.process.domain&&(rs=_o.process.domain.bind(rs));var ls;function ss(us,ms){function As(){return new Promise(function(Os,Es){rs(us,ms,Os,Es)})}return ls=ls?ls.then(As,As):As()}this._invoke=ss}Zo(Xo.prototype),Xo.prototype[So]=function(){return this},Do.AsyncIterator=Xo,Do.async=function(Jo,rs,ls,ss){var us=new Xo(No(Jo,rs,ls,ss));return Do.isGeneratorFunction(rs)?us:us.next().then(function(ms){return ms.done?ms.value:us.next()})};function Fo(Jo,rs,ls){var ss=Lo;return function(ms,As){if(ss===Ro)throw new Error("Generator is already running");if(ss===jo){if(ms==="throw")throw As;return ts()}for(ls.method=ms,ls.arg=As;;){var Os=ls.delegate;if(Os){var Es=Go(Os,ls);if(Es){if(Es===zo)continue;return Es}}if(ls.method==="next")ls.sent=ls._sent=ls.arg;else if(ls.method==="throw"){if(ss===Lo)throw ss=jo,ls.arg;ls.dispatchException(ls.arg)}else ls.method==="return"&&ls.abrupt("return",ls.arg);ss=Ro;var Ms=Oo(Jo,rs,ls);if(Ms.type==="normal"){if(ss=ls.done?jo:Co,Ms.arg===zo)continue;return{value:Ms.arg,done:ls.done}}else Ms.type==="throw"&&(ss=jo,ls.method="throw",ls.arg=Ms.arg)}}}function Go(Jo,rs){var ls=Jo.iterator[rs.method];if(ls===wo){if(rs.delegate=null,rs.method==="throw"){if(Jo.iterator.return&&(rs.method="return",rs.arg=wo,Go(Jo,rs),rs.method==="throw"))return zo;rs.method="throw",rs.arg=new TypeError("The iterator does not provide a 'throw' method")}return zo}var ss=Oo(ls,Jo.iterator,rs.arg);if(ss.type==="throw")return rs.method="throw",rs.arg=ss.arg,rs.delegate=null,zo;var us=ss.arg;if(!us)return rs.method="throw",rs.arg=new TypeError("iterator result is not an object"),rs.delegate=null,zo;if(us.done)rs[Jo.resultName]=us.value,rs.next=Jo.nextLoc,rs.method!=="return"&&(rs.method="next",rs.arg=wo);else return us;return rs.delegate=null,zo}Zo(qo),qo[$o]="Generator",qo[To]=function(){return this},qo.toString=function(){return"[object Generator]"};function Vo(Jo){var rs={tryLoc:Jo[0]};1 in Jo&&(rs.catchLoc=Jo[1]),2 in Jo&&(rs.finallyLoc=Jo[2],rs.afterLoc=Jo[3]),this.tryEntries.push(rs)}function Wo(Jo){var rs=Jo.completion||{};rs.type="normal",delete rs.arg,Jo.completion=rs}function Yo(Jo){this.tryEntries=[{tryLoc:"root"}],Jo.forEach(Vo,this),this.reset(!0)}Do.keys=function(Jo){var rs=[];for(var ls in Jo)rs.push(ls);return rs.reverse(),function ss(){for(;rs.length;){var us=rs.pop();if(us in Jo)return ss.value=us,ss.done=!1,ss}return ss.done=!0,ss}};function Ko(Jo){if(Jo){var rs=Jo[To];if(rs)return rs.call(Jo);if(typeof Jo.next=="function")return Jo;if(!isNaN(Jo.length)){var ls=-1,ss=function us(){for(;++ls<Jo.length;)if(bo.call(Jo,ls))return us.value=Jo[ls],us.done=!1,us;return us.value=wo,us.done=!0,us};return ss.next=ss}}return{next:ts}}Do.values=Ko;function ts(){return{value:wo,done:!0}}Yo.prototype={constructor:Yo,reset:function(Jo){if(this.prev=0,this.next=0,this.sent=this._sent=wo,this.done=!1,this.delegate=null,this.method="next",this.arg=wo,this.tryEntries.forEach(Wo),!Jo)for(var rs in this)rs.charAt(0)==="t"&&bo.call(this,rs)&&!isNaN(+rs.slice(1))&&(this[rs]=wo)},stop:function(){this.done=!0;var Jo=this.tryEntries[0],rs=Jo.completion;if(rs.type==="throw")throw rs.arg;return this.rval},dispatchException:function(Jo){if(this.done)throw Jo;var rs=this;function ls(Es,Ms){return ms.type="throw",ms.arg=Jo,rs.next=Es,Ms&&(rs.method="next",rs.arg=wo),!!Ms}for(var ss=this.tryEntries.length-1;ss>=0;--ss){var us=this.tryEntries[ss],ms=us.completion;if(us.tryLoc==="root")return ls("end");if(us.tryLoc<=this.prev){var As=bo.call(us,"catchLoc"),Os=bo.call(us,"finallyLoc");if(As&&Os){if(this.prev<us.catchLoc)return ls(us.catchLoc,!0);if(this.prev<us.finallyLoc)return ls(us.finallyLoc)}else if(As){if(this.prev<us.catchLoc)return ls(us.catchLoc,!0)}else if(Os){if(this.prev<us.finallyLoc)return ls(us.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Jo,rs){for(var ls=this.tryEntries.length-1;ls>=0;--ls){var ss=this.tryEntries[ls];if(ss.tryLoc<=this.prev&&bo.call(ss,"finallyLoc")&&this.prev<ss.finallyLoc){var us=ss;break}}us&&(Jo==="break"||Jo==="continue")&&us.tryLoc<=rs&&rs<=us.finallyLoc&&(us=null);var ms=us?us.completion:{};return ms.type=Jo,ms.arg=rs,us?(this.method="next",this.next=us.finallyLoc,zo):this.complete(ms)},complete:function(Jo,rs){if(Jo.type==="throw")throw Jo.arg;return Jo.type==="break"||Jo.type==="continue"?this.next=Jo.arg:Jo.type==="return"?(this.rval=this.arg=Jo.arg,this.method="return",this.next="end"):Jo.type==="normal"&&rs&&(this.next=rs),zo},finish:function(Jo){for(var rs=this.tryEntries.length-1;rs>=0;--rs){var ls=this.tryEntries[rs];if(ls.finallyLoc===Jo)return this.complete(ls.completion,ls.afterLoc),Wo(ls),zo}},catch:function(Jo){for(var rs=this.tryEntries.length-1;rs>=0;--rs){var ls=this.tryEntries[rs];if(ls.tryLoc===Jo){var ss=ls.completion;if(ss.type==="throw"){var us=ss.arg;Wo(ls)}return us}}throw new Error("illegal catch attempt")},delegateYield:function(Jo,rs,ls){return this.delegate={iterator:Ko(Jo),resultName:rs,nextLoc:ls},this.method==="next"&&(this.arg=wo),zo}}})(typeof commonjsGlobal=="object"?commonjsGlobal:typeof window=="object"?window:typeof self=="object"?self:commonjsGlobal)})(runtime);var _replacer=function(va,_o){var xo=_o===Object(_o)?function(bo){return _o[bo]}:_o;return function(bo){return String(bo).replace(va,xo)}},$export=_export,$re=_replacer(/[\\^$*+?.()|[\]{}]/g,"\\$&");$export($export.S,"RegExp",{escape:function(_o){return $re(_o)}});_core.exports.RegExp.escape;if(commonjsGlobal._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");commonjsGlobal._babelPolyfill=!0;var DEFINE_PROPERTY="defineProperty";function define(va,_o,xo){va[_o]||Object[DEFINE_PROPERTY](va,_o,{writable:!0,configurable:!0,value:xo})}define(String.prototype,"padLeft","".padStart);define(String.prototype,"padRight","".padEnd);"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(va){[][va]&&define(Array,va,Function.call.bind([][va]))});var react$2={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(va){if(va==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(va)}function shouldUseNative(){try{if(!Object.assign)return!1;var va=new String("abc");if(va[5]="de",Object.getOwnPropertyNames(va)[0]==="5")return!1;for(var _o={},xo=0;xo<10;xo++)_o["_"+String.fromCharCode(xo)]=xo;var bo=Object.getOwnPropertyNames(_o).map(function(Eo){return _o[Eo]});if(bo.join("")!=="0123456789")return!1;var wo={};return"abcdefghijklmnopqrst".split("").forEach(function(Eo){wo[Eo]=Eo}),Object.keys(Object.assign({},wo)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(va,_o){for(var xo,bo=toObject(va),wo,Eo=1;Eo<arguments.length;Eo++){xo=Object(arguments[Eo]);for(var To in xo)hasOwnProperty.call(xo,To)&&(bo[To]=xo[To]);if(getOwnPropertySymbols){wo=getOwnPropertySymbols(xo);for(var So=0;So<wo.length;So++)propIsEnumerable.call(xo,wo[So])&&(bo[wo[So]]=xo[wo[So]])}}return bo};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=objectAssign,n$4=60103,p$3=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$2=60109,r$5=60110,t$4=60112;react_production_min.Suspense=60113;var u$3=60115,v$3=60116;if(typeof Symbol=="function"&&Symbol.for){var w$3=Symbol.for;n$4=w$3("react.element"),p$3=w$3("react.portal"),react_production_min.Fragment=w$3("react.fragment"),react_production_min.StrictMode=w$3("react.strict_mode"),react_production_min.Profiler=w$3("react.profiler"),q$2=w$3("react.provider"),r$5=w$3("react.context"),t$4=w$3("react.forward_ref"),react_production_min.Suspense=w$3("react.suspense"),u$3=w$3("react.memo"),v$3=w$3("react.lazy")}var x$2=typeof Symbol=="function"&&Symbol.iterator;function y$4(va){return va===null||typeof va!="object"?null:(va=x$2&&va[x$2]||va["@@iterator"],typeof va=="function"?va:null)}function z$1(va){for(var _o="https://reactjs.org/docs/error-decoder.html?invariant="+va,xo=1;xo<arguments.length;xo++)_o+="&args[]="+encodeURIComponent(arguments[xo]);return"Minified React error #"+va+"; visit "+_o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$3={};function C$3(va,_o,xo){this.props=va,this.context=_o,this.refs=B$3,this.updater=xo||A$3}C$3.prototype.isReactComponent={};C$3.prototype.setState=function(va,_o){if(typeof va!="object"&&typeof va!="function"&&va!=null)throw Error(z$1(85));this.updater.enqueueSetState(this,va,_o,"setState")};C$3.prototype.forceUpdate=function(va){this.updater.enqueueForceUpdate(this,va,"forceUpdate")};function D$3(){}D$3.prototype=C$3.prototype;function E$4(va,_o,xo){this.props=va,this.context=_o,this.refs=B$3,this.updater=xo||A$3}var F$3=E$4.prototype=new D$3;F$3.constructor=E$4;l$4(F$3,C$3.prototype);F$3.isPureReactComponent=!0;var G$3={current:null},H$3=Object.prototype.hasOwnProperty,I$3={key:!0,ref:!0,__self:!0,__source:!0};function J$2(va,_o,xo){var bo,wo={},Eo=null,To=null;if(_o!=null)for(bo in _o.ref!==void 0&&(To=_o.ref),_o.key!==void 0&&(Eo=""+_o.key),_o)H$3.call(_o,bo)&&!I$3.hasOwnProperty(bo)&&(wo[bo]=_o[bo]);var So=arguments.length-2;if(So===1)wo.children=xo;else if(1<So){for(var $o=Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do+2];wo.children=$o}if(va&&va.defaultProps)for(bo in So=va.defaultProps,So)wo[bo]===void 0&&(wo[bo]=So[bo]);return{$$typeof:n$4,type:va,key:Eo,ref:To,props:wo,_owner:G$3.current}}function K$2(va,_o){return{$$typeof:n$4,type:va.type,key:_o,ref:va.ref,props:va.props,_owner:va._owner}}function L$3(va){return typeof va=="object"&&va!==null&&va.$$typeof===n$4}function escape$1(va){var _o={"=":"=0",":":"=2"};return"$"+va.replace(/[=:]/g,function(xo){return _o[xo]})}var M$3=/\/+/g;function N$4(va,_o){return typeof va=="object"&&va!==null&&va.key!=null?escape$1(""+va.key):_o.toString(36)}function O$4(va,_o,xo,bo,wo){var Eo=typeof va;(Eo==="undefined"||Eo==="boolean")&&(va=null);var To=!1;if(va===null)To=!0;else switch(Eo){case"string":case"number":To=!0;break;case"object":switch(va.$$typeof){case n$4:case p$3:To=!0}}if(To)return To=va,wo=wo(To),va=bo===""?"."+N$4(To,0):bo,Array.isArray(wo)?(xo="",va!=null&&(xo=va.replace(M$3,"$&/")+"/"),O$4(wo,_o,xo,"",function(Do){return Do})):wo!=null&&(L$3(wo)&&(wo=K$2(wo,xo+(!wo.key||To&&To.key===wo.key?"":(""+wo.key).replace(M$3,"$&/")+"/")+va)),_o.push(wo)),1;if(To=0,bo=bo===""?".":bo+":",Array.isArray(va))for(var So=0;So<va.length;So++){Eo=va[So];var $o=bo+N$4(Eo,So);To+=O$4(Eo,_o,xo,$o,wo)}else if($o=y$4(va),typeof $o=="function")for(va=$o.call(va),So=0;!(Eo=va.next()).done;)Eo=Eo.value,$o=bo+N$4(Eo,So++),To+=O$4(Eo,_o,xo,$o,wo);else if(Eo==="object")throw _o=""+va,Error(z$1(31,_o==="[object Object]"?"object with keys {"+Object.keys(va).join(", ")+"}":_o));return To}function P$4(va,_o,xo){if(va==null)return va;var bo=[],wo=0;return O$4(va,bo,"","",function(Eo){return _o.call(xo,Eo,wo++)}),bo}function Q$2(va){if(va._status===-1){var _o=va._result;_o=_o(),va._status=0,va._result=_o,_o.then(function(xo){va._status===0&&(xo=xo.default,va._status=1,va._result=xo)},function(xo){va._status===0&&(va._status=2,va._result=xo)})}if(va._status===1)return va._result;throw va._result}var R$4={current:null};function S$3(){var va=R$4.current;if(va===null)throw Error(z$1(321));return va}var T$2={ReactCurrentDispatcher:R$4,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:P$4,forEach:function(va,_o,xo){P$4(va,function(){_o.apply(this,arguments)},xo)},count:function(va){var _o=0;return P$4(va,function(){_o++}),_o},toArray:function(va){return P$4(va,function(_o){return _o})||[]},only:function(va){if(!L$3(va))throw Error(z$1(143));return va}};react_production_min.Component=C$3;react_production_min.PureComponent=E$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$2;react_production_min.cloneElement=function(va,_o,xo){if(va==null)throw Error(z$1(267,va));var bo=l$4({},va.props),wo=va.key,Eo=va.ref,To=va._owner;if(_o!=null){if(_o.ref!==void 0&&(Eo=_o.ref,To=G$3.current),_o.key!==void 0&&(wo=""+_o.key),va.type&&va.type.defaultProps)var So=va.type.defaultProps;for($o in _o)H$3.call(_o,$o)&&!I$3.hasOwnProperty($o)&&(bo[$o]=_o[$o]===void 0&&So!==void 0?So[$o]:_o[$o])}var $o=arguments.length-2;if($o===1)bo.children=xo;else if(1<$o){So=Array($o);for(var Do=0;Do<$o;Do++)So[Do]=arguments[Do+2];bo.children=So}return{$$typeof:n$4,type:va.type,key:wo,ref:Eo,props:bo,_owner:To}};react_production_min.createContext=function(va,_o){return _o===void 0&&(_o=null),va={$$typeof:r$5,_calculateChangedBits:_o,_currentValue:va,_currentValue2:va,_threadCount:0,Provider:null,Consumer:null},va.Provider={$$typeof:q$2,_context:va},va.Consumer=va};react_production_min.createElement=J$2;react_production_min.createFactory=function(va){var _o=J$2.bind(null,va);return _o.type=va,_o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(va){return{$$typeof:t$4,render:va}};react_production_min.isValidElement=L$3;react_production_min.lazy=function(va){return{$$typeof:v$3,_payload:{_status:-1,_result:va},_init:Q$2}};react_production_min.memo=function(va,_o){return{$$typeof:u$3,type:va,compare:_o===void 0?null:_o}};react_production_min.useCallback=function(va,_o){return S$3().useCallback(va,_o)};react_production_min.useContext=function(va,_o){return S$3().useContext(va,_o)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(va,_o){return S$3().useEffect(va,_o)};react_production_min.useImperativeHandle=function(va,_o,xo){return S$3().useImperativeHandle(va,_o,xo)};react_production_min.useLayoutEffect=function(va,_o){return S$3().useLayoutEffect(va,_o)};react_production_min.useMemo=function(va,_o){return S$3().useMemo(va,_o)};react_production_min.useReducer=function(va,_o,xo){return S$3().useReducer(va,_o,xo)};react_production_min.useRef=function(va){return S$3().useRef(va)};react_production_min.useState=function(va){return S$3().useState(va)};react_production_min.version="17.0.2";react$2.exports=react_production_min;var React$g=react$2.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(va){var _o,xo,bo,wo;if(typeof performance=="object"&&typeof performance.now=="function"){var Eo=performance;va.unstable_now=function(){return Eo.now()}}else{var To=Date,So=To.now();va.unstable_now=function(){return To.now()-So}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var $o=null,Do=null,No=function(){if($o!==null)try{var us=va.unstable_now();$o(!0,us),$o=null}catch(ms){throw setTimeout(No,0),ms}};_o=function(us){$o!==null?setTimeout(_o,0,us):($o=us,setTimeout(No,0))},xo=function(us,ms){Do=setTimeout(us,ms)},bo=function(){clearTimeout(Do)},va.unstable_shouldYield=function(){return!1},wo=va.unstable_forceFrameRate=function(){}}else{var Oo=window.setTimeout,Lo=window.clearTimeout;if(typeof console!="undefined"){var Co=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Co!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Ro=!1,jo=null,zo=-1,Io=5,Po=0;va.unstable_shouldYield=function(){return va.unstable_now()>=Po},wo=function(){},va.unstable_forceFrameRate=function(us){0>us||125<us?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Io=0<us?Math.floor(1e3/us):5};var Bo=new MessageChannel,ko=Bo.port2;Bo.port1.onmessage=function(){if(jo!==null){var us=va.unstable_now();Po=us+Io;try{jo(!0,us)?ko.postMessage(null):(Ro=!1,jo=null)}catch(ms){throw ko.postMessage(null),ms}}else Ro=!1},_o=function(us){jo=us,Ro||(Ro=!0,ko.postMessage(null))},xo=function(us,ms){zo=Oo(function(){us(va.unstable_now())},ms)},bo=function(){Lo(zo),zo=-1}}function Uo(us,ms){var As=us.length;us.push(ms);e:for(;;){var Os=As-1>>>1,Es=us[Os];if(Es!==void 0&&0<Zo(Es,ms))us[Os]=ms,us[As]=Es,As=Os;else break e}}function Qo(us){return us=us[0],us===void 0?null:us}function qo(us){var ms=us[0];if(ms!==void 0){var As=us.pop();if(As!==ms){us[0]=As;e:for(var Os=0,Es=us.length;Os<Es;){var Ms=2*(Os+1)-1,$s=us[Ms],ks=Ms+1,zs=us[ks];if($s!==void 0&&0>Zo($s,As))zs!==void 0&&0>Zo(zs,$s)?(us[Os]=zs,us[ks]=As,Os=ks):(us[Os]=$s,us[Ms]=As,Os=Ms);else if(zs!==void 0&&0>Zo(zs,As))us[Os]=zs,us[ks]=As,Os=ks;else break e}}return ms}return null}function Zo(us,ms){var As=us.sortIndex-ms.sortIndex;return As!==0?As:us.id-ms.id}var Xo=[],Fo=[],Go=1,Vo=null,Wo=3,Yo=!1,Ko=!1,ts=!1;function Jo(us){for(var ms=Qo(Fo);ms!==null;){if(ms.callback===null)qo(Fo);else if(ms.startTime<=us)qo(Fo),ms.sortIndex=ms.expirationTime,Uo(Xo,ms);else break;ms=Qo(Fo)}}function rs(us){if(ts=!1,Jo(us),!Ko)if(Qo(Xo)!==null)Ko=!0,_o(ls);else{var ms=Qo(Fo);ms!==null&&xo(rs,ms.startTime-us)}}function ls(us,ms){Ko=!1,ts&&(ts=!1,bo()),Yo=!0;var As=Wo;try{for(Jo(ms),Vo=Qo(Xo);Vo!==null&&(!(Vo.expirationTime>ms)||us&&!va.unstable_shouldYield());){var Os=Vo.callback;if(typeof Os=="function"){Vo.callback=null,Wo=Vo.priorityLevel;var Es=Os(Vo.expirationTime<=ms);ms=va.unstable_now(),typeof Es=="function"?Vo.callback=Es:Vo===Qo(Xo)&&qo(Xo),Jo(ms)}else qo(Xo);Vo=Qo(Xo)}if(Vo!==null)var Ms=!0;else{var $s=Qo(Fo);$s!==null&&xo(rs,$s.startTime-ms),Ms=!1}return Ms}finally{Vo=null,Wo=As,Yo=!1}}var ss=wo;va.unstable_IdlePriority=5,va.unstable_ImmediatePriority=1,va.unstable_LowPriority=4,va.unstable_NormalPriority=3,va.unstable_Profiling=null,va.unstable_UserBlockingPriority=2,va.unstable_cancelCallback=function(us){us.callback=null},va.unstable_continueExecution=function(){Ko||Yo||(Ko=!0,_o(ls))},va.unstable_getCurrentPriorityLevel=function(){return Wo},va.unstable_getFirstCallbackNode=function(){return Qo(Xo)},va.unstable_next=function(us){switch(Wo){case 1:case 2:case 3:var ms=3;break;default:ms=Wo}var As=Wo;Wo=ms;try{return us()}finally{Wo=As}},va.unstable_pauseExecution=function(){},va.unstable_requestPaint=ss,va.unstable_runWithPriority=function(us,ms){switch(us){case 1:case 2:case 3:case 4:case 5:break;default:us=3}var As=Wo;Wo=us;try{return ms()}finally{Wo=As}},va.unstable_scheduleCallback=function(us,ms,As){var Os=va.unstable_now();switch(typeof As=="object"&&As!==null?(As=As.delay,As=typeof As=="number"&&0<As?Os+As:Os):As=Os,us){case 1:var Es=-1;break;case 2:Es=250;break;case 5:Es=1073741823;break;case 4:Es=1e4;break;default:Es=5e3}return Es=As+Es,us={id:Go++,callback:ms,priorityLevel:us,startTime:As,expirationTime:Es,sortIndex:-1},As>Os?(us.sortIndex=As,Uo(Fo,us),Qo(Xo)===null&&us===Qo(Fo)&&(ts?bo():ts=!0,xo(rs,As-Os))):(us.sortIndex=Es,Uo(Xo,us),Ko||Yo||(Ko=!0,_o(ls))),us},va.unstable_wrapCallback=function(us){var ms=Wo;return function(){var As=Wo;Wo=ms;try{return us.apply(this,arguments)}finally{Wo=As}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=react$2.exports,m$3=objectAssign,r$4=scheduler.exports;function y$3(va){for(var _o="https://reactjs.org/docs/error-decoder.html?invariant="+va,xo=1;xo<arguments.length;xo++)_o+="&args[]="+encodeURIComponent(arguments[xo]);return"Minified React error #"+va+"; visit "+_o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$1)throw Error(y$3(227));var ba$1=new Set,ca$1={};function da$1(va,_o){ea$1(va,_o),ea$1(va+"Capture",_o)}function ea$1(va,_o){for(ca$1[va]=_o,va=0;va<_o.length;va++)ba$1.add(_o[va])}var fa$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ha$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia$1=Object.prototype.hasOwnProperty,ja={},ka={};function la(va){return ia$1.call(ka,va)?!0:ia$1.call(ja,va)?!1:ha$1.test(va)?ka[va]=!0:(ja[va]=!0,!1)}function ma(va,_o,xo,bo){if(xo!==null&&xo.type===0)return!1;switch(typeof _o){case"function":case"symbol":return!0;case"boolean":return bo?!1:xo!==null?!xo.acceptsBooleans:(va=va.toLowerCase().slice(0,5),va!=="data-"&&va!=="aria-");default:return!1}}function na(va,_o,xo,bo){if(_o===null||typeof _o=="undefined"||ma(va,_o,xo,bo))return!0;if(bo)return!1;if(xo!==null)switch(xo.type){case 3:return!_o;case 4:return _o===!1;case 5:return isNaN(_o);case 6:return isNaN(_o)||1>_o}return!1}function B$2(va,_o,xo,bo,wo,Eo,To){this.acceptsBooleans=_o===2||_o===3||_o===4,this.attributeName=bo,this.attributeNamespace=wo,this.mustUseProperty=xo,this.propertyName=va,this.type=_o,this.sanitizeURL=Eo,this.removeEmptyString=To}var D$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(va){D$2[va]=new B$2(va,0,!1,va,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(va){var _o=va[0];D$2[_o]=new B$2(_o,1,!1,va[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(va){D$2[va]=new B$2(va,2,!1,va.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(va){D$2[va]=new B$2(va,2,!1,va,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(va){D$2[va]=new B$2(va,3,!1,va.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(va){D$2[va]=new B$2(va,3,!0,va,null,!1,!1)});["capture","download"].forEach(function(va){D$2[va]=new B$2(va,4,!1,va,null,!1,!1)});["cols","rows","size","span"].forEach(function(va){D$2[va]=new B$2(va,6,!1,va,null,!1,!1)});["rowSpan","start"].forEach(function(va){D$2[va]=new B$2(va,5,!1,va.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(va){return va[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(va){var _o=va.replace(oa,pa);D$2[_o]=new B$2(_o,1,!1,va,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(va){var _o=va.replace(oa,pa);D$2[_o]=new B$2(_o,1,!1,va,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(va){var _o=va.replace(oa,pa);D$2[_o]=new B$2(_o,1,!1,va,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(va){D$2[va]=new B$2(va,1,!1,va.toLowerCase(),null,!1,!1)});D$2.xlinkHref=new B$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(va){D$2[va]=new B$2(va,1,!1,va.toLowerCase(),null,!0,!0)});function qa(va,_o,xo,bo){var wo=D$2.hasOwnProperty(_o)?D$2[_o]:null,Eo=wo!==null?wo.type===0:bo?!1:!(!(2<_o.length)||_o[0]!=="o"&&_o[0]!=="O"||_o[1]!=="n"&&_o[1]!=="N");Eo||(na(_o,xo,wo,bo)&&(xo=null),bo||wo===null?la(_o)&&(xo===null?va.removeAttribute(_o):va.setAttribute(_o,""+xo)):wo.mustUseProperty?va[wo.propertyName]=xo===null?wo.type===3?!1:"":xo:(_o=wo.attributeName,bo=wo.attributeNamespace,xo===null?va.removeAttribute(_o):(wo=wo.type,xo=wo===3||wo===4&&xo===!0?"":""+xo,bo?va.setAttributeNS(bo,_o,xo):va.setAttribute(_o,xo))))}var ra=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E$3=Symbol.for;sa=E$3("react.element"),ta=E$3("react.portal"),ua=E$3("react.fragment"),wa=E$3("react.strict_mode"),xa=E$3("react.profiler"),ya=E$3("react.provider"),za=E$3("react.context"),Aa=E$3("react.forward_ref"),Ba=E$3("react.suspense"),Ca=E$3("react.suspense_list"),Da=E$3("react.memo"),Ea=E$3("react.lazy"),Fa=E$3("react.block"),E$3("react.scope"),Ga=E$3("react.opaque.id"),Ha=E$3("react.debug_trace_mode"),Ia=E$3("react.offscreen"),Ja=E$3("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(va){return va===null||typeof va!="object"?null:(va=Ka&&va[Ka]||va["@@iterator"],typeof va=="function"?va:null)}var Ma;function Na(va){if(Ma===void 0)try{throw Error()}catch(xo){var _o=xo.stack.trim().match(/\n( *(at )?)/);Ma=_o&&_o[1]||""}return`
`+Ma+va}var Oa=!1;function Pa(va,_o){if(!va||Oa)return"";Oa=!0;var xo=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_o)if(_o=function(){throw Error()},Object.defineProperty(_o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_o,[])}catch($o){var bo=$o}Reflect.construct(va,[],_o)}else{try{_o.call()}catch($o){bo=$o}va.call(_o.prototype)}else{try{throw Error()}catch($o){bo=$o}va()}}catch($o){if($o&&bo&&typeof $o.stack=="string"){for(var wo=$o.stack.split(`
`),Eo=bo.stack.split(`
`),To=wo.length-1,So=Eo.length-1;1<=To&&0<=So&&wo[To]!==Eo[So];)So--;for(;1<=To&&0<=So;To--,So--)if(wo[To]!==Eo[So]){if(To!==1||So!==1)do if(To--,So--,0>So||wo[To]!==Eo[So])return`
`+wo[To].replace(" at new "," at ");while(1<=To&&0<=So);break}}}finally{Oa=!1,Error.prepareStackTrace=xo}return(va=va?va.displayName||va.name:"")?Na(va):""}function Qa(va){switch(va.tag){case 5:return Na(va.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return va=Pa(va.type,!1),va;case 11:return va=Pa(va.type.render,!1),va;case 22:return va=Pa(va.type._render,!1),va;case 1:return va=Pa(va.type,!0),va;default:return""}}function Ra(va){if(va==null)return null;if(typeof va=="function")return va.displayName||va.name||null;if(typeof va=="string")return va;switch(va){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof va=="object")switch(va.$$typeof){case za:return(va.displayName||"Context")+".Consumer";case ya:return(va._context.displayName||"Context")+".Provider";case Aa:var _o=va.render;return _o=_o.displayName||_o.name||"",va.displayName||(_o!==""?"ForwardRef("+_o+")":"ForwardRef");case Da:return Ra(va.type);case Fa:return Ra(va._render);case Ea:_o=va._payload,va=va._init;try{return Ra(va(_o))}catch{}}return null}function Sa(va){switch(typeof va){case"boolean":case"number":case"object":case"string":case"undefined":return va;default:return""}}function Ta(va){var _o=va.type;return(va=va.nodeName)&&va.toLowerCase()==="input"&&(_o==="checkbox"||_o==="radio")}function Ua(va){var _o=Ta(va)?"checked":"value",xo=Object.getOwnPropertyDescriptor(va.constructor.prototype,_o),bo=""+va[_o];if(!va.hasOwnProperty(_o)&&typeof xo!="undefined"&&typeof xo.get=="function"&&typeof xo.set=="function"){var wo=xo.get,Eo=xo.set;return Object.defineProperty(va,_o,{configurable:!0,get:function(){return wo.call(this)},set:function(To){bo=""+To,Eo.call(this,To)}}),Object.defineProperty(va,_o,{enumerable:xo.enumerable}),{getValue:function(){return bo},setValue:function(To){bo=""+To},stopTracking:function(){va._valueTracker=null,delete va[_o]}}}}function Va(va){va._valueTracker||(va._valueTracker=Ua(va))}function Wa(va){if(!va)return!1;var _o=va._valueTracker;if(!_o)return!0;var xo=_o.getValue(),bo="";return va&&(bo=Ta(va)?va.checked?"true":"false":va.value),va=bo,va!==xo?(_o.setValue(va),!0):!1}function Xa(va){if(va=va||(typeof document!="undefined"?document:void 0),typeof va=="undefined")return null;try{return va.activeElement||va.body}catch{return va.body}}function Ya(va,_o){var xo=_o.checked;return m$3({},_o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:xo!=null?xo:va._wrapperState.initialChecked})}function Za(va,_o){var xo=_o.defaultValue==null?"":_o.defaultValue,bo=_o.checked!=null?_o.checked:_o.defaultChecked;xo=Sa(_o.value!=null?_o.value:xo),va._wrapperState={initialChecked:bo,initialValue:xo,controlled:_o.type==="checkbox"||_o.type==="radio"?_o.checked!=null:_o.value!=null}}function $a(va,_o){_o=_o.checked,_o!=null&&qa(va,"checked",_o,!1)}function ab(va,_o){$a(va,_o);var xo=Sa(_o.value),bo=_o.type;if(xo!=null)bo==="number"?(xo===0&&va.value===""||va.value!=xo)&&(va.value=""+xo):va.value!==""+xo&&(va.value=""+xo);else if(bo==="submit"||bo==="reset"){va.removeAttribute("value");return}_o.hasOwnProperty("value")?bb(va,_o.type,xo):_o.hasOwnProperty("defaultValue")&&bb(va,_o.type,Sa(_o.defaultValue)),_o.checked==null&&_o.defaultChecked!=null&&(va.defaultChecked=!!_o.defaultChecked)}function cb(va,_o,xo){if(_o.hasOwnProperty("value")||_o.hasOwnProperty("defaultValue")){var bo=_o.type;if(!(bo!=="submit"&&bo!=="reset"||_o.value!==void 0&&_o.value!==null))return;_o=""+va._wrapperState.initialValue,xo||_o===va.value||(va.value=_o),va.defaultValue=_o}xo=va.name,xo!==""&&(va.name=""),va.defaultChecked=!!va._wrapperState.initialChecked,xo!==""&&(va.name=xo)}function bb(va,_o,xo){(_o!=="number"||Xa(va.ownerDocument)!==va)&&(xo==null?va.defaultValue=""+va._wrapperState.initialValue:va.defaultValue!==""+xo&&(va.defaultValue=""+xo))}function db(va){var _o="";return aa$1.Children.forEach(va,function(xo){xo!=null&&(_o+=xo)}),_o}function eb(va,_o){return va=m$3({children:void 0},_o),(_o=db(_o.children))&&(va.children=_o),va}function fb(va,_o,xo,bo){if(va=va.options,_o){_o={};for(var wo=0;wo<xo.length;wo++)_o["$"+xo[wo]]=!0;for(xo=0;xo<va.length;xo++)wo=_o.hasOwnProperty("$"+va[xo].value),va[xo].selected!==wo&&(va[xo].selected=wo),wo&&bo&&(va[xo].defaultSelected=!0)}else{for(xo=""+Sa(xo),_o=null,wo=0;wo<va.length;wo++){if(va[wo].value===xo){va[wo].selected=!0,bo&&(va[wo].defaultSelected=!0);return}_o!==null||va[wo].disabled||(_o=va[wo])}_o!==null&&(_o.selected=!0)}}function gb(va,_o){if(_o.dangerouslySetInnerHTML!=null)throw Error(y$3(91));return m$3({},_o,{value:void 0,defaultValue:void 0,children:""+va._wrapperState.initialValue})}function hb(va,_o){var xo=_o.value;if(xo==null){if(xo=_o.children,_o=_o.defaultValue,xo!=null){if(_o!=null)throw Error(y$3(92));if(Array.isArray(xo)){if(!(1>=xo.length))throw Error(y$3(93));xo=xo[0]}_o=xo}_o==null&&(_o=""),xo=_o}va._wrapperState={initialValue:Sa(xo)}}function ib(va,_o){var xo=Sa(_o.value),bo=Sa(_o.defaultValue);xo!=null&&(xo=""+xo,xo!==va.value&&(va.value=xo),_o.defaultValue==null&&va.defaultValue!==xo&&(va.defaultValue=xo)),bo!=null&&(va.defaultValue=""+bo)}function jb(va){var _o=va.textContent;_o===va._wrapperState.initialValue&&_o!==""&&_o!==null&&(va.value=_o)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(va){switch(va){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(va,_o){return va==null||va==="http://www.w3.org/1999/xhtml"?lb(_o):va==="http://www.w3.org/2000/svg"&&_o==="foreignObject"?"http://www.w3.org/1999/xhtml":va}var nb,ob=function(va){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(_o,xo,bo,wo){MSApp.execUnsafeLocalFunction(function(){return va(_o,xo,bo,wo)})}:va}(function(va,_o){if(va.namespaceURI!==kb.svg||"innerHTML"in va)va.innerHTML=_o;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+_o.valueOf().toString()+"</svg>",_o=nb.firstChild;va.firstChild;)va.removeChild(va.firstChild);for(;_o.firstChild;)va.appendChild(_o.firstChild)}});function pb(va,_o){if(_o){var xo=va.firstChild;if(xo&&xo===va.lastChild&&xo.nodeType===3){xo.nodeValue=_o;return}}va.textContent=_o}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(va){rb.forEach(function(_o){_o=_o+va.charAt(0).toUpperCase()+va.substring(1),qb[_o]=qb[va]})});function sb(va,_o,xo){return _o==null||typeof _o=="boolean"||_o===""?"":xo||typeof _o!="number"||_o===0||qb.hasOwnProperty(va)&&qb[va]?(""+_o).trim():_o+"px"}function tb(va,_o){va=va.style;for(var xo in _o)if(_o.hasOwnProperty(xo)){var bo=xo.indexOf("--")===0,wo=sb(xo,_o[xo],bo);xo==="float"&&(xo="cssFloat"),bo?va.setProperty(xo,wo):va[xo]=wo}}var ub=m$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(va,_o){if(_o){if(ub[va]&&(_o.children!=null||_o.dangerouslySetInnerHTML!=null))throw Error(y$3(137,va));if(_o.dangerouslySetInnerHTML!=null){if(_o.children!=null)throw Error(y$3(60));if(!(typeof _o.dangerouslySetInnerHTML=="object"&&"__html"in _o.dangerouslySetInnerHTML))throw Error(y$3(61))}if(_o.style!=null&&typeof _o.style!="object")throw Error(y$3(62))}}function wb(va,_o){if(va.indexOf("-")===-1)return typeof _o.is=="string";switch(va){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(va){return va=va.target||va.srcElement||window,va.correspondingUseElement&&(va=va.correspondingUseElement),va.nodeType===3?va.parentNode:va}var yb=null,zb=null,Ab=null;function Bb(va){if(va=Cb(va)){if(typeof yb!="function")throw Error(y$3(280));var _o=va.stateNode;_o&&(_o=Db(_o),yb(va.stateNode,va.type,_o))}}function Eb(va){zb?Ab?Ab.push(va):Ab=[va]:zb=va}function Fb(){if(zb){var va=zb,_o=Ab;if(Ab=zb=null,Bb(va),_o)for(va=0;va<_o.length;va++)Bb(_o[va])}}function Gb(va,_o){return va(_o)}function Hb(va,_o,xo,bo,wo){return va(_o,xo,bo,wo)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(va,_o,xo){if(Lb)return va(_o,xo);Lb=!0;try{return Jb(va,_o,xo)}finally{Lb=!1,Mb()}}function Ob(va,_o){var xo=va.stateNode;if(xo===null)return null;var bo=Db(xo);if(bo===null)return null;xo=bo[_o];e:switch(_o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(bo=!bo.disabled)||(va=va.type,bo=!(va==="button"||va==="input"||va==="select"||va==="textarea")),va=!bo;break e;default:va=!1}if(va)return null;if(xo&&typeof xo!="function")throw Error(y$3(231,_o,typeof xo));return xo}var Pb=!1;if(fa$1)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(va,_o,xo,bo,wo,Eo,To,So,$o){var Do=Array.prototype.slice.call(arguments,3);try{_o.apply(xo,Do)}catch(No){this.onError(No)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(va){Sb=!0,Tb=va}};function Xb(va,_o,xo,bo,wo,Eo,To,So,$o){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(va,_o,xo,bo,wo,Eo,To,So,$o){if(Xb.apply(this,arguments),Sb){if(Sb){var Do=Tb;Sb=!1,Tb=null}else throw Error(y$3(198));Ub||(Ub=!0,Vb=Do)}}function Zb(va){var _o=va,xo=va;if(va.alternate)for(;_o.return;)_o=_o.return;else{va=_o;do _o=va,(_o.flags&1026)!=0&&(xo=_o.return),va=_o.return;while(va)}return _o.tag===3?xo:null}function $b(va){if(va.tag===13){var _o=va.memoizedState;if(_o===null&&(va=va.alternate,va!==null&&(_o=va.memoizedState)),_o!==null)return _o.dehydrated}return null}function ac(va){if(Zb(va)!==va)throw Error(y$3(188))}function bc(va){var _o=va.alternate;if(!_o){if(_o=Zb(va),_o===null)throw Error(y$3(188));return _o!==va?null:va}for(var xo=va,bo=_o;;){var wo=xo.return;if(wo===null)break;var Eo=wo.alternate;if(Eo===null){if(bo=wo.return,bo!==null){xo=bo;continue}break}if(wo.child===Eo.child){for(Eo=wo.child;Eo;){if(Eo===xo)return ac(wo),va;if(Eo===bo)return ac(wo),_o;Eo=Eo.sibling}throw Error(y$3(188))}if(xo.return!==bo.return)xo=wo,bo=Eo;else{for(var To=!1,So=wo.child;So;){if(So===xo){To=!0,xo=wo,bo=Eo;break}if(So===bo){To=!0,bo=wo,xo=Eo;break}So=So.sibling}if(!To){for(So=Eo.child;So;){if(So===xo){To=!0,xo=Eo,bo=wo;break}if(So===bo){To=!0,bo=Eo,xo=wo;break}So=So.sibling}if(!To)throw Error(y$3(189))}}if(xo.alternate!==bo)throw Error(y$3(190))}if(xo.tag!==3)throw Error(y$3(188));return xo.stateNode.current===xo?va:_o}function cc(va){if(va=bc(va),!va)return null;for(var _o=va;;){if(_o.tag===5||_o.tag===6)return _o;if(_o.child)_o.child.return=_o,_o=_o.child;else{if(_o===va)break;for(;!_o.sibling;){if(!_o.return||_o.return===va)return null;_o=_o.return}_o.sibling.return=_o.return,_o=_o.sibling}}return null}function dc(va,_o){for(var xo=va.alternate;_o!==null;){if(_o===va||_o===xo)return!0;_o=_o.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(va,_o,xo,bo,wo){return{blockedOn:va,domEventName:_o,eventSystemFlags:xo|16,nativeEvent:wo,targetContainers:[bo]}}function sc(va,_o){switch(va){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(_o.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(_o.pointerId)}}function tc(va,_o,xo,bo,wo,Eo){return va===null||va.nativeEvent!==Eo?(va=rc(_o,xo,bo,wo,Eo),_o!==null&&(_o=Cb(_o),_o!==null&&fc(_o)),va):(va.eventSystemFlags|=bo,_o=va.targetContainers,wo!==null&&_o.indexOf(wo)===-1&&_o.push(wo),va)}function uc(va,_o,xo,bo,wo){switch(_o){case"focusin":return kc=tc(kc,va,_o,xo,bo,wo),!0;case"dragenter":return lc=tc(lc,va,_o,xo,bo,wo),!0;case"mouseover":return mc=tc(mc,va,_o,xo,bo,wo),!0;case"pointerover":var Eo=wo.pointerId;return nc.set(Eo,tc(nc.get(Eo)||null,va,_o,xo,bo,wo)),!0;case"gotpointercapture":return Eo=wo.pointerId,oc.set(Eo,tc(oc.get(Eo)||null,va,_o,xo,bo,wo)),!0}return!1}function vc(va){var _o=wc(va.target);if(_o!==null){var xo=Zb(_o);if(xo!==null){if(_o=xo.tag,_o===13){if(_o=$b(xo),_o!==null){va.blockedOn=_o,hc(va.lanePriority,function(){r$4.unstable_runWithPriority(va.priority,function(){gc(xo)})});return}}else if(_o===3&&xo.stateNode.hydrate){va.blockedOn=xo.tag===3?xo.stateNode.containerInfo:null;return}}}va.blockedOn=null}function xc(va){if(va.blockedOn!==null)return!1;for(var _o=va.targetContainers;0<_o.length;){var xo=yc(va.domEventName,va.eventSystemFlags,_o[0],va.nativeEvent);if(xo!==null)return _o=Cb(xo),_o!==null&&fc(_o),va.blockedOn=xo,!1;_o.shift()}return!0}function zc(va,_o,xo){xc(va)&&xo.delete(_o)}function Ac(){for(ic=!1;0<jc.length;){var va=jc[0];if(va.blockedOn!==null){va=Cb(va.blockedOn),va!==null&&ec(va);break}for(var _o=va.targetContainers;0<_o.length;){var xo=yc(va.domEventName,va.eventSystemFlags,_o[0],va.nativeEvent);if(xo!==null){va.blockedOn=xo;break}_o.shift()}va.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(va,_o){va.blockedOn===_o&&(va.blockedOn=null,ic||(ic=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Ac)))}function Cc(va){function _o(wo){return Bc(wo,va)}if(0<jc.length){Bc(jc[0],va);for(var xo=1;xo<jc.length;xo++){var bo=jc[xo];bo.blockedOn===va&&(bo.blockedOn=null)}}for(kc!==null&&Bc(kc,va),lc!==null&&Bc(lc,va),mc!==null&&Bc(mc,va),nc.forEach(_o),oc.forEach(_o),xo=0;xo<pc.length;xo++)bo=pc[xo],bo.blockedOn===va&&(bo.blockedOn=null);for(;0<pc.length&&(xo=pc[0],xo.blockedOn===null);)vc(xo),xo.blockedOn===null&&pc.shift()}function Dc(va,_o){var xo={};return xo[va.toLowerCase()]=_o.toLowerCase(),xo["Webkit"+va]="webkit"+_o,xo["Moz"+va]="moz"+_o,xo}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa$1&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(va){if(Fc[va])return Fc[va];if(!Ec[va])return va;var _o=Ec[va],xo;for(xo in _o)if(_o.hasOwnProperty(xo)&&xo in Gc)return Fc[va]=_o[xo];return va}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(va,_o){for(var xo=0;xo<va.length;xo+=2){var bo=va[xo],wo=va[xo+1];wo="on"+(wo[0].toUpperCase()+wo.slice(1)),Nc.set(bo,_o),Mc.set(bo,wo),da$1(wo,[bo])}}var Qc=r$4.unstable_now;Qc();var F$2=8;function Rc(va){if((1&va)!=0)return F$2=15,1;if((2&va)!=0)return F$2=14,2;if((4&va)!=0)return F$2=13,4;var _o=24&va;return _o!==0?(F$2=12,_o):(va&32)!=0?(F$2=11,32):(_o=192&va,_o!==0?(F$2=10,_o):(va&256)!=0?(F$2=9,256):(_o=3584&va,_o!==0?(F$2=8,_o):(va&4096)!=0?(F$2=7,4096):(_o=4186112&va,_o!==0?(F$2=6,_o):(_o=62914560&va,_o!==0?(F$2=5,_o):va&67108864?(F$2=4,67108864):(va&134217728)!=0?(F$2=3,134217728):(_o=805306368&va,_o!==0?(F$2=2,_o):(1073741824&va)!=0?(F$2=1,1073741824):(F$2=8,va))))))}function Sc(va){switch(va){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(va){switch(va){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$3(358,va))}}function Uc(va,_o){var xo=va.pendingLanes;if(xo===0)return F$2=0;var bo=0,wo=0,Eo=va.expiredLanes,To=va.suspendedLanes,So=va.pingedLanes;if(Eo!==0)bo=Eo,wo=F$2=15;else if(Eo=xo&134217727,Eo!==0){var $o=Eo&~To;$o!==0?(bo=Rc($o),wo=F$2):(So&=Eo,So!==0&&(bo=Rc(So),wo=F$2))}else Eo=xo&~To,Eo!==0?(bo=Rc(Eo),wo=F$2):So!==0&&(bo=Rc(So),wo=F$2);if(bo===0)return 0;if(bo=31-Vc(bo),bo=xo&((0>bo?0:1<<bo)<<1)-1,_o!==0&&_o!==bo&&(_o&To)==0){if(Rc(_o),wo<=F$2)return _o;F$2=wo}if(_o=va.entangledLanes,_o!==0)for(va=va.entanglements,_o&=bo;0<_o;)xo=31-Vc(_o),wo=1<<xo,bo|=va[xo],_o&=~wo;return bo}function Wc(va){return va=va.pendingLanes&-1073741825,va!==0?va:va&1073741824?1073741824:0}function Xc(va,_o){switch(va){case 15:return 1;case 14:return 2;case 12:return va=Yc(24&~_o),va===0?Xc(10,_o):va;case 10:return va=Yc(192&~_o),va===0?Xc(8,_o):va;case 8:return va=Yc(3584&~_o),va===0&&(va=Yc(4186112&~_o),va===0&&(va=512)),va;case 2:return _o=Yc(805306368&~_o),_o===0&&(_o=268435456),_o}throw Error(y$3(358,va))}function Yc(va){return va&-va}function Zc(va){for(var _o=[],xo=0;31>xo;xo++)_o.push(va);return _o}function $c(va,_o,xo){va.pendingLanes|=_o;var bo=_o-1;va.suspendedLanes&=bo,va.pingedLanes&=bo,va=va.eventTimes,_o=31-Vc(_o),va[_o]=xo}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(va){return va===0?32:31-(bd(va)/cd|0)|0}var dd=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd=!0;function gd(va,_o,xo,bo){Kb||Ib();var wo=hd,Eo=Kb;Kb=!0;try{Hb(wo,va,_o,xo,bo)}finally{(Kb=Eo)||Mb()}}function id(va,_o,xo,bo){ed(dd,hd.bind(null,va,_o,xo,bo))}function hd(va,_o,xo,bo){if(fd){var wo;if((wo=(_o&4)==0)&&0<jc.length&&-1<qc.indexOf(va))va=rc(null,va,_o,xo,bo),jc.push(va);else{var Eo=yc(va,_o,xo,bo);if(Eo===null)wo&&sc(va,bo);else{if(wo){if(-1<qc.indexOf(va)){va=rc(Eo,va,_o,xo,bo),jc.push(va);return}if(uc(Eo,va,_o,xo,bo))return;sc(va,bo)}jd(va,_o,bo,null,xo)}}}}function yc(va,_o,xo,bo){var wo=xb(bo);if(wo=wc(wo),wo!==null){var Eo=Zb(wo);if(Eo===null)wo=null;else{var To=Eo.tag;if(To===13){if(wo=$b(Eo),wo!==null)return wo;wo=null}else if(To===3){if(Eo.stateNode.hydrate)return Eo.tag===3?Eo.stateNode.containerInfo:null;wo=null}else Eo!==wo&&(wo=null)}}return jd(va,_o,bo,wo,xo),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var va,_o=ld,xo=_o.length,bo,wo="value"in kd?kd.value:kd.textContent,Eo=wo.length;for(va=0;va<xo&&_o[va]===wo[va];va++);var To=xo-va;for(bo=1;bo<=To&&_o[xo-bo]===wo[Eo-bo];bo++);return md=wo.slice(va,1<bo?1-bo:void 0)}function od(va){var _o=va.keyCode;return"charCode"in va?(va=va.charCode,va===0&&_o===13&&(va=13)):va=_o,va===10&&(va=13),32<=va||va===13?va:0}function pd(){return!0}function qd(){return!1}function rd(va){function _o(xo,bo,wo,Eo,To){this._reactName=xo,this._targetInst=wo,this.type=bo,this.nativeEvent=Eo,this.target=To,this.currentTarget=null;for(var So in va)va.hasOwnProperty(So)&&(xo=va[So],this[So]=xo?xo(Eo):Eo[So]);return this.isDefaultPrevented=(Eo.defaultPrevented!=null?Eo.defaultPrevented:Eo.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$3(_o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var xo=this.nativeEvent;xo&&(xo.preventDefault?xo.preventDefault():typeof xo.returnValue!="unknown"&&(xo.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var xo=this.nativeEvent;xo&&(xo.stopPropagation?xo.stopPropagation():typeof xo.cancelBubble!="unknown"&&(xo.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(va){return va.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(va){return va.relatedTarget===void 0?va.fromElement===va.srcElement?va.toElement:va.fromElement:va.relatedTarget},movementX:function(va){return"movementX"in va?va.movementX:(va!==yd&&(yd&&va.type==="mousemove"?(wd=va.screenX-yd.screenX,xd=va.screenY-yd.screenY):xd=wd=0,yd=va),wd)},movementY:function(va){return"movementY"in va?va.movementY:xd}}),Bd=rd(Ad),Cd=m$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$3({},sd,{clipboardData:function(va){return"clipboardData"in va?va.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(va){var _o=this.nativeEvent;return _o.getModifierState?_o.getModifierState(va):(va=Od[va])?!!_o[va]:!1}function zd(){return Pd}var Qd=m$3({},ud,{key:function(va){if(va.key){var _o=Md[va.key]||va.key;if(_o!=="Unidentified")return _o}return va.type==="keypress"?(va=od(va),va===13?"Enter":String.fromCharCode(va)):va.type==="keydown"||va.type==="keyup"?Nd[va.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(va){return va.type==="keypress"?od(va):0},keyCode:function(va){return va.type==="keydown"||va.type==="keyup"?va.keyCode:0},which:function(va){return va.type==="keypress"?od(va):va.type==="keydown"||va.type==="keyup"?va.keyCode:0}}),Rd=rd(Qd),Sd=m$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$3({},Ad,{deltaX:function(va){return"deltaX"in va?va.deltaX:"wheelDeltaX"in va?-va.wheelDeltaX:0},deltaY:function(va){return"deltaY"in va?va.deltaY:"wheelDeltaY"in va?-va.wheelDeltaY:"wheelDelta"in va?-va.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=fa$1&&"CompositionEvent"in window,be$1=null;fa$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=fa$1&&"TextEvent"in window&&!be$1,de$1=fa$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(va,_o){switch(va){case"keyup":return $d.indexOf(_o.keyCode)!==-1;case"keydown":return _o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(va){return va=va.detail,typeof va=="object"&&"data"in va?va.data:null}var ie$1=!1;function je$1(va,_o){switch(va){case"compositionend":return he$1(_o);case"keypress":return _o.which!==32?null:(fe$1=!0,ee$1);case"textInput":return va=_o.data,va===ee$1&&fe$1?null:va;default:return null}}function ke$1(va,_o){if(ie$1)return va==="compositionend"||!ae$1&&ge$1(va,_o)?(va=nd(),md=ld=kd=null,ie$1=!1,va):null;switch(va){case"paste":return null;case"keypress":if(!(_o.ctrlKey||_o.altKey||_o.metaKey)||_o.ctrlKey&&_o.altKey){if(_o.char&&1<_o.char.length)return _o.char;if(_o.which)return String.fromCharCode(_o.which)}return null;case"compositionend":return de$1&&_o.locale!=="ko"?null:_o.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(va){var _o=va&&va.nodeName&&va.nodeName.toLowerCase();return _o==="input"?!!le$1[va.type]:_o==="textarea"}function ne$1(va,_o,xo,bo){Eb(bo),_o=oe$1(_o,"onChange"),0<_o.length&&(xo=new td("onChange","change",null,xo,bo),va.push({event:xo,listeners:_o}))}var pe$1=null,qe$1=null;function re$1(va){se$1(va,0)}function te$1(va){var _o=ue$1(va);if(Wa(_o))return va}function ve$1(va,_o){if(va==="change")return _o}var we$1=!1;if(fa$1){var xe$1;if(fa$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(va){if(va.propertyName==="value"&&te$1(qe$1)){var _o=[];if(ne$1(_o,qe$1,va,xb(va)),va=re$1,Kb)va(_o);else{Kb=!0;try{Gb(va,_o)}finally{Kb=!1,Mb()}}}}function Ce$1(va,_o,xo){va==="focusin"?(Ae$1(),pe$1=_o,qe$1=xo,pe$1.attachEvent("onpropertychange",Be$1)):va==="focusout"&&Ae$1()}function De$1(va){if(va==="selectionchange"||va==="keyup"||va==="keydown")return te$1(qe$1)}function Ee$1(va,_o){if(va==="click")return te$1(_o)}function Fe$1(va,_o){if(va==="input"||va==="change")return te$1(_o)}function Ge$1(va,_o){return va===_o&&(va!==0||1/va==1/_o)||va!==va&&_o!==_o}var He$1=typeof Object.is=="function"?Object.is:Ge$1,Ie$1=Object.prototype.hasOwnProperty;function Je$1(va,_o){if(He$1(va,_o))return!0;if(typeof va!="object"||va===null||typeof _o!="object"||_o===null)return!1;var xo=Object.keys(va),bo=Object.keys(_o);if(xo.length!==bo.length)return!1;for(bo=0;bo<xo.length;bo++)if(!Ie$1.call(_o,xo[bo])||!He$1(va[xo[bo]],_o[xo[bo]]))return!1;return!0}function Ke$1(va){for(;va&&va.firstChild;)va=va.firstChild;return va}function Le$1(va,_o){var xo=Ke$1(va);va=0;for(var bo;xo;){if(xo.nodeType===3){if(bo=va+xo.textContent.length,va<=_o&&bo>=_o)return{node:xo,offset:_o-va};va=bo}e:{for(;xo;){if(xo.nextSibling){xo=xo.nextSibling;break e}xo=xo.parentNode}xo=void 0}xo=Ke$1(xo)}}function Me$1(va,_o){return va&&_o?va===_o?!0:va&&va.nodeType===3?!1:_o&&_o.nodeType===3?Me$1(va,_o.parentNode):"contains"in va?va.contains(_o):va.compareDocumentPosition?!!(va.compareDocumentPosition(_o)&16):!1:!1}function Ne$1(){for(var va=window,_o=Xa();_o instanceof va.HTMLIFrameElement;){try{var xo=typeof _o.contentWindow.location.href=="string"}catch{xo=!1}if(xo)va=_o.contentWindow;else break;_o=Xa(va.document)}return _o}function Oe$1(va){var _o=va&&va.nodeName&&va.nodeName.toLowerCase();return _o&&(_o==="input"&&(va.type==="text"||va.type==="search"||va.type==="tel"||va.type==="url"||va.type==="password")||_o==="textarea"||va.contentEditable==="true")}var Pe$1=fa$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(va,_o,xo){var bo=xo.window===xo?xo.document:xo.nodeType===9?xo:xo.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(bo)||(bo=Qe$1,"selectionStart"in bo&&Oe$1(bo)?bo={start:bo.selectionStart,end:bo.selectionEnd}:(bo=(bo.ownerDocument&&bo.ownerDocument.defaultView||window).getSelection(),bo={anchorNode:bo.anchorNode,anchorOffset:bo.anchorOffset,focusNode:bo.focusNode,focusOffset:bo.focusOffset}),Se$1&&Je$1(Se$1,bo)||(Se$1=bo,bo=oe$1(Re$1,"onSelect"),0<bo.length&&(_o=new td("onSelect","select",null,_o,xo),va.push({event:_o,listeners:bo}),_o.target=Qe$1)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea$1("onMouseEnter",["mouseout","mouseover"]);ea$1("onMouseLeave",["mouseout","mouseover"]);ea$1("onPointerEnter",["pointerout","pointerover"]);ea$1("onPointerLeave",["pointerout","pointerover"]);da$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);da$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$1));function Ze$1(va,_o,xo){var bo=va.type||"unknown-event";va.currentTarget=xo,Yb(bo,_o,void 0,va),va.currentTarget=null}function se$1(va,_o){_o=(_o&4)!=0;for(var xo=0;xo<va.length;xo++){var bo=va[xo],wo=bo.event;bo=bo.listeners;e:{var Eo=void 0;if(_o)for(var To=bo.length-1;0<=To;To--){var So=bo[To],$o=So.instance,Do=So.currentTarget;if(So=So.listener,$o!==Eo&&wo.isPropagationStopped())break e;Ze$1(wo,So,Do),Eo=$o}else for(To=0;To<bo.length;To++){if(So=bo[To],$o=So.instance,Do=So.currentTarget,So=So.listener,$o!==Eo&&wo.isPropagationStopped())break e;Ze$1(wo,So,Do),Eo=$o}}}if(Ub)throw va=Vb,Ub=!1,Vb=null,va}function G$2(va,_o){var xo=$e$1(_o),bo=va+"__bubble";xo.has(bo)||(af(_o,va,2,!1),xo.add(bo))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(va){va[bf]||(va[bf]=!0,ba$1.forEach(function(_o){Ye$1.has(_o)||df(_o,!1,va,null),df(_o,!0,va,null)}))}function df(va,_o,xo,bo){var wo=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,Eo=xo;if(va==="selectionchange"&&xo.nodeType!==9&&(Eo=xo.ownerDocument),bo!==null&&!_o&&Ye$1.has(va)){if(va!=="scroll")return;wo|=2,Eo=bo}var To=$e$1(Eo),So=va+"__"+(_o?"capture":"bubble");To.has(So)||(_o&&(wo|=4),af(Eo,va,wo,_o),To.add(So))}function af(va,_o,xo,bo){var wo=Nc.get(_o);switch(wo===void 0?2:wo){case 0:wo=gd;break;case 1:wo=id;break;default:wo=hd}xo=wo.bind(null,_o,xo,va),wo=void 0,!Pb||_o!=="touchstart"&&_o!=="touchmove"&&_o!=="wheel"||(wo=!0),bo?wo!==void 0?va.addEventListener(_o,xo,{capture:!0,passive:wo}):va.addEventListener(_o,xo,!0):wo!==void 0?va.addEventListener(_o,xo,{passive:wo}):va.addEventListener(_o,xo,!1)}function jd(va,_o,xo,bo,wo){var Eo=bo;if((_o&1)==0&&(_o&2)==0&&bo!==null)e:for(;;){if(bo===null)return;var To=bo.tag;if(To===3||To===4){var So=bo.stateNode.containerInfo;if(So===wo||So.nodeType===8&&So.parentNode===wo)break;if(To===4)for(To=bo.return;To!==null;){var $o=To.tag;if(($o===3||$o===4)&&($o=To.stateNode.containerInfo,$o===wo||$o.nodeType===8&&$o.parentNode===wo))return;To=To.return}for(;So!==null;){if(To=wc(So),To===null)return;if($o=To.tag,$o===5||$o===6){bo=Eo=To;continue e}So=So.parentNode}}bo=bo.return}Nb(function(){var Do=Eo,No=xb(xo),Oo=[];e:{var Lo=Mc.get(va);if(Lo!==void 0){var Co=td,Ro=va;switch(va){case"keypress":if(od(xo)===0)break e;case"keydown":case"keyup":Co=Rd;break;case"focusin":Ro="focus",Co=Fd;break;case"focusout":Ro="blur",Co=Fd;break;case"beforeblur":case"afterblur":Co=Fd;break;case"click":if(xo.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Co=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Co=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Co=Vd;break;case Ic:case Jc:case Kc:Co=Hd;break;case Lc:Co=Xd;break;case"scroll":Co=vd;break;case"wheel":Co=Zd;break;case"copy":case"cut":case"paste":Co=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Co=Td}var jo=(_o&4)!=0,zo=!jo&&va==="scroll",Io=jo?Lo!==null?Lo+"Capture":null:Lo;jo=[];for(var Po=Do,Bo;Po!==null;){Bo=Po;var ko=Bo.stateNode;if(Bo.tag===5&&ko!==null&&(Bo=ko,Io!==null&&(ko=Ob(Po,Io),ko!=null&&jo.push(ef(Po,ko,Bo)))),zo)break;Po=Po.return}0<jo.length&&(Lo=new Co(Lo,Ro,null,xo,No),Oo.push({event:Lo,listeners:jo}))}}if((_o&7)==0){e:{if(Lo=va==="mouseover"||va==="pointerover",Co=va==="mouseout"||va==="pointerout",Lo&&(_o&16)==0&&(Ro=xo.relatedTarget||xo.fromElement)&&(wc(Ro)||Ro[ff]))break e;if((Co||Lo)&&(Lo=No.window===No?No:(Lo=No.ownerDocument)?Lo.defaultView||Lo.parentWindow:window,Co?(Ro=xo.relatedTarget||xo.toElement,Co=Do,Ro=Ro?wc(Ro):null,Ro!==null&&(zo=Zb(Ro),Ro!==zo||Ro.tag!==5&&Ro.tag!==6)&&(Ro=null)):(Co=null,Ro=Do),Co!==Ro)){if(jo=Bd,ko="onMouseLeave",Io="onMouseEnter",Po="mouse",(va==="pointerout"||va==="pointerover")&&(jo=Td,ko="onPointerLeave",Io="onPointerEnter",Po="pointer"),zo=Co==null?Lo:ue$1(Co),Bo=Ro==null?Lo:ue$1(Ro),Lo=new jo(ko,Po+"leave",Co,xo,No),Lo.target=zo,Lo.relatedTarget=Bo,ko=null,wc(No)===Do&&(jo=new jo(Io,Po+"enter",Ro,xo,No),jo.target=Bo,jo.relatedTarget=zo,ko=jo),zo=ko,Co&&Ro)t:{for(jo=Co,Io=Ro,Po=0,Bo=jo;Bo;Bo=gf(Bo))Po++;for(Bo=0,ko=Io;ko;ko=gf(ko))Bo++;for(;0<Po-Bo;)jo=gf(jo),Po--;for(;0<Bo-Po;)Io=gf(Io),Bo--;for(;Po--;){if(jo===Io||Io!==null&&jo===Io.alternate)break t;jo=gf(jo),Io=gf(Io)}jo=null}else jo=null;Co!==null&&hf(Oo,Lo,Co,jo,!1),Ro!==null&&zo!==null&&hf(Oo,zo,Ro,jo,!0)}}e:{if(Lo=Do?ue$1(Do):window,Co=Lo.nodeName&&Lo.nodeName.toLowerCase(),Co==="select"||Co==="input"&&Lo.type==="file")var Uo=ve$1;else if(me$1(Lo))if(we$1)Uo=Fe$1;else{Uo=De$1;var Qo=Ce$1}else(Co=Lo.nodeName)&&Co.toLowerCase()==="input"&&(Lo.type==="checkbox"||Lo.type==="radio")&&(Uo=Ee$1);if(Uo&&(Uo=Uo(va,Do))){ne$1(Oo,Uo,xo,No);break e}Qo&&Qo(va,Lo,Do),va==="focusout"&&(Qo=Lo._wrapperState)&&Qo.controlled&&Lo.type==="number"&&bb(Lo,"number",Lo.value)}switch(Qo=Do?ue$1(Do):window,va){case"focusin":(me$1(Qo)||Qo.contentEditable==="true")&&(Qe$1=Qo,Re$1=Do,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(Oo,xo,No);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(Oo,xo,No)}var qo;if(ae$1)e:{switch(va){case"compositionstart":var Zo="onCompositionStart";break e;case"compositionend":Zo="onCompositionEnd";break e;case"compositionupdate":Zo="onCompositionUpdate";break e}Zo=void 0}else ie$1?ge$1(va,xo)&&(Zo="onCompositionEnd"):va==="keydown"&&xo.keyCode===229&&(Zo="onCompositionStart");Zo&&(de$1&&xo.locale!=="ko"&&(ie$1||Zo!=="onCompositionStart"?Zo==="onCompositionEnd"&&ie$1&&(qo=nd()):(kd=No,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Qo=oe$1(Do,Zo),0<Qo.length&&(Zo=new Ld(Zo,va,null,xo,No),Oo.push({event:Zo,listeners:Qo}),qo?Zo.data=qo:(qo=he$1(xo),qo!==null&&(Zo.data=qo)))),(qo=ce$1?je$1(va,xo):ke$1(va,xo))&&(Do=oe$1(Do,"onBeforeInput"),0<Do.length&&(No=new Ld("onBeforeInput","beforeinput",null,xo,No),Oo.push({event:No,listeners:Do}),No.data=qo))}se$1(Oo,_o)})}function ef(va,_o,xo){return{instance:va,listener:_o,currentTarget:xo}}function oe$1(va,_o){for(var xo=_o+"Capture",bo=[];va!==null;){var wo=va,Eo=wo.stateNode;wo.tag===5&&Eo!==null&&(wo=Eo,Eo=Ob(va,xo),Eo!=null&&bo.unshift(ef(va,Eo,wo)),Eo=Ob(va,_o),Eo!=null&&bo.push(ef(va,Eo,wo))),va=va.return}return bo}function gf(va){if(va===null)return null;do va=va.return;while(va&&va.tag!==5);return va||null}function hf(va,_o,xo,bo,wo){for(var Eo=_o._reactName,To=[];xo!==null&&xo!==bo;){var So=xo,$o=So.alternate,Do=So.stateNode;if($o!==null&&$o===bo)break;So.tag===5&&Do!==null&&(So=Do,wo?($o=Ob(xo,Eo),$o!=null&&To.unshift(ef(xo,$o,So))):wo||($o=Ob(xo,Eo),$o!=null&&To.push(ef(xo,$o,So)))),xo=xo.return}To.length!==0&&va.push({event:_o,listeners:To})}function jf(){}var kf=null,lf=null;function mf(va,_o){switch(va){case"button":case"input":case"select":case"textarea":return!!_o.autoFocus}return!1}function nf(va,_o){return va==="textarea"||va==="option"||va==="noscript"||typeof _o.children=="string"||typeof _o.children=="number"||typeof _o.dangerouslySetInnerHTML=="object"&&_o.dangerouslySetInnerHTML!==null&&_o.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(va){va.nodeType===1?va.textContent="":va.nodeType===9&&(va=va.body,va!=null&&(va.textContent=""))}function rf(va){for(;va!=null;va=va.nextSibling){var _o=va.nodeType;if(_o===1||_o===3)break}return va}function sf(va){va=va.previousSibling;for(var _o=0;va;){if(va.nodeType===8){var xo=va.data;if(xo==="$"||xo==="$!"||xo==="$?"){if(_o===0)return va;_o--}else xo==="/$"&&_o++}va=va.previousSibling}return null}var tf=0;function uf(va){return{$$typeof:Ga,toString:va,valueOf:va}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(va){var _o=va[wf];if(_o)return _o;for(var xo=va.parentNode;xo;){if(_o=xo[ff]||xo[wf]){if(xo=_o.alternate,_o.child!==null||xo!==null&&xo.child!==null)for(va=sf(va);va!==null;){if(xo=va[wf])return xo;va=sf(va)}return _o}va=xo,xo=va.parentNode}return null}function Cb(va){return va=va[wf]||va[ff],!va||va.tag!==5&&va.tag!==6&&va.tag!==13&&va.tag!==3?null:va}function ue$1(va){if(va.tag===5||va.tag===6)return va.stateNode;throw Error(y$3(33))}function Db(va){return va[xf]||null}function $e$1(va){var _o=va[yf];return _o===void 0&&(_o=va[yf]=new Set),_o}var zf=[],Af=-1;function Bf(va){return{current:va}}function H$2(va){0>Af||(va.current=zf[Af],zf[Af]=null,Af--)}function I$2(va,_o){Af++,zf[Af]=va.current,va.current=_o}var Cf={},M$2=Bf(Cf),N$3=Bf(!1),Df=Cf;function Ef(va,_o){var xo=va.type.contextTypes;if(!xo)return Cf;var bo=va.stateNode;if(bo&&bo.__reactInternalMemoizedUnmaskedChildContext===_o)return bo.__reactInternalMemoizedMaskedChildContext;var wo={},Eo;for(Eo in xo)wo[Eo]=_o[Eo];return bo&&(va=va.stateNode,va.__reactInternalMemoizedUnmaskedChildContext=_o,va.__reactInternalMemoizedMaskedChildContext=wo),wo}function Ff(va){return va=va.childContextTypes,va!=null}function Gf(){H$2(N$3),H$2(M$2)}function Hf(va,_o,xo){if(M$2.current!==Cf)throw Error(y$3(168));I$2(M$2,_o),I$2(N$3,xo)}function If(va,_o,xo){var bo=va.stateNode;if(va=_o.childContextTypes,typeof bo.getChildContext!="function")return xo;bo=bo.getChildContext();for(var wo in bo)if(!(wo in va))throw Error(y$3(108,Ra(_o)||"Unknown",wo));return m$3({},xo,bo)}function Jf(va){return va=(va=va.stateNode)&&va.__reactInternalMemoizedMergedChildContext||Cf,Df=M$2.current,I$2(M$2,va),I$2(N$3,N$3.current),!0}function Kf(va,_o,xo){var bo=va.stateNode;if(!bo)throw Error(y$3(169));xo?(va=If(va,_o,Df),bo.__reactInternalMemoizedMergedChildContext=va,H$2(N$3),H$2(M$2),I$2(M$2,va)):H$2(N$3),I$2(N$3,xo)}var Lf=null,Mf=null,Nf=r$4.unstable_runWithPriority,Of=r$4.unstable_scheduleCallback,Pf=r$4.unstable_cancelCallback,Qf=r$4.unstable_shouldYield,Rf=r$4.unstable_requestPaint,Sf=r$4.unstable_now,Tf=r$4.unstable_getCurrentPriorityLevel,Uf=r$4.unstable_ImmediatePriority,Vf=r$4.unstable_UserBlockingPriority,Wf=r$4.unstable_NormalPriority,Xf=r$4.unstable_LowPriority,Yf=r$4.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O$3=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$3(332))}}function fg(va){switch(va){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$3(332))}}function gg(va,_o){return va=fg(va),Nf(va,_o)}function hg(va,_o,xo){return va=fg(va),Of(va,_o,xo)}function ig(){if(bg!==null){var va=bg;bg=null,Pf(va)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var va=0;try{var _o=ag;gg(99,function(){for(;va<_o.length;va++){var xo=_o[va];do xo=xo(!0);while(xo!==null)}}),ag=null}catch(xo){throw ag!==null&&(ag=ag.slice(va+1)),Of(Uf,ig),xo}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(va,_o){if(va&&va.defaultProps){_o=m$3({},_o),va=va.defaultProps;for(var xo in va)_o[xo]===void 0&&(_o[xo]=va[xo]);return _o}return _o}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(va){var _o=mg.current;H$2(mg),va.type._context._currentValue=_o}function sg(va,_o){for(;va!==null;){var xo=va.alternate;if((va.childLanes&_o)===_o){if(xo===null||(xo.childLanes&_o)===_o)break;xo.childLanes|=_o}else va.childLanes|=_o,xo!==null&&(xo.childLanes|=_o);va=va.return}}function tg(va,_o){ng=va,pg=og=null,va=va.dependencies,va!==null&&va.firstContext!==null&&((va.lanes&_o)!=0&&(ug=!0),va.firstContext=null)}function vg(va,_o){if(pg!==va&&_o!==!1&&_o!==0)if((typeof _o!="number"||_o===1073741823)&&(pg=va,_o=1073741823),_o={context:va,observedBits:_o,next:null},og===null){if(ng===null)throw Error(y$3(308));og=_o,ng.dependencies={lanes:0,firstContext:_o,responders:null}}else og=og.next=_o;return va._currentValue}var wg=!1;function xg(va){va.updateQueue={baseState:va.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(va,_o){va=va.updateQueue,_o.updateQueue===va&&(_o.updateQueue={baseState:va.baseState,firstBaseUpdate:va.firstBaseUpdate,lastBaseUpdate:va.lastBaseUpdate,shared:va.shared,effects:va.effects})}function zg(va,_o){return{eventTime:va,lane:_o,tag:0,payload:null,callback:null,next:null}}function Ag(va,_o){if(va=va.updateQueue,va!==null){va=va.shared;var xo=va.pending;xo===null?_o.next=_o:(_o.next=xo.next,xo.next=_o),va.pending=_o}}function Bg(va,_o){var xo=va.updateQueue,bo=va.alternate;if(bo!==null&&(bo=bo.updateQueue,xo===bo)){var wo=null,Eo=null;if(xo=xo.firstBaseUpdate,xo!==null){do{var To={eventTime:xo.eventTime,lane:xo.lane,tag:xo.tag,payload:xo.payload,callback:xo.callback,next:null};Eo===null?wo=Eo=To:Eo=Eo.next=To,xo=xo.next}while(xo!==null);Eo===null?wo=Eo=_o:Eo=Eo.next=_o}else wo=Eo=_o;xo={baseState:bo.baseState,firstBaseUpdate:wo,lastBaseUpdate:Eo,shared:bo.shared,effects:bo.effects},va.updateQueue=xo;return}va=xo.lastBaseUpdate,va===null?xo.firstBaseUpdate=_o:va.next=_o,xo.lastBaseUpdate=_o}function Cg(va,_o,xo,bo){var wo=va.updateQueue;wg=!1;var Eo=wo.firstBaseUpdate,To=wo.lastBaseUpdate,So=wo.shared.pending;if(So!==null){wo.shared.pending=null;var $o=So,Do=$o.next;$o.next=null,To===null?Eo=Do:To.next=Do,To=$o;var No=va.alternate;if(No!==null){No=No.updateQueue;var Oo=No.lastBaseUpdate;Oo!==To&&(Oo===null?No.firstBaseUpdate=Do:Oo.next=Do,No.lastBaseUpdate=$o)}}if(Eo!==null){Oo=wo.baseState,To=0,No=Do=$o=null;do{So=Eo.lane;var Lo=Eo.eventTime;if((bo&So)===So){No!==null&&(No=No.next={eventTime:Lo,lane:0,tag:Eo.tag,payload:Eo.payload,callback:Eo.callback,next:null});e:{var Co=va,Ro=Eo;switch(So=_o,Lo=xo,Ro.tag){case 1:if(Co=Ro.payload,typeof Co=="function"){Oo=Co.call(Lo,Oo,So);break e}Oo=Co;break e;case 3:Co.flags=Co.flags&-4097|64;case 0:if(Co=Ro.payload,So=typeof Co=="function"?Co.call(Lo,Oo,So):Co,So==null)break e;Oo=m$3({},Oo,So);break e;case 2:wg=!0}}Eo.callback!==null&&(va.flags|=32,So=wo.effects,So===null?wo.effects=[Eo]:So.push(Eo))}else Lo={eventTime:Lo,lane:So,tag:Eo.tag,payload:Eo.payload,callback:Eo.callback,next:null},No===null?(Do=No=Lo,$o=Oo):No=No.next=Lo,To|=So;if(Eo=Eo.next,Eo===null){if(So=wo.shared.pending,So===null)break;Eo=So.next,So.next=null,wo.lastBaseUpdate=So,wo.shared.pending=null}}while(1);No===null&&($o=Oo),wo.baseState=$o,wo.firstBaseUpdate=Do,wo.lastBaseUpdate=No,Dg|=To,va.lanes=To,va.memoizedState=Oo}}function Eg(va,_o,xo){if(va=_o.effects,_o.effects=null,va!==null)for(_o=0;_o<va.length;_o++){var bo=va[_o],wo=bo.callback;if(wo!==null){if(bo.callback=null,bo=xo,typeof wo!="function")throw Error(y$3(191,wo));wo.call(bo)}}}var Fg=new aa$1.Component().refs;function Gg(va,_o,xo,bo){_o=va.memoizedState,xo=xo(bo,_o),xo=xo==null?_o:m$3({},_o,xo),va.memoizedState=xo,va.lanes===0&&(va.updateQueue.baseState=xo)}var Kg={isMounted:function(va){return(va=va._reactInternals)?Zb(va)===va:!1},enqueueSetState:function(va,_o,xo){va=va._reactInternals;var bo=Hg(),wo=Ig(va),Eo=zg(bo,wo);Eo.payload=_o,xo!=null&&(Eo.callback=xo),Ag(va,Eo),Jg(va,wo,bo)},enqueueReplaceState:function(va,_o,xo){va=va._reactInternals;var bo=Hg(),wo=Ig(va),Eo=zg(bo,wo);Eo.tag=1,Eo.payload=_o,xo!=null&&(Eo.callback=xo),Ag(va,Eo),Jg(va,wo,bo)},enqueueForceUpdate:function(va,_o){va=va._reactInternals;var xo=Hg(),bo=Ig(va),wo=zg(xo,bo);wo.tag=2,_o!=null&&(wo.callback=_o),Ag(va,wo),Jg(va,bo,xo)}};function Lg(va,_o,xo,bo,wo,Eo,To){return va=va.stateNode,typeof va.shouldComponentUpdate=="function"?va.shouldComponentUpdate(bo,Eo,To):_o.prototype&&_o.prototype.isPureReactComponent?!Je$1(xo,bo)||!Je$1(wo,Eo):!0}function Mg(va,_o,xo){var bo=!1,wo=Cf,Eo=_o.contextType;return typeof Eo=="object"&&Eo!==null?Eo=vg(Eo):(wo=Ff(_o)?Df:M$2.current,bo=_o.contextTypes,Eo=(bo=bo!=null)?Ef(va,wo):Cf),_o=new _o(xo,Eo),va.memoizedState=_o.state!==null&&_o.state!==void 0?_o.state:null,_o.updater=Kg,va.stateNode=_o,_o._reactInternals=va,bo&&(va=va.stateNode,va.__reactInternalMemoizedUnmaskedChildContext=wo,va.__reactInternalMemoizedMaskedChildContext=Eo),_o}function Ng(va,_o,xo,bo){va=_o.state,typeof _o.componentWillReceiveProps=="function"&&_o.componentWillReceiveProps(xo,bo),typeof _o.UNSAFE_componentWillReceiveProps=="function"&&_o.UNSAFE_componentWillReceiveProps(xo,bo),_o.state!==va&&Kg.enqueueReplaceState(_o,_o.state,null)}function Og(va,_o,xo,bo){var wo=va.stateNode;wo.props=xo,wo.state=va.memoizedState,wo.refs=Fg,xg(va);var Eo=_o.contextType;typeof Eo=="object"&&Eo!==null?wo.context=vg(Eo):(Eo=Ff(_o)?Df:M$2.current,wo.context=Ef(va,Eo)),Cg(va,xo,wo,bo),wo.state=va.memoizedState,Eo=_o.getDerivedStateFromProps,typeof Eo=="function"&&(Gg(va,_o,Eo,xo),wo.state=va.memoizedState),typeof _o.getDerivedStateFromProps=="function"||typeof wo.getSnapshotBeforeUpdate=="function"||typeof wo.UNSAFE_componentWillMount!="function"&&typeof wo.componentWillMount!="function"||(_o=wo.state,typeof wo.componentWillMount=="function"&&wo.componentWillMount(),typeof wo.UNSAFE_componentWillMount=="function"&&wo.UNSAFE_componentWillMount(),_o!==wo.state&&Kg.enqueueReplaceState(wo,wo.state,null),Cg(va,xo,wo,bo),wo.state=va.memoizedState),typeof wo.componentDidMount=="function"&&(va.flags|=4)}var Pg=Array.isArray;function Qg(va,_o,xo){if(va=xo.ref,va!==null&&typeof va!="function"&&typeof va!="object"){if(xo._owner){if(xo=xo._owner,xo){if(xo.tag!==1)throw Error(y$3(309));var bo=xo.stateNode}if(!bo)throw Error(y$3(147,va));var wo=""+va;return _o!==null&&_o.ref!==null&&typeof _o.ref=="function"&&_o.ref._stringRef===wo?_o.ref:(_o=function(Eo){var To=bo.refs;To===Fg&&(To=bo.refs={}),Eo===null?delete To[wo]:To[wo]=Eo},_o._stringRef=wo,_o)}if(typeof va!="string")throw Error(y$3(284));if(!xo._owner)throw Error(y$3(290,va))}return va}function Rg(va,_o){if(va.type!=="textarea")throw Error(y$3(31,Object.prototype.toString.call(_o)==="[object Object]"?"object with keys {"+Object.keys(_o).join(", ")+"}":_o))}function Sg(va){function _o(zo,Io){if(va){var Po=zo.lastEffect;Po!==null?(Po.nextEffect=Io,zo.lastEffect=Io):zo.firstEffect=zo.lastEffect=Io,Io.nextEffect=null,Io.flags=8}}function xo(zo,Io){if(!va)return null;for(;Io!==null;)_o(zo,Io),Io=Io.sibling;return null}function bo(zo,Io){for(zo=new Map;Io!==null;)Io.key!==null?zo.set(Io.key,Io):zo.set(Io.index,Io),Io=Io.sibling;return zo}function wo(zo,Io){return zo=Tg(zo,Io),zo.index=0,zo.sibling=null,zo}function Eo(zo,Io,Po){return zo.index=Po,va?(Po=zo.alternate,Po!==null?(Po=Po.index,Po<Io?(zo.flags=2,Io):Po):(zo.flags=2,Io)):Io}function To(zo){return va&&zo.alternate===null&&(zo.flags=2),zo}function So(zo,Io,Po,Bo){return Io===null||Io.tag!==6?(Io=Ug(Po,zo.mode,Bo),Io.return=zo,Io):(Io=wo(Io,Po),Io.return=zo,Io)}function $o(zo,Io,Po,Bo){return Io!==null&&Io.elementType===Po.type?(Bo=wo(Io,Po.props),Bo.ref=Qg(zo,Io,Po),Bo.return=zo,Bo):(Bo=Vg(Po.type,Po.key,Po.props,null,zo.mode,Bo),Bo.ref=Qg(zo,Io,Po),Bo.return=zo,Bo)}function Do(zo,Io,Po,Bo){return Io===null||Io.tag!==4||Io.stateNode.containerInfo!==Po.containerInfo||Io.stateNode.implementation!==Po.implementation?(Io=Wg(Po,zo.mode,Bo),Io.return=zo,Io):(Io=wo(Io,Po.children||[]),Io.return=zo,Io)}function No(zo,Io,Po,Bo,ko){return Io===null||Io.tag!==7?(Io=Xg(Po,zo.mode,Bo,ko),Io.return=zo,Io):(Io=wo(Io,Po),Io.return=zo,Io)}function Oo(zo,Io,Po){if(typeof Io=="string"||typeof Io=="number")return Io=Ug(""+Io,zo.mode,Po),Io.return=zo,Io;if(typeof Io=="object"&&Io!==null){switch(Io.$$typeof){case sa:return Po=Vg(Io.type,Io.key,Io.props,null,zo.mode,Po),Po.ref=Qg(zo,null,Io),Po.return=zo,Po;case ta:return Io=Wg(Io,zo.mode,Po),Io.return=zo,Io}if(Pg(Io)||La(Io))return Io=Xg(Io,zo.mode,Po,null),Io.return=zo,Io;Rg(zo,Io)}return null}function Lo(zo,Io,Po,Bo){var ko=Io!==null?Io.key:null;if(typeof Po=="string"||typeof Po=="number")return ko!==null?null:So(zo,Io,""+Po,Bo);if(typeof Po=="object"&&Po!==null){switch(Po.$$typeof){case sa:return Po.key===ko?Po.type===ua?No(zo,Io,Po.props.children,Bo,ko):$o(zo,Io,Po,Bo):null;case ta:return Po.key===ko?Do(zo,Io,Po,Bo):null}if(Pg(Po)||La(Po))return ko!==null?null:No(zo,Io,Po,Bo,null);Rg(zo,Po)}return null}function Co(zo,Io,Po,Bo,ko){if(typeof Bo=="string"||typeof Bo=="number")return zo=zo.get(Po)||null,So(Io,zo,""+Bo,ko);if(typeof Bo=="object"&&Bo!==null){switch(Bo.$$typeof){case sa:return zo=zo.get(Bo.key===null?Po:Bo.key)||null,Bo.type===ua?No(Io,zo,Bo.props.children,ko,Bo.key):$o(Io,zo,Bo,ko);case ta:return zo=zo.get(Bo.key===null?Po:Bo.key)||null,Do(Io,zo,Bo,ko)}if(Pg(Bo)||La(Bo))return zo=zo.get(Po)||null,No(Io,zo,Bo,ko,null);Rg(Io,Bo)}return null}function Ro(zo,Io,Po,Bo){for(var ko=null,Uo=null,Qo=Io,qo=Io=0,Zo=null;Qo!==null&&qo<Po.length;qo++){Qo.index>qo?(Zo=Qo,Qo=null):Zo=Qo.sibling;var Xo=Lo(zo,Qo,Po[qo],Bo);if(Xo===null){Qo===null&&(Qo=Zo);break}va&&Qo&&Xo.alternate===null&&_o(zo,Qo),Io=Eo(Xo,Io,qo),Uo===null?ko=Xo:Uo.sibling=Xo,Uo=Xo,Qo=Zo}if(qo===Po.length)return xo(zo,Qo),ko;if(Qo===null){for(;qo<Po.length;qo++)Qo=Oo(zo,Po[qo],Bo),Qo!==null&&(Io=Eo(Qo,Io,qo),Uo===null?ko=Qo:Uo.sibling=Qo,Uo=Qo);return ko}for(Qo=bo(zo,Qo);qo<Po.length;qo++)Zo=Co(Qo,zo,qo,Po[qo],Bo),Zo!==null&&(va&&Zo.alternate!==null&&Qo.delete(Zo.key===null?qo:Zo.key),Io=Eo(Zo,Io,qo),Uo===null?ko=Zo:Uo.sibling=Zo,Uo=Zo);return va&&Qo.forEach(function(Fo){return _o(zo,Fo)}),ko}function jo(zo,Io,Po,Bo){var ko=La(Po);if(typeof ko!="function")throw Error(y$3(150));if(Po=ko.call(Po),Po==null)throw Error(y$3(151));for(var Uo=ko=null,Qo=Io,qo=Io=0,Zo=null,Xo=Po.next();Qo!==null&&!Xo.done;qo++,Xo=Po.next()){Qo.index>qo?(Zo=Qo,Qo=null):Zo=Qo.sibling;var Fo=Lo(zo,Qo,Xo.value,Bo);if(Fo===null){Qo===null&&(Qo=Zo);break}va&&Qo&&Fo.alternate===null&&_o(zo,Qo),Io=Eo(Fo,Io,qo),Uo===null?ko=Fo:Uo.sibling=Fo,Uo=Fo,Qo=Zo}if(Xo.done)return xo(zo,Qo),ko;if(Qo===null){for(;!Xo.done;qo++,Xo=Po.next())Xo=Oo(zo,Xo.value,Bo),Xo!==null&&(Io=Eo(Xo,Io,qo),Uo===null?ko=Xo:Uo.sibling=Xo,Uo=Xo);return ko}for(Qo=bo(zo,Qo);!Xo.done;qo++,Xo=Po.next())Xo=Co(Qo,zo,qo,Xo.value,Bo),Xo!==null&&(va&&Xo.alternate!==null&&Qo.delete(Xo.key===null?qo:Xo.key),Io=Eo(Xo,Io,qo),Uo===null?ko=Xo:Uo.sibling=Xo,Uo=Xo);return va&&Qo.forEach(function(Go){return _o(zo,Go)}),ko}return function(zo,Io,Po,Bo){var ko=typeof Po=="object"&&Po!==null&&Po.type===ua&&Po.key===null;ko&&(Po=Po.props.children);var Uo=typeof Po=="object"&&Po!==null;if(Uo)switch(Po.$$typeof){case sa:e:{for(Uo=Po.key,ko=Io;ko!==null;){if(ko.key===Uo){switch(ko.tag){case 7:if(Po.type===ua){xo(zo,ko.sibling),Io=wo(ko,Po.props.children),Io.return=zo,zo=Io;break e}break;default:if(ko.elementType===Po.type){xo(zo,ko.sibling),Io=wo(ko,Po.props),Io.ref=Qg(zo,ko,Po),Io.return=zo,zo=Io;break e}}xo(zo,ko);break}else _o(zo,ko);ko=ko.sibling}Po.type===ua?(Io=Xg(Po.props.children,zo.mode,Bo,Po.key),Io.return=zo,zo=Io):(Bo=Vg(Po.type,Po.key,Po.props,null,zo.mode,Bo),Bo.ref=Qg(zo,Io,Po),Bo.return=zo,zo=Bo)}return To(zo);case ta:e:{for(ko=Po.key;Io!==null;){if(Io.key===ko)if(Io.tag===4&&Io.stateNode.containerInfo===Po.containerInfo&&Io.stateNode.implementation===Po.implementation){xo(zo,Io.sibling),Io=wo(Io,Po.children||[]),Io.return=zo,zo=Io;break e}else{xo(zo,Io);break}else _o(zo,Io);Io=Io.sibling}Io=Wg(Po,zo.mode,Bo),Io.return=zo,zo=Io}return To(zo)}if(typeof Po=="string"||typeof Po=="number")return Po=""+Po,Io!==null&&Io.tag===6?(xo(zo,Io.sibling),Io=wo(Io,Po),Io.return=zo,zo=Io):(xo(zo,Io),Io=Ug(Po,zo.mode,Bo),Io.return=zo,zo=Io),To(zo);if(Pg(Po))return Ro(zo,Io,Po,Bo);if(La(Po))return jo(zo,Io,Po,Bo);if(Uo&&Rg(zo,Po),typeof Po=="undefined"&&!ko)switch(zo.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$3(152,Ra(zo.type)||"Component"))}return xo(zo,Io)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(va){if(va===$g)throw Error(y$3(174));return va}function eh(va,_o){switch(I$2(ch,_o),I$2(bh,va),I$2(ah,$g),va=_o.nodeType,va){case 9:case 11:_o=(_o=_o.documentElement)?_o.namespaceURI:mb(null,"");break;default:va=va===8?_o.parentNode:_o,_o=va.namespaceURI||null,va=va.tagName,_o=mb(_o,va)}H$2(ah),I$2(ah,_o)}function fh(){H$2(ah),H$2(bh),H$2(ch)}function gh(va){dh(ch.current);var _o=dh(ah.current),xo=mb(_o,va.type);_o!==xo&&(I$2(bh,va),I$2(ah,xo))}function hh(va){bh.current===va&&(H$2(ah),H$2(bh))}var P$3=Bf(0);function ih(va){for(var _o=va;_o!==null;){if(_o.tag===13){var xo=_o.memoizedState;if(xo!==null&&(xo=xo.dehydrated,xo===null||xo.data==="$?"||xo.data==="$!"))return _o}else if(_o.tag===19&&_o.memoizedProps.revealOrder!==void 0){if((_o.flags&64)!=0)return _o}else if(_o.child!==null){_o.child.return=_o,_o=_o.child;continue}if(_o===va)break;for(;_o.sibling===null;){if(_o.return===null||_o.return===va)return null;_o=_o.return}_o.sibling.return=_o.return,_o=_o.sibling}return null}var jh=null,kh=null,lh=!1;function mh(va,_o){var xo=nh(5,null,null,0);xo.elementType="DELETED",xo.type="DELETED",xo.stateNode=_o,xo.return=va,xo.flags=8,va.lastEffect!==null?(va.lastEffect.nextEffect=xo,va.lastEffect=xo):va.firstEffect=va.lastEffect=xo}function oh(va,_o){switch(va.tag){case 5:var xo=va.type;return _o=_o.nodeType!==1||xo.toLowerCase()!==_o.nodeName.toLowerCase()?null:_o,_o!==null?(va.stateNode=_o,!0):!1;case 6:return _o=va.pendingProps===""||_o.nodeType!==3?null:_o,_o!==null?(va.stateNode=_o,!0):!1;case 13:return!1;default:return!1}}function ph(va){if(lh){var _o=kh;if(_o){var xo=_o;if(!oh(va,_o)){if(_o=rf(xo.nextSibling),!_o||!oh(va,_o)){va.flags=va.flags&-1025|2,lh=!1,jh=va;return}mh(jh,xo)}jh=va,kh=rf(_o.firstChild)}else va.flags=va.flags&-1025|2,lh=!1,jh=va}}function qh(va){for(va=va.return;va!==null&&va.tag!==5&&va.tag!==3&&va.tag!==13;)va=va.return;jh=va}function rh(va){if(va!==jh)return!1;if(!lh)return qh(va),lh=!0,!1;var _o=va.type;if(va.tag!==5||_o!=="head"&&_o!=="body"&&!nf(_o,va.memoizedProps))for(_o=kh;_o;)mh(va,_o),_o=rf(_o.nextSibling);if(qh(va),va.tag===13){if(va=va.memoizedState,va=va!==null?va.dehydrated:null,!va)throw Error(y$3(317));e:{for(va=va.nextSibling,_o=0;va;){if(va.nodeType===8){var xo=va.data;if(xo==="/$"){if(_o===0){kh=rf(va.nextSibling);break e}_o--}else xo!=="$"&&xo!=="$!"&&xo!=="$?"||_o++}va=va.nextSibling}kh=null}}else kh=jh?rf(va.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var va=0;va<th.length;va++)th[va]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R$3=null,S$2=null,T$1=null,yh=!1,zh=!1;function Ah(){throw Error(y$3(321))}function Bh(va,_o){if(_o===null)return!1;for(var xo=0;xo<_o.length&&xo<va.length;xo++)if(!He$1(va[xo],_o[xo]))return!1;return!0}function Ch(va,_o,xo,bo,wo,Eo){if(xh=Eo,R$3=_o,_o.memoizedState=null,_o.updateQueue=null,_o.lanes=0,vh.current=va===null||va.memoizedState===null?Dh:Eh,va=xo(bo,wo),zh){Eo=0;do{if(zh=!1,!(25>Eo))throw Error(y$3(301));Eo+=1,T$1=S$2=null,_o.updateQueue=null,vh.current=Fh,va=xo(bo,wo)}while(zh)}if(vh.current=Gh,_o=S$2!==null&&S$2.next!==null,xh=0,T$1=S$2=R$3=null,yh=!1,_o)throw Error(y$3(300));return va}function Hh(){var va={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$1===null?R$3.memoizedState=T$1=va:T$1=T$1.next=va,T$1}function Ih(){if(S$2===null){var va=R$3.alternate;va=va!==null?va.memoizedState:null}else va=S$2.next;var _o=T$1===null?R$3.memoizedState:T$1.next;if(_o!==null)T$1=_o,S$2=va;else{if(va===null)throw Error(y$3(310));S$2=va,va={memoizedState:S$2.memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},T$1===null?R$3.memoizedState=T$1=va:T$1=T$1.next=va}return T$1}function Jh(va,_o){return typeof _o=="function"?_o(va):_o}function Kh(va){var _o=Ih(),xo=_o.queue;if(xo===null)throw Error(y$3(311));xo.lastRenderedReducer=va;var bo=S$2,wo=bo.baseQueue,Eo=xo.pending;if(Eo!==null){if(wo!==null){var To=wo.next;wo.next=Eo.next,Eo.next=To}bo.baseQueue=wo=Eo,xo.pending=null}if(wo!==null){wo=wo.next,bo=bo.baseState;var So=To=Eo=null,$o=wo;do{var Do=$o.lane;if((xh&Do)===Do)So!==null&&(So=So.next={lane:0,action:$o.action,eagerReducer:$o.eagerReducer,eagerState:$o.eagerState,next:null}),bo=$o.eagerReducer===va?$o.eagerState:va(bo,$o.action);else{var No={lane:Do,action:$o.action,eagerReducer:$o.eagerReducer,eagerState:$o.eagerState,next:null};So===null?(To=So=No,Eo=bo):So=So.next=No,R$3.lanes|=Do,Dg|=Do}$o=$o.next}while($o!==null&&$o!==wo);So===null?Eo=bo:So.next=To,He$1(bo,_o.memoizedState)||(ug=!0),_o.memoizedState=bo,_o.baseState=Eo,_o.baseQueue=So,xo.lastRenderedState=bo}return[_o.memoizedState,xo.dispatch]}function Lh(va){var _o=Ih(),xo=_o.queue;if(xo===null)throw Error(y$3(311));xo.lastRenderedReducer=va;var bo=xo.dispatch,wo=xo.pending,Eo=_o.memoizedState;if(wo!==null){xo.pending=null;var To=wo=wo.next;do Eo=va(Eo,To.action),To=To.next;while(To!==wo);He$1(Eo,_o.memoizedState)||(ug=!0),_o.memoizedState=Eo,_o.baseQueue===null&&(_o.baseState=Eo),xo.lastRenderedState=Eo}return[Eo,bo]}function Mh(va,_o,xo){var bo=_o._getVersion;bo=bo(_o._source);var wo=_o._workInProgressVersionPrimary;if(wo!==null?va=wo===bo:(va=va.mutableReadLanes,(va=(xh&va)===va)&&(_o._workInProgressVersionPrimary=bo,th.push(_o))),va)return xo(_o._source);throw th.push(_o),Error(y$3(350))}function Nh(va,_o,xo,bo){var wo=U$1;if(wo===null)throw Error(y$3(349));var Eo=_o._getVersion,To=Eo(_o._source),So=vh.current,$o=So.useState(function(){return Mh(wo,_o,xo)}),Do=$o[1],No=$o[0];$o=T$1;var Oo=va.memoizedState,Lo=Oo.refs,Co=Lo.getSnapshot,Ro=Oo.source;Oo=Oo.subscribe;var jo=R$3;return va.memoizedState={refs:Lo,source:_o,subscribe:bo},So.useEffect(function(){Lo.getSnapshot=xo,Lo.setSnapshot=Do;var zo=Eo(_o._source);if(!He$1(To,zo)){zo=xo(_o._source),He$1(No,zo)||(Do(zo),zo=Ig(jo),wo.mutableReadLanes|=zo&wo.pendingLanes),zo=wo.mutableReadLanes,wo.entangledLanes|=zo;for(var Io=wo.entanglements,Po=zo;0<Po;){var Bo=31-Vc(Po),ko=1<<Bo;Io[Bo]|=zo,Po&=~ko}}},[xo,_o,bo]),So.useEffect(function(){return bo(_o._source,function(){var zo=Lo.getSnapshot,Io=Lo.setSnapshot;try{Io(zo(_o._source));var Po=Ig(jo);wo.mutableReadLanes|=Po&wo.pendingLanes}catch(Bo){Io(function(){throw Bo})}})},[_o,bo]),He$1(Co,xo)&&He$1(Ro,_o)&&He$1(Oo,bo)||(va={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:No},va.dispatch=Do=Oh.bind(null,R$3,va),$o.queue=va,$o.baseQueue=null,No=Mh(wo,_o,xo),$o.memoizedState=$o.baseState=No),No}function Ph(va,_o,xo){var bo=Ih();return Nh(bo,va,_o,xo)}function Qh(va){var _o=Hh();return typeof va=="function"&&(va=va()),_o.memoizedState=_o.baseState=va,va=_o.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:va},va=va.dispatch=Oh.bind(null,R$3,va),[_o.memoizedState,va]}function Rh(va,_o,xo,bo){return va={tag:va,create:_o,destroy:xo,deps:bo,next:null},_o=R$3.updateQueue,_o===null?(_o={lastEffect:null},R$3.updateQueue=_o,_o.lastEffect=va.next=va):(xo=_o.lastEffect,xo===null?_o.lastEffect=va.next=va:(bo=xo.next,xo.next=va,va.next=bo,_o.lastEffect=va)),va}function Sh(va){var _o=Hh();return va={current:va},_o.memoizedState=va}function Th(){return Ih().memoizedState}function Uh(va,_o,xo,bo){var wo=Hh();R$3.flags|=va,wo.memoizedState=Rh(1|_o,xo,void 0,bo===void 0?null:bo)}function Vh(va,_o,xo,bo){var wo=Ih();bo=bo===void 0?null:bo;var Eo=void 0;if(S$2!==null){var To=S$2.memoizedState;if(Eo=To.destroy,bo!==null&&Bh(bo,To.deps)){Rh(_o,xo,Eo,bo);return}}R$3.flags|=va,wo.memoizedState=Rh(1|_o,xo,Eo,bo)}function Wh(va,_o){return Uh(516,4,va,_o)}function Xh(va,_o){return Vh(516,4,va,_o)}function Yh(va,_o){return Vh(4,2,va,_o)}function Zh(va,_o){if(typeof _o=="function")return va=va(),_o(va),function(){_o(null)};if(_o!=null)return va=va(),_o.current=va,function(){_o.current=null}}function $h(va,_o,xo){return xo=xo!=null?xo.concat([va]):null,Vh(4,2,Zh.bind(null,_o,va),xo)}function ai$1(){}function bi$1(va,_o){var xo=Ih();_o=_o===void 0?null:_o;var bo=xo.memoizedState;return bo!==null&&_o!==null&&Bh(_o,bo[1])?bo[0]:(xo.memoizedState=[va,_o],va)}function ci$1(va,_o){var xo=Ih();_o=_o===void 0?null:_o;var bo=xo.memoizedState;return bo!==null&&_o!==null&&Bh(_o,bo[1])?bo[0]:(va=va(),xo.memoizedState=[va,_o],va)}function di$1(va,_o){var xo=eg();gg(98>xo?98:xo,function(){va(!0)}),gg(97<xo?97:xo,function(){var bo=wh.transition;wh.transition=1;try{va(!1),_o()}finally{wh.transition=bo}})}function Oh(va,_o,xo){var bo=Hg(),wo=Ig(va),Eo={lane:wo,action:xo,eagerReducer:null,eagerState:null,next:null},To=_o.pending;if(To===null?Eo.next=Eo:(Eo.next=To.next,To.next=Eo),_o.pending=Eo,To=va.alternate,va===R$3||To!==null&&To===R$3)zh=yh=!0;else{if(va.lanes===0&&(To===null||To.lanes===0)&&(To=_o.lastRenderedReducer,To!==null))try{var So=_o.lastRenderedState,$o=To(So,xo);if(Eo.eagerReducer=To,Eo.eagerState=$o,He$1($o,So))return}catch{}finally{}Jg(va,wo,bo)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(va,_o){return Hh().memoizedState=[va,_o===void 0?null:_o],va},useContext:vg,useEffect:Wh,useImperativeHandle:function(va,_o,xo){return xo=xo!=null?xo.concat([va]):null,Uh(4,2,Zh.bind(null,_o,va),xo)},useLayoutEffect:function(va,_o){return Uh(4,2,va,_o)},useMemo:function(va,_o){var xo=Hh();return _o=_o===void 0?null:_o,va=va(),xo.memoizedState=[va,_o],va},useReducer:function(va,_o,xo){var bo=Hh();return _o=xo!==void 0?xo(_o):_o,bo.memoizedState=bo.baseState=_o,va=bo.queue={pending:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:_o},va=va.dispatch=Oh.bind(null,R$3,va),[bo.memoizedState,va]},useRef:Sh,useState:Qh,useDebugValue:ai$1,useDeferredValue:function(va){var _o=Qh(va),xo=_o[0],bo=_o[1];return Wh(function(){var wo=wh.transition;wh.transition=1;try{bo(va)}finally{wh.transition=wo}},[va]),xo},useTransition:function(){var va=Qh(!1),_o=va[0];return va=di$1.bind(null,va[1]),Sh(va),[va,_o]},useMutableSource:function(va,_o,xo){var bo=Hh();return bo.memoizedState={refs:{getSnapshot:_o,setSnapshot:null},source:va,subscribe:xo},Nh(bo,va,_o,xo)},useOpaqueIdentifier:function(){if(lh){var va=!1,_o=uf(function(){throw va||(va=!0,xo("r:"+(tf++).toString(36))),Error(y$3(355))}),xo=Qh(_o)[1];return(R$3.mode&2)==0&&(R$3.flags|=516,Rh(5,function(){xo("r:"+(tf++).toString(36))},void 0,null)),_o}return _o="r:"+(tf++).toString(36),Qh(_o),_o},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai$1,useDeferredValue:function(va){var _o=Kh(Jh),xo=_o[0],bo=_o[1];return Xh(function(){var wo=wh.transition;wh.transition=1;try{bo(va)}finally{wh.transition=wo}},[va]),xo},useTransition:function(){var va=Kh(Jh)[0];return[Th().current,va]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai$1,useDeferredValue:function(va){var _o=Lh(Jh),xo=_o[0],bo=_o[1];return Xh(function(){var wo=wh.transition;wh.transition=1;try{bo(va)}finally{wh.transition=wo}},[va]),xo},useTransition:function(){var va=Lh(Jh)[0];return[Th().current,va]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei$1=ra.ReactCurrentOwner,ug=!1;function fi$1(va,_o,xo,bo){_o.child=va===null?Zg(_o,null,xo,bo):Yg(_o,va.child,xo,bo)}function gi$1(va,_o,xo,bo,wo){xo=xo.render;var Eo=_o.ref;return tg(_o,wo),bo=Ch(va,_o,xo,bo,Eo,wo),va!==null&&!ug?(_o.updateQueue=va.updateQueue,_o.flags&=-517,va.lanes&=~wo,hi$1(va,_o,wo)):(_o.flags|=1,fi$1(va,_o,bo,wo),_o.child)}function ii$1(va,_o,xo,bo,wo,Eo){if(va===null){var To=xo.type;return typeof To=="function"&&!ji$1(To)&&To.defaultProps===void 0&&xo.compare===null&&xo.defaultProps===void 0?(_o.tag=15,_o.type=To,ki$1(va,_o,To,bo,wo,Eo)):(va=Vg(xo.type,null,bo,_o,_o.mode,Eo),va.ref=_o.ref,va.return=_o,_o.child=va)}return To=va.child,(wo&Eo)==0&&(wo=To.memoizedProps,xo=xo.compare,xo=xo!==null?xo:Je$1,xo(wo,bo)&&va.ref===_o.ref)?hi$1(va,_o,Eo):(_o.flags|=1,va=Tg(To,bo),va.ref=_o.ref,va.return=_o,_o.child=va)}function ki$1(va,_o,xo,bo,wo,Eo){if(va!==null&&Je$1(va.memoizedProps,bo)&&va.ref===_o.ref)if(ug=!1,(Eo&wo)!=0)(va.flags&16384)!=0&&(ug=!0);else return _o.lanes=va.lanes,hi$1(va,_o,Eo);return li$1(va,_o,xo,bo,Eo)}function mi$1(va,_o,xo){var bo=_o.pendingProps,wo=bo.children,Eo=va!==null?va.memoizedState:null;if(bo.mode==="hidden"||bo.mode==="unstable-defer-without-hiding")if((_o.mode&4)==0)_o.memoizedState={baseLanes:0},ni$1(_o,xo);else if((xo&1073741824)!=0)_o.memoizedState={baseLanes:0},ni$1(_o,Eo!==null?Eo.baseLanes:xo);else return va=Eo!==null?Eo.baseLanes|xo:xo,_o.lanes=_o.childLanes=1073741824,_o.memoizedState={baseLanes:va},ni$1(_o,va),null;else Eo!==null?(bo=Eo.baseLanes|xo,_o.memoizedState=null):bo=xo,ni$1(_o,bo);return fi$1(va,_o,wo,xo),_o.child}function oi$1(va,_o){var xo=_o.ref;(va===null&&xo!==null||va!==null&&va.ref!==xo)&&(_o.flags|=128)}function li$1(va,_o,xo,bo,wo){var Eo=Ff(xo)?Df:M$2.current;return Eo=Ef(_o,Eo),tg(_o,wo),xo=Ch(va,_o,xo,bo,Eo,wo),va!==null&&!ug?(_o.updateQueue=va.updateQueue,_o.flags&=-517,va.lanes&=~wo,hi$1(va,_o,wo)):(_o.flags|=1,fi$1(va,_o,xo,wo),_o.child)}function pi$1(va,_o,xo,bo,wo){if(Ff(xo)){var Eo=!0;Jf(_o)}else Eo=!1;if(tg(_o,wo),_o.stateNode===null)va!==null&&(va.alternate=null,_o.alternate=null,_o.flags|=2),Mg(_o,xo,bo),Og(_o,xo,bo,wo),bo=!0;else if(va===null){var To=_o.stateNode,So=_o.memoizedProps;To.props=So;var $o=To.context,Do=xo.contextType;typeof Do=="object"&&Do!==null?Do=vg(Do):(Do=Ff(xo)?Df:M$2.current,Do=Ef(_o,Do));var No=xo.getDerivedStateFromProps,Oo=typeof No=="function"||typeof To.getSnapshotBeforeUpdate=="function";Oo||typeof To.UNSAFE_componentWillReceiveProps!="function"&&typeof To.componentWillReceiveProps!="function"||(So!==bo||$o!==Do)&&Ng(_o,To,bo,Do),wg=!1;var Lo=_o.memoizedState;To.state=Lo,Cg(_o,bo,To,wo),$o=_o.memoizedState,So!==bo||Lo!==$o||N$3.current||wg?(typeof No=="function"&&(Gg(_o,xo,No,bo),$o=_o.memoizedState),(So=wg||Lg(_o,xo,So,bo,Lo,$o,Do))?(Oo||typeof To.UNSAFE_componentWillMount!="function"&&typeof To.componentWillMount!="function"||(typeof To.componentWillMount=="function"&&To.componentWillMount(),typeof To.UNSAFE_componentWillMount=="function"&&To.UNSAFE_componentWillMount()),typeof To.componentDidMount=="function"&&(_o.flags|=4)):(typeof To.componentDidMount=="function"&&(_o.flags|=4),_o.memoizedProps=bo,_o.memoizedState=$o),To.props=bo,To.state=$o,To.context=Do,bo=So):(typeof To.componentDidMount=="function"&&(_o.flags|=4),bo=!1)}else{To=_o.stateNode,yg(va,_o),So=_o.memoizedProps,Do=_o.type===_o.elementType?So:lg(_o.type,So),To.props=Do,Oo=_o.pendingProps,Lo=To.context,$o=xo.contextType,typeof $o=="object"&&$o!==null?$o=vg($o):($o=Ff(xo)?Df:M$2.current,$o=Ef(_o,$o));var Co=xo.getDerivedStateFromProps;(No=typeof Co=="function"||typeof To.getSnapshotBeforeUpdate=="function")||typeof To.UNSAFE_componentWillReceiveProps!="function"&&typeof To.componentWillReceiveProps!="function"||(So!==Oo||Lo!==$o)&&Ng(_o,To,bo,$o),wg=!1,Lo=_o.memoizedState,To.state=Lo,Cg(_o,bo,To,wo);var Ro=_o.memoizedState;So!==Oo||Lo!==Ro||N$3.current||wg?(typeof Co=="function"&&(Gg(_o,xo,Co,bo),Ro=_o.memoizedState),(Do=wg||Lg(_o,xo,Do,bo,Lo,Ro,$o))?(No||typeof To.UNSAFE_componentWillUpdate!="function"&&typeof To.componentWillUpdate!="function"||(typeof To.componentWillUpdate=="function"&&To.componentWillUpdate(bo,Ro,$o),typeof To.UNSAFE_componentWillUpdate=="function"&&To.UNSAFE_componentWillUpdate(bo,Ro,$o)),typeof To.componentDidUpdate=="function"&&(_o.flags|=4),typeof To.getSnapshotBeforeUpdate=="function"&&(_o.flags|=256)):(typeof To.componentDidUpdate!="function"||So===va.memoizedProps&&Lo===va.memoizedState||(_o.flags|=4),typeof To.getSnapshotBeforeUpdate!="function"||So===va.memoizedProps&&Lo===va.memoizedState||(_o.flags|=256),_o.memoizedProps=bo,_o.memoizedState=Ro),To.props=bo,To.state=Ro,To.context=$o,bo=Do):(typeof To.componentDidUpdate!="function"||So===va.memoizedProps&&Lo===va.memoizedState||(_o.flags|=4),typeof To.getSnapshotBeforeUpdate!="function"||So===va.memoizedProps&&Lo===va.memoizedState||(_o.flags|=256),bo=!1)}return qi$1(va,_o,xo,bo,Eo,wo)}function qi$1(va,_o,xo,bo,wo,Eo){oi$1(va,_o);var To=(_o.flags&64)!=0;if(!bo&&!To)return wo&&Kf(_o,xo,!1),hi$1(va,_o,Eo);bo=_o.stateNode,ei$1.current=_o;var So=To&&typeof xo.getDerivedStateFromError!="function"?null:bo.render();return _o.flags|=1,va!==null&&To?(_o.child=Yg(_o,va.child,null,Eo),_o.child=Yg(_o,null,So,Eo)):fi$1(va,_o,So,Eo),_o.memoizedState=bo.state,wo&&Kf(_o,xo,!0),_o.child}function ri$1(va){var _o=va.stateNode;_o.pendingContext?Hf(va,_o.pendingContext,_o.pendingContext!==_o.context):_o.context&&Hf(va,_o.context,!1),eh(va,_o.containerInfo)}var si$1={dehydrated:null,retryLane:0};function ti$1(va,_o,xo){var bo=_o.pendingProps,wo=P$3.current,Eo=!1,To;return(To=(_o.flags&64)!=0)||(To=va!==null&&va.memoizedState===null?!1:(wo&2)!=0),To?(Eo=!0,_o.flags&=-65):va!==null&&va.memoizedState===null||bo.fallback===void 0||bo.unstable_avoidThisFallback===!0||(wo|=1),I$2(P$3,wo&1),va===null?(bo.fallback!==void 0&&ph(_o),va=bo.children,wo=bo.fallback,Eo?(va=ui$1(_o,va,wo,xo),_o.child.memoizedState={baseLanes:xo},_o.memoizedState=si$1,va):typeof bo.unstable_expectedLoadTime=="number"?(va=ui$1(_o,va,wo,xo),_o.child.memoizedState={baseLanes:xo},_o.memoizedState=si$1,_o.lanes=33554432,va):(xo=vi$1({mode:"visible",children:va},_o.mode,xo,null),xo.return=_o,_o.child=xo)):va.memoizedState!==null?Eo?(bo=wi$1(va,_o,bo.children,bo.fallback,xo),Eo=_o.child,wo=va.child.memoizedState,Eo.memoizedState=wo===null?{baseLanes:xo}:{baseLanes:wo.baseLanes|xo},Eo.childLanes=va.childLanes&~xo,_o.memoizedState=si$1,bo):(xo=xi$1(va,_o,bo.children,xo),_o.memoizedState=null,xo):Eo?(bo=wi$1(va,_o,bo.children,bo.fallback,xo),Eo=_o.child,wo=va.child.memoizedState,Eo.memoizedState=wo===null?{baseLanes:xo}:{baseLanes:wo.baseLanes|xo},Eo.childLanes=va.childLanes&~xo,_o.memoizedState=si$1,bo):(xo=xi$1(va,_o,bo.children,xo),_o.memoizedState=null,xo)}function ui$1(va,_o,xo,bo){var wo=va.mode,Eo=va.child;return _o={mode:"hidden",children:_o},(wo&2)==0&&Eo!==null?(Eo.childLanes=0,Eo.pendingProps=_o):Eo=vi$1(_o,wo,0,null),xo=Xg(xo,wo,bo,null),Eo.return=va,xo.return=va,Eo.sibling=xo,va.child=Eo,xo}function xi$1(va,_o,xo,bo){var wo=va.child;return va=wo.sibling,xo=Tg(wo,{mode:"visible",children:xo}),(_o.mode&2)==0&&(xo.lanes=bo),xo.return=_o,xo.sibling=null,va!==null&&(va.nextEffect=null,va.flags=8,_o.firstEffect=_o.lastEffect=va),_o.child=xo}function wi$1(va,_o,xo,bo,wo){var Eo=_o.mode,To=va.child;va=To.sibling;var So={mode:"hidden",children:xo};return(Eo&2)==0&&_o.child!==To?(xo=_o.child,xo.childLanes=0,xo.pendingProps=So,To=xo.lastEffect,To!==null?(_o.firstEffect=xo.firstEffect,_o.lastEffect=To,To.nextEffect=null):_o.firstEffect=_o.lastEffect=null):xo=Tg(To,So),va!==null?bo=Tg(va,bo):(bo=Xg(bo,Eo,wo,null),bo.flags|=2),bo.return=_o,xo.return=_o,xo.sibling=bo,_o.child=xo,bo}function yi$1(va,_o){va.lanes|=_o;var xo=va.alternate;xo!==null&&(xo.lanes|=_o),sg(va.return,_o)}function zi$1(va,_o,xo,bo,wo,Eo){var To=va.memoizedState;To===null?va.memoizedState={isBackwards:_o,rendering:null,renderingStartTime:0,last:bo,tail:xo,tailMode:wo,lastEffect:Eo}:(To.isBackwards=_o,To.rendering=null,To.renderingStartTime=0,To.last=bo,To.tail=xo,To.tailMode=wo,To.lastEffect=Eo)}function Ai$1(va,_o,xo){var bo=_o.pendingProps,wo=bo.revealOrder,Eo=bo.tail;if(fi$1(va,_o,bo.children,xo),bo=P$3.current,(bo&2)!=0)bo=bo&1|2,_o.flags|=64;else{if(va!==null&&(va.flags&64)!=0)e:for(va=_o.child;va!==null;){if(va.tag===13)va.memoizedState!==null&&yi$1(va,xo);else if(va.tag===19)yi$1(va,xo);else if(va.child!==null){va.child.return=va,va=va.child;continue}if(va===_o)break e;for(;va.sibling===null;){if(va.return===null||va.return===_o)break e;va=va.return}va.sibling.return=va.return,va=va.sibling}bo&=1}if(I$2(P$3,bo),(_o.mode&2)==0)_o.memoizedState=null;else switch(wo){case"forwards":for(xo=_o.child,wo=null;xo!==null;)va=xo.alternate,va!==null&&ih(va)===null&&(wo=xo),xo=xo.sibling;xo=wo,xo===null?(wo=_o.child,_o.child=null):(wo=xo.sibling,xo.sibling=null),zi$1(_o,!1,wo,xo,Eo,_o.lastEffect);break;case"backwards":for(xo=null,wo=_o.child,_o.child=null;wo!==null;){if(va=wo.alternate,va!==null&&ih(va)===null){_o.child=wo;break}va=wo.sibling,wo.sibling=xo,xo=wo,wo=va}zi$1(_o,!0,xo,null,Eo,_o.lastEffect);break;case"together":zi$1(_o,!1,null,null,void 0,_o.lastEffect);break;default:_o.memoizedState=null}return _o.child}function hi$1(va,_o,xo){if(va!==null&&(_o.dependencies=va.dependencies),Dg|=_o.lanes,(xo&_o.childLanes)!=0){if(va!==null&&_o.child!==va.child)throw Error(y$3(153));if(_o.child!==null){for(va=_o.child,xo=Tg(va,va.pendingProps),_o.child=xo,xo.return=_o;va.sibling!==null;)va=va.sibling,xo=xo.sibling=Tg(va,va.pendingProps),xo.return=_o;xo.sibling=null}return _o.child}return null}var Bi$1,Ci$1,Di$1,Ei$1;Bi$1=function(va,_o){for(var xo=_o.child;xo!==null;){if(xo.tag===5||xo.tag===6)va.appendChild(xo.stateNode);else if(xo.tag!==4&&xo.child!==null){xo.child.return=xo,xo=xo.child;continue}if(xo===_o)break;for(;xo.sibling===null;){if(xo.return===null||xo.return===_o)return;xo=xo.return}xo.sibling.return=xo.return,xo=xo.sibling}};Ci$1=function(){};Di$1=function(va,_o,xo,bo){var wo=va.memoizedProps;if(wo!==bo){va=_o.stateNode,dh(ah.current);var Eo=null;switch(xo){case"input":wo=Ya(va,wo),bo=Ya(va,bo),Eo=[];break;case"option":wo=eb(va,wo),bo=eb(va,bo),Eo=[];break;case"select":wo=m$3({},wo,{value:void 0}),bo=m$3({},bo,{value:void 0}),Eo=[];break;case"textarea":wo=gb(va,wo),bo=gb(va,bo),Eo=[];break;default:typeof wo.onClick!="function"&&typeof bo.onClick=="function"&&(va.onclick=jf)}vb(xo,bo);var To;xo=null;for(Do in wo)if(!bo.hasOwnProperty(Do)&&wo.hasOwnProperty(Do)&&wo[Do]!=null)if(Do==="style"){var So=wo[Do];for(To in So)So.hasOwnProperty(To)&&(xo||(xo={}),xo[To]="")}else Do!=="dangerouslySetInnerHTML"&&Do!=="children"&&Do!=="suppressContentEditableWarning"&&Do!=="suppressHydrationWarning"&&Do!=="autoFocus"&&(ca$1.hasOwnProperty(Do)?Eo||(Eo=[]):(Eo=Eo||[]).push(Do,null));for(Do in bo){var $o=bo[Do];if(So=wo!=null?wo[Do]:void 0,bo.hasOwnProperty(Do)&&$o!==So&&($o!=null||So!=null))if(Do==="style")if(So){for(To in So)!So.hasOwnProperty(To)||$o&&$o.hasOwnProperty(To)||(xo||(xo={}),xo[To]="");for(To in $o)$o.hasOwnProperty(To)&&So[To]!==$o[To]&&(xo||(xo={}),xo[To]=$o[To])}else xo||(Eo||(Eo=[]),Eo.push(Do,xo)),xo=$o;else Do==="dangerouslySetInnerHTML"?($o=$o?$o.__html:void 0,So=So?So.__html:void 0,$o!=null&&So!==$o&&(Eo=Eo||[]).push(Do,$o)):Do==="children"?typeof $o!="string"&&typeof $o!="number"||(Eo=Eo||[]).push(Do,""+$o):Do!=="suppressContentEditableWarning"&&Do!=="suppressHydrationWarning"&&(ca$1.hasOwnProperty(Do)?($o!=null&&Do==="onScroll"&&G$2("scroll",va),Eo||So===$o||(Eo=[])):typeof $o=="object"&&$o!==null&&$o.$$typeof===Ga?$o.toString():(Eo=Eo||[]).push(Do,$o))}xo&&(Eo=Eo||[]).push("style",xo);var Do=Eo;(_o.updateQueue=Do)&&(_o.flags|=4)}};Ei$1=function(va,_o,xo,bo){xo!==bo&&(_o.flags|=4)};function Fi$1(va,_o){if(!lh)switch(va.tailMode){case"hidden":_o=va.tail;for(var xo=null;_o!==null;)_o.alternate!==null&&(xo=_o),_o=_o.sibling;xo===null?va.tail=null:xo.sibling=null;break;case"collapsed":xo=va.tail;for(var bo=null;xo!==null;)xo.alternate!==null&&(bo=xo),xo=xo.sibling;bo===null?_o||va.tail===null?va.tail=null:va.tail.sibling=null:bo.sibling=null}}function Gi$1(va,_o,xo){var bo=_o.pendingProps;switch(_o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(_o.type)&&Gf(),null;case 3:return fh(),H$2(N$3),H$2(M$2),uh(),bo=_o.stateNode,bo.pendingContext&&(bo.context=bo.pendingContext,bo.pendingContext=null),(va===null||va.child===null)&&(rh(_o)?_o.flags|=4:bo.hydrate||(_o.flags|=256)),Ci$1(_o),null;case 5:hh(_o);var wo=dh(ch.current);if(xo=_o.type,va!==null&&_o.stateNode!=null)Di$1(va,_o,xo,bo,wo),va.ref!==_o.ref&&(_o.flags|=128);else{if(!bo){if(_o.stateNode===null)throw Error(y$3(166));return null}if(va=dh(ah.current),rh(_o)){bo=_o.stateNode,xo=_o.type;var Eo=_o.memoizedProps;switch(bo[wf]=_o,bo[xf]=Eo,xo){case"dialog":G$2("cancel",bo),G$2("close",bo);break;case"iframe":case"object":case"embed":G$2("load",bo);break;case"video":case"audio":for(va=0;va<Xe$1.length;va++)G$2(Xe$1[va],bo);break;case"source":G$2("error",bo);break;case"img":case"image":case"link":G$2("error",bo),G$2("load",bo);break;case"details":G$2("toggle",bo);break;case"input":Za(bo,Eo),G$2("invalid",bo);break;case"select":bo._wrapperState={wasMultiple:!!Eo.multiple},G$2("invalid",bo);break;case"textarea":hb(bo,Eo),G$2("invalid",bo)}vb(xo,Eo),va=null;for(var To in Eo)Eo.hasOwnProperty(To)&&(wo=Eo[To],To==="children"?typeof wo=="string"?bo.textContent!==wo&&(va=["children",wo]):typeof wo=="number"&&bo.textContent!==""+wo&&(va=["children",""+wo]):ca$1.hasOwnProperty(To)&&wo!=null&&To==="onScroll"&&G$2("scroll",bo));switch(xo){case"input":Va(bo),cb(bo,Eo,!0);break;case"textarea":Va(bo),jb(bo);break;case"select":case"option":break;default:typeof Eo.onClick=="function"&&(bo.onclick=jf)}bo=va,_o.updateQueue=bo,bo!==null&&(_o.flags|=4)}else{switch(To=wo.nodeType===9?wo:wo.ownerDocument,va===kb.html&&(va=lb(xo)),va===kb.html?xo==="script"?(va=To.createElement("div"),va.innerHTML="<script><\/script>",va=va.removeChild(va.firstChild)):typeof bo.is=="string"?va=To.createElement(xo,{is:bo.is}):(va=To.createElement(xo),xo==="select"&&(To=va,bo.multiple?To.multiple=!0:bo.size&&(To.size=bo.size))):va=To.createElementNS(va,xo),va[wf]=_o,va[xf]=bo,Bi$1(va,_o,!1,!1),_o.stateNode=va,To=wb(xo,bo),xo){case"dialog":G$2("cancel",va),G$2("close",va),wo=bo;break;case"iframe":case"object":case"embed":G$2("load",va),wo=bo;break;case"video":case"audio":for(wo=0;wo<Xe$1.length;wo++)G$2(Xe$1[wo],va);wo=bo;break;case"source":G$2("error",va),wo=bo;break;case"img":case"image":case"link":G$2("error",va),G$2("load",va),wo=bo;break;case"details":G$2("toggle",va),wo=bo;break;case"input":Za(va,bo),wo=Ya(va,bo),G$2("invalid",va);break;case"option":wo=eb(va,bo);break;case"select":va._wrapperState={wasMultiple:!!bo.multiple},wo=m$3({},bo,{value:void 0}),G$2("invalid",va);break;case"textarea":hb(va,bo),wo=gb(va,bo),G$2("invalid",va);break;default:wo=bo}vb(xo,wo);var So=wo;for(Eo in So)if(So.hasOwnProperty(Eo)){var $o=So[Eo];Eo==="style"?tb(va,$o):Eo==="dangerouslySetInnerHTML"?($o=$o?$o.__html:void 0,$o!=null&&ob(va,$o)):Eo==="children"?typeof $o=="string"?(xo!=="textarea"||$o!=="")&&pb(va,$o):typeof $o=="number"&&pb(va,""+$o):Eo!=="suppressContentEditableWarning"&&Eo!=="suppressHydrationWarning"&&Eo!=="autoFocus"&&(ca$1.hasOwnProperty(Eo)?$o!=null&&Eo==="onScroll"&&G$2("scroll",va):$o!=null&&qa(va,Eo,$o,To))}switch(xo){case"input":Va(va),cb(va,bo,!1);break;case"textarea":Va(va),jb(va);break;case"option":bo.value!=null&&va.setAttribute("value",""+Sa(bo.value));break;case"select":va.multiple=!!bo.multiple,Eo=bo.value,Eo!=null?fb(va,!!bo.multiple,Eo,!1):bo.defaultValue!=null&&fb(va,!!bo.multiple,bo.defaultValue,!0);break;default:typeof wo.onClick=="function"&&(va.onclick=jf)}mf(xo,bo)&&(_o.flags|=4)}_o.ref!==null&&(_o.flags|=128)}return null;case 6:if(va&&_o.stateNode!=null)Ei$1(va,_o,va.memoizedProps,bo);else{if(typeof bo!="string"&&_o.stateNode===null)throw Error(y$3(166));xo=dh(ch.current),dh(ah.current),rh(_o)?(bo=_o.stateNode,xo=_o.memoizedProps,bo[wf]=_o,bo.nodeValue!==xo&&(_o.flags|=4)):(bo=(xo.nodeType===9?xo:xo.ownerDocument).createTextNode(bo),bo[wf]=_o,_o.stateNode=bo)}return null;case 13:return H$2(P$3),bo=_o.memoizedState,(_o.flags&64)!=0?(_o.lanes=xo,_o):(bo=bo!==null,xo=!1,va===null?_o.memoizedProps.fallback!==void 0&&rh(_o):xo=va.memoizedState!==null,bo&&!xo&&(_o.mode&2)!=0&&(va===null&&_o.memoizedProps.unstable_avoidThisFallback!==!0||(P$3.current&1)!=0?V$2===0&&(V$2=3):((V$2===0||V$2===3)&&(V$2=4),U$1===null||(Dg&134217727)==0&&(Hi$1&134217727)==0||Ii$1(U$1,W$3))),(bo||xo)&&(_o.flags|=4),null);case 4:return fh(),Ci$1(_o),va===null&&cf(_o.stateNode.containerInfo),null;case 10:return rg(_o),null;case 17:return Ff(_o.type)&&Gf(),null;case 19:if(H$2(P$3),bo=_o.memoizedState,bo===null)return null;if(Eo=(_o.flags&64)!=0,To=bo.rendering,To===null)if(Eo)Fi$1(bo,!1);else{if(V$2!==0||va!==null&&(va.flags&64)!=0)for(va=_o.child;va!==null;){if(To=ih(va),To!==null){for(_o.flags|=64,Fi$1(bo,!1),Eo=To.updateQueue,Eo!==null&&(_o.updateQueue=Eo,_o.flags|=4),bo.lastEffect===null&&(_o.firstEffect=null),_o.lastEffect=bo.lastEffect,bo=xo,xo=_o.child;xo!==null;)Eo=xo,va=bo,Eo.flags&=2,Eo.nextEffect=null,Eo.firstEffect=null,Eo.lastEffect=null,To=Eo.alternate,To===null?(Eo.childLanes=0,Eo.lanes=va,Eo.child=null,Eo.memoizedProps=null,Eo.memoizedState=null,Eo.updateQueue=null,Eo.dependencies=null,Eo.stateNode=null):(Eo.childLanes=To.childLanes,Eo.lanes=To.lanes,Eo.child=To.child,Eo.memoizedProps=To.memoizedProps,Eo.memoizedState=To.memoizedState,Eo.updateQueue=To.updateQueue,Eo.type=To.type,va=To.dependencies,Eo.dependencies=va===null?null:{lanes:va.lanes,firstContext:va.firstContext}),xo=xo.sibling;return I$2(P$3,P$3.current&1|2),_o.child}va=va.sibling}bo.tail!==null&&O$3()>Ji$1&&(_o.flags|=64,Eo=!0,Fi$1(bo,!1),_o.lanes=33554432)}else{if(!Eo)if(va=ih(To),va!==null){if(_o.flags|=64,Eo=!0,xo=va.updateQueue,xo!==null&&(_o.updateQueue=xo,_o.flags|=4),Fi$1(bo,!0),bo.tail===null&&bo.tailMode==="hidden"&&!To.alternate&&!lh)return _o=_o.lastEffect=bo.lastEffect,_o!==null&&(_o.nextEffect=null),null}else 2*O$3()-bo.renderingStartTime>Ji$1&&xo!==1073741824&&(_o.flags|=64,Eo=!0,Fi$1(bo,!1),_o.lanes=33554432);bo.isBackwards?(To.sibling=_o.child,_o.child=To):(xo=bo.last,xo!==null?xo.sibling=To:_o.child=To,bo.last=To)}return bo.tail!==null?(xo=bo.tail,bo.rendering=xo,bo.tail=xo.sibling,bo.lastEffect=_o.lastEffect,bo.renderingStartTime=O$3(),xo.sibling=null,_o=P$3.current,I$2(P$3,Eo?_o&1|2:_o&1),xo):null;case 23:case 24:return Ki$1(),va!==null&&va.memoizedState!==null!=(_o.memoizedState!==null)&&bo.mode!=="unstable-defer-without-hiding"&&(_o.flags|=4),null}throw Error(y$3(156,_o.tag))}function Li$1(va){switch(va.tag){case 1:Ff(va.type)&&Gf();var _o=va.flags;return _o&4096?(va.flags=_o&-4097|64,va):null;case 3:if(fh(),H$2(N$3),H$2(M$2),uh(),_o=va.flags,(_o&64)!=0)throw Error(y$3(285));return va.flags=_o&-4097|64,va;case 5:return hh(va),null;case 13:return H$2(P$3),_o=va.flags,_o&4096?(va.flags=_o&-4097|64,va):null;case 19:return H$2(P$3),null;case 4:return fh(),null;case 10:return rg(va),null;case 23:case 24:return Ki$1(),null;default:return null}}function Mi$1(va,_o){try{var xo="",bo=_o;do xo+=Qa(bo),bo=bo.return;while(bo);var wo=xo}catch(Eo){wo=`
Error generating stack: `+Eo.message+`
`+Eo.stack}return{value:va,source:_o,stack:wo}}function Ni$1(va,_o){try{console.error(_o.value)}catch(xo){setTimeout(function(){throw xo})}}var Oi$1=typeof WeakMap=="function"?WeakMap:Map;function Pi$1(va,_o,xo){xo=zg(-1,xo),xo.tag=3,xo.payload={element:null};var bo=_o.value;return xo.callback=function(){Qi$1||(Qi$1=!0,Ri$1=bo),Ni$1(va,_o)},xo}function Si$1(va,_o,xo){xo=zg(-1,xo),xo.tag=3;var bo=va.type.getDerivedStateFromError;if(typeof bo=="function"){var wo=_o.value;xo.payload=function(){return Ni$1(va,_o),bo(wo)}}var Eo=va.stateNode;return Eo!==null&&typeof Eo.componentDidCatch=="function"&&(xo.callback=function(){typeof bo!="function"&&(Ti$1===null?Ti$1=new Set([this]):Ti$1.add(this),Ni$1(va,_o));var To=_o.stack;this.componentDidCatch(_o.value,{componentStack:To!==null?To:""})}),xo}var Ui$1=typeof WeakSet=="function"?WeakSet:Set;function Vi$1(va){var _o=va.ref;if(_o!==null)if(typeof _o=="function")try{_o(null)}catch(xo){Wi$1(va,xo)}else _o.current=null}function Xi$1(va,_o){switch(_o.tag){case 0:case 11:case 15:case 22:return;case 1:if(_o.flags&256&&va!==null){var xo=va.memoizedProps,bo=va.memoizedState;va=_o.stateNode,_o=va.getSnapshotBeforeUpdate(_o.elementType===_o.type?xo:lg(_o.type,xo),bo),va.__reactInternalSnapshotBeforeUpdate=_o}return;case 3:_o.flags&256&&qf(_o.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$3(163))}function Yi$1(va,_o,xo){switch(xo.tag){case 0:case 11:case 15:case 22:if(_o=xo.updateQueue,_o=_o!==null?_o.lastEffect:null,_o!==null){va=_o=_o.next;do{if((va.tag&3)==3){var bo=va.create;va.destroy=bo()}va=va.next}while(va!==_o)}if(_o=xo.updateQueue,_o=_o!==null?_o.lastEffect:null,_o!==null){va=_o=_o.next;do{var wo=va;bo=wo.next,wo=wo.tag,(wo&4)!=0&&(wo&1)!=0&&(Zi$1(xo,va),$i$1(xo,va)),va=bo}while(va!==_o)}return;case 1:va=xo.stateNode,xo.flags&4&&(_o===null?va.componentDidMount():(bo=xo.elementType===xo.type?_o.memoizedProps:lg(xo.type,_o.memoizedProps),va.componentDidUpdate(bo,_o.memoizedState,va.__reactInternalSnapshotBeforeUpdate))),_o=xo.updateQueue,_o!==null&&Eg(xo,_o,va);return;case 3:if(_o=xo.updateQueue,_o!==null){if(va=null,xo.child!==null)switch(xo.child.tag){case 5:va=xo.child.stateNode;break;case 1:va=xo.child.stateNode}Eg(xo,_o,va)}return;case 5:va=xo.stateNode,_o===null&&xo.flags&4&&mf(xo.type,xo.memoizedProps)&&va.focus();return;case 6:return;case 4:return;case 12:return;case 13:xo.memoizedState===null&&(xo=xo.alternate,xo!==null&&(xo=xo.memoizedState,xo!==null&&(xo=xo.dehydrated,xo!==null&&Cc(xo))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$3(163))}function aj(va,_o){for(var xo=va;;){if(xo.tag===5){var bo=xo.stateNode;if(_o)bo=bo.style,typeof bo.setProperty=="function"?bo.setProperty("display","none","important"):bo.display="none";else{bo=xo.stateNode;var wo=xo.memoizedProps.style;wo=wo!=null&&wo.hasOwnProperty("display")?wo.display:null,bo.style.display=sb("display",wo)}}else if(xo.tag===6)xo.stateNode.nodeValue=_o?"":xo.memoizedProps;else if((xo.tag!==23&&xo.tag!==24||xo.memoizedState===null||xo===va)&&xo.child!==null){xo.child.return=xo,xo=xo.child;continue}if(xo===va)break;for(;xo.sibling===null;){if(xo.return===null||xo.return===va)return;xo=xo.return}xo.sibling.return=xo.return,xo=xo.sibling}}function bj(va,_o){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,_o)}catch{}switch(_o.tag){case 0:case 11:case 14:case 15:case 22:if(va=_o.updateQueue,va!==null&&(va=va.lastEffect,va!==null)){var xo=va=va.next;do{var bo=xo,wo=bo.destroy;if(bo=bo.tag,wo!==void 0)if((bo&4)!=0)Zi$1(_o,xo);else{bo=_o;try{wo()}catch(Eo){Wi$1(bo,Eo)}}xo=xo.next}while(xo!==va)}break;case 1:if(Vi$1(_o),va=_o.stateNode,typeof va.componentWillUnmount=="function")try{va.props=_o.memoizedProps,va.state=_o.memoizedState,va.componentWillUnmount()}catch(Eo){Wi$1(_o,Eo)}break;case 5:Vi$1(_o);break;case 4:cj(va,_o)}}function dj(va){va.alternate=null,va.child=null,va.dependencies=null,va.firstEffect=null,va.lastEffect=null,va.memoizedProps=null,va.memoizedState=null,va.pendingProps=null,va.return=null,va.updateQueue=null}function ej(va){return va.tag===5||va.tag===3||va.tag===4}function fj(va){e:{for(var _o=va.return;_o!==null;){if(ej(_o))break e;_o=_o.return}throw Error(y$3(160))}var xo=_o;switch(_o=xo.stateNode,xo.tag){case 5:var bo=!1;break;case 3:_o=_o.containerInfo,bo=!0;break;case 4:_o=_o.containerInfo,bo=!0;break;default:throw Error(y$3(161))}xo.flags&16&&(pb(_o,""),xo.flags&=-17);e:t:for(xo=va;;){for(;xo.sibling===null;){if(xo.return===null||ej(xo.return)){xo=null;break e}xo=xo.return}for(xo.sibling.return=xo.return,xo=xo.sibling;xo.tag!==5&&xo.tag!==6&&xo.tag!==18;){if(xo.flags&2||xo.child===null||xo.tag===4)continue t;xo.child.return=xo,xo=xo.child}if(!(xo.flags&2)){xo=xo.stateNode;break e}}bo?gj(va,xo,_o):hj(va,xo,_o)}function gj(va,_o,xo){var bo=va.tag,wo=bo===5||bo===6;if(wo)va=wo?va.stateNode:va.stateNode.instance,_o?xo.nodeType===8?xo.parentNode.insertBefore(va,_o):xo.insertBefore(va,_o):(xo.nodeType===8?(_o=xo.parentNode,_o.insertBefore(va,xo)):(_o=xo,_o.appendChild(va)),xo=xo._reactRootContainer,xo!=null||_o.onclick!==null||(_o.onclick=jf));else if(bo!==4&&(va=va.child,va!==null))for(gj(va,_o,xo),va=va.sibling;va!==null;)gj(va,_o,xo),va=va.sibling}function hj(va,_o,xo){var bo=va.tag,wo=bo===5||bo===6;if(wo)va=wo?va.stateNode:va.stateNode.instance,_o?xo.insertBefore(va,_o):xo.appendChild(va);else if(bo!==4&&(va=va.child,va!==null))for(hj(va,_o,xo),va=va.sibling;va!==null;)hj(va,_o,xo),va=va.sibling}function cj(va,_o){for(var xo=_o,bo=!1,wo,Eo;;){if(!bo){bo=xo.return;e:for(;;){if(bo===null)throw Error(y$3(160));switch(wo=bo.stateNode,bo.tag){case 5:Eo=!1;break e;case 3:wo=wo.containerInfo,Eo=!0;break e;case 4:wo=wo.containerInfo,Eo=!0;break e}bo=bo.return}bo=!0}if(xo.tag===5||xo.tag===6){e:for(var To=va,So=xo,$o=So;;)if(bj(To,$o),$o.child!==null&&$o.tag!==4)$o.child.return=$o,$o=$o.child;else{if($o===So)break e;for(;$o.sibling===null;){if($o.return===null||$o.return===So)break e;$o=$o.return}$o.sibling.return=$o.return,$o=$o.sibling}Eo?(To=wo,So=xo.stateNode,To.nodeType===8?To.parentNode.removeChild(So):To.removeChild(So)):wo.removeChild(xo.stateNode)}else if(xo.tag===4){if(xo.child!==null){wo=xo.stateNode.containerInfo,Eo=!0,xo.child.return=xo,xo=xo.child;continue}}else if(bj(va,xo),xo.child!==null){xo.child.return=xo,xo=xo.child;continue}if(xo===_o)break;for(;xo.sibling===null;){if(xo.return===null||xo.return===_o)return;xo=xo.return,xo.tag===4&&(bo=!1)}xo.sibling.return=xo.return,xo=xo.sibling}}function ij(va,_o){switch(_o.tag){case 0:case 11:case 14:case 15:case 22:var xo=_o.updateQueue;if(xo=xo!==null?xo.lastEffect:null,xo!==null){var bo=xo=xo.next;do(bo.tag&3)==3&&(va=bo.destroy,bo.destroy=void 0,va!==void 0&&va()),bo=bo.next;while(bo!==xo)}return;case 1:return;case 5:if(xo=_o.stateNode,xo!=null){bo=_o.memoizedProps;var wo=va!==null?va.memoizedProps:bo;va=_o.type;var Eo=_o.updateQueue;if(_o.updateQueue=null,Eo!==null){for(xo[xf]=bo,va==="input"&&bo.type==="radio"&&bo.name!=null&&$a(xo,bo),wb(va,wo),_o=wb(va,bo),wo=0;wo<Eo.length;wo+=2){var To=Eo[wo],So=Eo[wo+1];To==="style"?tb(xo,So):To==="dangerouslySetInnerHTML"?ob(xo,So):To==="children"?pb(xo,So):qa(xo,To,So,_o)}switch(va){case"input":ab(xo,bo);break;case"textarea":ib(xo,bo);break;case"select":va=xo._wrapperState.wasMultiple,xo._wrapperState.wasMultiple=!!bo.multiple,Eo=bo.value,Eo!=null?fb(xo,!!bo.multiple,Eo,!1):va!==!!bo.multiple&&(bo.defaultValue!=null?fb(xo,!!bo.multiple,bo.defaultValue,!0):fb(xo,!!bo.multiple,bo.multiple?[]:"",!1))}}}return;case 6:if(_o.stateNode===null)throw Error(y$3(162));_o.stateNode.nodeValue=_o.memoizedProps;return;case 3:xo=_o.stateNode,xo.hydrate&&(xo.hydrate=!1,Cc(xo.containerInfo));return;case 12:return;case 13:_o.memoizedState!==null&&(jj=O$3(),aj(_o.child,!0)),kj(_o);return;case 19:kj(_o);return;case 17:return;case 23:case 24:aj(_o,_o.memoizedState!==null);return}throw Error(y$3(163))}function kj(va){var _o=va.updateQueue;if(_o!==null){va.updateQueue=null;var xo=va.stateNode;xo===null&&(xo=va.stateNode=new Ui$1),_o.forEach(function(bo){var wo=lj.bind(null,va,bo);xo.has(bo)||(xo.add(bo),bo.then(wo,wo))})}}function mj(va,_o){return va!==null&&(va=va.memoizedState,va===null||va.dehydrated!==null)?(_o=_o.memoizedState,_o!==null&&_o.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$2=0,U$1=null,Y$2=null,W$3=0,qj=0,rj=Bf(0),V$2=0,sj=null,tj=0,Dg=0,Hi$1=0,uj=0,vj=null,jj=0,Ji$1=1/0;function wj(){Ji$1=O$3()+500}var Z$2=null,Qi$1=!1,Ri$1=null,Ti$1=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X$2&48)!=0?O$3():Fj!==-1?Fj:Fj=O$3()}function Ig(va){if(va=va.mode,(va&2)==0)return 1;if((va&4)==0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),va=Gj;var _o=4186112&~Hj;return _o&=-_o,_o===0&&(va=4186112&~va,_o=va&-va,_o===0&&(_o=8192)),_o}return va=eg(),(X$2&4)!=0&&va===98?va=Xc(12,Gj):(va=Sc(va),va=Xc(va,Gj)),va}function Jg(va,_o,xo){if(50<Dj)throw Dj=0,Ej=null,Error(y$3(185));if(va=Kj(va,_o),va===null)return null;$c(va,_o,xo),va===U$1&&(Hi$1|=_o,V$2===4&&Ii$1(va,W$3));var bo=eg();_o===1?(X$2&8)!=0&&(X$2&48)==0?Lj(va):(Mj(va,xo),X$2===0&&(wj(),ig())):((X$2&4)==0||bo!==98&&bo!==99||(Cj===null?Cj=new Set([va]):Cj.add(va)),Mj(va,xo)),vj=va}function Kj(va,_o){va.lanes|=_o;var xo=va.alternate;for(xo!==null&&(xo.lanes|=_o),xo=va,va=va.return;va!==null;)va.childLanes|=_o,xo=va.alternate,xo!==null&&(xo.childLanes|=_o),xo=va,va=va.return;return xo.tag===3?xo.stateNode:null}function Mj(va,_o){for(var xo=va.callbackNode,bo=va.suspendedLanes,wo=va.pingedLanes,Eo=va.expirationTimes,To=va.pendingLanes;0<To;){var So=31-Vc(To),$o=1<<So,Do=Eo[So];if(Do===-1){if(($o&bo)==0||($o&wo)!=0){Do=_o,Rc($o);var No=F$2;Eo[So]=10<=No?Do+250:6<=No?Do+5e3:-1}}else Do<=_o&&(va.expiredLanes|=$o);To&=~$o}if(bo=Uc(va,va===U$1?W$3:0),_o=F$2,bo===0)xo!==null&&(xo!==Zf&&Pf(xo),va.callbackNode=null,va.callbackPriority=0);else{if(xo!==null){if(va.callbackPriority===_o)return;xo!==Zf&&Pf(xo)}_o===15?(xo=Lj.bind(null,va),ag===null?(ag=[xo],bg=Of(Uf,jg)):ag.push(xo),xo=Zf):_o===14?xo=hg(99,Lj.bind(null,va)):(xo=Tc(_o),xo=hg(xo,Nj.bind(null,va))),va.callbackPriority=_o,va.callbackNode=xo}}function Nj(va){if(Fj=-1,Hj=Gj=0,(X$2&48)!=0)throw Error(y$3(327));var _o=va.callbackNode;if(Oj()&&va.callbackNode!==_o)return null;var xo=Uc(va,va===U$1?W$3:0);if(xo===0)return null;var bo=xo,wo=X$2;X$2|=16;var Eo=Pj();(U$1!==va||W$3!==bo)&&(wj(),Qj(va,bo));do try{Rj();break}catch(So){Sj(va,So)}while(1);if(qg(),oj.current=Eo,X$2=wo,Y$2!==null?bo=0:(U$1=null,W$3=0,bo=V$2),(tj&Hi$1)!=0)Qj(va,0);else if(bo!==0){if(bo===2&&(X$2|=64,va.hydrate&&(va.hydrate=!1,qf(va.containerInfo)),xo=Wc(va),xo!==0&&(bo=Tj(va,xo))),bo===1)throw _o=sj,Qj(va,0),Ii$1(va,xo),Mj(va,O$3()),_o;switch(va.finishedWork=va.current.alternate,va.finishedLanes=xo,bo){case 0:case 1:throw Error(y$3(345));case 2:Uj(va);break;case 3:if(Ii$1(va,xo),(xo&62914560)===xo&&(bo=jj+500-O$3(),10<bo)){if(Uc(va,0)!==0)break;if(wo=va.suspendedLanes,(wo&xo)!==xo){Hg(),va.pingedLanes|=va.suspendedLanes&wo;break}va.timeoutHandle=of(Uj.bind(null,va),bo);break}Uj(va);break;case 4:if(Ii$1(va,xo),(xo&4186112)===xo)break;for(bo=va.eventTimes,wo=-1;0<xo;){var To=31-Vc(xo);Eo=1<<To,To=bo[To],To>wo&&(wo=To),xo&=~Eo}if(xo=wo,xo=O$3()-xo,xo=(120>xo?120:480>xo?480:1080>xo?1080:1920>xo?1920:3e3>xo?3e3:4320>xo?4320:1960*nj(xo/1960))-xo,10<xo){va.timeoutHandle=of(Uj.bind(null,va),xo);break}Uj(va);break;case 5:Uj(va);break;default:throw Error(y$3(329))}}return Mj(va,O$3()),va.callbackNode===_o?Nj.bind(null,va):null}function Ii$1(va,_o){for(_o&=~uj,_o&=~Hi$1,va.suspendedLanes|=_o,va.pingedLanes&=~_o,va=va.expirationTimes;0<_o;){var xo=31-Vc(_o),bo=1<<xo;va[xo]=-1,_o&=~bo}}function Lj(va){if((X$2&48)!=0)throw Error(y$3(327));if(Oj(),va===U$1&&(va.expiredLanes&W$3)!=0){var _o=W$3,xo=Tj(va,_o);(tj&Hi$1)!=0&&(_o=Uc(va,_o),xo=Tj(va,_o))}else _o=Uc(va,0),xo=Tj(va,_o);if(va.tag!==0&&xo===2&&(X$2|=64,va.hydrate&&(va.hydrate=!1,qf(va.containerInfo)),_o=Wc(va),_o!==0&&(xo=Tj(va,_o))),xo===1)throw xo=sj,Qj(va,0),Ii$1(va,_o),Mj(va,O$3()),xo;return va.finishedWork=va.current.alternate,va.finishedLanes=_o,Uj(va),Mj(va,O$3()),null}function Vj(){if(Cj!==null){var va=Cj;Cj=null,va.forEach(function(_o){_o.expiredLanes|=24&_o.pendingLanes,Mj(_o,O$3())})}ig()}function Wj(va,_o){var xo=X$2;X$2|=1;try{return va(_o)}finally{X$2=xo,X$2===0&&(wj(),ig())}}function Xj(va,_o){var xo=X$2;X$2&=-2,X$2|=8;try{return va(_o)}finally{X$2=xo,X$2===0&&(wj(),ig())}}function ni$1(va,_o){I$2(rj,qj),qj|=_o,tj|=_o}function Ki$1(){qj=rj.current,H$2(rj)}function Qj(va,_o){va.finishedWork=null,va.finishedLanes=0;var xo=va.timeoutHandle;if(xo!==-1&&(va.timeoutHandle=-1,pf(xo)),Y$2!==null)for(xo=Y$2.return;xo!==null;){var bo=xo;switch(bo.tag){case 1:bo=bo.type.childContextTypes,bo!=null&&Gf();break;case 3:fh(),H$2(N$3),H$2(M$2),uh();break;case 5:hh(bo);break;case 4:fh();break;case 13:H$2(P$3);break;case 19:H$2(P$3);break;case 10:rg(bo);break;case 23:case 24:Ki$1()}xo=xo.return}U$1=va,Y$2=Tg(va.current,null),W$3=qj=tj=_o,V$2=0,sj=null,uj=Hi$1=Dg=0}function Sj(va,_o){do{var xo=Y$2;try{if(qg(),vh.current=Gh,yh){for(var bo=R$3.memoizedState;bo!==null;){var wo=bo.queue;wo!==null&&(wo.pending=null),bo=bo.next}yh=!1}if(xh=0,T$1=S$2=R$3=null,zh=!1,pj.current=null,xo===null||xo.return===null){V$2=1,sj=_o,Y$2=null;break}e:{var Eo=va,To=xo.return,So=xo,$o=_o;if(_o=W$3,So.flags|=2048,So.firstEffect=So.lastEffect=null,$o!==null&&typeof $o=="object"&&typeof $o.then=="function"){var Do=$o;if((So.mode&2)==0){var No=So.alternate;No?(So.updateQueue=No.updateQueue,So.memoizedState=No.memoizedState,So.lanes=No.lanes):(So.updateQueue=null,So.memoizedState=null)}var Oo=(P$3.current&1)!=0,Lo=To;do{var Co;if(Co=Lo.tag===13){var Ro=Lo.memoizedState;if(Ro!==null)Co=Ro.dehydrated!==null;else{var jo=Lo.memoizedProps;Co=jo.fallback===void 0?!1:jo.unstable_avoidThisFallback!==!0?!0:!Oo}}if(Co){var zo=Lo.updateQueue;if(zo===null){var Io=new Set;Io.add(Do),Lo.updateQueue=Io}else zo.add(Do);if((Lo.mode&2)==0){if(Lo.flags|=64,So.flags|=16384,So.flags&=-2981,So.tag===1)if(So.alternate===null)So.tag=17;else{var Po=zg(-1,1);Po.tag=2,Ag(So,Po)}So.lanes|=1;break e}$o=void 0,So=_o;var Bo=Eo.pingCache;if(Bo===null?(Bo=Eo.pingCache=new Oi$1,$o=new Set,Bo.set(Do,$o)):($o=Bo.get(Do),$o===void 0&&($o=new Set,Bo.set(Do,$o))),!$o.has(So)){$o.add(So);var ko=Yj.bind(null,Eo,Do,So);Do.then(ko,ko)}Lo.flags|=4096,Lo.lanes=_o;break e}Lo=Lo.return}while(Lo!==null);$o=Error((Ra(So.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V$2!==5&&(V$2=2),$o=Mi$1($o,So),Lo=To;do{switch(Lo.tag){case 3:Eo=$o,Lo.flags|=4096,_o&=-_o,Lo.lanes|=_o;var Uo=Pi$1(Lo,Eo,_o);Bg(Lo,Uo);break e;case 1:Eo=$o;var Qo=Lo.type,qo=Lo.stateNode;if((Lo.flags&64)==0&&(typeof Qo.getDerivedStateFromError=="function"||qo!==null&&typeof qo.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(qo)))){Lo.flags|=4096,_o&=-_o,Lo.lanes|=_o;var Zo=Si$1(Lo,Eo,_o);Bg(Lo,Zo);break e}}Lo=Lo.return}while(Lo!==null)}Zj(xo)}catch(Xo){_o=Xo,Y$2===xo&&xo!==null&&(Y$2=xo=xo.return);continue}break}while(1)}function Pj(){var va=oj.current;return oj.current=Gh,va===null?Gh:va}function Tj(va,_o){var xo=X$2;X$2|=16;var bo=Pj();U$1===va&&W$3===_o||Qj(va,_o);do try{ak();break}catch(wo){Sj(va,wo)}while(1);if(qg(),X$2=xo,oj.current=bo,Y$2!==null)throw Error(y$3(261));return U$1=null,W$3=0,V$2}function ak(){for(;Y$2!==null;)bk(Y$2)}function Rj(){for(;Y$2!==null&&!Qf();)bk(Y$2)}function bk(va){var _o=ck(va.alternate,va,qj);va.memoizedProps=va.pendingProps,_o===null?Zj(va):Y$2=_o,pj.current=null}function Zj(va){var _o=va;do{var xo=_o.alternate;if(va=_o.return,(_o.flags&2048)==0){if(xo=Gi$1(xo,_o,qj),xo!==null){Y$2=xo;return}if(xo=_o,xo.tag!==24&&xo.tag!==23||xo.memoizedState===null||(qj&1073741824)!=0||(xo.mode&4)==0){for(var bo=0,wo=xo.child;wo!==null;)bo|=wo.lanes|wo.childLanes,wo=wo.sibling;xo.childLanes=bo}va!==null&&(va.flags&2048)==0&&(va.firstEffect===null&&(va.firstEffect=_o.firstEffect),_o.lastEffect!==null&&(va.lastEffect!==null&&(va.lastEffect.nextEffect=_o.firstEffect),va.lastEffect=_o.lastEffect),1<_o.flags&&(va.lastEffect!==null?va.lastEffect.nextEffect=_o:va.firstEffect=_o,va.lastEffect=_o))}else{if(xo=Li$1(_o),xo!==null){xo.flags&=2047,Y$2=xo;return}va!==null&&(va.firstEffect=va.lastEffect=null,va.flags|=2048)}if(_o=_o.sibling,_o!==null){Y$2=_o;return}Y$2=_o=va}while(_o!==null);V$2===0&&(V$2=5)}function Uj(va){var _o=eg();return gg(99,dk.bind(null,va,_o)),null}function dk(va,_o){do Oj();while(yj!==null);if((X$2&48)!=0)throw Error(y$3(327));var xo=va.finishedWork;if(xo===null)return null;if(va.finishedWork=null,va.finishedLanes=0,xo===va.current)throw Error(y$3(177));va.callbackNode=null;var bo=xo.lanes|xo.childLanes,wo=bo,Eo=va.pendingLanes&~wo;va.pendingLanes=wo,va.suspendedLanes=0,va.pingedLanes=0,va.expiredLanes&=wo,va.mutableReadLanes&=wo,va.entangledLanes&=wo,wo=va.entanglements;for(var To=va.eventTimes,So=va.expirationTimes;0<Eo;){var $o=31-Vc(Eo),Do=1<<$o;wo[$o]=0,To[$o]=-1,So[$o]=-1,Eo&=~Do}if(Cj!==null&&(bo&24)==0&&Cj.has(va)&&Cj.delete(va),va===U$1&&(Y$2=U$1=null,W$3=0),1<xo.flags?xo.lastEffect!==null?(xo.lastEffect.nextEffect=xo,bo=xo.firstEffect):bo=xo:bo=xo.firstEffect,bo!==null){if(wo=X$2,X$2|=32,pj.current=null,kf=fd,To=Ne$1(),Oe$1(To)){if("selectionStart"in To)So={start:To.selectionStart,end:To.selectionEnd};else e:if(So=(So=To.ownerDocument)&&So.defaultView||window,(Do=So.getSelection&&So.getSelection())&&Do.rangeCount!==0){So=Do.anchorNode,Eo=Do.anchorOffset,$o=Do.focusNode,Do=Do.focusOffset;try{So.nodeType,$o.nodeType}catch{So=null;break e}var No=0,Oo=-1,Lo=-1,Co=0,Ro=0,jo=To,zo=null;t:for(;;){for(var Io;jo!==So||Eo!==0&&jo.nodeType!==3||(Oo=No+Eo),jo!==$o||Do!==0&&jo.nodeType!==3||(Lo=No+Do),jo.nodeType===3&&(No+=jo.nodeValue.length),(Io=jo.firstChild)!==null;)zo=jo,jo=Io;for(;;){if(jo===To)break t;if(zo===So&&++Co===Eo&&(Oo=No),zo===$o&&++Ro===Do&&(Lo=No),(Io=jo.nextSibling)!==null)break;jo=zo,zo=jo.parentNode}jo=Io}So=Oo===-1||Lo===-1?null:{start:Oo,end:Lo}}else So=null;So=So||{start:0,end:0}}else So=null;lf={focusedElem:To,selectionRange:So},fd=!1,Ij=null,Jj=!1,Z$2=bo;do try{ek()}catch(Xo){if(Z$2===null)throw Error(y$3(330));Wi$1(Z$2,Xo),Z$2=Z$2.nextEffect}while(Z$2!==null);Ij=null,Z$2=bo;do try{for(To=va;Z$2!==null;){var Po=Z$2.flags;if(Po&16&&pb(Z$2.stateNode,""),Po&128){var Bo=Z$2.alternate;if(Bo!==null){var ko=Bo.ref;ko!==null&&(typeof ko=="function"?ko(null):ko.current=null)}}switch(Po&1038){case 2:fj(Z$2),Z$2.flags&=-3;break;case 6:fj(Z$2),Z$2.flags&=-3,ij(Z$2.alternate,Z$2);break;case 1024:Z$2.flags&=-1025;break;case 1028:Z$2.flags&=-1025,ij(Z$2.alternate,Z$2);break;case 4:ij(Z$2.alternate,Z$2);break;case 8:So=Z$2,cj(To,So);var Uo=So.alternate;dj(So),Uo!==null&&dj(Uo)}Z$2=Z$2.nextEffect}}catch(Xo){if(Z$2===null)throw Error(y$3(330));Wi$1(Z$2,Xo),Z$2=Z$2.nextEffect}while(Z$2!==null);if(ko=lf,Bo=Ne$1(),Po=ko.focusedElem,To=ko.selectionRange,Bo!==Po&&Po&&Po.ownerDocument&&Me$1(Po.ownerDocument.documentElement,Po)){for(To!==null&&Oe$1(Po)&&(Bo=To.start,ko=To.end,ko===void 0&&(ko=Bo),"selectionStart"in Po?(Po.selectionStart=Bo,Po.selectionEnd=Math.min(ko,Po.value.length)):(ko=(Bo=Po.ownerDocument||document)&&Bo.defaultView||window,ko.getSelection&&(ko=ko.getSelection(),So=Po.textContent.length,Uo=Math.min(To.start,So),To=To.end===void 0?Uo:Math.min(To.end,So),!ko.extend&&Uo>To&&(So=To,To=Uo,Uo=So),So=Le$1(Po,Uo),Eo=Le$1(Po,To),So&&Eo&&(ko.rangeCount!==1||ko.anchorNode!==So.node||ko.anchorOffset!==So.offset||ko.focusNode!==Eo.node||ko.focusOffset!==Eo.offset)&&(Bo=Bo.createRange(),Bo.setStart(So.node,So.offset),ko.removeAllRanges(),Uo>To?(ko.addRange(Bo),ko.extend(Eo.node,Eo.offset)):(Bo.setEnd(Eo.node,Eo.offset),ko.addRange(Bo)))))),Bo=[],ko=Po;ko=ko.parentNode;)ko.nodeType===1&&Bo.push({element:ko,left:ko.scrollLeft,top:ko.scrollTop});for(typeof Po.focus=="function"&&Po.focus(),Po=0;Po<Bo.length;Po++)ko=Bo[Po],ko.element.scrollLeft=ko.left,ko.element.scrollTop=ko.top}fd=!!kf,lf=kf=null,va.current=xo,Z$2=bo;do try{for(Po=va;Z$2!==null;){var Qo=Z$2.flags;if(Qo&36&&Yi$1(Po,Z$2.alternate,Z$2),Qo&128){Bo=void 0;var qo=Z$2.ref;if(qo!==null){var Zo=Z$2.stateNode;switch(Z$2.tag){case 5:Bo=Zo;break;default:Bo=Zo}typeof qo=="function"?qo(Bo):qo.current=Bo}}Z$2=Z$2.nextEffect}}catch(Xo){if(Z$2===null)throw Error(y$3(330));Wi$1(Z$2,Xo),Z$2=Z$2.nextEffect}while(Z$2!==null);Z$2=null,$f(),X$2=wo}else va.current=xo;if(xj)xj=!1,yj=va,zj=_o;else for(Z$2=bo;Z$2!==null;)_o=Z$2.nextEffect,Z$2.nextEffect=null,Z$2.flags&8&&(Qo=Z$2,Qo.sibling=null,Qo.stateNode=null),Z$2=_o;if(bo=va.pendingLanes,bo===0&&(Ti$1=null),bo===1?va===Ej?Dj++:(Dj=0,Ej=va):Dj=0,xo=xo.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,xo,void 0,(xo.current.flags&64)==64)}catch{}if(Mj(va,O$3()),Qi$1)throw Qi$1=!1,va=Ri$1,Ri$1=null,va;return(X$2&8)!=0||ig(),null}function ek(){for(;Z$2!==null;){var va=Z$2.alternate;Jj||Ij===null||((Z$2.flags&8)!=0?dc(Z$2,Ij)&&(Jj=!0):Z$2.tag===13&&mj(va,Z$2)&&dc(Z$2,Ij)&&(Jj=!0));var _o=Z$2.flags;(_o&256)!=0&&Xi$1(va,Z$2),(_o&512)==0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z$2=Z$2.nextEffect}}function Oj(){if(zj!==90){var va=97<zj?97:zj;return zj=90,gg(va,fk)}return!1}function $i$1(va,_o){Aj.push(_o,va),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi$1(va,_o){Bj.push(_o,va),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var va=yj;if(yj=null,(X$2&48)!=0)throw Error(y$3(331));var _o=X$2;X$2|=32;var xo=Bj;Bj=[];for(var bo=0;bo<xo.length;bo+=2){var wo=xo[bo],Eo=xo[bo+1],To=wo.destroy;if(wo.destroy=void 0,typeof To=="function")try{To()}catch($o){if(Eo===null)throw Error(y$3(330));Wi$1(Eo,$o)}}for(xo=Aj,Aj=[],bo=0;bo<xo.length;bo+=2){wo=xo[bo],Eo=xo[bo+1];try{var So=wo.create;wo.destroy=So()}catch($o){if(Eo===null)throw Error(y$3(330));Wi$1(Eo,$o)}}for(So=va.current.firstEffect;So!==null;)va=So.nextEffect,So.nextEffect=null,So.flags&8&&(So.sibling=null,So.stateNode=null),So=va;return X$2=_o,ig(),!0}function gk(va,_o,xo){_o=Mi$1(xo,_o),_o=Pi$1(va,_o,1),Ag(va,_o),_o=Hg(),va=Kj(va,1),va!==null&&($c(va,1,_o),Mj(va,_o))}function Wi$1(va,_o){if(va.tag===3)gk(va,va,_o);else for(var xo=va.return;xo!==null;){if(xo.tag===3){gk(xo,va,_o);break}else if(xo.tag===1){var bo=xo.stateNode;if(typeof xo.type.getDerivedStateFromError=="function"||typeof bo.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(bo))){va=Mi$1(_o,va);var wo=Si$1(xo,va,1);if(Ag(xo,wo),wo=Hg(),xo=Kj(xo,1),xo!==null)$c(xo,1,wo),Mj(xo,wo);else if(typeof bo.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(bo)))try{bo.componentDidCatch(_o,va)}catch{}break}}xo=xo.return}}function Yj(va,_o,xo){var bo=va.pingCache;bo!==null&&bo.delete(_o),_o=Hg(),va.pingedLanes|=va.suspendedLanes&xo,U$1===va&&(W$3&xo)===xo&&(V$2===4||V$2===3&&(W$3&62914560)===W$3&&500>O$3()-jj?Qj(va,0):uj|=xo),Mj(va,_o)}function lj(va,_o){var xo=va.stateNode;xo!==null&&xo.delete(_o),_o=0,_o===0&&(_o=va.mode,(_o&2)==0?_o=1:(_o&4)==0?_o=eg()===99?1:2:(Gj===0&&(Gj=tj),_o=Yc(62914560&~Gj),_o===0&&(_o=4194304))),xo=Hg(),va=Kj(va,_o),va!==null&&($c(va,_o,xo),Mj(va,xo))}var ck;ck=function(va,_o,xo){var bo=_o.lanes;if(va!==null)if(va.memoizedProps!==_o.pendingProps||N$3.current)ug=!0;else if((xo&bo)!=0)ug=(va.flags&16384)!=0;else{switch(ug=!1,_o.tag){case 3:ri$1(_o),sh();break;case 5:gh(_o);break;case 1:Ff(_o.type)&&Jf(_o);break;case 4:eh(_o,_o.stateNode.containerInfo);break;case 10:bo=_o.memoizedProps.value;var wo=_o.type._context;I$2(mg,wo._currentValue),wo._currentValue=bo;break;case 13:if(_o.memoizedState!==null)return(xo&_o.child.childLanes)!=0?ti$1(va,_o,xo):(I$2(P$3,P$3.current&1),_o=hi$1(va,_o,xo),_o!==null?_o.sibling:null);I$2(P$3,P$3.current&1);break;case 19:if(bo=(xo&_o.childLanes)!=0,(va.flags&64)!=0){if(bo)return Ai$1(va,_o,xo);_o.flags|=64}if(wo=_o.memoizedState,wo!==null&&(wo.rendering=null,wo.tail=null,wo.lastEffect=null),I$2(P$3,P$3.current),bo)break;return null;case 23:case 24:return _o.lanes=0,mi$1(va,_o,xo)}return hi$1(va,_o,xo)}else ug=!1;switch(_o.lanes=0,_o.tag){case 2:if(bo=_o.type,va!==null&&(va.alternate=null,_o.alternate=null,_o.flags|=2),va=_o.pendingProps,wo=Ef(_o,M$2.current),tg(_o,xo),wo=Ch(null,_o,bo,va,wo,xo),_o.flags|=1,typeof wo=="object"&&wo!==null&&typeof wo.render=="function"&&wo.$$typeof===void 0){if(_o.tag=1,_o.memoizedState=null,_o.updateQueue=null,Ff(bo)){var Eo=!0;Jf(_o)}else Eo=!1;_o.memoizedState=wo.state!==null&&wo.state!==void 0?wo.state:null,xg(_o);var To=bo.getDerivedStateFromProps;typeof To=="function"&&Gg(_o,bo,To,va),wo.updater=Kg,_o.stateNode=wo,wo._reactInternals=_o,Og(_o,bo,va,xo),_o=qi$1(null,_o,bo,!0,Eo,xo)}else _o.tag=0,fi$1(null,_o,wo,xo),_o=_o.child;return _o;case 16:wo=_o.elementType;e:{switch(va!==null&&(va.alternate=null,_o.alternate=null,_o.flags|=2),va=_o.pendingProps,Eo=wo._init,wo=Eo(wo._payload),_o.type=wo,Eo=_o.tag=hk(wo),va=lg(wo,va),Eo){case 0:_o=li$1(null,_o,wo,va,xo);break e;case 1:_o=pi$1(null,_o,wo,va,xo);break e;case 11:_o=gi$1(null,_o,wo,va,xo);break e;case 14:_o=ii$1(null,_o,wo,lg(wo.type,va),bo,xo);break e}throw Error(y$3(306,wo,""))}return _o;case 0:return bo=_o.type,wo=_o.pendingProps,wo=_o.elementType===bo?wo:lg(bo,wo),li$1(va,_o,bo,wo,xo);case 1:return bo=_o.type,wo=_o.pendingProps,wo=_o.elementType===bo?wo:lg(bo,wo),pi$1(va,_o,bo,wo,xo);case 3:if(ri$1(_o),bo=_o.updateQueue,va===null||bo===null)throw Error(y$3(282));if(bo=_o.pendingProps,wo=_o.memoizedState,wo=wo!==null?wo.element:null,yg(va,_o),Cg(_o,bo,null,xo),bo=_o.memoizedState.element,bo===wo)sh(),_o=hi$1(va,_o,xo);else{if(wo=_o.stateNode,(Eo=wo.hydrate)&&(kh=rf(_o.stateNode.containerInfo.firstChild),jh=_o,Eo=lh=!0),Eo){if(va=wo.mutableSourceEagerHydrationData,va!=null)for(wo=0;wo<va.length;wo+=2)Eo=va[wo],Eo._workInProgressVersionPrimary=va[wo+1],th.push(Eo);for(xo=Zg(_o,null,bo,xo),_o.child=xo;xo;)xo.flags=xo.flags&-3|1024,xo=xo.sibling}else fi$1(va,_o,bo,xo),sh();_o=_o.child}return _o;case 5:return gh(_o),va===null&&ph(_o),bo=_o.type,wo=_o.pendingProps,Eo=va!==null?va.memoizedProps:null,To=wo.children,nf(bo,wo)?To=null:Eo!==null&&nf(bo,Eo)&&(_o.flags|=16),oi$1(va,_o),fi$1(va,_o,To,xo),_o.child;case 6:return va===null&&ph(_o),null;case 13:return ti$1(va,_o,xo);case 4:return eh(_o,_o.stateNode.containerInfo),bo=_o.pendingProps,va===null?_o.child=Yg(_o,null,bo,xo):fi$1(va,_o,bo,xo),_o.child;case 11:return bo=_o.type,wo=_o.pendingProps,wo=_o.elementType===bo?wo:lg(bo,wo),gi$1(va,_o,bo,wo,xo);case 7:return fi$1(va,_o,_o.pendingProps,xo),_o.child;case 8:return fi$1(va,_o,_o.pendingProps.children,xo),_o.child;case 12:return fi$1(va,_o,_o.pendingProps.children,xo),_o.child;case 10:e:{bo=_o.type._context,wo=_o.pendingProps,To=_o.memoizedProps,Eo=wo.value;var So=_o.type._context;if(I$2(mg,So._currentValue),So._currentValue=Eo,To!==null)if(So=To.value,Eo=He$1(So,Eo)?0:(typeof bo._calculateChangedBits=="function"?bo._calculateChangedBits(So,Eo):1073741823)|0,Eo===0){if(To.children===wo.children&&!N$3.current){_o=hi$1(va,_o,xo);break e}}else for(So=_o.child,So!==null&&(So.return=_o);So!==null;){var $o=So.dependencies;if($o!==null){To=So.child;for(var Do=$o.firstContext;Do!==null;){if(Do.context===bo&&(Do.observedBits&Eo)!=0){So.tag===1&&(Do=zg(-1,xo&-xo),Do.tag=2,Ag(So,Do)),So.lanes|=xo,Do=So.alternate,Do!==null&&(Do.lanes|=xo),sg(So.return,xo),$o.lanes|=xo;break}Do=Do.next}}else To=So.tag===10&&So.type===_o.type?null:So.child;if(To!==null)To.return=So;else for(To=So;To!==null;){if(To===_o){To=null;break}if(So=To.sibling,So!==null){So.return=To.return,To=So;break}To=To.return}So=To}fi$1(va,_o,wo.children,xo),_o=_o.child}return _o;case 9:return wo=_o.type,Eo=_o.pendingProps,bo=Eo.children,tg(_o,xo),wo=vg(wo,Eo.unstable_observedBits),bo=bo(wo),_o.flags|=1,fi$1(va,_o,bo,xo),_o.child;case 14:return wo=_o.type,Eo=lg(wo,_o.pendingProps),Eo=lg(wo.type,Eo),ii$1(va,_o,wo,Eo,bo,xo);case 15:return ki$1(va,_o,_o.type,_o.pendingProps,bo,xo);case 17:return bo=_o.type,wo=_o.pendingProps,wo=_o.elementType===bo?wo:lg(bo,wo),va!==null&&(va.alternate=null,_o.alternate=null,_o.flags|=2),_o.tag=1,Ff(bo)?(va=!0,Jf(_o)):va=!1,tg(_o,xo),Mg(_o,bo,wo),Og(_o,bo,wo,xo),qi$1(null,_o,bo,!0,va,xo);case 19:return Ai$1(va,_o,xo);case 23:return mi$1(va,_o,xo);case 24:return mi$1(va,_o,xo)}throw Error(y$3(156,_o.tag))};function ik(va,_o,xo,bo){this.tag=va,this.key=xo,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=bo,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(va,_o,xo,bo){return new ik(va,_o,xo,bo)}function ji$1(va){return va=va.prototype,!(!va||!va.isReactComponent)}function hk(va){if(typeof va=="function")return ji$1(va)?1:0;if(va!=null){if(va=va.$$typeof,va===Aa)return 11;if(va===Da)return 14}return 2}function Tg(va,_o){var xo=va.alternate;return xo===null?(xo=nh(va.tag,_o,va.key,va.mode),xo.elementType=va.elementType,xo.type=va.type,xo.stateNode=va.stateNode,xo.alternate=va,va.alternate=xo):(xo.pendingProps=_o,xo.type=va.type,xo.flags=0,xo.nextEffect=null,xo.firstEffect=null,xo.lastEffect=null),xo.childLanes=va.childLanes,xo.lanes=va.lanes,xo.child=va.child,xo.memoizedProps=va.memoizedProps,xo.memoizedState=va.memoizedState,xo.updateQueue=va.updateQueue,_o=va.dependencies,xo.dependencies=_o===null?null:{lanes:_o.lanes,firstContext:_o.firstContext},xo.sibling=va.sibling,xo.index=va.index,xo.ref=va.ref,xo}function Vg(va,_o,xo,bo,wo,Eo){var To=2;if(bo=va,typeof va=="function")ji$1(va)&&(To=1);else if(typeof va=="string")To=5;else e:switch(va){case ua:return Xg(xo.children,wo,Eo,_o);case Ha:To=8,wo|=16;break;case wa:To=8,wo|=1;break;case xa:return va=nh(12,xo,_o,wo|8),va.elementType=xa,va.type=xa,va.lanes=Eo,va;case Ba:return va=nh(13,xo,_o,wo),va.type=Ba,va.elementType=Ba,va.lanes=Eo,va;case Ca:return va=nh(19,xo,_o,wo),va.elementType=Ca,va.lanes=Eo,va;case Ia:return vi$1(xo,wo,Eo,_o);case Ja:return va=nh(24,xo,_o,wo),va.elementType=Ja,va.lanes=Eo,va;default:if(typeof va=="object"&&va!==null)switch(va.$$typeof){case ya:To=10;break e;case za:To=9;break e;case Aa:To=11;break e;case Da:To=14;break e;case Ea:To=16,bo=null;break e;case Fa:To=22;break e}throw Error(y$3(130,va==null?va:typeof va,""))}return _o=nh(To,xo,_o,wo),_o.elementType=va,_o.type=bo,_o.lanes=Eo,_o}function Xg(va,_o,xo,bo){return va=nh(7,va,bo,_o),va.lanes=xo,va}function vi$1(va,_o,xo,bo){return va=nh(23,va,bo,_o),va.elementType=Ia,va.lanes=xo,va}function Ug(va,_o,xo){return va=nh(6,va,null,_o),va.lanes=xo,va}function Wg(va,_o,xo){return _o=nh(4,va.children!==null?va.children:[],va.key,_o),_o.lanes=xo,_o.stateNode={containerInfo:va.containerInfo,pendingChildren:null,implementation:va.implementation},_o}function jk(va,_o,xo){this.tag=_o,this.containerInfo=va,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=xo,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(va,_o,xo){var bo=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:bo==null?null:""+bo,children:va,containerInfo:_o,implementation:xo}}function lk(va,_o,xo,bo){var wo=_o.current,Eo=Hg(),To=Ig(wo);e:if(xo){xo=xo._reactInternals;t:{if(Zb(xo)!==xo||xo.tag!==1)throw Error(y$3(170));var So=xo;do{switch(So.tag){case 3:So=So.stateNode.context;break t;case 1:if(Ff(So.type)){So=So.stateNode.__reactInternalMemoizedMergedChildContext;break t}}So=So.return}while(So!==null);throw Error(y$3(171))}if(xo.tag===1){var $o=xo.type;if(Ff($o)){xo=If(xo,$o,So);break e}}xo=So}else xo=Cf;return _o.context===null?_o.context=xo:_o.pendingContext=xo,_o=zg(Eo,To),_o.payload={element:va},bo=bo===void 0?null:bo,bo!==null&&(_o.callback=bo),Ag(wo,_o),Jg(wo,To,Eo),To}function mk(va){if(va=va.current,!va.child)return null;switch(va.child.tag){case 5:return va.child.stateNode;default:return va.child.stateNode}}function nk(va,_o){if(va=va.memoizedState,va!==null&&va.dehydrated!==null){var xo=va.retryLane;va.retryLane=xo!==0&&xo<_o?xo:_o}}function ok(va,_o){nk(va,_o),(va=va.alternate)&&nk(va,_o)}function pk(){return null}function qk(va,_o,xo){var bo=xo!=null&&xo.hydrationOptions!=null&&xo.hydrationOptions.mutableSources||null;if(xo=new jk(va,_o,xo!=null&&xo.hydrate===!0),_o=nh(3,null,null,_o===2?7:_o===1?3:0),xo.current=_o,_o.stateNode=xo,xg(_o),va[ff]=xo.current,cf(va.nodeType===8?va.parentNode:va),bo)for(va=0;va<bo.length;va++){_o=bo[va];var wo=_o._getVersion;wo=wo(_o._source),xo.mutableSourceEagerHydrationData==null?xo.mutableSourceEagerHydrationData=[_o,wo]:xo.mutableSourceEagerHydrationData.push(_o,wo)}this._internalRoot=xo}qk.prototype.render=function(va){lk(va,this._internalRoot,null,null)};qk.prototype.unmount=function(){var va=this._internalRoot,_o=va.containerInfo;lk(null,va,null,function(){_o[ff]=null})};function rk(va){return!(!va||va.nodeType!==1&&va.nodeType!==9&&va.nodeType!==11&&(va.nodeType!==8||va.nodeValue!==" react-mount-point-unstable "))}function sk(va,_o){if(_o||(_o=va?va.nodeType===9?va.documentElement:va.firstChild:null,_o=!(!_o||_o.nodeType!==1||!_o.hasAttribute("data-reactroot"))),!_o)for(var xo;xo=va.lastChild;)va.removeChild(xo);return new qk(va,0,_o?{hydrate:!0}:void 0)}function tk(va,_o,xo,bo,wo){var Eo=xo._reactRootContainer;if(Eo){var To=Eo._internalRoot;if(typeof wo=="function"){var So=wo;wo=function(){var Do=mk(To);So.call(Do)}}lk(_o,To,va,wo)}else{if(Eo=xo._reactRootContainer=sk(xo,bo),To=Eo._internalRoot,typeof wo=="function"){var $o=wo;wo=function(){var Do=mk(To);$o.call(Do)}}Xj(function(){lk(_o,To,va,wo)})}return mk(To)}ec=function(va){if(va.tag===13){var _o=Hg();Jg(va,4,_o),ok(va,4)}};fc=function(va){if(va.tag===13){var _o=Hg();Jg(va,67108864,_o),ok(va,67108864)}};gc=function(va){if(va.tag===13){var _o=Hg(),xo=Ig(va);Jg(va,xo,_o),ok(va,xo)}};hc=function(va,_o){return _o()};yb=function(va,_o,xo){switch(_o){case"input":if(ab(va,xo),_o=xo.name,xo.type==="radio"&&_o!=null){for(xo=va;xo.parentNode;)xo=xo.parentNode;for(xo=xo.querySelectorAll("input[name="+JSON.stringify(""+_o)+'][type="radio"]'),_o=0;_o<xo.length;_o++){var bo=xo[_o];if(bo!==va&&bo.form===va.form){var wo=Db(bo);if(!wo)throw Error(y$3(90));Wa(bo),ab(bo,wo)}}}break;case"textarea":ib(va,xo);break;case"select":_o=xo.value,_o!=null&&fb(va,!!xo.multiple,_o,!1)}};Gb=Wj;Hb=function(va,_o,xo,bo,wo){var Eo=X$2;X$2|=4;try{return gg(98,va.bind(null,_o,xo,bo,wo))}finally{X$2=Eo,X$2===0&&(wj(),ig())}};Ib=function(){(X$2&49)==0&&(Vj(),Oj())};Jb=function(va,_o){var xo=X$2;X$2|=2;try{return va(_o)}finally{X$2=xo,X$2===0&&(wj(),ig())}};function uk(va,_o){var xo=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(_o))throw Error(y$3(200));return kk(va,_o,null,xo)}var vk={Events:[Cb,ue$1,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(va){return va=cc(va),va===null?null:va.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(va){if(va==null)return null;if(va.nodeType===1)return va;var _o=va._reactInternals;if(_o===void 0)throw typeof va.render=="function"?Error(y$3(188)):Error(y$3(268,Object.keys(va)));return va=cc(_o),va=va===null?null:va.stateNode,va};reactDom_production_min.flushSync=function(va,_o){var xo=X$2;if((xo&48)!=0)return va(_o);X$2|=1;try{if(va)return gg(99,va.bind(null,_o))}finally{X$2=xo,ig()}};reactDom_production_min.hydrate=function(va,_o,xo){if(!rk(_o))throw Error(y$3(200));return tk(null,va,_o,!0,xo)};reactDom_production_min.render=function(va,_o,xo){if(!rk(_o))throw Error(y$3(200));return tk(null,va,_o,!1,xo)};reactDom_production_min.unmountComponentAtNode=function(va){if(!rk(va))throw Error(y$3(40));return va._reactRootContainer?(Xj(function(){tk(null,null,va,!1,function(){va._reactRootContainer=null,va[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(va,_o){return uk(va,_o,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(va,_o,xo,bo){if(!rk(xo))throw Error(y$3(200));if(va==null||va._reactInternals===void 0)throw Error(y$3(38));return tk(va,_o,xo,!1,bo)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(va){console.error(va)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM$1=reactDom.exports,react$1={},react={},tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(va){var _o,xo,bo,wo,Eo,To,So,$o,Do,No,Oo,Lo,Co,Ro,jo,zo,Io,Po,Bo,ko,Uo,Qo,qo,Zo;(function(Xo){var Fo=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Xo(Go(Fo,Go(va.exports)));function Go(Vo,Wo){return Vo!==Fo&&(typeof Object.create=="function"?Object.defineProperty(Vo,"__esModule",{value:!0}):Vo.__esModule=!0),function(Yo,Ko){return Vo[Yo]=Wo?Wo(Yo,Ko):Ko}}})(function(Xo){var Fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Vo,Wo){Vo.__proto__=Wo}||function(Vo,Wo){for(var Yo in Wo)Object.prototype.hasOwnProperty.call(Wo,Yo)&&(Vo[Yo]=Wo[Yo])};_o=function(Vo,Wo){if(typeof Wo!="function"&&Wo!==null)throw new TypeError("Class extends value "+String(Wo)+" is not a constructor or null");Fo(Vo,Wo);function Yo(){this.constructor=Vo}Vo.prototype=Wo===null?Object.create(Wo):(Yo.prototype=Wo.prototype,new Yo)},xo=Object.assign||function(Vo){for(var Wo,Yo=1,Ko=arguments.length;Yo<Ko;Yo++){Wo=arguments[Yo];for(var ts in Wo)Object.prototype.hasOwnProperty.call(Wo,ts)&&(Vo[ts]=Wo[ts])}return Vo},bo=function(Vo,Wo){var Yo={};for(var Ko in Vo)Object.prototype.hasOwnProperty.call(Vo,Ko)&&Wo.indexOf(Ko)<0&&(Yo[Ko]=Vo[Ko]);if(Vo!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ts=0,Ko=Object.getOwnPropertySymbols(Vo);ts<Ko.length;ts++)Wo.indexOf(Ko[ts])<0&&Object.prototype.propertyIsEnumerable.call(Vo,Ko[ts])&&(Yo[Ko[ts]]=Vo[Ko[ts]]);return Yo},wo=function(Vo,Wo,Yo,Ko){var ts=arguments.length,Jo=ts<3?Wo:Ko===null?Ko=Object.getOwnPropertyDescriptor(Wo,Yo):Ko,rs;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Jo=Reflect.decorate(Vo,Wo,Yo,Ko);else for(var ls=Vo.length-1;ls>=0;ls--)(rs=Vo[ls])&&(Jo=(ts<3?rs(Jo):ts>3?rs(Wo,Yo,Jo):rs(Wo,Yo))||Jo);return ts>3&&Jo&&Object.defineProperty(Wo,Yo,Jo),Jo},Eo=function(Vo,Wo){return function(Yo,Ko){Wo(Yo,Ko,Vo)}},To=function(Vo,Wo){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Vo,Wo)},So=function(Vo,Wo,Yo,Ko){function ts(Jo){return Jo instanceof Yo?Jo:new Yo(function(rs){rs(Jo)})}return new(Yo||(Yo=Promise))(function(Jo,rs){function ls(ms){try{us(Ko.next(ms))}catch(As){rs(As)}}function ss(ms){try{us(Ko.throw(ms))}catch(As){rs(As)}}function us(ms){ms.done?Jo(ms.value):ts(ms.value).then(ls,ss)}us((Ko=Ko.apply(Vo,Wo||[])).next())})},$o=function(Vo,Wo){var Yo={label:0,sent:function(){if(Jo[0]&1)throw Jo[1];return Jo[1]},trys:[],ops:[]},Ko,ts,Jo,rs;return rs={next:ls(0),throw:ls(1),return:ls(2)},typeof Symbol=="function"&&(rs[Symbol.iterator]=function(){return this}),rs;function ls(us){return function(ms){return ss([us,ms])}}function ss(us){if(Ko)throw new TypeError("Generator is already executing.");for(;Yo;)try{if(Ko=1,ts&&(Jo=us[0]&2?ts.return:us[0]?ts.throw||((Jo=ts.return)&&Jo.call(ts),0):ts.next)&&!(Jo=Jo.call(ts,us[1])).done)return Jo;switch(ts=0,Jo&&(us=[us[0]&2,Jo.value]),us[0]){case 0:case 1:Jo=us;break;case 4:return Yo.label++,{value:us[1],done:!1};case 5:Yo.label++,ts=us[1],us=[0];continue;case 7:us=Yo.ops.pop(),Yo.trys.pop();continue;default:if(Jo=Yo.trys,!(Jo=Jo.length>0&&Jo[Jo.length-1])&&(us[0]===6||us[0]===2)){Yo=0;continue}if(us[0]===3&&(!Jo||us[1]>Jo[0]&&us[1]<Jo[3])){Yo.label=us[1];break}if(us[0]===6&&Yo.label<Jo[1]){Yo.label=Jo[1],Jo=us;break}if(Jo&&Yo.label<Jo[2]){Yo.label=Jo[2],Yo.ops.push(us);break}Jo[2]&&Yo.ops.pop(),Yo.trys.pop();continue}us=Wo.call(Vo,Yo)}catch(ms){us=[6,ms],ts=0}finally{Ko=Jo=0}if(us[0]&5)throw us[1];return{value:us[0]?us[1]:void 0,done:!0}}},Do=function(Vo,Wo){for(var Yo in Vo)Yo!=="default"&&!Object.prototype.hasOwnProperty.call(Wo,Yo)&&Zo(Wo,Vo,Yo)},Zo=Object.create?function(Vo,Wo,Yo,Ko){Ko===void 0&&(Ko=Yo),Object.defineProperty(Vo,Ko,{enumerable:!0,get:function(){return Wo[Yo]}})}:function(Vo,Wo,Yo,Ko){Ko===void 0&&(Ko=Yo),Vo[Ko]=Wo[Yo]},No=function(Vo){var Wo=typeof Symbol=="function"&&Symbol.iterator,Yo=Wo&&Vo[Wo],Ko=0;if(Yo)return Yo.call(Vo);if(Vo&&typeof Vo.length=="number")return{next:function(){return Vo&&Ko>=Vo.length&&(Vo=void 0),{value:Vo&&Vo[Ko++],done:!Vo}}};throw new TypeError(Wo?"Object is not iterable.":"Symbol.iterator is not defined.")},Oo=function(Vo,Wo){var Yo=typeof Symbol=="function"&&Vo[Symbol.iterator];if(!Yo)return Vo;var Ko=Yo.call(Vo),ts,Jo=[],rs;try{for(;(Wo===void 0||Wo-- >0)&&!(ts=Ko.next()).done;)Jo.push(ts.value)}catch(ls){rs={error:ls}}finally{try{ts&&!ts.done&&(Yo=Ko.return)&&Yo.call(Ko)}finally{if(rs)throw rs.error}}return Jo},Lo=function(){for(var Vo=[],Wo=0;Wo<arguments.length;Wo++)Vo=Vo.concat(Oo(arguments[Wo]));return Vo},Co=function(){for(var Vo=0,Wo=0,Yo=arguments.length;Wo<Yo;Wo++)Vo+=arguments[Wo].length;for(var Ko=Array(Vo),ts=0,Wo=0;Wo<Yo;Wo++)for(var Jo=arguments[Wo],rs=0,ls=Jo.length;rs<ls;rs++,ts++)Ko[ts]=Jo[rs];return Ko},Ro=function(Vo,Wo,Yo){if(Yo||arguments.length===2)for(var Ko=0,ts=Wo.length,Jo;Ko<ts;Ko++)(Jo||!(Ko in Wo))&&(Jo||(Jo=Array.prototype.slice.call(Wo,0,Ko)),Jo[Ko]=Wo[Ko]);return Vo.concat(Jo||Array.prototype.slice.call(Wo))},jo=function(Vo){return this instanceof jo?(this.v=Vo,this):new jo(Vo)},zo=function(Vo,Wo,Yo){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ko=Yo.apply(Vo,Wo||[]),ts,Jo=[];return ts={},rs("next"),rs("throw"),rs("return"),ts[Symbol.asyncIterator]=function(){return this},ts;function rs(Os){Ko[Os]&&(ts[Os]=function(Es){return new Promise(function(Ms,$s){Jo.push([Os,Es,Ms,$s])>1||ls(Os,Es)})})}function ls(Os,Es){try{ss(Ko[Os](Es))}catch(Ms){As(Jo[0][3],Ms)}}function ss(Os){Os.value instanceof jo?Promise.resolve(Os.value.v).then(us,ms):As(Jo[0][2],Os)}function us(Os){ls("next",Os)}function ms(Os){ls("throw",Os)}function As(Os,Es){Os(Es),Jo.shift(),Jo.length&&ls(Jo[0][0],Jo[0][1])}},Io=function(Vo){var Wo,Yo;return Wo={},Ko("next"),Ko("throw",function(ts){throw ts}),Ko("return"),Wo[Symbol.iterator]=function(){return this},Wo;function Ko(ts,Jo){Wo[ts]=Vo[ts]?function(rs){return(Yo=!Yo)?{value:jo(Vo[ts](rs)),done:ts==="return"}:Jo?Jo(rs):rs}:Jo}},Po=function(Vo){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Wo=Vo[Symbol.asyncIterator],Yo;return Wo?Wo.call(Vo):(Vo=typeof No=="function"?No(Vo):Vo[Symbol.iterator](),Yo={},Ko("next"),Ko("throw"),Ko("return"),Yo[Symbol.asyncIterator]=function(){return this},Yo);function Ko(Jo){Yo[Jo]=Vo[Jo]&&function(rs){return new Promise(function(ls,ss){rs=Vo[Jo](rs),ts(ls,ss,rs.done,rs.value)})}}function ts(Jo,rs,ls,ss){Promise.resolve(ss).then(function(us){Jo({value:us,done:ls})},rs)}},Bo=function(Vo,Wo){return Object.defineProperty?Object.defineProperty(Vo,"raw",{value:Wo}):Vo.raw=Wo,Vo};var Go=Object.create?function(Vo,Wo){Object.defineProperty(Vo,"default",{enumerable:!0,value:Wo})}:function(Vo,Wo){Vo.default=Wo};ko=function(Vo){if(Vo&&Vo.__esModule)return Vo;var Wo={};if(Vo!=null)for(var Yo in Vo)Yo!=="default"&&Object.prototype.hasOwnProperty.call(Vo,Yo)&&Zo(Wo,Vo,Yo);return Go(Wo,Vo),Wo},Uo=function(Vo){return Vo&&Vo.__esModule?Vo:{default:Vo}},Qo=function(Vo,Wo,Yo,Ko){if(Yo==="a"&&!Ko)throw new TypeError("Private accessor was defined without a getter");if(typeof Wo=="function"?Vo!==Wo||!Ko:!Wo.has(Vo))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Yo==="m"?Ko:Yo==="a"?Ko.call(Vo):Ko?Ko.value:Wo.get(Vo)},qo=function(Vo,Wo,Yo,Ko,ts){if(Ko==="m")throw new TypeError("Private method is not writable");if(Ko==="a"&&!ts)throw new TypeError("Private accessor was defined without a setter");if(typeof Wo=="function"?Vo!==Wo||!ts:!Wo.has(Vo))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ko==="a"?ts.call(Vo,Yo):ts?ts.value=Yo:Wo.set(Vo,Yo),Yo},Xo("__extends",_o),Xo("__assign",xo),Xo("__rest",bo),Xo("__decorate",wo),Xo("__param",Eo),Xo("__metadata",To),Xo("__awaiter",So),Xo("__generator",$o),Xo("__exportStar",Do),Xo("__createBinding",Zo),Xo("__values",No),Xo("__read",Oo),Xo("__spread",Lo),Xo("__spreadArrays",Co),Xo("__spreadArray",Ro),Xo("__await",jo),Xo("__asyncGenerator",zo),Xo("__asyncDelegator",Io),Xo("__asyncValues",Po),Xo("__makeTemplateObject",Bo),Xo("__importStar",ko),Xo("__importDefault",Uo),Xo("__classPrivateFieldGet",Qo),Xo("__classPrivateFieldSet",qo)})})(tslib);Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(va){return typeof va=="number"&&isFinite(va)&&Math.floor(va)===va});Math.sign===void 0&&(Math.sign=function(va){return va<0?-1:va>0?1:+va});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(va){if(va==null)throw new TypeError("Cannot convert undefined or null to object");const _o=Object(va);for(let xo=1;xo<arguments.length;xo++){const bo=arguments[xo];if(bo!=null)for(const wo in bo)Object.prototype.hasOwnProperty.call(bo,wo)&&(_o[wo]=bo[wo])}return _o});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(va,_o){this._listeners===void 0&&(this._listeners={});var xo=this._listeners;xo[va]===void 0&&(xo[va]=[]),xo[va].indexOf(_o)===-1&&xo[va].push(_o)},hasEventListener:function(va,_o){if(this._listeners===void 0)return!1;var xo=this._listeners;return xo[va]!==void 0&&xo[va].indexOf(_o)!==-1},removeEventListener:function(va,_o){if(this._listeners!==void 0){var xo=this._listeners,bo=xo[va];if(bo!==void 0){var wo=bo.indexOf(_o);wo!==-1&&bo.splice(wo,1)}}},dispatchEvent:function(va){if(this._listeners!==void 0){var _o=this._listeners,xo=_o[va.type];if(xo!==void 0){va.target=this;for(var bo=xo.slice(0),wo=0,Eo=bo.length;wo<Eo;wo++)bo[wo].call(this,va)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var va=Math.random()*4294967295|0,_o=Math.random()*4294967295|0,xo=Math.random()*4294967295|0,bo=Math.random()*4294967295|0,wo=_lut[va&255]+_lut[va>>8&255]+_lut[va>>16&255]+_lut[va>>24&255]+"-"+_lut[_o&255]+_lut[_o>>8&255]+"-"+_lut[_o>>16&15|64]+_lut[_o>>24&255]+"-"+_lut[xo&63|128]+_lut[xo>>8&255]+"-"+_lut[xo>>16&255]+_lut[xo>>24&255]+_lut[bo&255]+_lut[bo>>8&255]+_lut[bo>>16&255]+_lut[bo>>24&255];return wo.toUpperCase()},clamp:function(va,_o,xo){return Math.max(_o,Math.min(xo,va))},euclideanModulo:function(va,_o){return(va%_o+_o)%_o},mapLinear:function(va,_o,xo,bo,wo){return bo+(va-_o)*(wo-bo)/(xo-_o)},lerp:function(va,_o,xo){return(1-xo)*va+xo*_o},smoothstep:function(va,_o,xo){return va<=_o?0:va>=xo?1:(va=(va-_o)/(xo-_o),va*va*(3-2*va))},smootherstep:function(va,_o,xo){return va<=_o?0:va>=xo?1:(va=(va-_o)/(xo-_o),va*va*va*(va*(va*6-15)+10))},randInt:function(va,_o){return va+Math.floor(Math.random()*(_o-va+1))},randFloat:function(va,_o){return va+Math.random()*(_o-va)},randFloatSpread:function(va){return va*(.5-Math.random())},degToRad:function(va){return va*MathUtils.DEG2RAD},radToDeg:function(va){return va*MathUtils.RAD2DEG},isPowerOfTwo:function(va){return(va&va-1)==0&&va!==0},ceilPowerOfTwo:function(va){return Math.pow(2,Math.ceil(Math.log(va)/Math.LN2))},floorPowerOfTwo:function(va){return Math.pow(2,Math.floor(Math.log(va)/Math.LN2))},setQuaternionFromProperEuler:function(va,_o,xo,bo,wo){var Eo=Math.cos,To=Math.sin,So=Eo(xo/2),$o=To(xo/2),Do=Eo((_o+bo)/2),No=To((_o+bo)/2),Oo=Eo((_o-bo)/2),Lo=To((_o-bo)/2),Co=Eo((bo-_o)/2),Ro=To((bo-_o)/2);switch(wo){case"XYX":va.set(So*No,$o*Oo,$o*Lo,So*Do);break;case"YZY":va.set($o*Lo,So*No,$o*Oo,So*Do);break;case"ZXZ":va.set($o*Oo,$o*Lo,So*No,So*Do);break;case"XZX":va.set(So*No,$o*Ro,$o*Co,So*Do);break;case"YXY":va.set($o*Co,So*No,$o*Ro,So*Do);break;case"ZYZ":va.set($o*Ro,$o*Co,So*No,So*Do);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+wo)}}};function Vector2(va,_o){this.x=va||0,this.y=_o||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(va){this.x=va}},height:{get:function(){return this.y},set:function(va){this.y=va}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(va,_o){return this.x=va,this.y=_o,this},setScalar:function(va){return this.x=va,this.y=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setComponent:function(va,_o){switch(va){case 0:this.x=_o;break;case 1:this.y=_o;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(va){return this.x=va.x,this.y=va.y,this},add:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_o)):(this.x+=va.x,this.y+=va.y,this)},addScalar:function(va){return this.x+=va,this.y+=va,this},addVectors:function(va,_o){return this.x=va.x+_o.x,this.y=va.y+_o.y,this},addScaledVector:function(va,_o){return this.x+=va.x*_o,this.y+=va.y*_o,this},sub:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_o)):(this.x-=va.x,this.y-=va.y,this)},subScalar:function(va){return this.x-=va,this.y-=va,this},subVectors:function(va,_o){return this.x=va.x-_o.x,this.y=va.y-_o.y,this},multiply:function(va){return this.x*=va.x,this.y*=va.y,this},multiplyScalar:function(va){return this.x*=va,this.y*=va,this},divide:function(va){return this.x/=va.x,this.y/=va.y,this},divideScalar:function(va){return this.multiplyScalar(1/va)},applyMatrix3:function(va){var _o=this.x,xo=this.y,bo=va.elements;return this.x=bo[0]*_o+bo[3]*xo+bo[6],this.y=bo[1]*_o+bo[4]*xo+bo[7],this},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this},clamp:function(va,_o){return this.x=Math.max(va.x,Math.min(_o.x,this.x)),this.y=Math.max(va.y,Math.min(_o.y,this.y)),this},clampScalar:function(va,_o){return this.x=Math.max(va,Math.min(_o,this.x)),this.y=Math.max(va,Math.min(_o,this.y)),this},clampLength:function(va,_o){var xo=this.length();return this.divideScalar(xo||1).multiplyScalar(Math.max(va,Math.min(_o,xo)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(va){return this.x*va.x+this.y*va.y},cross:function(va){return this.x*va.y-this.y*va.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var va=Math.atan2(-this.y,-this.x)+Math.PI;return va},distanceTo:function(va){return Math.sqrt(this.distanceToSquared(va))},distanceToSquared:function(va){var _o=this.x-va.x,xo=this.y-va.y;return _o*_o+xo*xo},manhattanDistanceTo:function(va){return Math.abs(this.x-va.x)+Math.abs(this.y-va.y)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_o){return this.x+=(va.x-this.x)*_o,this.y+=(va.y-this.y)*_o,this},lerpVectors:function(va,_o,xo){return this.x=va.x+(_o.x-va.x)*xo,this.y=va.y+(_o.y-va.y)*xo,this},equals:function(va){return va.x===this.x&&va.y===this.y},fromArray:function(va,_o){return _o===void 0&&(_o=0),this.x=va[_o],this.y=va[_o+1],this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this.x,va[_o+1]=this.y,va},fromBufferAttribute:function(va,_o,xo){return xo!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_o),this.y=va.getY(_o),this},rotateAround:function(va,_o){var xo=Math.cos(_o),bo=Math.sin(_o),wo=this.x-va.x,Eo=this.y-va.y;return this.x=wo*xo-Eo*bo+va.x,this.y=wo*bo+Eo*xo+va.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(va,_o,xo,bo,wo,Eo,To,So,$o){var Do=this.elements;return Do[0]=va,Do[1]=bo,Do[2]=To,Do[3]=_o,Do[4]=wo,Do[5]=So,Do[6]=xo,Do[7]=Eo,Do[8]=$o,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(va){var _o=this.elements,xo=va.elements;return _o[0]=xo[0],_o[1]=xo[1],_o[2]=xo[2],_o[3]=xo[3],_o[4]=xo[4],_o[5]=xo[5],_o[6]=xo[6],_o[7]=xo[7],_o[8]=xo[8],this},extractBasis:function(va,_o,xo){return va.setFromMatrix3Column(this,0),_o.setFromMatrix3Column(this,1),xo.setFromMatrix3Column(this,2),this},setFromMatrix4:function(va){var _o=va.elements;return this.set(_o[0],_o[4],_o[8],_o[1],_o[5],_o[9],_o[2],_o[6],_o[10]),this},multiply:function(va){return this.multiplyMatrices(this,va)},premultiply:function(va){return this.multiplyMatrices(va,this)},multiplyMatrices:function(va,_o){var xo=va.elements,bo=_o.elements,wo=this.elements,Eo=xo[0],To=xo[3],So=xo[6],$o=xo[1],Do=xo[4],No=xo[7],Oo=xo[2],Lo=xo[5],Co=xo[8],Ro=bo[0],jo=bo[3],zo=bo[6],Io=bo[1],Po=bo[4],Bo=bo[7],ko=bo[2],Uo=bo[5],Qo=bo[8];return wo[0]=Eo*Ro+To*Io+So*ko,wo[3]=Eo*jo+To*Po+So*Uo,wo[6]=Eo*zo+To*Bo+So*Qo,wo[1]=$o*Ro+Do*Io+No*ko,wo[4]=$o*jo+Do*Po+No*Uo,wo[7]=$o*zo+Do*Bo+No*Qo,wo[2]=Oo*Ro+Lo*Io+Co*ko,wo[5]=Oo*jo+Lo*Po+Co*Uo,wo[8]=Oo*zo+Lo*Bo+Co*Qo,this},multiplyScalar:function(va){var _o=this.elements;return _o[0]*=va,_o[3]*=va,_o[6]*=va,_o[1]*=va,_o[4]*=va,_o[7]*=va,_o[2]*=va,_o[5]*=va,_o[8]*=va,this},determinant:function(){var va=this.elements,_o=va[0],xo=va[1],bo=va[2],wo=va[3],Eo=va[4],To=va[5],So=va[6],$o=va[7],Do=va[8];return _o*Eo*Do-_o*To*$o-xo*wo*Do+xo*To*So+bo*wo*$o-bo*Eo*So},getInverse:function(va,_o){_o!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var xo=va.elements,bo=this.elements,wo=xo[0],Eo=xo[1],To=xo[2],So=xo[3],$o=xo[4],Do=xo[5],No=xo[6],Oo=xo[7],Lo=xo[8],Co=Lo*$o-Do*Oo,Ro=Do*No-Lo*So,jo=Oo*So-$o*No,zo=wo*Co+Eo*Ro+To*jo;if(zo===0)return this.set(0,0,0,0,0,0,0,0,0);var Io=1/zo;return bo[0]=Co*Io,bo[1]=(To*Oo-Lo*Eo)*Io,bo[2]=(Do*Eo-To*$o)*Io,bo[3]=Ro*Io,bo[4]=(Lo*wo-To*No)*Io,bo[5]=(To*So-Do*wo)*Io,bo[6]=jo*Io,bo[7]=(Eo*No-Oo*wo)*Io,bo[8]=($o*wo-Eo*So)*Io,this},transpose:function(){var va,_o=this.elements;return va=_o[1],_o[1]=_o[3],_o[3]=va,va=_o[2],_o[2]=_o[6],_o[6]=va,va=_o[5],_o[5]=_o[7],_o[7]=va,this},getNormalMatrix:function(va){return this.setFromMatrix4(va).getInverse(this).transpose()},transposeIntoArray:function(va){var _o=this.elements;return va[0]=_o[0],va[1]=_o[3],va[2]=_o[6],va[3]=_o[1],va[4]=_o[4],va[5]=_o[7],va[6]=_o[2],va[7]=_o[5],va[8]=_o[8],this},setUvTransform:function(va,_o,xo,bo,wo,Eo,To){var So=Math.cos(wo),$o=Math.sin(wo);this.set(xo*So,xo*$o,-xo*(So*Eo+$o*To)+Eo+va,-bo*$o,bo*So,-bo*(-$o*Eo+So*To)+To+_o,0,0,1)},scale:function(va,_o){var xo=this.elements;return xo[0]*=va,xo[3]*=va,xo[6]*=va,xo[1]*=_o,xo[4]*=_o,xo[7]*=_o,this},rotate:function(va){var _o=Math.cos(va),xo=Math.sin(va),bo=this.elements,wo=bo[0],Eo=bo[3],To=bo[6],So=bo[1],$o=bo[4],Do=bo[7];return bo[0]=_o*wo+xo*So,bo[3]=_o*Eo+xo*$o,bo[6]=_o*To+xo*Do,bo[1]=-xo*wo+_o*So,bo[4]=-xo*Eo+_o*$o,bo[7]=-xo*To+_o*Do,this},translate:function(va,_o){var xo=this.elements;return xo[0]+=va*xo[2],xo[3]+=va*xo[5],xo[6]+=va*xo[8],xo[1]+=_o*xo[2],xo[4]+=_o*xo[5],xo[7]+=_o*xo[8],this},equals:function(va){for(var _o=this.elements,xo=va.elements,bo=0;bo<9;bo++)if(_o[bo]!==xo[bo])return!1;return!0},fromArray:function(va,_o){_o===void 0&&(_o=0);for(var xo=0;xo<9;xo++)this.elements[xo]=va[xo+_o];return this},toArray:function(va,_o){va===void 0&&(va=[]),_o===void 0&&(_o=0);var xo=this.elements;return va[_o]=xo[0],va[_o+1]=xo[1],va[_o+2]=xo[2],va[_o+3]=xo[3],va[_o+4]=xo[4],va[_o+5]=xo[5],va[_o+6]=xo[6],va[_o+7]=xo[7],va[_o+8]=xo[8],va}});var _canvas,ImageUtils={getDataURL:function(va){var _o;if(typeof HTMLCanvasElement=="undefined")return va.src;if(va instanceof HTMLCanvasElement)_o=va;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=va.width,_canvas.height=va.height;var xo=_canvas.getContext("2d");va instanceof ImageData?xo.putImageData(va,0,0):xo.drawImage(va,0,0,va.width,va.height),_o=_canvas}return _o.width>2048||_o.height>2048?_o.toDataURL("image/jpeg",.6):_o.toDataURL("image/png")}},textureId=0;function Texture(va,_o,xo,bo,wo,Eo,To,So,$o,Do){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=va!==void 0?va:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=_o!==void 0?_o:Texture.DEFAULT_MAPPING,this.wrapS=xo!==void 0?xo:ClampToEdgeWrapping,this.wrapT=bo!==void 0?bo:ClampToEdgeWrapping,this.magFilter=wo!==void 0?wo:LinearFilter,this.minFilter=Eo!==void 0?Eo:LinearMipmapLinearFilter,this.anisotropy=$o!==void 0?$o:1,this.format=To!==void 0?To:RGBAFormat,this.internalFormat=null,this.type=So!==void 0?So:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Do!==void 0?Do:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.name=va.name,this.image=va.image,this.mipmaps=va.mipmaps.slice(0),this.mapping=va.mapping,this.wrapS=va.wrapS,this.wrapT=va.wrapT,this.magFilter=va.magFilter,this.minFilter=va.minFilter,this.anisotropy=va.anisotropy,this.format=va.format,this.internalFormat=va.internalFormat,this.type=va.type,this.offset.copy(va.offset),this.repeat.copy(va.repeat),this.center.copy(va.center),this.rotation=va.rotation,this.matrixAutoUpdate=va.matrixAutoUpdate,this.matrix.copy(va.matrix),this.generateMipmaps=va.generateMipmaps,this.premultiplyAlpha=va.premultiplyAlpha,this.flipY=va.flipY,this.unpackAlignment=va.unpackAlignment,this.encoding=va.encoding,this},toJSON:function(va){var _o=va===void 0||typeof va=="string";if(!_o&&va.textures[this.uuid]!==void 0)return va.textures[this.uuid];var xo={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var bo=this.image;if(bo.uuid===void 0&&(bo.uuid=MathUtils.generateUUID()),!_o&&va.images[bo.uuid]===void 0){var wo;if(Array.isArray(bo)){wo=[];for(var Eo=0,To=bo.length;Eo<To;Eo++)wo.push(ImageUtils.getDataURL(bo[Eo]))}else wo=ImageUtils.getDataURL(bo);va.images[bo.uuid]={uuid:bo.uuid,url:wo}}xo.image=bo.uuid}return _o||(va.textures[this.uuid]=xo),xo},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(va){if(this.mapping!==UVMapping)return va;if(va.applyMatrix3(this.matrix),va.x<0||va.x>1)switch(this.wrapS){case RepeatWrapping:va.x=va.x-Math.floor(va.x);break;case ClampToEdgeWrapping:va.x=va.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(va.x)%2)===1?va.x=Math.ceil(va.x)-va.x:va.x=va.x-Math.floor(va.x);break}if(va.y<0||va.y>1)switch(this.wrapT){case RepeatWrapping:va.y=va.y-Math.floor(va.y);break;case ClampToEdgeWrapping:va.y=va.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(va.y)%2)===1?va.y=Math.ceil(va.y)-va.y:va.y=va.y-Math.floor(va.y);break}return this.flipY&&(va.y=1-va.y),va}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});function Vector4(va,_o,xo,bo){this.x=va||0,this.y=_o||0,this.z=xo||0,this.w=bo!==void 0?bo:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(va){this.z=va}},height:{get:function(){return this.w},set:function(va){this.w=va}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(va,_o,xo,bo){return this.x=va,this.y=_o,this.z=xo,this.w=bo,this},setScalar:function(va){return this.x=va,this.y=va,this.z=va,this.w=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setZ:function(va){return this.z=va,this},setW:function(va){return this.w=va,this},setComponent:function(va,_o){switch(va){case 0:this.x=_o;break;case 1:this.y=_o;break;case 2:this.z=_o;break;case 3:this.w=_o;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(va){return this.x=va.x,this.y=va.y,this.z=va.z,this.w=va.w!==void 0?va.w:1,this},add:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_o)):(this.x+=va.x,this.y+=va.y,this.z+=va.z,this.w+=va.w,this)},addScalar:function(va){return this.x+=va,this.y+=va,this.z+=va,this.w+=va,this},addVectors:function(va,_o){return this.x=va.x+_o.x,this.y=va.y+_o.y,this.z=va.z+_o.z,this.w=va.w+_o.w,this},addScaledVector:function(va,_o){return this.x+=va.x*_o,this.y+=va.y*_o,this.z+=va.z*_o,this.w+=va.w*_o,this},sub:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_o)):(this.x-=va.x,this.y-=va.y,this.z-=va.z,this.w-=va.w,this)},subScalar:function(va){return this.x-=va,this.y-=va,this.z-=va,this.w-=va,this},subVectors:function(va,_o){return this.x=va.x-_o.x,this.y=va.y-_o.y,this.z=va.z-_o.z,this.w=va.w-_o.w,this},multiplyScalar:function(va){return this.x*=va,this.y*=va,this.z*=va,this.w*=va,this},applyMatrix4:function(va){var _o=this.x,xo=this.y,bo=this.z,wo=this.w,Eo=va.elements;return this.x=Eo[0]*_o+Eo[4]*xo+Eo[8]*bo+Eo[12]*wo,this.y=Eo[1]*_o+Eo[5]*xo+Eo[9]*bo+Eo[13]*wo,this.z=Eo[2]*_o+Eo[6]*xo+Eo[10]*bo+Eo[14]*wo,this.w=Eo[3]*_o+Eo[7]*xo+Eo[11]*bo+Eo[15]*wo,this},divideScalar:function(va){return this.multiplyScalar(1/va)},setAxisAngleFromQuaternion:function(va){this.w=2*Math.acos(va.w);var _o=Math.sqrt(1-va.w*va.w);return _o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=va.x/_o,this.y=va.y/_o,this.z=va.z/_o),this},setAxisAngleFromRotationMatrix:function(va){var _o,xo,bo,wo,Eo=.01,To=.1,So=va.elements,$o=So[0],Do=So[4],No=So[8],Oo=So[1],Lo=So[5],Co=So[9],Ro=So[2],jo=So[6],zo=So[10];if(Math.abs(Do-Oo)<Eo&&Math.abs(No-Ro)<Eo&&Math.abs(Co-jo)<Eo){if(Math.abs(Do+Oo)<To&&Math.abs(No+Ro)<To&&Math.abs(Co+jo)<To&&Math.abs($o+Lo+zo-3)<To)return this.set(1,0,0,0),this;_o=Math.PI;var Io=($o+1)/2,Po=(Lo+1)/2,Bo=(zo+1)/2,ko=(Do+Oo)/4,Uo=(No+Ro)/4,Qo=(Co+jo)/4;return Io>Po&&Io>Bo?Io<Eo?(xo=0,bo=.707106781,wo=.707106781):(xo=Math.sqrt(Io),bo=ko/xo,wo=Uo/xo):Po>Bo?Po<Eo?(xo=.707106781,bo=0,wo=.707106781):(bo=Math.sqrt(Po),xo=ko/bo,wo=Qo/bo):Bo<Eo?(xo=.707106781,bo=.707106781,wo=0):(wo=Math.sqrt(Bo),xo=Uo/wo,bo=Qo/wo),this.set(xo,bo,wo,_o),this}var qo=Math.sqrt((jo-Co)*(jo-Co)+(No-Ro)*(No-Ro)+(Oo-Do)*(Oo-Do));return Math.abs(qo)<.001&&(qo=1),this.x=(jo-Co)/qo,this.y=(No-Ro)/qo,this.z=(Oo-Do)/qo,this.w=Math.acos(($o+Lo+zo-1)/2),this},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this.z=Math.min(this.z,va.z),this.w=Math.min(this.w,va.w),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this.z=Math.max(this.z,va.z),this.w=Math.max(this.w,va.w),this},clamp:function(va,_o){return this.x=Math.max(va.x,Math.min(_o.x,this.x)),this.y=Math.max(va.y,Math.min(_o.y,this.y)),this.z=Math.max(va.z,Math.min(_o.z,this.z)),this.w=Math.max(va.w,Math.min(_o.w,this.w)),this},clampScalar:function(va,_o){return this.x=Math.max(va,Math.min(_o,this.x)),this.y=Math.max(va,Math.min(_o,this.y)),this.z=Math.max(va,Math.min(_o,this.z)),this.w=Math.max(va,Math.min(_o,this.w)),this},clampLength:function(va,_o){var xo=this.length();return this.divideScalar(xo||1).multiplyScalar(Math.max(va,Math.min(_o,xo)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(va){return this.x*va.x+this.y*va.y+this.z*va.z+this.w*va.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_o){return this.x+=(va.x-this.x)*_o,this.y+=(va.y-this.y)*_o,this.z+=(va.z-this.z)*_o,this.w+=(va.w-this.w)*_o,this},lerpVectors:function(va,_o,xo){return this.x=va.x+(_o.x-va.x)*xo,this.y=va.y+(_o.y-va.y)*xo,this.z=va.z+(_o.z-va.z)*xo,this.w=va.w+(_o.w-va.w)*xo,this},equals:function(va){return va.x===this.x&&va.y===this.y&&va.z===this.z&&va.w===this.w},fromArray:function(va,_o){return _o===void 0&&(_o=0),this.x=va[_o],this.y=va[_o+1],this.z=va[_o+2],this.w=va[_o+3],this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this.x,va[_o+1]=this.y,va[_o+2]=this.z,va[_o+3]=this.w,va},fromBufferAttribute:function(va,_o,xo){return xo!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_o),this.y=va.getY(_o),this.z=va.getZ(_o),this.w=va.getW(_o),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(va,_o,xo){this.width=va,this.height=_o,this.scissor=new Vector4(0,0,va,_o),this.scissorTest=!1,this.viewport=new Vector4(0,0,va,_o),xo=xo||{},this.texture=new Texture(void 0,xo.mapping,xo.wrapS,xo.wrapT,xo.magFilter,xo.minFilter,xo.format,xo.type,xo.anisotropy,xo.encoding),this.texture.image={},this.texture.image.width=va,this.texture.image.height=_o,this.texture.generateMipmaps=xo.generateMipmaps!==void 0?xo.generateMipmaps:!1,this.texture.minFilter=xo.minFilter!==void 0?xo.minFilter:LinearFilter,this.depthBuffer=xo.depthBuffer!==void 0?xo.depthBuffer:!0,this.stencilBuffer=xo.stencilBuffer!==void 0?xo.stencilBuffer:!0,this.depthTexture=xo.depthTexture!==void 0?xo.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(va,_o){(this.width!==va||this.height!==_o)&&(this.width=va,this.height=_o,this.texture.image.width=va,this.texture.image.height=_o,this.dispose()),this.viewport.set(0,0,va,_o),this.scissor.set(0,0,va,_o)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.width=va.width,this.height=va.height,this.viewport.copy(va.viewport),this.texture=va.texture.clone(),this.depthBuffer=va.depthBuffer,this.stencilBuffer=va.stencilBuffer,this.depthTexture=va.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(va,_o,xo){WebGLRenderTarget.call(this,va,_o,xo),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(va){return WebGLRenderTarget.prototype.copy.call(this,va),this.samples=va.samples,this}});function Quaternion(va,_o,xo,bo){this._x=va||0,this._y=_o||0,this._z=xo||0,this._w=bo!==void 0?bo:1}Object.assign(Quaternion,{slerp:function(va,_o,xo,bo){return xo.copy(va).slerp(_o,bo)},slerpFlat:function(va,_o,xo,bo,wo,Eo,To){var So=xo[bo+0],$o=xo[bo+1],Do=xo[bo+2],No=xo[bo+3],Oo=wo[Eo+0],Lo=wo[Eo+1],Co=wo[Eo+2],Ro=wo[Eo+3];if(No!==Ro||So!==Oo||$o!==Lo||Do!==Co){var jo=1-To,zo=So*Oo+$o*Lo+Do*Co+No*Ro,Io=zo>=0?1:-1,Po=1-zo*zo;if(Po>Number.EPSILON){var Bo=Math.sqrt(Po),ko=Math.atan2(Bo,zo*Io);jo=Math.sin(jo*ko)/Bo,To=Math.sin(To*ko)/Bo}var Uo=To*Io;if(So=So*jo+Oo*Uo,$o=$o*jo+Lo*Uo,Do=Do*jo+Co*Uo,No=No*jo+Ro*Uo,jo===1-To){var Qo=1/Math.sqrt(So*So+$o*$o+Do*Do+No*No);So*=Qo,$o*=Qo,Do*=Qo,No*=Qo}}va[_o]=So,va[_o+1]=$o,va[_o+2]=Do,va[_o+3]=No},multiplyQuaternionsFlat:function(va,_o,xo,bo,wo,Eo){var To=xo[bo],So=xo[bo+1],$o=xo[bo+2],Do=xo[bo+3],No=wo[Eo],Oo=wo[Eo+1],Lo=wo[Eo+2],Co=wo[Eo+3];return va[_o]=To*Co+Do*No+So*Lo-$o*Oo,va[_o+1]=So*Co+Do*Oo+$o*No-To*Lo,va[_o+2]=$o*Co+Do*Lo+To*Oo-So*No,va[_o+3]=Do*Co-To*No-So*Oo-$o*Lo,va}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(va){this._x=va,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(va){this._y=va,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(va){this._z=va,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(va){this._w=va,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(va,_o,xo,bo){return this._x=va,this._y=_o,this._z=xo,this._w=bo,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(va){return this._x=va.x,this._y=va.y,this._z=va.z,this._w=va.w,this._onChangeCallback(),this},setFromEuler:function(va,_o){if(!(va&&va.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var xo=va._x,bo=va._y,wo=va._z,Eo=va.order,To=Math.cos,So=Math.sin,$o=To(xo/2),Do=To(bo/2),No=To(wo/2),Oo=So(xo/2),Lo=So(bo/2),Co=So(wo/2);switch(Eo){case"XYZ":this._x=Oo*Do*No+$o*Lo*Co,this._y=$o*Lo*No-Oo*Do*Co,this._z=$o*Do*Co+Oo*Lo*No,this._w=$o*Do*No-Oo*Lo*Co;break;case"YXZ":this._x=Oo*Do*No+$o*Lo*Co,this._y=$o*Lo*No-Oo*Do*Co,this._z=$o*Do*Co-Oo*Lo*No,this._w=$o*Do*No+Oo*Lo*Co;break;case"ZXY":this._x=Oo*Do*No-$o*Lo*Co,this._y=$o*Lo*No+Oo*Do*Co,this._z=$o*Do*Co+Oo*Lo*No,this._w=$o*Do*No-Oo*Lo*Co;break;case"ZYX":this._x=Oo*Do*No-$o*Lo*Co,this._y=$o*Lo*No+Oo*Do*Co,this._z=$o*Do*Co-Oo*Lo*No,this._w=$o*Do*No+Oo*Lo*Co;break;case"YZX":this._x=Oo*Do*No+$o*Lo*Co,this._y=$o*Lo*No+Oo*Do*Co,this._z=$o*Do*Co-Oo*Lo*No,this._w=$o*Do*No-Oo*Lo*Co;break;case"XZY":this._x=Oo*Do*No-$o*Lo*Co,this._y=$o*Lo*No-Oo*Do*Co,this._z=$o*Do*Co+Oo*Lo*No,this._w=$o*Do*No+Oo*Lo*Co;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Eo)}return _o!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(va,_o){var xo=_o/2,bo=Math.sin(xo);return this._x=va.x*bo,this._y=va.y*bo,this._z=va.z*bo,this._w=Math.cos(xo),this._onChangeCallback(),this},setFromRotationMatrix:function(va){var _o=va.elements,xo=_o[0],bo=_o[4],wo=_o[8],Eo=_o[1],To=_o[5],So=_o[9],$o=_o[2],Do=_o[6],No=_o[10],Oo=xo+To+No,Lo;return Oo>0?(Lo=.5/Math.sqrt(Oo+1),this._w=.25/Lo,this._x=(Do-So)*Lo,this._y=(wo-$o)*Lo,this._z=(Eo-bo)*Lo):xo>To&&xo>No?(Lo=2*Math.sqrt(1+xo-To-No),this._w=(Do-So)/Lo,this._x=.25*Lo,this._y=(bo+Eo)/Lo,this._z=(wo+$o)/Lo):To>No?(Lo=2*Math.sqrt(1+To-xo-No),this._w=(wo-$o)/Lo,this._x=(bo+Eo)/Lo,this._y=.25*Lo,this._z=(So+Do)/Lo):(Lo=2*Math.sqrt(1+No-xo-To),this._w=(Eo-bo)/Lo,this._x=(wo+$o)/Lo,this._y=(So+Do)/Lo,this._z=.25*Lo),this._onChangeCallback(),this},setFromUnitVectors:function(va,_o){var xo=1e-6,bo=va.dot(_o)+1;return bo<xo?(bo=0,Math.abs(va.x)>Math.abs(va.z)?(this._x=-va.y,this._y=va.x,this._z=0,this._w=bo):(this._x=0,this._y=-va.z,this._z=va.y,this._w=bo)):(this._x=va.y*_o.z-va.z*_o.y,this._y=va.z*_o.x-va.x*_o.z,this._z=va.x*_o.y-va.y*_o.x,this._w=bo),this.normalize()},angleTo:function(va){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(va),-1,1)))},rotateTowards:function(va,_o){var xo=this.angleTo(va);if(xo===0)return this;var bo=Math.min(1,_o/xo);return this.slerp(va,bo),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(va){return this._x*va._x+this._y*va._y+this._z*va._z+this._w*va._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var va=this.length();return va===0?(this._x=0,this._y=0,this._z=0,this._w=1):(va=1/va,this._x=this._x*va,this._y=this._y*va,this._z=this._z*va,this._w=this._w*va),this._onChangeCallback(),this},multiply:function(va,_o){return _o!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(va,_o)):this.multiplyQuaternions(this,va)},premultiply:function(va){return this.multiplyQuaternions(va,this)},multiplyQuaternions:function(va,_o){var xo=va._x,bo=va._y,wo=va._z,Eo=va._w,To=_o._x,So=_o._y,$o=_o._z,Do=_o._w;return this._x=xo*Do+Eo*To+bo*$o-wo*So,this._y=bo*Do+Eo*So+wo*To-xo*$o,this._z=wo*Do+Eo*$o+xo*So-bo*To,this._w=Eo*Do-xo*To-bo*So-wo*$o,this._onChangeCallback(),this},slerp:function(va,_o){if(_o===0)return this;if(_o===1)return this.copy(va);var xo=this._x,bo=this._y,wo=this._z,Eo=this._w,To=Eo*va._w+xo*va._x+bo*va._y+wo*va._z;if(To<0?(this._w=-va._w,this._x=-va._x,this._y=-va._y,this._z=-va._z,To=-To):this.copy(va),To>=1)return this._w=Eo,this._x=xo,this._y=bo,this._z=wo,this;var So=1-To*To;if(So<=Number.EPSILON){var $o=1-_o;return this._w=$o*Eo+_o*this._w,this._x=$o*xo+_o*this._x,this._y=$o*bo+_o*this._y,this._z=$o*wo+_o*this._z,this.normalize(),this._onChangeCallback(),this}var Do=Math.sqrt(So),No=Math.atan2(Do,To),Oo=Math.sin((1-_o)*No)/Do,Lo=Math.sin(_o*No)/Do;return this._w=Eo*Oo+this._w*Lo,this._x=xo*Oo+this._x*Lo,this._y=bo*Oo+this._y*Lo,this._z=wo*Oo+this._z*Lo,this._onChangeCallback(),this},equals:function(va){return va._x===this._x&&va._y===this._y&&va._z===this._z&&va._w===this._w},fromArray:function(va,_o){return _o===void 0&&(_o=0),this._x=va[_o],this._y=va[_o+1],this._z=va[_o+2],this._w=va[_o+3],this._onChangeCallback(),this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this._x,va[_o+1]=this._y,va[_o+2]=this._z,va[_o+3]=this._w,va},fromBufferAttribute:function(va,_o){return this._x=va.getX(_o),this._y=va.getY(_o),this._z=va.getZ(_o),this._w=va.getW(_o),this},_onChange:function(va){return this._onChangeCallback=va,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(va,_o,xo){this.x=va||0,this.y=_o||0,this.z=xo||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(va,_o,xo){return this.x=va,this.y=_o,this.z=xo,this},setScalar:function(va){return this.x=va,this.y=va,this.z=va,this},setX:function(va){return this.x=va,this},setY:function(va){return this.y=va,this},setZ:function(va){return this.z=va,this},setComponent:function(va,_o){switch(va){case 0:this.x=_o;break;case 1:this.y=_o;break;case 2:this.z=_o;break;default:throw new Error("index is out of range: "+va)}return this},getComponent:function(va){switch(va){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+va)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(va){return this.x=va.x,this.y=va.y,this.z=va.z,this},add:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(va,_o)):(this.x+=va.x,this.y+=va.y,this.z+=va.z,this)},addScalar:function(va){return this.x+=va,this.y+=va,this.z+=va,this},addVectors:function(va,_o){return this.x=va.x+_o.x,this.y=va.y+_o.y,this.z=va.z+_o.z,this},addScaledVector:function(va,_o){return this.x+=va.x*_o,this.y+=va.y*_o,this.z+=va.z*_o,this},sub:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(va,_o)):(this.x-=va.x,this.y-=va.y,this.z-=va.z,this)},subScalar:function(va){return this.x-=va,this.y-=va,this.z-=va,this},subVectors:function(va,_o){return this.x=va.x-_o.x,this.y=va.y-_o.y,this.z=va.z-_o.z,this},multiply:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(va,_o)):(this.x*=va.x,this.y*=va.y,this.z*=va.z,this)},multiplyScalar:function(va){return this.x*=va,this.y*=va,this.z*=va,this},multiplyVectors:function(va,_o){return this.x=va.x*_o.x,this.y=va.y*_o.y,this.z=va.z*_o.z,this},applyEuler:function(va){return va&&va.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(va))},applyAxisAngle:function(va,_o){return this.applyQuaternion(_quaternion.setFromAxisAngle(va,_o))},applyMatrix3:function(va){var _o=this.x,xo=this.y,bo=this.z,wo=va.elements;return this.x=wo[0]*_o+wo[3]*xo+wo[6]*bo,this.y=wo[1]*_o+wo[4]*xo+wo[7]*bo,this.z=wo[2]*_o+wo[5]*xo+wo[8]*bo,this},applyNormalMatrix:function(va){return this.applyMatrix3(va).normalize()},applyMatrix4:function(va){var _o=this.x,xo=this.y,bo=this.z,wo=va.elements,Eo=1/(wo[3]*_o+wo[7]*xo+wo[11]*bo+wo[15]);return this.x=(wo[0]*_o+wo[4]*xo+wo[8]*bo+wo[12])*Eo,this.y=(wo[1]*_o+wo[5]*xo+wo[9]*bo+wo[13])*Eo,this.z=(wo[2]*_o+wo[6]*xo+wo[10]*bo+wo[14])*Eo,this},applyQuaternion:function(va){var _o=this.x,xo=this.y,bo=this.z,wo=va.x,Eo=va.y,To=va.z,So=va.w,$o=So*_o+Eo*bo-To*xo,Do=So*xo+To*_o-wo*bo,No=So*bo+wo*xo-Eo*_o,Oo=-wo*_o-Eo*xo-To*bo;return this.x=$o*So+Oo*-wo+Do*-To-No*-Eo,this.y=Do*So+Oo*-Eo+No*-wo-$o*-To,this.z=No*So+Oo*-To+$o*-Eo-Do*-wo,this},project:function(va){return this.applyMatrix4(va.matrixWorldInverse).applyMatrix4(va.projectionMatrix)},unproject:function(va){return this.applyMatrix4(va.projectionMatrixInverse).applyMatrix4(va.matrixWorld)},transformDirection:function(va){var _o=this.x,xo=this.y,bo=this.z,wo=va.elements;return this.x=wo[0]*_o+wo[4]*xo+wo[8]*bo,this.y=wo[1]*_o+wo[5]*xo+wo[9]*bo,this.z=wo[2]*_o+wo[6]*xo+wo[10]*bo,this.normalize()},divide:function(va){return this.x/=va.x,this.y/=va.y,this.z/=va.z,this},divideScalar:function(va){return this.multiplyScalar(1/va)},min:function(va){return this.x=Math.min(this.x,va.x),this.y=Math.min(this.y,va.y),this.z=Math.min(this.z,va.z),this},max:function(va){return this.x=Math.max(this.x,va.x),this.y=Math.max(this.y,va.y),this.z=Math.max(this.z,va.z),this},clamp:function(va,_o){return this.x=Math.max(va.x,Math.min(_o.x,this.x)),this.y=Math.max(va.y,Math.min(_o.y,this.y)),this.z=Math.max(va.z,Math.min(_o.z,this.z)),this},clampScalar:function(va,_o){return this.x=Math.max(va,Math.min(_o,this.x)),this.y=Math.max(va,Math.min(_o,this.y)),this.z=Math.max(va,Math.min(_o,this.z)),this},clampLength:function(va,_o){var xo=this.length();return this.divideScalar(xo||1).multiplyScalar(Math.max(va,Math.min(_o,xo)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(va){return this.x*va.x+this.y*va.y+this.z*va.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(va){return this.normalize().multiplyScalar(va)},lerp:function(va,_o){return this.x+=(va.x-this.x)*_o,this.y+=(va.y-this.y)*_o,this.z+=(va.z-this.z)*_o,this},lerpVectors:function(va,_o,xo){return this.x=va.x+(_o.x-va.x)*xo,this.y=va.y+(_o.y-va.y)*xo,this.z=va.z+(_o.z-va.z)*xo,this},cross:function(va,_o){return _o!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(va,_o)):this.crossVectors(this,va)},crossVectors:function(va,_o){var xo=va.x,bo=va.y,wo=va.z,Eo=_o.x,To=_o.y,So=_o.z;return this.x=bo*So-wo*To,this.y=wo*Eo-xo*So,this.z=xo*To-bo*Eo,this},projectOnVector:function(va){var _o=va.lengthSq();if(_o===0)return this.set(0,0,0);var xo=va.dot(this)/_o;return this.copy(va).multiplyScalar(xo)},projectOnPlane:function(va){return _vector.copy(this).projectOnVector(va),this.sub(_vector)},reflect:function(va){return this.sub(_vector.copy(va).multiplyScalar(2*this.dot(va)))},angleTo:function(va){var _o=Math.sqrt(this.lengthSq()*va.lengthSq());if(_o===0)return Math.PI/2;var xo=this.dot(va)/_o;return Math.acos(MathUtils.clamp(xo,-1,1))},distanceTo:function(va){return Math.sqrt(this.distanceToSquared(va))},distanceToSquared:function(va){var _o=this.x-va.x,xo=this.y-va.y,bo=this.z-va.z;return _o*_o+xo*xo+bo*bo},manhattanDistanceTo:function(va){return Math.abs(this.x-va.x)+Math.abs(this.y-va.y)+Math.abs(this.z-va.z)},setFromSpherical:function(va){return this.setFromSphericalCoords(va.radius,va.phi,va.theta)},setFromSphericalCoords:function(va,_o,xo){var bo=Math.sin(_o)*va;return this.x=bo*Math.sin(xo),this.y=Math.cos(_o)*va,this.z=bo*Math.cos(xo),this},setFromCylindrical:function(va){return this.setFromCylindricalCoords(va.radius,va.theta,va.y)},setFromCylindricalCoords:function(va,_o,xo){return this.x=va*Math.sin(_o),this.y=xo,this.z=va*Math.cos(_o),this},setFromMatrixPosition:function(va){var _o=va.elements;return this.x=_o[12],this.y=_o[13],this.z=_o[14],this},setFromMatrixScale:function(va){var _o=this.setFromMatrixColumn(va,0).length(),xo=this.setFromMatrixColumn(va,1).length(),bo=this.setFromMatrixColumn(va,2).length();return this.x=_o,this.y=xo,this.z=bo,this},setFromMatrixColumn:function(va,_o){return this.fromArray(va.elements,_o*4)},setFromMatrix3Column:function(va,_o){return this.fromArray(va.elements,_o*3)},equals:function(va){return va.x===this.x&&va.y===this.y&&va.z===this.z},fromArray:function(va,_o){return _o===void 0&&(_o=0),this.x=va[_o],this.y=va[_o+1],this.z=va[_o+2],this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this.x,va[_o+1]=this.y,va[_o+2]=this.z,va},fromBufferAttribute:function(va,_o,xo){return xo!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=va.getX(_o),this.y=va.getY(_o),this.z=va.getZ(_o),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(va,_o,xo,bo,wo,Eo,To,So,$o,Do,No,Oo,Lo,Co,Ro,jo){var zo=this.elements;return zo[0]=va,zo[4]=_o,zo[8]=xo,zo[12]=bo,zo[1]=wo,zo[5]=Eo,zo[9]=To,zo[13]=So,zo[2]=$o,zo[6]=Do,zo[10]=No,zo[14]=Oo,zo[3]=Lo,zo[7]=Co,zo[11]=Ro,zo[15]=jo,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(va){var _o=this.elements,xo=va.elements;return _o[0]=xo[0],_o[1]=xo[1],_o[2]=xo[2],_o[3]=xo[3],_o[4]=xo[4],_o[5]=xo[5],_o[6]=xo[6],_o[7]=xo[7],_o[8]=xo[8],_o[9]=xo[9],_o[10]=xo[10],_o[11]=xo[11],_o[12]=xo[12],_o[13]=xo[13],_o[14]=xo[14],_o[15]=xo[15],this},copyPosition:function(va){var _o=this.elements,xo=va.elements;return _o[12]=xo[12],_o[13]=xo[13],_o[14]=xo[14],this},extractBasis:function(va,_o,xo){return va.setFromMatrixColumn(this,0),_o.setFromMatrixColumn(this,1),xo.setFromMatrixColumn(this,2),this},makeBasis:function(va,_o,xo){return this.set(va.x,_o.x,xo.x,0,va.y,_o.y,xo.y,0,va.z,_o.z,xo.z,0,0,0,0,1),this},extractRotation:function(va){var _o=this.elements,xo=va.elements,bo=1/_v1.setFromMatrixColumn(va,0).length(),wo=1/_v1.setFromMatrixColumn(va,1).length(),Eo=1/_v1.setFromMatrixColumn(va,2).length();return _o[0]=xo[0]*bo,_o[1]=xo[1]*bo,_o[2]=xo[2]*bo,_o[3]=0,_o[4]=xo[4]*wo,_o[5]=xo[5]*wo,_o[6]=xo[6]*wo,_o[7]=0,_o[8]=xo[8]*Eo,_o[9]=xo[9]*Eo,_o[10]=xo[10]*Eo,_o[11]=0,_o[12]=0,_o[13]=0,_o[14]=0,_o[15]=1,this},makeRotationFromEuler:function(va){va&&va.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var _o=this.elements,xo=va.x,bo=va.y,wo=va.z,Eo=Math.cos(xo),To=Math.sin(xo),So=Math.cos(bo),$o=Math.sin(bo),Do=Math.cos(wo),No=Math.sin(wo);if(va.order==="XYZ"){var Oo=Eo*Do,Lo=Eo*No,Co=To*Do,Ro=To*No;_o[0]=So*Do,_o[4]=-So*No,_o[8]=$o,_o[1]=Lo+Co*$o,_o[5]=Oo-Ro*$o,_o[9]=-To*So,_o[2]=Ro-Oo*$o,_o[6]=Co+Lo*$o,_o[10]=Eo*So}else if(va.order==="YXZ"){var jo=So*Do,zo=So*No,Io=$o*Do,Po=$o*No;_o[0]=jo+Po*To,_o[4]=Io*To-zo,_o[8]=Eo*$o,_o[1]=Eo*No,_o[5]=Eo*Do,_o[9]=-To,_o[2]=zo*To-Io,_o[6]=Po+jo*To,_o[10]=Eo*So}else if(va.order==="ZXY"){var jo=So*Do,zo=So*No,Io=$o*Do,Po=$o*No;_o[0]=jo-Po*To,_o[4]=-Eo*No,_o[8]=Io+zo*To,_o[1]=zo+Io*To,_o[5]=Eo*Do,_o[9]=Po-jo*To,_o[2]=-Eo*$o,_o[6]=To,_o[10]=Eo*So}else if(va.order==="ZYX"){var Oo=Eo*Do,Lo=Eo*No,Co=To*Do,Ro=To*No;_o[0]=So*Do,_o[4]=Co*$o-Lo,_o[8]=Oo*$o+Ro,_o[1]=So*No,_o[5]=Ro*$o+Oo,_o[9]=Lo*$o-Co,_o[2]=-$o,_o[6]=To*So,_o[10]=Eo*So}else if(va.order==="YZX"){var Bo=Eo*So,ko=Eo*$o,Uo=To*So,Qo=To*$o;_o[0]=So*Do,_o[4]=Qo-Bo*No,_o[8]=Uo*No+ko,_o[1]=No,_o[5]=Eo*Do,_o[9]=-To*Do,_o[2]=-$o*Do,_o[6]=ko*No+Uo,_o[10]=Bo-Qo*No}else if(va.order==="XZY"){var Bo=Eo*So,ko=Eo*$o,Uo=To*So,Qo=To*$o;_o[0]=So*Do,_o[4]=-No,_o[8]=$o*Do,_o[1]=Bo*No+Qo,_o[5]=Eo*Do,_o[9]=ko*No-Uo,_o[2]=Uo*No-ko,_o[6]=To*Do,_o[10]=Qo*No+Bo}return _o[3]=0,_o[7]=0,_o[11]=0,_o[12]=0,_o[13]=0,_o[14]=0,_o[15]=1,this},makeRotationFromQuaternion:function(va){return this.compose(_zero,va,_one)},lookAt:function(va,_o,xo){var bo=this.elements;return _z.subVectors(va,_o),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(xo,_z),_x.lengthSq()===0&&(Math.abs(xo.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(xo,_z)),_x.normalize(),_y.crossVectors(_z,_x),bo[0]=_x.x,bo[4]=_y.x,bo[8]=_z.x,bo[1]=_x.y,bo[5]=_y.y,bo[9]=_z.y,bo[2]=_x.z,bo[6]=_y.z,bo[10]=_z.z,this},multiply:function(va,_o){return _o!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(va,_o)):this.multiplyMatrices(this,va)},premultiply:function(va){return this.multiplyMatrices(va,this)},multiplyMatrices:function(va,_o){var xo=va.elements,bo=_o.elements,wo=this.elements,Eo=xo[0],To=xo[4],So=xo[8],$o=xo[12],Do=xo[1],No=xo[5],Oo=xo[9],Lo=xo[13],Co=xo[2],Ro=xo[6],jo=xo[10],zo=xo[14],Io=xo[3],Po=xo[7],Bo=xo[11],ko=xo[15],Uo=bo[0],Qo=bo[4],qo=bo[8],Zo=bo[12],Xo=bo[1],Fo=bo[5],Go=bo[9],Vo=bo[13],Wo=bo[2],Yo=bo[6],Ko=bo[10],ts=bo[14],Jo=bo[3],rs=bo[7],ls=bo[11],ss=bo[15];return wo[0]=Eo*Uo+To*Xo+So*Wo+$o*Jo,wo[4]=Eo*Qo+To*Fo+So*Yo+$o*rs,wo[8]=Eo*qo+To*Go+So*Ko+$o*ls,wo[12]=Eo*Zo+To*Vo+So*ts+$o*ss,wo[1]=Do*Uo+No*Xo+Oo*Wo+Lo*Jo,wo[5]=Do*Qo+No*Fo+Oo*Yo+Lo*rs,wo[9]=Do*qo+No*Go+Oo*Ko+Lo*ls,wo[13]=Do*Zo+No*Vo+Oo*ts+Lo*ss,wo[2]=Co*Uo+Ro*Xo+jo*Wo+zo*Jo,wo[6]=Co*Qo+Ro*Fo+jo*Yo+zo*rs,wo[10]=Co*qo+Ro*Go+jo*Ko+zo*ls,wo[14]=Co*Zo+Ro*Vo+jo*ts+zo*ss,wo[3]=Io*Uo+Po*Xo+Bo*Wo+ko*Jo,wo[7]=Io*Qo+Po*Fo+Bo*Yo+ko*rs,wo[11]=Io*qo+Po*Go+Bo*Ko+ko*ls,wo[15]=Io*Zo+Po*Vo+Bo*ts+ko*ss,this},multiplyScalar:function(va){var _o=this.elements;return _o[0]*=va,_o[4]*=va,_o[8]*=va,_o[12]*=va,_o[1]*=va,_o[5]*=va,_o[9]*=va,_o[13]*=va,_o[2]*=va,_o[6]*=va,_o[10]*=va,_o[14]*=va,_o[3]*=va,_o[7]*=va,_o[11]*=va,_o[15]*=va,this},determinant:function(){var va=this.elements,_o=va[0],xo=va[4],bo=va[8],wo=va[12],Eo=va[1],To=va[5],So=va[9],$o=va[13],Do=va[2],No=va[6],Oo=va[10],Lo=va[14],Co=va[3],Ro=va[7],jo=va[11],zo=va[15];return Co*(+wo*So*No-bo*$o*No-wo*To*Oo+xo*$o*Oo+bo*To*Lo-xo*So*Lo)+Ro*(+_o*So*Lo-_o*$o*Oo+wo*Eo*Oo-bo*Eo*Lo+bo*$o*Do-wo*So*Do)+jo*(+_o*$o*No-_o*To*Lo-wo*Eo*No+xo*Eo*Lo+wo*To*Do-xo*$o*Do)+zo*(-bo*To*Do-_o*So*No+_o*To*Oo+bo*Eo*No-xo*Eo*Oo+xo*So*Do)},transpose:function(){var va=this.elements,_o;return _o=va[1],va[1]=va[4],va[4]=_o,_o=va[2],va[2]=va[8],va[8]=_o,_o=va[6],va[6]=va[9],va[9]=_o,_o=va[3],va[3]=va[12],va[12]=_o,_o=va[7],va[7]=va[13],va[13]=_o,_o=va[11],va[11]=va[14],va[14]=_o,this},setPosition:function(va,_o,xo){var bo=this.elements;return va.isVector3?(bo[12]=va.x,bo[13]=va.y,bo[14]=va.z):(bo[12]=va,bo[13]=_o,bo[14]=xo),this},getInverse:function(va,_o){_o!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var xo=this.elements,bo=va.elements,wo=bo[0],Eo=bo[1],To=bo[2],So=bo[3],$o=bo[4],Do=bo[5],No=bo[6],Oo=bo[7],Lo=bo[8],Co=bo[9],Ro=bo[10],jo=bo[11],zo=bo[12],Io=bo[13],Po=bo[14],Bo=bo[15],ko=Co*Po*Oo-Io*Ro*Oo+Io*No*jo-Do*Po*jo-Co*No*Bo+Do*Ro*Bo,Uo=zo*Ro*Oo-Lo*Po*Oo-zo*No*jo+$o*Po*jo+Lo*No*Bo-$o*Ro*Bo,Qo=Lo*Io*Oo-zo*Co*Oo+zo*Do*jo-$o*Io*jo-Lo*Do*Bo+$o*Co*Bo,qo=zo*Co*No-Lo*Io*No-zo*Do*Ro+$o*Io*Ro+Lo*Do*Po-$o*Co*Po,Zo=wo*ko+Eo*Uo+To*Qo+So*qo;if(Zo===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Xo=1/Zo;return xo[0]=ko*Xo,xo[1]=(Io*Ro*So-Co*Po*So-Io*To*jo+Eo*Po*jo+Co*To*Bo-Eo*Ro*Bo)*Xo,xo[2]=(Do*Po*So-Io*No*So+Io*To*Oo-Eo*Po*Oo-Do*To*Bo+Eo*No*Bo)*Xo,xo[3]=(Co*No*So-Do*Ro*So-Co*To*Oo+Eo*Ro*Oo+Do*To*jo-Eo*No*jo)*Xo,xo[4]=Uo*Xo,xo[5]=(Lo*Po*So-zo*Ro*So+zo*To*jo-wo*Po*jo-Lo*To*Bo+wo*Ro*Bo)*Xo,xo[6]=(zo*No*So-$o*Po*So-zo*To*Oo+wo*Po*Oo+$o*To*Bo-wo*No*Bo)*Xo,xo[7]=($o*Ro*So-Lo*No*So+Lo*To*Oo-wo*Ro*Oo-$o*To*jo+wo*No*jo)*Xo,xo[8]=Qo*Xo,xo[9]=(zo*Co*So-Lo*Io*So-zo*Eo*jo+wo*Io*jo+Lo*Eo*Bo-wo*Co*Bo)*Xo,xo[10]=($o*Io*So-zo*Do*So+zo*Eo*Oo-wo*Io*Oo-$o*Eo*Bo+wo*Do*Bo)*Xo,xo[11]=(Lo*Do*So-$o*Co*So-Lo*Eo*Oo+wo*Co*Oo+$o*Eo*jo-wo*Do*jo)*Xo,xo[12]=qo*Xo,xo[13]=(Lo*Io*To-zo*Co*To+zo*Eo*Ro-wo*Io*Ro-Lo*Eo*Po+wo*Co*Po)*Xo,xo[14]=(zo*Do*To-$o*Io*To-zo*Eo*No+wo*Io*No+$o*Eo*Po-wo*Do*Po)*Xo,xo[15]=($o*Co*To-Lo*Do*To+Lo*Eo*No-wo*Co*No-$o*Eo*Ro+wo*Do*Ro)*Xo,this},scale:function(va){var _o=this.elements,xo=va.x,bo=va.y,wo=va.z;return _o[0]*=xo,_o[4]*=bo,_o[8]*=wo,_o[1]*=xo,_o[5]*=bo,_o[9]*=wo,_o[2]*=xo,_o[6]*=bo,_o[10]*=wo,_o[3]*=xo,_o[7]*=bo,_o[11]*=wo,this},getMaxScaleOnAxis:function(){var va=this.elements,_o=va[0]*va[0]+va[1]*va[1]+va[2]*va[2],xo=va[4]*va[4]+va[5]*va[5]+va[6]*va[6],bo=va[8]*va[8]+va[9]*va[9]+va[10]*va[10];return Math.sqrt(Math.max(_o,xo,bo))},makeTranslation:function(va,_o,xo){return this.set(1,0,0,va,0,1,0,_o,0,0,1,xo,0,0,0,1),this},makeRotationX:function(va){var _o=Math.cos(va),xo=Math.sin(va);return this.set(1,0,0,0,0,_o,-xo,0,0,xo,_o,0,0,0,0,1),this},makeRotationY:function(va){var _o=Math.cos(va),xo=Math.sin(va);return this.set(_o,0,xo,0,0,1,0,0,-xo,0,_o,0,0,0,0,1),this},makeRotationZ:function(va){var _o=Math.cos(va),xo=Math.sin(va);return this.set(_o,-xo,0,0,xo,_o,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(va,_o){var xo=Math.cos(_o),bo=Math.sin(_o),wo=1-xo,Eo=va.x,To=va.y,So=va.z,$o=wo*Eo,Do=wo*To;return this.set($o*Eo+xo,$o*To-bo*So,$o*So+bo*To,0,$o*To+bo*So,Do*To+xo,Do*So-bo*Eo,0,$o*So-bo*To,Do*So+bo*Eo,wo*So*So+xo,0,0,0,0,1),this},makeScale:function(va,_o,xo){return this.set(va,0,0,0,0,_o,0,0,0,0,xo,0,0,0,0,1),this},makeShear:function(va,_o,xo){return this.set(1,_o,xo,0,va,1,xo,0,va,_o,1,0,0,0,0,1),this},compose:function(va,_o,xo){var bo=this.elements,wo=_o._x,Eo=_o._y,To=_o._z,So=_o._w,$o=wo+wo,Do=Eo+Eo,No=To+To,Oo=wo*$o,Lo=wo*Do,Co=wo*No,Ro=Eo*Do,jo=Eo*No,zo=To*No,Io=So*$o,Po=So*Do,Bo=So*No,ko=xo.x,Uo=xo.y,Qo=xo.z;return bo[0]=(1-(Ro+zo))*ko,bo[1]=(Lo+Bo)*ko,bo[2]=(Co-Po)*ko,bo[3]=0,bo[4]=(Lo-Bo)*Uo,bo[5]=(1-(Oo+zo))*Uo,bo[6]=(jo+Io)*Uo,bo[7]=0,bo[8]=(Co+Po)*Qo,bo[9]=(jo-Io)*Qo,bo[10]=(1-(Oo+Ro))*Qo,bo[11]=0,bo[12]=va.x,bo[13]=va.y,bo[14]=va.z,bo[15]=1,this},decompose:function(va,_o,xo){var bo=this.elements,wo=_v1.set(bo[0],bo[1],bo[2]).length(),Eo=_v1.set(bo[4],bo[5],bo[6]).length(),To=_v1.set(bo[8],bo[9],bo[10]).length(),So=this.determinant();So<0&&(wo=-wo),va.x=bo[12],va.y=bo[13],va.z=bo[14],_m1.copy(this);var $o=1/wo,Do=1/Eo,No=1/To;return _m1.elements[0]*=$o,_m1.elements[1]*=$o,_m1.elements[2]*=$o,_m1.elements[4]*=Do,_m1.elements[5]*=Do,_m1.elements[6]*=Do,_m1.elements[8]*=No,_m1.elements[9]*=No,_m1.elements[10]*=No,_o.setFromRotationMatrix(_m1),xo.x=wo,xo.y=Eo,xo.z=To,this},makePerspective:function(va,_o,xo,bo,wo,Eo){Eo===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var To=this.elements,So=2*wo/(_o-va),$o=2*wo/(xo-bo),Do=(_o+va)/(_o-va),No=(xo+bo)/(xo-bo),Oo=-(Eo+wo)/(Eo-wo),Lo=-2*Eo*wo/(Eo-wo);return To[0]=So,To[4]=0,To[8]=Do,To[12]=0,To[1]=0,To[5]=$o,To[9]=No,To[13]=0,To[2]=0,To[6]=0,To[10]=Oo,To[14]=Lo,To[3]=0,To[7]=0,To[11]=-1,To[15]=0,this},makeOrthographic:function(va,_o,xo,bo,wo,Eo){var To=this.elements,So=1/(_o-va),$o=1/(xo-bo),Do=1/(Eo-wo),No=(_o+va)*So,Oo=(xo+bo)*$o,Lo=(Eo+wo)*Do;return To[0]=2*So,To[4]=0,To[8]=0,To[12]=-No,To[1]=0,To[5]=2*$o,To[9]=0,To[13]=-Oo,To[2]=0,To[6]=0,To[10]=-2*Do,To[14]=-Lo,To[3]=0,To[7]=0,To[11]=0,To[15]=1,this},equals:function(va){for(var _o=this.elements,xo=va.elements,bo=0;bo<16;bo++)if(_o[bo]!==xo[bo])return!1;return!0},fromArray:function(va,_o){_o===void 0&&(_o=0);for(var xo=0;xo<16;xo++)this.elements[xo]=va[xo+_o];return this},toArray:function(va,_o){va===void 0&&(va=[]),_o===void 0&&(_o=0);var xo=this.elements;return va[_o]=xo[0],va[_o+1]=xo[1],va[_o+2]=xo[2],va[_o+3]=xo[3],va[_o+4]=xo[4],va[_o+5]=xo[5],va[_o+6]=xo[6],va[_o+7]=xo[7],va[_o+8]=xo[8],va[_o+9]=xo[9],va[_o+10]=xo[10],va[_o+11]=xo[11],va[_o+12]=xo[12],va[_o+13]=xo[13],va[_o+14]=xo[14],va[_o+15]=xo[15],va}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(va,_o,xo,bo){this._x=va||0,this._y=_o||0,this._z=xo||0,this._order=bo||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(va){this._x=va,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(va){this._y=va,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(va){this._z=va,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(va){this._order=va,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(va,_o,xo,bo){return this._x=va,this._y=_o,this._z=xo,this._order=bo||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(va){return this._x=va._x,this._y=va._y,this._z=va._z,this._order=va._order,this._onChangeCallback(),this},setFromRotationMatrix:function(va,_o,xo){var bo=MathUtils.clamp,wo=va.elements,Eo=wo[0],To=wo[4],So=wo[8],$o=wo[1],Do=wo[5],No=wo[9],Oo=wo[2],Lo=wo[6],Co=wo[10];switch(_o=_o||this._order,_o){case"XYZ":this._y=Math.asin(bo(So,-1,1)),Math.abs(So)<.9999999?(this._x=Math.atan2(-No,Co),this._z=Math.atan2(-To,Eo)):(this._x=Math.atan2(Lo,Do),this._z=0);break;case"YXZ":this._x=Math.asin(-bo(No,-1,1)),Math.abs(No)<.9999999?(this._y=Math.atan2(So,Co),this._z=Math.atan2($o,Do)):(this._y=Math.atan2(-Oo,Eo),this._z=0);break;case"ZXY":this._x=Math.asin(bo(Lo,-1,1)),Math.abs(Lo)<.9999999?(this._y=Math.atan2(-Oo,Co),this._z=Math.atan2(-To,Do)):(this._y=0,this._z=Math.atan2($o,Eo));break;case"ZYX":this._y=Math.asin(-bo(Oo,-1,1)),Math.abs(Oo)<.9999999?(this._x=Math.atan2(Lo,Co),this._z=Math.atan2($o,Eo)):(this._x=0,this._z=Math.atan2(-To,Do));break;case"YZX":this._z=Math.asin(bo($o,-1,1)),Math.abs($o)<.9999999?(this._x=Math.atan2(-No,Do),this._y=Math.atan2(-Oo,Eo)):(this._x=0,this._y=Math.atan2(So,Co));break;case"XZY":this._z=Math.asin(-bo(To,-1,1)),Math.abs(To)<.9999999?(this._x=Math.atan2(Lo,Do),this._y=Math.atan2(So,Eo)):(this._x=Math.atan2(-No,Co),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+_o)}return this._order=_o,xo!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(va,_o,xo){return _matrix.makeRotationFromQuaternion(va),this.setFromRotationMatrix(_matrix,_o,xo)},setFromVector3:function(va,_o){return this.set(va.x,va.y,va.z,_o||this._order)},reorder:function(va){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,va)},equals:function(va){return va._x===this._x&&va._y===this._y&&va._z===this._z&&va._order===this._order},fromArray:function(va){return this._x=va[0],this._y=va[1],this._z=va[2],va[3]!==void 0&&(this._order=va[3]),this._onChangeCallback(),this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this._x,va[_o+1]=this._y,va[_o+2]=this._z,va[_o+3]=this._order,va},toVector3:function(va){return va?va.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(va){return this._onChangeCallback=va,this},_onChangeCallback:function(){}});function Layers(){this.mask=1|0}Object.assign(Layers.prototype,{set:function(va){this.mask=1<<va|0},enable:function(va){this.mask|=1<<va|0},enableAll:function(){this.mask=4294967295|0},toggle:function(va){this.mask^=1<<va|0},disable:function(va){this.mask&=~(1<<va|0)},disableAll:function(){this.mask=0},test:function(va){return(this.mask&va.mask)!=0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var va=new Vector3,_o=new Euler,xo=new Quaternion,bo=new Vector3(1,1,1);function wo(){xo.setFromEuler(_o,!1)}function Eo(){_o.setFromQuaternion(xo,void 0,!1)}_o._onChange(wo),xo._onChange(Eo),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:va},rotation:{configurable:!0,enumerable:!0,value:_o},quaternion:{configurable:!0,enumerable:!0,value:xo},scale:{configurable:!0,enumerable:!0,value:bo},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(va){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(va),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(va){return this.quaternion.premultiply(va),this},setRotationFromAxisAngle:function(va,_o){this.quaternion.setFromAxisAngle(va,_o)},setRotationFromEuler:function(va){this.quaternion.setFromEuler(va,!0)},setRotationFromMatrix:function(va){this.quaternion.setFromRotationMatrix(va)},setRotationFromQuaternion:function(va){this.quaternion.copy(va)},rotateOnAxis:function(va,_o){return _q1.setFromAxisAngle(va,_o),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(va,_o){return _q1.setFromAxisAngle(va,_o),this.quaternion.premultiply(_q1),this},rotateX:function(va){return this.rotateOnAxis(_xAxis,va)},rotateY:function(va){return this.rotateOnAxis(_yAxis,va)},rotateZ:function(va){return this.rotateOnAxis(_zAxis,va)},translateOnAxis:function(va,_o){return _v1$1.copy(va).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(_o)),this},translateX:function(va){return this.translateOnAxis(_xAxis,va)},translateY:function(va){return this.translateOnAxis(_yAxis,va)},translateZ:function(va){return this.translateOnAxis(_zAxis,va)},localToWorld:function(va){return va.applyMatrix4(this.matrixWorld)},worldToLocal:function(va){return va.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(va,_o,xo){va.isVector3?_target.copy(va):_target.set(va,_o,xo);var bo=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),bo&&(_m1$1.extractRotation(bo.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(va){if(arguments.length>1){for(var _o=0;_o<arguments.length;_o++)this.add(arguments[_o]);return this}return va===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",va),this):(va&&va.isObject3D?(va.parent!==null&&va.parent.remove(va),va.parent=this,this.children.push(va),va.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",va),this)},remove:function(va){if(arguments.length>1){for(var _o=0;_o<arguments.length;_o++)this.remove(arguments[_o]);return this}var xo=this.children.indexOf(va);return xo!==-1&&(va.parent=null,this.children.splice(xo,1),va.dispatchEvent(_removedEvent)),this},attach:function(va){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),va.parent!==null&&(va.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(va.parent.matrixWorld)),va.applyMatrix4(_m1$1),va.updateWorldMatrix(!1,!1),this.add(va),this},getObjectById:function(va){return this.getObjectByProperty("id",va)},getObjectByName:function(va){return this.getObjectByProperty("name",va)},getObjectByProperty:function(va,_o){if(this[va]===_o)return this;for(var xo=0,bo=this.children.length;xo<bo;xo++){var wo=this.children[xo],Eo=wo.getObjectByProperty(va,_o);if(Eo!==void 0)return Eo}},getWorldPosition:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),va=new Vector3),this.updateMatrixWorld(!0),va.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),va=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,va,_scale),va},getWorldScale:function(va){return va===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),va=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,va),va},getWorldDirection:function(va){va===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),va=new Vector3),this.updateMatrixWorld(!0);var _o=this.matrixWorld.elements;return va.set(_o[8],_o[9],_o[10]).normalize()},raycast:function(){},traverse:function(va){va(this);for(var _o=this.children,xo=0,bo=_o.length;xo<bo;xo++)_o[xo].traverse(va)},traverseVisible:function(va){if(this.visible!==!1){va(this);for(var _o=this.children,xo=0,bo=_o.length;xo<bo;xo++)_o[xo].traverseVisible(va)}},traverseAncestors:function(va){var _o=this.parent;_o!==null&&(va(_o),_o.traverseAncestors(va))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(va){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||va)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,va=!0);for(var _o=this.children,xo=0,bo=_o.length;xo<bo;xo++)_o[xo].updateMatrixWorld(va)},updateWorldMatrix:function(va,_o){var xo=this.parent;if(va===!0&&xo!==null&&xo.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),_o===!0)for(var bo=this.children,wo=0,Eo=bo.length;wo<Eo;wo++)bo[wo].updateWorldMatrix(!1,!0)},toJSON:function(va){var _o=va===void 0||typeof va=="string",xo={};_o&&(va={geometries:{},materials:{},textures:{},images:{},shapes:{}},xo.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var bo={};bo.uuid=this.uuid,bo.type=this.type,this.name!==""&&(bo.name=this.name),this.castShadow===!0&&(bo.castShadow=!0),this.receiveShadow===!0&&(bo.receiveShadow=!0),this.visible===!1&&(bo.visible=!1),this.frustumCulled===!1&&(bo.frustumCulled=!1),this.renderOrder!==0&&(bo.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(bo.userData=this.userData),bo.layers=this.layers.mask,bo.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(bo.matrixAutoUpdate=!1),this.isInstancedMesh&&(bo.type="InstancedMesh",bo.count=this.count,bo.instanceMatrix=this.instanceMatrix.toJSON());function wo(zo,Io){return zo[Io.uuid]===void 0&&(zo[Io.uuid]=Io.toJSON(va)),Io.uuid}if(this.isMesh||this.isLine||this.isPoints){bo.geometry=wo(va.geometries,this.geometry);var Eo=this.geometry.parameters;if(Eo!==void 0&&Eo.shapes!==void 0){var To=Eo.shapes;if(Array.isArray(To))for(var So=0,$o=To.length;So<$o;So++){var Do=To[So];wo(va.shapes,Do)}else wo(va.shapes,To)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var No=[],So=0,$o=this.material.length;So<$o;So++)No.push(wo(va.materials,this.material[So]));bo.material=No}else bo.material=wo(va.materials,this.material);if(this.children.length>0){bo.children=[];for(var So=0;So<this.children.length;So++)bo.children.push(this.children[So].toJSON(va).object)}if(_o){var Oo=jo(va.geometries),Lo=jo(va.materials),Co=jo(va.textures),Ro=jo(va.images),To=jo(va.shapes);Oo.length>0&&(xo.geometries=Oo),Lo.length>0&&(xo.materials=Lo),Co.length>0&&(xo.textures=Co),Ro.length>0&&(xo.images=Ro),To.length>0&&(xo.shapes=To)}return xo.object=bo,xo;function jo(zo){var Io=[];for(var Po in zo){var Bo=zo[Po];delete Bo.metadata,Io.push(Bo)}return Io}},clone:function(va){return new this.constructor().copy(this,va)},copy:function(va,_o){if(_o===void 0&&(_o=!0),this.name=va.name,this.up.copy(va.up),this.position.copy(va.position),this.quaternion.copy(va.quaternion),this.scale.copy(va.scale),this.matrix.copy(va.matrix),this.matrixWorld.copy(va.matrixWorld),this.matrixAutoUpdate=va.matrixAutoUpdate,this.matrixWorldNeedsUpdate=va.matrixWorldNeedsUpdate,this.layers.mask=va.layers.mask,this.visible=va.visible,this.castShadow=va.castShadow,this.receiveShadow=va.receiveShadow,this.frustumCulled=va.frustumCulled,this.renderOrder=va.renderOrder,this.userData=JSON.parse(JSON.stringify(va.userData)),_o===!0)for(var xo=0;xo<va.children.length;xo++){var bo=va.children[xo];this.add(bo.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(va,_o){return Object3D.prototype.copy.call(this,va,_o),va.background!==null&&(this.background=va.background.clone()),va.environment!==null&&(this.environment=va.environment.clone()),va.fog!==null&&(this.fog=va.fog.clone()),va.overrideMaterial!==null&&(this.overrideMaterial=va.overrideMaterial.clone()),this.autoUpdate=va.autoUpdate,this.matrixAutoUpdate=va.matrixAutoUpdate,this},toJSON:function(va){var _o=Object3D.prototype.toJSON.call(this,va);return this.background!==null&&(_o.object.background=this.background.toJSON(va)),this.environment!==null&&(_o.object.environment=this.environment.toJSON(va)),this.fog!==null&&(_o.object.fog=this.fog.toJSON()),_o},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(va,_o){this.min=va!==void 0?va:new Vector3(1/0,1/0,1/0),this.max=_o!==void 0?_o:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(va,_o){return this.min.copy(va),this.max.copy(_o),this},setFromArray:function(va){for(var _o=1/0,xo=1/0,bo=1/0,wo=-1/0,Eo=-1/0,To=-1/0,So=0,$o=va.length;So<$o;So+=3){var Do=va[So],No=va[So+1],Oo=va[So+2];Do<_o&&(_o=Do),No<xo&&(xo=No),Oo<bo&&(bo=Oo),Do>wo&&(wo=Do),No>Eo&&(Eo=No),Oo>To&&(To=Oo)}return this.min.set(_o,xo,bo),this.max.set(wo,Eo,To),this},setFromBufferAttribute:function(va){for(var _o=1/0,xo=1/0,bo=1/0,wo=-1/0,Eo=-1/0,To=-1/0,So=0,$o=va.count;So<$o;So++){var Do=va.getX(So),No=va.getY(So),Oo=va.getZ(So);Do<_o&&(_o=Do),No<xo&&(xo=No),Oo<bo&&(bo=Oo),Do>wo&&(wo=Do),No>Eo&&(Eo=No),Oo>To&&(To=Oo)}return this.min.set(_o,xo,bo),this.max.set(wo,Eo,To),this},setFromPoints:function(va){this.makeEmpty();for(var _o=0,xo=va.length;_o<xo;_o++)this.expandByPoint(va[_o]);return this},setFromCenterAndSize:function(va,_o){var xo=_vector$1.copy(_o).multiplyScalar(.5);return this.min.copy(va).sub(xo),this.max.copy(va).add(xo),this},setFromObject:function(va){return this.makeEmpty(),this.expandByObject(va)},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.min.copy(va.min),this.max.copy(va.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(va){return va===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),va=new Vector3),this.isEmpty()?va.set(0,0,0):va.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(va){return va===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),va=new Vector3),this.isEmpty()?va.set(0,0,0):va.subVectors(this.max,this.min)},expandByPoint:function(va){return this.min.min(va),this.max.max(va),this},expandByVector:function(va){return this.min.sub(va),this.max.add(va),this},expandByScalar:function(va){return this.min.addScalar(-va),this.max.addScalar(va),this},expandByObject:function(va){va.updateWorldMatrix(!1,!1);var _o=va.geometry;_o!==void 0&&(_o.boundingBox===null&&_o.computeBoundingBox(),_box.copy(_o.boundingBox),_box.applyMatrix4(va.matrixWorld),this.union(_box));for(var xo=va.children,bo=0,wo=xo.length;bo<wo;bo++)this.expandByObject(xo[bo]);return this},containsPoint:function(va){return!(va.x<this.min.x||va.x>this.max.x||va.y<this.min.y||va.y>this.max.y||va.z<this.min.z||va.z>this.max.z)},containsBox:function(va){return this.min.x<=va.min.x&&va.max.x<=this.max.x&&this.min.y<=va.min.y&&va.max.y<=this.max.y&&this.min.z<=va.min.z&&va.max.z<=this.max.z},getParameter:function(va,_o){return _o===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),_o=new Vector3),_o.set((va.x-this.min.x)/(this.max.x-this.min.x),(va.y-this.min.y)/(this.max.y-this.min.y),(va.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(va){return!(va.max.x<this.min.x||va.min.x>this.max.x||va.max.y<this.min.y||va.min.y>this.max.y||va.max.z<this.min.z||va.min.z>this.max.z)},intersectsSphere:function(va){return this.clampPoint(va.center,_vector$1),_vector$1.distanceToSquared(va.center)<=va.radius*va.radius},intersectsPlane:function(va){var _o,xo;return va.normal.x>0?(_o=va.normal.x*this.min.x,xo=va.normal.x*this.max.x):(_o=va.normal.x*this.max.x,xo=va.normal.x*this.min.x),va.normal.y>0?(_o+=va.normal.y*this.min.y,xo+=va.normal.y*this.max.y):(_o+=va.normal.y*this.max.y,xo+=va.normal.y*this.min.y),va.normal.z>0?(_o+=va.normal.z*this.min.z,xo+=va.normal.z*this.max.z):(_o+=va.normal.z*this.max.z,xo+=va.normal.z*this.min.z),_o<=-va.constant&&xo>=-va.constant},intersectsTriangle:function(va){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(va.a,_center),_v1$2.subVectors(va.b,_center),_v2.subVectors(va.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var _o=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(_o,_v0,_v1$2,_v2,_extents)||(_o=[1,0,0,0,1,0,0,0,1],!satForAxes(_o,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),_o=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(_o,_v0,_v1$2,_v2,_extents))},clampPoint:function(va,_o){return _o===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),_o=new Vector3),_o.copy(va).clamp(this.min,this.max)},distanceToPoint:function(va){var _o=_vector$1.copy(va).clamp(this.min,this.max);return _o.sub(va).length()},getBoundingSphere:function(va){return va===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(va.center),va.radius=this.getSize(_vector$1).length()*.5,va},intersect:function(va){return this.min.max(va.min),this.max.min(va.max),this.isEmpty()&&this.makeEmpty(),this},union:function(va){return this.min.min(va.min),this.max.max(va.max),this},applyMatrix4:function(va){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(va),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(va),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(va),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(va),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(va),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(va),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(va),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(va),this.setFromPoints(_points),this)},translate:function(va){return this.min.add(va),this.max.add(va),this},equals:function(va){return va.min.equals(this.min)&&va.max.equals(this.max)}});function satForAxes(va,_o,xo,bo,wo){var Eo,To;for(Eo=0,To=va.length-3;Eo<=To;Eo+=3){_testAxis.fromArray(va,Eo);var So=wo.x*Math.abs(_testAxis.x)+wo.y*Math.abs(_testAxis.y)+wo.z*Math.abs(_testAxis.z),$o=_o.dot(_testAxis),Do=xo.dot(_testAxis),No=bo.dot(_testAxis);if(Math.max(-Math.max($o,Do,No),Math.min($o,Do,No))>So)return!1}return!0}var _box$1=new Box3;function Sphere(va,_o){this.center=va!==void 0?va:new Vector3,this.radius=_o!==void 0?_o:-1}Object.assign(Sphere.prototype,{set:function(va,_o){return this.center.copy(va),this.radius=_o,this},setFromPoints:function(va,_o){var xo=this.center;_o!==void 0?xo.copy(_o):_box$1.setFromPoints(va).getCenter(xo);for(var bo=0,wo=0,Eo=va.length;wo<Eo;wo++)bo=Math.max(bo,xo.distanceToSquared(va[wo]));return this.radius=Math.sqrt(bo),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.center.copy(va.center),this.radius=va.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(va){return va.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(va){return va.distanceTo(this.center)-this.radius},intersectsSphere:function(va){var _o=this.radius+va.radius;return va.center.distanceToSquared(this.center)<=_o*_o},intersectsBox:function(va){return va.intersectsSphere(this)},intersectsPlane:function(va){return Math.abs(va.distanceToPoint(this.center))<=this.radius},clampPoint:function(va,_o){var xo=this.center.distanceToSquared(va);return _o===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),_o=new Vector3),_o.copy(va),xo>this.radius*this.radius&&(_o.sub(this.center).normalize(),_o.multiplyScalar(this.radius).add(this.center)),_o},getBoundingBox:function(va){return va===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),va=new Box3),this.isEmpty()?(va.makeEmpty(),va):(va.set(this.center,this.center),va.expandByScalar(this.radius),va)},applyMatrix4:function(va){return this.center.applyMatrix4(va),this.radius=this.radius*va.getMaxScaleOnAxis(),this},translate:function(va){return this.center.add(va),this},equals:function(va){return va.center.equals(this.center)&&va.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(va,_o){this.origin=va!==void 0?va:new Vector3,this.direction=_o!==void 0?_o:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(va,_o){return this.origin.copy(va),this.direction.copy(_o),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.origin.copy(va.origin),this.direction.copy(va.direction),this},at:function(va,_o){return _o===void 0&&(console.warn("THREE.Ray: .at() target is now required"),_o=new Vector3),_o.copy(this.direction).multiplyScalar(va).add(this.origin)},lookAt:function(va){return this.direction.copy(va).sub(this.origin).normalize(),this},recast:function(va){return this.origin.copy(this.at(va,_vector$2)),this},closestPointToPoint:function(va,_o){_o===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),_o=new Vector3),_o.subVectors(va,this.origin);var xo=_o.dot(this.direction);return xo<0?_o.copy(this.origin):_o.copy(this.direction).multiplyScalar(xo).add(this.origin)},distanceToPoint:function(va){return Math.sqrt(this.distanceSqToPoint(va))},distanceSqToPoint:function(va){var _o=_vector$2.subVectors(va,this.origin).dot(this.direction);return _o<0?this.origin.distanceToSquared(va):(_vector$2.copy(this.direction).multiplyScalar(_o).add(this.origin),_vector$2.distanceToSquared(va))},distanceSqToSegment:function(va,_o,xo,bo){_segCenter.copy(va).add(_o).multiplyScalar(.5),_segDir.copy(_o).sub(va).normalize(),_diff.copy(this.origin).sub(_segCenter);var wo=va.distanceTo(_o)*.5,Eo=-this.direction.dot(_segDir),To=_diff.dot(this.direction),So=-_diff.dot(_segDir),$o=_diff.lengthSq(),Do=Math.abs(1-Eo*Eo),No,Oo,Lo,Co;if(Do>0)if(No=Eo*So-To,Oo=Eo*To-So,Co=wo*Do,No>=0)if(Oo>=-Co)if(Oo<=Co){var Ro=1/Do;No*=Ro,Oo*=Ro,Lo=No*(No+Eo*Oo+2*To)+Oo*(Eo*No+Oo+2*So)+$o}else Oo=wo,No=Math.max(0,-(Eo*Oo+To)),Lo=-No*No+Oo*(Oo+2*So)+$o;else Oo=-wo,No=Math.max(0,-(Eo*Oo+To)),Lo=-No*No+Oo*(Oo+2*So)+$o;else Oo<=-Co?(No=Math.max(0,-(-Eo*wo+To)),Oo=No>0?-wo:Math.min(Math.max(-wo,-So),wo),Lo=-No*No+Oo*(Oo+2*So)+$o):Oo<=Co?(No=0,Oo=Math.min(Math.max(-wo,-So),wo),Lo=Oo*(Oo+2*So)+$o):(No=Math.max(0,-(Eo*wo+To)),Oo=No>0?wo:Math.min(Math.max(-wo,-So),wo),Lo=-No*No+Oo*(Oo+2*So)+$o);else Oo=Eo>0?-wo:wo,No=Math.max(0,-(Eo*Oo+To)),Lo=-No*No+Oo*(Oo+2*So)+$o;return xo&&xo.copy(this.direction).multiplyScalar(No).add(this.origin),bo&&bo.copy(_segDir).multiplyScalar(Oo).add(_segCenter),Lo},intersectSphere:function(va,_o){_vector$2.subVectors(va.center,this.origin);var xo=_vector$2.dot(this.direction),bo=_vector$2.dot(_vector$2)-xo*xo,wo=va.radius*va.radius;if(bo>wo)return null;var Eo=Math.sqrt(wo-bo),To=xo-Eo,So=xo+Eo;return To<0&&So<0?null:To<0?this.at(So,_o):this.at(To,_o)},intersectsSphere:function(va){return this.distanceSqToPoint(va.center)<=va.radius*va.radius},distanceToPlane:function(va){var _o=va.normal.dot(this.direction);if(_o===0)return va.distanceToPoint(this.origin)===0?0:null;var xo=-(this.origin.dot(va.normal)+va.constant)/_o;return xo>=0?xo:null},intersectPlane:function(va,_o){var xo=this.distanceToPlane(va);return xo===null?null:this.at(xo,_o)},intersectsPlane:function(va){var _o=va.distanceToPoint(this.origin);if(_o===0)return!0;var xo=va.normal.dot(this.direction);return xo*_o<0},intersectBox:function(va,_o){var xo,bo,wo,Eo,To,So,$o=1/this.direction.x,Do=1/this.direction.y,No=1/this.direction.z,Oo=this.origin;return $o>=0?(xo=(va.min.x-Oo.x)*$o,bo=(va.max.x-Oo.x)*$o):(xo=(va.max.x-Oo.x)*$o,bo=(va.min.x-Oo.x)*$o),Do>=0?(wo=(va.min.y-Oo.y)*Do,Eo=(va.max.y-Oo.y)*Do):(wo=(va.max.y-Oo.y)*Do,Eo=(va.min.y-Oo.y)*Do),xo>Eo||wo>bo||((wo>xo||xo!==xo)&&(xo=wo),(Eo<bo||bo!==bo)&&(bo=Eo),No>=0?(To=(va.min.z-Oo.z)*No,So=(va.max.z-Oo.z)*No):(To=(va.max.z-Oo.z)*No,So=(va.min.z-Oo.z)*No),xo>So||To>bo)||((To>xo||xo!==xo)&&(xo=To),(So<bo||bo!==bo)&&(bo=So),bo<0)?null:this.at(xo>=0?xo:bo,_o)},intersectsBox:function(va){return this.intersectBox(va,_vector$2)!==null},intersectTriangle:function(va,_o,xo,bo,wo){_edge1.subVectors(_o,va),_edge2.subVectors(xo,va),_normal.crossVectors(_edge1,_edge2);var Eo=this.direction.dot(_normal),To;if(Eo>0){if(bo)return null;To=1}else if(Eo<0)To=-1,Eo=-Eo;else return null;_diff.subVectors(this.origin,va);var So=To*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(So<0)return null;var $o=To*this.direction.dot(_edge1.cross(_diff));if($o<0||So+$o>Eo)return null;var Do=-To*_diff.dot(_normal);return Do<0?null:this.at(Do/Eo,wo)},applyMatrix4:function(va){return this.origin.applyMatrix4(va),this.direction.transformDirection(va),this},equals:function(va){return va.origin.equals(this.origin)&&va.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(va,_o){this.normal=va!==void 0?va:new Vector3(1,0,0),this.constant=_o!==void 0?_o:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(va,_o){return this.normal.copy(va),this.constant=_o,this},setComponents:function(va,_o,xo,bo){return this.normal.set(va,_o,xo),this.constant=bo,this},setFromNormalAndCoplanarPoint:function(va,_o){return this.normal.copy(va),this.constant=-_o.dot(this.normal),this},setFromCoplanarPoints:function(va,_o,xo){var bo=_vector1.subVectors(xo,_o).cross(_vector2.subVectors(va,_o)).normalize();return this.setFromNormalAndCoplanarPoint(bo,va),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.normal.copy(va.normal),this.constant=va.constant,this},normalize:function(){var va=1/this.normal.length();return this.normal.multiplyScalar(va),this.constant*=va,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(va){return this.normal.dot(va)+this.constant},distanceToSphere:function(va){return this.distanceToPoint(va.center)-va.radius},projectPoint:function(va,_o){return _o===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),_o=new Vector3),_o.copy(this.normal).multiplyScalar(-this.distanceToPoint(va)).add(va)},intersectLine:function(va,_o){_o===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),_o=new Vector3);var xo=va.delta(_vector1),bo=this.normal.dot(xo);if(bo===0)return this.distanceToPoint(va.start)===0?_o.copy(va.start):void 0;var wo=-(va.start.dot(this.normal)+this.constant)/bo;if(!(wo<0||wo>1))return _o.copy(xo).multiplyScalar(wo).add(va.start)},intersectsLine:function(va){var _o=this.distanceToPoint(va.start),xo=this.distanceToPoint(va.end);return _o<0&&xo>0||xo<0&&_o>0},intersectsBox:function(va){return va.intersectsPlane(this)},intersectsSphere:function(va){return va.intersectsPlane(this)},coplanarPoint:function(va){return va===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),va=new Vector3),va.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(va,_o){var xo=_o||_normalMatrix.getNormalMatrix(va),bo=this.coplanarPoint(_vector1).applyMatrix4(va),wo=this.normal.applyMatrix3(xo).normalize();return this.constant=-bo.dot(wo),this},translate:function(va){return this.constant-=va.dot(this.normal),this},equals:function(va){return va.normal.equals(this.normal)&&va.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(va,_o,xo){this.a=va!==void 0?va:new Vector3,this.b=_o!==void 0?_o:new Vector3,this.c=xo!==void 0?xo:new Vector3}Object.assign(Triangle,{getNormal:function(va,_o,xo,bo){bo===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),bo=new Vector3),bo.subVectors(xo,_o),_v0$1.subVectors(va,_o),bo.cross(_v0$1);var wo=bo.lengthSq();return wo>0?bo.multiplyScalar(1/Math.sqrt(wo)):bo.set(0,0,0)},getBarycoord:function(va,_o,xo,bo,wo){_v0$1.subVectors(bo,_o),_v1$3.subVectors(xo,_o),_v2$1.subVectors(va,_o);var Eo=_v0$1.dot(_v0$1),To=_v0$1.dot(_v1$3),So=_v0$1.dot(_v2$1),$o=_v1$3.dot(_v1$3),Do=_v1$3.dot(_v2$1),No=Eo*$o-To*To;if(wo===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),wo=new Vector3),No===0)return wo.set(-2,-1,-1);var Oo=1/No,Lo=($o*So-To*Do)*Oo,Co=(Eo*Do-To*So)*Oo;return wo.set(1-Lo-Co,Co,Lo)},containsPoint:function(va,_o,xo,bo){return Triangle.getBarycoord(va,_o,xo,bo,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(va,_o,xo,bo,wo,Eo,To,So){return this.getBarycoord(va,_o,xo,bo,_v3),So.set(0,0),So.addScaledVector(wo,_v3.x),So.addScaledVector(Eo,_v3.y),So.addScaledVector(To,_v3.z),So},isFrontFacing:function(va,_o,xo,bo){return _v0$1.subVectors(xo,_o),_v1$3.subVectors(va,_o),_v0$1.cross(_v1$3).dot(bo)<0}});Object.assign(Triangle.prototype,{set:function(va,_o,xo){return this.a.copy(va),this.b.copy(_o),this.c.copy(xo),this},setFromPointsAndIndices:function(va,_o,xo,bo){return this.a.copy(va[_o]),this.b.copy(va[xo]),this.c.copy(va[bo]),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.a.copy(va.a),this.b.copy(va.b),this.c.copy(va.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(va){return va===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),va=new Vector3),va.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(va){return Triangle.getNormal(this.a,this.b,this.c,va)},getPlane:function(va){return va===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),va=new Plane),va.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(va,_o){return Triangle.getBarycoord(va,this.a,this.b,this.c,_o)},getUV:function(va,_o,xo,bo,wo){return Triangle.getUV(va,this.a,this.b,this.c,_o,xo,bo,wo)},containsPoint:function(va){return Triangle.containsPoint(va,this.a,this.b,this.c)},isFrontFacing:function(va){return Triangle.isFrontFacing(this.a,this.b,this.c,va)},intersectsBox:function(va){return va.intersectsTriangle(this)},closestPointToPoint:function(va,_o){_o===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),_o=new Vector3);var xo=this.a,bo=this.b,wo=this.c,Eo,To;_vab.subVectors(bo,xo),_vac.subVectors(wo,xo),_vap.subVectors(va,xo);var So=_vab.dot(_vap),$o=_vac.dot(_vap);if(So<=0&&$o<=0)return _o.copy(xo);_vbp.subVectors(va,bo);var Do=_vab.dot(_vbp),No=_vac.dot(_vbp);if(Do>=0&&No<=Do)return _o.copy(bo);var Oo=So*No-Do*$o;if(Oo<=0&&So>=0&&Do<=0)return Eo=So/(So-Do),_o.copy(xo).addScaledVector(_vab,Eo);_vcp.subVectors(va,wo);var Lo=_vab.dot(_vcp),Co=_vac.dot(_vcp);if(Co>=0&&Lo<=Co)return _o.copy(wo);var Ro=Lo*$o-So*Co;if(Ro<=0&&$o>=0&&Co<=0)return To=$o/($o-Co),_o.copy(xo).addScaledVector(_vac,To);var jo=Do*Co-Lo*No;if(jo<=0&&No-Do>=0&&Lo-Co>=0)return _vbc.subVectors(wo,bo),To=(No-Do)/(No-Do+(Lo-Co)),_o.copy(bo).addScaledVector(_vbc,To);var zo=1/(jo+Ro+Oo);return Eo=Ro*zo,To=Oo*zo,_o.copy(xo).addScaledVector(_vab,Eo).addScaledVector(_vac,To)},equals:function(va){return va.a.equals(this.a)&&va.b.equals(this.b)&&va.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(va,_o,xo){return _o===void 0&&xo===void 0?this.set(va):this.setRGB(va,_o,xo)}function hue2rgb(va,_o,xo){return xo<0&&(xo+=1),xo>1&&(xo-=1),xo<1/6?va+(_o-va)*6*xo:xo<1/2?_o:xo<2/3?va+(_o-va)*6*(2/3-xo):va}function SRGBToLinear(va){return va<.04045?va*.0773993808:Math.pow(va*.9478672986+.0521327014,2.4)}function LinearToSRGB(va){return va<.0031308?va*12.92:1.055*Math.pow(va,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(va){return va&&va.isColor?this.copy(va):typeof va=="number"?this.setHex(va):typeof va=="string"&&this.setStyle(va),this},setScalar:function(va){return this.r=va,this.g=va,this.b=va,this},setHex:function(va){return va=Math.floor(va),this.r=(va>>16&255)/255,this.g=(va>>8&255)/255,this.b=(va&255)/255,this},setRGB:function(va,_o,xo){return this.r=va,this.g=_o,this.b=xo,this},setHSL:function(va,_o,xo){if(va=MathUtils.euclideanModulo(va,1),_o=MathUtils.clamp(_o,0,1),xo=MathUtils.clamp(xo,0,1),_o===0)this.r=this.g=this.b=xo;else{var bo=xo<=.5?xo*(1+_o):xo+_o-xo*_o,wo=2*xo-bo;this.r=hue2rgb(wo,bo,va+1/3),this.g=hue2rgb(wo,bo,va),this.b=hue2rgb(wo,bo,va-1/3)}return this},setStyle:function(va){function _o(Oo){Oo!==void 0&&parseFloat(Oo)<1&&console.warn("THREE.Color: Alpha component of "+va+" will be ignored.")}var xo;if(xo=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(va)){var bo,wo=xo[1],Eo=xo[2];switch(wo){case"rgb":case"rgba":if(bo=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Eo))return this.r=Math.min(255,parseInt(bo[1],10))/255,this.g=Math.min(255,parseInt(bo[2],10))/255,this.b=Math.min(255,parseInt(bo[3],10))/255,_o(bo[5]),this;if(bo=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Eo))return this.r=Math.min(100,parseInt(bo[1],10))/100,this.g=Math.min(100,parseInt(bo[2],10))/100,this.b=Math.min(100,parseInt(bo[3],10))/100,_o(bo[5]),this;break;case"hsl":case"hsla":if(bo=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Eo)){var To=parseFloat(bo[1])/360,So=parseInt(bo[2],10)/100,$o=parseInt(bo[3],10)/100;return _o(bo[5]),this.setHSL(To,So,$o)}break}}else if(xo=/^\#([A-Fa-f0-9]+)$/.exec(va)){var Do=xo[1],No=Do.length;if(No===3)return this.r=parseInt(Do.charAt(0)+Do.charAt(0),16)/255,this.g=parseInt(Do.charAt(1)+Do.charAt(1),16)/255,this.b=parseInt(Do.charAt(2)+Do.charAt(2),16)/255,this;if(No===6)return this.r=parseInt(Do.charAt(0)+Do.charAt(1),16)/255,this.g=parseInt(Do.charAt(2)+Do.charAt(3),16)/255,this.b=parseInt(Do.charAt(4)+Do.charAt(5),16)/255,this}return va&&va.length>0?this.setColorName(va):this},setColorName:function(va){var _o=_colorKeywords[va];return _o!==void 0?this.setHex(_o):console.warn("THREE.Color: Unknown color "+va),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(va){return this.r=va.r,this.g=va.g,this.b=va.b,this},copyGammaToLinear:function(va,_o){return _o===void 0&&(_o=2),this.r=Math.pow(va.r,_o),this.g=Math.pow(va.g,_o),this.b=Math.pow(va.b,_o),this},copyLinearToGamma:function(va,_o){_o===void 0&&(_o=2);var xo=_o>0?1/_o:1;return this.r=Math.pow(va.r,xo),this.g=Math.pow(va.g,xo),this.b=Math.pow(va.b,xo),this},convertGammaToLinear:function(va){return this.copyGammaToLinear(this,va),this},convertLinearToGamma:function(va){return this.copyLinearToGamma(this,va),this},copySRGBToLinear:function(va){return this.r=SRGBToLinear(va.r),this.g=SRGBToLinear(va.g),this.b=SRGBToLinear(va.b),this},copyLinearToSRGB:function(va){return this.r=LinearToSRGB(va.r),this.g=LinearToSRGB(va.g),this.b=LinearToSRGB(va.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(va){va===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),va={h:0,s:0,l:0});var _o=this.r,xo=this.g,bo=this.b,wo=Math.max(_o,xo,bo),Eo=Math.min(_o,xo,bo),To,So,$o=(Eo+wo)/2;if(Eo===wo)To=0,So=0;else{var Do=wo-Eo;switch(So=$o<=.5?Do/(wo+Eo):Do/(2-wo-Eo),wo){case _o:To=(xo-bo)/Do+(xo<bo?6:0);break;case xo:To=(bo-_o)/Do+2;break;case bo:To=(_o-xo)/Do+4;break}To/=6}return va.h=To,va.s=So,va.l=$o,va},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(va,_o,xo){return this.getHSL(_hslA),_hslA.h+=va,_hslA.s+=_o,_hslA.l+=xo,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(va){return this.r+=va.r,this.g+=va.g,this.b+=va.b,this},addColors:function(va,_o){return this.r=va.r+_o.r,this.g=va.g+_o.g,this.b=va.b+_o.b,this},addScalar:function(va){return this.r+=va,this.g+=va,this.b+=va,this},sub:function(va){return this.r=Math.max(0,this.r-va.r),this.g=Math.max(0,this.g-va.g),this.b=Math.max(0,this.b-va.b),this},multiply:function(va){return this.r*=va.r,this.g*=va.g,this.b*=va.b,this},multiplyScalar:function(va){return this.r*=va,this.g*=va,this.b*=va,this},lerp:function(va,_o){return this.r+=(va.r-this.r)*_o,this.g+=(va.g-this.g)*_o,this.b+=(va.b-this.b)*_o,this},lerpHSL:function(va,_o){this.getHSL(_hslA),va.getHSL(_hslB);var xo=MathUtils.lerp(_hslA.h,_hslB.h,_o),bo=MathUtils.lerp(_hslA.s,_hslB.s,_o),wo=MathUtils.lerp(_hslA.l,_hslB.l,_o);return this.setHSL(xo,bo,wo),this},equals:function(va){return va.r===this.r&&va.g===this.g&&va.b===this.b},fromArray:function(va,_o){return _o===void 0&&(_o=0),this.r=va[_o],this.g=va[_o+1],this.b=va[_o+2],this},toArray:function(va,_o){return va===void 0&&(va=[]),_o===void 0&&(_o=0),va[_o]=this.r,va[_o+1]=this.g,va[_o+2]=this.b,va},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(va,_o,xo,bo,wo,Eo){this.a=va,this.b=_o,this.c=xo,this.normal=bo&&bo.isVector3?bo:new Vector3,this.vertexNormals=Array.isArray(bo)?bo:[],this.color=wo&&wo.isColor?wo:new Color,this.vertexColors=Array.isArray(wo)?wo:[],this.materialIndex=Eo!==void 0?Eo:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(va){this.a=va.a,this.b=va.b,this.c=va.c,this.normal.copy(va.normal),this.color.copy(va.color),this.materialIndex=va.materialIndex;for(var _o=0,xo=va.vertexNormals.length;_o<xo;_o++)this.vertexNormals[_o]=va.vertexNormals[_o].clone();for(var _o=0,xo=va.vertexColors.length;_o<xo;_o++)this.vertexColors[_o]=va.vertexColors[_o].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(va){if(va!==void 0)for(var _o in va){var xo=va[_o];if(xo===void 0){console.warn("THREE.Material: '"+_o+"' parameter is undefined.");continue}if(_o==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=xo===FlatShading;continue}var bo=this[_o];if(bo===void 0){console.warn("THREE."+this.type+": '"+_o+"' is not a property of this material.");continue}bo&&bo.isColor?bo.set(xo):bo&&bo.isVector3&&xo&&xo.isVector3?bo.copy(xo):this[_o]=xo}},toJSON:function(va){var _o=va===void 0||typeof va=="string";_o&&(va={textures:{},images:{}});var xo={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};xo.uuid=this.uuid,xo.type=this.type,this.name!==""&&(xo.name=this.name),this.color&&this.color.isColor&&(xo.color=this.color.getHex()),this.roughness!==void 0&&(xo.roughness=this.roughness),this.metalness!==void 0&&(xo.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(xo.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(xo.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(xo.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(xo.specular=this.specular.getHex()),this.shininess!==void 0&&(xo.shininess=this.shininess),this.clearcoat!==void 0&&(xo.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(xo.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(xo.clearcoatMap=this.clearcoatMap.toJSON(va).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(xo.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(va).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(xo.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(va).uuid,xo.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(xo.map=this.map.toJSON(va).uuid),this.matcap&&this.matcap.isTexture&&(xo.matcap=this.matcap.toJSON(va).uuid),this.alphaMap&&this.alphaMap.isTexture&&(xo.alphaMap=this.alphaMap.toJSON(va).uuid),this.lightMap&&this.lightMap.isTexture&&(xo.lightMap=this.lightMap.toJSON(va).uuid),this.aoMap&&this.aoMap.isTexture&&(xo.aoMap=this.aoMap.toJSON(va).uuid,xo.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(xo.bumpMap=this.bumpMap.toJSON(va).uuid,xo.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(xo.normalMap=this.normalMap.toJSON(va).uuid,xo.normalMapType=this.normalMapType,xo.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(xo.displacementMap=this.displacementMap.toJSON(va).uuid,xo.displacementScale=this.displacementScale,xo.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(xo.roughnessMap=this.roughnessMap.toJSON(va).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(xo.metalnessMap=this.metalnessMap.toJSON(va).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(xo.emissiveMap=this.emissiveMap.toJSON(va).uuid),this.specularMap&&this.specularMap.isTexture&&(xo.specularMap=this.specularMap.toJSON(va).uuid),this.envMap&&this.envMap.isTexture&&(xo.envMap=this.envMap.toJSON(va).uuid,xo.reflectivity=this.reflectivity,xo.refractionRatio=this.refractionRatio,this.combine!==void 0&&(xo.combine=this.combine),this.envMapIntensity!==void 0&&(xo.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(xo.gradientMap=this.gradientMap.toJSON(va).uuid),this.size!==void 0&&(xo.size=this.size),this.sizeAttenuation!==void 0&&(xo.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(xo.blending=this.blending),this.flatShading===!0&&(xo.flatShading=this.flatShading),this.side!==FrontSide&&(xo.side=this.side),this.vertexColors&&(xo.vertexColors=!0),this.opacity<1&&(xo.opacity=this.opacity),this.transparent===!0&&(xo.transparent=this.transparent),xo.depthFunc=this.depthFunc,xo.depthTest=this.depthTest,xo.depthWrite=this.depthWrite,xo.stencilWrite=this.stencilWrite,xo.stencilWriteMask=this.stencilWriteMask,xo.stencilFunc=this.stencilFunc,xo.stencilRef=this.stencilRef,xo.stencilFuncMask=this.stencilFuncMask,xo.stencilFail=this.stencilFail,xo.stencilZFail=this.stencilZFail,xo.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(xo.rotation=this.rotation),this.polygonOffset===!0&&(xo.polygonOffset=!0),this.polygonOffsetFactor!==0&&(xo.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(xo.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(xo.linewidth=this.linewidth),this.dashSize!==void 0&&(xo.dashSize=this.dashSize),this.gapSize!==void 0&&(xo.gapSize=this.gapSize),this.scale!==void 0&&(xo.scale=this.scale),this.dithering===!0&&(xo.dithering=!0),this.alphaTest>0&&(xo.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(xo.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(xo.wireframe=this.wireframe),this.wireframeLinewidth>1&&(xo.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(xo.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(xo.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(xo.morphTargets=!0),this.morphNormals===!0&&(xo.morphNormals=!0),this.skinning===!0&&(xo.skinning=!0),this.visible===!1&&(xo.visible=!1),this.toneMapped===!1&&(xo.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(xo.userData=this.userData);function bo(To){var So=[];for(var $o in To){var Do=To[$o];delete Do.metadata,So.push(Do)}return So}if(_o){var wo=bo(va.textures),Eo=bo(va.images);wo.length>0&&(xo.textures=wo),Eo.length>0&&(xo.images=Eo)}return xo},clone:function(){return new this.constructor().copy(this)},copy:function(va){this.name=va.name,this.fog=va.fog,this.blending=va.blending,this.side=va.side,this.flatShading=va.flatShading,this.vertexColors=va.vertexColors,this.opacity=va.opacity,this.transparent=va.transparent,this.blendSrc=va.blendSrc,this.blendDst=va.blendDst,this.blendEquation=va.blendEquation,this.blendSrcAlpha=va.blendSrcAlpha,this.blendDstAlpha=va.blendDstAlpha,this.blendEquationAlpha=va.blendEquationAlpha,this.depthFunc=va.depthFunc,this.depthTest=va.depthTest,this.depthWrite=va.depthWrite,this.stencilWriteMask=va.stencilWriteMask,this.stencilFunc=va.stencilFunc,this.stencilRef=va.stencilRef,this.stencilFuncMask=va.stencilFuncMask,this.stencilFail=va.stencilFail,this.stencilZFail=va.stencilZFail,this.stencilZPass=va.stencilZPass,this.stencilWrite=va.stencilWrite;var _o=va.clippingPlanes,xo=null;if(_o!==null){var bo=_o.length;xo=new Array(bo);for(var wo=0;wo!==bo;++wo)xo[wo]=_o[wo].clone()}return this.clippingPlanes=xo,this.clipIntersection=va.clipIntersection,this.clipShadows=va.clipShadows,this.shadowSide=va.shadowSide,this.colorWrite=va.colorWrite,this.precision=va.precision,this.polygonOffset=va.polygonOffset,this.polygonOffsetFactor=va.polygonOffsetFactor,this.polygonOffsetUnits=va.polygonOffsetUnits,this.dithering=va.dithering,this.alphaTest=va.alphaTest,this.premultipliedAlpha=va.premultipliedAlpha,this.visible=va.visible,this.toneMapped=va.toneMapped,this.userData=JSON.parse(JSON.stringify(va.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});function MeshBasicMaterial(va){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(va)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(va,_o,xo){if(Array.isArray(va))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=va,this.itemSize=_o,this.count=va!==void 0?va.length/_o:0,this.normalized=xo===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(va){return this.usage=va,this},copy:function(va){return this.name=va.name,this.array=new va.array.constructor(va.array),this.itemSize=va.itemSize,this.count=va.count,this.normalized=va.normalized,this.usage=va.usage,this},copyAt:function(va,_o,xo){va*=this.itemSize,xo*=_o.itemSize;for(var bo=0,wo=this.itemSize;bo<wo;bo++)this.array[va+bo]=_o.array[xo+bo];return this},copyArray:function(va){return this.array.set(va),this},copyColorsArray:function(va){for(var _o=this.array,xo=0,bo=0,wo=va.length;bo<wo;bo++){var Eo=va[bo];Eo===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",bo),Eo=new Color),_o[xo++]=Eo.r,_o[xo++]=Eo.g,_o[xo++]=Eo.b}return this},copyVector2sArray:function(va){for(var _o=this.array,xo=0,bo=0,wo=va.length;bo<wo;bo++){var Eo=va[bo];Eo===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",bo),Eo=new Vector2),_o[xo++]=Eo.x,_o[xo++]=Eo.y}return this},copyVector3sArray:function(va){for(var _o=this.array,xo=0,bo=0,wo=va.length;bo<wo;bo++){var Eo=va[bo];Eo===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",bo),Eo=new Vector3),_o[xo++]=Eo.x,_o[xo++]=Eo.y,_o[xo++]=Eo.z}return this},copyVector4sArray:function(va){for(var _o=this.array,xo=0,bo=0,wo=va.length;bo<wo;bo++){var Eo=va[bo];Eo===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",bo),Eo=new Vector4),_o[xo++]=Eo.x,_o[xo++]=Eo.y,_o[xo++]=Eo.z,_o[xo++]=Eo.w}return this},applyMatrix3:function(va){for(var _o=0,xo=this.count;_o<xo;_o++)_vector$3.x=this.getX(_o),_vector$3.y=this.getY(_o),_vector$3.z=this.getZ(_o),_vector$3.applyMatrix3(va),this.setXYZ(_o,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(va){for(var _o=0,xo=this.count;_o<xo;_o++)_vector$3.x=this.getX(_o),_vector$3.y=this.getY(_o),_vector$3.z=this.getZ(_o),_vector$3.applyMatrix4(va),this.setXYZ(_o,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(va){for(var _o=0,xo=this.count;_o<xo;_o++)_vector$3.x=this.getX(_o),_vector$3.y=this.getY(_o),_vector$3.z=this.getZ(_o),_vector$3.applyNormalMatrix(va),this.setXYZ(_o,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(va){for(var _o=0,xo=this.count;_o<xo;_o++)_vector$3.x=this.getX(_o),_vector$3.y=this.getY(_o),_vector$3.z=this.getZ(_o),_vector$3.transformDirection(va),this.setXYZ(_o,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(va,_o){return _o===void 0&&(_o=0),this.array.set(va,_o),this},getX:function(va){return this.array[va*this.itemSize]},setX:function(va,_o){return this.array[va*this.itemSize]=_o,this},getY:function(va){return this.array[va*this.itemSize+1]},setY:function(va,_o){return this.array[va*this.itemSize+1]=_o,this},getZ:function(va){return this.array[va*this.itemSize+2]},setZ:function(va,_o){return this.array[va*this.itemSize+2]=_o,this},getW:function(va){return this.array[va*this.itemSize+3]},setW:function(va,_o){return this.array[va*this.itemSize+3]=_o,this},setXY:function(va,_o,xo){return va*=this.itemSize,this.array[va+0]=_o,this.array[va+1]=xo,this},setXYZ:function(va,_o,xo,bo){return va*=this.itemSize,this.array[va+0]=_o,this.array[va+1]=xo,this.array[va+2]=bo,this},setXYZW:function(va,_o,xo,bo,wo){return va*=this.itemSize,this.array[va+0]=_o,this.array[va+1]=xo,this.array[va+2]=bo,this.array[va+3]=wo,this},onUpload:function(va){return this.onUploadCallback=va,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Int8Array(va),_o,xo)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Uint8Array(va),_o,xo)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(va,_o,xo){BufferAttribute.call(this,new Uint8ClampedArray(va),_o,xo)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Int16Array(va),_o,xo)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Uint16Array(va),_o,xo)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Int32Array(va),_o,xo)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Uint32Array(va),_o,xo)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Float32Array(va),_o,xo)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(va,_o,xo){BufferAttribute.call(this,new Float64Array(va),_o,xo)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(va){for(var _o,xo=[],bo=void 0,wo=va.faces,Eo=0;Eo<wo.length;Eo++){var To=wo[Eo];To.materialIndex!==bo&&(bo=To.materialIndex,_o!==void 0&&(_o.count=Eo*3-_o.start,xo.push(_o)),_o={start:Eo*3,materialIndex:bo})}_o!==void 0&&(_o.count=Eo*3-_o.start,xo.push(_o)),this.groups=xo},fromGeometry:function(va){var _o=va.faces,xo=va.vertices,bo=va.faceVertexUvs,wo=bo[0]&&bo[0].length>0,Eo=bo[1]&&bo[1].length>0,To=va.morphTargets,So=To.length,$o;if(So>0){$o=[];for(var Do=0;Do<So;Do++)$o[Do]={name:To[Do].name,data:[]};this.morphTargets.position=$o}var No=va.morphNormals,Oo=No.length,Lo;if(Oo>0){Lo=[];for(var Do=0;Do<Oo;Do++)Lo[Do]={name:No[Do].name,data:[]};this.morphTargets.normal=Lo}var Co=va.skinIndices,Ro=va.skinWeights,jo=Co.length===xo.length,zo=Ro.length===xo.length;xo.length>0&&_o.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Do=0;Do<_o.length;Do++){var Io=_o[Do];this.vertices.push(xo[Io.a],xo[Io.b],xo[Io.c]);var Po=Io.vertexNormals;if(Po.length===3)this.normals.push(Po[0],Po[1],Po[2]);else{var Bo=Io.normal;this.normals.push(Bo,Bo,Bo)}var ko=Io.vertexColors;if(ko.length===3)this.colors.push(ko[0],ko[1],ko[2]);else{var Uo=Io.color;this.colors.push(Uo,Uo,Uo)}if(wo===!0){var Qo=bo[0][Do];Qo!==void 0?this.uvs.push(Qo[0],Qo[1],Qo[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Do),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Eo===!0){var Qo=bo[1][Do];Qo!==void 0?this.uvs2.push(Qo[0],Qo[1],Qo[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Do),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var qo=0;qo<So;qo++){var Zo=To[qo].vertices;$o[qo].data.push(Zo[Io.a],Zo[Io.b],Zo[Io.c])}for(var qo=0;qo<Oo;qo++){var Xo=No[qo].vertexNormals[Do];Lo[qo].data.push(Xo.a,Xo.b,Xo.c)}jo&&this.skinIndices.push(Co[Io.a],Co[Io.b],Co[Io.c]),zo&&this.skinWeights.push(Ro[Io.a],Ro[Io.b],Ro[Io.c])}return this.computeGroups(va),this.verticesNeedUpdate=va.verticesNeedUpdate,this.normalsNeedUpdate=va.normalsNeedUpdate,this.colorsNeedUpdate=va.colorsNeedUpdate,this.uvsNeedUpdate=va.uvsNeedUpdate,this.groupsNeedUpdate=va.groupsNeedUpdate,va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),this}});function arrayMax(va){if(va.length===0)return-1/0;let _o=va[0];for(let xo=1,bo=va.length;xo<bo;++xo)va[xo]>_o&&(_o=va[xo]);return _o}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(va){Array.isArray(va)?this.index=new(arrayMax(va)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(va,1):this.index=va},getAttribute:function(va){return this.attributes[va]},setAttribute:function(va,_o){return this.attributes[va]=_o,this},deleteAttribute:function(va){return delete this.attributes[va],this},addGroup:function(va,_o,xo){this.groups.push({start:va,count:_o,materialIndex:xo!==void 0?xo:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(va,_o){this.drawRange.start=va,this.drawRange.count=_o},applyMatrix4:function(va){var _o=this.attributes.position;_o!==void 0&&(_o.applyMatrix4(va),_o.needsUpdate=!0);var xo=this.attributes.normal;if(xo!==void 0){var bo=new Matrix3().getNormalMatrix(va);xo.applyNormalMatrix(bo),xo.needsUpdate=!0}var wo=this.attributes.tangent;return wo!==void 0&&(wo.transformDirection(va),wo.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(va){return _m1$2.makeRotationX(va),this.applyMatrix4(_m1$2),this},rotateY:function(va){return _m1$2.makeRotationY(va),this.applyMatrix4(_m1$2),this},rotateZ:function(va){return _m1$2.makeRotationZ(va),this.applyMatrix4(_m1$2),this},translate:function(va,_o,xo){return _m1$2.makeTranslation(va,_o,xo),this.applyMatrix4(_m1$2),this},scale:function(va,_o,xo){return _m1$2.makeScale(va,_o,xo),this.applyMatrix4(_m1$2),this},lookAt:function(va){return _obj.lookAt(va),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(va){var _o=va.geometry;if(va.isPoints||va.isLine){var xo=new Float32BufferAttribute(_o.vertices.length*3,3),bo=new Float32BufferAttribute(_o.colors.length*3,3);if(this.setAttribute("position",xo.copyVector3sArray(_o.vertices)),this.setAttribute("color",bo.copyColorsArray(_o.colors)),_o.lineDistances&&_o.lineDistances.length===_o.vertices.length){var wo=new Float32BufferAttribute(_o.lineDistances.length,1);this.setAttribute("lineDistance",wo.copyArray(_o.lineDistances))}_o.boundingSphere!==null&&(this.boundingSphere=_o.boundingSphere.clone()),_o.boundingBox!==null&&(this.boundingBox=_o.boundingBox.clone())}else va.isMesh&&_o&&_o.isGeometry&&this.fromGeometry(_o);return this},setFromPoints:function(va){for(var _o=[],xo=0,bo=va.length;xo<bo;xo++){var wo=va[xo];_o.push(wo.x,wo.y,wo.z||0)}return this.setAttribute("position",new Float32BufferAttribute(_o,3)),this},updateFromObject:function(va){var _o=va.geometry;if(va.isMesh){var xo=_o.__directGeometry;if(_o.elementsNeedUpdate===!0&&(xo=void 0,_o.elementsNeedUpdate=!1),xo===void 0)return this.fromGeometry(_o);xo.verticesNeedUpdate=_o.verticesNeedUpdate,xo.normalsNeedUpdate=_o.normalsNeedUpdate,xo.colorsNeedUpdate=_o.colorsNeedUpdate,xo.uvsNeedUpdate=_o.uvsNeedUpdate,xo.groupsNeedUpdate=_o.groupsNeedUpdate,_o.verticesNeedUpdate=!1,_o.normalsNeedUpdate=!1,_o.colorsNeedUpdate=!1,_o.uvsNeedUpdate=!1,_o.groupsNeedUpdate=!1,_o=xo}var bo;return _o.verticesNeedUpdate===!0&&(bo=this.attributes.position,bo!==void 0&&(bo.copyVector3sArray(_o.vertices),bo.needsUpdate=!0),_o.verticesNeedUpdate=!1),_o.normalsNeedUpdate===!0&&(bo=this.attributes.normal,bo!==void 0&&(bo.copyVector3sArray(_o.normals),bo.needsUpdate=!0),_o.normalsNeedUpdate=!1),_o.colorsNeedUpdate===!0&&(bo=this.attributes.color,bo!==void 0&&(bo.copyColorsArray(_o.colors),bo.needsUpdate=!0),_o.colorsNeedUpdate=!1),_o.uvsNeedUpdate&&(bo=this.attributes.uv,bo!==void 0&&(bo.copyVector2sArray(_o.uvs),bo.needsUpdate=!0),_o.uvsNeedUpdate=!1),_o.lineDistancesNeedUpdate&&(bo=this.attributes.lineDistance,bo!==void 0&&(bo.copyArray(_o.lineDistances),bo.needsUpdate=!0),_o.lineDistancesNeedUpdate=!1),_o.groupsNeedUpdate&&(_o.computeGroups(va.geometry),this.groups=_o.groups,_o.groupsNeedUpdate=!1),this},fromGeometry:function(va){return va.__directGeometry=new DirectGeometry().fromGeometry(va),this.fromDirectGeometry(va.__directGeometry)},fromDirectGeometry:function(va){var _o=new Float32Array(va.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(_o,3).copyVector3sArray(va.vertices)),va.normals.length>0){var xo=new Float32Array(va.normals.length*3);this.setAttribute("normal",new BufferAttribute(xo,3).copyVector3sArray(va.normals))}if(va.colors.length>0){var bo=new Float32Array(va.colors.length*3);this.setAttribute("color",new BufferAttribute(bo,3).copyColorsArray(va.colors))}if(va.uvs.length>0){var wo=new Float32Array(va.uvs.length*2);this.setAttribute("uv",new BufferAttribute(wo,2).copyVector2sArray(va.uvs))}if(va.uvs2.length>0){var Eo=new Float32Array(va.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Eo,2).copyVector2sArray(va.uvs2))}this.groups=va.groups;for(var To in va.morphTargets){for(var So=[],$o=va.morphTargets[To],Do=0,No=$o.length;Do<No;Do++){var Oo=$o[Do],Lo=new Float32BufferAttribute(Oo.data.length*3,3);Lo.name=Oo.name,So.push(Lo.copyVector3sArray(Oo.data))}this.morphAttributes[To]=So}if(va.skinIndices.length>0){var Co=new Float32BufferAttribute(va.skinIndices.length*4,4);this.setAttribute("skinIndex",Co.copyVector4sArray(va.skinIndices))}if(va.skinWeights.length>0){var Ro=new Float32BufferAttribute(va.skinWeights.length*4,4);this.setAttribute("skinWeight",Ro.copyVector4sArray(va.skinWeights))}return va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var va=this.attributes.position,_o=this.morphAttributes.position;if(va!==void 0){if(this.boundingBox.setFromBufferAttribute(va),_o)for(var xo=0,bo=_o.length;xo<bo;xo++){var wo=_o[xo];_box$2.setFromBufferAttribute(wo),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var va=this.attributes.position,_o=this.morphAttributes.position;if(va){var xo=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(va),_o)for(var bo=0,wo=_o.length;bo<wo;bo++){var Eo=_o[bo];_boxMorphTargets.setFromBufferAttribute(Eo),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(xo);for(var To=0,bo=0,wo=va.count;bo<wo;bo++)_vector$4.fromBufferAttribute(va,bo),To=Math.max(To,xo.distanceToSquared(_vector$4));if(_o)for(var bo=0,wo=_o.length;bo<wo;bo++)for(var Eo=_o[bo],So=this.morphTargetsRelative,$o=0,Do=Eo.count;$o<Do;$o++)_vector$4.fromBufferAttribute(Eo,$o),So&&(_offset.fromBufferAttribute(va,$o),_vector$4.add(_offset)),To=Math.max(To,xo.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(To),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var va=this.index,_o=this.attributes;if(_o.position){var xo=_o.position.array;if(_o.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(xo.length),3));else for(var bo=_o.normal.array,wo=0,Eo=bo.length;wo<Eo;wo++)bo[wo]=0;var To=_o.normal.array,So,$o,Do,No=new Vector3,Oo=new Vector3,Lo=new Vector3,Co=new Vector3,Ro=new Vector3;if(va)for(var jo=va.array,wo=0,Eo=va.count;wo<Eo;wo+=3)So=jo[wo+0]*3,$o=jo[wo+1]*3,Do=jo[wo+2]*3,No.fromArray(xo,So),Oo.fromArray(xo,$o),Lo.fromArray(xo,Do),Co.subVectors(Lo,Oo),Ro.subVectors(No,Oo),Co.cross(Ro),To[So]+=Co.x,To[So+1]+=Co.y,To[So+2]+=Co.z,To[$o]+=Co.x,To[$o+1]+=Co.y,To[$o+2]+=Co.z,To[Do]+=Co.x,To[Do+1]+=Co.y,To[Do+2]+=Co.z;else for(var wo=0,Eo=xo.length;wo<Eo;wo+=9)No.fromArray(xo,wo),Oo.fromArray(xo,wo+3),Lo.fromArray(xo,wo+6),Co.subVectors(Lo,Oo),Ro.subVectors(No,Oo),Co.cross(Ro),To[wo]=Co.x,To[wo+1]=Co.y,To[wo+2]=Co.z,To[wo+3]=Co.x,To[wo+4]=Co.y,To[wo+5]=Co.z,To[wo+6]=Co.x,To[wo+7]=Co.y,To[wo+8]=Co.z;this.normalizeNormals(),_o.normal.needsUpdate=!0}},merge:function(va,_o){if(!(va&&va.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",va);return}_o===void 0&&(_o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var xo=this.attributes;for(var bo in xo)if(va.attributes[bo]!==void 0)for(var wo=xo[bo],Eo=wo.array,To=va.attributes[bo],So=To.array,$o=To.itemSize*_o,Do=Math.min(So.length,Eo.length-$o),No=0,Oo=$o;No<Do;No++,Oo++)Eo[Oo]=So[No];return this},normalizeNormals:function(){for(var va=this.attributes.normal,_o=0,xo=va.count;_o<xo;_o++)_vector$4.x=va.getX(_o),_vector$4.y=va.getY(_o),_vector$4.z=va.getZ(_o),_vector$4.normalize(),va.setXYZ(_o,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function va(jo,zo){for(var Io=jo.array,Po=jo.itemSize,Bo=jo.normalized,ko=new Io.constructor(zo.length*Po),Uo=0,Qo=0,qo=0,Zo=zo.length;qo<Zo;qo++){Uo=zo[qo]*Po;for(var Xo=0;Xo<Po;Xo++)ko[Qo++]=Io[Uo++]}return new BufferAttribute(ko,Po,Bo)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var _o=new BufferGeometry,xo=this.index.array,bo=this.attributes;for(var wo in bo){var Eo=bo[wo],To=va(Eo,xo);_o.setAttribute(wo,To)}var So=this.morphAttributes;for(wo in So){for(var $o=[],Do=So[wo],No=0,Oo=Do.length;No<Oo;No++){var Eo=Do[No],To=va(Eo,xo);$o.push(To)}_o.morphAttributes[wo]=$o}_o.morphTargetsRelative=this.morphTargetsRelative;for(var Lo=this.groups,No=0,Co=Lo.length;No<Co;No++){var Ro=Lo[No];_o.addGroup(Ro.start,Ro.count,Ro.materialIndex)}return _o},toJSON:function(){var va={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(va.uuid=this.uuid,va.type=this.type,this.name!==""&&(va.name=this.name),Object.keys(this.userData).length>0&&(va.userData=this.userData),this.parameters!==void 0){var _o=this.parameters;for(var xo in _o)_o[xo]!==void 0&&(va[xo]=_o[xo]);return va}va.data={attributes:{}};var bo=this.index;bo!==null&&(va.data.index={type:bo.array.constructor.name,array:Array.prototype.slice.call(bo.array)});var wo=this.attributes;for(var xo in wo){var Eo=wo[xo],To=Eo.toJSON();Eo.name!==""&&(To.name=Eo.name),va.data.attributes[xo]=To}var So={},$o=!1;for(var xo in this.morphAttributes){for(var Do=this.morphAttributes[xo],No=[],Oo=0,Lo=Do.length;Oo<Lo;Oo++){var Eo=Do[Oo],To=Eo.toJSON();Eo.name!==""&&(To.name=Eo.name),No.push(To)}No.length>0&&(So[xo]=No,$o=!0)}$o&&(va.data.morphAttributes=So,va.data.morphTargetsRelative=this.morphTargetsRelative);var Co=this.groups;Co.length>0&&(va.data.groups=JSON.parse(JSON.stringify(Co)));var Ro=this.boundingSphere;return Ro!==null&&(va.data.boundingSphere={center:Ro.center.toArray(),radius:Ro.radius}),va},clone:function(){return new BufferGeometry().copy(this)},copy:function(va){var _o,xo,bo;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=va.name;var wo=va.index;wo!==null&&this.setIndex(wo.clone());var Eo=va.attributes;for(_o in Eo){var To=Eo[_o];this.setAttribute(_o,To.clone())}var So=va.morphAttributes;for(_o in So){var $o=[],Do=So[_o];for(xo=0,bo=Do.length;xo<bo;xo++)$o.push(Do[xo].clone());this.morphAttributes[_o]=$o}this.morphTargetsRelative=va.morphTargetsRelative;var No=va.groups;for(xo=0,bo=No.length;xo<bo;xo++){var Oo=No[xo];this.addGroup(Oo.start,Oo.count,Oo.materialIndex)}var Lo=va.boundingBox;Lo!==null&&(this.boundingBox=Lo.clone());var Co=va.boundingSphere;return Co!==null&&(this.boundingSphere=Co.clone()),this.drawRange.start=va.drawRange.start,this.drawRange.count=va.drawRange.count,this.userData=va.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(va,_o){Object3D.call(this),this.type="Mesh",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_o!==void 0?_o:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(va){return Object3D.prototype.copy.call(this,va),va.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=va.morphTargetInfluences.slice()),va.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},va.morphTargetDictionary)),this},updateMorphTargets:function(){var va=this.geometry,_o,xo,bo;if(va.isBufferGeometry){var wo=va.morphAttributes,Eo=Object.keys(wo);if(Eo.length>0){var To=wo[Eo[0]];if(To!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_o=0,xo=To.length;_o<xo;_o++)bo=To[_o].name||String(_o),this.morphTargetInfluences.push(0),this.morphTargetDictionary[bo]=_o}}else{var So=va.morphTargets;So!==void 0&&So.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(va,_o){var xo=this.geometry,bo=this.material,wo=this.matrixWorld;if(bo!==void 0&&(xo.boundingSphere===null&&xo.computeBoundingSphere(),_sphere.copy(xo.boundingSphere),_sphere.applyMatrix4(wo),va.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(wo),_ray.copy(va.ray).applyMatrix4(_inverseMatrix),!(xo.boundingBox!==null&&_ray.intersectsBox(xo.boundingBox)===!1)))){var Eo;if(xo.isBufferGeometry){var To,So,$o,Do=xo.index,No=xo.attributes.position,Oo=xo.morphAttributes.position,Lo=xo.morphTargetsRelative,Co=xo.attributes.uv,Ro=xo.attributes.uv2,jo=xo.groups,zo=xo.drawRange,Io,Po,Bo,ko,Uo,Qo,qo,Zo;if(Do!==null)if(Array.isArray(bo))for(Io=0,Bo=jo.length;Io<Bo;Io++)for(Uo=jo[Io],Qo=bo[Uo.materialIndex],qo=Math.max(Uo.start,zo.start),Zo=Math.min(Uo.start+Uo.count,zo.start+zo.count),Po=qo,ko=Zo;Po<ko;Po+=3)To=Do.getX(Po),So=Do.getX(Po+1),$o=Do.getX(Po+2),Eo=checkBufferGeometryIntersection(this,Qo,va,_ray,No,Oo,Lo,Co,Ro,To,So,$o),Eo&&(Eo.faceIndex=Math.floor(Po/3),Eo.face.materialIndex=Uo.materialIndex,_o.push(Eo));else for(qo=Math.max(0,zo.start),Zo=Math.min(Do.count,zo.start+zo.count),Io=qo,Bo=Zo;Io<Bo;Io+=3)To=Do.getX(Io),So=Do.getX(Io+1),$o=Do.getX(Io+2),Eo=checkBufferGeometryIntersection(this,bo,va,_ray,No,Oo,Lo,Co,Ro,To,So,$o),Eo&&(Eo.faceIndex=Math.floor(Io/3),_o.push(Eo));else if(No!==void 0)if(Array.isArray(bo))for(Io=0,Bo=jo.length;Io<Bo;Io++)for(Uo=jo[Io],Qo=bo[Uo.materialIndex],qo=Math.max(Uo.start,zo.start),Zo=Math.min(Uo.start+Uo.count,zo.start+zo.count),Po=qo,ko=Zo;Po<ko;Po+=3)To=Po,So=Po+1,$o=Po+2,Eo=checkBufferGeometryIntersection(this,Qo,va,_ray,No,Oo,Lo,Co,Ro,To,So,$o),Eo&&(Eo.faceIndex=Math.floor(Po/3),Eo.face.materialIndex=Uo.materialIndex,_o.push(Eo));else for(qo=Math.max(0,zo.start),Zo=Math.min(No.count,zo.start+zo.count),Io=qo,Bo=Zo;Io<Bo;Io+=3)To=Io,So=Io+1,$o=Io+2,Eo=checkBufferGeometryIntersection(this,bo,va,_ray,No,Oo,Lo,Co,Ro,To,So,$o),Eo&&(Eo.faceIndex=Math.floor(Io/3),_o.push(Eo))}else if(xo.isGeometry){var Xo,Fo,Go,Vo=Array.isArray(bo),Wo=xo.vertices,Yo=xo.faces,Ko,ts=xo.faceVertexUvs[0];ts.length>0&&(Ko=ts);for(var Jo=0,rs=Yo.length;Jo<rs;Jo++){var ls=Yo[Jo],ss=Vo?bo[ls.materialIndex]:bo;if(ss!==void 0&&(Xo=Wo[ls.a],Fo=Wo[ls.b],Go=Wo[ls.c],Eo=checkIntersection(this,ss,va,_ray,Xo,Fo,Go,_intersectionPoint),Eo)){if(Ko&&Ko[Jo]){var us=Ko[Jo];_uvA.copy(us[0]),_uvB.copy(us[1]),_uvC.copy(us[2]),Eo.uv=Triangle.getUV(_intersectionPoint,Xo,Fo,Go,_uvA,_uvB,_uvC,new Vector2)}Eo.face=ls,Eo.faceIndex=Jo,_o.push(Eo)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(va,_o,xo,bo,wo,Eo,To,So){var $o;if(_o.side===BackSide?$o=bo.intersectTriangle(To,Eo,wo,!0,So):$o=bo.intersectTriangle(wo,Eo,To,_o.side!==DoubleSide,So),$o===null)return null;_intersectionPointWorld.copy(So),_intersectionPointWorld.applyMatrix4(va.matrixWorld);var Do=xo.ray.origin.distanceTo(_intersectionPointWorld);return Do<xo.near||Do>xo.far?null:{distance:Do,point:_intersectionPointWorld.clone(),object:va}}function checkBufferGeometryIntersection(va,_o,xo,bo,wo,Eo,To,So,$o,Do,No,Oo){_vA.fromBufferAttribute(wo,Do),_vB.fromBufferAttribute(wo,No),_vC.fromBufferAttribute(wo,Oo);var Lo=va.morphTargetInfluences;if(_o.morphTargets&&Eo&&Lo){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Co=0,Ro=Eo.length;Co<Ro;Co++){var jo=Lo[Co],zo=Eo[Co];jo!==0&&(_tempA.fromBufferAttribute(zo,Do),_tempB.fromBufferAttribute(zo,No),_tempC.fromBufferAttribute(zo,Oo),To?(_morphA.addScaledVector(_tempA,jo),_morphB.addScaledVector(_tempB,jo),_morphC.addScaledVector(_tempC,jo)):(_morphA.addScaledVector(_tempA.sub(_vA),jo),_morphB.addScaledVector(_tempB.sub(_vB),jo),_morphC.addScaledVector(_tempC.sub(_vC),jo)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}va.isSkinnedMesh&&(va.boneTransform(Do,_vA),va.boneTransform(No,_vB),va.boneTransform(Oo,_vC));var Io=checkIntersection(va,_o,xo,bo,_vA,_vB,_vC,_intersectionPoint);if(Io){So&&(_uvA.fromBufferAttribute(So,Do),_uvB.fromBufferAttribute(So,No),_uvC.fromBufferAttribute(So,Oo),Io.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),$o&&(_uvA.fromBufferAttribute($o,Do),_uvB.fromBufferAttribute($o,No),_uvC.fromBufferAttribute($o,Oo),Io.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var Po=new Face3(Do,No,Oo);Triangle.getNormal(_vA,_vB,_vC,Po.normal),Io.face=Po}return Io}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(va){for(var _o=new Matrix3().getNormalMatrix(va),xo=0,bo=this.vertices.length;xo<bo;xo++){var wo=this.vertices[xo];wo.applyMatrix4(va)}for(var xo=0,bo=this.faces.length;xo<bo;xo++){var Eo=this.faces[xo];Eo.normal.applyMatrix3(_o).normalize();for(var To=0,So=Eo.vertexNormals.length;To<So;To++)Eo.vertexNormals[To].applyMatrix3(_o).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(va){return _m1$3.makeRotationX(va),this.applyMatrix4(_m1$3),this},rotateY:function(va){return _m1$3.makeRotationY(va),this.applyMatrix4(_m1$3),this},rotateZ:function(va){return _m1$3.makeRotationZ(va),this.applyMatrix4(_m1$3),this},translate:function(va,_o,xo){return _m1$3.makeTranslation(va,_o,xo),this.applyMatrix4(_m1$3),this},scale:function(va,_o,xo){return _m1$3.makeScale(va,_o,xo),this.applyMatrix4(_m1$3),this},lookAt:function(va){return _obj$1.lookAt(va),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(va){var _o=this,xo=va.index!==null?va.index.array:void 0,bo=va.attributes;if(bo.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var wo=bo.position.array,Eo=bo.normal!==void 0?bo.normal.array:void 0,To=bo.color!==void 0?bo.color.array:void 0,So=bo.uv!==void 0?bo.uv.array:void 0,$o=bo.uv2!==void 0?bo.uv2.array:void 0;$o!==void 0&&(this.faceVertexUvs[1]=[]);for(var Do=0;Do<wo.length;Do+=3)_o.vertices.push(new Vector3().fromArray(wo,Do)),To!==void 0&&_o.colors.push(new Color().fromArray(To,Do));function No(Io,Po,Bo,ko){var Uo=To===void 0?[]:[_o.colors[Io].clone(),_o.colors[Po].clone(),_o.colors[Bo].clone()],Qo=Eo===void 0?[]:[new Vector3().fromArray(Eo,Io*3),new Vector3().fromArray(Eo,Po*3),new Vector3().fromArray(Eo,Bo*3)],qo=new Face3(Io,Po,Bo,Qo,Uo,ko);_o.faces.push(qo),So!==void 0&&_o.faceVertexUvs[0].push([new Vector2().fromArray(So,Io*2),new Vector2().fromArray(So,Po*2),new Vector2().fromArray(So,Bo*2)]),$o!==void 0&&_o.faceVertexUvs[1].push([new Vector2().fromArray($o,Io*2),new Vector2().fromArray($o,Po*2),new Vector2().fromArray($o,Bo*2)])}var Oo=va.groups;if(Oo.length>0)for(var Do=0;Do<Oo.length;Do++)for(var Lo=Oo[Do],Co=Lo.start,Ro=Lo.count,jo=Co,zo=Co+Ro;jo<zo;jo+=3)xo!==void 0?No(xo[jo],xo[jo+1],xo[jo+2],Lo.materialIndex):No(jo,jo+1,jo+2,Lo.materialIndex);else if(xo!==void 0)for(var Do=0;Do<xo.length;Do+=3)No(xo[Do],xo[Do+1],xo[Do+2]);else for(var Do=0;Do<wo.length/3;Do+=3)No(Do,Do+1,Do+2);return this.computeFaceNormals(),va.boundingBox!==null&&(this.boundingBox=va.boundingBox.clone()),va.boundingSphere!==null&&(this.boundingSphere=va.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var va=this.boundingSphere.center,_o=this.boundingSphere.radius,xo=_o===0?1:1/_o,bo=new Matrix4;return bo.set(xo,0,0,-xo*va.x,0,xo,0,-xo*va.y,0,0,xo,-xo*va.z,0,0,0,1),this.applyMatrix4(bo),this},computeFaceNormals:function(){for(var va=new Vector3,_o=new Vector3,xo=0,bo=this.faces.length;xo<bo;xo++){var wo=this.faces[xo],Eo=this.vertices[wo.a],To=this.vertices[wo.b],So=this.vertices[wo.c];va.subVectors(So,To),_o.subVectors(Eo,To),va.cross(_o),va.normalize(),wo.normal.copy(va)}},computeVertexNormals:function(va){va===void 0&&(va=!0);var _o,xo,bo,wo,Eo,To;for(To=new Array(this.vertices.length),_o=0,xo=this.vertices.length;_o<xo;_o++)To[_o]=new Vector3;if(va){var So,$o,Do,No=new Vector3,Oo=new Vector3;for(bo=0,wo=this.faces.length;bo<wo;bo++)Eo=this.faces[bo],So=this.vertices[Eo.a],$o=this.vertices[Eo.b],Do=this.vertices[Eo.c],No.subVectors(Do,$o),Oo.subVectors(So,$o),No.cross(Oo),To[Eo.a].add(No),To[Eo.b].add(No),To[Eo.c].add(No)}else for(this.computeFaceNormals(),bo=0,wo=this.faces.length;bo<wo;bo++)Eo=this.faces[bo],To[Eo.a].add(Eo.normal),To[Eo.b].add(Eo.normal),To[Eo.c].add(Eo.normal);for(_o=0,xo=this.vertices.length;_o<xo;_o++)To[_o].normalize();for(bo=0,wo=this.faces.length;bo<wo;bo++){Eo=this.faces[bo];var Lo=Eo.vertexNormals;Lo.length===3?(Lo[0].copy(To[Eo.a]),Lo[1].copy(To[Eo.b]),Lo[2].copy(To[Eo.c])):(Lo[0]=To[Eo.a].clone(),Lo[1]=To[Eo.b].clone(),Lo[2]=To[Eo.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var va,_o,xo;for(this.computeFaceNormals(),va=0,_o=this.faces.length;va<_o;va++){xo=this.faces[va];var bo=xo.vertexNormals;bo.length===3?(bo[0].copy(xo.normal),bo[1].copy(xo.normal),bo[2].copy(xo.normal)):(bo[0]=xo.normal.clone(),bo[1]=xo.normal.clone(),bo[2]=xo.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var va,_o,xo,bo,wo;for(xo=0,bo=this.faces.length;xo<bo;xo++)for(wo=this.faces[xo],wo.__originalFaceNormal?wo.__originalFaceNormal.copy(wo.normal):wo.__originalFaceNormal=wo.normal.clone(),wo.__originalVertexNormals||(wo.__originalVertexNormals=[]),va=0,_o=wo.vertexNormals.length;va<_o;va++)wo.__originalVertexNormals[va]?wo.__originalVertexNormals[va].copy(wo.vertexNormals[va]):wo.__originalVertexNormals[va]=wo.vertexNormals[va].clone();var Eo=new Geometry;for(Eo.faces=this.faces,va=0,_o=this.morphTargets.length;va<_o;va++){if(!this.morphNormals[va]){this.morphNormals[va]={},this.morphNormals[va].faceNormals=[],this.morphNormals[va].vertexNormals=[];var To=this.morphNormals[va].faceNormals,So=this.morphNormals[va].vertexNormals,Do,No;for(xo=0,bo=this.faces.length;xo<bo;xo++)Do=new Vector3,No={a:new Vector3,b:new Vector3,c:new Vector3},To.push(Do),So.push(No)}var $o=this.morphNormals[va];Eo.vertices=this.morphTargets[va].vertices,Eo.computeFaceNormals(),Eo.computeVertexNormals();var Do,No;for(xo=0,bo=this.faces.length;xo<bo;xo++)wo=this.faces[xo],Do=$o.faceNormals[xo],No=$o.vertexNormals[xo],Do.copy(wo.normal),No.a.copy(wo.vertexNormals[0]),No.b.copy(wo.vertexNormals[1]),No.c.copy(wo.vertexNormals[2])}for(xo=0,bo=this.faces.length;xo<bo;xo++)wo=this.faces[xo],wo.normal=wo.__originalFaceNormal,wo.vertexNormals=wo.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(va,_o,xo){if(!(va&&va.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",va);return}var bo,wo=this.vertices.length,Eo=this.vertices,To=va.vertices,So=this.faces,$o=va.faces,Do=this.colors,No=va.colors;xo===void 0&&(xo=0),_o!==void 0&&(bo=new Matrix3().getNormalMatrix(_o));for(var Oo=0,Lo=To.length;Oo<Lo;Oo++){var Co=To[Oo],Ro=Co.clone();_o!==void 0&&Ro.applyMatrix4(_o),Eo.push(Ro)}for(var Oo=0,Lo=No.length;Oo<Lo;Oo++)Do.push(No[Oo].clone());for(Oo=0,Lo=$o.length;Oo<Lo;Oo++){var jo=$o[Oo],zo,Io,Po,Bo=jo.vertexNormals,ko=jo.vertexColors;zo=new Face3(jo.a+wo,jo.b+wo,jo.c+wo),zo.normal.copy(jo.normal),bo!==void 0&&zo.normal.applyMatrix3(bo).normalize();for(var Uo=0,Qo=Bo.length;Uo<Qo;Uo++)Io=Bo[Uo].clone(),bo!==void 0&&Io.applyMatrix3(bo).normalize(),zo.vertexNormals.push(Io);zo.color.copy(jo.color);for(var Uo=0,Qo=ko.length;Uo<Qo;Uo++)Po=ko[Uo],zo.vertexColors.push(Po.clone());zo.materialIndex=jo.materialIndex+xo,So.push(zo)}for(var Oo=0,Lo=va.faceVertexUvs.length;Oo<Lo;Oo++){var qo=va.faceVertexUvs[Oo];this.faceVertexUvs[Oo]===void 0&&(this.faceVertexUvs[Oo]=[]);for(var Uo=0,Qo=qo.length;Uo<Qo;Uo++){for(var Zo=qo[Uo],Xo=[],Fo=0,Go=Zo.length;Fo<Go;Fo++)Xo.push(Zo[Fo].clone());this.faceVertexUvs[Oo].push(Xo)}}},mergeMesh:function(va){if(!(va&&va.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",va);return}va.matrixAutoUpdate&&va.updateMatrix(),this.merge(va.geometry,va.matrix)},mergeVertices:function(){var va={},_o=[],xo=[],bo,wo,Eo=4,To=Math.pow(10,Eo),So,$o,Do,No,Oo,Lo;for(So=0,$o=this.vertices.length;So<$o;So++)bo=this.vertices[So],wo=Math.round(bo.x*To)+"_"+Math.round(bo.y*To)+"_"+Math.round(bo.z*To),va[wo]===void 0?(va[wo]=So,_o.push(this.vertices[So]),xo[So]=_o.length-1):xo[So]=xo[va[wo]];var Co=[];for(So=0,$o=this.faces.length;So<$o;So++){Do=this.faces[So],Do.a=xo[Do.a],Do.b=xo[Do.b],Do.c=xo[Do.c],No=[Do.a,Do.b,Do.c];for(var Ro=0;Ro<3;Ro++)if(No[Ro]===No[(Ro+1)%3]){Co.push(So);break}}for(So=Co.length-1;So>=0;So--){var jo=Co[So];for(this.faces.splice(jo,1),Oo=0,Lo=this.faceVertexUvs.length;Oo<Lo;Oo++)this.faceVertexUvs[Oo].splice(jo,1)}var zo=this.vertices.length-_o.length;return this.vertices=_o,zo},setFromPoints:function(va){this.vertices=[];for(var _o=0,xo=va.length;_o<xo;_o++){var bo=va[_o];this.vertices.push(new Vector3(bo.x,bo.y,bo.z||0))}return this},sortFacesByMaterialIndex:function(){for(var va=this.faces,_o=va.length,xo=0;xo<_o;xo++)va[xo]._id=xo;function bo(Do,No){return Do.materialIndex-No.materialIndex}va.sort(bo);var wo=this.faceVertexUvs[0],Eo=this.faceVertexUvs[1],To,So;wo&&wo.length===_o&&(To=[]),Eo&&Eo.length===_o&&(So=[]);for(var xo=0;xo<_o;xo++){var $o=va[xo]._id;To&&To.push(wo[$o]),So&&So.push(Eo[$o])}To&&(this.faceVertexUvs[0]=To),So&&(this.faceVertexUvs[1]=So)},toJSON:function(){var va={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(va.uuid=this.uuid,va.type=this.type,this.name!==""&&(va.name=this.name),this.parameters!==void 0){var _o=this.parameters;for(var xo in _o)_o[xo]!==void 0&&(va[xo]=_o[xo]);return va}for(var bo=[],wo=0;wo<this.vertices.length;wo++){var Eo=this.vertices[wo];bo.push(Eo.x,Eo.y,Eo.z)}for(var To=[],So=[],$o={},Do=[],No={},Oo=[],Lo={},wo=0;wo<this.faces.length;wo++){var Co=this.faces[wo],Ro=!0,jo=!1,zo=this.faceVertexUvs[0][wo]!==void 0,Io=Co.normal.length()>0,Po=Co.vertexNormals.length>0,Bo=Co.color.r!==1||Co.color.g!==1||Co.color.b!==1,ko=Co.vertexColors.length>0,Uo=0;if(Uo=Xo(Uo,0,0),Uo=Xo(Uo,1,Ro),Uo=Xo(Uo,2,jo),Uo=Xo(Uo,3,zo),Uo=Xo(Uo,4,Io),Uo=Xo(Uo,5,Po),Uo=Xo(Uo,6,Bo),Uo=Xo(Uo,7,ko),To.push(Uo),To.push(Co.a,Co.b,Co.c),To.push(Co.materialIndex),zo){var Qo=this.faceVertexUvs[0][wo];To.push(Vo(Qo[0]),Vo(Qo[1]),Vo(Qo[2]))}if(Io&&To.push(Fo(Co.normal)),Po){var qo=Co.vertexNormals;To.push(Fo(qo[0]),Fo(qo[1]),Fo(qo[2]))}if(Bo&&To.push(Go(Co.color)),ko){var Zo=Co.vertexColors;To.push(Go(Zo[0]),Go(Zo[1]),Go(Zo[2]))}}function Xo(Wo,Yo,Ko){return Ko?Wo|1<<Yo:Wo&~(1<<Yo)}function Fo(Wo){var Yo=Wo.x.toString()+Wo.y.toString()+Wo.z.toString();return $o[Yo]!==void 0||($o[Yo]=So.length/3,So.push(Wo.x,Wo.y,Wo.z)),$o[Yo]}function Go(Wo){var Yo=Wo.r.toString()+Wo.g.toString()+Wo.b.toString();return No[Yo]!==void 0||(No[Yo]=Do.length,Do.push(Wo.getHex())),No[Yo]}function Vo(Wo){var Yo=Wo.x.toString()+Wo.y.toString();return Lo[Yo]!==void 0||(Lo[Yo]=Oo.length/2,Oo.push(Wo.x,Wo.y)),Lo[Yo]}return va.data={},va.data.vertices=bo,va.data.normals=So,Do.length>0&&(va.data.colors=Do),Oo.length>0&&(va.data.uvs=[Oo]),va.data.faces=To,va},clone:function(){return new Geometry().copy(this)},copy:function(va){var _o,xo,bo,wo,Eo,To;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=va.name;var So=va.vertices;for(_o=0,xo=So.length;_o<xo;_o++)this.vertices.push(So[_o].clone());var $o=va.colors;for(_o=0,xo=$o.length;_o<xo;_o++)this.colors.push($o[_o].clone());var Do=va.faces;for(_o=0,xo=Do.length;_o<xo;_o++)this.faces.push(Do[_o].clone());for(_o=0,xo=va.faceVertexUvs.length;_o<xo;_o++){var No=va.faceVertexUvs[_o];for(this.faceVertexUvs[_o]===void 0&&(this.faceVertexUvs[_o]=[]),bo=0,wo=No.length;bo<wo;bo++){var Oo=No[bo],Lo=[];for(Eo=0,To=Oo.length;Eo<To;Eo++){var Co=Oo[Eo];Lo.push(Co.clone())}this.faceVertexUvs[_o].push(Lo)}}var Ro=va.morphTargets;for(_o=0,xo=Ro.length;_o<xo;_o++){var jo={};if(jo.name=Ro[_o].name,Ro[_o].vertices!==void 0)for(jo.vertices=[],bo=0,wo=Ro[_o].vertices.length;bo<wo;bo++)jo.vertices.push(Ro[_o].vertices[bo].clone());if(Ro[_o].normals!==void 0)for(jo.normals=[],bo=0,wo=Ro[_o].normals.length;bo<wo;bo++)jo.normals.push(Ro[_o].normals[bo].clone());this.morphTargets.push(jo)}var zo=va.morphNormals;for(_o=0,xo=zo.length;_o<xo;_o++){var Io={};if(zo[_o].vertexNormals!==void 0)for(Io.vertexNormals=[],bo=0,wo=zo[_o].vertexNormals.length;bo<wo;bo++){var Po=zo[_o].vertexNormals[bo],Bo={};Bo.a=Po.a.clone(),Bo.b=Po.b.clone(),Bo.c=Po.c.clone(),Io.vertexNormals.push(Bo)}if(zo[_o].faceNormals!==void 0)for(Io.faceNormals=[],bo=0,wo=zo[_o].faceNormals.length;bo<wo;bo++)Io.faceNormals.push(zo[_o].faceNormals[bo].clone());this.morphNormals.push(Io)}var ko=va.skinWeights;for(_o=0,xo=ko.length;_o<xo;_o++)this.skinWeights.push(ko[_o].clone());var Uo=va.skinIndices;for(_o=0,xo=Uo.length;_o<xo;_o++)this.skinIndices.push(Uo[_o].clone());var Qo=va.lineDistances;for(_o=0,xo=Qo.length;_o<xo;_o++)this.lineDistances.push(Qo[_o]);var qo=va.boundingBox;qo!==null&&(this.boundingBox=qo.clone());var Zo=va.boundingSphere;return Zo!==null&&(this.boundingSphere=Zo.clone()),this.elementsNeedUpdate=va.elementsNeedUpdate,this.verticesNeedUpdate=va.verticesNeedUpdate,this.uvsNeedUpdate=va.uvsNeedUpdate,this.normalsNeedUpdate=va.normalsNeedUpdate,this.colorsNeedUpdate=va.colorsNeedUpdate,this.lineDistancesNeedUpdate=va.lineDistancesNeedUpdate,this.groupsNeedUpdate=va.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(_o,xo,bo,wo,Eo,To){super();this.type="BoxGeometry",this.parameters={width:_o,height:xo,depth:bo,widthSegments:wo,heightSegments:Eo,depthSegments:To},this.fromBufferGeometry(new BoxBufferGeometry(_o,xo,bo,wo,Eo,To)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(_o,xo,bo,wo,Eo,To){super();this.type="BoxBufferGeometry",this.parameters={width:_o,height:xo,depth:bo,widthSegments:wo,heightSegments:Eo,depthSegments:To};const So=this;_o=_o||1,xo=xo||1,bo=bo||1,wo=Math.floor(wo)||1,Eo=Math.floor(Eo)||1,To=Math.floor(To)||1;const $o=[],Do=[],No=[],Oo=[];let Lo=0,Co=0;Ro("z","y","x",-1,-1,bo,xo,_o,To,Eo,0),Ro("z","y","x",1,-1,bo,xo,-_o,To,Eo,1),Ro("x","z","y",1,1,_o,bo,xo,wo,To,2),Ro("x","z","y",1,-1,_o,bo,-xo,wo,To,3),Ro("x","y","z",1,-1,_o,xo,bo,wo,Eo,4),Ro("x","y","z",-1,-1,_o,xo,-bo,wo,Eo,5),this.setIndex($o),this.setAttribute("position",new Float32BufferAttribute(Do,3)),this.setAttribute("normal",new Float32BufferAttribute(No,3)),this.setAttribute("uv",new Float32BufferAttribute(Oo,2));function Ro(jo,zo,Io,Po,Bo,ko,Uo,Qo,qo,Zo,Xo){const Fo=ko/qo,Go=Uo/Zo,Vo=ko/2,Wo=Uo/2,Yo=Qo/2,Ko=qo+1,ts=Zo+1;let Jo=0,rs=0;const ls=new Vector3;for(let ss=0;ss<ts;ss++){const us=ss*Go-Wo;for(let ms=0;ms<Ko;ms++){const As=ms*Fo-Vo;ls[jo]=As*Po,ls[zo]=us*Bo,ls[Io]=Yo,Do.push(ls.x,ls.y,ls.z),ls[jo]=0,ls[zo]=0,ls[Io]=Qo>0?1:-1,No.push(ls.x,ls.y,ls.z),Oo.push(ms/qo),Oo.push(1-ss/Zo),Jo+=1}}for(let ss=0;ss<Zo;ss++)for(let us=0;us<qo;us++){const ms=Lo+us+Ko*ss,As=Lo+us+Ko*(ss+1),Os=Lo+(us+1)+Ko*(ss+1),Es=Lo+(us+1)+Ko*ss;$o.push(ms,As,Es),$o.push(As,Os,Es),rs+=6}So.addGroup(Co,rs,Xo),Co+=rs,Lo+=Jo}}}function cloneUniforms(va){var _o={};for(var xo in va){_o[xo]={};for(var bo in va[xo]){var wo=va[xo][bo];wo&&(wo.isColor||wo.isMatrix3||wo.isMatrix4||wo.isVector2||wo.isVector3||wo.isVector4||wo.isTexture)?_o[xo][bo]=wo.clone():Array.isArray(wo)?_o[xo][bo]=wo.slice():_o[xo][bo]=wo}}return _o}function mergeUniforms(va){for(var _o={},xo=0;xo<va.length;xo++){var bo=cloneUniforms(va[xo]);for(var wo in bo)_o[wo]=bo[wo]}return _o}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(va){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,va!==void 0&&(va.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(va))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.fragmentShader=va.fragmentShader,this.vertexShader=va.vertexShader,this.uniforms=cloneUniforms(va.uniforms),this.defines=Object.assign({},va.defines),this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.lights=va.lights,this.clipping=va.clipping,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this.extensions=Object.assign({},va.extensions),this};ShaderMaterial.prototype.toJSON=function(va){var _o=Material.prototype.toJSON.call(this,va);_o.uniforms={};for(var xo in this.uniforms){var bo=this.uniforms[xo],wo=bo.value;wo&&wo.isTexture?_o.uniforms[xo]={type:"t",value:wo.toJSON(va).uuid}:wo&&wo.isColor?_o.uniforms[xo]={type:"c",value:wo.getHex()}:wo&&wo.isVector2?_o.uniforms[xo]={type:"v2",value:wo.toArray()}:wo&&wo.isVector3?_o.uniforms[xo]={type:"v3",value:wo.toArray()}:wo&&wo.isVector4?_o.uniforms[xo]={type:"v4",value:wo.toArray()}:wo&&wo.isMatrix3?_o.uniforms[xo]={type:"m3",value:wo.toArray()}:wo&&wo.isMatrix4?_o.uniforms[xo]={type:"m4",value:wo.toArray()}:_o.uniforms[xo]={value:wo}}Object.keys(this.defines).length>0&&(_o.defines=this.defines),_o.vertexShader=this.vertexShader,_o.fragmentShader=this.fragmentShader;var Eo={};for(var To in this.extensions)this.extensions[To]===!0&&(Eo[To]=!0);return Object.keys(Eo).length>0&&(_o.extensions=Eo),_o};function Camera$1(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera$1,isCamera:!0,copy:function(va,_o){return Object3D.prototype.copy.call(this,va,_o),this.matrixWorldInverse.copy(va.matrixWorldInverse),this.projectionMatrix.copy(va.projectionMatrix),this.projectionMatrixInverse.copy(va.projectionMatrixInverse),this},getWorldDirection:function(va){va===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),va=new Vector3),this.updateMatrixWorld(!0);var _o=this.matrixWorld.elements;return va.set(-_o[8],-_o[9],-_o[10]).normalize()},updateMatrixWorld:function(va){Object3D.prototype.updateMatrixWorld.call(this,va),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(va,_o){Object3D.prototype.updateWorldMatrix.call(this,va,_o),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(va,_o,xo,bo){Camera$1.call(this),this.type="PerspectiveCamera",this.fov=va!==void 0?va:50,this.zoom=1,this.near=xo!==void 0?xo:.1,this.far=bo!==void 0?bo:2e3,this.focus=10,this.aspect=_o!==void 0?_o:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera$1.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(va,_o){return Camera$1.prototype.copy.call(this,va,_o),this.fov=va.fov,this.zoom=va.zoom,this.near=va.near,this.far=va.far,this.focus=va.focus,this.aspect=va.aspect,this.view=va.view===null?null:Object.assign({},va.view),this.filmGauge=va.filmGauge,this.filmOffset=va.filmOffset,this},setFocalLength:function(va){var _o=.5*this.getFilmHeight()/va;this.fov=MathUtils.RAD2DEG*2*Math.atan(_o),this.updateProjectionMatrix()},getFocalLength:function(){var va=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/va},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(va,_o,xo,bo,wo,Eo){this.aspect=va/_o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=va,this.view.fullHeight=_o,this.view.offsetX=xo,this.view.offsetY=bo,this.view.width=wo,this.view.height=Eo,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var va=this.near,_o=va*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,xo=2*_o,bo=this.aspect*xo,wo=-.5*bo,Eo=this.view;if(this.view!==null&&this.view.enabled){var To=Eo.fullWidth,So=Eo.fullHeight;wo+=Eo.offsetX*bo/To,_o-=Eo.offsetY*xo/So,bo*=Eo.width/To,xo*=Eo.height/So}var $o=this.filmOffset;$o!==0&&(wo+=va*$o/this.getFilmWidth()),this.projectionMatrix.makePerspective(wo,wo+bo,_o,_o-xo,va,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(va){var _o=Object3D.prototype.toJSON.call(this,va);return _o.object.fov=this.fov,_o.object.zoom=this.zoom,_o.object.near=this.near,_o.object.far=this.far,_o.object.focus=this.focus,_o.object.aspect=this.aspect,this.view!==null&&(_o.object.view=Object.assign({},this.view)),_o.object.filmGauge=this.filmGauge,_o.object.filmOffset=this.filmOffset,_o}});var fov=90,aspect=1;function CubeCamera(va,_o,xo){if(Object3D.call(this),this.type="CubeCamera",xo.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=xo;var bo=new PerspectiveCamera(fov,aspect,va,_o);bo.layers=this.layers,bo.up.set(0,-1,0),bo.lookAt(new Vector3(1,0,0)),this.add(bo);var wo=new PerspectiveCamera(fov,aspect,va,_o);wo.layers=this.layers,wo.up.set(0,-1,0),wo.lookAt(new Vector3(-1,0,0)),this.add(wo);var Eo=new PerspectiveCamera(fov,aspect,va,_o);Eo.layers=this.layers,Eo.up.set(0,0,1),Eo.lookAt(new Vector3(0,1,0)),this.add(Eo);var To=new PerspectiveCamera(fov,aspect,va,_o);To.layers=this.layers,To.up.set(0,0,-1),To.lookAt(new Vector3(0,-1,0)),this.add(To);var So=new PerspectiveCamera(fov,aspect,va,_o);So.layers=this.layers,So.up.set(0,-1,0),So.lookAt(new Vector3(0,0,1)),this.add(So);var $o=new PerspectiveCamera(fov,aspect,va,_o);$o.layers=this.layers,$o.up.set(0,-1,0),$o.lookAt(new Vector3(0,0,-1)),this.add($o),this.update=function(Do,No){this.parent===null&&this.updateMatrixWorld();var Oo=Do.xr.enabled,Lo=Do.getRenderTarget();Do.xr.enabled=!1;var Co=xo.texture.generateMipmaps;xo.texture.generateMipmaps=!1,Do.setRenderTarget(xo,0),Do.render(No,bo),Do.setRenderTarget(xo,1),Do.render(No,wo),Do.setRenderTarget(xo,2),Do.render(No,Eo),Do.setRenderTarget(xo,3),Do.render(No,To),Do.setRenderTarget(xo,4),Do.render(No,So),xo.texture.generateMipmaps=Co,Do.setRenderTarget(xo,5),Do.render(No,$o),Do.setRenderTarget(Lo),Do.xr.enabled=Oo},this.clear=function(Do,No,Oo,Lo){for(var Co=Do.getRenderTarget(),Ro=0;Ro<6;Ro++)Do.setRenderTarget(xo,Ro),Do.clear(No,Oo,Lo);Do.setRenderTarget(Co)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(va,_o,xo){Number.isInteger(_o)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),_o=xo),WebGLRenderTarget.call(this,va,va,_o)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(va,_o){this.texture.type=_o.type,this.texture.format=_o.format,this.texture.encoding=_o.encoding;var xo=new Scene,bo={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},wo=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(bo.uniforms),vertexShader:bo.vertexShader,fragmentShader:bo.fragmentShader,side:BackSide,blending:NoBlending});wo.uniforms.tEquirect.value=_o;var Eo=new Mesh(new BoxBufferGeometry(5,5,5),wo);xo.add(Eo);var To=new CubeCamera(1,10,this);return To.update(va,xo),Eo.geometry.dispose(),Eo.material.dispose(),this};function DataTexture(va,_o,xo,bo,wo,Eo,To,So,$o,Do,No,Oo){Texture.call(this,null,Eo,To,So,$o,Do,bo,wo,No,Oo),this.image={data:va||null,width:_o||1,height:xo||1},this.magFilter=$o!==void 0?$o:NearestFilter,this.minFilter=Do!==void 0?Do:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(va,_o,xo,bo,wo,Eo){this.planes=[va!==void 0?va:new Plane,_o!==void 0?_o:new Plane,xo!==void 0?xo:new Plane,bo!==void 0?bo:new Plane,wo!==void 0?wo:new Plane,Eo!==void 0?Eo:new Plane]}Object.assign(Frustum.prototype,{set:function(va,_o,xo,bo,wo,Eo){var To=this.planes;return To[0].copy(va),To[1].copy(_o),To[2].copy(xo),To[3].copy(bo),To[4].copy(wo),To[5].copy(Eo),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){for(var _o=this.planes,xo=0;xo<6;xo++)_o[xo].copy(va.planes[xo]);return this},setFromProjectionMatrix:function(va){var _o=this.planes,xo=va.elements,bo=xo[0],wo=xo[1],Eo=xo[2],To=xo[3],So=xo[4],$o=xo[5],Do=xo[6],No=xo[7],Oo=xo[8],Lo=xo[9],Co=xo[10],Ro=xo[11],jo=xo[12],zo=xo[13],Io=xo[14],Po=xo[15];return _o[0].setComponents(To-bo,No-So,Ro-Oo,Po-jo).normalize(),_o[1].setComponents(To+bo,No+So,Ro+Oo,Po+jo).normalize(),_o[2].setComponents(To+wo,No+$o,Ro+Lo,Po+zo).normalize(),_o[3].setComponents(To-wo,No-$o,Ro-Lo,Po-zo).normalize(),_o[4].setComponents(To-Eo,No-Do,Ro-Co,Po-Io).normalize(),_o[5].setComponents(To+Eo,No+Do,Ro+Co,Po+Io).normalize(),this},intersectsObject:function(va){var _o=va.geometry;return _o.boundingSphere===null&&_o.computeBoundingSphere(),_sphere$1.copy(_o.boundingSphere).applyMatrix4(va.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(va){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(va.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(va){for(var _o=this.planes,xo=va.center,bo=-va.radius,wo=0;wo<6;wo++){var Eo=_o[wo].distanceToPoint(xo);if(Eo<bo)return!1}return!0},intersectsBox:function(va){for(var _o=this.planes,xo=0;xo<6;xo++){var bo=_o[xo];if(_vector$5.x=bo.normal.x>0?va.max.x:va.min.x,_vector$5.y=bo.normal.y>0?va.max.y:va.min.y,_vector$5.z=bo.normal.z>0?va.max.z:va.min.z,bo.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(va){for(var _o=this.planes,xo=0;xo<6;xo++)if(_o[xo].distanceToPoint(va)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var va=null,_o=!1,xo=null;function bo(wo,Eo){_o!==!1&&(xo(wo,Eo),va.requestAnimationFrame(bo))}return{start:function(){_o!==!0&&xo!==null&&(va.requestAnimationFrame(bo),_o=!0)},stop:function(){_o=!1},setAnimationLoop:function(wo){xo=wo},setContext:function(wo){va=wo}}}function WebGLAttributes(va,_o){var xo=_o.isWebGL2,bo=new WeakMap;function wo(Do,No){var Oo=Do.array,Lo=Do.usage,Co=va.createBuffer();va.bindBuffer(No,Co),va.bufferData(No,Oo,Lo),Do.onUploadCallback();var Ro=5126;return Oo instanceof Float32Array?Ro=5126:Oo instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Oo instanceof Uint16Array?Ro=5123:Oo instanceof Int16Array?Ro=5122:Oo instanceof Uint32Array?Ro=5125:Oo instanceof Int32Array?Ro=5124:Oo instanceof Int8Array?Ro=5120:Oo instanceof Uint8Array&&(Ro=5121),{buffer:Co,type:Ro,bytesPerElement:Oo.BYTES_PER_ELEMENT,version:Do.version}}function Eo(Do,No,Oo){var Lo=No.array,Co=No.updateRange;va.bindBuffer(Oo,Do),Co.count===-1?va.bufferSubData(Oo,0,Lo):(xo?va.bufferSubData(Oo,Co.offset*Lo.BYTES_PER_ELEMENT,Lo,Co.offset,Co.count):va.bufferSubData(Oo,Co.offset*Lo.BYTES_PER_ELEMENT,Lo.subarray(Co.offset,Co.offset+Co.count)),Co.count=-1)}function To(Do){return Do.isInterleavedBufferAttribute&&(Do=Do.data),bo.get(Do)}function So(Do){Do.isInterleavedBufferAttribute&&(Do=Do.data);var No=bo.get(Do);No&&(va.deleteBuffer(No.buffer),bo.delete(Do))}function $o(Do,No){Do.isInterleavedBufferAttribute&&(Do=Do.data);var Oo=bo.get(Do);Oo===void 0?bo.set(Do,wo(Do,No)):Oo.version<Do.version&&(Eo(Oo.buffer,Do,No),Oo.version=Do.version)}return{get:To,remove:So,update:$o}}function PlaneGeometry(va,_o,xo,bo){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:va,height:_o,widthSegments:xo,heightSegments:bo},this.fromBufferGeometry(new PlaneBufferGeometry(va,_o,xo,bo)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(va,_o,xo,bo){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:va,height:_o,widthSegments:xo,heightSegments:bo},va=va||1,_o=_o||1;var wo=va/2,Eo=_o/2,To=Math.floor(xo)||1,So=Math.floor(bo)||1,$o=To+1,Do=So+1,No=va/To,Oo=_o/So,Lo,Co,Ro=[],jo=[],zo=[],Io=[];for(Co=0;Co<Do;Co++){var Po=Co*Oo-Eo;for(Lo=0;Lo<$o;Lo++){var Bo=Lo*No-wo;jo.push(Bo,-Po,0),zo.push(0,0,1),Io.push(Lo/To),Io.push(1-Co/So)}}for(Co=0;Co<So;Co++)for(Lo=0;Lo<To;Lo++){var ko=Lo+$o*Co,Uo=Lo+$o*(Co+1),Qo=Lo+1+$o*(Co+1),qo=Lo+1+$o*Co;Ro.push(ko,Uo,qo),Ro.push(Uo,Qo,qo)}this.setIndex(Ro),this.setAttribute("position",new Float32BufferAttribute(jo,3)),this.setAttribute("normal",new Float32BufferAttribute(zo,3)),this.setAttribute("uv",new Float32BufferAttribute(Io,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(va,_o,xo,bo){var wo=new Color(0),Eo=0,To,So,$o=null,Do=0,No=null;function Oo(Co,Ro,jo,zo){var Io=Ro.background,Po=va.xr,Bo=Po.getSession&&Po.getSession();if(Bo&&Bo.environmentBlendMode==="additive"&&(Io=null),Io===null?Lo(wo,Eo):Io&&Io.isColor&&(Lo(Io,1),zo=!0),(va.autoClear||zo)&&va.clear(va.autoClearColor,va.autoClearDepth,va.autoClearStencil),Io&&(Io.isCubeTexture||Io.isWebGLCubeRenderTarget||Io.mapping===CubeUVReflectionMapping)){So===void 0&&(So=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),So.geometry.deleteAttribute("normal"),So.geometry.deleteAttribute("uv"),So.onBeforeRender=function(Uo,Qo,qo){this.matrixWorld.copyPosition(qo.matrixWorld)},Object.defineProperty(So.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),xo.update(So));var ko=Io.isWebGLCubeRenderTarget?Io.texture:Io;So.material.uniforms.envMap.value=ko,So.material.uniforms.flipEnvMap.value=ko.isCubeTexture?-1:1,($o!==Io||Do!==ko.version||No!==va.toneMapping)&&(So.material.needsUpdate=!0,$o=Io,Do=ko.version,No=va.toneMapping),Co.unshift(So,So.geometry,So.material,0,0,null)}else Io&&Io.isTexture&&(To===void 0&&(To=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),To.geometry.deleteAttribute("normal"),Object.defineProperty(To.material,"map",{get:function(){return this.uniforms.t2D.value}}),xo.update(To)),To.material.uniforms.t2D.value=Io,Io.matrixAutoUpdate===!0&&Io.updateMatrix(),To.material.uniforms.uvTransform.value.copy(Io.matrix),($o!==Io||Do!==Io.version||No!==va.toneMapping)&&(To.material.needsUpdate=!0,$o=Io,Do=Io.version,No=va.toneMapping),Co.unshift(To,To.geometry,To.material,0,0,null))}function Lo(Co,Ro){_o.buffers.color.setClear(Co.r,Co.g,Co.b,Ro,bo)}return{getClearColor:function(){return wo},setClearColor:function(Co,Ro){wo.set(Co),Eo=Ro!==void 0?Ro:1,Lo(wo,Eo)},getClearAlpha:function(){return Eo},setClearAlpha:function(Co){Eo=Co,Lo(wo,Eo)},render:Oo}}function WebGLBufferRenderer(va,_o,xo,bo){var wo=bo.isWebGL2,Eo;function To(Do){Eo=Do}function So(Do,No){va.drawArrays(Eo,Do,No),xo.update(No,Eo)}function $o(Do,No,Oo,Lo){if(Lo!==0){var Co,Ro;if(wo)Co=va,Ro="drawArraysInstanced";else if(Co=_o.get("ANGLE_instanced_arrays"),Ro="drawArraysInstancedANGLE",Co===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Co[Ro](Eo,No,Oo,Lo),xo.update(Oo,Eo,Lo)}}this.setMode=To,this.render=So,this.renderInstances=$o}function WebGLCapabilities(va,_o,xo){var bo;function wo(){if(bo!==void 0)return bo;var Qo=_o.get("EXT_texture_filter_anisotropic");return Qo!==null?bo=va.getParameter(Qo.MAX_TEXTURE_MAX_ANISOTROPY_EXT):bo=0,bo}function Eo(Qo){if(Qo==="highp"){if(va.getShaderPrecisionFormat(35633,36338).precision>0&&va.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Qo="mediump"}return Qo==="mediump"&&va.getShaderPrecisionFormat(35633,36337).precision>0&&va.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var To=typeof WebGL2RenderingContext!="undefined"&&va instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&va instanceof WebGL2ComputeRenderingContext,So=xo.precision!==void 0?xo.precision:"highp",$o=Eo(So);$o!==So&&(console.warn("THREE.WebGLRenderer:",So,"not supported, using",$o,"instead."),So=$o);var Do=xo.logarithmicDepthBuffer===!0,No=va.getParameter(34930),Oo=va.getParameter(35660),Lo=va.getParameter(3379),Co=va.getParameter(34076),Ro=va.getParameter(34921),jo=va.getParameter(36347),zo=va.getParameter(36348),Io=va.getParameter(36349),Po=Oo>0,Bo=To||!!_o.get("OES_texture_float"),ko=Po&&Bo,Uo=To?va.getParameter(36183):0;return{isWebGL2:To,getMaxAnisotropy:wo,getMaxPrecision:Eo,precision:So,logarithmicDepthBuffer:Do,maxTextures:No,maxVertexTextures:Oo,maxTextureSize:Lo,maxCubemapSize:Co,maxAttributes:Ro,maxVertexUniforms:jo,maxVaryings:zo,maxFragmentUniforms:Io,vertexTextures:Po,floatFragmentTextures:Bo,floatVertexTextures:ko,maxSamples:Uo}}function WebGLClipping(){var va=this,_o=null,xo=0,bo=!1,wo=!1,Eo=new Plane,To=new Matrix3,So={value:null,needsUpdate:!1};this.uniform=So,this.numPlanes=0,this.numIntersection=0,this.init=function(No,Oo,Lo){var Co=No.length!==0||Oo||xo!==0||bo;return bo=Oo,_o=Do(No,Lo,0),xo=No.length,Co},this.beginShadows=function(){wo=!0,Do(null)},this.endShadows=function(){wo=!1,$o()},this.setState=function(No,Oo,Lo,Co,Ro,jo){if(!bo||No===null||No.length===0||wo&&!Lo)wo?Do(null):$o();else{var zo=wo?0:xo,Io=zo*4,Po=Ro.clippingState||null;So.value=Po,Po=Do(No,Co,Io,jo);for(var Bo=0;Bo!==Io;++Bo)Po[Bo]=_o[Bo];Ro.clippingState=Po,this.numIntersection=Oo?this.numPlanes:0,this.numPlanes+=zo}};function $o(){So.value!==_o&&(So.value=_o,So.needsUpdate=xo>0),va.numPlanes=xo,va.numIntersection=0}function Do(No,Oo,Lo,Co){var Ro=No!==null?No.length:0,jo=null;if(Ro!==0){if(jo=So.value,Co!==!0||jo===null){var zo=Lo+Ro*4,Io=Oo.matrixWorldInverse;To.getNormalMatrix(Io),(jo===null||jo.length<zo)&&(jo=new Float32Array(zo));for(var Po=0,Bo=Lo;Po!==Ro;++Po,Bo+=4)Eo.copy(No[Po]).applyMatrix4(Io,To),Eo.normal.toArray(jo,Bo),jo[Bo+3]=Eo.constant}So.value=jo,So.needsUpdate=!0}return va.numPlanes=Ro,va.numIntersection=0,jo}}function WebGLExtensions(va){var _o={};return{get:function(xo){if(_o[xo]!==void 0)return _o[xo];var bo;switch(xo){case"WEBGL_depth_texture":bo=va.getExtension("WEBGL_depth_texture")||va.getExtension("MOZ_WEBGL_depth_texture")||va.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":bo=va.getExtension("EXT_texture_filter_anisotropic")||va.getExtension("MOZ_EXT_texture_filter_anisotropic")||va.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":bo=va.getExtension("WEBGL_compressed_texture_s3tc")||va.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||va.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":bo=va.getExtension("WEBGL_compressed_texture_pvrtc")||va.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:bo=va.getExtension(xo)}return bo===null&&console.warn("THREE.WebGLRenderer: "+xo+" extension not supported."),_o[xo]=bo,bo}}}function WebGLGeometries(va,_o,xo){var bo=new WeakMap,wo=new WeakMap;function Eo(No){var Oo=No.target,Lo=bo.get(Oo);Lo.index!==null&&_o.remove(Lo.index);for(var Co in Lo.attributes)_o.remove(Lo.attributes[Co]);Oo.removeEventListener("dispose",Eo),bo.delete(Oo);var Ro=wo.get(Lo);Ro&&(_o.remove(Ro),wo.delete(Lo)),xo.memory.geometries--}function To(No,Oo){var Lo=bo.get(Oo);return Lo||(Oo.addEventListener("dispose",Eo),Oo.isBufferGeometry?Lo=Oo:Oo.isGeometry&&(Oo._bufferGeometry===void 0&&(Oo._bufferGeometry=new BufferGeometry().setFromObject(No)),Lo=Oo._bufferGeometry),bo.set(Oo,Lo),xo.memory.geometries++,Lo)}function So(No){var Oo=No.index,Lo=No.attributes;Oo!==null&&_o.update(Oo,34963);for(var Co in Lo)_o.update(Lo[Co],34962);var Ro=No.morphAttributes;for(var Co in Ro)for(var jo=Ro[Co],zo=0,Io=jo.length;zo<Io;zo++)_o.update(jo[zo],34962)}function $o(No){var Oo=[],Lo=No.index,Co=No.attributes.position,Ro=0;if(Lo!==null){var jo=Lo.array;Ro=Lo.version;for(var zo=0,Io=jo.length;zo<Io;zo+=3){var Po=jo[zo+0],Bo=jo[zo+1],ko=jo[zo+2];Oo.push(Po,Bo,Bo,ko,ko,Po)}}else{var jo=Co.array;Ro=Co.version;for(var zo=0,Io=jo.length/3-1;zo<Io;zo+=3){var Po=zo+0,Bo=zo+1,ko=zo+2;Oo.push(Po,Bo,Bo,ko,ko,Po)}}var Uo=new(arrayMax(Oo)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Oo,1);Uo.version=Ro,_o.update(Uo,34963);var Qo=wo.get(No);Qo&&_o.remove(Qo),wo.set(No,Uo)}function Do(No){var Oo=wo.get(No);if(Oo){var Lo=No.index;Lo!==null&&Oo.version<Lo.version&&$o(No)}else $o(No);return wo.get(No)}return{get:To,update:So,getWireframeAttribute:Do}}function WebGLIndexedBufferRenderer(va,_o,xo,bo){var wo=bo.isWebGL2,Eo;function To(Lo){Eo=Lo}var So,$o;function Do(Lo){So=Lo.type,$o=Lo.bytesPerElement}function No(Lo,Co){va.drawElements(Eo,Co,So,Lo*$o),xo.update(Co,Eo)}function Oo(Lo,Co,Ro,jo){if(jo!==0){var zo,Io;if(wo)zo=va,Io="drawElementsInstanced";else if(zo=_o.get("ANGLE_instanced_arrays"),Io="drawElementsInstancedANGLE",zo===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}zo[Io](Eo,Ro,So,Co*$o,jo),xo.update(Ro,Eo,jo)}}this.setMode=To,this.setIndex=Do,this.render=No,this.renderInstances=Oo}function WebGLInfo(va){var _o={geometries:0,textures:0},xo={frame:0,calls:0,triangles:0,points:0,lines:0};function bo(Eo,To,So){switch(So=So||1,xo.calls++,To){case 4:xo.triangles+=So*(Eo/3);break;case 1:xo.lines+=So*(Eo/2);break;case 3:xo.lines+=So*(Eo-1);break;case 2:xo.lines+=So*Eo;break;case 0:xo.points+=So*Eo;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",To);break}}function wo(){xo.frame++,xo.calls=0,xo.triangles=0,xo.points=0,xo.lines=0}return{memory:_o,render:xo,programs:null,autoReset:!0,reset:wo,update:bo}}function absNumericalSort(va,_o){return Math.abs(_o[1])-Math.abs(va[1])}function WebGLMorphtargets(va){var _o={},xo=new Float32Array(8);function bo(wo,Eo,To,So){var $o=wo.morphTargetInfluences,Do=$o===void 0?0:$o.length,No=_o[Eo.id];if(No===void 0){No=[];for(var Oo=0;Oo<Do;Oo++)No[Oo]=[Oo,0];_o[Eo.id]=No}for(var Lo=To.morphTargets&&Eo.morphAttributes.position,Co=To.morphNormals&&Eo.morphAttributes.normal,Oo=0;Oo<Do;Oo++){var Ro=No[Oo];Ro[1]!==0&&(Lo&&Eo.deleteAttribute("morphTarget"+Oo),Co&&Eo.deleteAttribute("morphNormal"+Oo))}for(var Oo=0;Oo<Do;Oo++){var Ro=No[Oo];Ro[0]=Oo,Ro[1]=$o[Oo]}No.sort(absNumericalSort);for(var jo=0,Oo=0;Oo<8;Oo++){var Ro=No[Oo];if(Ro){var zo=Ro[0],Io=Ro[1];if(Io){Lo&&Eo.setAttribute("morphTarget"+Oo,Lo[zo]),Co&&Eo.setAttribute("morphNormal"+Oo,Co[zo]),xo[Oo]=Io,jo+=Io;continue}}xo[Oo]=0}var Po=Eo.morphTargetsRelative?1:1-jo;So.getUniforms().setValue(va,"morphTargetBaseInfluence",Po),So.getUniforms().setValue(va,"morphTargetInfluences",xo)}return{update:bo}}function WebGLObjects(va,_o,xo,bo){var wo=new WeakMap;function Eo(So){var $o=bo.render.frame,Do=So.geometry,No=_o.get(So,Do);return wo.get(No)!==$o&&(Do.isGeometry&&No.updateFromObject(So),_o.update(No),wo.set(No,$o)),So.isInstancedMesh&&xo.update(So.instanceMatrix,34962),No}function To(){wo=new WeakMap}return{update:Eo,dispose:To}}function CubeTexture(va,_o,xo,bo,wo,Eo,To,So,$o,Do){va=va!==void 0?va:[],_o=_o!==void 0?_o:CubeReflectionMapping,To=To!==void 0?To:RGBFormat,Texture.call(this,va,_o,xo,bo,wo,Eo,To,So,$o,Do),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(va){this.image=va}});function DataTexture2DArray(va,_o,xo,bo){Texture.call(this,null),this.image={data:va||null,width:_o||1,height:xo||1,depth:bo||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(va,_o,xo,bo){Texture.call(this,null),this.image={data:va||null,width:_o||1,height:xo||1,depth:bo||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(va,_o,xo){var bo=va[0];if(bo<=0||bo>0)return va;var wo=_o*xo,Eo=arrayCacheF32[wo];if(Eo===void 0&&(Eo=new Float32Array(wo),arrayCacheF32[wo]=Eo),_o!==0){bo.toArray(Eo,0);for(var To=1,So=0;To!==_o;++To)So+=xo,va[To].toArray(Eo,So)}return Eo}function arraysEqual(va,_o){if(va.length!==_o.length)return!1;for(var xo=0,bo=va.length;xo<bo;xo++)if(va[xo]!==_o[xo])return!1;return!0}function copyArray(va,_o){for(var xo=0,bo=_o.length;xo<bo;xo++)va[xo]=_o[xo]}function allocTexUnits(va,_o){var xo=arrayCacheI32[_o];xo===void 0&&(xo=new Int32Array(_o),arrayCacheI32[_o]=xo);for(var bo=0;bo!==_o;++bo)xo[bo]=va.allocateTextureUnit();return xo}function setValueV1f(va,_o){var xo=this.cache;xo[0]!==_o&&(va.uniform1f(this.addr,_o),xo[0]=_o)}function setValueV2f(va,_o){var xo=this.cache;if(_o.x!==void 0)(xo[0]!==_o.x||xo[1]!==_o.y)&&(va.uniform2f(this.addr,_o.x,_o.y),xo[0]=_o.x,xo[1]=_o.y);else{if(arraysEqual(xo,_o))return;va.uniform2fv(this.addr,_o),copyArray(xo,_o)}}function setValueV3f(va,_o){var xo=this.cache;if(_o.x!==void 0)(xo[0]!==_o.x||xo[1]!==_o.y||xo[2]!==_o.z)&&(va.uniform3f(this.addr,_o.x,_o.y,_o.z),xo[0]=_o.x,xo[1]=_o.y,xo[2]=_o.z);else if(_o.r!==void 0)(xo[0]!==_o.r||xo[1]!==_o.g||xo[2]!==_o.b)&&(va.uniform3f(this.addr,_o.r,_o.g,_o.b),xo[0]=_o.r,xo[1]=_o.g,xo[2]=_o.b);else{if(arraysEqual(xo,_o))return;va.uniform3fv(this.addr,_o),copyArray(xo,_o)}}function setValueV4f(va,_o){var xo=this.cache;if(_o.x!==void 0)(xo[0]!==_o.x||xo[1]!==_o.y||xo[2]!==_o.z||xo[3]!==_o.w)&&(va.uniform4f(this.addr,_o.x,_o.y,_o.z,_o.w),xo[0]=_o.x,xo[1]=_o.y,xo[2]=_o.z,xo[3]=_o.w);else{if(arraysEqual(xo,_o))return;va.uniform4fv(this.addr,_o),copyArray(xo,_o)}}function setValueM2(va,_o){var xo=this.cache,bo=_o.elements;if(bo===void 0){if(arraysEqual(xo,_o))return;va.uniformMatrix2fv(this.addr,!1,_o),copyArray(xo,_o)}else{if(arraysEqual(xo,bo))return;mat2array.set(bo),va.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(xo,bo)}}function setValueM3(va,_o){var xo=this.cache,bo=_o.elements;if(bo===void 0){if(arraysEqual(xo,_o))return;va.uniformMatrix3fv(this.addr,!1,_o),copyArray(xo,_o)}else{if(arraysEqual(xo,bo))return;mat3array.set(bo),va.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(xo,bo)}}function setValueM4(va,_o){var xo=this.cache,bo=_o.elements;if(bo===void 0){if(arraysEqual(xo,_o))return;va.uniformMatrix4fv(this.addr,!1,_o),copyArray(xo,_o)}else{if(arraysEqual(xo,bo))return;mat4array.set(bo),va.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(xo,bo)}}function setValueT1(va,_o,xo){var bo=this.cache,wo=xo.allocateTextureUnit();bo[0]!==wo&&(va.uniform1i(this.addr,wo),bo[0]=wo),xo.safeSetTexture2D(_o||emptyTexture,wo)}function setValueT2DArray1(va,_o,xo){var bo=this.cache,wo=xo.allocateTextureUnit();bo[0]!==wo&&(va.uniform1i(this.addr,wo),bo[0]=wo),xo.setTexture2DArray(_o||emptyTexture2dArray,wo)}function setValueT3D1(va,_o,xo){var bo=this.cache,wo=xo.allocateTextureUnit();bo[0]!==wo&&(va.uniform1i(this.addr,wo),bo[0]=wo),xo.setTexture3D(_o||emptyTexture3d,wo)}function setValueT6(va,_o,xo){var bo=this.cache,wo=xo.allocateTextureUnit();bo[0]!==wo&&(va.uniform1i(this.addr,wo),bo[0]=wo),xo.safeSetTextureCube(_o||emptyCubeTexture,wo)}function setValueV1i(va,_o){var xo=this.cache;xo[0]!==_o&&(va.uniform1i(this.addr,_o),xo[0]=_o)}function setValueV2i(va,_o){var xo=this.cache;arraysEqual(xo,_o)||(va.uniform2iv(this.addr,_o),copyArray(xo,_o))}function setValueV3i(va,_o){var xo=this.cache;arraysEqual(xo,_o)||(va.uniform3iv(this.addr,_o),copyArray(xo,_o))}function setValueV4i(va,_o){var xo=this.cache;arraysEqual(xo,_o)||(va.uniform4iv(this.addr,_o),copyArray(xo,_o))}function setValueV1ui(va,_o){var xo=this.cache;xo[0]!==_o&&(va.uniform1ui(this.addr,_o),xo[0]=_o)}function getSingularSetter(va){switch(va){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(va,_o){va.uniform1fv(this.addr,_o)}function setValueV1iArray(va,_o){va.uniform1iv(this.addr,_o)}function setValueV2iArray(va,_o){va.uniform2iv(this.addr,_o)}function setValueV3iArray(va,_o){va.uniform3iv(this.addr,_o)}function setValueV4iArray(va,_o){va.uniform4iv(this.addr,_o)}function setValueV2fArray(va,_o){var xo=flatten(_o,this.size,2);va.uniform2fv(this.addr,xo)}function setValueV3fArray(va,_o){var xo=flatten(_o,this.size,3);va.uniform3fv(this.addr,xo)}function setValueV4fArray(va,_o){var xo=flatten(_o,this.size,4);va.uniform4fv(this.addr,xo)}function setValueM2Array(va,_o){var xo=flatten(_o,this.size,4);va.uniformMatrix2fv(this.addr,!1,xo)}function setValueM3Array(va,_o){var xo=flatten(_o,this.size,9);va.uniformMatrix3fv(this.addr,!1,xo)}function setValueM4Array(va,_o){var xo=flatten(_o,this.size,16);va.uniformMatrix4fv(this.addr,!1,xo)}function setValueT1Array(va,_o,xo){var bo=_o.length,wo=allocTexUnits(xo,bo);va.uniform1iv(this.addr,wo);for(var Eo=0;Eo!==bo;++Eo)xo.safeSetTexture2D(_o[Eo]||emptyTexture,wo[Eo])}function setValueT6Array(va,_o,xo){var bo=_o.length,wo=allocTexUnits(xo,bo);va.uniform1iv(this.addr,wo);for(var Eo=0;Eo!==bo;++Eo)xo.safeSetTextureCube(_o[Eo]||emptyCubeTexture,wo[Eo])}function getPureArraySetter(va){switch(va){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(va,_o,xo){this.id=va,this.addr=xo,this.cache=[],this.setValue=getSingularSetter(_o.type)}function PureArrayUniform(va,_o,xo){this.id=va,this.addr=xo,this.cache=[],this.size=_o.size,this.setValue=getPureArraySetter(_o.type)}PureArrayUniform.prototype.updateCache=function(va){var _o=this.cache;va instanceof Float32Array&&_o.length!==va.length&&(this.cache=new Float32Array(va.length)),copyArray(_o,va)};function StructuredUniform(va){this.id=va,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(va,_o,xo){for(var bo=this.seq,wo=0,Eo=bo.length;wo!==Eo;++wo){var To=bo[wo];To.setValue(va,_o[To.id],xo)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(va,_o){va.seq.push(_o),va.map[_o.id]=_o}function parseUniform(va,_o,xo){var bo=va.name,wo=bo.length;for(RePathPart.lastIndex=0;;){var Eo=RePathPart.exec(bo),To=RePathPart.lastIndex,So=Eo[1],$o=Eo[2]==="]",Do=Eo[3];if($o&&(So=So|0),Do===void 0||Do==="["&&To+2===wo){addUniform(xo,Do===void 0?new SingleUniform(So,va,_o):new PureArrayUniform(So,va,_o));break}else{var No=xo.map,Oo=No[So];Oo===void 0&&(Oo=new StructuredUniform(So),addUniform(xo,Oo)),xo=Oo}}}function WebGLUniforms(va,_o){this.seq=[],this.map={};for(var xo=va.getProgramParameter(_o,35718),bo=0;bo<xo;++bo){var wo=va.getActiveUniform(_o,bo),Eo=va.getUniformLocation(_o,wo.name);parseUniform(wo,Eo,this)}}WebGLUniforms.prototype.setValue=function(va,_o,xo,bo){var wo=this.map[_o];wo!==void 0&&wo.setValue(va,xo,bo)};WebGLUniforms.prototype.setOptional=function(va,_o,xo){var bo=_o[xo];bo!==void 0&&this.setValue(va,xo,bo)};WebGLUniforms.upload=function(va,_o,xo,bo){for(var wo=0,Eo=_o.length;wo!==Eo;++wo){var To=_o[wo],So=xo[To.id];So.needsUpdate!==!1&&To.setValue(va,So.value,bo)}};WebGLUniforms.seqWithValue=function(va,_o){for(var xo=[],bo=0,wo=va.length;bo!==wo;++bo){var Eo=va[bo];Eo.id in _o&&xo.push(Eo)}return xo};function WebGLShader(va,_o,xo){var bo=va.createShader(_o);return va.shaderSource(bo,xo),va.compileShader(bo),bo}var programIdCount=0;function addLineNumbers(va){for(var _o=va.split(`
`),xo=0;xo<_o.length;xo++)_o[xo]=xo+1+": "+_o[xo];return _o.join(`
`)}function getEncodingComponents(va){switch(va){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+va)}}function getShaderErrors(va,_o,xo){var bo=va.getShaderParameter(_o,35713),wo=va.getShaderInfoLog(_o).trim();if(bo&&wo==="")return"";var Eo=va.getShaderSource(_o);return"THREE.WebGLShader: gl.getShaderInfoLog() "+xo+`
`+wo+addLineNumbers(Eo)}function getTexelDecodingFunction(va,_o){var xo=getEncodingComponents(_o);return"vec4 "+va+"( vec4 value ) { return "+xo[0]+"ToLinear"+xo[1]+"; }"}function getTexelEncodingFunction(va,_o){var xo=getEncodingComponents(_o);return"vec4 "+va+"( vec4 value ) { return LinearTo"+xo[0]+xo[1]+"; }"}function getToneMappingFunction(va,_o){var xo;switch(_o){case LinearToneMapping:xo="Linear";break;case ReinhardToneMapping:xo="Reinhard";break;case Uncharted2ToneMapping:xo="Uncharted2";break;case CineonToneMapping:xo="OptimizedCineon";break;case ACESFilmicToneMapping:xo="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+_o)}return"vec3 "+va+"( vec3 color ) { return "+xo+"ToneMapping( color ); }"}function generateExtensions(va){var _o=[va.extensionDerivatives||va.envMapCubeUV||va.bumpMap||va.tangentSpaceNormalMap||va.clearcoatNormalMap||va.flatShading||va.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(va.extensionFragDepth||va.logarithmicDepthBuffer)&&va.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",va.extensionDrawBuffers&&va.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(va.extensionShaderTextureLOD||va.envMap)&&va.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return _o.filter(filterEmptyLine).join(`
`)}function generateDefines(va){var _o=[];for(var xo in va){var bo=va[xo];bo!==!1&&_o.push("#define "+xo+" "+bo)}return _o.join(`
`)}function fetchAttributeLocations(va,_o){for(var xo={},bo=va.getProgramParameter(_o,35721),wo=0;wo<bo;wo++){var Eo=va.getActiveAttrib(_o,wo),To=Eo.name;xo[To]=va.getAttribLocation(_o,To)}return xo}function filterEmptyLine(va){return va!==""}function replaceLightNums(va,_o){return va.replace(/NUM_DIR_LIGHTS/g,_o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_o.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,_o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_o.numPointLightShadows)}function replaceClippingPlaneNums(va,_o){return va.replace(/NUM_CLIPPING_PLANES/g,_o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_o.numClippingPlanes-_o.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(va){return va.replace(includePattern,includeReplacer)}function includeReplacer(va,_o){var xo=ShaderChunk[_o];if(xo===void 0)throw new Error("Can not resolve #include <"+_o+">");return resolveIncludes(xo)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(va){return va.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(va,_o,xo,bo){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(va,_o,xo,bo)}function loopReplacer(va,_o,xo,bo){for(var wo="",Eo=parseInt(_o);Eo<parseInt(xo);Eo++)wo+=bo.replace(/\[ i \]/g,"[ "+Eo+" ]").replace(/UNROLLED_LOOP_INDEX/g,Eo);return wo}function generatePrecision(va){var _o="precision "+va.precision+` float;
precision `+va.precision+" int;";return va.precision==="highp"?_o+=`
#define HIGH_PRECISION`:va.precision==="mediump"?_o+=`
#define MEDIUM_PRECISION`:va.precision==="lowp"&&(_o+=`
#define LOW_PRECISION`),_o}function generateShadowMapTypeDefine(va){var _o="SHADOWMAP_TYPE_BASIC";return va.shadowMapType===PCFShadowMap?_o="SHADOWMAP_TYPE_PCF":va.shadowMapType===PCFSoftShadowMap?_o="SHADOWMAP_TYPE_PCF_SOFT":va.shadowMapType===VSMShadowMap&&(_o="SHADOWMAP_TYPE_VSM"),_o}function generateEnvMapTypeDefine(va){var _o="ENVMAP_TYPE_CUBE";if(va.envMap)switch(va.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_o="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:_o="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:_o="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:_o="ENVMAP_TYPE_SPHERE";break}return _o}function generateEnvMapModeDefine(va){var _o="ENVMAP_MODE_REFLECTION";if(va.envMap)switch(va.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:_o="ENVMAP_MODE_REFRACTION";break}return _o}function generateEnvMapBlendingDefine(va){var _o="ENVMAP_BLENDING_NONE";if(va.envMap)switch(va.combine){case MultiplyOperation:_o="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_o="ENVMAP_BLENDING_MIX";break;case AddOperation:_o="ENVMAP_BLENDING_ADD";break}return _o}function WebGLProgram(va,_o,xo){var bo=va.getContext(),wo=xo.defines,Eo=xo.vertexShader,To=xo.fragmentShader,So=generateShadowMapTypeDefine(xo),$o=generateEnvMapTypeDefine(xo),Do=generateEnvMapModeDefine(xo),No=generateEnvMapBlendingDefine(xo),Oo=va.gammaFactor>0?va.gammaFactor:1,Lo=xo.isWebGL2?"":generateExtensions(xo),Co=generateDefines(wo),Ro=bo.createProgram(),jo,zo;if(xo.isRawShaderMaterial?(jo=[Co].filter(filterEmptyLine).join(`
`),jo.length>0&&(jo+=`
`),zo=[Lo,Co].filter(filterEmptyLine).join(`
`),zo.length>0&&(zo+=`
`)):(jo=[generatePrecision(xo),"#define SHADER_NAME "+xo.shaderName,Co,xo.instancing?"#define USE_INSTANCING":"",xo.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Oo,"#define MAX_BONES "+xo.maxBones,xo.useFog&&xo.fog?"#define USE_FOG":"",xo.useFog&&xo.fogExp2?"#define FOG_EXP2":"",xo.map?"#define USE_MAP":"",xo.envMap?"#define USE_ENVMAP":"",xo.envMap?"#define "+Do:"",xo.lightMap?"#define USE_LIGHTMAP":"",xo.aoMap?"#define USE_AOMAP":"",xo.emissiveMap?"#define USE_EMISSIVEMAP":"",xo.bumpMap?"#define USE_BUMPMAP":"",xo.normalMap?"#define USE_NORMALMAP":"",xo.normalMap&&xo.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",xo.normalMap&&xo.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",xo.clearcoatMap?"#define USE_CLEARCOATMAP":"",xo.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",xo.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",xo.displacementMap&&xo.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",xo.specularMap?"#define USE_SPECULARMAP":"",xo.roughnessMap?"#define USE_ROUGHNESSMAP":"",xo.metalnessMap?"#define USE_METALNESSMAP":"",xo.alphaMap?"#define USE_ALPHAMAP":"",xo.vertexTangents?"#define USE_TANGENT":"",xo.vertexColors?"#define USE_COLOR":"",xo.vertexUvs?"#define USE_UV":"",xo.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",xo.flatShading?"#define FLAT_SHADED":"",xo.skinning?"#define USE_SKINNING":"",xo.useVertexTexture?"#define BONE_TEXTURE":"",xo.morphTargets?"#define USE_MORPHTARGETS":"",xo.morphNormals&&xo.flatShading===!1?"#define USE_MORPHNORMALS":"",xo.doubleSided?"#define DOUBLE_SIDED":"",xo.flipSided?"#define FLIP_SIDED":"",xo.shadowMapEnabled?"#define USE_SHADOWMAP":"",xo.shadowMapEnabled?"#define "+So:"",xo.sizeAttenuation?"#define USE_SIZEATTENUATION":"",xo.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",xo.logarithmicDepthBuffer&&xo.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),zo=[Lo,generatePrecision(xo),"#define SHADER_NAME "+xo.shaderName,Co,xo.alphaTest?"#define ALPHATEST "+xo.alphaTest+(xo.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Oo,xo.useFog&&xo.fog?"#define USE_FOG":"",xo.useFog&&xo.fogExp2?"#define FOG_EXP2":"",xo.map?"#define USE_MAP":"",xo.matcap?"#define USE_MATCAP":"",xo.envMap?"#define USE_ENVMAP":"",xo.envMap?"#define "+$o:"",xo.envMap?"#define "+Do:"",xo.envMap?"#define "+No:"",xo.lightMap?"#define USE_LIGHTMAP":"",xo.aoMap?"#define USE_AOMAP":"",xo.emissiveMap?"#define USE_EMISSIVEMAP":"",xo.bumpMap?"#define USE_BUMPMAP":"",xo.normalMap?"#define USE_NORMALMAP":"",xo.normalMap&&xo.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",xo.normalMap&&xo.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",xo.clearcoatMap?"#define USE_CLEARCOATMAP":"",xo.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",xo.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",xo.specularMap?"#define USE_SPECULARMAP":"",xo.roughnessMap?"#define USE_ROUGHNESSMAP":"",xo.metalnessMap?"#define USE_METALNESSMAP":"",xo.alphaMap?"#define USE_ALPHAMAP":"",xo.sheen?"#define USE_SHEEN":"",xo.vertexTangents?"#define USE_TANGENT":"",xo.vertexColors?"#define USE_COLOR":"",xo.vertexUvs?"#define USE_UV":"",xo.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",xo.gradientMap?"#define USE_GRADIENTMAP":"",xo.flatShading?"#define FLAT_SHADED":"",xo.doubleSided?"#define DOUBLE_SIDED":"",xo.flipSided?"#define FLIP_SIDED":"",xo.shadowMapEnabled?"#define USE_SHADOWMAP":"",xo.shadowMapEnabled?"#define "+So:"",xo.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",xo.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",xo.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",xo.logarithmicDepthBuffer&&xo.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(xo.extensionShaderTextureLOD||xo.envMap)&&xo.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",xo.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",xo.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",xo.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",xo.toneMapping):"",xo.dithering?"#define DITHERING":"",xo.outputEncoding||xo.mapEncoding||xo.matcapEncoding||xo.envMapEncoding||xo.emissiveMapEncoding||xo.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",xo.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",xo.mapEncoding):"",xo.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",xo.matcapEncoding):"",xo.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",xo.envMapEncoding):"",xo.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",xo.emissiveMapEncoding):"",xo.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",xo.lightMapEncoding):"",xo.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",xo.outputEncoding):"",xo.depthPacking?"#define DEPTH_PACKING "+xo.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Eo=resolveIncludes(Eo),Eo=replaceLightNums(Eo,xo),Eo=replaceClippingPlaneNums(Eo,xo),To=resolveIncludes(To),To=replaceLightNums(To,xo),To=replaceClippingPlaneNums(To,xo),Eo=unrollLoops(Eo),To=unrollLoops(To),xo.isWebGL2&&!xo.isRawShaderMaterial){var Io=!1,Po=/^\s*#version\s+300\s+es\s*\n/;xo.isShaderMaterial&&Eo.match(Po)!==null&&To.match(Po)!==null&&(Io=!0,Eo=Eo.replace(Po,""),To=To.replace(Po,"")),jo=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+jo,zo=[`#version 300 es
`,"#define varying in",Io?"":"out highp vec4 pc_fragColor;",Io?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+zo}var Bo=jo+Eo,ko=zo+To,Uo=WebGLShader(bo,35633,Bo),Qo=WebGLShader(bo,35632,ko);if(bo.attachShader(Ro,Uo),bo.attachShader(Ro,Qo),xo.index0AttributeName!==void 0?bo.bindAttribLocation(Ro,0,xo.index0AttributeName):xo.morphTargets===!0&&bo.bindAttribLocation(Ro,0,"position"),bo.linkProgram(Ro),va.debug.checkShaderErrors){var qo=bo.getProgramInfoLog(Ro).trim(),Zo=bo.getShaderInfoLog(Uo).trim(),Xo=bo.getShaderInfoLog(Qo).trim(),Fo=!0,Go=!0;if(bo.getProgramParameter(Ro,35714)===!1){Fo=!1;var Vo=getShaderErrors(bo,Uo,"vertex"),Wo=getShaderErrors(bo,Qo,"fragment");console.error("THREE.WebGLProgram: shader error: ",bo.getError(),"35715",bo.getProgramParameter(Ro,35715),"gl.getProgramInfoLog",qo,Vo,Wo)}else qo!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",qo):(Zo===""||Xo==="")&&(Go=!1);Go&&(this.diagnostics={runnable:Fo,programLog:qo,vertexShader:{log:Zo,prefix:jo},fragmentShader:{log:Xo,prefix:zo}})}bo.deleteShader(Uo),bo.deleteShader(Qo);var Yo;this.getUniforms=function(){return Yo===void 0&&(Yo=new WebGLUniforms(bo,Ro)),Yo};var Ko;return this.getAttributes=function(){return Ko===void 0&&(Ko=fetchAttributeLocations(bo,Ro)),Ko},this.destroy=function(){bo.deleteProgram(Ro),this.program=void 0},this.name=xo.shaderName,this.id=programIdCount++,this.cacheKey=_o,this.usedTimes=1,this.program=Ro,this.vertexShader=Uo,this.fragmentShader=Qo,this}function WebGLPrograms(va,_o,xo){var bo=[],wo=xo.isWebGL2,Eo=xo.logarithmicDepthBuffer,To=xo.floatVertexTextures,So=xo.precision,$o=xo.maxVertexUniforms,Do=xo.vertexTextures,No={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Oo=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Lo(jo,zo){var Io;if(zo){var Po=ShaderLib[zo];Io={name:jo.type,uniforms:UniformsUtils.clone(Po.uniforms),vertexShader:Po.vertexShader,fragmentShader:Po.fragmentShader}}else Io={name:jo.type,uniforms:jo.uniforms,vertexShader:jo.vertexShader,fragmentShader:jo.fragmentShader};return Io}function Co(jo){var zo=jo.skeleton,Io=zo.bones;if(To)return 1024;var Po=$o,Bo=Math.floor((Po-20)/4),ko=Math.min(Bo,Io.length);return ko<Io.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Io.length+" bones. This GPU supports "+ko+"."),0):ko}function Ro(jo){var zo;return jo?jo.isTexture?zo=jo.encoding:jo.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),zo=jo.texture.encoding):zo=LinearEncoding,zo}this.getParameters=function(jo,zo,Io,Po,Bo,ko,Uo){var Qo=Po.fog,qo=jo.isMeshStandardMaterial?Po.environment:null,Zo=jo.envMap||qo,Xo=No[jo.type],Fo=Uo.isSkinnedMesh?Co(Uo):0;jo.precision!==null&&(So=xo.getMaxPrecision(jo.precision),So!==jo.precision&&console.warn("THREE.WebGLProgram.getParameters:",jo.precision,"not supported, using",So,"instead."));var Go=Lo(jo,Xo);jo.onBeforeCompile(Go,va);var Vo=va.getRenderTarget(),Wo={isWebGL2:wo,shaderID:Xo,shaderName:Go.name,uniforms:Go.uniforms,vertexShader:Go.vertexShader,fragmentShader:Go.fragmentShader,defines:jo.defines,isRawShaderMaterial:jo.isRawShaderMaterial,isShaderMaterial:jo.isShaderMaterial,precision:So,instancing:Uo.isInstancedMesh===!0,supportsVertexTextures:Do,outputEncoding:Vo!==null?Ro(Vo.texture):va.outputEncoding,map:!!jo.map,mapEncoding:Ro(jo.map),matcap:!!jo.matcap,matcapEncoding:Ro(jo.matcap),envMap:!!Zo,envMapMode:Zo&&Zo.mapping,envMapEncoding:Ro(Zo),envMapCubeUV:!!Zo&&(Zo.mapping===CubeUVReflectionMapping||Zo.mapping===CubeUVRefractionMapping),lightMap:!!jo.lightMap,lightMapEncoding:Ro(jo.lightMap),aoMap:!!jo.aoMap,emissiveMap:!!jo.emissiveMap,emissiveMapEncoding:Ro(jo.emissiveMap),bumpMap:!!jo.bumpMap,normalMap:!!jo.normalMap,objectSpaceNormalMap:jo.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:jo.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!jo.clearcoatMap,clearcoatRoughnessMap:!!jo.clearcoatRoughnessMap,clearcoatNormalMap:!!jo.clearcoatNormalMap,displacementMap:!!jo.displacementMap,roughnessMap:!!jo.roughnessMap,metalnessMap:!!jo.metalnessMap,specularMap:!!jo.specularMap,alphaMap:!!jo.alphaMap,gradientMap:!!jo.gradientMap,sheen:!!jo.sheen,combine:jo.combine,vertexTangents:jo.normalMap&&jo.vertexTangents,vertexColors:jo.vertexColors,vertexUvs:!!jo.map||!!jo.bumpMap||!!jo.normalMap||!!jo.specularMap||!!jo.alphaMap||!!jo.emissiveMap||!!jo.roughnessMap||!!jo.metalnessMap||!!jo.clearcoatMap||!!jo.clearcoatRoughnessMap||!!jo.clearcoatNormalMap||!!jo.displacementMap,uvsVertexOnly:!(!!jo.map||!!jo.bumpMap||!!jo.normalMap||!!jo.specularMap||!!jo.alphaMap||!!jo.emissiveMap||!!jo.roughnessMap||!!jo.metalnessMap||!!jo.clearcoatNormalMap)&&!!jo.displacementMap,fog:!!Qo,useFog:jo.fog,fogExp2:Qo&&Qo.isFogExp2,flatShading:jo.flatShading,sizeAttenuation:jo.sizeAttenuation,logarithmicDepthBuffer:Eo,skinning:jo.skinning&&Fo>0,maxBones:Fo,useVertexTexture:To,morphTargets:jo.morphTargets,morphNormals:jo.morphNormals,maxMorphTargets:va.maxMorphTargets,maxMorphNormals:va.maxMorphNormals,numDirLights:zo.directional.length,numPointLights:zo.point.length,numSpotLights:zo.spot.length,numRectAreaLights:zo.rectArea.length,numHemiLights:zo.hemi.length,numDirLightShadows:zo.directionalShadowMap.length,numPointLightShadows:zo.pointShadowMap.length,numSpotLightShadows:zo.spotShadowMap.length,numClippingPlanes:Bo,numClipIntersection:ko,dithering:jo.dithering,shadowMapEnabled:va.shadowMap.enabled&&Io.length>0,shadowMapType:va.shadowMap.type,toneMapping:jo.toneMapped?va.toneMapping:NoToneMapping,physicallyCorrectLights:va.physicallyCorrectLights,premultipliedAlpha:jo.premultipliedAlpha,alphaTest:jo.alphaTest,doubleSided:jo.side===DoubleSide,flipSided:jo.side===BackSide,depthPacking:jo.depthPacking!==void 0?jo.depthPacking:!1,index0AttributeName:jo.index0AttributeName,extensionDerivatives:jo.extensions&&jo.extensions.derivatives,extensionFragDepth:jo.extensions&&jo.extensions.fragDepth,extensionDrawBuffers:jo.extensions&&jo.extensions.drawBuffers,extensionShaderTextureLOD:jo.extensions&&jo.extensions.shaderTextureLOD,rendererExtensionFragDepth:wo||_o.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:wo||_o.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:wo||_o.get("EXT_shader_texture_lod")!==null,onBeforeCompile:jo.onBeforeCompile};return Wo},this.getProgramCacheKey=function(jo){var zo=[];if(jo.shaderID?zo.push(jo.shaderID):(zo.push(jo.fragmentShader),zo.push(jo.vertexShader)),jo.defines!==void 0)for(var Io in jo.defines)zo.push(Io),zo.push(jo.defines[Io]);if(jo.isRawShaderMaterial===void 0){for(var Po=0;Po<Oo.length;Po++)zo.push(jo[Oo[Po]]);zo.push(va.outputEncoding),zo.push(va.gammaFactor)}return zo.push(jo.onBeforeCompile.toString()),zo.join()},this.acquireProgram=function(jo,zo){for(var Io,Po=0,Bo=bo.length;Po<Bo;Po++){var ko=bo[Po];if(ko.cacheKey===zo){Io=ko,++Io.usedTimes;break}}return Io===void 0&&(Io=new WebGLProgram(va,zo,jo),bo.push(Io)),Io},this.releaseProgram=function(jo){if(--jo.usedTimes==0){var zo=bo.indexOf(jo);bo[zo]=bo[bo.length-1],bo.pop(),jo.destroy()}},this.programs=bo}function WebGLProperties(){var va=new WeakMap;function _o(Eo){var To=va.get(Eo);return To===void 0&&(To={},va.set(Eo,To)),To}function xo(Eo){va.delete(Eo)}function bo(Eo,To,So){va.get(Eo)[To]=So}function wo(){va=new WeakMap}return{get:_o,remove:xo,update:bo,dispose:wo}}function painterSortStable(va,_o){return va.groupOrder!==_o.groupOrder?va.groupOrder-_o.groupOrder:va.renderOrder!==_o.renderOrder?va.renderOrder-_o.renderOrder:va.program!==_o.program?va.program.id-_o.program.id:va.material.id!==_o.material.id?va.material.id-_o.material.id:va.z!==_o.z?va.z-_o.z:va.id-_o.id}function reversePainterSortStable(va,_o){return va.groupOrder!==_o.groupOrder?va.groupOrder-_o.groupOrder:va.renderOrder!==_o.renderOrder?va.renderOrder-_o.renderOrder:va.z!==_o.z?_o.z-va.z:va.id-_o.id}function WebGLRenderList(){var va=[],_o=0,xo=[],bo=[],wo={id:-1};function Eo(){_o=0,xo.length=0,bo.length=0}function To(Oo,Lo,Co,Ro,jo,zo){var Io=va[_o];return Io===void 0?(Io={id:Oo.id,object:Oo,geometry:Lo,material:Co,program:Co.program||wo,groupOrder:Ro,renderOrder:Oo.renderOrder,z:jo,group:zo},va[_o]=Io):(Io.id=Oo.id,Io.object=Oo,Io.geometry=Lo,Io.material=Co,Io.program=Co.program||wo,Io.groupOrder=Ro,Io.renderOrder=Oo.renderOrder,Io.z=jo,Io.group=zo),_o++,Io}function So(Oo,Lo,Co,Ro,jo,zo){var Io=To(Oo,Lo,Co,Ro,jo,zo);(Co.transparent===!0?bo:xo).push(Io)}function $o(Oo,Lo,Co,Ro,jo,zo){var Io=To(Oo,Lo,Co,Ro,jo,zo);(Co.transparent===!0?bo:xo).unshift(Io)}function Do(Oo,Lo){xo.length>1&&xo.sort(Oo||painterSortStable),bo.length>1&&bo.sort(Lo||reversePainterSortStable)}function No(){for(var Oo=_o,Lo=va.length;Oo<Lo;Oo++){var Co=va[Oo];if(Co.id===null)break;Co.id=null,Co.object=null,Co.geometry=null,Co.material=null,Co.program=null,Co.group=null}}return{opaque:xo,transparent:bo,init:Eo,push:So,unshift:$o,finish:No,sort:Do}}function WebGLRenderLists(){var va=new WeakMap;function _o(wo){var Eo=wo.target;Eo.removeEventListener("dispose",_o),va.delete(Eo)}function xo(wo,Eo){var To=va.get(wo),So;return To===void 0?(So=new WebGLRenderList,va.set(wo,new WeakMap),va.get(wo).set(Eo,So),wo.addEventListener("dispose",_o)):(So=To.get(Eo),So===void 0&&(So=new WebGLRenderList,To.set(Eo,So))),So}function bo(){va=new WeakMap}return{get:xo,dispose:bo}}function UniformsCache(){var va={};return{get:function(_o){if(va[_o.id]!==void 0)return va[_o.id];var xo;switch(_o.type){case"DirectionalLight":xo={direction:new Vector3,color:new Color};break;case"SpotLight":xo={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":xo={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":xo={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":xo={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return va[_o.id]=xo,xo}}}function ShadowUniformsCache(){var va={};return{get:function(_o){if(va[_o.id]!==void 0)return va[_o.id];var xo;switch(_o.type){case"DirectionalLight":xo={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":xo={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":xo={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return va[_o.id]=xo,xo}}}var nextVersion=0;function shadowCastingLightsFirst(va,_o){return(_o.castShadow?1:0)-(va.castShadow?1:0)}function WebGLLights(){for(var va=new UniformsCache,_o=ShadowUniformsCache(),xo={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},bo=0;bo<9;bo++)xo.probe.push(new Vector3);var wo=new Vector3,Eo=new Matrix4,To=new Matrix4;function So($o,Do,No){for(var Oo=0,Lo=0,Co=0,Ro=0;Ro<9;Ro++)xo.probe[Ro].set(0,0,0);var jo=0,zo=0,Io=0,Po=0,Bo=0,ko=0,Uo=0,Qo=0,qo=No.matrixWorldInverse;$o.sort(shadowCastingLightsFirst);for(var Ro=0,Zo=$o.length;Ro<Zo;Ro++){var Xo=$o[Ro],Fo=Xo.color,Go=Xo.intensity,Vo=Xo.distance,Wo=Xo.shadow&&Xo.shadow.map?Xo.shadow.map.texture:null;if(Xo.isAmbientLight)Oo+=Fo.r*Go,Lo+=Fo.g*Go,Co+=Fo.b*Go;else if(Xo.isLightProbe)for(var Yo=0;Yo<9;Yo++)xo.probe[Yo].addScaledVector(Xo.sh.coefficients[Yo],Go);else if(Xo.isDirectionalLight){var Ko=va.get(Xo);if(Ko.color.copy(Xo.color).multiplyScalar(Xo.intensity),Ko.direction.setFromMatrixPosition(Xo.matrixWorld),wo.setFromMatrixPosition(Xo.target.matrixWorld),Ko.direction.sub(wo),Ko.direction.transformDirection(qo),Xo.castShadow){var ts=Xo.shadow,Jo=_o.get(Xo);Jo.shadowBias=ts.bias,Jo.shadowRadius=ts.radius,Jo.shadowMapSize=ts.mapSize,xo.directionalShadow[jo]=Jo,xo.directionalShadowMap[jo]=Wo,xo.directionalShadowMatrix[jo]=Xo.shadow.matrix,ko++}xo.directional[jo]=Ko,jo++}else if(Xo.isSpotLight){var Ko=va.get(Xo);if(Ko.position.setFromMatrixPosition(Xo.matrixWorld),Ko.position.applyMatrix4(qo),Ko.color.copy(Fo).multiplyScalar(Go),Ko.distance=Vo,Ko.direction.setFromMatrixPosition(Xo.matrixWorld),wo.setFromMatrixPosition(Xo.target.matrixWorld),Ko.direction.sub(wo),Ko.direction.transformDirection(qo),Ko.coneCos=Math.cos(Xo.angle),Ko.penumbraCos=Math.cos(Xo.angle*(1-Xo.penumbra)),Ko.decay=Xo.decay,Xo.castShadow){var ts=Xo.shadow,Jo=_o.get(Xo);Jo.shadowBias=ts.bias,Jo.shadowRadius=ts.radius,Jo.shadowMapSize=ts.mapSize,xo.spotShadow[Io]=Jo,xo.spotShadowMap[Io]=Wo,xo.spotShadowMatrix[Io]=Xo.shadow.matrix,Qo++}xo.spot[Io]=Ko,Io++}else if(Xo.isRectAreaLight){var Ko=va.get(Xo);Ko.color.copy(Fo).multiplyScalar(Go),Ko.position.setFromMatrixPosition(Xo.matrixWorld),Ko.position.applyMatrix4(qo),To.identity(),Eo.copy(Xo.matrixWorld),Eo.premultiply(qo),To.extractRotation(Eo),Ko.halfWidth.set(Xo.width*.5,0,0),Ko.halfHeight.set(0,Xo.height*.5,0),Ko.halfWidth.applyMatrix4(To),Ko.halfHeight.applyMatrix4(To),xo.rectArea[Po]=Ko,Po++}else if(Xo.isPointLight){var Ko=va.get(Xo);if(Ko.position.setFromMatrixPosition(Xo.matrixWorld),Ko.position.applyMatrix4(qo),Ko.color.copy(Xo.color).multiplyScalar(Xo.intensity),Ko.distance=Xo.distance,Ko.decay=Xo.decay,Xo.castShadow){var ts=Xo.shadow,Jo=_o.get(Xo);Jo.shadowBias=ts.bias,Jo.shadowRadius=ts.radius,Jo.shadowMapSize=ts.mapSize,Jo.shadowCameraNear=ts.camera.near,Jo.shadowCameraFar=ts.camera.far,xo.pointShadow[zo]=Jo,xo.pointShadowMap[zo]=Wo,xo.pointShadowMatrix[zo]=Xo.shadow.matrix,Uo++}xo.point[zo]=Ko,zo++}else if(Xo.isHemisphereLight){var Ko=va.get(Xo);Ko.direction.setFromMatrixPosition(Xo.matrixWorld),Ko.direction.transformDirection(qo),Ko.direction.normalize(),Ko.skyColor.copy(Xo.color).multiplyScalar(Go),Ko.groundColor.copy(Xo.groundColor).multiplyScalar(Go),xo.hemi[Bo]=Ko,Bo++}}xo.ambient[0]=Oo,xo.ambient[1]=Lo,xo.ambient[2]=Co;var rs=xo.hash;(rs.directionalLength!==jo||rs.pointLength!==zo||rs.spotLength!==Io||rs.rectAreaLength!==Po||rs.hemiLength!==Bo||rs.numDirectionalShadows!==ko||rs.numPointShadows!==Uo||rs.numSpotShadows!==Qo)&&(xo.directional.length=jo,xo.spot.length=Io,xo.rectArea.length=Po,xo.point.length=zo,xo.hemi.length=Bo,xo.directionalShadow.length=ko,xo.directionalShadowMap.length=ko,xo.pointShadow.length=Uo,xo.pointShadowMap.length=Uo,xo.spotShadow.length=Qo,xo.spotShadowMap.length=Qo,xo.directionalShadowMatrix.length=ko,xo.pointShadowMatrix.length=Uo,xo.spotShadowMatrix.length=Qo,rs.directionalLength=jo,rs.pointLength=zo,rs.spotLength=Io,rs.rectAreaLength=Po,rs.hemiLength=Bo,rs.numDirectionalShadows=ko,rs.numPointShadows=Uo,rs.numSpotShadows=Qo,xo.version=nextVersion++)}return{setup:So,state:xo}}function WebGLRenderState(){var va=new WebGLLights,_o=[],xo=[];function bo(){_o.length=0,xo.length=0}function wo($o){_o.push($o)}function Eo($o){xo.push($o)}function To($o){va.setup(_o,xo,$o)}var So={lightsArray:_o,shadowsArray:xo,lights:va};return{init:bo,state:So,setupLights:To,pushLight:wo,pushShadow:Eo}}function WebGLRenderStates(){var va=new WeakMap;function _o(wo){var Eo=wo.target;Eo.removeEventListener("dispose",_o),va.delete(Eo)}function xo(wo,Eo){var To;return va.has(wo)===!1?(To=new WebGLRenderState,va.set(wo,new WeakMap),va.get(wo).set(Eo,To),wo.addEventListener("dispose",_o)):va.get(wo).has(Eo)===!1?(To=new WebGLRenderState,va.get(wo).set(Eo,To)):To=va.get(wo).get(Eo),To}function bo(){va=new WeakMap}return{get:xo,dispose:bo}}function MeshDepthMaterial(va){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(va)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.depthPacking=va.depthPacking,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.map=va.map,this.alphaMap=va.alphaMap,this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this};function MeshDistanceMaterial(va){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(va)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.referencePosition.copy(va.referencePosition),this.nearDistance=va.nearDistance,this.farDistance=va.farDistance,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.map=va.map,this.alphaMap=va.alphaMap,this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(va,_o,xo){var bo=new Frustum,wo=new Vector2,Eo=new Vector2,To=new Vector4,So=[],$o=[],Do={},No={0:BackSide,1:FrontSide,2:DoubleSide},Oo=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Lo=Oo.clone();Lo.defines.HORIZONAL_PASS=1;var Co=new BufferGeometry;Co.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Ro=new Mesh(Co,Oo),jo=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Uo,Qo,qo){if(jo.enabled!==!1&&!(jo.autoUpdate===!1&&jo.needsUpdate===!1)&&Uo.length!==0){var Zo=va.getRenderTarget(),Xo=va.getActiveCubeFace(),Fo=va.getActiveMipmapLevel(),Go=va.state;Go.setBlending(NoBlending),Go.buffers.color.setClear(1,1,1,1),Go.buffers.depth.setTest(!0),Go.setScissorTest(!1);for(var Vo=0,Wo=Uo.length;Vo<Wo;Vo++){var Yo=Uo[Vo],Ko=Yo.shadow;if(Ko===void 0){console.warn("THREE.WebGLShadowMap:",Yo,"has no shadow.");continue}wo.copy(Ko.mapSize);var ts=Ko.getFrameExtents();if(wo.multiply(ts),Eo.copy(Ko.mapSize),(wo.x>xo||wo.y>xo)&&(wo.x>xo&&(Eo.x=Math.floor(xo/ts.x),wo.x=Eo.x*ts.x,Ko.mapSize.x=Eo.x),wo.y>xo&&(Eo.y=Math.floor(xo/ts.y),wo.y=Eo.y*ts.y,Ko.mapSize.y=Eo.y)),Ko.map===null&&!Ko.isPointLightShadow&&this.type===VSMShadowMap){var Jo={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Ko.map=new WebGLRenderTarget(wo.x,wo.y,Jo),Ko.map.texture.name=Yo.name+".shadowMap",Ko.mapPass=new WebGLRenderTarget(wo.x,wo.y,Jo),Ko.camera.updateProjectionMatrix()}if(Ko.map===null){var Jo={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Ko.map=new WebGLRenderTarget(wo.x,wo.y,Jo),Ko.map.texture.name=Yo.name+".shadowMap",Ko.camera.updateProjectionMatrix()}va.setRenderTarget(Ko.map),va.clear();for(var rs=Ko.getViewportCount(),ls=0;ls<rs;ls++){var ss=Ko.getViewport(ls);To.set(Eo.x*ss.x,Eo.y*ss.y,Eo.x*ss.z,Eo.y*ss.w),Go.viewport(To),Ko.updateMatrices(Yo,ls),bo=Ko.getFrustum(),ko(Qo,qo,Ko.camera,Yo,this.type)}!Ko.isPointLightShadow&&this.type===VSMShadowMap&&zo(Ko,qo)}jo.needsUpdate=!1,va.setRenderTarget(Zo,Xo,Fo)}};function zo(Uo,Qo){var qo=_o.update(Ro);Oo.uniforms.shadow_pass.value=Uo.map.texture,Oo.uniforms.resolution.value=Uo.mapSize,Oo.uniforms.radius.value=Uo.radius,va.setRenderTarget(Uo.mapPass),va.clear(),va.renderBufferDirect(Qo,null,qo,Oo,Ro,null),Lo.uniforms.shadow_pass.value=Uo.mapPass.texture,Lo.uniforms.resolution.value=Uo.mapSize,Lo.uniforms.radius.value=Uo.radius,va.setRenderTarget(Uo.map),va.clear(),va.renderBufferDirect(Qo,null,qo,Lo,Ro,null)}function Io(Uo,Qo,qo){var Zo=Uo<<0|Qo<<1|qo<<2,Xo=So[Zo];return Xo===void 0&&(Xo=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:Uo,skinning:Qo}),So[Zo]=Xo),Xo}function Po(Uo,Qo,qo){var Zo=Uo<<0|Qo<<1|qo<<2,Xo=$o[Zo];return Xo===void 0&&(Xo=new MeshDistanceMaterial({morphTargets:Uo,skinning:Qo}),$o[Zo]=Xo),Xo}function Bo(Uo,Qo,qo,Zo,Xo,Fo,Go){var Vo=null,Wo=Io,Yo=Uo.customDepthMaterial;if(Zo.isPointLight===!0&&(Wo=Po,Yo=Uo.customDistanceMaterial),Yo===void 0){var Ko=!1;qo.morphTargets===!0&&(Ko=Qo.morphAttributes&&Qo.morphAttributes.position&&Qo.morphAttributes.position.length>0);var ts=!1;Uo.isSkinnedMesh===!0&&(qo.skinning===!0?ts=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Uo));var Jo=Uo.isInstancedMesh===!0;Vo=Wo(Ko,ts,Jo)}else Vo=Yo;if(va.localClippingEnabled&&qo.clipShadows===!0&&qo.clippingPlanes.length!==0){var rs=Vo.uuid,ls=qo.uuid,ss=Do[rs];ss===void 0&&(ss={},Do[rs]=ss);var us=ss[ls];us===void 0&&(us=Vo.clone(),ss[ls]=us),Vo=us}return Vo.visible=qo.visible,Vo.wireframe=qo.wireframe,Go===VSMShadowMap?Vo.side=qo.shadowSide!==null?qo.shadowSide:qo.side:Vo.side=qo.shadowSide!==null?qo.shadowSide:No[qo.side],Vo.clipShadows=qo.clipShadows,Vo.clippingPlanes=qo.clippingPlanes,Vo.clipIntersection=qo.clipIntersection,Vo.wireframeLinewidth=qo.wireframeLinewidth,Vo.linewidth=qo.linewidth,Zo.isPointLight===!0&&Vo.isMeshDistanceMaterial===!0&&(Vo.referencePosition.setFromMatrixPosition(Zo.matrixWorld),Vo.nearDistance=Xo,Vo.farDistance=Fo),Vo}function ko(Uo,Qo,qo,Zo,Xo){if(Uo.visible!==!1){var Fo=Uo.layers.test(Qo.layers);if(Fo&&(Uo.isMesh||Uo.isLine||Uo.isPoints)&&(Uo.castShadow||Uo.receiveShadow&&Xo===VSMShadowMap)&&(!Uo.frustumCulled||bo.intersectsObject(Uo))){Uo.modelViewMatrix.multiplyMatrices(qo.matrixWorldInverse,Uo.matrixWorld);var Go=_o.update(Uo),Vo=Uo.material;if(Array.isArray(Vo))for(var Wo=Go.groups,Yo=0,Ko=Wo.length;Yo<Ko;Yo++){var ts=Wo[Yo],Jo=Vo[ts.materialIndex];if(Jo&&Jo.visible){var rs=Bo(Uo,Go,Jo,Zo,qo.near,qo.far,Xo);va.renderBufferDirect(qo,null,Go,rs,Uo,ts)}}else if(Vo.visible){var rs=Bo(Uo,Go,Vo,Zo,qo.near,qo.far,Xo);va.renderBufferDirect(qo,null,Go,rs,Uo,null)}}for(var ls=Uo.children,ss=0,us=ls.length;ss<us;ss++)ko(ls[ss],Qo,qo,Zo,Xo)}}}function WebGLState(va,_o,xo){var bo=xo.isWebGL2;function wo(){var ys=!1,Xs=new Vector4,Ks=null,du=new Vector4(0,0,0,0);return{setMask:function(qs){Ks!==qs&&!ys&&(va.colorMask(qs,qs,qs,qs),Ks=qs)},setLocked:function(qs){ys=qs},setClear:function(qs,uu,xu,Eu,ju){ju===!0&&(qs*=Eu,uu*=Eu,xu*=Eu),Xs.set(qs,uu,xu,Eu),du.equals(Xs)===!1&&(va.clearColor(qs,uu,xu,Eu),du.copy(Xs))},reset:function(){ys=!1,Ks=null,du.set(-1,0,0,0)}}}function Eo(){var ys=!1,Xs=null,Ks=null,du=null;return{setTest:function(qs){qs?zs(2929):Cs(2929)},setMask:function(qs){Xs!==qs&&!ys&&(va.depthMask(qs),Xs=qs)},setFunc:function(qs){if(Ks!==qs){if(qs)switch(qs){case NeverDepth:va.depthFunc(512);break;case AlwaysDepth:va.depthFunc(519);break;case LessDepth:va.depthFunc(513);break;case LessEqualDepth:va.depthFunc(515);break;case EqualDepth:va.depthFunc(514);break;case GreaterEqualDepth:va.depthFunc(518);break;case GreaterDepth:va.depthFunc(516);break;case NotEqualDepth:va.depthFunc(517);break;default:va.depthFunc(515)}else va.depthFunc(515);Ks=qs}},setLocked:function(qs){ys=qs},setClear:function(qs){du!==qs&&(va.clearDepth(qs),du=qs)},reset:function(){ys=!1,Xs=null,Ks=null,du=null}}}function To(){var ys=!1,Xs=null,Ks=null,du=null,qs=null,uu=null,xu=null,Eu=null,ju=null;return{setTest:function(au){ys||(au?zs(2960):Cs(2960))},setMask:function(au){Xs!==au&&!ys&&(va.stencilMask(au),Xs=au)},setFunc:function(au,Lu,zu){(Ks!==au||du!==Lu||qs!==zu)&&(va.stencilFunc(au,Lu,zu),Ks=au,du=Lu,qs=zu)},setOp:function(au,Lu,zu){(uu!==au||xu!==Lu||Eu!==zu)&&(va.stencilOp(au,Lu,zu),uu=au,xu=Lu,Eu=zu)},setLocked:function(au){ys=au},setClear:function(au){ju!==au&&(va.clearStencil(au),ju=au)},reset:function(){ys=!1,Xs=null,Ks=null,du=null,qs=null,uu=null,xu=null,Eu=null,ju=null}}}var So=new wo,$o=new Eo,Do=new To,No=va.getParameter(34921),Oo=new Uint8Array(No),Lo=new Uint8Array(No),Co=new Uint8Array(No),Ro={},jo=null,zo=null,Io=null,Po=null,Bo=null,ko=null,Uo=null,Qo=null,qo=null,Zo=!1,Xo=null,Fo=null,Go=null,Vo=null,Wo=null,Yo=va.getParameter(35661),Ko=!1,ts=0,Jo=va.getParameter(7938);Jo.indexOf("WebGL")!==-1?(ts=parseFloat(/^WebGL\ ([0-9])/.exec(Jo)[1]),Ko=ts>=1):Jo.indexOf("OpenGL ES")!==-1&&(ts=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(Jo)[1]),Ko=ts>=2);var rs=null,ls={},ss=new Vector4,us=new Vector4;function ms(ys,Xs,Ks){var du=new Uint8Array(4),qs=va.createTexture();va.bindTexture(ys,qs),va.texParameteri(ys,10241,9728),va.texParameteri(ys,10240,9728);for(var uu=0;uu<Ks;uu++)va.texImage2D(Xs+uu,0,6408,1,1,0,6408,5121,du);return qs}var As={};As[3553]=ms(3553,3553,1),As[34067]=ms(34067,34069,6),So.setClear(0,0,0,1),$o.setClear(1),Do.setClear(0),zs(2929),$o.setFunc(LessEqualDepth),ds(!1),cs(CullFaceBack),zs(2884),bu(NoBlending);function Os(){for(var ys=0,Xs=Oo.length;ys<Xs;ys++)Oo[ys]=0}function Es(ys){Ms(ys,0)}function Ms(ys,Xs){if(Oo[ys]=1,Lo[ys]===0&&(va.enableVertexAttribArray(ys),Lo[ys]=1),Co[ys]!==Xs){var Ks=bo?va:_o.get("ANGLE_instanced_arrays");Ks[bo?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ys,Xs),Co[ys]=Xs}}function $s(){for(var ys=0,Xs=Lo.length;ys!==Xs;++ys)Lo[ys]!==Oo[ys]&&(va.disableVertexAttribArray(ys),Lo[ys]=0)}function ks(ys,Xs,Ks,du,qs,uu){bo===!0&&(Ks===5124||Ks===5125)?va.vertexAttribIPointer(ys,Xs,Ks,du,qs,uu):va.vertexAttribPointer(ys,Xs,Ks,du,qs,uu)}function zs(ys){Ro[ys]!==!0&&(va.enable(ys),Ro[ys]=!0)}function Cs(ys){Ro[ys]!==!1&&(va.disable(ys),Ro[ys]=!1)}function xs(ys){return jo!==ys?(va.useProgram(ys),jo=ys,!0):!1}var Bs={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(bo)Bs[MinEquation]=32775,Bs[MaxEquation]=32776;else{var Fs=_o.get("EXT_blend_minmax");Fs!==null&&(Bs[MinEquation]=Fs.MIN_EXT,Bs[MaxEquation]=Fs.MAX_EXT)}var Zs={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function bu(ys,Xs,Ks,du,qs,uu,xu,Eu){if(ys===NoBlending){zo&&(Cs(3042),zo=!1);return}if(zo||(zs(3042),zo=!0),ys!==CustomBlending){if(ys!==Io||Eu!==Zo){if((Po!==AddEquation||Uo!==AddEquation)&&(va.blendEquation(32774),Po=AddEquation,Uo=AddEquation),Eu)switch(ys){case NormalBlending:va.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:va.blendFunc(1,1);break;case SubtractiveBlending:va.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:va.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ys);break}else switch(ys){case NormalBlending:va.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:va.blendFunc(770,1);break;case SubtractiveBlending:va.blendFunc(0,769);break;case MultiplyBlending:va.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ys);break}Bo=null,ko=null,Qo=null,qo=null,Io=ys,Zo=Eu}return}qs=qs||Xs,uu=uu||Ks,xu=xu||du,(Xs!==Po||qs!==Uo)&&(va.blendEquationSeparate(Bs[Xs],Bs[qs]),Po=Xs,Uo=qs),(Ks!==Bo||du!==ko||uu!==Qo||xu!==qo)&&(va.blendFuncSeparate(Zs[Ks],Zs[du],Zs[uu],Zs[xu]),Bo=Ks,ko=du,Qo=uu,qo=xu),Io=ys,Zo=null}function Au(ys,Xs){ys.side===DoubleSide?Cs(2884):zs(2884);var Ks=ys.side===BackSide;Xs&&(Ks=!Ks),ds(Ks),ys.blending===NormalBlending&&ys.transparent===!1?bu(NoBlending):bu(ys.blending,ys.blendEquation,ys.blendSrc,ys.blendDst,ys.blendEquationAlpha,ys.blendSrcAlpha,ys.blendDstAlpha,ys.premultipliedAlpha),$o.setFunc(ys.depthFunc),$o.setTest(ys.depthTest),$o.setMask(ys.depthWrite),So.setMask(ys.colorWrite);var du=ys.stencilWrite;Do.setTest(du),du&&(Do.setMask(ys.stencilWriteMask),Do.setFunc(ys.stencilFunc,ys.stencilRef,ys.stencilFuncMask),Do.setOp(ys.stencilFail,ys.stencilZFail,ys.stencilZPass)),Ls(ys.polygonOffset,ys.polygonOffsetFactor,ys.polygonOffsetUnits)}function ds(ys){Xo!==ys&&(ys?va.frontFace(2304):va.frontFace(2305),Xo=ys)}function cs(ys){ys!==CullFaceNone?(zs(2884),ys!==Fo&&(ys===CullFaceBack?va.cullFace(1029):ys===CullFaceFront?va.cullFace(1028):va.cullFace(1032))):Cs(2884),Fo=ys}function bs(ys){ys!==Go&&(Ko&&va.lineWidth(ys),Go=ys)}function Ls(ys,Xs,Ks){ys?(zs(32823),(Vo!==Xs||Wo!==Ks)&&(va.polygonOffset(Xs,Ks),Vo=Xs,Wo=Ks)):Cs(32823)}function Js(ys){ys?zs(3089):Cs(3089)}function Qs(ys){ys===void 0&&(ys=33984+Yo-1),rs!==ys&&(va.activeTexture(ys),rs=ys)}function Gs(ys,Xs){rs===null&&Qs();var Ks=ls[rs];Ks===void 0&&(Ks={type:void 0,texture:void 0},ls[rs]=Ks),(Ks.type!==ys||Ks.texture!==Xs)&&(va.bindTexture(ys,Xs||As[ys]),Ks.type=ys,Ks.texture=Xs)}function fu(){var ys=ls[rs];ys!==void 0&&ys.type!==void 0&&(va.bindTexture(ys.type,null),ys.type=void 0,ys.texture=void 0)}function ru(){try{va.compressedTexImage2D.apply(va,arguments)}catch(ys){console.error("THREE.WebGLState:",ys)}}function eu(){try{va.texImage2D.apply(va,arguments)}catch(ys){console.error("THREE.WebGLState:",ys)}}function Vs(){try{va.texImage3D.apply(va,arguments)}catch(ys){console.error("THREE.WebGLState:",ys)}}function Hs(ys){ss.equals(ys)===!1&&(va.scissor(ys.x,ys.y,ys.z,ys.w),ss.copy(ys))}function Ys(ys){us.equals(ys)===!1&&(va.viewport(ys.x,ys.y,ys.z,ys.w),us.copy(ys))}function tu(){for(var ys=0;ys<Lo.length;ys++)Lo[ys]===1&&(va.disableVertexAttribArray(ys),Lo[ys]=0);Ro={},rs=null,ls={},jo=null,Io=null,Xo=null,Fo=null,So.reset(),$o.reset(),Do.reset()}return{buffers:{color:So,depth:$o,stencil:Do},initAttributes:Os,enableAttribute:Es,enableAttributeAndDivisor:Ms,disableUnusedAttributes:$s,vertexAttribPointer:ks,enable:zs,disable:Cs,useProgram:xs,setBlending:bu,setMaterial:Au,setFlipSided:ds,setCullFace:cs,setLineWidth:bs,setPolygonOffset:Ls,setScissorTest:Js,activeTexture:Qs,bindTexture:Gs,unbindTexture:fu,compressedTexImage2D:ru,texImage2D:eu,texImage3D:Vs,scissor:Hs,viewport:Ys,reset:tu}}function WebGLTextures(va,_o,xo,bo,wo,Eo,To){var So=wo.isWebGL2,$o=wo.maxTextures,Do=wo.maxCubemapSize,No=wo.maxTextureSize,Oo=wo.maxSamples,Lo=new WeakMap,Co,Ro=!1;try{Ro=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function jo(ds,cs){return Ro?new OffscreenCanvas(ds,cs):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function zo(ds,cs,bs,Ls){var Js=1;if((ds.width>Ls||ds.height>Ls)&&(Js=Ls/Math.max(ds.width,ds.height)),Js<1||cs===!0)if(typeof HTMLImageElement!="undefined"&&ds instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ds instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ds instanceof ImageBitmap){var Qs=cs?MathUtils.floorPowerOfTwo:Math.floor,Gs=Qs(Js*ds.width),fu=Qs(Js*ds.height);Co===void 0&&(Co=jo(Gs,fu));var ru=bs?jo(Gs,fu):Co;ru.width=Gs,ru.height=fu;var eu=ru.getContext("2d");return eu.drawImage(ds,0,0,Gs,fu),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ds.width+"x"+ds.height+") to ("+Gs+"x"+fu+")."),ru}else return"data"in ds&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ds.width+"x"+ds.height+")."),ds;return ds}function Io(ds){return MathUtils.isPowerOfTwo(ds.width)&&MathUtils.isPowerOfTwo(ds.height)}function Po(ds){return So?!1:ds.wrapS!==ClampToEdgeWrapping||ds.wrapT!==ClampToEdgeWrapping||ds.minFilter!==NearestFilter&&ds.minFilter!==LinearFilter}function Bo(ds,cs){return ds.generateMipmaps&&cs&&ds.minFilter!==NearestFilter&&ds.minFilter!==LinearFilter}function ko(ds,cs,bs,Ls){va.generateMipmap(ds);var Js=bo.get(cs);Js.__maxMipLevel=Math.log(Math.max(bs,Ls))*Math.LOG2E}function Uo(ds,cs,bs){if(So===!1)return cs;if(ds!==null){if(va[ds]!==void 0)return va[ds];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ds+"'")}var Ls=cs;return cs===6403&&(bs===5126&&(Ls=33326),bs===5131&&(Ls=33325),bs===5121&&(Ls=33321)),cs===6407&&(bs===5126&&(Ls=34837),bs===5131&&(Ls=34843),bs===5121&&(Ls=32849)),cs===6408&&(bs===5126&&(Ls=34836),bs===5131&&(Ls=34842),bs===5121&&(Ls=32856)),(Ls===33325||Ls===33326||Ls===34842||Ls===34836)&&_o.get("EXT_color_buffer_float"),Ls}function Qo(ds){return ds===NearestFilter||ds===NearestMipmapNearestFilter||ds===NearestMipmapLinearFilter?9728:9729}function qo(ds){var cs=ds.target;cs.removeEventListener("dispose",qo),Xo(cs),cs.isVideoTexture&&Lo.delete(cs),To.memory.textures--}function Zo(ds){var cs=ds.target;cs.removeEventListener("dispose",Zo),Fo(cs),To.memory.textures--}function Xo(ds){var cs=bo.get(ds);cs.__webglInit!==void 0&&(va.deleteTexture(cs.__webglTexture),bo.remove(ds))}function Fo(ds){var cs=bo.get(ds),bs=bo.get(ds.texture);if(!!ds){if(bs.__webglTexture!==void 0&&va.deleteTexture(bs.__webglTexture),ds.depthTexture&&ds.depthTexture.dispose(),ds.isWebGLCubeRenderTarget)for(var Ls=0;Ls<6;Ls++)va.deleteFramebuffer(cs.__webglFramebuffer[Ls]),cs.__webglDepthbuffer&&va.deleteRenderbuffer(cs.__webglDepthbuffer[Ls]);else va.deleteFramebuffer(cs.__webglFramebuffer),cs.__webglDepthbuffer&&va.deleteRenderbuffer(cs.__webglDepthbuffer),cs.__webglMultisampledFramebuffer&&va.deleteFramebuffer(cs.__webglMultisampledFramebuffer),cs.__webglColorRenderbuffer&&va.deleteRenderbuffer(cs.__webglColorRenderbuffer),cs.__webglDepthRenderbuffer&&va.deleteRenderbuffer(cs.__webglDepthRenderbuffer);bo.remove(ds.texture),bo.remove(ds)}}var Go=0;function Vo(){Go=0}function Wo(){var ds=Go;return ds>=$o&&console.warn("THREE.WebGLTextures: Trying to use "+ds+" texture units while this GPU supports only "+$o),Go+=1,ds}function Yo(ds,cs){var bs=bo.get(ds);if(ds.isVideoTexture&&Bs(ds),ds.version>0&&bs.__version!==ds.version){var Ls=ds.image;if(Ls===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ls.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{As(bs,ds,cs);return}}xo.activeTexture(33984+cs),xo.bindTexture(3553,bs.__webglTexture)}function Ko(ds,cs){var bs=bo.get(ds);if(ds.version>0&&bs.__version!==ds.version){As(bs,ds,cs);return}xo.activeTexture(33984+cs),xo.bindTexture(35866,bs.__webglTexture)}function ts(ds,cs){var bs=bo.get(ds);if(ds.version>0&&bs.__version!==ds.version){As(bs,ds,cs);return}xo.activeTexture(33984+cs),xo.bindTexture(32879,bs.__webglTexture)}function Jo(ds,cs){if(ds.image.length===6){var bs=bo.get(ds);if(ds.version>0&&bs.__version!==ds.version){ms(bs,ds),xo.activeTexture(33984+cs),xo.bindTexture(34067,bs.__webglTexture),va.pixelStorei(37440,ds.flipY);for(var Ls=ds&&(ds.isCompressedTexture||ds.image[0].isCompressedTexture),Js=ds.image[0]&&ds.image[0].isDataTexture,Qs=[],Gs=0;Gs<6;Gs++)!Ls&&!Js?Qs[Gs]=zo(ds.image[Gs],!1,!0,Do):Qs[Gs]=Js?ds.image[Gs].image:ds.image[Gs];var fu=Qs[0],ru=Io(fu)||So,eu=Eo.convert(ds.format),Vs=Eo.convert(ds.type),Hs=Uo(ds.internalFormat,eu,Vs);us(34067,ds,ru);var Ys;if(Ls){for(var Gs=0;Gs<6;Gs++){Ys=Qs[Gs].mipmaps;for(var tu=0;tu<Ys.length;tu++){var ys=Ys[tu];ds.format!==RGBAFormat&&ds.format!==RGBFormat?eu!==null?xo.compressedTexImage2D(34069+Gs,tu,Hs,ys.width,ys.height,0,ys.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xo.texImage2D(34069+Gs,tu,Hs,ys.width,ys.height,0,eu,Vs,ys.data)}}bs.__maxMipLevel=Ys.length-1}else{Ys=ds.mipmaps;for(var Gs=0;Gs<6;Gs++)if(Js){xo.texImage2D(34069+Gs,0,Hs,Qs[Gs].width,Qs[Gs].height,0,eu,Vs,Qs[Gs].data);for(var tu=0;tu<Ys.length;tu++){var ys=Ys[tu],Xs=ys.image[Gs].image;xo.texImage2D(34069+Gs,tu+1,Hs,Xs.width,Xs.height,0,eu,Vs,Xs.data)}}else{xo.texImage2D(34069+Gs,0,Hs,eu,Vs,Qs[Gs]);for(var tu=0;tu<Ys.length;tu++){var ys=Ys[tu];xo.texImage2D(34069+Gs,tu+1,Hs,eu,Vs,ys.image[Gs])}}bs.__maxMipLevel=Ys.length}Bo(ds,ru)&&ko(34067,ds,fu.width,fu.height),bs.__version=ds.version,ds.onUpdate&&ds.onUpdate(ds)}else xo.activeTexture(33984+cs),xo.bindTexture(34067,bs.__webglTexture)}}function rs(ds,cs){xo.activeTexture(33984+cs),xo.bindTexture(34067,bo.get(ds).__webglTexture)}var ls={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},ss={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function us(ds,cs,bs){bs?(va.texParameteri(ds,10242,ls[cs.wrapS]),va.texParameteri(ds,10243,ls[cs.wrapT]),(ds===32879||ds===35866)&&va.texParameteri(ds,32882,ls[cs.wrapR]),va.texParameteri(ds,10240,ss[cs.magFilter]),va.texParameteri(ds,10241,ss[cs.minFilter])):(va.texParameteri(ds,10242,33071),va.texParameteri(ds,10243,33071),(ds===32879||ds===35866)&&va.texParameteri(ds,32882,33071),(cs.wrapS!==ClampToEdgeWrapping||cs.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),va.texParameteri(ds,10240,Qo(cs.magFilter)),va.texParameteri(ds,10241,Qo(cs.minFilter)),cs.minFilter!==NearestFilter&&cs.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Ls=_o.get("EXT_texture_filter_anisotropic");if(Ls){if(cs.type===FloatType&&_o.get("OES_texture_float_linear")===null||cs.type===HalfFloatType&&(So||_o.get("OES_texture_half_float_linear"))===null)return;(cs.anisotropy>1||bo.get(cs).__currentAnisotropy)&&(va.texParameterf(ds,Ls.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(cs.anisotropy,wo.getMaxAnisotropy())),bo.get(cs).__currentAnisotropy=cs.anisotropy)}}function ms(ds,cs){ds.__webglInit===void 0&&(ds.__webglInit=!0,cs.addEventListener("dispose",qo),ds.__webglTexture=va.createTexture(),To.memory.textures++)}function As(ds,cs,bs){var Ls=3553;cs.isDataTexture2DArray&&(Ls=35866),cs.isDataTexture3D&&(Ls=32879),ms(ds,cs),xo.activeTexture(33984+bs),xo.bindTexture(Ls,ds.__webglTexture),va.pixelStorei(37440,cs.flipY),va.pixelStorei(37441,cs.premultiplyAlpha),va.pixelStorei(3317,cs.unpackAlignment);var Js=Po(cs)&&Io(cs.image)===!1,Qs=zo(cs.image,Js,!1,No),Gs=Io(Qs)||So,fu=Eo.convert(cs.format),ru=Eo.convert(cs.type),eu=Uo(cs.internalFormat,fu,ru);us(Ls,cs,Gs);var Vs,Hs=cs.mipmaps;if(cs.isDepthTexture)eu=6402,So?cs.type===FloatType?eu=36012:cs.type===UnsignedIntType?eu=33190:cs.type===UnsignedInt248Type?eu=35056:eu=33189:cs.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),cs.format===DepthFormat&&eu===6402&&cs.type!==UnsignedShortType&&cs.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),cs.type=UnsignedShortType,ru=Eo.convert(cs.type)),cs.format===DepthStencilFormat&&eu===6402&&(eu=34041,cs.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),cs.type=UnsignedInt248Type,ru=Eo.convert(cs.type))),xo.texImage2D(3553,0,eu,Qs.width,Qs.height,0,fu,ru,null);else if(cs.isDataTexture)if(Hs.length>0&&Gs){for(var Ys=0,tu=Hs.length;Ys<tu;Ys++)Vs=Hs[Ys],xo.texImage2D(3553,Ys,eu,Vs.width,Vs.height,0,fu,ru,Vs.data);cs.generateMipmaps=!1,ds.__maxMipLevel=Hs.length-1}else xo.texImage2D(3553,0,eu,Qs.width,Qs.height,0,fu,ru,Qs.data),ds.__maxMipLevel=0;else if(cs.isCompressedTexture){for(var Ys=0,tu=Hs.length;Ys<tu;Ys++)Vs=Hs[Ys],cs.format!==RGBAFormat&&cs.format!==RGBFormat?fu!==null?xo.compressedTexImage2D(3553,Ys,eu,Vs.width,Vs.height,0,Vs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xo.texImage2D(3553,Ys,eu,Vs.width,Vs.height,0,fu,ru,Vs.data);ds.__maxMipLevel=Hs.length-1}else if(cs.isDataTexture2DArray)xo.texImage3D(35866,0,eu,Qs.width,Qs.height,Qs.depth,0,fu,ru,Qs.data),ds.__maxMipLevel=0;else if(cs.isDataTexture3D)xo.texImage3D(32879,0,eu,Qs.width,Qs.height,Qs.depth,0,fu,ru,Qs.data),ds.__maxMipLevel=0;else if(Hs.length>0&&Gs){for(var Ys=0,tu=Hs.length;Ys<tu;Ys++)Vs=Hs[Ys],xo.texImage2D(3553,Ys,eu,fu,ru,Vs);cs.generateMipmaps=!1,ds.__maxMipLevel=Hs.length-1}else xo.texImage2D(3553,0,eu,fu,ru,Qs),ds.__maxMipLevel=0;Bo(cs,Gs)&&ko(Ls,cs,Qs.width,Qs.height),ds.__version=cs.version,cs.onUpdate&&cs.onUpdate(cs)}function Os(ds,cs,bs,Ls){var Js=Eo.convert(cs.texture.format),Qs=Eo.convert(cs.texture.type),Gs=Uo(cs.texture.internalFormat,Js,Qs);xo.texImage2D(Ls,0,Gs,cs.width,cs.height,0,Js,Qs,null),va.bindFramebuffer(36160,ds),va.framebufferTexture2D(36160,bs,Ls,bo.get(cs.texture).__webglTexture,0),va.bindFramebuffer(36160,null)}function Es(ds,cs,bs){if(va.bindRenderbuffer(36161,ds),cs.depthBuffer&&!cs.stencilBuffer){var Ls=33189;if(bs){var Js=cs.depthTexture;Js&&Js.isDepthTexture&&(Js.type===FloatType?Ls=36012:Js.type===UnsignedIntType&&(Ls=33190));var Qs=xs(cs);va.renderbufferStorageMultisample(36161,Qs,Ls,cs.width,cs.height)}else va.renderbufferStorage(36161,Ls,cs.width,cs.height);va.framebufferRenderbuffer(36160,36096,36161,ds)}else if(cs.depthBuffer&&cs.stencilBuffer){if(bs){var Qs=xs(cs);va.renderbufferStorageMultisample(36161,Qs,35056,cs.width,cs.height)}else va.renderbufferStorage(36161,34041,cs.width,cs.height);va.framebufferRenderbuffer(36160,33306,36161,ds)}else{var Gs=Eo.convert(cs.texture.format),fu=Eo.convert(cs.texture.type),Ls=Uo(cs.texture.internalFormat,Gs,fu);if(bs){var Qs=xs(cs);va.renderbufferStorageMultisample(36161,Qs,Ls,cs.width,cs.height)}else va.renderbufferStorage(36161,Ls,cs.width,cs.height)}va.bindRenderbuffer(36161,null)}function Ms(ds,cs){var bs=cs&&cs.isWebGLCubeRenderTarget;if(bs)throw new Error("Depth Texture with cube render targets is not supported");if(va.bindFramebuffer(36160,ds),!(cs.depthTexture&&cs.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!bo.get(cs.depthTexture).__webglTexture||cs.depthTexture.image.width!==cs.width||cs.depthTexture.image.height!==cs.height)&&(cs.depthTexture.image.width=cs.width,cs.depthTexture.image.height=cs.height,cs.depthTexture.needsUpdate=!0),Yo(cs.depthTexture,0);var Ls=bo.get(cs.depthTexture).__webglTexture;if(cs.depthTexture.format===DepthFormat)va.framebufferTexture2D(36160,36096,3553,Ls,0);else if(cs.depthTexture.format===DepthStencilFormat)va.framebufferTexture2D(36160,33306,3553,Ls,0);else throw new Error("Unknown depthTexture format")}function $s(ds){var cs=bo.get(ds),bs=ds.isWebGLCubeRenderTarget===!0;if(ds.depthTexture){if(bs)throw new Error("target.depthTexture not supported in Cube render targets");Ms(cs.__webglFramebuffer,ds)}else if(bs){cs.__webglDepthbuffer=[];for(var Ls=0;Ls<6;Ls++)va.bindFramebuffer(36160,cs.__webglFramebuffer[Ls]),cs.__webglDepthbuffer[Ls]=va.createRenderbuffer(),Es(cs.__webglDepthbuffer[Ls],ds,!1)}else va.bindFramebuffer(36160,cs.__webglFramebuffer),cs.__webglDepthbuffer=va.createRenderbuffer(),Es(cs.__webglDepthbuffer,ds,!1);va.bindFramebuffer(36160,null)}function ks(ds){var cs=bo.get(ds),bs=bo.get(ds.texture);ds.addEventListener("dispose",Zo),bs.__webglTexture=va.createTexture(),To.memory.textures++;var Ls=ds.isWebGLCubeRenderTarget===!0,Js=ds.isWebGLMultisampleRenderTarget===!0,Qs=Io(ds)||So;if(So&&ds.texture.format===RGBFormat&&(ds.texture.type===FloatType||ds.texture.type===HalfFloatType)&&(ds.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ls){cs.__webglFramebuffer=[];for(var Gs=0;Gs<6;Gs++)cs.__webglFramebuffer[Gs]=va.createFramebuffer()}else if(cs.__webglFramebuffer=va.createFramebuffer(),Js)if(So){cs.__webglMultisampledFramebuffer=va.createFramebuffer(),cs.__webglColorRenderbuffer=va.createRenderbuffer(),va.bindRenderbuffer(36161,cs.__webglColorRenderbuffer);var fu=Eo.convert(ds.texture.format),ru=Eo.convert(ds.texture.type),eu=Uo(ds.texture.internalFormat,fu,ru),Vs=xs(ds);va.renderbufferStorageMultisample(36161,Vs,eu,ds.width,ds.height),va.bindFramebuffer(36160,cs.__webglMultisampledFramebuffer),va.framebufferRenderbuffer(36160,36064,36161,cs.__webglColorRenderbuffer),va.bindRenderbuffer(36161,null),ds.depthBuffer&&(cs.__webglDepthRenderbuffer=va.createRenderbuffer(),Es(cs.__webglDepthRenderbuffer,ds,!0)),va.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ls){xo.bindTexture(34067,bs.__webglTexture),us(34067,ds.texture,Qs);for(var Gs=0;Gs<6;Gs++)Os(cs.__webglFramebuffer[Gs],ds,36064,34069+Gs);Bo(ds.texture,Qs)&&ko(34067,ds.texture,ds.width,ds.height),xo.bindTexture(34067,null)}else xo.bindTexture(3553,bs.__webglTexture),us(3553,ds.texture,Qs),Os(cs.__webglFramebuffer,ds,36064,3553),Bo(ds.texture,Qs)&&ko(3553,ds.texture,ds.width,ds.height),xo.bindTexture(3553,null);ds.depthBuffer&&$s(ds)}function zs(ds){var cs=ds.texture,bs=Io(ds)||So;if(Bo(cs,bs)){var Ls=ds.isWebGLCubeRenderTarget?34067:3553,Js=bo.get(cs).__webglTexture;xo.bindTexture(Ls,Js),ko(Ls,cs,ds.width,ds.height),xo.bindTexture(Ls,null)}}function Cs(ds){if(ds.isWebGLMultisampleRenderTarget)if(So){var cs=bo.get(ds);va.bindFramebuffer(36008,cs.__webglMultisampledFramebuffer),va.bindFramebuffer(36009,cs.__webglFramebuffer);var bs=ds.width,Ls=ds.height,Js=16384;ds.depthBuffer&&(Js|=256),ds.stencilBuffer&&(Js|=1024),va.blitFramebuffer(0,0,bs,Ls,0,0,bs,Ls,Js,9728),va.bindFramebuffer(36160,cs.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function xs(ds){return So&&ds.isWebGLMultisampleRenderTarget?Math.min(Oo,ds.samples):0}function Bs(ds){var cs=To.render.frame;Lo.get(ds)!==cs&&(Lo.set(ds,cs),ds.update())}var Fs=!1,Zs=!1;function bu(ds,cs){ds&&ds.isWebGLRenderTarget&&(Fs===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Fs=!0),ds=ds.texture),Yo(ds,cs)}function Au(ds,cs){ds&&ds.isWebGLCubeRenderTarget&&(Zs===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Zs=!0),ds=ds.texture),ds&&ds.isCubeTexture||Array.isArray(ds.image)&&ds.image.length===6?Jo(ds,cs):rs(ds,cs)}this.allocateTextureUnit=Wo,this.resetTextureUnits=Vo,this.setTexture2D=Yo,this.setTexture2DArray=Ko,this.setTexture3D=ts,this.setTextureCube=Jo,this.setTextureCubeDynamic=rs,this.setupRenderTarget=ks,this.updateRenderTargetMipmap=zs,this.updateMultisampleRenderTarget=Cs,this.safeSetTexture2D=bu,this.safeSetTextureCube=Au}function WebGLUtils(va,_o,xo){var bo=xo.isWebGL2;function wo(Eo){var To;if(Eo===UnsignedByteType)return 5121;if(Eo===UnsignedShort4444Type)return 32819;if(Eo===UnsignedShort5551Type)return 32820;if(Eo===UnsignedShort565Type)return 33635;if(Eo===ByteType)return 5120;if(Eo===ShortType)return 5122;if(Eo===UnsignedShortType)return 5123;if(Eo===IntType)return 5124;if(Eo===UnsignedIntType)return 5125;if(Eo===FloatType)return 5126;if(Eo===HalfFloatType)return bo?5131:(To=_o.get("OES_texture_half_float"),To!==null?To.HALF_FLOAT_OES:null);if(Eo===AlphaFormat)return 6406;if(Eo===RGBFormat)return 6407;if(Eo===RGBAFormat)return 6408;if(Eo===LuminanceFormat)return 6409;if(Eo===LuminanceAlphaFormat)return 6410;if(Eo===DepthFormat)return 6402;if(Eo===DepthStencilFormat)return 34041;if(Eo===RedFormat)return 6403;if(Eo===RedIntegerFormat)return 36244;if(Eo===RGFormat)return 33319;if(Eo===RGIntegerFormat)return 33320;if(Eo===RGBIntegerFormat)return 36248;if(Eo===RGBAIntegerFormat)return 36249;if(Eo===RGB_S3TC_DXT1_Format||Eo===RGBA_S3TC_DXT1_Format||Eo===RGBA_S3TC_DXT3_Format||Eo===RGBA_S3TC_DXT5_Format)if(To=_o.get("WEBGL_compressed_texture_s3tc"),To!==null){if(Eo===RGB_S3TC_DXT1_Format)return To.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Eo===RGBA_S3TC_DXT1_Format)return To.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Eo===RGBA_S3TC_DXT3_Format)return To.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Eo===RGBA_S3TC_DXT5_Format)return To.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Eo===RGB_PVRTC_4BPPV1_Format||Eo===RGB_PVRTC_2BPPV1_Format||Eo===RGBA_PVRTC_4BPPV1_Format||Eo===RGBA_PVRTC_2BPPV1_Format)if(To=_o.get("WEBGL_compressed_texture_pvrtc"),To!==null){if(Eo===RGB_PVRTC_4BPPV1_Format)return To.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Eo===RGB_PVRTC_2BPPV1_Format)return To.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Eo===RGBA_PVRTC_4BPPV1_Format)return To.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Eo===RGBA_PVRTC_2BPPV1_Format)return To.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Eo===RGB_ETC1_Format)return To=_o.get("WEBGL_compressed_texture_etc1"),To!==null?To.COMPRESSED_RGB_ETC1_WEBGL:null;if((Eo===RGB_ETC2_Format||Eo===RGBA_ETC2_EAC_Format)&&(To=_o.get("WEBGL_compressed_texture_etc"),To!==null)){if(Eo===RGB_ETC2_Format)return To.COMPRESSED_RGB8_ETC2;if(Eo===RGBA_ETC2_EAC_Format)return To.COMPRESSED_RGBA8_ETC2_EAC}if(Eo===RGBA_ASTC_4x4_Format||Eo===RGBA_ASTC_5x4_Format||Eo===RGBA_ASTC_5x5_Format||Eo===RGBA_ASTC_6x5_Format||Eo===RGBA_ASTC_6x6_Format||Eo===RGBA_ASTC_8x5_Format||Eo===RGBA_ASTC_8x6_Format||Eo===RGBA_ASTC_8x8_Format||Eo===RGBA_ASTC_10x5_Format||Eo===RGBA_ASTC_10x6_Format||Eo===RGBA_ASTC_10x8_Format||Eo===RGBA_ASTC_10x10_Format||Eo===RGBA_ASTC_12x10_Format||Eo===RGBA_ASTC_12x12_Format||Eo===SRGB8_ALPHA8_ASTC_4x4_Format||Eo===SRGB8_ALPHA8_ASTC_5x4_Format||Eo===SRGB8_ALPHA8_ASTC_5x5_Format||Eo===SRGB8_ALPHA8_ASTC_6x5_Format||Eo===SRGB8_ALPHA8_ASTC_6x6_Format||Eo===SRGB8_ALPHA8_ASTC_8x5_Format||Eo===SRGB8_ALPHA8_ASTC_8x6_Format||Eo===SRGB8_ALPHA8_ASTC_8x8_Format||Eo===SRGB8_ALPHA8_ASTC_10x5_Format||Eo===SRGB8_ALPHA8_ASTC_10x6_Format||Eo===SRGB8_ALPHA8_ASTC_10x8_Format||Eo===SRGB8_ALPHA8_ASTC_10x10_Format||Eo===SRGB8_ALPHA8_ASTC_12x10_Format||Eo===SRGB8_ALPHA8_ASTC_12x12_Format)return To=_o.get("WEBGL_compressed_texture_astc"),To!==null?Eo:null;if(Eo===RGBA_BPTC_Format)return To=_o.get("EXT_texture_compression_bptc"),To!==null?Eo:null;if(Eo===UnsignedInt248Type)return bo?34042:(To=_o.get("WEBGL_depth_texture"),To!==null?To.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:wo}}function ArrayCamera(va){PerspectiveCamera.call(this),this.cameras=va||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(va){return this._targetRay!==null&&this._targetRay.dispatchEvent(va),this._grip!==null&&this._grip.dispatchEvent(va),this},disconnect:function(va){return this.dispatchEvent({type:"disconnected",data:va}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(va,_o,xo){var bo=null,wo=null,Eo=this._targetRay,To=this._grip;return va&&(Eo!==null&&(bo=_o.getPose(va.targetRaySpace,xo),bo!==null&&(Eo.matrix.fromArray(bo.transform.matrix),Eo.matrix.decompose(Eo.position,Eo.rotation,Eo.scale))),To!==null&&va.gripSpace&&(wo=_o.getPose(va.gripSpace,xo),wo!==null&&(To.matrix.fromArray(wo.transform.matrix),To.matrix.decompose(To.position,To.rotation,To.scale)))),Eo!==null&&(Eo.visible=bo!==null),To!==null&&(To.visible=wo!==null),this}});function WebXRManager(va,_o){var xo=this,bo=null,wo=1,Eo=null,To="local-floor",So=null,$o=[],Do=new Map,No=new PerspectiveCamera;No.layers.enable(1),No.viewport=new Vector4;var Oo=new PerspectiveCamera;Oo.layers.enable(2),Oo.viewport=new Vector4;var Lo=[No,Oo],Co=new ArrayCamera;Co.layers.enable(1),Co.layers.enable(2);var Ro=null,jo=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Go){var Vo=$o[Go];return Vo===void 0&&(Vo=new WebXRController,$o[Go]=Vo),Vo.getTargetRaySpace()},this.getControllerGrip=function(Go){var Vo=$o[Go];return Vo===void 0&&(Vo=new WebXRController,$o[Go]=Vo),Vo.getGripSpace()};function zo(Go){var Vo=Do.get(Go.inputSource);Vo&&Vo.dispatchEvent({type:Go.type})}function Io(){Do.forEach(function(Go,Vo){Go.disconnect(Vo)}),Do.clear(),va.setFramebuffer(null),va.setRenderTarget(va.getRenderTarget()),Fo.stop(),xo.isPresenting=!1,xo.dispatchEvent({type:"sessionend"})}function Po(Go){Eo=Go,Fo.setContext(bo),Fo.start(),xo.isPresenting=!0,xo.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Go){wo=Go,xo.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Go){To=Go,xo.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Eo},this.getSession=function(){return bo},this.setSession=function(Go){if(bo=Go,bo!==null){bo.addEventListener("select",zo),bo.addEventListener("selectstart",zo),bo.addEventListener("selectend",zo),bo.addEventListener("squeeze",zo),bo.addEventListener("squeezestart",zo),bo.addEventListener("squeezeend",zo),bo.addEventListener("end",Io);var Vo=_o.getContextAttributes();Vo.xrCompatible!==!0&&_o.makeXRCompatible();var Wo={antialias:Vo.antialias,alpha:Vo.alpha,depth:Vo.depth,stencil:Vo.stencil,framebufferScaleFactor:wo},Yo=new XRWebGLLayer(bo,_o,Wo);bo.updateRenderState({baseLayer:Yo}),bo.requestReferenceSpace(To).then(Po),bo.addEventListener("inputsourceschange",Bo)}};function Bo(Go){for(var Vo=bo.inputSources,Wo=0;Wo<$o.length;Wo++)Do.set(Vo[Wo],$o[Wo]);for(var Wo=0;Wo<Go.removed.length;Wo++){var Yo=Go.removed[Wo],Ko=Do.get(Yo);Ko&&(Ko.dispatchEvent({type:"disconnected",data:Yo}),Do.delete(Yo))}for(var Wo=0;Wo<Go.added.length;Wo++){var Yo=Go.added[Wo],Ko=Do.get(Yo);Ko&&Ko.dispatchEvent({type:"connected",data:Yo})}}var ko=new Vector3,Uo=new Vector3;function Qo(Go,Vo,Wo){ko.setFromMatrixPosition(Vo.matrixWorld),Uo.setFromMatrixPosition(Wo.matrixWorld);var Yo=ko.distanceTo(Uo),Ko=Vo.projectionMatrix.elements,ts=Wo.projectionMatrix.elements,Jo=Ko[14]/(Ko[10]-1),rs=Ko[14]/(Ko[10]+1),ls=(Ko[9]+1)/Ko[5],ss=(Ko[9]-1)/Ko[5],us=(Ko[8]-1)/Ko[0],ms=(ts[8]+1)/ts[0],As=Jo*us,Os=Jo*ms,Es=Yo/(-us+ms),Ms=Es*-us;Vo.matrixWorld.decompose(Go.position,Go.quaternion,Go.scale),Go.translateX(Ms),Go.translateZ(Es),Go.matrixWorld.compose(Go.position,Go.quaternion,Go.scale),Go.matrixWorldInverse.getInverse(Go.matrixWorld);var $s=Jo+Es,ks=rs+Es,zs=As-Ms,Cs=Os+(Yo-Ms),xs=ls*rs/ks*$s,Bs=ss*rs/ks*$s;Go.projectionMatrix.makePerspective(zs,Cs,xs,Bs,$s,ks)}function qo(Go,Vo){Vo===null?Go.matrixWorld.copy(Go.matrix):Go.matrixWorld.multiplyMatrices(Vo.matrixWorld,Go.matrix),Go.matrixWorldInverse.getInverse(Go.matrixWorld)}this.getCamera=function(Go){Co.near=Oo.near=No.near=Go.near,Co.far=Oo.far=No.far=Go.far,(Ro!==Co.near||jo!==Co.far)&&(bo.updateRenderState({depthNear:Co.near,depthFar:Co.far}),Ro=Co.near,jo=Co.far);var Vo=Go.parent,Wo=Co.cameras;qo(Co,Vo);for(var Yo=0;Yo<Wo.length;Yo++)qo(Wo[Yo],Vo);Go.matrixWorld.copy(Co.matrixWorld);for(var Ko=Go.children,Yo=0,ts=Ko.length;Yo<ts;Yo++)Ko[Yo].updateMatrixWorld(!0);return Wo.length===2?Qo(Co,No,Oo):Co.projectionMatrix.copy(No.projectionMatrix),Co};var Zo=null;function Xo(Go,Vo){if(So=Vo.getViewerPose(Eo),So!==null){var Wo=So.views,Yo=bo.renderState.baseLayer;va.setFramebuffer(Yo.framebuffer);var Ko=!1;Wo.length!==Co.cameras.length&&(Co.cameras.length=0,Ko=!0);for(var ts=0;ts<Wo.length;ts++){var Jo=Wo[ts],rs=Yo.getViewport(Jo),ls=Lo[ts];ls.matrix.fromArray(Jo.transform.matrix),ls.projectionMatrix.fromArray(Jo.projectionMatrix),ls.viewport.set(rs.x,rs.y,rs.width,rs.height),ts===0&&Co.matrix.copy(ls.matrix),Ko===!0&&Co.cameras.push(ls)}}for(var ss=bo.inputSources,ts=0;ts<$o.length;ts++){var us=$o[ts],ms=ss[ts];us.update(ms,Vo,Eo)}Zo&&Zo(Go,Vo)}var Fo=new WebGLAnimation;Fo.setAnimationLoop(Xo),this.setAnimationLoop=function(Go){Zo=Go},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(va){function _o(Io,Po){Io.fogColor.value.copy(Po.color),Po.isFog?(Io.fogNear.value=Po.near,Io.fogFar.value=Po.far):Po.isFogExp2&&(Io.fogDensity.value=Po.density)}function xo(Io,Po,Bo,ko,Uo){Po.isMeshBasicMaterial?bo(Io,Po):Po.isMeshLambertMaterial?(bo(Io,Po),$o(Io,Po)):Po.isMeshToonMaterial?(bo(Io,Po),No(Io,Po)):Po.isMeshPhongMaterial?(bo(Io,Po),Do(Io,Po)):Po.isMeshStandardMaterial?(bo(Io,Po,Bo),Po.isMeshPhysicalMaterial?Lo(Io,Po,Bo):Oo(Io,Po,Bo)):Po.isMeshMatcapMaterial?(bo(Io,Po),Co(Io,Po)):Po.isMeshDepthMaterial?(bo(Io,Po),Ro(Io,Po)):Po.isMeshDistanceMaterial?(bo(Io,Po),jo(Io,Po)):Po.isMeshNormalMaterial?(bo(Io,Po),zo(Io,Po)):Po.isLineBasicMaterial?(wo(Io,Po),Po.isLineDashedMaterial&&Eo(Io,Po)):Po.isPointsMaterial?To(Io,Po,ko,Uo):Po.isSpriteMaterial?So(Io,Po):Po.isShadowMaterial?(Io.color.value.copy(Po.color),Io.opacity.value=Po.opacity):Po.isShaderMaterial&&(Po.uniformsNeedUpdate=!1)}function bo(Io,Po,Bo){Io.opacity.value=Po.opacity,Po.color&&Io.diffuse.value.copy(Po.color),Po.emissive&&Io.emissive.value.copy(Po.emissive).multiplyScalar(Po.emissiveIntensity),Po.map&&(Io.map.value=Po.map),Po.alphaMap&&(Io.alphaMap.value=Po.alphaMap),Po.specularMap&&(Io.specularMap.value=Po.specularMap);var ko=Po.envMap||Bo;ko&&(Io.envMap.value=ko,Io.flipEnvMap.value=ko.isCubeTexture?-1:1,Io.reflectivity.value=Po.reflectivity,Io.refractionRatio.value=Po.refractionRatio,Io.maxMipLevel.value=va.get(ko).__maxMipLevel),Po.lightMap&&(Io.lightMap.value=Po.lightMap,Io.lightMapIntensity.value=Po.lightMapIntensity),Po.aoMap&&(Io.aoMap.value=Po.aoMap,Io.aoMapIntensity.value=Po.aoMapIntensity);var Uo;Po.map?Uo=Po.map:Po.specularMap?Uo=Po.specularMap:Po.displacementMap?Uo=Po.displacementMap:Po.normalMap?Uo=Po.normalMap:Po.bumpMap?Uo=Po.bumpMap:Po.roughnessMap?Uo=Po.roughnessMap:Po.metalnessMap?Uo=Po.metalnessMap:Po.alphaMap?Uo=Po.alphaMap:Po.emissiveMap&&(Uo=Po.emissiveMap),Uo!==void 0&&(Uo.isWebGLRenderTarget&&(Uo=Uo.texture),Uo.matrixAutoUpdate===!0&&Uo.updateMatrix(),Io.uvTransform.value.copy(Uo.matrix));var Qo;Po.aoMap?Qo=Po.aoMap:Po.lightMap&&(Qo=Po.lightMap),Qo!==void 0&&(Qo.isWebGLRenderTarget&&(Qo=Qo.texture),Qo.matrixAutoUpdate===!0&&Qo.updateMatrix(),Io.uv2Transform.value.copy(Qo.matrix))}function wo(Io,Po){Io.diffuse.value.copy(Po.color),Io.opacity.value=Po.opacity}function Eo(Io,Po){Io.dashSize.value=Po.dashSize,Io.totalSize.value=Po.dashSize+Po.gapSize,Io.scale.value=Po.scale}function To(Io,Po,Bo,ko){Io.diffuse.value.copy(Po.color),Io.opacity.value=Po.opacity,Io.size.value=Po.size*Bo,Io.scale.value=ko*.5,Po.map&&(Io.map.value=Po.map),Po.alphaMap&&(Io.alphaMap.value=Po.alphaMap);var Uo;Po.map?Uo=Po.map:Po.alphaMap&&(Uo=Po.alphaMap),Uo!==void 0&&(Uo.matrixAutoUpdate===!0&&Uo.updateMatrix(),Io.uvTransform.value.copy(Uo.matrix))}function So(Io,Po){Io.diffuse.value.copy(Po.color),Io.opacity.value=Po.opacity,Io.rotation.value=Po.rotation,Po.map&&(Io.map.value=Po.map),Po.alphaMap&&(Io.alphaMap.value=Po.alphaMap);var Bo;Po.map?Bo=Po.map:Po.alphaMap&&(Bo=Po.alphaMap),Bo!==void 0&&(Bo.matrixAutoUpdate===!0&&Bo.updateMatrix(),Io.uvTransform.value.copy(Bo.matrix))}function $o(Io,Po){Po.emissiveMap&&(Io.emissiveMap.value=Po.emissiveMap)}function Do(Io,Po){Io.specular.value.copy(Po.specular),Io.shininess.value=Math.max(Po.shininess,1e-4),Po.emissiveMap&&(Io.emissiveMap.value=Po.emissiveMap),Po.bumpMap&&(Io.bumpMap.value=Po.bumpMap,Io.bumpScale.value=Po.bumpScale,Po.side===BackSide&&(Io.bumpScale.value*=-1)),Po.normalMap&&(Io.normalMap.value=Po.normalMap,Io.normalScale.value.copy(Po.normalScale),Po.side===BackSide&&Io.normalScale.value.negate()),Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias)}function No(Io,Po){Io.specular.value.copy(Po.specular),Io.shininess.value=Math.max(Po.shininess,1e-4),Po.gradientMap&&(Io.gradientMap.value=Po.gradientMap),Po.emissiveMap&&(Io.emissiveMap.value=Po.emissiveMap),Po.bumpMap&&(Io.bumpMap.value=Po.bumpMap,Io.bumpScale.value=Po.bumpScale,Po.side===BackSide&&(Io.bumpScale.value*=-1)),Po.normalMap&&(Io.normalMap.value=Po.normalMap,Io.normalScale.value.copy(Po.normalScale),Po.side===BackSide&&Io.normalScale.value.negate()),Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias)}function Oo(Io,Po,Bo){Io.roughness.value=Po.roughness,Io.metalness.value=Po.metalness,Po.roughnessMap&&(Io.roughnessMap.value=Po.roughnessMap),Po.metalnessMap&&(Io.metalnessMap.value=Po.metalnessMap),Po.emissiveMap&&(Io.emissiveMap.value=Po.emissiveMap),Po.bumpMap&&(Io.bumpMap.value=Po.bumpMap,Io.bumpScale.value=Po.bumpScale,Po.side===BackSide&&(Io.bumpScale.value*=-1)),Po.normalMap&&(Io.normalMap.value=Po.normalMap,Io.normalScale.value.copy(Po.normalScale),Po.side===BackSide&&Io.normalScale.value.negate()),Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias),(Po.envMap||Bo)&&(Io.envMapIntensity.value=Po.envMapIntensity)}function Lo(Io,Po,Bo){Oo(Io,Po,Bo),Io.reflectivity.value=Po.reflectivity,Io.clearcoat.value=Po.clearcoat,Io.clearcoatRoughness.value=Po.clearcoatRoughness,Po.sheen&&Io.sheen.value.copy(Po.sheen),Po.clearcoatMap&&(Io.clearcoatMap.value=Po.clearcoatMap),Po.clearcoatRoughnessMap&&(Io.clearcoatRoughnessMap.value=Po.clearcoatRoughnessMap),Po.clearcoatNormalMap&&(Io.clearcoatNormalScale.value.copy(Po.clearcoatNormalScale),Io.clearcoatNormalMap.value=Po.clearcoatNormalMap,Po.side===BackSide&&Io.clearcoatNormalScale.value.negate()),Io.transparency.value=Po.transparency}function Co(Io,Po){Po.matcap&&(Io.matcap.value=Po.matcap),Po.bumpMap&&(Io.bumpMap.value=Po.bumpMap,Io.bumpScale.value=Po.bumpScale,Po.side===BackSide&&(Io.bumpScale.value*=-1)),Po.normalMap&&(Io.normalMap.value=Po.normalMap,Io.normalScale.value.copy(Po.normalScale),Po.side===BackSide&&Io.normalScale.value.negate()),Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias)}function Ro(Io,Po){Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias)}function jo(Io,Po){Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias),Io.referencePosition.value.copy(Po.referencePosition),Io.nearDistance.value=Po.nearDistance,Io.farDistance.value=Po.farDistance}function zo(Io,Po){Po.bumpMap&&(Io.bumpMap.value=Po.bumpMap,Io.bumpScale.value=Po.bumpScale,Po.side===BackSide&&(Io.bumpScale.value*=-1)),Po.normalMap&&(Io.normalMap.value=Po.normalMap,Io.normalScale.value.copy(Po.normalScale),Po.side===BackSide&&Io.normalScale.value.negate()),Po.displacementMap&&(Io.displacementMap.value=Po.displacementMap,Io.displacementScale.value=Po.displacementScale,Io.displacementBias.value=Po.displacementBias)}return{refreshFogUniforms:_o,refreshMaterialUniforms:xo}}function WebGLRenderer(va){va=va||{};var _o=va.canvas!==void 0?va.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),xo=va.context!==void 0?va.context:null,bo=va.alpha!==void 0?va.alpha:!1,wo=va.depth!==void 0?va.depth:!0,Eo=va.stencil!==void 0?va.stencil:!0,To=va.antialias!==void 0?va.antialias:!1,So=va.premultipliedAlpha!==void 0?va.premultipliedAlpha:!0,$o=va.preserveDrawingBuffer!==void 0?va.preserveDrawingBuffer:!1,Do=va.powerPreference!==void 0?va.powerPreference:"default",No=va.failIfMajorPerformanceCaveat!==void 0?va.failIfMajorPerformanceCaveat:!1,Oo=null,Lo=null;this.domElement=_o,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Co=this,Ro=!1,jo=null,zo=0,Io=0,Po=null,Bo=null,ko=-1,Uo={geometry:null,program:null,wireframe:!1},Qo=null,qo=null,Zo=new Vector4,Xo=new Vector4,Fo=null,Go=_o.width,Vo=_o.height,Wo=1,Yo=null,Ko=null,ts=new Vector4(0,0,Go,Vo),Jo=new Vector4(0,0,Go,Vo),rs=!1,ls=new Frustum,ss=new WebGLClipping,us=!1,ms=!1,As=new Matrix4,Os=new Vector3;function Es(){return Po===null?Wo:1}var Ms;try{var $s={alpha:bo,depth:wo,stencil:Eo,antialias:To,premultipliedAlpha:So,preserveDrawingBuffer:$o,powerPreference:Do,failIfMajorPerformanceCaveat:No};if(_o.addEventListener("webglcontextlost",Ys,!1),_o.addEventListener("webglcontextrestored",tu,!1),Ms=xo||_o.getContext("webgl",$s)||_o.getContext("experimental-webgl",$s),Ms===null)throw _o.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Ms.getShaderPrecisionFormat===void 0&&(Ms.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fs){throw console.error("THREE.WebGLRenderer: "+fs.message),fs}var ks,zs,Cs,xs,Bs,Fs,Zs,bu,Au,ds,cs,bs,Ls,Js,Qs,Gs,fu,ru;function eu(){ks=new WebGLExtensions(Ms),zs=new WebGLCapabilities(Ms,ks,va),zs.isWebGL2===!1&&(ks.get("WEBGL_depth_texture"),ks.get("OES_texture_float"),ks.get("OES_texture_half_float"),ks.get("OES_texture_half_float_linear"),ks.get("OES_standard_derivatives"),ks.get("OES_element_index_uint"),ks.get("ANGLE_instanced_arrays")),ks.get("OES_texture_float_linear"),ru=new WebGLUtils(Ms,ks,zs),Cs=new WebGLState(Ms,ks,zs),Cs.scissor(Xo.copy(Jo).multiplyScalar(Wo).floor()),Cs.viewport(Zo.copy(ts).multiplyScalar(Wo).floor()),xs=new WebGLInfo(Ms),Bs=new WebGLProperties,Fs=new WebGLTextures(Ms,ks,Cs,Bs,zs,ru,xs),Zs=new WebGLAttributes(Ms,zs),bu=new WebGLGeometries(Ms,Zs,xs),Au=new WebGLObjects(Ms,bu,Zs,xs),Qs=new WebGLMorphtargets(Ms),ds=new WebGLPrograms(Co,ks,zs),cs=new WebGLMaterials(Bs),bs=new WebGLRenderLists,Ls=new WebGLRenderStates,Js=new WebGLBackground(Co,Cs,Au,So),Gs=new WebGLBufferRenderer(Ms,ks,xs,zs),fu=new WebGLIndexedBufferRenderer(Ms,ks,xs,zs),xs.programs=ds.programs,Co.capabilities=zs,Co.extensions=ks,Co.properties=Bs,Co.renderLists=bs,Co.state=Cs,Co.info=xs}eu();var Vs=new WebXRManager(Co,Ms);this.xr=Vs;var Hs=new WebGLShadowMap(Co,Au,zs.maxTextureSize);this.shadowMap=Hs,this.getContext=function(){return Ms},this.getContextAttributes=function(){return Ms.getContextAttributes()},this.forceContextLoss=function(){var fs=ks.get("WEBGL_lose_context");fs&&fs.loseContext()},this.forceContextRestore=function(){var fs=ks.get("WEBGL_lose_context");fs&&fs.restoreContext()},this.getPixelRatio=function(){return Wo},this.setPixelRatio=function(fs){fs!==void 0&&(Wo=fs,this.setSize(Go,Vo,!1))},this.getSize=function(fs){return fs===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),fs=new Vector2),fs.set(Go,Vo)},this.setSize=function(fs,Ns,Ts){if(Vs.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Go=fs,Vo=Ns,_o.width=Math.floor(fs*Wo),_o.height=Math.floor(Ns*Wo),Ts!==!1&&(_o.style.width=fs+"px",_o.style.height=Ns+"px"),this.setViewport(0,0,fs,Ns)},this.getDrawingBufferSize=function(fs){return fs===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),fs=new Vector2),fs.set(Go*Wo,Vo*Wo).floor()},this.setDrawingBufferSize=function(fs,Ns,Ts){Go=fs,Vo=Ns,Wo=Ts,_o.width=Math.floor(fs*Ts),_o.height=Math.floor(Ns*Ts),this.setViewport(0,0,fs,Ns)},this.getCurrentViewport=function(fs){return fs===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),fs=new Vector4),fs.copy(Zo)},this.getViewport=function(fs){return fs.copy(ts)},this.setViewport=function(fs,Ns,Ts,Ps){fs.isVector4?ts.set(fs.x,fs.y,fs.z,fs.w):ts.set(fs,Ns,Ts,Ps),Cs.viewport(Zo.copy(ts).multiplyScalar(Wo).floor())},this.getScissor=function(fs){return fs.copy(Jo)},this.setScissor=function(fs,Ns,Ts,Ps){fs.isVector4?Jo.set(fs.x,fs.y,fs.z,fs.w):Jo.set(fs,Ns,Ts,Ps),Cs.scissor(Xo.copy(Jo).multiplyScalar(Wo).floor())},this.getScissorTest=function(){return rs},this.setScissorTest=function(fs){Cs.setScissorTest(rs=fs)},this.setOpaqueSort=function(fs){Yo=fs},this.setTransparentSort=function(fs){Ko=fs},this.getClearColor=function(){return Js.getClearColor()},this.setClearColor=function(){Js.setClearColor.apply(Js,arguments)},this.getClearAlpha=function(){return Js.getClearAlpha()},this.setClearAlpha=function(){Js.setClearAlpha.apply(Js,arguments)},this.clear=function(fs,Ns,Ts){var Ps=0;(fs===void 0||fs)&&(Ps|=16384),(Ns===void 0||Ns)&&(Ps|=256),(Ts===void 0||Ts)&&(Ps|=1024),Ms.clear(Ps)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_o.removeEventListener("webglcontextlost",Ys,!1),_o.removeEventListener("webglcontextrestored",tu,!1),bs.dispose(),Ls.dispose(),Bs.dispose(),Au.dispose(),Vs.dispose(),ju.stop()};function Ys(fs){fs.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ro=!0}function tu(){console.log("THREE.WebGLRenderer: Context Restored."),Ro=!1,eu()}function ys(fs){var Ns=fs.target;Ns.removeEventListener("dispose",ys),Xs(Ns)}function Xs(fs){Ks(fs),Bs.remove(fs)}function Ks(fs){var Ns=Bs.get(fs).program;fs.program=void 0,Ns!==void 0&&ds.releaseProgram(Ns)}function du(fs,Ns){fs.render(function(Ts){Co.renderBufferImmediate(Ts,Ns)})}this.renderBufferImmediate=function(fs,Ns){Cs.initAttributes();var Ts=Bs.get(fs);fs.hasPositions&&!Ts.position&&(Ts.position=Ms.createBuffer()),fs.hasNormals&&!Ts.normal&&(Ts.normal=Ms.createBuffer()),fs.hasUvs&&!Ts.uv&&(Ts.uv=Ms.createBuffer()),fs.hasColors&&!Ts.color&&(Ts.color=Ms.createBuffer());var Ps=Ns.getAttributes();fs.hasPositions&&(Ms.bindBuffer(34962,Ts.position),Ms.bufferData(34962,fs.positionArray,35048),Cs.enableAttribute(Ps.position),Ms.vertexAttribPointer(Ps.position,3,5126,!1,0,0)),fs.hasNormals&&(Ms.bindBuffer(34962,Ts.normal),Ms.bufferData(34962,fs.normalArray,35048),Cs.enableAttribute(Ps.normal),Ms.vertexAttribPointer(Ps.normal,3,5126,!1,0,0)),fs.hasUvs&&(Ms.bindBuffer(34962,Ts.uv),Ms.bufferData(34962,fs.uvArray,35048),Cs.enableAttribute(Ps.uv),Ms.vertexAttribPointer(Ps.uv,2,5126,!1,0,0)),fs.hasColors&&(Ms.bindBuffer(34962,Ts.color),Ms.bufferData(34962,fs.colorArray,35048),Cs.enableAttribute(Ps.color),Ms.vertexAttribPointer(Ps.color,3,5126,!1,0,0)),Cs.disableUnusedAttributes(),Ms.drawArrays(4,0,fs.count),fs.count=0};var qs=new Scene;this.renderBufferDirect=function(fs,Ns,Ts,Ps,Ws,vu){Ns===null&&(Ns=qs);var iu=Ws.isMesh&&Ws.matrixWorld.determinant()<0,ou=ku(fs,Ns,Ps,Ws);Cs.setMaterial(Ps,iu);var pu=!1;(Uo.geometry!==Ts.id||Uo.program!==ou.id||Uo.wireframe!==(Ps.wireframe===!0))&&(Uo.geometry=Ts.id,Uo.program=ou.id,Uo.wireframe=Ps.wireframe===!0,pu=!0),(Ps.morphTargets||Ps.morphNormals)&&(Qs.update(Ws,Ts,Ps,ou),pu=!0),Ws.isInstancedMesh===!0&&(pu=!0);var mu=Ts.index,Tu=Ts.attributes.position;if(mu===null){if(Tu===void 0||Tu.count===0)return}else if(mu.count===0)return;var as=1;Ps.wireframe===!0&&(mu=bu.getWireframeAttribute(Ts),as=2);var hs,gs=Gs;mu!==null&&(hs=Zs.get(mu),gs=fu,gs.setIndex(hs)),pu&&(uu(Ws,Ts,Ps,ou),mu!==null&&Ms.bindBuffer(34963,hs.buffer));var _s=mu!==null?mu.count:Tu.count,Rs=Ts.drawRange.start*as,cu=Ts.drawRange.count*as,lu=vu!==null?vu.start*as:0,Iu=vu!==null?vu.count*as:1/0,su=Math.max(Rs,lu),Cu=Math.min(_s,Rs+cu,lu+Iu)-1,Qu=Math.max(0,Cu-su+1);if(Qu!==0){if(Ws.isMesh)Ps.wireframe===!0?(Cs.setLineWidth(Ps.wireframeLinewidth*Es()),gs.setMode(1)):gs.setMode(4);else if(Ws.isLine){var Zu=Ps.linewidth;Zu===void 0&&(Zu=1),Cs.setLineWidth(Zu*Es()),Ws.isLineSegments?gs.setMode(1):Ws.isLineLoop?gs.setMode(2):gs.setMode(3)}else Ws.isPoints?gs.setMode(0):Ws.isSprite&&gs.setMode(4);if(Ws.isInstancedMesh)gs.renderInstances(Ts,su,Qu,Ws.count);else if(Ts.isInstancedBufferGeometry){var tl=Math.min(Ts.instanceCount,Ts._maxInstanceCount);gs.renderInstances(Ts,su,Qu,tl)}else gs.render(su,Qu)}};function uu(fs,Ns,Ts,Ps){if(!(zs.isWebGL2===!1&&(fs.isInstancedMesh||Ns.isInstancedBufferGeometry)&&ks.get("ANGLE_instanced_arrays")===null)){Cs.initAttributes();var Ws=Ns.attributes,vu=Ps.getAttributes(),iu=Ts.defaultAttributeValues;for(var ou in vu){var pu=vu[ou];if(pu>=0){var mu=Ws[ou];if(mu!==void 0){var Tu=mu.normalized,as=mu.itemSize,hs=Zs.get(mu);if(hs===void 0)continue;var gs=hs.buffer,_s=hs.type,Rs=hs.bytesPerElement;if(mu.isInterleavedBufferAttribute){var cu=mu.data,lu=cu.stride,Iu=mu.offset;cu&&cu.isInstancedInterleavedBuffer?(Cs.enableAttributeAndDivisor(pu,cu.meshPerAttribute),Ns._maxInstanceCount===void 0&&(Ns._maxInstanceCount=cu.meshPerAttribute*cu.count)):Cs.enableAttribute(pu),Ms.bindBuffer(34962,gs),Cs.vertexAttribPointer(pu,as,_s,Tu,lu*Rs,Iu*Rs)}else mu.isInstancedBufferAttribute?(Cs.enableAttributeAndDivisor(pu,mu.meshPerAttribute),Ns._maxInstanceCount===void 0&&(Ns._maxInstanceCount=mu.meshPerAttribute*mu.count)):Cs.enableAttribute(pu),Ms.bindBuffer(34962,gs),Cs.vertexAttribPointer(pu,as,_s,Tu,0,0)}else if(ou==="instanceMatrix"){var hs=Zs.get(fs.instanceMatrix);if(hs===void 0)continue;var gs=hs.buffer,_s=hs.type;Cs.enableAttributeAndDivisor(pu+0,1),Cs.enableAttributeAndDivisor(pu+1,1),Cs.enableAttributeAndDivisor(pu+2,1),Cs.enableAttributeAndDivisor(pu+3,1),Ms.bindBuffer(34962,gs),Ms.vertexAttribPointer(pu+0,4,_s,!1,64,0),Ms.vertexAttribPointer(pu+1,4,_s,!1,64,16),Ms.vertexAttribPointer(pu+2,4,_s,!1,64,32),Ms.vertexAttribPointer(pu+3,4,_s,!1,64,48)}else if(iu!==void 0){var su=iu[ou];if(su!==void 0)switch(su.length){case 2:Ms.vertexAttrib2fv(pu,su);break;case 3:Ms.vertexAttrib3fv(pu,su);break;case 4:Ms.vertexAttrib4fv(pu,su);break;default:Ms.vertexAttrib1fv(pu,su)}}}}Cs.disableUnusedAttributes()}}this.compile=function(fs,Ns){Lo=Ls.get(fs,Ns),Lo.init(),fs.traverse(function(Ps){Ps.isLight&&(Lo.pushLight(Ps),Ps.castShadow&&Lo.pushShadow(Ps))}),Lo.setupLights(Ns);const Ts={};fs.traverse(function(Ps){let Ws=Ps.material;if(Ws)if(Array.isArray(Ws))for(let vu=0;vu<Ws.length;vu++){let iu=Ws[vu];iu.uuid in Ts||(Pu(iu,fs,Ps),Ts[iu.uuid]=!0)}else Ws.uuid in Ts||(Pu(Ws,fs,Ps),Ts[Ws.uuid]=!0)})};var xu=null;function Eu(fs){Vs.isPresenting||xu&&xu(fs)}var ju=new WebGLAnimation;ju.setAnimationLoop(Eu),typeof window!="undefined"&&ju.setContext(window),this.setAnimationLoop=function(fs){xu=fs,Vs.setAnimationLoop(fs),ju.start()},this.render=function(fs,Ns){var Ts,Ps;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Ts=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Ps=arguments[3]),!(Ns&&Ns.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Ro){Uo.geometry=null,Uo.program=null,Uo.wireframe=!1,ko=-1,Qo=null,fs.autoUpdate===!0&&fs.updateMatrixWorld(),Ns.parent===null&&Ns.updateMatrixWorld(),Vs.enabled&&Vs.isPresenting&&(Ns=Vs.getCamera(Ns)),fs.onBeforeRender(Co,fs,Ns,Ts||Po),Lo=Ls.get(fs,Ns),Lo.init(),As.multiplyMatrices(Ns.projectionMatrix,Ns.matrixWorldInverse),ls.setFromProjectionMatrix(As),ms=this.localClippingEnabled,us=ss.init(this.clippingPlanes,ms,Ns),Oo=bs.get(fs,Ns),Oo.init(),au(fs,Ns,0,Co.sortObjects),Oo.finish(),Co.sortObjects===!0&&Oo.sort(Yo,Ko),us&&ss.beginShadows();var Ws=Lo.state.shadowsArray;Hs.render(Ws,fs,Ns),Lo.setupLights(Ns),us&&ss.endShadows(),this.info.autoReset&&this.info.reset(),Ts!==void 0&&this.setRenderTarget(Ts),Js.render(Oo,fs,Ns,Ps);var vu=Oo.opaque,iu=Oo.transparent;if(fs.overrideMaterial){var ou=fs.overrideMaterial;vu.length&&Lu(vu,fs,Ns,ou),iu.length&&Lu(iu,fs,Ns,ou)}else vu.length&&Lu(vu,fs,Ns),iu.length&&Lu(iu,fs,Ns);fs.onAfterRender(Co,fs,Ns),Po!==null&&(Fs.updateRenderTargetMipmap(Po),Fs.updateMultisampleRenderTarget(Po)),Cs.buffers.depth.setTest(!0),Cs.buffers.depth.setMask(!0),Cs.buffers.color.setMask(!0),Cs.setPolygonOffset(!1),Oo=null,Lo=null}};function au(fs,Ns,Ts,Ps){if(fs.visible!==!1){var Ws=fs.layers.test(Ns.layers);if(Ws){if(fs.isGroup)Ts=fs.renderOrder;else if(fs.isLOD)fs.autoUpdate===!0&&fs.update(Ns);else if(fs.isLight)Lo.pushLight(fs),fs.castShadow&&Lo.pushShadow(fs);else if(fs.isSprite){if(!fs.frustumCulled||ls.intersectsSprite(fs)){Ps&&Os.setFromMatrixPosition(fs.matrixWorld).applyMatrix4(As);var vu=Au.update(fs),iu=fs.material;iu.visible&&Oo.push(fs,vu,iu,Ts,Os.z,null)}}else if(fs.isImmediateRenderObject)Ps&&Os.setFromMatrixPosition(fs.matrixWorld).applyMatrix4(As),Oo.push(fs,null,fs.material,Ts,Os.z,null);else if((fs.isMesh||fs.isLine||fs.isPoints)&&(fs.isSkinnedMesh&&fs.skeleton.frame!==xs.render.frame&&(fs.skeleton.update(),fs.skeleton.frame=xs.render.frame),!fs.frustumCulled||ls.intersectsObject(fs))){Ps&&Os.setFromMatrixPosition(fs.matrixWorld).applyMatrix4(As);var vu=Au.update(fs),iu=fs.material;if(Array.isArray(iu))for(var ou=vu.groups,pu=0,mu=ou.length;pu<mu;pu++){var Tu=ou[pu],as=iu[Tu.materialIndex];as&&as.visible&&Oo.push(fs,vu,as,Ts,Os.z,Tu)}else iu.visible&&Oo.push(fs,vu,iu,Ts,Os.z,null)}}for(var hs=fs.children,pu=0,mu=hs.length;pu<mu;pu++)au(hs[pu],Ns,Ts,Ps)}}function Lu(fs,Ns,Ts,Ps){for(var Ws=0,vu=fs.length;Ws<vu;Ws++){var iu=fs[Ws],ou=iu.object,pu=iu.geometry,mu=Ps===void 0?iu.material:Ps,Tu=iu.group;if(Ts.isArrayCamera){qo=Ts;for(var as=Ts.cameras,hs=0,gs=as.length;hs<gs;hs++){var _s=as[hs];ou.layers.test(_s.layers)&&(Cs.viewport(Zo.copy(_s.viewport)),Lo.setupLights(_s),zu(ou,Ns,_s,pu,mu,Tu))}}else qo=null,zu(ou,Ns,Ts,pu,mu,Tu)}}function zu(fs,Ns,Ts,Ps,Ws,vu){if(fs.onBeforeRender(Co,Ns,Ts,Ps,Ws,vu),Lo=Ls.get(Ns,qo||Ts),fs.modelViewMatrix.multiplyMatrices(Ts.matrixWorldInverse,fs.matrixWorld),fs.normalMatrix.getNormalMatrix(fs.modelViewMatrix),fs.isImmediateRenderObject){var iu=ku(Ts,Ns,Ws,fs);Cs.setMaterial(Ws),Uo.geometry=null,Uo.program=null,Uo.wireframe=!1,du(fs,iu)}else Co.renderBufferDirect(Ts,Ns,Ps,Ws,fs,vu);fs.onAfterRender(Co,Ns,Ts,Ps,Ws,vu),Lo=Ls.get(Ns,qo||Ts)}function Pu(fs,Ns,Ts){var Ps=Bs.get(fs),Ws=Lo.state.lights,vu=Lo.state.shadowsArray,iu=Ws.state.version,ou=ds.getParameters(fs,Ws.state,vu,Ns,ss.numPlanes,ss.numIntersection,Ts),pu=ds.getProgramCacheKey(ou),mu=Ps.program,Tu=!0;if(mu===void 0)fs.addEventListener("dispose",ys);else if(mu.cacheKey!==pu)Ks(fs);else if(Ps.lightsStateVersion!==iu)Ps.lightsStateVersion=iu,Tu=!1;else{if(ou.shaderID!==void 0)return;Tu=!1}Tu&&(mu=ds.acquireProgram(ou,pu),Ps.program=mu,Ps.uniforms=ou.uniforms,Ps.outputEncoding=ou.outputEncoding,fs.program=mu);var as=mu.getAttributes();if(fs.morphTargets){fs.numSupportedMorphTargets=0;for(var hs=0;hs<Co.maxMorphTargets;hs++)as["morphTarget"+hs]>=0&&fs.numSupportedMorphTargets++}if(fs.morphNormals){fs.numSupportedMorphNormals=0;for(var hs=0;hs<Co.maxMorphNormals;hs++)as["morphNormal"+hs]>=0&&fs.numSupportedMorphNormals++}var gs=Ps.uniforms;(!fs.isShaderMaterial&&!fs.isRawShaderMaterial||fs.clipping===!0)&&(Ps.numClippingPlanes=ss.numPlanes,Ps.numIntersection=ss.numIntersection,gs.clippingPlanes=ss.uniform),Ps.environment=fs.isMeshStandardMaterial?Ns.environment:null,Ps.fog=Ns.fog,Ps.needsLights=Xu(fs),Ps.lightsStateVersion=iu,Ps.needsLights&&(gs.ambientLightColor.value=Ws.state.ambient,gs.lightProbe.value=Ws.state.probe,gs.directionalLights.value=Ws.state.directional,gs.directionalLightShadows.value=Ws.state.directionalShadow,gs.spotLights.value=Ws.state.spot,gs.spotLightShadows.value=Ws.state.spotShadow,gs.rectAreaLights.value=Ws.state.rectArea,gs.pointLights.value=Ws.state.point,gs.pointLightShadows.value=Ws.state.pointShadow,gs.hemisphereLights.value=Ws.state.hemi,gs.directionalShadowMap.value=Ws.state.directionalShadowMap,gs.directionalShadowMatrix.value=Ws.state.directionalShadowMatrix,gs.spotShadowMap.value=Ws.state.spotShadowMap,gs.spotShadowMatrix.value=Ws.state.spotShadowMatrix,gs.pointShadowMap.value=Ws.state.pointShadowMap,gs.pointShadowMatrix.value=Ws.state.pointShadowMatrix);var _s=Ps.program.getUniforms(),Rs=WebGLUniforms.seqWithValue(_s.seq,gs);Ps.uniformsList=Rs}function ku(fs,Ns,Ts,Ps){Fs.resetTextureUnits();var Ws=Ns.fog,vu=Ts.isMeshStandardMaterial?Ns.environment:null,iu=Po===null?Co.outputEncoding:Po.texture.encoding,ou=Bs.get(Ts),pu=Lo.state.lights;if(us&&(ms||fs!==Qo)){var mu=fs===Qo&&Ts.id===ko;ss.setState(Ts.clippingPlanes,Ts.clipIntersection,Ts.clipShadows,fs,ou,mu)}Ts.version===ou.__version?(ou.program===void 0||Ts.fog&&ou.fog!==Ws||ou.environment!==vu||ou.needsLights&&ou.lightsStateVersion!==pu.state.version||ou.numClippingPlanes!==void 0&&(ou.numClippingPlanes!==ss.numPlanes||ou.numIntersection!==ss.numIntersection)||ou.outputEncoding!==iu)&&Pu(Ts,Ns,Ps):(Pu(Ts,Ns,Ps),ou.__version=Ts.version);var Tu=!1,as=!1,hs=!1,gs=ou.program,_s=gs.getUniforms(),Rs=ou.uniforms;if(Cs.useProgram(gs.program)&&(Tu=!0,as=!0,hs=!0),Ts.id!==ko&&(ko=Ts.id,as=!0),Tu||Qo!==fs){if(_s.setValue(Ms,"projectionMatrix",fs.projectionMatrix),zs.logarithmicDepthBuffer&&_s.setValue(Ms,"logDepthBufFC",2/(Math.log(fs.far+1)/Math.LN2)),Qo!==fs&&(Qo=fs,as=!0,hs=!0),Ts.isShaderMaterial||Ts.isMeshPhongMaterial||Ts.isMeshToonMaterial||Ts.isMeshStandardMaterial||Ts.envMap){var cu=_s.map.cameraPosition;cu!==void 0&&cu.setValue(Ms,Os.setFromMatrixPosition(fs.matrixWorld))}(Ts.isMeshPhongMaterial||Ts.isMeshToonMaterial||Ts.isMeshLambertMaterial||Ts.isMeshBasicMaterial||Ts.isMeshStandardMaterial||Ts.isShaderMaterial)&&_s.setValue(Ms,"isOrthographic",fs.isOrthographicCamera===!0),(Ts.isMeshPhongMaterial||Ts.isMeshToonMaterial||Ts.isMeshLambertMaterial||Ts.isMeshBasicMaterial||Ts.isMeshStandardMaterial||Ts.isShaderMaterial||Ts.skinning)&&_s.setValue(Ms,"viewMatrix",fs.matrixWorldInverse)}if(Ts.skinning){_s.setOptional(Ms,Ps,"bindMatrix"),_s.setOptional(Ms,Ps,"bindMatrixInverse");var lu=Ps.skeleton;if(lu){var Iu=lu.bones;if(zs.floatVertexTextures){if(lu.boneTexture===void 0){var su=Math.sqrt(Iu.length*4);su=MathUtils.ceilPowerOfTwo(su),su=Math.max(su,4);var Cu=new Float32Array(su*su*4);Cu.set(lu.boneMatrices);var Qu=new DataTexture(Cu,su,su,RGBAFormat,FloatType);lu.boneMatrices=Cu,lu.boneTexture=Qu,lu.boneTextureSize=su}_s.setValue(Ms,"boneTexture",lu.boneTexture,Fs),_s.setValue(Ms,"boneTextureSize",lu.boneTextureSize)}else _s.setOptional(Ms,lu,"boneMatrices")}}return(as||ou.receiveShadow!==Ps.receiveShadow)&&(ou.receiveShadow=Ps.receiveShadow,_s.setValue(Ms,"receiveShadow",Ps.receiveShadow)),as&&(_s.setValue(Ms,"toneMappingExposure",Co.toneMappingExposure),_s.setValue(Ms,"toneMappingWhitePoint",Co.toneMappingWhitePoint),ou.needsLights&&Du(Rs,hs),Ws&&Ts.fog&&cs.refreshFogUniforms(Rs,Ws),cs.refreshMaterialUniforms(Rs,Ts,vu,Wo,Vo),Rs.ltc_1!==void 0&&(Rs.ltc_1.value=UniformsLib.LTC_1),Rs.ltc_2!==void 0&&(Rs.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Ms,ou.uniformsList,Rs,Fs)),Ts.isShaderMaterial&&Ts.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ms,ou.uniformsList,Rs,Fs),Ts.uniformsNeedUpdate=!1),Ts.isSpriteMaterial&&_s.setValue(Ms,"center",Ps.center),_s.setValue(Ms,"modelViewMatrix",Ps.modelViewMatrix),_s.setValue(Ms,"normalMatrix",Ps.normalMatrix),_s.setValue(Ms,"modelMatrix",Ps.matrixWorld),gs}function Du(fs,Ns){fs.ambientLightColor.needsUpdate=Ns,fs.lightProbe.needsUpdate=Ns,fs.directionalLights.needsUpdate=Ns,fs.directionalLightShadows.needsUpdate=Ns,fs.pointLights.needsUpdate=Ns,fs.pointLightShadows.needsUpdate=Ns,fs.spotLights.needsUpdate=Ns,fs.spotLightShadows.needsUpdate=Ns,fs.rectAreaLights.needsUpdate=Ns,fs.hemisphereLights.needsUpdate=Ns}function Xu(fs){return fs.isMeshLambertMaterial||fs.isMeshToonMaterial||fs.isMeshPhongMaterial||fs.isMeshStandardMaterial||fs.isShadowMaterial||fs.isShaderMaterial&&fs.lights===!0}this.setFramebuffer=function(fs){jo!==fs&&Po===null&&Ms.bindFramebuffer(36160,fs),jo=fs},this.getActiveCubeFace=function(){return zo},this.getActiveMipmapLevel=function(){return Io},this.getRenderTarget=function(){return Po},this.setRenderTarget=function(fs,Ns,Ts){Po=fs,zo=Ns,Io=Ts,fs&&Bs.get(fs).__webglFramebuffer===void 0&&Fs.setupRenderTarget(fs);var Ps=jo,Ws=!1;if(fs){var vu=Bs.get(fs).__webglFramebuffer;fs.isWebGLCubeRenderTarget?(Ps=vu[Ns||0],Ws=!0):fs.isWebGLMultisampleRenderTarget?Ps=Bs.get(fs).__webglMultisampledFramebuffer:Ps=vu,Zo.copy(fs.viewport),Xo.copy(fs.scissor),Fo=fs.scissorTest}else Zo.copy(ts).multiplyScalar(Wo).floor(),Xo.copy(Jo).multiplyScalar(Wo).floor(),Fo=rs;if(Bo!==Ps&&(Ms.bindFramebuffer(36160,Ps),Bo=Ps),Cs.viewport(Zo),Cs.scissor(Xo),Cs.setScissorTest(Fo),Ws){var iu=Bs.get(fs.texture);Ms.framebufferTexture2D(36160,36064,34069+(Ns||0),iu.__webglTexture,Ts||0)}},this.readRenderTargetPixels=function(fs,Ns,Ts,Ps,Ws,vu,iu){if(!(fs&&fs.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var ou=Bs.get(fs).__webglFramebuffer;if(fs.isWebGLCubeRenderTarget&&iu!==void 0&&(ou=ou[iu]),ou){var pu=!1;ou!==Bo&&(Ms.bindFramebuffer(36160,ou),pu=!0);try{var mu=fs.texture,Tu=mu.format,as=mu.type;if(Tu!==RGBAFormat&&ru.convert(Tu)!==Ms.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(as!==UnsignedByteType&&ru.convert(as)!==Ms.getParameter(35738)&&!(as===FloatType&&(zs.isWebGL2||ks.get("OES_texture_float")||ks.get("WEBGL_color_buffer_float")))&&!(as===HalfFloatType&&(zs.isWebGL2?ks.get("EXT_color_buffer_float"):ks.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ms.checkFramebufferStatus(36160)===36053?Ns>=0&&Ns<=fs.width-Ps&&Ts>=0&&Ts<=fs.height-Ws&&Ms.readPixels(Ns,Ts,Ps,Ws,ru.convert(Tu),ru.convert(as),vu):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{pu&&Ms.bindFramebuffer(36160,Bo)}}},this.copyFramebufferToTexture=function(fs,Ns,Ts){Ts===void 0&&(Ts=0);var Ps=Math.pow(2,-Ts),Ws=Math.floor(Ns.image.width*Ps),vu=Math.floor(Ns.image.height*Ps),iu=ru.convert(Ns.format);Fs.setTexture2D(Ns,0),Ms.copyTexImage2D(3553,Ts,iu,fs.x,fs.y,Ws,vu,0),Cs.unbindTexture()},this.copyTextureToTexture=function(fs,Ns,Ts,Ps){Ps===void 0&&(Ps=0);var Ws=Ns.image.width,vu=Ns.image.height,iu=ru.convert(Ts.format),ou=ru.convert(Ts.type);Fs.setTexture2D(Ts,0),Ns.isDataTexture?Ms.texSubImage2D(3553,Ps,fs.x,fs.y,Ws,vu,iu,ou,Ns.image.data):Ns.isCompressedTexture?Ms.compressedTexSubImage2D(3553,Ps,fs.x,fs.y,Ns.mipmaps[0].width,Ns.mipmaps[0].height,iu,Ns.mipmaps[0].data):Ms.texSubImage2D(3553,Ps,fs.x,fs.y,iu,ou,Ns.image),Ps===0&&Ts.generateMipmaps&&Ms.generateMipmap(3553),Cs.unbindTexture()},this.initTexture=function(fs){Fs.setTexture2D(fs,0),Cs.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(va,_o){this.name="",this.color=new Color(va),this.density=_o!==void 0?_o:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(va,_o,xo){this.name="",this.color=new Color(va),this.near=_o!==void 0?_o:1,this.far=xo!==void 0?xo:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(va,_o){this.array=va,this.stride=_o,this.count=va!==void 0?va.length/_o:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(va){va===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(va){return this.usage=va,this},copy:function(va){return this.array=new va.array.constructor(va.array),this.count=va.count,this.stride=va.stride,this.usage=va.usage,this},copyAt:function(va,_o,xo){va*=this.stride,xo*=_o.stride;for(var bo=0,wo=this.stride;bo<wo;bo++)this.array[va+bo]=_o.array[xo+bo];return this},set:function(va,_o){return _o===void 0&&(_o=0),this.array.set(va,_o),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(va){return this.onUploadCallback=va,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(va,_o,xo,bo){this.name="",this.data=va,this.itemSize=_o,this.offset=xo,this.normalized=bo===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(va){for(var _o=0,xo=this.data.count;_o<xo;_o++)_vector$6.x=this.getX(_o),_vector$6.y=this.getY(_o),_vector$6.z=this.getZ(_o),_vector$6.applyMatrix4(va),this.setXYZ(_o,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(va,_o){return this.data.array[va*this.data.stride+this.offset]=_o,this},setY:function(va,_o){return this.data.array[va*this.data.stride+this.offset+1]=_o,this},setZ:function(va,_o){return this.data.array[va*this.data.stride+this.offset+2]=_o,this},setW:function(va,_o){return this.data.array[va*this.data.stride+this.offset+3]=_o,this},getX:function(va){return this.data.array[va*this.data.stride+this.offset]},getY:function(va){return this.data.array[va*this.data.stride+this.offset+1]},getZ:function(va){return this.data.array[va*this.data.stride+this.offset+2]},getW:function(va){return this.data.array[va*this.data.stride+this.offset+3]},setXY:function(va,_o,xo){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_o,this.data.array[va+1]=xo,this},setXYZ:function(va,_o,xo,bo){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_o,this.data.array[va+1]=xo,this.data.array[va+2]=bo,this},setXYZW:function(va,_o,xo,bo,wo){return va=va*this.data.stride+this.offset,this.data.array[va+0]=_o,this.data.array[va+1]=xo,this.data.array[va+2]=bo,this.data.array[va+3]=wo,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var va=[],_o=0;_o<this.count;_o++)for(var xo=_o*this.data.stride+this.offset,bo=0;bo<this.itemSize;bo++)va.push(this.data.array[xo+bo]);return new BufferAttribute(new this.array.constructor(va),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var va=[],_o=0;_o<this.count;_o++)for(var xo=_o*this.data.stride+this.offset,bo=0;bo<this.itemSize;bo++)va.push(this.data.array[xo+bo]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:va,normalized:this.normalized}}});function SpriteMaterial(va){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(va)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.alphaMap=va.alphaMap,this.rotation=va.rotation,this.sizeAttenuation=va.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(va){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var _o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),xo=new InterleavedBuffer(_o,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(xo,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(xo,2,3,!1))}this.geometry=_geometry,this.material=va!==void 0?va:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(va,_o){va.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(va.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(va.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),va.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var xo=this.material.rotation,bo,wo;xo!==0&&(wo=Math.cos(xo),bo=Math.sin(xo));var Eo=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Eo,_worldScale,bo,wo),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Eo,_worldScale,bo,wo),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Eo,_worldScale,bo,wo),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var To=va.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(To===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Eo,_worldScale,bo,wo),_uvB$1.set(0,1),To=va.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),To===null))){var So=va.ray.origin.distanceTo(_intersectPoint);So<va.near||So>va.far||_o.push({distance:So,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(va){return Object3D.prototype.copy.call(this,va),va.center!==void 0&&this.center.copy(va.center),this}});function transformVertex(va,_o,xo,bo,wo,Eo){_alignedPosition.subVectors(va,xo).addScalar(.5).multiply(bo),wo!==void 0?(_rotatedPosition.x=Eo*_alignedPosition.x-wo*_alignedPosition.y,_rotatedPosition.y=wo*_alignedPosition.x+Eo*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),va.copy(_o),va.x+=_rotatedPosition.x,va.y+=_rotatedPosition.y,va.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(va){Object3D.prototype.copy.call(this,va,!1);for(var _o=va.levels,xo=0,bo=_o.length;xo<bo;xo++){var wo=_o[xo];this.addLevel(wo.object.clone(),wo.distance)}return this.autoUpdate=va.autoUpdate,this},addLevel:function(va,_o){_o===void 0&&(_o=0),_o=Math.abs(_o);for(var xo=this.levels,bo=0;bo<xo.length&&!(_o<xo[bo].distance);bo++);return xo.splice(bo,0,{distance:_o,object:va}),this.add(va),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(va){var _o=this.levels;if(_o.length>0){for(var xo=1,bo=_o.length;xo<bo&&!(va<_o[xo].distance);xo++);return _o[xo-1].object}return null},raycast:function(va,_o){var xo=this.levels;if(xo.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var bo=va.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(bo).raycast(va,_o)}},update:function(va){var _o=this.levels;if(_o.length>1){_v1$4.setFromMatrixPosition(va.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var xo=_v1$4.distanceTo(_v2$2)/va.zoom;_o[0].object.visible=!0;for(var bo=1,wo=_o.length;bo<wo&&xo>=_o[bo].distance;bo++)_o[bo-1].object.visible=!1,_o[bo].object.visible=!0;for(this._currentLevel=bo-1;bo<wo;bo++)_o[bo].object.visible=!1}},toJSON:function(va){var _o=Object3D.prototype.toJSON.call(this,va);this.autoUpdate===!1&&(_o.object.autoUpdate=!1),_o.object.levels=[];for(var xo=this.levels,bo=0,wo=xo.length;bo<wo;bo++){var Eo=xo[bo];_o.object.levels.push({object:Eo.object.uuid,distance:Eo.distance})}return _o}});function SkinnedMesh(va,_o){va&&va.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,va,_o),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(va,_o){this.skeleton=va,_o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),_o=this.matrixWorld),this.bindMatrix.copy(_o),this.bindMatrixInverse.getInverse(_o)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var va=new Vector4,_o=this.geometry.attributes.skinWeight,xo=0,bo=_o.count;xo<bo;xo++){va.x=_o.getX(xo),va.y=_o.getY(xo),va.z=_o.getZ(xo),va.w=_o.getW(xo);var wo=1/va.manhattanLength();wo!==1/0?va.multiplyScalar(wo):va.set(1,0,0,0),_o.setXYZW(xo,va.x,va.y,va.z,va.w)}},updateMatrixWorld:function(va){Mesh.prototype.updateMatrixWorld.call(this,va),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var va=new Vector3,_o=new Vector4,xo=new Vector4,bo=new Vector3,wo=new Matrix4;return function(Eo,To){var So=this.skeleton,$o=this.geometry;_o.fromBufferAttribute($o.attributes.skinIndex,Eo),xo.fromBufferAttribute($o.attributes.skinWeight,Eo),va.fromBufferAttribute($o.attributes.position,Eo).applyMatrix4(this.bindMatrix),To.set(0,0,0);for(var Do=0;Do<4;Do++){var No=xo.getComponent(Do);if(No!==0){var Oo=_o.getComponent(Do);wo.multiplyMatrices(So.bones[Oo].matrixWorld,So.boneInverses[Oo]),To.addScaledVector(bo.copy(va).applyMatrix4(wo),No)}}return To.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(va,_o){if(va=va||[],this.bones=va.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,_o===void 0)this.calculateInverses();else if(this.bones.length===_o.length)this.boneInverses=_o.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var xo=0,bo=this.bones.length;xo<bo;xo++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var va=0,_o=this.bones.length;va<_o;va++){var xo=new Matrix4;this.bones[va]&&xo.getInverse(this.bones[va].matrixWorld),this.boneInverses.push(xo)}},pose:function(){var va,_o,xo;for(_o=0,xo=this.bones.length;_o<xo;_o++)va=this.bones[_o],va&&va.matrixWorld.getInverse(this.boneInverses[_o]);for(_o=0,xo=this.bones.length;_o<xo;_o++)va=this.bones[_o],va&&(va.parent&&va.parent.isBone?(va.matrix.getInverse(va.parent.matrixWorld),va.matrix.multiply(va.matrixWorld)):va.matrix.copy(va.matrixWorld),va.matrix.decompose(va.position,va.quaternion,va.scale))},update:function(){for(var va=this.bones,_o=this.boneInverses,xo=this.boneMatrices,bo=this.boneTexture,wo=0,Eo=va.length;wo<Eo;wo++){var To=va[wo]?va[wo].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(To,_o[wo]),_offsetMatrix.toArray(xo,wo*16)}bo!==void 0&&(bo.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(va){for(var _o=0,xo=this.bones.length;_o<xo;_o++){var bo=this.bones[_o];if(bo.name===va)return bo}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(va,_o,xo){Mesh.call(this,va,_o),this.instanceMatrix=new BufferAttribute(new Float32Array(xo*16),16),this.count=xo,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(va,_o){_o.fromArray(this.instanceMatrix.array,va*16)},raycast:function(va,_o){var xo=this.matrixWorld,bo=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var wo=0;wo<bo;wo++){this.getMatrixAt(wo,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(xo,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(va,_instanceIntersects);for(var Eo=0,To=_instanceIntersects.length;Eo<To;Eo++){var So=_instanceIntersects[Eo];So.instanceId=wo,So.object=this,_o.push(So)}_instanceIntersects.length=0}},setMatrixAt:function(va,_o){_o.toArray(this.instanceMatrix.array,va*16)},updateMorphTargets:function(){}});function LineBasicMaterial(va){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(va)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.linewidth=va.linewidth,this.linecap=va.linecap,this.linejoin=va.linejoin,this.morphTargets=va.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line(va,_o,xo){xo===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_o!==void 0?_o:new LineBasicMaterial,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,computeLineDistances:function(){var va=this.geometry;if(va.isBufferGeometry)if(va.index===null){for(var _o=va.attributes.position,xo=[0],bo=1,wo=_o.count;bo<wo;bo++)_start.fromBufferAttribute(_o,bo-1),_end.fromBufferAttribute(_o,bo),xo[bo]=xo[bo-1],xo[bo]+=_start.distanceTo(_end);va.setAttribute("lineDistance",new Float32BufferAttribute(xo,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(va.isGeometry){var Eo=va.vertices,xo=va.lineDistances;xo[0]=0;for(var bo=1,wo=Eo.length;bo<wo;bo++)xo[bo]=xo[bo-1],xo[bo]+=Eo[bo-1].distanceTo(Eo[bo])}return this},raycast:function(va,_o){var xo=this.geometry,bo=this.matrixWorld,wo=va.params.Line.threshold;if(xo.boundingSphere===null&&xo.computeBoundingSphere(),_sphere$2.copy(xo.boundingSphere),_sphere$2.applyMatrix4(bo),_sphere$2.radius+=wo,va.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(bo),_ray$1.copy(va.ray).applyMatrix4(_inverseMatrix$1);var Eo=wo/((this.scale.x+this.scale.y+this.scale.z)/3),To=Eo*Eo,So=new Vector3,$o=new Vector3,Do=new Vector3,No=new Vector3,Oo=this&&this.isLineSegments?2:1;if(xo.isBufferGeometry){var Lo=xo.index,Co=xo.attributes,Ro=Co.position.array;if(Lo!==null)for(var jo=Lo.array,zo=0,Io=jo.length-1;zo<Io;zo+=Oo){var Po=jo[zo],Bo=jo[zo+1];So.fromArray(Ro,Po*3),$o.fromArray(Ro,Bo*3);var ko=_ray$1.distanceSqToSegment(So,$o,No,Do);if(!(ko>To)){No.applyMatrix4(this.matrixWorld);var Uo=va.ray.origin.distanceTo(No);Uo<va.near||Uo>va.far||_o.push({distance:Uo,point:Do.clone().applyMatrix4(this.matrixWorld),index:zo,face:null,faceIndex:null,object:this})}}else for(var zo=0,Io=Ro.length/3-1;zo<Io;zo+=Oo){So.fromArray(Ro,3*zo),$o.fromArray(Ro,3*zo+3);var ko=_ray$1.distanceSqToSegment(So,$o,No,Do);if(!(ko>To)){No.applyMatrix4(this.matrixWorld);var Uo=va.ray.origin.distanceTo(No);Uo<va.near||Uo>va.far||_o.push({distance:Uo,point:Do.clone().applyMatrix4(this.matrixWorld),index:zo,face:null,faceIndex:null,object:this})}}}else if(xo.isGeometry)for(var Qo=xo.vertices,qo=Qo.length,zo=0;zo<qo-1;zo+=Oo){var ko=_ray$1.distanceSqToSegment(Qo[zo],Qo[zo+1],No,Do);if(!(ko>To)){No.applyMatrix4(this.matrixWorld);var Uo=va.ray.origin.distanceTo(No);Uo<va.near||Uo>va.far||_o.push({distance:Uo,point:Do.clone().applyMatrix4(this.matrixWorld),index:zo,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var va=this.geometry,_o,xo,bo;if(va.isBufferGeometry){var wo=va.morphAttributes,Eo=Object.keys(wo);if(Eo.length>0){var To=wo[Eo[0]];if(To!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_o=0,xo=To.length;_o<xo;_o++)bo=To[_o].name||String(_o),this.morphTargetInfluences.push(0),this.morphTargetDictionary[bo]=_o}}else{var So=va.morphTargets;So!==void 0&&So.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(va,_o){Line.call(this,va,_o),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var va=this.geometry;if(va.isBufferGeometry)if(va.index===null){for(var _o=va.attributes.position,xo=[],bo=0,wo=_o.count;bo<wo;bo+=2)_start$1.fromBufferAttribute(_o,bo),_end$1.fromBufferAttribute(_o,bo+1),xo[bo]=bo===0?0:xo[bo-1],xo[bo+1]=xo[bo]+_start$1.distanceTo(_end$1);va.setAttribute("lineDistance",new Float32BufferAttribute(xo,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(va.isGeometry)for(var Eo=va.vertices,xo=va.lineDistances,bo=0,wo=Eo.length;bo<wo;bo+=2)_start$1.copy(Eo[bo]),_end$1.copy(Eo[bo+1]),xo[bo]=bo===0?0:xo[bo-1],xo[bo+1]=xo[bo]+_start$1.distanceTo(_end$1);return this}});function LineLoop(va,_o){Line.call(this,va,_o),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(va){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(va)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.alphaMap=va.alphaMap,this.size=va.size,this.sizeAttenuation=va.sizeAttenuation,this.morphTargets=va.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(va,_o){Object3D.call(this),this.type="Points",this.geometry=va!==void 0?va:new BufferGeometry,this.material=_o!==void 0?_o:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(va,_o){var xo=this.geometry,bo=this.matrixWorld,wo=va.params.Points.threshold;if(xo.boundingSphere===null&&xo.computeBoundingSphere(),_sphere$3.copy(xo.boundingSphere),_sphere$3.applyMatrix4(bo),_sphere$3.radius+=wo,va.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(bo),_ray$2.copy(va.ray).applyMatrix4(_inverseMatrix$2);var Eo=wo/((this.scale.x+this.scale.y+this.scale.z)/3),To=Eo*Eo;if(xo.isBufferGeometry){var So=xo.index,$o=xo.attributes,Do=$o.position.array;if(So!==null)for(var No=So.array,Oo=0,Lo=No.length;Oo<Lo;Oo++){var Co=No[Oo];_position$1.fromArray(Do,Co*3),testPoint(_position$1,Co,To,bo,va,_o,this)}else for(var Oo=0,Ro=Do.length/3;Oo<Ro;Oo++)_position$1.fromArray(Do,Oo*3),testPoint(_position$1,Oo,To,bo,va,_o,this)}else for(var jo=xo.vertices,Oo=0,Ro=jo.length;Oo<Ro;Oo++)testPoint(jo[Oo],Oo,To,bo,va,_o,this)}},updateMorphTargets:function(){var va=this.geometry,_o,xo,bo;if(va.isBufferGeometry){var wo=va.morphAttributes,Eo=Object.keys(wo);if(Eo.length>0){var To=wo[Eo[0]];if(To!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},_o=0,xo=To.length;_o<xo;_o++)bo=To[_o].name||String(_o),this.morphTargetInfluences.push(0),this.morphTargetDictionary[bo]=_o}}else{var So=va.morphTargets;So!==void 0&&So.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(va,_o,xo,bo,wo,Eo,To){var So=_ray$2.distanceSqToPoint(va);if(So<xo){var $o=new Vector3;_ray$2.closestPointToPoint(va,$o),$o.applyMatrix4(bo);var Do=wo.ray.origin.distanceTo($o);if(Do<wo.near||Do>wo.far)return;Eo.push({distance:Do,distanceToRay:Math.sqrt(So),point:$o,index:_o,face:null,object:To})}}function VideoTexture(va,_o,xo,bo,wo,Eo,To,So,$o){Texture.call(this,va,_o,xo,bo,wo,Eo,To,So,$o),this.format=To!==void 0?To:RGBFormat,this.minFilter=Eo!==void 0?Eo:LinearFilter,this.magFilter=wo!==void 0?wo:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var va=this.image;va.readyState>=va.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(va,_o,xo,bo,wo,Eo,To,So,$o,Do,No,Oo){Texture.call(this,null,Eo,To,So,$o,Do,bo,wo,No,Oo),this.image={width:_o,height:xo},this.mipmaps=va,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(va,_o,xo,bo,wo,Eo,To,So,$o){Texture.call(this,va,_o,xo,bo,wo,Eo,To,So,$o),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(va,_o,xo,bo,wo,Eo,To,So,$o,Do){if(Do=Do!==void 0?Do:DepthFormat,Do!==DepthFormat&&Do!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");xo===void 0&&Do===DepthFormat&&(xo=UnsignedShortType),xo===void 0&&Do===DepthStencilFormat&&(xo=UnsignedInt248Type),Texture.call(this,null,bo,wo,Eo,To,So,Do,xo,$o),this.image={width:va,height:_o},this.magFilter=To!==void 0?To:NearestFilter,this.minFilter=So!==void 0?So:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(va){BufferGeometry.call(this),this.type="WireframeGeometry";var _o=[],xo,bo,wo,Eo,To,So=[0,0],$o={},Do,No,Oo,Lo,Co=["a","b","c"],Ro;if(va&&va.isGeometry){var jo=va.faces;for(xo=0,wo=jo.length;xo<wo;xo++){var zo=jo[xo];for(bo=0;bo<3;bo++)No=zo[Co[bo]],Oo=zo[Co[(bo+1)%3]],So[0]=Math.min(No,Oo),So[1]=Math.max(No,Oo),Lo=So[0]+","+So[1],$o[Lo]===void 0&&($o[Lo]={index1:So[0],index2:So[1]})}for(Lo in $o)Do=$o[Lo],Ro=va.vertices[Do.index1],_o.push(Ro.x,Ro.y,Ro.z),Ro=va.vertices[Do.index2],_o.push(Ro.x,Ro.y,Ro.z)}else if(va&&va.isBufferGeometry){var Io,Po,Bo,ko,Uo,Qo,qo,Zo;if(Ro=new Vector3,va.index!==null){for(Io=va.attributes.position,Po=va.index,Bo=va.groups,Bo.length===0&&(Bo=[{start:0,count:Po.count,materialIndex:0}]),Eo=0,To=Bo.length;Eo<To;++Eo)for(ko=Bo[Eo],Uo=ko.start,Qo=ko.count,xo=Uo,wo=Uo+Qo;xo<wo;xo+=3)for(bo=0;bo<3;bo++)No=Po.getX(xo+bo),Oo=Po.getX(xo+(bo+1)%3),So[0]=Math.min(No,Oo),So[1]=Math.max(No,Oo),Lo=So[0]+","+So[1],$o[Lo]===void 0&&($o[Lo]={index1:So[0],index2:So[1]});for(Lo in $o)Do=$o[Lo],Ro.fromBufferAttribute(Io,Do.index1),_o.push(Ro.x,Ro.y,Ro.z),Ro.fromBufferAttribute(Io,Do.index2),_o.push(Ro.x,Ro.y,Ro.z)}else for(Io=va.attributes.position,xo=0,wo=Io.count/3;xo<wo;xo++)for(bo=0;bo<3;bo++)qo=3*xo+bo,Ro.fromBufferAttribute(Io,qo),_o.push(Ro.x,Ro.y,Ro.z),Zo=3*xo+(bo+1)%3,Ro.fromBufferAttribute(Io,Zo),_o.push(Ro.x,Ro.y,Ro.z)}this.setAttribute("position",new Float32BufferAttribute(_o,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(va,_o,xo){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:va,slices:_o,stacks:xo},this.fromBufferGeometry(new ParametricBufferGeometry(va,_o,xo)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(va,_o,xo){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:va,slices:_o,stacks:xo};var bo=[],wo=[],Eo=[],To=[],So=1e-5,$o=new Vector3,Do=new Vector3,No=new Vector3,Oo=new Vector3,Lo=new Vector3,Co,Ro;va.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var jo=_o+1;for(Co=0;Co<=xo;Co++){var zo=Co/xo;for(Ro=0;Ro<=_o;Ro++){var Io=Ro/_o;va(Io,zo,Do),wo.push(Do.x,Do.y,Do.z),Io-So>=0?(va(Io-So,zo,No),Oo.subVectors(Do,No)):(va(Io+So,zo,No),Oo.subVectors(No,Do)),zo-So>=0?(va(Io,zo-So,No),Lo.subVectors(Do,No)):(va(Io,zo+So,No),Lo.subVectors(No,Do)),$o.crossVectors(Oo,Lo).normalize(),Eo.push($o.x,$o.y,$o.z),To.push(Io,zo)}}for(Co=0;Co<xo;Co++)for(Ro=0;Ro<_o;Ro++){var Po=Co*jo+Ro,Bo=Co*jo+Ro+1,ko=(Co+1)*jo+Ro+1,Uo=(Co+1)*jo+Ro;bo.push(Po,Bo,Uo),bo.push(Bo,ko,Uo)}this.setIndex(bo),this.setAttribute("position",new Float32BufferAttribute(wo,3)),this.setAttribute("normal",new Float32BufferAttribute(Eo,3)),this.setAttribute("uv",new Float32BufferAttribute(To,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(va,_o,xo,bo){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:va,indices:_o,radius:xo,detail:bo},this.fromBufferGeometry(new PolyhedronBufferGeometry(va,_o,xo,bo)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(va,_o,xo,bo){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:va,indices:_o,radius:xo,detail:bo},xo=xo||1,bo=bo||0;var wo=[],Eo=[];To(bo),$o(xo),Do(),this.setAttribute("position",new Float32BufferAttribute(wo,3)),this.setAttribute("normal",new Float32BufferAttribute(wo.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Eo,2)),bo===0?this.computeVertexNormals():this.normalizeNormals();function To(Io){for(var Po=new Vector3,Bo=new Vector3,ko=new Vector3,Uo=0;Uo<_o.length;Uo+=3)Lo(_o[Uo+0],Po),Lo(_o[Uo+1],Bo),Lo(_o[Uo+2],ko),So(Po,Bo,ko,Io)}function So(Io,Po,Bo,ko){var Uo=Math.pow(2,ko),Qo=[],qo,Zo;for(qo=0;qo<=Uo;qo++){Qo[qo]=[];var Xo=Io.clone().lerp(Bo,qo/Uo),Fo=Po.clone().lerp(Bo,qo/Uo),Go=Uo-qo;for(Zo=0;Zo<=Go;Zo++)Zo===0&&qo===Uo?Qo[qo][Zo]=Xo:Qo[qo][Zo]=Xo.clone().lerp(Fo,Zo/Go)}for(qo=0;qo<Uo;qo++)for(Zo=0;Zo<2*(Uo-qo)-1;Zo++){var Vo=Math.floor(Zo/2);Zo%2==0?(Oo(Qo[qo][Vo+1]),Oo(Qo[qo+1][Vo]),Oo(Qo[qo][Vo])):(Oo(Qo[qo][Vo+1]),Oo(Qo[qo+1][Vo+1]),Oo(Qo[qo+1][Vo]))}}function $o(Io){for(var Po=new Vector3,Bo=0;Bo<wo.length;Bo+=3)Po.x=wo[Bo+0],Po.y=wo[Bo+1],Po.z=wo[Bo+2],Po.normalize().multiplyScalar(Io),wo[Bo+0]=Po.x,wo[Bo+1]=Po.y,wo[Bo+2]=Po.z}function Do(){for(var Io=new Vector3,Po=0;Po<wo.length;Po+=3){Io.x=wo[Po+0],Io.y=wo[Po+1],Io.z=wo[Po+2];var Bo=jo(Io)/2/Math.PI+.5,ko=zo(Io)/Math.PI+.5;Eo.push(Bo,1-ko)}Co(),No()}function No(){for(var Io=0;Io<Eo.length;Io+=6){var Po=Eo[Io+0],Bo=Eo[Io+2],ko=Eo[Io+4],Uo=Math.max(Po,Bo,ko),Qo=Math.min(Po,Bo,ko);Uo>.9&&Qo<.1&&(Po<.2&&(Eo[Io+0]+=1),Bo<.2&&(Eo[Io+2]+=1),ko<.2&&(Eo[Io+4]+=1))}}function Oo(Io){wo.push(Io.x,Io.y,Io.z)}function Lo(Io,Po){var Bo=Io*3;Po.x=va[Bo+0],Po.y=va[Bo+1],Po.z=va[Bo+2]}function Co(){for(var Io=new Vector3,Po=new Vector3,Bo=new Vector3,ko=new Vector3,Uo=new Vector2,Qo=new Vector2,qo=new Vector2,Zo=0,Xo=0;Zo<wo.length;Zo+=9,Xo+=6){Io.set(wo[Zo+0],wo[Zo+1],wo[Zo+2]),Po.set(wo[Zo+3],wo[Zo+4],wo[Zo+5]),Bo.set(wo[Zo+6],wo[Zo+7],wo[Zo+8]),Uo.set(Eo[Xo+0],Eo[Xo+1]),Qo.set(Eo[Xo+2],Eo[Xo+3]),qo.set(Eo[Xo+4],Eo[Xo+5]),ko.copy(Io).add(Po).add(Bo).divideScalar(3);var Fo=jo(ko);Ro(Uo,Xo+0,Io,Fo),Ro(Qo,Xo+2,Po,Fo),Ro(qo,Xo+4,Bo,Fo)}}function Ro(Io,Po,Bo,ko){ko<0&&Io.x===1&&(Eo[Po]=Io.x-1),Bo.x===0&&Bo.z===0&&(Eo[Po]=ko/2/Math.PI+.5)}function jo(Io){return Math.atan2(Io.z,-Io.x)}function zo(Io){return Math.atan2(-Io.y,Math.sqrt(Io.x*Io.x+Io.z*Io.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(va,_o){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:va,detail:_o},this.fromBufferGeometry(new TetrahedronBufferGeometry(va,_o)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(va,_o){var xo=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],bo=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,xo,bo,va,_o),this.type="TetrahedronBufferGeometry",this.parameters={radius:va,detail:_o}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(va,_o){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:va,detail:_o},this.fromBufferGeometry(new OctahedronBufferGeometry(va,_o)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(va,_o){var xo=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],bo=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,xo,bo,va,_o),this.type="OctahedronBufferGeometry",this.parameters={radius:va,detail:_o}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(va,_o){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:va,detail:_o},this.fromBufferGeometry(new IcosahedronBufferGeometry(va,_o)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(va,_o){var xo=(1+Math.sqrt(5))/2,bo=[-1,xo,0,1,xo,0,-1,-xo,0,1,-xo,0,0,-1,xo,0,1,xo,0,-1,-xo,0,1,-xo,xo,0,-1,xo,0,1,-xo,0,-1,-xo,0,1],wo=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,bo,wo,va,_o),this.type="IcosahedronBufferGeometry",this.parameters={radius:va,detail:_o}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(va,_o){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:va,detail:_o},this.fromBufferGeometry(new DodecahedronBufferGeometry(va,_o)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(va,_o){var xo=(1+Math.sqrt(5))/2,bo=1/xo,wo=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-bo,-xo,0,-bo,xo,0,bo,-xo,0,bo,xo,-bo,-xo,0,-bo,xo,0,bo,-xo,0,bo,xo,0,-xo,0,-bo,xo,0,-bo,-xo,0,bo,xo,0,bo],Eo=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,wo,Eo,va,_o),this.type="DodecahedronBufferGeometry",this.parameters={radius:va,detail:_o}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(va,_o,xo,bo,wo,Eo){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:va,tubularSegments:_o,radius:xo,radialSegments:bo,closed:wo},Eo!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var To=new TubeBufferGeometry(va,_o,xo,bo,wo);this.tangents=To.tangents,this.normals=To.normals,this.binormals=To.binormals,this.fromBufferGeometry(To),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(va,_o,xo,bo,wo){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:va,tubularSegments:_o,radius:xo,radialSegments:bo,closed:wo},_o=_o||64,xo=xo||1,bo=bo||8,wo=wo||!1;var Eo=va.computeFrenetFrames(_o,wo);this.tangents=Eo.tangents,this.normals=Eo.normals,this.binormals=Eo.binormals;var To=new Vector3,So=new Vector3,$o=new Vector2,Do=new Vector3,No,Oo,Lo=[],Co=[],Ro=[],jo=[];zo(),this.setIndex(jo),this.setAttribute("position",new Float32BufferAttribute(Lo,3)),this.setAttribute("normal",new Float32BufferAttribute(Co,3)),this.setAttribute("uv",new Float32BufferAttribute(Ro,2));function zo(){for(No=0;No<_o;No++)Io(No);Io(wo===!1?_o:0),Bo(),Po()}function Io(ko){Do=va.getPointAt(ko/_o,Do);var Uo=Eo.normals[ko],Qo=Eo.binormals[ko];for(Oo=0;Oo<=bo;Oo++){var qo=Oo/bo*Math.PI*2,Zo=Math.sin(qo),Xo=-Math.cos(qo);So.x=Xo*Uo.x+Zo*Qo.x,So.y=Xo*Uo.y+Zo*Qo.y,So.z=Xo*Uo.z+Zo*Qo.z,So.normalize(),Co.push(So.x,So.y,So.z),To.x=Do.x+xo*So.x,To.y=Do.y+xo*So.y,To.z=Do.z+xo*So.z,Lo.push(To.x,To.y,To.z)}}function Po(){for(Oo=1;Oo<=_o;Oo++)for(No=1;No<=bo;No++){var ko=(bo+1)*(Oo-1)+(No-1),Uo=(bo+1)*Oo+(No-1),Qo=(bo+1)*Oo+No,qo=(bo+1)*(Oo-1)+No;jo.push(ko,Uo,qo),jo.push(Uo,Qo,qo)}}function Bo(){for(No=0;No<=_o;No++)for(Oo=0;Oo<=bo;Oo++)$o.x=No/_o,$o.y=Oo/bo,Ro.push($o.x,$o.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this);return va.path=this.parameters.path.toJSON(),va};function TorusKnotGeometry(va,_o,xo,bo,wo,Eo,To){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:va,tube:_o,tubularSegments:xo,radialSegments:bo,p:wo,q:Eo},To!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(va,_o,xo,bo,wo,Eo)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(va,_o,xo,bo,wo,Eo){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:va,tube:_o,tubularSegments:xo,radialSegments:bo,p:wo,q:Eo},va=va||1,_o=_o||.4,xo=Math.floor(xo)||64,bo=Math.floor(bo)||8,wo=wo||2,Eo=Eo||3;var To=[],So=[],$o=[],Do=[],No,Oo,Lo=new Vector3,Co=new Vector3,Ro=new Vector3,jo=new Vector3,zo=new Vector3,Io=new Vector3,Po=new Vector3;for(No=0;No<=xo;++No){var Bo=No/xo*wo*Math.PI*2;for(Go(Bo,wo,Eo,va,Ro),Go(Bo+.01,wo,Eo,va,jo),Io.subVectors(jo,Ro),Po.addVectors(jo,Ro),zo.crossVectors(Io,Po),Po.crossVectors(zo,Io),zo.normalize(),Po.normalize(),Oo=0;Oo<=bo;++Oo){var ko=Oo/bo*Math.PI*2,Uo=-_o*Math.cos(ko),Qo=_o*Math.sin(ko);Lo.x=Ro.x+(Uo*Po.x+Qo*zo.x),Lo.y=Ro.y+(Uo*Po.y+Qo*zo.y),Lo.z=Ro.z+(Uo*Po.z+Qo*zo.z),So.push(Lo.x,Lo.y,Lo.z),Co.subVectors(Lo,Ro).normalize(),$o.push(Co.x,Co.y,Co.z),Do.push(No/xo),Do.push(Oo/bo)}}for(Oo=1;Oo<=xo;Oo++)for(No=1;No<=bo;No++){var qo=(bo+1)*(Oo-1)+(No-1),Zo=(bo+1)*Oo+(No-1),Xo=(bo+1)*Oo+No,Fo=(bo+1)*(Oo-1)+No;To.push(qo,Zo,Fo),To.push(Zo,Xo,Fo)}this.setIndex(To),this.setAttribute("position",new Float32BufferAttribute(So,3)),this.setAttribute("normal",new Float32BufferAttribute($o,3)),this.setAttribute("uv",new Float32BufferAttribute(Do,2));function Go(Vo,Wo,Yo,Ko,ts){var Jo=Math.cos(Vo),rs=Math.sin(Vo),ls=Yo/Wo*Vo,ss=Math.cos(ls);ts.x=Ko*(2+ss)*.5*Jo,ts.y=Ko*(2+ss)*rs*.5,ts.z=Ko*Math.sin(ls)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(va,_o,xo,bo,wo){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:va,tube:_o,radialSegments:xo,tubularSegments:bo,arc:wo},this.fromBufferGeometry(new TorusBufferGeometry(va,_o,xo,bo,wo)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(va,_o,xo,bo,wo){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:va,tube:_o,radialSegments:xo,tubularSegments:bo,arc:wo},va=va||1,_o=_o||.4,xo=Math.floor(xo)||8,bo=Math.floor(bo)||6,wo=wo||Math.PI*2;var Eo=[],To=[],So=[],$o=[],Do=new Vector3,No=new Vector3,Oo=new Vector3,Lo,Co;for(Lo=0;Lo<=xo;Lo++)for(Co=0;Co<=bo;Co++){var Ro=Co/bo*wo,jo=Lo/xo*Math.PI*2;No.x=(va+_o*Math.cos(jo))*Math.cos(Ro),No.y=(va+_o*Math.cos(jo))*Math.sin(Ro),No.z=_o*Math.sin(jo),To.push(No.x,No.y,No.z),Do.x=va*Math.cos(Ro),Do.y=va*Math.sin(Ro),Oo.subVectors(No,Do).normalize(),So.push(Oo.x,Oo.y,Oo.z),$o.push(Co/bo),$o.push(Lo/xo)}for(Lo=1;Lo<=xo;Lo++)for(Co=1;Co<=bo;Co++){var zo=(bo+1)*Lo+Co-1,Io=(bo+1)*(Lo-1)+Co-1,Po=(bo+1)*(Lo-1)+Co,Bo=(bo+1)*Lo+Co;Eo.push(zo,Io,Bo),Eo.push(Io,Po,Bo)}this.setIndex(Eo),this.setAttribute("position",new Float32BufferAttribute(To,3)),this.setAttribute("normal",new Float32BufferAttribute(So,3)),this.setAttribute("uv",new Float32BufferAttribute($o,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(va,_o,xo){xo=xo||2;var bo=_o&&_o.length,wo=bo?_o[0]*xo:va.length,Eo=linkedList(va,0,wo,xo,!0),To=[];if(!Eo||Eo.next===Eo.prev)return To;var So,$o,Do,No,Oo,Lo,Co;if(bo&&(Eo=eliminateHoles(va,_o,Eo,xo)),va.length>80*xo){So=Do=va[0],$o=No=va[1];for(var Ro=xo;Ro<wo;Ro+=xo)Oo=va[Ro],Lo=va[Ro+1],Oo<So&&(So=Oo),Lo<$o&&($o=Lo),Oo>Do&&(Do=Oo),Lo>No&&(No=Lo);Co=Math.max(Do-So,No-$o),Co=Co!==0?1/Co:0}return earcutLinked(Eo,To,xo,So,$o,Co),To}};function linkedList(va,_o,xo,bo,wo){var Eo,To;if(wo===signedArea(va,_o,xo,bo)>0)for(Eo=_o;Eo<xo;Eo+=bo)To=insertNode(Eo,va[Eo],va[Eo+1],To);else for(Eo=xo-bo;Eo>=_o;Eo-=bo)To=insertNode(Eo,va[Eo],va[Eo+1],To);return To&&equals(To,To.next)&&(removeNode(To),To=To.next),To}function filterPoints(va,_o){if(!va)return va;_o||(_o=va);var xo=va,bo;do if(bo=!1,!xo.steiner&&(equals(xo,xo.next)||area(xo.prev,xo,xo.next)===0)){if(removeNode(xo),xo=_o=xo.prev,xo===xo.next)break;bo=!0}else xo=xo.next;while(bo||xo!==_o);return _o}function earcutLinked(va,_o,xo,bo,wo,Eo,To){if(!!va){!To&&Eo&&indexCurve(va,bo,wo,Eo);for(var So=va,$o,Do;va.prev!==va.next;){if($o=va.prev,Do=va.next,Eo?isEarHashed(va,bo,wo,Eo):isEar(va)){_o.push($o.i/xo),_o.push(va.i/xo),_o.push(Do.i/xo),removeNode(va),va=Do.next,So=Do.next;continue}if(va=Do,va===So){To?To===1?(va=cureLocalIntersections(filterPoints(va),_o,xo),earcutLinked(va,_o,xo,bo,wo,Eo,2)):To===2&&splitEarcut(va,_o,xo,bo,wo,Eo):earcutLinked(filterPoints(va),_o,xo,bo,wo,Eo,1);break}}}}function isEar(va){var _o=va.prev,xo=va,bo=va.next;if(area(_o,xo,bo)>=0)return!1;for(var wo=va.next.next;wo!==va.prev;){if(pointInTriangle(_o.x,_o.y,xo.x,xo.y,bo.x,bo.y,wo.x,wo.y)&&area(wo.prev,wo,wo.next)>=0)return!1;wo=wo.next}return!0}function isEarHashed(va,_o,xo,bo){var wo=va.prev,Eo=va,To=va.next;if(area(wo,Eo,To)>=0)return!1;for(var So=wo.x<Eo.x?wo.x<To.x?wo.x:To.x:Eo.x<To.x?Eo.x:To.x,$o=wo.y<Eo.y?wo.y<To.y?wo.y:To.y:Eo.y<To.y?Eo.y:To.y,Do=wo.x>Eo.x?wo.x>To.x?wo.x:To.x:Eo.x>To.x?Eo.x:To.x,No=wo.y>Eo.y?wo.y>To.y?wo.y:To.y:Eo.y>To.y?Eo.y:To.y,Oo=zOrder(So,$o,_o,xo,bo),Lo=zOrder(Do,No,_o,xo,bo),Co=va.prevZ,Ro=va.nextZ;Co&&Co.z>=Oo&&Ro&&Ro.z<=Lo;){if(Co!==va.prev&&Co!==va.next&&pointInTriangle(wo.x,wo.y,Eo.x,Eo.y,To.x,To.y,Co.x,Co.y)&&area(Co.prev,Co,Co.next)>=0||(Co=Co.prevZ,Ro!==va.prev&&Ro!==va.next&&pointInTriangle(wo.x,wo.y,Eo.x,Eo.y,To.x,To.y,Ro.x,Ro.y)&&area(Ro.prev,Ro,Ro.next)>=0))return!1;Ro=Ro.nextZ}for(;Co&&Co.z>=Oo;){if(Co!==va.prev&&Co!==va.next&&pointInTriangle(wo.x,wo.y,Eo.x,Eo.y,To.x,To.y,Co.x,Co.y)&&area(Co.prev,Co,Co.next)>=0)return!1;Co=Co.prevZ}for(;Ro&&Ro.z<=Lo;){if(Ro!==va.prev&&Ro!==va.next&&pointInTriangle(wo.x,wo.y,Eo.x,Eo.y,To.x,To.y,Ro.x,Ro.y)&&area(Ro.prev,Ro,Ro.next)>=0)return!1;Ro=Ro.nextZ}return!0}function cureLocalIntersections(va,_o,xo){var bo=va;do{var wo=bo.prev,Eo=bo.next.next;!equals(wo,Eo)&&intersects(wo,bo,bo.next,Eo)&&locallyInside(wo,Eo)&&locallyInside(Eo,wo)&&(_o.push(wo.i/xo),_o.push(bo.i/xo),_o.push(Eo.i/xo),removeNode(bo),removeNode(bo.next),bo=va=Eo),bo=bo.next}while(bo!==va);return filterPoints(bo)}function splitEarcut(va,_o,xo,bo,wo,Eo){var To=va;do{for(var So=To.next.next;So!==To.prev;){if(To.i!==So.i&&isValidDiagonal(To,So)){var $o=splitPolygon(To,So);To=filterPoints(To,To.next),$o=filterPoints($o,$o.next),earcutLinked(To,_o,xo,bo,wo,Eo),earcutLinked($o,_o,xo,bo,wo,Eo);return}So=So.next}To=To.next}while(To!==va)}function eliminateHoles(va,_o,xo,bo){var wo=[],Eo,To,So,$o,Do;for(Eo=0,To=_o.length;Eo<To;Eo++)So=_o[Eo]*bo,$o=Eo<To-1?_o[Eo+1]*bo:va.length,Do=linkedList(va,So,$o,bo,!1),Do===Do.next&&(Do.steiner=!0),wo.push(getLeftmost(Do));for(wo.sort(compareX),Eo=0;Eo<wo.length;Eo++)eliminateHole(wo[Eo],xo),xo=filterPoints(xo,xo.next);return xo}function compareX(va,_o){return va.x-_o.x}function eliminateHole(va,_o){if(_o=findHoleBridge(va,_o),_o){var xo=splitPolygon(_o,va);filterPoints(_o,_o.next),filterPoints(xo,xo.next)}}function findHoleBridge(va,_o){var xo=_o,bo=va.x,wo=va.y,Eo=-1/0,To;do{if(wo<=xo.y&&wo>=xo.next.y&&xo.next.y!==xo.y){var So=xo.x+(wo-xo.y)*(xo.next.x-xo.x)/(xo.next.y-xo.y);if(So<=bo&&So>Eo){if(Eo=So,So===bo){if(wo===xo.y)return xo;if(wo===xo.next.y)return xo.next}To=xo.x<xo.next.x?xo:xo.next}}xo=xo.next}while(xo!==_o);if(!To)return null;if(bo===Eo)return To;var $o=To,Do=To.x,No=To.y,Oo=1/0,Lo;xo=To;do bo>=xo.x&&xo.x>=Do&&bo!==xo.x&&pointInTriangle(wo<No?bo:Eo,wo,Do,No,wo<No?Eo:bo,wo,xo.x,xo.y)&&(Lo=Math.abs(wo-xo.y)/(bo-xo.x),locallyInside(xo,va)&&(Lo<Oo||Lo===Oo&&(xo.x>To.x||xo.x===To.x&&sectorContainsSector(To,xo)))&&(To=xo,Oo=Lo)),xo=xo.next;while(xo!==$o);return To}function sectorContainsSector(va,_o){return area(va.prev,va,_o.prev)<0&&area(_o.next,va,va.next)<0}function indexCurve(va,_o,xo,bo){var wo=va;do wo.z===null&&(wo.z=zOrder(wo.x,wo.y,_o,xo,bo)),wo.prevZ=wo.prev,wo.nextZ=wo.next,wo=wo.next;while(wo!==va);wo.prevZ.nextZ=null,wo.prevZ=null,sortLinked(wo)}function sortLinked(va){var _o,xo,bo,wo,Eo,To,So,$o,Do=1;do{for(xo=va,va=null,Eo=null,To=0;xo;){for(To++,bo=xo,So=0,_o=0;_o<Do&&(So++,bo=bo.nextZ,!!bo);_o++);for($o=Do;So>0||$o>0&&bo;)So!==0&&($o===0||!bo||xo.z<=bo.z)?(wo=xo,xo=xo.nextZ,So--):(wo=bo,bo=bo.nextZ,$o--),Eo?Eo.nextZ=wo:va=wo,wo.prevZ=Eo,Eo=wo;xo=bo}Eo.nextZ=null,Do*=2}while(To>1);return va}function zOrder(va,_o,xo,bo,wo){return va=32767*(va-xo)*wo,_o=32767*(_o-bo)*wo,va=(va|va<<8)&16711935,va=(va|va<<4)&252645135,va=(va|va<<2)&858993459,va=(va|va<<1)&1431655765,_o=(_o|_o<<8)&16711935,_o=(_o|_o<<4)&252645135,_o=(_o|_o<<2)&858993459,_o=(_o|_o<<1)&1431655765,va|_o<<1}function getLeftmost(va){var _o=va,xo=va;do(_o.x<xo.x||_o.x===xo.x&&_o.y<xo.y)&&(xo=_o),_o=_o.next;while(_o!==va);return xo}function pointInTriangle(va,_o,xo,bo,wo,Eo,To,So){return(wo-To)*(_o-So)-(va-To)*(Eo-So)>=0&&(va-To)*(bo-So)-(xo-To)*(_o-So)>=0&&(xo-To)*(Eo-So)-(wo-To)*(bo-So)>=0}function isValidDiagonal(va,_o){return va.next.i!==_o.i&&va.prev.i!==_o.i&&!intersectsPolygon(va,_o)&&(locallyInside(va,_o)&&locallyInside(_o,va)&&middleInside(va,_o)&&(area(va.prev,va,_o.prev)||area(va,_o.prev,_o))||equals(va,_o)&&area(va.prev,va,va.next)>0&&area(_o.prev,_o,_o.next)>0)}function area(va,_o,xo){return(_o.y-va.y)*(xo.x-_o.x)-(_o.x-va.x)*(xo.y-_o.y)}function equals(va,_o){return va.x===_o.x&&va.y===_o.y}function intersects(va,_o,xo,bo){var wo=sign(area(va,_o,xo)),Eo=sign(area(va,_o,bo)),To=sign(area(xo,bo,va)),So=sign(area(xo,bo,_o));return!!(wo!==Eo&&To!==So||wo===0&&onSegment(va,xo,_o)||Eo===0&&onSegment(va,bo,_o)||To===0&&onSegment(xo,va,bo)||So===0&&onSegment(xo,_o,bo))}function onSegment(va,_o,xo){return _o.x<=Math.max(va.x,xo.x)&&_o.x>=Math.min(va.x,xo.x)&&_o.y<=Math.max(va.y,xo.y)&&_o.y>=Math.min(va.y,xo.y)}function sign(va){return va>0?1:va<0?-1:0}function intersectsPolygon(va,_o){var xo=va;do{if(xo.i!==va.i&&xo.next.i!==va.i&&xo.i!==_o.i&&xo.next.i!==_o.i&&intersects(xo,xo.next,va,_o))return!0;xo=xo.next}while(xo!==va);return!1}function locallyInside(va,_o){return area(va.prev,va,va.next)<0?area(va,_o,va.next)>=0&&area(va,va.prev,_o)>=0:area(va,_o,va.prev)<0||area(va,va.next,_o)<0}function middleInside(va,_o){var xo=va,bo=!1,wo=(va.x+_o.x)/2,Eo=(va.y+_o.y)/2;do xo.y>Eo!=xo.next.y>Eo&&xo.next.y!==xo.y&&wo<(xo.next.x-xo.x)*(Eo-xo.y)/(xo.next.y-xo.y)+xo.x&&(bo=!bo),xo=xo.next;while(xo!==va);return bo}function splitPolygon(va,_o){var xo=new Node(va.i,va.x,va.y),bo=new Node(_o.i,_o.x,_o.y),wo=va.next,Eo=_o.prev;return va.next=_o,_o.prev=va,xo.next=wo,wo.prev=xo,bo.next=xo,xo.prev=bo,Eo.next=bo,bo.prev=Eo,bo}function insertNode(va,_o,xo,bo){var wo=new Node(va,_o,xo);return bo?(wo.next=bo.next,wo.prev=bo,bo.next.prev=wo,bo.next=wo):(wo.prev=wo,wo.next=wo),wo}function removeNode(va){va.next.prev=va.prev,va.prev.next=va.next,va.prevZ&&(va.prevZ.nextZ=va.nextZ),va.nextZ&&(va.nextZ.prevZ=va.prevZ)}function Node(va,_o,xo){this.i=va,this.x=_o,this.y=xo,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(va,_o,xo,bo){for(var wo=0,Eo=_o,To=xo-bo;Eo<xo;Eo+=bo)wo+=(va[To]-va[Eo])*(va[Eo+1]+va[To+1]),To=Eo;return wo}var ShapeUtils={area:function(va){for(var _o=va.length,xo=0,bo=_o-1,wo=0;wo<_o;bo=wo++)xo+=va[bo].x*va[wo].y-va[wo].x*va[bo].y;return xo*.5},isClockWise:function(va){return ShapeUtils.area(va)<0},triangulateShape:function(va,_o){var xo=[],bo=[],wo=[];removeDupEndPts(va),addContour(xo,va);var Eo=va.length;_o.forEach(removeDupEndPts);for(var To=0;To<_o.length;To++)bo.push(Eo),Eo+=_o[To].length,addContour(xo,_o[To]);for(var So=Earcut.triangulate(xo,bo),To=0;To<So.length;To+=3)wo.push(So.slice(To,To+3));return wo}};function removeDupEndPts(va){var _o=va.length;_o>2&&va[_o-1].equals(va[0])&&va.pop()}function addContour(va,_o){for(var xo=0;xo<_o.length;xo++)va.push(_o[xo].x),va.push(_o[xo].y)}function ExtrudeGeometry(va,_o){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:va,options:_o},this.fromBufferGeometry(new ExtrudeBufferGeometry(va,_o)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var va=Geometry.prototype.toJSON.call(this),_o=this.parameters.shapes,xo=this.parameters.options;return toJSON(_o,xo,va)};function ExtrudeBufferGeometry(va,_o){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:va,options:_o},va=Array.isArray(va)?va:[va];for(var xo=this,bo=[],wo=[],Eo=0,To=va.length;Eo<To;Eo++){var So=va[Eo];$o(So)}this.setAttribute("position",new Float32BufferAttribute(bo,3)),this.setAttribute("uv",new Float32BufferAttribute(wo,2)),this.computeVertexNormals();function $o(Do){var No=[],Oo=_o.curveSegments!==void 0?_o.curveSegments:12,Lo=_o.steps!==void 0?_o.steps:1,Co=_o.depth!==void 0?_o.depth:100,Ro=_o.bevelEnabled!==void 0?_o.bevelEnabled:!0,jo=_o.bevelThickness!==void 0?_o.bevelThickness:6,zo=_o.bevelSize!==void 0?_o.bevelSize:jo-2,Io=_o.bevelOffset!==void 0?_o.bevelOffset:0,Po=_o.bevelSegments!==void 0?_o.bevelSegments:3,Bo=_o.extrudePath,ko=_o.UVGenerator!==void 0?_o.UVGenerator:WorldUVGenerator;_o.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Co=_o.amount);var Uo,Qo=!1,qo,Zo,Xo,Fo;Bo&&(Uo=Bo.getSpacedPoints(Lo),Qo=!0,Ro=!1,qo=Bo.computeFrenetFrames(Lo,!1),Zo=new Vector3,Xo=new Vector3,Fo=new Vector3),Ro||(Po=0,jo=0,zo=0,Io=0);var Go,Vo,Wo,Yo=Do.extractPoints(Oo),Ko=Yo.shape,ts=Yo.holes,Jo=!ShapeUtils.isClockWise(Ko);if(Jo)for(Ko=Ko.reverse(),Vo=0,Wo=ts.length;Vo<Wo;Vo++)Go=ts[Vo],ShapeUtils.isClockWise(Go)&&(ts[Vo]=Go.reverse());var rs=ShapeUtils.triangulateShape(Ko,ts),ls=Ko;for(Vo=0,Wo=ts.length;Vo<Wo;Vo++)Go=ts[Vo],Ko=Ko.concat(Go);function ss(Vs,Hs,Ys){return Hs||console.error("THREE.ExtrudeGeometry: vec does not exist"),Hs.clone().multiplyScalar(Ys).add(Vs)}var us,ms,As,Os,Es,Ms=Ko.length,$s,ks=rs.length;function zs(Vs,Hs,Ys){var tu,ys,Xs,Ks=Vs.x-Hs.x,du=Vs.y-Hs.y,qs=Ys.x-Vs.x,uu=Ys.y-Vs.y,xu=Ks*Ks+du*du,Eu=Ks*uu-du*qs;if(Math.abs(Eu)>Number.EPSILON){var ju=Math.sqrt(xu),au=Math.sqrt(qs*qs+uu*uu),Lu=Hs.x-du/ju,zu=Hs.y+Ks/ju,Pu=Ys.x-uu/au,ku=Ys.y+qs/au,Du=((Pu-Lu)*uu-(ku-zu)*qs)/(Ks*uu-du*qs);tu=Lu+Ks*Du-Vs.x,ys=zu+du*Du-Vs.y;var Xu=tu*tu+ys*ys;if(Xu<=2)return new Vector2(tu,ys);Xs=Math.sqrt(Xu/2)}else{var fs=!1;Ks>Number.EPSILON?qs>Number.EPSILON&&(fs=!0):Ks<-Number.EPSILON?qs<-Number.EPSILON&&(fs=!0):Math.sign(du)===Math.sign(uu)&&(fs=!0),fs?(tu=-du,ys=Ks,Xs=Math.sqrt(xu)):(tu=Ks,ys=du,Xs=Math.sqrt(xu/2))}return new Vector2(tu/Xs,ys/Xs)}for(var Cs=[],xs=0,Bs=ls.length,Fs=Bs-1,Zs=xs+1;xs<Bs;xs++,Fs++,Zs++)Fs===Bs&&(Fs=0),Zs===Bs&&(Zs=0),Cs[xs]=zs(ls[xs],ls[Fs],ls[Zs]);var bu=[],Au,ds=Cs.concat();for(Vo=0,Wo=ts.length;Vo<Wo;Vo++){for(Go=ts[Vo],Au=[],xs=0,Bs=Go.length,Fs=Bs-1,Zs=xs+1;xs<Bs;xs++,Fs++,Zs++)Fs===Bs&&(Fs=0),Zs===Bs&&(Zs=0),Au[xs]=zs(Go[xs],Go[Fs],Go[Zs]);bu.push(Au),ds=ds.concat(Au)}for(us=0;us<Po;us++){for(As=us/Po,Os=jo*Math.cos(As*Math.PI/2),ms=zo*Math.sin(As*Math.PI/2)+Io,xs=0,Bs=ls.length;xs<Bs;xs++)Es=ss(ls[xs],Cs[xs],ms),Qs(Es.x,Es.y,-Os);for(Vo=0,Wo=ts.length;Vo<Wo;Vo++)for(Go=ts[Vo],Au=bu[Vo],xs=0,Bs=Go.length;xs<Bs;xs++)Es=ss(Go[xs],Au[xs],ms),Qs(Es.x,Es.y,-Os)}for(ms=zo+Io,xs=0;xs<Ms;xs++)Es=Ro?ss(Ko[xs],ds[xs],ms):Ko[xs],Qo?(Xo.copy(qo.normals[0]).multiplyScalar(Es.x),Zo.copy(qo.binormals[0]).multiplyScalar(Es.y),Fo.copy(Uo[0]).add(Xo).add(Zo),Qs(Fo.x,Fo.y,Fo.z)):Qs(Es.x,Es.y,0);var cs;for(cs=1;cs<=Lo;cs++)for(xs=0;xs<Ms;xs++)Es=Ro?ss(Ko[xs],ds[xs],ms):Ko[xs],Qo?(Xo.copy(qo.normals[cs]).multiplyScalar(Es.x),Zo.copy(qo.binormals[cs]).multiplyScalar(Es.y),Fo.copy(Uo[cs]).add(Xo).add(Zo),Qs(Fo.x,Fo.y,Fo.z)):Qs(Es.x,Es.y,Co/Lo*cs);for(us=Po-1;us>=0;us--){for(As=us/Po,Os=jo*Math.cos(As*Math.PI/2),ms=zo*Math.sin(As*Math.PI/2)+Io,xs=0,Bs=ls.length;xs<Bs;xs++)Es=ss(ls[xs],Cs[xs],ms),Qs(Es.x,Es.y,Co+Os);for(Vo=0,Wo=ts.length;Vo<Wo;Vo++)for(Go=ts[Vo],Au=bu[Vo],xs=0,Bs=Go.length;xs<Bs;xs++)Es=ss(Go[xs],Au[xs],ms),Qo?Qs(Es.x,Es.y+Uo[Lo-1].y,Uo[Lo-1].x+Os):Qs(Es.x,Es.y,Co+Os)}bs(),Ls();function bs(){var Vs=bo.length/3;if(Ro){var Hs=0,Ys=Ms*Hs;for(xs=0;xs<ks;xs++)$s=rs[xs],Gs($s[2]+Ys,$s[1]+Ys,$s[0]+Ys);for(Hs=Lo+Po*2,Ys=Ms*Hs,xs=0;xs<ks;xs++)$s=rs[xs],Gs($s[0]+Ys,$s[1]+Ys,$s[2]+Ys)}else{for(xs=0;xs<ks;xs++)$s=rs[xs],Gs($s[2],$s[1],$s[0]);for(xs=0;xs<ks;xs++)$s=rs[xs],Gs($s[0]+Ms*Lo,$s[1]+Ms*Lo,$s[2]+Ms*Lo)}xo.addGroup(Vs,bo.length/3-Vs,0)}function Ls(){var Vs=bo.length/3,Hs=0;for(Js(ls,Hs),Hs+=ls.length,Vo=0,Wo=ts.length;Vo<Wo;Vo++)Go=ts[Vo],Js(Go,Hs),Hs+=Go.length;xo.addGroup(Vs,bo.length/3-Vs,1)}function Js(Vs,Hs){var Ys,tu;for(xs=Vs.length;--xs>=0;){Ys=xs,tu=xs-1,tu<0&&(tu=Vs.length-1);var ys=0,Xs=Lo+Po*2;for(ys=0;ys<Xs;ys++){var Ks=Ms*ys,du=Ms*(ys+1),qs=Hs+Ys+Ks,uu=Hs+tu+Ks,xu=Hs+tu+du,Eu=Hs+Ys+du;fu(qs,uu,xu,Eu)}}}function Qs(Vs,Hs,Ys){No.push(Vs),No.push(Hs),No.push(Ys)}function Gs(Vs,Hs,Ys){ru(Vs),ru(Hs),ru(Ys);var tu=bo.length/3,ys=ko.generateTopUV(xo,bo,tu-3,tu-2,tu-1);eu(ys[0]),eu(ys[1]),eu(ys[2])}function fu(Vs,Hs,Ys,tu){ru(Vs),ru(Hs),ru(tu),ru(Hs),ru(Ys),ru(tu);var ys=bo.length/3,Xs=ko.generateSideWallUV(xo,bo,ys-6,ys-3,ys-2,ys-1);eu(Xs[0]),eu(Xs[1]),eu(Xs[3]),eu(Xs[1]),eu(Xs[2]),eu(Xs[3])}function ru(Vs){bo.push(No[Vs*3+0]),bo.push(No[Vs*3+1]),bo.push(No[Vs*3+2])}function eu(Vs){wo.push(Vs.x),wo.push(Vs.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this),_o=this.parameters.shapes,xo=this.parameters.options;return toJSON(_o,xo,va)};var WorldUVGenerator={generateTopUV:function(va,_o,xo,bo,wo){var Eo=_o[xo*3],To=_o[xo*3+1],So=_o[bo*3],$o=_o[bo*3+1],Do=_o[wo*3],No=_o[wo*3+1];return[new Vector2(Eo,To),new Vector2(So,$o),new Vector2(Do,No)]},generateSideWallUV:function(va,_o,xo,bo,wo,Eo){var To=_o[xo*3],So=_o[xo*3+1],$o=_o[xo*3+2],Do=_o[bo*3],No=_o[bo*3+1],Oo=_o[bo*3+2],Lo=_o[wo*3],Co=_o[wo*3+1],Ro=_o[wo*3+2],jo=_o[Eo*3],zo=_o[Eo*3+1],Io=_o[Eo*3+2];return Math.abs(So-No)<.01?[new Vector2(To,1-$o),new Vector2(Do,1-Oo),new Vector2(Lo,1-Ro),new Vector2(jo,1-Io)]:[new Vector2(So,1-$o),new Vector2(No,1-Oo),new Vector2(Co,1-Ro),new Vector2(zo,1-Io)]}};function toJSON(va,_o,xo){if(xo.shapes=[],Array.isArray(va))for(var bo=0,wo=va.length;bo<wo;bo++){var Eo=va[bo];xo.shapes.push(Eo.uuid)}else xo.shapes.push(va.uuid);return _o.extrudePath!==void 0&&(xo.options.extrudePath=_o.extrudePath.toJSON()),xo}function TextGeometry(va,_o){Geometry.call(this),this.type="TextGeometry",this.parameters={text:va,parameters:_o},this.fromBufferGeometry(new TextBufferGeometry(va,_o)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(va,_o){_o=_o||{};var xo=_o.font;if(!(xo&&xo.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var bo=xo.generateShapes(va,_o.size);_o.depth=_o.height!==void 0?_o.height:50,_o.bevelThickness===void 0&&(_o.bevelThickness=10),_o.bevelSize===void 0&&(_o.bevelSize=8),_o.bevelEnabled===void 0&&(_o.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,bo,_o),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(va,_o,xo,bo,wo,Eo,To){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:va,widthSegments:_o,heightSegments:xo,phiStart:bo,phiLength:wo,thetaStart:Eo,thetaLength:To},this.fromBufferGeometry(new SphereBufferGeometry(va,_o,xo,bo,wo,Eo,To)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(va,_o,xo,bo,wo,Eo,To){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:va,widthSegments:_o,heightSegments:xo,phiStart:bo,phiLength:wo,thetaStart:Eo,thetaLength:To},va=va||1,_o=Math.max(3,Math.floor(_o)||8),xo=Math.max(2,Math.floor(xo)||6),bo=bo!==void 0?bo:0,wo=wo!==void 0?wo:Math.PI*2,Eo=Eo!==void 0?Eo:0,To=To!==void 0?To:Math.PI;var So=Math.min(Eo+To,Math.PI),$o,Do,No=0,Oo=[],Lo=new Vector3,Co=new Vector3,Ro=[],jo=[],zo=[],Io=[];for(Do=0;Do<=xo;Do++){var Po=[],Bo=Do/xo,ko=0;for(Do==0&&Eo==0?ko=.5/_o:Do==xo&&So==Math.PI&&(ko=-.5/_o),$o=0;$o<=_o;$o++){var Uo=$o/_o;Lo.x=-va*Math.cos(bo+Uo*wo)*Math.sin(Eo+Bo*To),Lo.y=va*Math.cos(Eo+Bo*To),Lo.z=va*Math.sin(bo+Uo*wo)*Math.sin(Eo+Bo*To),jo.push(Lo.x,Lo.y,Lo.z),Co.copy(Lo).normalize(),zo.push(Co.x,Co.y,Co.z),Io.push(Uo+ko,1-Bo),Po.push(No++)}Oo.push(Po)}for(Do=0;Do<xo;Do++)for($o=0;$o<_o;$o++){var Qo=Oo[Do][$o+1],qo=Oo[Do][$o],Zo=Oo[Do+1][$o],Xo=Oo[Do+1][$o+1];(Do!==0||Eo>0)&&Ro.push(Qo,qo,Xo),(Do!==xo-1||So<Math.PI)&&Ro.push(qo,Zo,Xo)}this.setIndex(Ro),this.setAttribute("position",new Float32BufferAttribute(jo,3)),this.setAttribute("normal",new Float32BufferAttribute(zo,3)),this.setAttribute("uv",new Float32BufferAttribute(Io,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(va,_o,xo,bo,wo,Eo){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:va,outerRadius:_o,thetaSegments:xo,phiSegments:bo,thetaStart:wo,thetaLength:Eo},this.fromBufferGeometry(new RingBufferGeometry(va,_o,xo,bo,wo,Eo)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(va,_o,xo,bo,wo,Eo){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:va,outerRadius:_o,thetaSegments:xo,phiSegments:bo,thetaStart:wo,thetaLength:Eo},va=va||.5,_o=_o||1,wo=wo!==void 0?wo:0,Eo=Eo!==void 0?Eo:Math.PI*2,xo=xo!==void 0?Math.max(3,xo):8,bo=bo!==void 0?Math.max(1,bo):1;var To=[],So=[],$o=[],Do=[],No,Oo=va,Lo=(_o-va)/bo,Co=new Vector3,Ro=new Vector2,jo,zo;for(jo=0;jo<=bo;jo++){for(zo=0;zo<=xo;zo++)No=wo+zo/xo*Eo,Co.x=Oo*Math.cos(No),Co.y=Oo*Math.sin(No),So.push(Co.x,Co.y,Co.z),$o.push(0,0,1),Ro.x=(Co.x/_o+1)/2,Ro.y=(Co.y/_o+1)/2,Do.push(Ro.x,Ro.y);Oo+=Lo}for(jo=0;jo<bo;jo++){var Io=jo*(xo+1);for(zo=0;zo<xo;zo++){No=zo+Io;var Po=No,Bo=No+xo+1,ko=No+xo+2,Uo=No+1;To.push(Po,Bo,Uo),To.push(Bo,ko,Uo)}}this.setIndex(To),this.setAttribute("position",new Float32BufferAttribute(So,3)),this.setAttribute("normal",new Float32BufferAttribute($o,3)),this.setAttribute("uv",new Float32BufferAttribute(Do,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(va,_o,xo,bo){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:va,segments:_o,phiStart:xo,phiLength:bo},this.fromBufferGeometry(new LatheBufferGeometry(va,_o,xo,bo)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(va,_o,xo,bo){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:va,segments:_o,phiStart:xo,phiLength:bo},_o=Math.floor(_o)||12,xo=xo||0,bo=bo||Math.PI*2,bo=MathUtils.clamp(bo,0,Math.PI*2);var wo=[],Eo=[],To=[],So,$o=1/_o,Do=new Vector3,No=new Vector2,Oo,Lo;for(Oo=0;Oo<=_o;Oo++){var Co=xo+Oo*$o*bo,Ro=Math.sin(Co),jo=Math.cos(Co);for(Lo=0;Lo<=va.length-1;Lo++)Do.x=va[Lo].x*Ro,Do.y=va[Lo].y,Do.z=va[Lo].x*jo,Eo.push(Do.x,Do.y,Do.z),No.x=Oo/_o,No.y=Lo/(va.length-1),To.push(No.x,No.y)}for(Oo=0;Oo<_o;Oo++)for(Lo=0;Lo<va.length-1;Lo++){So=Lo+Oo*va.length;var zo=So,Io=So+va.length,Po=So+va.length+1,Bo=So+1;wo.push(zo,Io,Bo),wo.push(Io,Po,Bo)}if(this.setIndex(wo),this.setAttribute("position",new Float32BufferAttribute(Eo,3)),this.setAttribute("uv",new Float32BufferAttribute(To,2)),this.computeVertexNormals(),bo===Math.PI*2){var ko=this.attributes.normal.array,Uo=new Vector3,Qo=new Vector3,qo=new Vector3;for(So=_o*va.length*3,Oo=0,Lo=0;Oo<va.length;Oo++,Lo+=3)Uo.x=ko[Lo+0],Uo.y=ko[Lo+1],Uo.z=ko[Lo+2],Qo.x=ko[So+Lo+0],Qo.y=ko[So+Lo+1],Qo.z=ko[So+Lo+2],qo.addVectors(Uo,Qo).normalize(),ko[Lo+0]=ko[So+Lo+0]=qo.x,ko[Lo+1]=ko[So+Lo+1]=qo.y,ko[Lo+2]=ko[So+Lo+2]=qo.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(va,_o){Geometry.call(this),this.type="ShapeGeometry",typeof _o=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),_o=_o.curveSegments),this.parameters={shapes:va,curveSegments:_o},this.fromBufferGeometry(new ShapeBufferGeometry(va,_o)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var va=Geometry.prototype.toJSON.call(this),_o=this.parameters.shapes;return toJSON$1(_o,va)};function ShapeBufferGeometry(va,_o){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:va,curveSegments:_o},_o=_o||12;var xo=[],bo=[],wo=[],Eo=[],To=0,So=0;if(Array.isArray(va)===!1)Do(va);else for(var $o=0;$o<va.length;$o++)Do(va[$o]),this.addGroup(To,So,$o),To+=So,So=0;this.setIndex(xo),this.setAttribute("position",new Float32BufferAttribute(bo,3)),this.setAttribute("normal",new Float32BufferAttribute(wo,3)),this.setAttribute("uv",new Float32BufferAttribute(Eo,2));function Do(No){var Oo,Lo,Co,Ro=bo.length/3,jo=No.extractPoints(_o),zo=jo.shape,Io=jo.holes;for(ShapeUtils.isClockWise(zo)===!1&&(zo=zo.reverse()),Oo=0,Lo=Io.length;Oo<Lo;Oo++)Co=Io[Oo],ShapeUtils.isClockWise(Co)===!0&&(Io[Oo]=Co.reverse());var Po=ShapeUtils.triangulateShape(zo,Io);for(Oo=0,Lo=Io.length;Oo<Lo;Oo++)Co=Io[Oo],zo=zo.concat(Co);for(Oo=0,Lo=zo.length;Oo<Lo;Oo++){var Bo=zo[Oo];bo.push(Bo.x,Bo.y,0),wo.push(0,0,1),Eo.push(Bo.x,Bo.y)}for(Oo=0,Lo=Po.length;Oo<Lo;Oo++){var ko=Po[Oo],Uo=ko[0]+Ro,Qo=ko[1]+Ro,qo=ko[2]+Ro;xo.push(Uo,Qo,qo),So+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var va=BufferGeometry.prototype.toJSON.call(this),_o=this.parameters.shapes;return toJSON$1(_o,va)};function toJSON$1(va,_o){if(_o.shapes=[],Array.isArray(va))for(var xo=0,bo=va.length;xo<bo;xo++){var wo=va[xo];_o.shapes.push(wo.uuid)}else _o.shapes.push(va.uuid);return _o}function EdgesGeometry(va,_o){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:_o},_o=_o!==void 0?_o:1;var xo=[],bo=Math.cos(MathUtils.DEG2RAD*_o),wo=[0,0],Eo={},To,So,$o,Do=["a","b","c"],No;va.isBufferGeometry?(No=new Geometry,No.fromBufferGeometry(va)):No=va.clone(),No.mergeVertices(),No.computeFaceNormals();for(var Oo=No.vertices,Lo=No.faces,Co=0,Ro=Lo.length;Co<Ro;Co++)for(var jo=Lo[Co],zo=0;zo<3;zo++)To=jo[Do[zo]],So=jo[Do[(zo+1)%3]],wo[0]=Math.min(To,So),wo[1]=Math.max(To,So),$o=wo[0]+","+wo[1],Eo[$o]===void 0?Eo[$o]={index1:wo[0],index2:wo[1],face1:Co,face2:void 0}:Eo[$o].face2=Co;for($o in Eo){var Io=Eo[$o];if(Io.face2===void 0||Lo[Io.face1].normal.dot(Lo[Io.face2].normal)<=bo){var Po=Oo[Io.index1];xo.push(Po.x,Po.y,Po.z),Po=Oo[Io.index2],xo.push(Po.x,Po.y,Po.z)}}this.setAttribute("position",new Float32BufferAttribute(xo,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(va,_o,xo,bo,wo,Eo,To,So){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:va,radiusBottom:_o,height:xo,radialSegments:bo,heightSegments:wo,openEnded:Eo,thetaStart:To,thetaLength:So},this.fromBufferGeometry(new CylinderBufferGeometry(va,_o,xo,bo,wo,Eo,To,So)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(va,_o,xo,bo,wo,Eo,To,So){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:va,radiusBottom:_o,height:xo,radialSegments:bo,heightSegments:wo,openEnded:Eo,thetaStart:To,thetaLength:So};var $o=this;va=va!==void 0?va:1,_o=_o!==void 0?_o:1,xo=xo||1,bo=Math.floor(bo)||8,wo=Math.floor(wo)||1,Eo=Eo!==void 0?Eo:!1,To=To!==void 0?To:0,So=So!==void 0?So:Math.PI*2;var Do=[],No=[],Oo=[],Lo=[],Co=0,Ro=[],jo=xo/2,zo=0;Io(),Eo===!1&&(va>0&&Po(!0),_o>0&&Po(!1)),this.setIndex(Do),this.setAttribute("position",new Float32BufferAttribute(No,3)),this.setAttribute("normal",new Float32BufferAttribute(Oo,3)),this.setAttribute("uv",new Float32BufferAttribute(Lo,2));function Io(){var Bo,ko,Uo=new Vector3,Qo=new Vector3,qo=0,Zo=(_o-va)/xo;for(ko=0;ko<=wo;ko++){var Xo=[],Fo=ko/wo,Go=Fo*(_o-va)+va;for(Bo=0;Bo<=bo;Bo++){var Vo=Bo/bo,Wo=Vo*So+To,Yo=Math.sin(Wo),Ko=Math.cos(Wo);Qo.x=Go*Yo,Qo.y=-Fo*xo+jo,Qo.z=Go*Ko,No.push(Qo.x,Qo.y,Qo.z),Uo.set(Yo,Zo,Ko).normalize(),Oo.push(Uo.x,Uo.y,Uo.z),Lo.push(Vo,1-Fo),Xo.push(Co++)}Ro.push(Xo)}for(Bo=0;Bo<bo;Bo++)for(ko=0;ko<wo;ko++){var ts=Ro[ko][Bo],Jo=Ro[ko+1][Bo],rs=Ro[ko+1][Bo+1],ls=Ro[ko][Bo+1];Do.push(ts,Jo,ls),Do.push(Jo,rs,ls),qo+=6}$o.addGroup(zo,qo,0),zo+=qo}function Po(Bo){var ko,Uo,Qo,qo=new Vector2,Zo=new Vector3,Xo=0,Fo=Bo===!0?va:_o,Go=Bo===!0?1:-1;for(Uo=Co,ko=1;ko<=bo;ko++)No.push(0,jo*Go,0),Oo.push(0,Go,0),Lo.push(.5,.5),Co++;for(Qo=Co,ko=0;ko<=bo;ko++){var Vo=ko/bo,Wo=Vo*So+To,Yo=Math.cos(Wo),Ko=Math.sin(Wo);Zo.x=Fo*Ko,Zo.y=jo*Go,Zo.z=Fo*Yo,No.push(Zo.x,Zo.y,Zo.z),Oo.push(0,Go,0),qo.x=Yo*.5+.5,qo.y=Ko*.5*Go+.5,Lo.push(qo.x,qo.y),Co++}for(ko=0;ko<bo;ko++){var ts=Uo+ko,Jo=Qo+ko;Bo===!0?Do.push(Jo,Jo+1,ts):Do.push(Jo+1,Jo,ts),Xo+=3}$o.addGroup(zo,Xo,Bo===!0?1:2),zo+=Xo}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(va,_o,xo,bo,wo,Eo,To){CylinderGeometry.call(this,0,va,_o,xo,bo,wo,Eo,To),this.type="ConeGeometry",this.parameters={radius:va,height:_o,radialSegments:xo,heightSegments:bo,openEnded:wo,thetaStart:Eo,thetaLength:To}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(va,_o,xo,bo,wo,Eo,To){CylinderBufferGeometry.call(this,0,va,_o,xo,bo,wo,Eo,To),this.type="ConeBufferGeometry",this.parameters={radius:va,height:_o,radialSegments:xo,heightSegments:bo,openEnded:wo,thetaStart:Eo,thetaLength:To}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(va,_o,xo,bo){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:va,segments:_o,thetaStart:xo,thetaLength:bo},this.fromBufferGeometry(new CircleBufferGeometry(va,_o,xo,bo)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(va,_o,xo,bo){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:va,segments:_o,thetaStart:xo,thetaLength:bo},va=va||1,_o=_o!==void 0?Math.max(3,_o):8,xo=xo!==void 0?xo:0,bo=bo!==void 0?bo:Math.PI*2;var wo=[],Eo=[],To=[],So=[],$o,Do,No=new Vector3,Oo=new Vector2;for(Eo.push(0,0,0),To.push(0,0,1),So.push(.5,.5),Do=0,$o=3;Do<=_o;Do++,$o+=3){var Lo=xo+Do/_o*bo;No.x=va*Math.cos(Lo),No.y=va*Math.sin(Lo),Eo.push(No.x,No.y,No.z),To.push(0,0,1),Oo.x=(Eo[$o]/va+1)/2,Oo.y=(Eo[$o+1]/va+1)/2,So.push(Oo.x,Oo.y)}for($o=1;$o<=_o;$o++)wo.push($o,$o+1,0);this.setIndex(wo),this.setAttribute("position",new Float32BufferAttribute(Eo,3)),this.setAttribute("normal",new Float32BufferAttribute(To,3)),this.setAttribute("uv",new Float32BufferAttribute(So,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(va){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(va)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this};function RawShaderMaterial(va){ShaderMaterial.call(this,va),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(va){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(va)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.defines={STANDARD:""},this.color.copy(va.color),this.roughness=va.roughness,this.metalness=va.metalness,this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.roughnessMap=va.roughnessMap,this.metalnessMap=va.metalnessMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.envMapIntensity=va.envMapIntensity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this.vertexTangents=va.vertexTangents,this};function MeshPhysicalMaterial(va){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(va)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(va){return MeshStandardMaterial.prototype.copy.call(this,va),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=va.clearcoat,this.clearcoatMap=va.clearcoatMap,this.clearcoatRoughness=va.clearcoatRoughness,this.clearcoatRoughnessMap=va.clearcoatRoughnessMap,this.clearcoatNormalMap=va.clearcoatNormalMap,this.clearcoatNormalScale.copy(va.clearcoatNormalScale),this.reflectivity=va.reflectivity,va.sheen?this.sheen=(this.sheen||new Color).copy(va.sheen):this.sheen=null,this.transparency=va.transparency,this};function MeshPhongMaterial(va){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.specular.copy(va.specular),this.shininess=va.shininess,this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshToonMaterial(va){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.specular.copy(va.specular),this.shininess=va.shininess,this.map=va.map,this.gradientMap=va.gradientMap,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshNormalMaterial(va){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshLambertMaterial(va){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.color.copy(va.color),this.map=va.map,this.lightMap=va.lightMap,this.lightMapIntensity=va.lightMapIntensity,this.aoMap=va.aoMap,this.aoMapIntensity=va.aoMapIntensity,this.emissive.copy(va.emissive),this.emissiveMap=va.emissiveMap,this.emissiveIntensity=va.emissiveIntensity,this.specularMap=va.specularMap,this.alphaMap=va.alphaMap,this.envMap=va.envMap,this.combine=va.combine,this.reflectivity=va.reflectivity,this.refractionRatio=va.refractionRatio,this.wireframe=va.wireframe,this.wireframeLinewidth=va.wireframeLinewidth,this.wireframeLinecap=va.wireframeLinecap,this.wireframeLinejoin=va.wireframeLinejoin,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function MeshMatcapMaterial(va){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(va)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(va){return Material.prototype.copy.call(this,va),this.defines={MATCAP:""},this.color.copy(va.color),this.matcap=va.matcap,this.map=va.map,this.bumpMap=va.bumpMap,this.bumpScale=va.bumpScale,this.normalMap=va.normalMap,this.normalMapType=va.normalMapType,this.normalScale.copy(va.normalScale),this.displacementMap=va.displacementMap,this.displacementScale=va.displacementScale,this.displacementBias=va.displacementBias,this.alphaMap=va.alphaMap,this.skinning=va.skinning,this.morphTargets=va.morphTargets,this.morphNormals=va.morphNormals,this};function LineDashedMaterial(va){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(va)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(va){return LineBasicMaterial.prototype.copy.call(this,va),this.scale=va.scale,this.dashSize=va.dashSize,this.gapSize=va.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(va,_o,xo){return AnimationUtils.isTypedArray(va)?new va.constructor(va.subarray(_o,xo!==void 0?xo:va.length)):va.slice(_o,xo)},convertArray:function(va,_o,xo){return!va||!xo&&va.constructor===_o?va:typeof _o.BYTES_PER_ELEMENT=="number"?new _o(va):Array.prototype.slice.call(va)},isTypedArray:function(va){return ArrayBuffer.isView(va)&&!(va instanceof DataView)},getKeyframeOrder:function(va){function _o(Eo,To){return va[Eo]-va[To]}for(var xo=va.length,bo=new Array(xo),wo=0;wo!==xo;++wo)bo[wo]=wo;return bo.sort(_o),bo},sortedArray:function(va,_o,xo){for(var bo=va.length,wo=new va.constructor(bo),Eo=0,To=0;To!==bo;++Eo)for(var So=xo[Eo]*_o,$o=0;$o!==_o;++$o)wo[To++]=va[So+$o];return wo},flattenJSON:function(va,_o,xo,bo){for(var wo=1,Eo=va[0];Eo!==void 0&&Eo[bo]===void 0;)Eo=va[wo++];if(Eo!==void 0){var To=Eo[bo];if(To!==void 0)if(Array.isArray(To))do To=Eo[bo],To!==void 0&&(_o.push(Eo.time),xo.push.apply(xo,To)),Eo=va[wo++];while(Eo!==void 0);else if(To.toArray!==void 0)do To=Eo[bo],To!==void 0&&(_o.push(Eo.time),To.toArray(xo,xo.length)),Eo=va[wo++];while(Eo!==void 0);else do To=Eo[bo],To!==void 0&&(_o.push(Eo.time),xo.push(To)),Eo=va[wo++];while(Eo!==void 0)}},subclip:function(va,_o,xo,bo,wo){wo=wo||30;var Eo=va.clone();Eo.name=_o;for(var To=[],So=0;So<Eo.tracks.length;++So){for(var $o=Eo.tracks[So],Do=$o.getValueSize(),No=[],Oo=[],Lo=0;Lo<$o.times.length;++Lo){var Co=$o.times[Lo]*wo;if(!(Co<xo||Co>=bo)){No.push($o.times[Lo]);for(var Ro=0;Ro<Do;++Ro)Oo.push($o.values[Lo*Do+Ro])}}No.length!==0&&($o.times=AnimationUtils.convertArray(No,$o.times.constructor),$o.values=AnimationUtils.convertArray(Oo,$o.values.constructor),To.push($o))}Eo.tracks=To;for(var jo=1/0,So=0;So<Eo.tracks.length;++So)jo>Eo.tracks[So].times[0]&&(jo=Eo.tracks[So].times[0]);for(var So=0;So<Eo.tracks.length;++So)Eo.tracks[So].shift(-1*jo);return Eo.resetDuration(),Eo},makeClipAdditive:function(va,_o,xo,bo){_o===void 0&&(_o=0),xo===void 0&&(xo=va),(bo===void 0||bo<=0)&&(bo=30);for(var wo=va.tracks.length,Eo=_o/bo,To=0;To<wo;++To){var So=xo.tracks[To],$o=So.ValueTypeName;if(!($o==="bool"||$o==="string")){var Do=va.tracks.find(function(ko){return ko.name===So.name&&ko.ValueTypeName===$o});if(Do!==void 0){var No=So.getValueSize(),Oo=So.times.length-1,Lo;if(Eo<=So.times[0])Lo=AnimationUtils.arraySlice(So.values,0,So.valueSize);else if(Eo>=So.times[Oo]){var Co=Oo*No;Lo=AnimationUtils.arraySlice(So.values,Co)}else{var Ro=So.createInterpolant();Ro.evaluate(Eo),Lo=Ro.resultBuffer}if($o==="quaternion"){var jo=new Quaternion(Lo[0],Lo[1],Lo[2],Lo[3]).normalize().conjugate();jo.toArray(Lo)}for(var zo=Do.times.length,Io=0;Io<zo;++Io){var Po=Io*No;if($o==="quaternion")Quaternion.multiplyQuaternionsFlat(Do.values,Po,Lo,0,Do.values,Po);else for(var Bo=0;Bo<No;++Bo)Do.values[Po+Bo]-=Lo[Bo]}}}}return va.blendMode=AdditiveAnimationBlendMode,va}};function Interpolant(va,_o,xo,bo){this.parameterPositions=va,this._cachedIndex=0,this.resultBuffer=bo!==void 0?bo:new _o.constructor(xo),this.sampleValues=_o,this.valueSize=xo}Object.assign(Interpolant.prototype,{evaluate:function(va){var _o=this.parameterPositions,xo=this._cachedIndex,bo=_o[xo],wo=_o[xo-1];e:{t:{var Eo;r:{n:if(!(va<bo)){for(var To=xo+2;;){if(bo===void 0){if(va<wo)break n;return xo=_o.length,this._cachedIndex=xo,this.afterEnd_(xo-1,va,wo)}if(xo===To)break;if(wo=bo,bo=_o[++xo],va<bo)break t}Eo=_o.length;break r}if(!(va>=wo)){var So=_o[1];va<So&&(xo=2,wo=So);for(var To=xo-2;;){if(wo===void 0)return this._cachedIndex=0,this.beforeStart_(0,va,bo);if(xo===To)break;if(bo=wo,wo=_o[--xo-1],va>=wo)break t}Eo=xo,xo=0;break r}break e}for(;xo<Eo;){var $o=xo+Eo>>>1;va<_o[$o]?Eo=$o:xo=$o+1}if(bo=_o[xo],wo=_o[xo-1],wo===void 0)return this._cachedIndex=0,this.beforeStart_(0,va,bo);if(bo===void 0)return xo=_o.length,this._cachedIndex=xo,this.afterEnd_(xo-1,wo,va)}this._cachedIndex=xo,this.intervalChanged_(xo,wo,bo)}return this.interpolate_(xo,wo,va,bo)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(va){for(var _o=this.resultBuffer,xo=this.sampleValues,bo=this.valueSize,wo=va*bo,Eo=0;Eo!==bo;++Eo)_o[Eo]=xo[wo+Eo];return _o},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(va,_o,xo,bo){Interpolant.call(this,va,_o,xo,bo),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(va,_o,xo){var bo=this.parameterPositions,wo=va-2,Eo=va+1,To=bo[wo],So=bo[Eo];if(To===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:wo=va,To=2*_o-xo;break;case WrapAroundEnding:wo=bo.length-2,To=_o+bo[wo]-bo[wo+1];break;default:wo=va,To=xo}if(So===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Eo=va,So=2*xo-_o;break;case WrapAroundEnding:Eo=1,So=xo+bo[1]-bo[0];break;default:Eo=va-1,So=_o}var $o=(xo-_o)*.5,Do=this.valueSize;this._weightPrev=$o/(_o-To),this._weightNext=$o/(So-xo),this._offsetPrev=wo*Do,this._offsetNext=Eo*Do},interpolate_:function(va,_o,xo,bo){for(var wo=this.resultBuffer,Eo=this.sampleValues,To=this.valueSize,So=va*To,$o=So-To,Do=this._offsetPrev,No=this._offsetNext,Oo=this._weightPrev,Lo=this._weightNext,Co=(xo-_o)/(bo-_o),Ro=Co*Co,jo=Ro*Co,zo=-Oo*jo+2*Oo*Ro-Oo*Co,Io=(1+Oo)*jo+(-1.5-2*Oo)*Ro+(-.5+Oo)*Co+1,Po=(-1-Lo)*jo+(1.5+Lo)*Ro+.5*Co,Bo=Lo*jo-Lo*Ro,ko=0;ko!==To;++ko)wo[ko]=zo*Eo[Do+ko]+Io*Eo[$o+ko]+Po*Eo[So+ko]+Bo*Eo[No+ko];return wo}});function LinearInterpolant(va,_o,xo,bo){Interpolant.call(this,va,_o,xo,bo)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(va,_o,xo,bo){for(var wo=this.resultBuffer,Eo=this.sampleValues,To=this.valueSize,So=va*To,$o=So-To,Do=(xo-_o)/(bo-_o),No=1-Do,Oo=0;Oo!==To;++Oo)wo[Oo]=Eo[$o+Oo]*No+Eo[So+Oo]*Do;return wo}});function DiscreteInterpolant(va,_o,xo,bo){Interpolant.call(this,va,_o,xo,bo)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(va){return this.copySampleValue_(va-1)}});function KeyframeTrack(va,_o,xo,bo){if(va===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(_o===void 0||_o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+va);this.name=va,this.times=AnimationUtils.convertArray(_o,this.TimeBufferType),this.values=AnimationUtils.convertArray(xo,this.ValueBufferType),this.setInterpolation(bo||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(va){var _o=va.constructor,xo;if(_o.toJSON!==void 0)xo=_o.toJSON(va);else{xo={name:va.name,times:AnimationUtils.convertArray(va.times,Array),values:AnimationUtils.convertArray(va.values,Array)};var bo=va.getInterpolation();bo!==va.DefaultInterpolation&&(xo.interpolation=bo)}return xo.type=va.ValueTypeName,xo}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(va){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodLinear:function(va){return new LinearInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodSmooth:function(va){return new CubicInterpolant(this.times,this.values,this.getValueSize(),va)},setInterpolation:function(va){var _o;switch(va){case InterpolateDiscrete:_o=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:_o=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:_o=this.InterpolantFactoryMethodSmooth;break}if(_o===void 0){var xo="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(va!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(xo);return console.warn("THREE.KeyframeTrack:",xo),this}return this.createInterpolant=_o,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(va){if(va!==0)for(var _o=this.times,xo=0,bo=_o.length;xo!==bo;++xo)_o[xo]+=va;return this},scale:function(va){if(va!==1)for(var _o=this.times,xo=0,bo=_o.length;xo!==bo;++xo)_o[xo]*=va;return this},trim:function(va,_o){for(var xo=this.times,bo=xo.length,wo=0,Eo=bo-1;wo!==bo&&xo[wo]<va;)++wo;for(;Eo!==-1&&xo[Eo]>_o;)--Eo;if(++Eo,wo!==0||Eo!==bo){wo>=Eo&&(Eo=Math.max(Eo,1),wo=Eo-1);var To=this.getValueSize();this.times=AnimationUtils.arraySlice(xo,wo,Eo),this.values=AnimationUtils.arraySlice(this.values,wo*To,Eo*To)}return this},validate:function(){var va=!0,_o=this.getValueSize();_o-Math.floor(_o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),va=!1);var xo=this.times,bo=this.values,wo=xo.length;wo===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),va=!1);for(var Eo=null,To=0;To!==wo;To++){var So=xo[To];if(typeof So=="number"&&isNaN(So)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,To,So),va=!1;break}if(Eo!==null&&Eo>So){console.error("THREE.KeyframeTrack: Out of order keys.",this,To,So,Eo),va=!1;break}Eo=So}if(bo!==void 0&&AnimationUtils.isTypedArray(bo))for(var To=0,$o=bo.length;To!==$o;++To){var Do=bo[To];if(isNaN(Do)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,To,Do),va=!1;break}}return va},optimize:function(){for(var va=AnimationUtils.arraySlice(this.times),_o=AnimationUtils.arraySlice(this.values),xo=this.getValueSize(),bo=this.getInterpolation()===InterpolateSmooth,wo=1,Eo=va.length-1,To=1;To<Eo;++To){var So=!1,$o=va[To],Do=va[To+1];if($o!==Do&&(To!==1||$o!==$o[0]))if(bo)So=!0;else for(var No=To*xo,Oo=No-xo,Lo=No+xo,Co=0;Co!==xo;++Co){var Ro=_o[No+Co];if(Ro!==_o[Oo+Co]||Ro!==_o[Lo+Co]){So=!0;break}}if(So){if(To!==wo){va[wo]=va[To];for(var jo=To*xo,zo=wo*xo,Co=0;Co!==xo;++Co)_o[zo+Co]=_o[jo+Co]}++wo}}if(Eo>0){va[wo]=va[Eo];for(var jo=Eo*xo,zo=wo*xo,Co=0;Co!==xo;++Co)_o[zo+Co]=_o[jo+Co];++wo}return wo!==va.length?(this.times=AnimationUtils.arraySlice(va,0,wo),this.values=AnimationUtils.arraySlice(_o,0,wo*xo)):(this.times=va,this.values=_o),this},clone:function(){var va=AnimationUtils.arraySlice(this.times,0),_o=AnimationUtils.arraySlice(this.values,0),xo=this.constructor,bo=new xo(this.name,va,_o);return bo.createInterpolant=this.createInterpolant,bo}});function BooleanKeyframeTrack(va,_o,xo){KeyframeTrack.call(this,va,_o,xo)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(va,_o,xo,bo){KeyframeTrack.call(this,va,_o,xo,bo)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(va,_o,xo,bo){KeyframeTrack.call(this,va,_o,xo,bo)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(va,_o,xo,bo){Interpolant.call(this,va,_o,xo,bo)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(va,_o,xo,bo){for(var wo=this.resultBuffer,Eo=this.sampleValues,To=this.valueSize,So=va*To,$o=(xo-_o)/(bo-_o),Do=So+To;So!==Do;So+=4)Quaternion.slerpFlat(wo,0,Eo,So-To,Eo,So,$o);return wo}});function QuaternionKeyframeTrack(va,_o,xo,bo){KeyframeTrack.call(this,va,_o,xo,bo)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(va){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),va)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(va,_o,xo,bo){KeyframeTrack.call(this,va,_o,xo,bo)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(va,_o,xo,bo){KeyframeTrack.call(this,va,_o,xo,bo)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(va,_o,xo,bo){this.name=va,this.tracks=xo,this.duration=_o!==void 0?_o:-1,this.blendMode=bo!==void 0?bo:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(va){switch(va.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+va)}function parseKeyframeTrack(va){if(va.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var _o=getTrackTypeForValueTypeName(va.type);if(va.times===void 0){var xo=[],bo=[];AnimationUtils.flattenJSON(va.keys,xo,bo,"value"),va.times=xo,va.values=bo}return _o.parse!==void 0?_o.parse(va):new _o(va.name,va.times,va.values,va.interpolation)}Object.assign(AnimationClip,{parse:function(va){for(var _o=[],xo=va.tracks,bo=1/(va.fps||1),wo=0,Eo=xo.length;wo!==Eo;++wo)_o.push(parseKeyframeTrack(xo[wo]).scale(bo));return new AnimationClip(va.name,va.duration,_o,va.blendMode)},toJSON:function(va){for(var _o=[],xo=va.tracks,bo={name:va.name,duration:va.duration,tracks:_o,uuid:va.uuid,blendMode:va.blendMode},wo=0,Eo=xo.length;wo!==Eo;++wo)_o.push(KeyframeTrack.toJSON(xo[wo]));return bo},CreateFromMorphTargetSequence:function(va,_o,xo,bo){for(var wo=_o.length,Eo=[],To=0;To<wo;To++){var So=[],$o=[];So.push((To+wo-1)%wo,To,(To+1)%wo),$o.push(0,1,0);var Do=AnimationUtils.getKeyframeOrder(So);So=AnimationUtils.sortedArray(So,1,Do),$o=AnimationUtils.sortedArray($o,1,Do),!bo&&So[0]===0&&(So.push(wo),$o.push($o[0])),Eo.push(new NumberKeyframeTrack(".morphTargetInfluences["+_o[To].name+"]",So,$o).scale(1/xo))}return new AnimationClip(va,-1,Eo)},findByName:function(va,_o){var xo=va;if(!Array.isArray(va)){var bo=va;xo=bo.geometry&&bo.geometry.animations||bo.animations}for(var wo=0;wo<xo.length;wo++)if(xo[wo].name===_o)return xo[wo];return null},CreateClipsFromMorphTargetSequences:function(va,_o,xo){for(var bo={},wo=/^([\w-]*?)([\d]+)$/,Eo=0,To=va.length;Eo<To;Eo++){var So=va[Eo],$o=So.name.match(wo);if($o&&$o.length>1){var Do=$o[1],No=bo[Do];No||(bo[Do]=No=[]),No.push(So)}}var Oo=[];for(var Do in bo)Oo.push(AnimationClip.CreateFromMorphTargetSequence(Do,bo[Do],_o,xo));return Oo},parseAnimation:function(va,_o){if(!va)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var xo=function(ko,Uo,Qo,qo,Zo){if(Qo.length!==0){var Xo=[],Fo=[];AnimationUtils.flattenJSON(Qo,Xo,Fo,qo),Xo.length!==0&&Zo.push(new ko(Uo,Xo,Fo))}},bo=[],wo=va.name||"default",Eo=va.length||-1,To=va.fps||30,So=va.blendMode,$o=va.hierarchy||[],Do=0;Do<$o.length;Do++){var No=$o[Do].keys;if(!(!No||No.length===0))if(No[0].morphTargets){for(var Oo={},Lo=0;Lo<No.length;Lo++)if(No[Lo].morphTargets)for(var Co=0;Co<No[Lo].morphTargets.length;Co++)Oo[No[Lo].morphTargets[Co]]=-1;for(var Ro in Oo){for(var jo=[],zo=[],Co=0;Co!==No[Lo].morphTargets.length;++Co){var Io=No[Lo];jo.push(Io.time),zo.push(Io.morphTarget===Ro?1:0)}bo.push(new NumberKeyframeTrack(".morphTargetInfluence["+Ro+"]",jo,zo))}Eo=Oo.length*(To||1)}else{var Po=".bones["+_o[Do].name+"]";xo(VectorKeyframeTrack,Po+".position",No,"pos",bo),xo(QuaternionKeyframeTrack,Po+".quaternion",No,"rot",bo),xo(VectorKeyframeTrack,Po+".scale",No,"scl",bo)}}if(bo.length===0)return null;var Bo=new AnimationClip(wo,Eo,bo,So);return Bo}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var va=this.tracks,_o=0,xo=0,bo=va.length;xo!==bo;++xo){var wo=this.tracks[xo];_o=Math.max(_o,wo.times[wo.times.length-1])}return this.duration=_o,this},trim:function(){for(var va=0;va<this.tracks.length;va++)this.tracks[va].trim(0,this.duration);return this},validate:function(){for(var va=!0,_o=0;_o<this.tracks.length;_o++)va=va&&this.tracks[_o].validate();return va},optimize:function(){for(var va=0;va<this.tracks.length;va++)this.tracks[va].optimize();return this},clone:function(){for(var va=[],_o=0;_o<this.tracks.length;_o++)va.push(this.tracks[_o].clone());return new AnimationClip(this.name,this.duration,va,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(va,_o){this.enabled!==!1&&(this.files[va]=_o)},get:function(va){if(this.enabled!==!1)return this.files[va]},remove:function(va){delete this.files[va]},clear:function(){this.files={}}};function LoadingManager(va,_o,xo){var bo=this,wo=!1,Eo=0,To=0,So=void 0,$o=[];this.onStart=void 0,this.onLoad=va,this.onProgress=_o,this.onError=xo,this.itemStart=function(Do){To++,wo===!1&&bo.onStart!==void 0&&bo.onStart(Do,Eo,To),wo=!0},this.itemEnd=function(Do){Eo++,bo.onProgress!==void 0&&bo.onProgress(Do,Eo,To),Eo===To&&(wo=!1,bo.onLoad!==void 0&&bo.onLoad())},this.itemError=function(Do){bo.onError!==void 0&&bo.onError(Do)},this.resolveURL=function(Do){return So?So(Do):Do},this.setURLModifier=function(Do){return So=Do,this},this.addHandler=function(Do,No){return $o.push(Do,No),this},this.removeHandler=function(Do){var No=$o.indexOf(Do);return No!==-1&&$o.splice(No,2),this},this.getHandler=function(Do){for(var No=0,Oo=$o.length;No<Oo;No+=2){var Lo=$o[No],Co=$o[No+1];if(Lo.global&&(Lo.lastIndex=0),Lo.test(Do))return Co}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(va){this.manager=va!==void 0?va:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(va,_o){var xo=this;return new Promise(function(bo,wo){xo.load(va,bo,_o,wo)})},parse:function(){},setCrossOrigin:function(va){return this.crossOrigin=va,this},setPath:function(va){return this.path=va,this},setResourcePath:function(va){return this.resourcePath=va,this},setRequestHeader:function(va){return this.requestHeader=va,this}});var loading={};function FileLoader(va){Loader.call(this,va)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(va,_o,xo,bo){va===void 0&&(va=""),this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var wo=this,Eo=Cache.get(va);if(Eo!==void 0)return wo.manager.itemStart(va),setTimeout(function(){_o&&_o(Eo),wo.manager.itemEnd(va)},0),Eo;if(loading[va]!==void 0){loading[va].push({onLoad:_o,onProgress:xo,onError:bo});return}var To=/^data:(.*?)(;base64)?,(.*)$/,So=va.match(To);if(So){var $o=So[1],Do=!!So[2],No=So[3];No=decodeURIComponent(No),Do&&(No=atob(No));try{var Oo,Lo=(this.responseType||"").toLowerCase();switch(Lo){case"arraybuffer":case"blob":for(var Co=new Uint8Array(No.length),Ro=0;Ro<No.length;Ro++)Co[Ro]=No.charCodeAt(Ro);Lo==="blob"?Oo=new Blob([Co.buffer],{type:$o}):Oo=Co.buffer;break;case"document":var jo=new DOMParser;Oo=jo.parseFromString(No,$o);break;case"json":Oo=JSON.parse(No);break;default:Oo=No;break}setTimeout(function(){_o&&_o(Oo),wo.manager.itemEnd(va)},0)}catch(Po){setTimeout(function(){bo&&bo(Po),wo.manager.itemError(va),wo.manager.itemEnd(va)},0)}}else{loading[va]=[],loading[va].push({onLoad:_o,onProgress:xo,onError:bo});var zo=new XMLHttpRequest;zo.open("GET",va,!0),zo.addEventListener("load",function(Po){var Bo=this.response,ko=loading[va];if(delete loading[va],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(va,Bo);for(var Uo=0,Qo=ko.length;Uo<Qo;Uo++){var qo=ko[Uo];qo.onLoad&&qo.onLoad(Bo)}wo.manager.itemEnd(va)}else{for(var Uo=0,Qo=ko.length;Uo<Qo;Uo++){var qo=ko[Uo];qo.onError&&qo.onError(Po)}wo.manager.itemError(va),wo.manager.itemEnd(va)}},!1),zo.addEventListener("progress",function(Po){for(var Bo=loading[va],ko=0,Uo=Bo.length;ko<Uo;ko++){var Qo=Bo[ko];Qo.onProgress&&Qo.onProgress(Po)}},!1),zo.addEventListener("error",function(Po){var Bo=loading[va];delete loading[va];for(var ko=0,Uo=Bo.length;ko<Uo;ko++){var Qo=Bo[ko];Qo.onError&&Qo.onError(Po)}wo.manager.itemError(va),wo.manager.itemEnd(va)},!1),zo.addEventListener("abort",function(Po){var Bo=loading[va];delete loading[va];for(var ko=0,Uo=Bo.length;ko<Uo;ko++){var Qo=Bo[ko];Qo.onError&&Qo.onError(Po)}wo.manager.itemError(va),wo.manager.itemEnd(va)},!1),this.responseType!==void 0&&(zo.responseType=this.responseType),this.withCredentials!==void 0&&(zo.withCredentials=this.withCredentials),zo.overrideMimeType&&zo.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Io in this.requestHeader)zo.setRequestHeader(Io,this.requestHeader[Io]);zo.send(null)}return wo.manager.itemStart(va),zo},setResponseType:function(va){return this.responseType=va,this},setWithCredentials:function(va){return this.withCredentials=va,this},setMimeType:function(va){return this.mimeType=va,this}});function AnimationLoader(va){Loader.call(this,va)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new FileLoader(wo.manager);Eo.setPath(wo.path),Eo.load(va,function(To){try{_o(wo.parse(JSON.parse(To)))}catch(So){bo?bo(So):console.error(So),wo.manager.itemError(va)}},xo,bo)},parse:function(va){for(var _o=[],xo=0;xo<va.length;xo++){var bo=AnimationClip.parse(va[xo]);_o.push(bo)}return _o}});function CompressedTextureLoader(va){Loader.call(this,va)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(va,_o,xo,bo){var wo=this,Eo=[],To=new CompressedTexture;To.image=Eo;var So=new FileLoader(this.manager);So.setPath(this.path),So.setResponseType("arraybuffer");function $o(Lo){So.load(va[Lo],function(Co){var Ro=wo.parse(Co,!0);Eo[Lo]={width:Ro.width,height:Ro.height,format:Ro.format,mipmaps:Ro.mipmaps},Do+=1,Do===6&&(Ro.mipmapCount===1&&(To.minFilter=LinearFilter),To.format=Ro.format,To.needsUpdate=!0,_o&&_o(To))},xo,bo)}if(Array.isArray(va))for(var Do=0,No=0,Oo=va.length;No<Oo;++No)$o(No);else So.load(va,function(Lo){var Co=wo.parse(Lo,!0);if(Co.isCubemap)for(var Ro=Co.mipmaps.length/Co.mipmapCount,jo=0;jo<Ro;jo++){Eo[jo]={mipmaps:[]};for(var zo=0;zo<Co.mipmapCount;zo++)Eo[jo].mipmaps.push(Co.mipmaps[jo*Co.mipmapCount+zo]),Eo[jo].format=Co.format,Eo[jo].width=Co.width,Eo[jo].height=Co.height}else To.image.width=Co.width,To.image.height=Co.height,To.mipmaps=Co.mipmaps;Co.mipmapCount===1&&(To.minFilter=LinearFilter),To.format=Co.format,To.needsUpdate=!0,_o&&_o(To)},xo,bo);return To}});function DataTextureLoader(va){Loader.call(this,va)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new DataTexture,To=new FileLoader(this.manager);return To.setResponseType("arraybuffer"),To.setPath(this.path),To.load(va,function(So){var $o=wo.parse(So);!$o||($o.image!==void 0?Eo.image=$o.image:$o.data!==void 0&&(Eo.image.width=$o.width,Eo.image.height=$o.height,Eo.image.data=$o.data),Eo.wrapS=$o.wrapS!==void 0?$o.wrapS:ClampToEdgeWrapping,Eo.wrapT=$o.wrapT!==void 0?$o.wrapT:ClampToEdgeWrapping,Eo.magFilter=$o.magFilter!==void 0?$o.magFilter:LinearFilter,Eo.minFilter=$o.minFilter!==void 0?$o.minFilter:LinearFilter,Eo.anisotropy=$o.anisotropy!==void 0?$o.anisotropy:1,$o.format!==void 0&&(Eo.format=$o.format),$o.type!==void 0&&(Eo.type=$o.type),$o.mipmaps!==void 0&&(Eo.mipmaps=$o.mipmaps,Eo.minFilter=LinearMipmapLinearFilter),$o.mipmapCount===1&&(Eo.minFilter=LinearFilter),Eo.needsUpdate=!0,_o&&_o(Eo,$o))},xo,bo),Eo}});function ImageLoader(va){Loader.call(this,va)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(va,_o,xo,bo){this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var wo=this,Eo=Cache.get(va);if(Eo!==void 0)return wo.manager.itemStart(va),setTimeout(function(){_o&&_o(Eo),wo.manager.itemEnd(va)},0),Eo;var To=document.createElementNS("http://www.w3.org/1999/xhtml","img");function So(){To.removeEventListener("load",So,!1),To.removeEventListener("error",$o,!1),Cache.add(va,this),_o&&_o(this),wo.manager.itemEnd(va)}function $o(Do){To.removeEventListener("load",So,!1),To.removeEventListener("error",$o,!1),bo&&bo(Do),wo.manager.itemError(va),wo.manager.itemEnd(va)}return To.addEventListener("load",So,!1),To.addEventListener("error",$o,!1),va.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(To.crossOrigin=this.crossOrigin),wo.manager.itemStart(va),To.src=va,To}});function CubeTextureLoader(va){Loader.call(this,va)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(va,_o,xo,bo){var wo=new CubeTexture,Eo=new ImageLoader(this.manager);Eo.setCrossOrigin(this.crossOrigin),Eo.setPath(this.path);var To=0;function So(Do){Eo.load(va[Do],function(No){wo.images[Do]=No,To++,To===6&&(wo.needsUpdate=!0,_o&&_o(wo))},void 0,bo)}for(var $o=0;$o<va.length;++$o)So($o);return wo}});function TextureLoader(va){Loader.call(this,va)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(va,_o,xo,bo){var wo=new Texture,Eo=new ImageLoader(this.manager);return Eo.setCrossOrigin(this.crossOrigin),Eo.setPath(this.path),Eo.load(va,function(To){wo.image=To;var So=va.search(/\.jpe?g($|\?)/i)>0||va.search(/^data\:image\/jpeg/)===0;wo.format=So?RGBFormat:RGBAFormat,wo.needsUpdate=!0,_o!==void 0&&_o(wo)},xo,bo),wo}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(va,_o){var xo=this.getUtoTmapping(va);return this.getPoint(xo,_o)},getPoints:function(va){va===void 0&&(va=5);for(var _o=[],xo=0;xo<=va;xo++)_o.push(this.getPoint(xo/va));return _o},getSpacedPoints:function(va){va===void 0&&(va=5);for(var _o=[],xo=0;xo<=va;xo++)_o.push(this.getPointAt(xo/va));return _o},getLength:function(){var va=this.getLengths();return va[va.length-1]},getLengths:function(va){if(va===void 0&&(va=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===va+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var _o=[],xo,bo=this.getPoint(0),wo,Eo=0;for(_o.push(0),wo=1;wo<=va;wo++)xo=this.getPoint(wo/va),Eo+=xo.distanceTo(bo),_o.push(Eo),bo=xo;return this.cacheArcLengths=_o,_o},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(va,_o){var xo=this.getLengths(),bo=0,wo=xo.length,Eo;_o?Eo=_o:Eo=va*xo[wo-1];for(var To=0,So=wo-1,$o;To<=So;)if(bo=Math.floor(To+(So-To)/2),$o=xo[bo]-Eo,$o<0)To=bo+1;else if($o>0)So=bo-1;else{So=bo;break}if(bo=So,xo[bo]===Eo)return bo/(wo-1);var Do=xo[bo],No=xo[bo+1],Oo=No-Do,Lo=(Eo-Do)/Oo,Co=(bo+Lo)/(wo-1);return Co},getTangent:function(va,_o){var xo=1e-4,bo=va-xo,wo=va+xo;bo<0&&(bo=0),wo>1&&(wo=1);var Eo=this.getPoint(bo),To=this.getPoint(wo),So=_o||(Eo.isVector2?new Vector2:new Vector3);return So.copy(To).sub(Eo).normalize(),So},getTangentAt:function(va,_o){var xo=this.getUtoTmapping(va);return this.getTangent(xo,_o)},computeFrenetFrames:function(va,_o){var xo=new Vector3,bo=[],wo=[],Eo=[],To=new Vector3,So=new Matrix4,$o,Do,No;for($o=0;$o<=va;$o++)Do=$o/va,bo[$o]=this.getTangentAt(Do,new Vector3),bo[$o].normalize();wo[0]=new Vector3,Eo[0]=new Vector3;var Oo=Number.MAX_VALUE,Lo=Math.abs(bo[0].x),Co=Math.abs(bo[0].y),Ro=Math.abs(bo[0].z);for(Lo<=Oo&&(Oo=Lo,xo.set(1,0,0)),Co<=Oo&&(Oo=Co,xo.set(0,1,0)),Ro<=Oo&&xo.set(0,0,1),To.crossVectors(bo[0],xo).normalize(),wo[0].crossVectors(bo[0],To),Eo[0].crossVectors(bo[0],wo[0]),$o=1;$o<=va;$o++)wo[$o]=wo[$o-1].clone(),Eo[$o]=Eo[$o-1].clone(),To.crossVectors(bo[$o-1],bo[$o]),To.length()>Number.EPSILON&&(To.normalize(),No=Math.acos(MathUtils.clamp(bo[$o-1].dot(bo[$o]),-1,1)),wo[$o].applyMatrix4(So.makeRotationAxis(To,No))),Eo[$o].crossVectors(bo[$o],wo[$o]);if(_o===!0)for(No=Math.acos(MathUtils.clamp(wo[0].dot(wo[va]),-1,1)),No/=va,bo[0].dot(To.crossVectors(wo[0],wo[va]))>0&&(No=-No),$o=1;$o<=va;$o++)wo[$o].applyMatrix4(So.makeRotationAxis(bo[$o],No*$o)),Eo[$o].crossVectors(bo[$o],wo[$o]);return{tangents:bo,normals:wo,binormals:Eo}},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.arcLengthDivisions=va.arcLengthDivisions,this},toJSON:function(){var va={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return va.arcLengthDivisions=this.arcLengthDivisions,va.type=this.type,va},fromJSON:function(va){return this.arcLengthDivisions=va.arcLengthDivisions,this}});function EllipseCurve(va,_o,xo,bo,wo,Eo,To,So){Curve.call(this),this.type="EllipseCurve",this.aX=va||0,this.aY=_o||0,this.xRadius=xo||1,this.yRadius=bo||1,this.aStartAngle=wo||0,this.aEndAngle=Eo||2*Math.PI,this.aClockwise=To||!1,this.aRotation=So||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(va,_o){for(var xo=_o||new Vector2,bo=Math.PI*2,wo=this.aEndAngle-this.aStartAngle,Eo=Math.abs(wo)<Number.EPSILON;wo<0;)wo+=bo;for(;wo>bo;)wo-=bo;wo<Number.EPSILON&&(Eo?wo=0:wo=bo),this.aClockwise===!0&&!Eo&&(wo===bo?wo=-bo:wo=wo-bo);var To=this.aStartAngle+va*wo,So=this.aX+this.xRadius*Math.cos(To),$o=this.aY+this.yRadius*Math.sin(To);if(this.aRotation!==0){var Do=Math.cos(this.aRotation),No=Math.sin(this.aRotation),Oo=So-this.aX,Lo=$o-this.aY;So=Oo*Do-Lo*No+this.aX,$o=Oo*No+Lo*Do+this.aY}return xo.set(So,$o)};EllipseCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.aX=va.aX,this.aY=va.aY,this.xRadius=va.xRadius,this.yRadius=va.yRadius,this.aStartAngle=va.aStartAngle,this.aEndAngle=va.aEndAngle,this.aClockwise=va.aClockwise,this.aRotation=va.aRotation,this};EllipseCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.aX=this.aX,va.aY=this.aY,va.xRadius=this.xRadius,va.yRadius=this.yRadius,va.aStartAngle=this.aStartAngle,va.aEndAngle=this.aEndAngle,va.aClockwise=this.aClockwise,va.aRotation=this.aRotation,va};EllipseCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.aX=va.aX,this.aY=va.aY,this.xRadius=va.xRadius,this.yRadius=va.yRadius,this.aStartAngle=va.aStartAngle,this.aEndAngle=va.aEndAngle,this.aClockwise=va.aClockwise,this.aRotation=va.aRotation,this};function ArcCurve(va,_o,xo,bo,wo,Eo){EllipseCurve.call(this,va,_o,xo,xo,bo,wo,Eo),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var va=0,_o=0,xo=0,bo=0;function wo(Eo,To,So,$o){va=Eo,_o=So,xo=-3*Eo+3*To-2*So-$o,bo=2*Eo-2*To+So+$o}return{initCatmullRom:function(Eo,To,So,$o,Do){wo(To,So,Do*(So-Eo),Do*($o-To))},initNonuniformCatmullRom:function(Eo,To,So,$o,Do,No,Oo){var Lo=(To-Eo)/Do-(So-Eo)/(Do+No)+(So-To)/No,Co=(So-To)/No-($o-To)/(No+Oo)+($o-So)/Oo;Lo*=No,Co*=No,wo(To,So,Lo,Co)},calc:function(Eo){var To=Eo*Eo,So=To*Eo;return va+_o*Eo+xo*To+bo*So}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(va,_o,xo,bo){Curve.call(this),this.type="CatmullRomCurve3",this.points=va||[],this.closed=_o||!1,this.curveType=xo||"centripetal",this.tension=bo||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(va,_o){var xo=_o||new Vector3,bo=this.points,wo=bo.length,Eo=(wo-(this.closed?0:1))*va,To=Math.floor(Eo),So=Eo-To;this.closed?To+=To>0?0:(Math.floor(Math.abs(To)/wo)+1)*wo:So===0&&To===wo-1&&(To=wo-2,So=1);var $o,Do,No,Oo;if(this.closed||To>0?$o=bo[(To-1)%wo]:(tmp.subVectors(bo[0],bo[1]).add(bo[0]),$o=tmp),Do=bo[To%wo],No=bo[(To+1)%wo],this.closed||To+2<wo?Oo=bo[(To+2)%wo]:(tmp.subVectors(bo[wo-1],bo[wo-2]).add(bo[wo-1]),Oo=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Lo=this.curveType==="chordal"?.5:.25,Co=Math.pow($o.distanceToSquared(Do),Lo),Ro=Math.pow(Do.distanceToSquared(No),Lo),jo=Math.pow(No.distanceToSquared(Oo),Lo);Ro<1e-4&&(Ro=1),Co<1e-4&&(Co=Ro),jo<1e-4&&(jo=Ro),px.initNonuniformCatmullRom($o.x,Do.x,No.x,Oo.x,Co,Ro,jo),py.initNonuniformCatmullRom($o.y,Do.y,No.y,Oo.y,Co,Ro,jo),pz.initNonuniformCatmullRom($o.z,Do.z,No.z,Oo.z,Co,Ro,jo)}else this.curveType==="catmullrom"&&(px.initCatmullRom($o.x,Do.x,No.x,Oo.x,this.tension),py.initCatmullRom($o.y,Do.y,No.y,Oo.y,this.tension),pz.initCatmullRom($o.z,Do.z,No.z,Oo.z,this.tension));return xo.set(px.calc(So),py.calc(So),pz.calc(So)),xo};CatmullRomCurve3.prototype.copy=function(va){Curve.prototype.copy.call(this,va),this.points=[];for(var _o=0,xo=va.points.length;_o<xo;_o++){var bo=va.points[_o];this.points.push(bo.clone())}return this.closed=va.closed,this.curveType=va.curveType,this.tension=va.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);va.points=[];for(var _o=0,xo=this.points.length;_o<xo;_o++){var bo=this.points[_o];va.points.push(bo.toArray())}return va.closed=this.closed,va.curveType=this.curveType,va.tension=this.tension,va};CatmullRomCurve3.prototype.fromJSON=function(va){Curve.prototype.fromJSON.call(this,va),this.points=[];for(var _o=0,xo=va.points.length;_o<xo;_o++){var bo=va.points[_o];this.points.push(new Vector3().fromArray(bo))}return this.closed=va.closed,this.curveType=va.curveType,this.tension=va.tension,this};function CatmullRom(va,_o,xo,bo,wo){var Eo=(bo-_o)*.5,To=(wo-xo)*.5,So=va*va,$o=va*So;return(2*xo-2*bo+Eo+To)*$o+(-3*xo+3*bo-2*Eo-To)*So+Eo*va+xo}function QuadraticBezierP0(va,_o){var xo=1-va;return xo*xo*_o}function QuadraticBezierP1(va,_o){return 2*(1-va)*va*_o}function QuadraticBezierP2(va,_o){return va*va*_o}function QuadraticBezier(va,_o,xo,bo){return QuadraticBezierP0(va,_o)+QuadraticBezierP1(va,xo)+QuadraticBezierP2(va,bo)}function CubicBezierP0(va,_o){var xo=1-va;return xo*xo*xo*_o}function CubicBezierP1(va,_o){var xo=1-va;return 3*xo*xo*va*_o}function CubicBezierP2(va,_o){return 3*(1-va)*va*va*_o}function CubicBezierP3(va,_o){return va*va*va*_o}function CubicBezier(va,_o,xo,bo,wo){return CubicBezierP0(va,_o)+CubicBezierP1(va,xo)+CubicBezierP2(va,bo)+CubicBezierP3(va,wo)}function CubicBezierCurve(va,_o,xo,bo){Curve.call(this),this.type="CubicBezierCurve",this.v0=va||new Vector2,this.v1=_o||new Vector2,this.v2=xo||new Vector2,this.v3=bo||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(va,_o){var xo=_o||new Vector2,bo=this.v0,wo=this.v1,Eo=this.v2,To=this.v3;return xo.set(CubicBezier(va,bo.x,wo.x,Eo.x,To.x),CubicBezier(va,bo.y,wo.y,Eo.y,To.y)),xo};CubicBezierCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this.v3.copy(va.v3),this};CubicBezierCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va.v3=this.v3.toArray(),va};CubicBezierCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this.v3.fromArray(va.v3),this};function CubicBezierCurve3(va,_o,xo,bo){Curve.call(this),this.type="CubicBezierCurve3",this.v0=va||new Vector3,this.v1=_o||new Vector3,this.v2=xo||new Vector3,this.v3=bo||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(va,_o){var xo=_o||new Vector3,bo=this.v0,wo=this.v1,Eo=this.v2,To=this.v3;return xo.set(CubicBezier(va,bo.x,wo.x,Eo.x,To.x),CubicBezier(va,bo.y,wo.y,Eo.y,To.y),CubicBezier(va,bo.z,wo.z,Eo.z,To.z)),xo};CubicBezierCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this.v3.copy(va.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va.v3=this.v3.toArray(),va};CubicBezierCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this.v3.fromArray(va.v3),this};function LineCurve(va,_o){Curve.call(this),this.type="LineCurve",this.v1=va||new Vector2,this.v2=_o||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(va,_o){var xo=_o||new Vector2;return va===1?xo.copy(this.v2):(xo.copy(this.v2).sub(this.v1),xo.multiplyScalar(va).add(this.v1)),xo};LineCurve.prototype.getPointAt=function(va,_o){return this.getPoint(va,_o)};LineCurve.prototype.getTangent=function(va,_o){var xo=_o||new Vector2,xo=xo.copy(this.v2).sub(this.v1).normalize();return xo};LineCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v1.copy(va.v1),this.v2.copy(va.v2),this};LineCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};LineCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function LineCurve3(va,_o){Curve.call(this),this.type="LineCurve3",this.v1=va||new Vector3,this.v2=_o||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(va,_o){var xo=_o||new Vector3;return va===1?xo.copy(this.v2):(xo.copy(this.v2).sub(this.v1),xo.multiplyScalar(va).add(this.v1)),xo};LineCurve3.prototype.getPointAt=function(va,_o){return this.getPoint(va,_o)};LineCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v1.copy(va.v1),this.v2.copy(va.v2),this};LineCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};LineCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function QuadraticBezierCurve(va,_o,xo){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=va||new Vector2,this.v1=_o||new Vector2,this.v2=xo||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(va,_o){var xo=_o||new Vector2,bo=this.v0,wo=this.v1,Eo=this.v2;return xo.set(QuadraticBezier(va,bo.x,wo.x,Eo.x),QuadraticBezier(va,bo.y,wo.y,Eo.y)),xo};QuadraticBezierCurve.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};QuadraticBezierCurve.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function QuadraticBezierCurve3(va,_o,xo){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=va||new Vector3,this.v1=_o||new Vector3,this.v2=xo||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(va,_o){var xo=_o||new Vector3,bo=this.v0,wo=this.v1,Eo=this.v2;return xo.set(QuadraticBezier(va,bo.x,wo.x,Eo.x),QuadraticBezier(va,bo.y,wo.y,Eo.y),QuadraticBezier(va,bo.z,wo.z,Eo.z)),xo};QuadraticBezierCurve3.prototype.copy=function(va){return Curve.prototype.copy.call(this,va),this.v0.copy(va.v0),this.v1.copy(va.v1),this.v2.copy(va.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);return va.v0=this.v0.toArray(),va.v1=this.v1.toArray(),va.v2=this.v2.toArray(),va};QuadraticBezierCurve3.prototype.fromJSON=function(va){return Curve.prototype.fromJSON.call(this,va),this.v0.fromArray(va.v0),this.v1.fromArray(va.v1),this.v2.fromArray(va.v2),this};function SplineCurve(va){Curve.call(this),this.type="SplineCurve",this.points=va||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(va,_o){var xo=_o||new Vector2,bo=this.points,wo=(bo.length-1)*va,Eo=Math.floor(wo),To=wo-Eo,So=bo[Eo===0?Eo:Eo-1],$o=bo[Eo],Do=bo[Eo>bo.length-2?bo.length-1:Eo+1],No=bo[Eo>bo.length-3?bo.length-1:Eo+2];return xo.set(CatmullRom(To,So.x,$o.x,Do.x,No.x),CatmullRom(To,So.y,$o.y,Do.y,No.y)),xo};SplineCurve.prototype.copy=function(va){Curve.prototype.copy.call(this,va),this.points=[];for(var _o=0,xo=va.points.length;_o<xo;_o++){var bo=va.points[_o];this.points.push(bo.clone())}return this};SplineCurve.prototype.toJSON=function(){var va=Curve.prototype.toJSON.call(this);va.points=[];for(var _o=0,xo=this.points.length;_o<xo;_o++){var bo=this.points[_o];va.points.push(bo.toArray())}return va};SplineCurve.prototype.fromJSON=function(va){Curve.prototype.fromJSON.call(this,va),this.points=[];for(var _o=0,xo=va.points.length;_o<xo;_o++){var bo=va.points[_o];this.points.push(new Vector2().fromArray(bo))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(va){this.curves.push(va)},closePath:function(){var va=this.curves[0].getPoint(0),_o=this.curves[this.curves.length-1].getPoint(1);va.equals(_o)||this.curves.push(new LineCurve(_o,va))},getPoint:function(va){for(var _o=va*this.getLength(),xo=this.getCurveLengths(),bo=0;bo<xo.length;){if(xo[bo]>=_o){var wo=xo[bo]-_o,Eo=this.curves[bo],To=Eo.getLength(),So=To===0?0:1-wo/To;return Eo.getPointAt(So)}bo++}return null},getLength:function(){var va=this.getCurveLengths();return va[va.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var va=[],_o=0,xo=0,bo=this.curves.length;xo<bo;xo++)_o+=this.curves[xo].getLength(),va.push(_o);return this.cacheLengths=va,va},getSpacedPoints:function(va){va===void 0&&(va=40);for(var _o=[],xo=0;xo<=va;xo++)_o.push(this.getPoint(xo/va));return this.autoClose&&_o.push(_o[0]),_o},getPoints:function(va){va=va||12;for(var _o=[],xo,bo=0,wo=this.curves;bo<wo.length;bo++)for(var Eo=wo[bo],To=Eo&&Eo.isEllipseCurve?va*2:Eo&&(Eo.isLineCurve||Eo.isLineCurve3)?1:Eo&&Eo.isSplineCurve?va*Eo.points.length:va,So=Eo.getPoints(To),$o=0;$o<So.length;$o++){var Do=So[$o];xo&&xo.equals(Do)||(_o.push(Do),xo=Do)}return this.autoClose&&_o.length>1&&!_o[_o.length-1].equals(_o[0])&&_o.push(_o[0]),_o},copy:function(va){Curve.prototype.copy.call(this,va),this.curves=[];for(var _o=0,xo=va.curves.length;_o<xo;_o++){var bo=va.curves[_o];this.curves.push(bo.clone())}return this.autoClose=va.autoClose,this},toJSON:function(){var va=Curve.prototype.toJSON.call(this);va.autoClose=this.autoClose,va.curves=[];for(var _o=0,xo=this.curves.length;_o<xo;_o++){var bo=this.curves[_o];va.curves.push(bo.toJSON())}return va},fromJSON:function(va){Curve.prototype.fromJSON.call(this,va),this.autoClose=va.autoClose,this.curves=[];for(var _o=0,xo=va.curves.length;_o<xo;_o++){var bo=va.curves[_o];this.curves.push(new Curves[bo.type]().fromJSON(bo))}return this}});function Path(va){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,va&&this.setFromPoints(va)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(va){this.moveTo(va[0].x,va[0].y);for(var _o=1,xo=va.length;_o<xo;_o++)this.lineTo(va[_o].x,va[_o].y);return this},moveTo:function(va,_o){return this.currentPoint.set(va,_o),this},lineTo:function(va,_o){var xo=new LineCurve(this.currentPoint.clone(),new Vector2(va,_o));return this.curves.push(xo),this.currentPoint.set(va,_o),this},quadraticCurveTo:function(va,_o,xo,bo){var wo=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(va,_o),new Vector2(xo,bo));return this.curves.push(wo),this.currentPoint.set(xo,bo),this},bezierCurveTo:function(va,_o,xo,bo,wo,Eo){var To=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(va,_o),new Vector2(xo,bo),new Vector2(wo,Eo));return this.curves.push(To),this.currentPoint.set(wo,Eo),this},splineThru:function(va){var _o=[this.currentPoint.clone()].concat(va),xo=new SplineCurve(_o);return this.curves.push(xo),this.currentPoint.copy(va[va.length-1]),this},arc:function(va,_o,xo,bo,wo,Eo){var To=this.currentPoint.x,So=this.currentPoint.y;return this.absarc(va+To,_o+So,xo,bo,wo,Eo),this},absarc:function(va,_o,xo,bo,wo,Eo){return this.absellipse(va,_o,xo,xo,bo,wo,Eo),this},ellipse:function(va,_o,xo,bo,wo,Eo,To,So){var $o=this.currentPoint.x,Do=this.currentPoint.y;return this.absellipse(va+$o,_o+Do,xo,bo,wo,Eo,To,So),this},absellipse:function(va,_o,xo,bo,wo,Eo,To,So){var $o=new EllipseCurve(va,_o,xo,bo,wo,Eo,To,So);if(this.curves.length>0){var Do=$o.getPoint(0);Do.equals(this.currentPoint)||this.lineTo(Do.x,Do.y)}this.curves.push($o);var No=$o.getPoint(1);return this.currentPoint.copy(No),this},copy:function(va){return CurvePath.prototype.copy.call(this,va),this.currentPoint.copy(va.currentPoint),this},toJSON:function(){var va=CurvePath.prototype.toJSON.call(this);return va.currentPoint=this.currentPoint.toArray(),va},fromJSON:function(va){return CurvePath.prototype.fromJSON.call(this,va),this.currentPoint.fromArray(va.currentPoint),this}});function Shape(va){Path.call(this,va),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(va){for(var _o=[],xo=0,bo=this.holes.length;xo<bo;xo++)_o[xo]=this.holes[xo].getPoints(va);return _o},extractPoints:function(va){return{shape:this.getPoints(va),holes:this.getPointsHoles(va)}},copy:function(va){Path.prototype.copy.call(this,va),this.holes=[];for(var _o=0,xo=va.holes.length;_o<xo;_o++){var bo=va.holes[_o];this.holes.push(bo.clone())}return this},toJSON:function(){var va=Path.prototype.toJSON.call(this);va.uuid=this.uuid,va.holes=[];for(var _o=0,xo=this.holes.length;_o<xo;_o++){var bo=this.holes[_o];va.holes.push(bo.toJSON())}return va},fromJSON:function(va){Path.prototype.fromJSON.call(this,va),this.uuid=va.uuid,this.holes=[];for(var _o=0,xo=va.holes.length;_o<xo;_o++){var bo=va.holes[_o];this.holes.push(new Path().fromJSON(bo))}return this}});function Light(va,_o){Object3D.call(this),this.type="Light",this.color=new Color(va),this.intensity=_o!==void 0?_o:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(va){return Object3D.prototype.copy.call(this,va),this.color.copy(va.color),this.intensity=va.intensity,this},toJSON:function(va){var _o=Object3D.prototype.toJSON.call(this,va);return _o.object.color=this.color.getHex(),_o.object.intensity=this.intensity,this.groundColor!==void 0&&(_o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(_o.object.distance=this.distance),this.angle!==void 0&&(_o.object.angle=this.angle),this.decay!==void 0&&(_o.object.decay=this.decay),this.penumbra!==void 0&&(_o.object.penumbra=this.penumbra),this.shadow!==void 0&&(_o.object.shadow=this.shadow.toJSON()),_o}});function HemisphereLight(va,_o,xo){Light.call(this,va,xo),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(_o)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.groundColor.copy(va.groundColor),this}});function LightShadow(va){this.camera=va,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(va){var _o=this.camera,xo=this.matrix,bo=this._projScreenMatrix,wo=this._lookTarget,Eo=this._lightPositionWorld;Eo.setFromMatrixPosition(va.matrixWorld),_o.position.copy(Eo),wo.setFromMatrixPosition(va.target.matrixWorld),_o.lookAt(wo),_o.updateMatrixWorld(),bo.multiplyMatrices(_o.projectionMatrix,_o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bo),xo.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),xo.multiply(_o.projectionMatrix),xo.multiply(_o.matrixWorldInverse)},getViewport:function(va){return this._viewports[va]},getFrameExtents:function(){return this._frameExtents},copy:function(va){return this.camera=va.camera.clone(),this.bias=va.bias,this.radius=va.radius,this.mapSize.copy(va.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var va={};return this.bias!==0&&(va.bias=this.bias),this.radius!==1&&(va.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(va.mapSize=this.mapSize.toArray()),va.camera=this.camera.toJSON(!1).object,delete va.camera.matrix,va}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(va){var _o=this.camera,xo=MathUtils.RAD2DEG*2*va.angle,bo=this.mapSize.width/this.mapSize.height,wo=va.distance||_o.far;(xo!==_o.fov||bo!==_o.aspect||wo!==_o.far)&&(_o.fov=xo,_o.aspect=bo,_o.far=wo,_o.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,va)}});function SpotLight(va,_o,xo,bo,wo,Eo){Light.call(this,va,_o),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(To){this.intensity=To/Math.PI}}),this.distance=xo!==void 0?xo:0,this.angle=bo!==void 0?bo:Math.PI/3,this.penumbra=wo!==void 0?wo:0,this.decay=Eo!==void 0?Eo:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.distance=va.distance,this.angle=va.angle,this.penumbra=va.penumbra,this.decay=va.decay,this.target=va.target.clone(),this.shadow=va.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(va,_o){_o===void 0&&(_o=0);var xo=this.camera,bo=this.matrix,wo=this._lightPositionWorld,Eo=this._lookTarget,To=this._projScreenMatrix;wo.setFromMatrixPosition(va.matrixWorld),xo.position.copy(wo),Eo.copy(xo.position),Eo.add(this._cubeDirections[_o]),xo.up.copy(this._cubeUps[_o]),xo.lookAt(Eo),xo.updateMatrixWorld(),bo.makeTranslation(-wo.x,-wo.y,-wo.z),To.multiplyMatrices(xo.projectionMatrix,xo.matrixWorldInverse),this._frustum.setFromProjectionMatrix(To)}});function PointLight(va,_o,xo,bo){Light.call(this,va,_o),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(wo){this.intensity=wo/(4*Math.PI)}}),this.distance=xo!==void 0?xo:0,this.decay=bo!==void 0?bo:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.distance=va.distance,this.decay=va.decay,this.shadow=va.shadow.clone(),this}});function OrthographicCamera(va,_o,xo,bo,wo,Eo){Camera$1.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=va!==void 0?va:-1,this.right=_o!==void 0?_o:1,this.top=xo!==void 0?xo:1,this.bottom=bo!==void 0?bo:-1,this.near=wo!==void 0?wo:.1,this.far=Eo!==void 0?Eo:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera$1.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(va,_o){return Camera$1.prototype.copy.call(this,va,_o),this.left=va.left,this.right=va.right,this.top=va.top,this.bottom=va.bottom,this.near=va.near,this.far=va.far,this.zoom=va.zoom,this.view=va.view===null?null:Object.assign({},va.view),this},setViewOffset:function(va,_o,xo,bo,wo,Eo){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=va,this.view.fullHeight=_o,this.view.offsetX=xo,this.view.offsetY=bo,this.view.width=wo,this.view.height=Eo,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var va=(this.right-this.left)/(2*this.zoom),_o=(this.top-this.bottom)/(2*this.zoom),xo=(this.right+this.left)/2,bo=(this.top+this.bottom)/2,wo=xo-va,Eo=xo+va,To=bo+_o,So=bo-_o;if(this.view!==null&&this.view.enabled){var $o=(this.right-this.left)/this.view.fullWidth/this.zoom,Do=(this.top-this.bottom)/this.view.fullHeight/this.zoom;wo+=$o*this.view.offsetX,Eo=wo+$o*this.view.width,To-=Do*this.view.offsetY,So=To-Do*this.view.height}this.projectionMatrix.makeOrthographic(wo,Eo,To,So,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(va){var _o=Object3D.prototype.toJSON.call(this,va);return _o.object.zoom=this.zoom,_o.object.left=this.left,_o.object.right=this.right,_o.object.top=this.top,_o.object.bottom=this.bottom,_o.object.near=this.near,_o.object.far=this.far,this.view!==null&&(_o.object.view=Object.assign({},this.view)),_o}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(va){LightShadow.prototype.updateMatrices.call(this,va)}});function DirectionalLight(va,_o){Light.call(this,va,_o),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.target=va.target.clone(),this.shadow=va.shadow.clone(),this}});function AmbientLight(va,_o){Light.call(this,va,_o),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(va,_o,xo,bo){Light.call(this,va,_o),this.type="RectAreaLight",this.width=xo!==void 0?xo:10,this.height=bo!==void 0?bo:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.width=va.width,this.height=va.height,this},toJSON:function(va){var _o=Light.prototype.toJSON.call(this,va);return _o.object.width=this.width,_o.object.height=this.height,_o}});function SphericalHarmonics3(){this.coefficients=[];for(var va=0;va<9;va++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(va){for(var _o=0;_o<9;_o++)this.coefficients[_o].copy(va[_o]);return this},zero:function(){for(var va=0;va<9;va++)this.coefficients[va].set(0,0,0);return this},getAt:function(va,_o){var xo=va.x,bo=va.y,wo=va.z,Eo=this.coefficients;return _o.copy(Eo[0]).multiplyScalar(.282095),_o.addScaledVector(Eo[1],.488603*bo),_o.addScaledVector(Eo[2],.488603*wo),_o.addScaledVector(Eo[3],.488603*xo),_o.addScaledVector(Eo[4],1.092548*(xo*bo)),_o.addScaledVector(Eo[5],1.092548*(bo*wo)),_o.addScaledVector(Eo[6],.315392*(3*wo*wo-1)),_o.addScaledVector(Eo[7],1.092548*(xo*wo)),_o.addScaledVector(Eo[8],.546274*(xo*xo-bo*bo)),_o},getIrradianceAt:function(va,_o){var xo=va.x,bo=va.y,wo=va.z,Eo=this.coefficients;return _o.copy(Eo[0]).multiplyScalar(.886227),_o.addScaledVector(Eo[1],2*.511664*bo),_o.addScaledVector(Eo[2],2*.511664*wo),_o.addScaledVector(Eo[3],2*.511664*xo),_o.addScaledVector(Eo[4],2*.429043*xo*bo),_o.addScaledVector(Eo[5],2*.429043*bo*wo),_o.addScaledVector(Eo[6],.743125*wo*wo-.247708),_o.addScaledVector(Eo[7],2*.429043*xo*wo),_o.addScaledVector(Eo[8],.429043*(xo*xo-bo*bo)),_o},add:function(va){for(var _o=0;_o<9;_o++)this.coefficients[_o].add(va.coefficients[_o]);return this},addScaledSH:function(va,_o){for(var xo=0;xo<9;xo++)this.coefficients[xo].addScaledVector(va.coefficients[xo],_o);return this},scale:function(va){for(var _o=0;_o<9;_o++)this.coefficients[_o].multiplyScalar(va);return this},lerp:function(va,_o){for(var xo=0;xo<9;xo++)this.coefficients[xo].lerp(va.coefficients[xo],_o);return this},equals:function(va){for(var _o=0;_o<9;_o++)if(!this.coefficients[_o].equals(va.coefficients[_o]))return!1;return!0},copy:function(va){return this.set(va.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(va,_o){_o===void 0&&(_o=0);for(var xo=this.coefficients,bo=0;bo<9;bo++)xo[bo].fromArray(va,_o+bo*3);return this},toArray:function(va,_o){va===void 0&&(va=[]),_o===void 0&&(_o=0);for(var xo=this.coefficients,bo=0;bo<9;bo++)xo[bo].toArray(va,_o+bo*3);return va}});Object.assign(SphericalHarmonics3,{getBasisAt:function(va,_o){var xo=va.x,bo=va.y,wo=va.z;_o[0]=.282095,_o[1]=.488603*bo,_o[2]=.488603*wo,_o[3]=.488603*xo,_o[4]=1.092548*xo*bo,_o[5]=1.092548*bo*wo,_o[6]=.315392*(3*wo*wo-1),_o[7]=1.092548*xo*wo,_o[8]=.546274*(xo*xo-bo*bo)}});function LightProbe(va,_o){Light.call(this,void 0,_o),this.type="LightProbe",this.sh=va!==void 0?va:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(va){return Light.prototype.copy.call(this,va),this.sh.copy(va.sh),this},fromJSON:function(va){return this.intensity=va.intensity,this.sh.fromArray(va.sh),this},toJSON:function(va){var _o=Light.prototype.toJSON.call(this,va);return _o.object.sh=this.sh.toArray(),_o}});function MaterialLoader(va){Loader.call(this,va),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new FileLoader(wo.manager);Eo.setPath(wo.path),Eo.load(va,function(To){try{_o(wo.parse(JSON.parse(To)))}catch(So){bo?bo(So):console.error(So),wo.manager.itemError(va)}},xo,bo)},parse:function(va){var _o=this.textures;function xo($o){return _o[$o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",$o),_o[$o]}var bo=new Materials[va.type];if(va.uuid!==void 0&&(bo.uuid=va.uuid),va.name!==void 0&&(bo.name=va.name),va.color!==void 0&&bo.color.setHex(va.color),va.roughness!==void 0&&(bo.roughness=va.roughness),va.metalness!==void 0&&(bo.metalness=va.metalness),va.sheen!==void 0&&(bo.sheen=new Color().setHex(va.sheen)),va.emissive!==void 0&&bo.emissive.setHex(va.emissive),va.specular!==void 0&&bo.specular.setHex(va.specular),va.shininess!==void 0&&(bo.shininess=va.shininess),va.clearcoat!==void 0&&(bo.clearcoat=va.clearcoat),va.clearcoatRoughness!==void 0&&(bo.clearcoatRoughness=va.clearcoatRoughness),va.fog!==void 0&&(bo.fog=va.fog),va.flatShading!==void 0&&(bo.flatShading=va.flatShading),va.blending!==void 0&&(bo.blending=va.blending),va.combine!==void 0&&(bo.combine=va.combine),va.side!==void 0&&(bo.side=va.side),va.opacity!==void 0&&(bo.opacity=va.opacity),va.transparent!==void 0&&(bo.transparent=va.transparent),va.alphaTest!==void 0&&(bo.alphaTest=va.alphaTest),va.depthTest!==void 0&&(bo.depthTest=va.depthTest),va.depthWrite!==void 0&&(bo.depthWrite=va.depthWrite),va.colorWrite!==void 0&&(bo.colorWrite=va.colorWrite),va.stencilWrite!==void 0&&(bo.stencilWrite=va.stencilWrite),va.stencilWriteMask!==void 0&&(bo.stencilWriteMask=va.stencilWriteMask),va.stencilFunc!==void 0&&(bo.stencilFunc=va.stencilFunc),va.stencilRef!==void 0&&(bo.stencilRef=va.stencilRef),va.stencilFuncMask!==void 0&&(bo.stencilFuncMask=va.stencilFuncMask),va.stencilFail!==void 0&&(bo.stencilFail=va.stencilFail),va.stencilZFail!==void 0&&(bo.stencilZFail=va.stencilZFail),va.stencilZPass!==void 0&&(bo.stencilZPass=va.stencilZPass),va.wireframe!==void 0&&(bo.wireframe=va.wireframe),va.wireframeLinewidth!==void 0&&(bo.wireframeLinewidth=va.wireframeLinewidth),va.wireframeLinecap!==void 0&&(bo.wireframeLinecap=va.wireframeLinecap),va.wireframeLinejoin!==void 0&&(bo.wireframeLinejoin=va.wireframeLinejoin),va.rotation!==void 0&&(bo.rotation=va.rotation),va.linewidth!==1&&(bo.linewidth=va.linewidth),va.dashSize!==void 0&&(bo.dashSize=va.dashSize),va.gapSize!==void 0&&(bo.gapSize=va.gapSize),va.scale!==void 0&&(bo.scale=va.scale),va.polygonOffset!==void 0&&(bo.polygonOffset=va.polygonOffset),va.polygonOffsetFactor!==void 0&&(bo.polygonOffsetFactor=va.polygonOffsetFactor),va.polygonOffsetUnits!==void 0&&(bo.polygonOffsetUnits=va.polygonOffsetUnits),va.skinning!==void 0&&(bo.skinning=va.skinning),va.morphTargets!==void 0&&(bo.morphTargets=va.morphTargets),va.morphNormals!==void 0&&(bo.morphNormals=va.morphNormals),va.dithering!==void 0&&(bo.dithering=va.dithering),va.vertexTangents!==void 0&&(bo.vertexTangents=va.vertexTangents),va.visible!==void 0&&(bo.visible=va.visible),va.toneMapped!==void 0&&(bo.toneMapped=va.toneMapped),va.userData!==void 0&&(bo.userData=va.userData),va.vertexColors!==void 0&&(typeof va.vertexColors=="number"?bo.vertexColors=va.vertexColors>0:bo.vertexColors=va.vertexColors),va.uniforms!==void 0)for(var wo in va.uniforms){var Eo=va.uniforms[wo];switch(bo.uniforms[wo]={},Eo.type){case"t":bo.uniforms[wo].value=xo(Eo.value);break;case"c":bo.uniforms[wo].value=new Color().setHex(Eo.value);break;case"v2":bo.uniforms[wo].value=new Vector2().fromArray(Eo.value);break;case"v3":bo.uniforms[wo].value=new Vector3().fromArray(Eo.value);break;case"v4":bo.uniforms[wo].value=new Vector4().fromArray(Eo.value);break;case"m3":bo.uniforms[wo].value=new Matrix3().fromArray(Eo.value);case"m4":bo.uniforms[wo].value=new Matrix4().fromArray(Eo.value);break;default:bo.uniforms[wo].value=Eo.value}}if(va.defines!==void 0&&(bo.defines=va.defines),va.vertexShader!==void 0&&(bo.vertexShader=va.vertexShader),va.fragmentShader!==void 0&&(bo.fragmentShader=va.fragmentShader),va.extensions!==void 0)for(var To in va.extensions)bo.extensions[To]=va.extensions[To];if(va.shading!==void 0&&(bo.flatShading=va.shading===1),va.size!==void 0&&(bo.size=va.size),va.sizeAttenuation!==void 0&&(bo.sizeAttenuation=va.sizeAttenuation),va.map!==void 0&&(bo.map=xo(va.map)),va.matcap!==void 0&&(bo.matcap=xo(va.matcap)),va.alphaMap!==void 0&&(bo.alphaMap=xo(va.alphaMap)),va.bumpMap!==void 0&&(bo.bumpMap=xo(va.bumpMap)),va.bumpScale!==void 0&&(bo.bumpScale=va.bumpScale),va.normalMap!==void 0&&(bo.normalMap=xo(va.normalMap)),va.normalMapType!==void 0&&(bo.normalMapType=va.normalMapType),va.normalScale!==void 0){var So=va.normalScale;Array.isArray(So)===!1&&(So=[So,So]),bo.normalScale=new Vector2().fromArray(So)}return va.displacementMap!==void 0&&(bo.displacementMap=xo(va.displacementMap)),va.displacementScale!==void 0&&(bo.displacementScale=va.displacementScale),va.displacementBias!==void 0&&(bo.displacementBias=va.displacementBias),va.roughnessMap!==void 0&&(bo.roughnessMap=xo(va.roughnessMap)),va.metalnessMap!==void 0&&(bo.metalnessMap=xo(va.metalnessMap)),va.emissiveMap!==void 0&&(bo.emissiveMap=xo(va.emissiveMap)),va.emissiveIntensity!==void 0&&(bo.emissiveIntensity=va.emissiveIntensity),va.specularMap!==void 0&&(bo.specularMap=xo(va.specularMap)),va.envMap!==void 0&&(bo.envMap=xo(va.envMap)),va.envMapIntensity!==void 0&&(bo.envMapIntensity=va.envMapIntensity),va.reflectivity!==void 0&&(bo.reflectivity=va.reflectivity),va.refractionRatio!==void 0&&(bo.refractionRatio=va.refractionRatio),va.lightMap!==void 0&&(bo.lightMap=xo(va.lightMap)),va.lightMapIntensity!==void 0&&(bo.lightMapIntensity=va.lightMapIntensity),va.aoMap!==void 0&&(bo.aoMap=xo(va.aoMap)),va.aoMapIntensity!==void 0&&(bo.aoMapIntensity=va.aoMapIntensity),va.gradientMap!==void 0&&(bo.gradientMap=xo(va.gradientMap)),va.clearcoatMap!==void 0&&(bo.clearcoatMap=xo(va.clearcoatMap)),va.clearcoatRoughnessMap!==void 0&&(bo.clearcoatRoughnessMap=xo(va.clearcoatRoughnessMap)),va.clearcoatNormalMap!==void 0&&(bo.clearcoatNormalMap=xo(va.clearcoatNormalMap)),va.clearcoatNormalScale!==void 0&&(bo.clearcoatNormalScale=new Vector2().fromArray(va.clearcoatNormalScale)),bo},setTextures:function(va){return this.textures=va,this}});var LoaderUtils={decodeText:function(va){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(va);for(var _o="",xo=0,bo=va.length;xo<bo;xo++)_o+=String.fromCharCode(va[xo]);try{return decodeURIComponent(escape(_o))}catch{return _o}},extractUrlBase:function(va){var _o=va.lastIndexOf("/");return _o===-1?"./":va.substr(0,_o+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(va){return BufferGeometry.prototype.copy.call(this,va),this.instanceCount=va.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var va=BufferGeometry.prototype.toJSON.call(this);return va.instanceCount=this.instanceCount,va.isInstancedBufferGeometry=!0,va}});function InstancedBufferAttribute(va,_o,xo,bo){typeof xo=="number"&&(bo=xo,xo=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,va,_o,xo),this.meshPerAttribute=bo||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(va){return BufferAttribute.prototype.copy.call(this,va),this.meshPerAttribute=va.meshPerAttribute,this},toJSON:function(){var va=BufferAttribute.prototype.toJSON.call(this);return va.meshPerAttribute=this.meshPerAttribute,va.isInstancedBufferAttribute=!0,va}});function BufferGeometryLoader(va){Loader.call(this,va)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new FileLoader(wo.manager);Eo.setPath(wo.path),Eo.load(va,function(To){try{_o(wo.parse(JSON.parse(To)))}catch(So){bo?bo(So):console.error(So),wo.manager.itemError(va)}},xo,bo)},parse:function(va){var _o=va.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,xo=va.data.index;if(xo!==void 0){var bo=new TYPED_ARRAYS[xo.type](xo.array);_o.setIndex(new BufferAttribute(bo,1))}var wo=va.data.attributes;for(var Eo in wo){var To=wo[Eo],bo=new TYPED_ARRAYS[To.type](To.array),So=To.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,$o=new So(bo,To.itemSize,To.normalized);To.name!==void 0&&($o.name=To.name),_o.setAttribute(Eo,$o)}var Do=va.data.morphAttributes;if(Do)for(var Eo in Do){for(var No=Do[Eo],Oo=[],Lo=0,Co=No.length;Lo<Co;Lo++){var To=No[Lo],bo=new TYPED_ARRAYS[To.type](To.array),$o=new BufferAttribute(bo,To.itemSize,To.normalized);To.name!==void 0&&($o.name=To.name),Oo.push($o)}_o.morphAttributes[Eo]=Oo}var Ro=va.data.morphTargetsRelative;Ro&&(_o.morphTargetsRelative=!0);var jo=va.data.groups||va.data.drawcalls||va.data.offsets;if(jo!==void 0)for(var Lo=0,zo=jo.length;Lo!==zo;++Lo){var Io=jo[Lo];_o.addGroup(Io.start,Io.count,Io.materialIndex)}var Po=va.data.boundingSphere;if(Po!==void 0){var Bo=new Vector3;Po.center!==void 0&&Bo.fromArray(Po.center),_o.boundingSphere=new Sphere(Bo,Po.radius)}return va.name&&(_o.name=va.name),va.userData&&(_o.userData=va.userData),_o}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(va){Loader.call(this,va)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(va,_o,xo,bo){var wo=this,Eo=this.path===""?LoaderUtils.extractUrlBase(va):this.path;this.resourcePath=this.resourcePath||Eo;var To=new FileLoader(wo.manager);To.setPath(this.path),To.load(va,function(So){var $o=null;try{$o=JSON.parse(So)}catch(No){bo!==void 0&&bo(No),console.error("THREE:ObjectLoader: Can't parse "+va+".",No.message);return}var Do=$o.metadata;if(Do===void 0||Do.type===void 0||Do.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+va);return}wo.parse($o,_o)},xo,bo)},parse:function(va,_o){var xo=this.parseShape(va.shapes),bo=this.parseGeometries(va.geometries,xo),wo=this.parseImages(va.images,function(){_o!==void 0&&_o(So)}),Eo=this.parseTextures(va.textures,wo),To=this.parseMaterials(va.materials,Eo),So=this.parseObject(va.object,bo,To);return va.animations&&(So.animations=this.parseAnimations(va.animations)),(va.images===void 0||va.images.length===0)&&_o!==void 0&&_o(So),So},parseShape:function(va){var _o={};if(va!==void 0)for(var xo=0,bo=va.length;xo<bo;xo++){var wo=new Shape().fromJSON(va[xo]);_o[wo.uuid]=wo}return _o},parseGeometries:function(va,_o){var xo={};if(va!==void 0)for(var bo=new BufferGeometryLoader,wo=0,Eo=va.length;wo<Eo;wo++){var To,So=va[wo];switch(So.type){case"PlaneGeometry":case"PlaneBufferGeometry":To=new Geometries[So.type](So.width,So.height,So.widthSegments,So.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":To=new Geometries[So.type](So.width,So.height,So.depth,So.widthSegments,So.heightSegments,So.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":To=new Geometries[So.type](So.radius,So.segments,So.thetaStart,So.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":To=new Geometries[So.type](So.radiusTop,So.radiusBottom,So.height,So.radialSegments,So.heightSegments,So.openEnded,So.thetaStart,So.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":To=new Geometries[So.type](So.radius,So.height,So.radialSegments,So.heightSegments,So.openEnded,So.thetaStart,So.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":To=new Geometries[So.type](So.radius,So.widthSegments,So.heightSegments,So.phiStart,So.phiLength,So.thetaStart,So.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":To=new Geometries[So.type](So.radius,So.detail);break;case"RingGeometry":case"RingBufferGeometry":To=new Geometries[So.type](So.innerRadius,So.outerRadius,So.thetaSegments,So.phiSegments,So.thetaStart,So.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":To=new Geometries[So.type](So.radius,So.tube,So.radialSegments,So.tubularSegments,So.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":To=new Geometries[So.type](So.radius,So.tube,So.tubularSegments,So.radialSegments,So.p,So.q);break;case"TubeGeometry":case"TubeBufferGeometry":To=new Geometries[So.type](new Curves[So.path.type]().fromJSON(So.path),So.tubularSegments,So.radius,So.radialSegments,So.closed);break;case"LatheGeometry":case"LatheBufferGeometry":To=new Geometries[So.type](So.points,So.segments,So.phiStart,So.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":To=new Geometries[So.type](So.vertices,So.indices,So.radius,So.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var $o=[],Do=0,No=So.shapes.length;Do<No;Do++){var Oo=_o[So.shapes[Do]];$o.push(Oo)}To=new Geometries[So.type]($o,So.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var $o=[],Do=0,No=So.shapes.length;Do<No;Do++){var Oo=_o[So.shapes[Do]];$o.push(Oo)}var Lo=So.options.extrudePath;Lo!==void 0&&(So.options.extrudePath=new Curves[Lo.type]().fromJSON(Lo)),To=new Geometries[So.type]($o,So.options);break;case"BufferGeometry":case"InstancedBufferGeometry":To=bo.parse(So);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+So.type+'"');continue}To.uuid=So.uuid,So.name!==void 0&&(To.name=So.name),To.isBufferGeometry===!0&&So.userData!==void 0&&(To.userData=So.userData),xo[So.uuid]=To}return xo},parseMaterials:function(va,_o){var xo={},bo={};if(va!==void 0){var wo=new MaterialLoader;wo.setTextures(_o);for(var Eo=0,To=va.length;Eo<To;Eo++){var So=va[Eo];if(So.type==="MultiMaterial"){for(var $o=[],Do=0;Do<So.materials.length;Do++){var No=So.materials[Do];xo[No.uuid]===void 0&&(xo[No.uuid]=wo.parse(No)),$o.push(xo[No.uuid])}bo[So.uuid]=$o}else xo[So.uuid]===void 0&&(xo[So.uuid]=wo.parse(So)),bo[So.uuid]=xo[So.uuid]}}return bo},parseAnimations:function(va){for(var _o=[],xo=0;xo<va.length;xo++){var bo=va[xo],wo=AnimationClip.parse(bo);bo.uuid!==void 0&&(wo.uuid=bo.uuid),_o.push(wo)}return _o},parseImages:function(va,_o){var xo=this,bo={};function wo(jo){return xo.manager.itemStart(jo),To.load(jo,function(){xo.manager.itemEnd(jo)},void 0,function(){xo.manager.itemError(jo),xo.manager.itemEnd(jo)})}if(va!==void 0&&va.length>0){var Eo=new LoadingManager(_o),To=new ImageLoader(Eo);To.setCrossOrigin(this.crossOrigin);for(var So=0,$o=va.length;So<$o;So++){var Do=va[So],No=Do.url;if(Array.isArray(No)){bo[Do.uuid]=[];for(var Oo=0,Lo=No.length;Oo<Lo;Oo++){var Co=No[Oo],Ro=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Co)?Co:xo.resourcePath+Co;bo[Do.uuid].push(wo(Ro))}}else{var Ro=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Do.url)?Do.url:xo.resourcePath+Do.url;bo[Do.uuid]=wo(Ro)}}}return bo},parseTextures:function(va,_o){function xo($o,Do){return typeof $o=="number"?$o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",$o),Do[$o])}var bo={};if(va!==void 0)for(var wo=0,Eo=va.length;wo<Eo;wo++){var To=va[wo];To.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',To.uuid),_o[To.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",To.image);var So;Array.isArray(_o[To.image])?So=new CubeTexture(_o[To.image]):So=new Texture(_o[To.image]),So.needsUpdate=!0,So.uuid=To.uuid,To.name!==void 0&&(So.name=To.name),To.mapping!==void 0&&(So.mapping=xo(To.mapping,TEXTURE_MAPPING)),To.offset!==void 0&&So.offset.fromArray(To.offset),To.repeat!==void 0&&So.repeat.fromArray(To.repeat),To.center!==void 0&&So.center.fromArray(To.center),To.rotation!==void 0&&(So.rotation=To.rotation),To.wrap!==void 0&&(So.wrapS=xo(To.wrap[0],TEXTURE_WRAPPING),So.wrapT=xo(To.wrap[1],TEXTURE_WRAPPING)),To.format!==void 0&&(So.format=To.format),To.type!==void 0&&(So.type=To.type),To.encoding!==void 0&&(So.encoding=To.encoding),To.minFilter!==void 0&&(So.minFilter=xo(To.minFilter,TEXTURE_FILTER)),To.magFilter!==void 0&&(So.magFilter=xo(To.magFilter,TEXTURE_FILTER)),To.anisotropy!==void 0&&(So.anisotropy=To.anisotropy),To.flipY!==void 0&&(So.flipY=To.flipY),To.premultiplyAlpha!==void 0&&(So.premultiplyAlpha=To.premultiplyAlpha),To.unpackAlignment!==void 0&&(So.unpackAlignment=To.unpackAlignment),bo[To.uuid]=So}return bo},parseObject:function(va,_o,xo){var bo;function wo(zo){return _o[zo]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",zo),_o[zo]}function Eo(zo){if(zo!==void 0){if(Array.isArray(zo)){for(var Io=[],Po=0,Bo=zo.length;Po<Bo;Po++){var ko=zo[Po];xo[ko]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ko),Io.push(xo[ko])}return Io}return xo[zo]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",zo),xo[zo]}}switch(va.type){case"Scene":bo=new Scene,va.background!==void 0&&Number.isInteger(va.background)&&(bo.background=new Color(va.background)),va.fog!==void 0&&(va.fog.type==="Fog"?bo.fog=new Fog(va.fog.color,va.fog.near,va.fog.far):va.fog.type==="FogExp2"&&(bo.fog=new FogExp2(va.fog.color,va.fog.density)));break;case"PerspectiveCamera":bo=new PerspectiveCamera(va.fov,va.aspect,va.near,va.far),va.focus!==void 0&&(bo.focus=va.focus),va.zoom!==void 0&&(bo.zoom=va.zoom),va.filmGauge!==void 0&&(bo.filmGauge=va.filmGauge),va.filmOffset!==void 0&&(bo.filmOffset=va.filmOffset),va.view!==void 0&&(bo.view=Object.assign({},va.view));break;case"OrthographicCamera":bo=new OrthographicCamera(va.left,va.right,va.top,va.bottom,va.near,va.far),va.zoom!==void 0&&(bo.zoom=va.zoom),va.view!==void 0&&(bo.view=Object.assign({},va.view));break;case"AmbientLight":bo=new AmbientLight(va.color,va.intensity);break;case"DirectionalLight":bo=new DirectionalLight(va.color,va.intensity);break;case"PointLight":bo=new PointLight(va.color,va.intensity,va.distance,va.decay);break;case"RectAreaLight":bo=new RectAreaLight(va.color,va.intensity,va.width,va.height);break;case"SpotLight":bo=new SpotLight(va.color,va.intensity,va.distance,va.angle,va.penumbra,va.decay);break;case"HemisphereLight":bo=new HemisphereLight(va.color,va.groundColor,va.intensity);break;case"LightProbe":bo=new LightProbe().fromJSON(va);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var To=wo(va.geometry),So=Eo(va.material);bo=new Mesh(To,So);break;case"InstancedMesh":var To=wo(va.geometry),So=Eo(va.material),$o=va.count,Do=va.instanceMatrix;bo=new InstancedMesh(To,So,$o),bo.instanceMatrix=new BufferAttribute(new Float32Array(Do.array),16);break;case"LOD":bo=new LOD;break;case"Line":bo=new Line(wo(va.geometry),Eo(va.material),va.mode);break;case"LineLoop":bo=new LineLoop(wo(va.geometry),Eo(va.material));break;case"LineSegments":bo=new LineSegments(wo(va.geometry),Eo(va.material));break;case"PointCloud":case"Points":bo=new Points(wo(va.geometry),Eo(va.material));break;case"Sprite":bo=new Sprite(Eo(va.material));break;case"Group":bo=new Group$1;break;default:bo=new Object3D}if(bo.uuid=va.uuid,va.name!==void 0&&(bo.name=va.name),va.matrix!==void 0?(bo.matrix.fromArray(va.matrix),va.matrixAutoUpdate!==void 0&&(bo.matrixAutoUpdate=va.matrixAutoUpdate),bo.matrixAutoUpdate&&bo.matrix.decompose(bo.position,bo.quaternion,bo.scale)):(va.position!==void 0&&bo.position.fromArray(va.position),va.rotation!==void 0&&bo.rotation.fromArray(va.rotation),va.quaternion!==void 0&&bo.quaternion.fromArray(va.quaternion),va.scale!==void 0&&bo.scale.fromArray(va.scale)),va.castShadow!==void 0&&(bo.castShadow=va.castShadow),va.receiveShadow!==void 0&&(bo.receiveShadow=va.receiveShadow),va.shadow&&(va.shadow.bias!==void 0&&(bo.shadow.bias=va.shadow.bias),va.shadow.radius!==void 0&&(bo.shadow.radius=va.shadow.radius),va.shadow.mapSize!==void 0&&bo.shadow.mapSize.fromArray(va.shadow.mapSize),va.shadow.camera!==void 0&&(bo.shadow.camera=this.parseObject(va.shadow.camera))),va.visible!==void 0&&(bo.visible=va.visible),va.frustumCulled!==void 0&&(bo.frustumCulled=va.frustumCulled),va.renderOrder!==void 0&&(bo.renderOrder=va.renderOrder),va.userData!==void 0&&(bo.userData=va.userData),va.layers!==void 0&&(bo.layers.mask=va.layers),va.children!==void 0)for(var No=va.children,Oo=0;Oo<No.length;Oo++)bo.add(this.parseObject(No[Oo],_o,xo));if(va.type==="LOD"){va.autoUpdate!==void 0&&(bo.autoUpdate=va.autoUpdate);for(var Lo=va.levels,Co=0;Co<Lo.length;Co++){var Ro=Lo[Co],jo=bo.getObjectByProperty("uuid",Ro.object);jo!==void 0&&bo.addLevel(jo,Ro.distance)}}return bo}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(va){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,va),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(_o){return this.options=_o,this},load:function(va,_o,xo,bo){va===void 0&&(va=""),this.path!==void 0&&(va=this.path+va),va=this.manager.resolveURL(va);var wo=this,Eo=Cache.get(va);if(Eo!==void 0)return wo.manager.itemStart(va),setTimeout(function(){_o&&_o(Eo),wo.manager.itemEnd(va)},0),Eo;fetch(va).then(function(To){return To.blob()}).then(function(To){return wo.options===void 0?createImageBitmap(To):createImageBitmap(To,wo.options)}).then(function(To){Cache.add(va,To),_o&&_o(To),wo.manager.itemEnd(va)}).catch(function(To){bo&&bo(To),wo.manager.itemError(va),wo.manager.itemEnd(va)}),wo.manager.itemStart(va)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(va,_o){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(va,_o),this},lineTo:function(va,_o){return this.currentPath.lineTo(va,_o),this},quadraticCurveTo:function(va,_o,xo,bo){return this.currentPath.quadraticCurveTo(va,_o,xo,bo),this},bezierCurveTo:function(va,_o,xo,bo,wo,Eo){return this.currentPath.bezierCurveTo(va,_o,xo,bo,wo,Eo),this},splineThru:function(va){return this.currentPath.splineThru(va),this},toShapes:function(va,_o){function xo(Ko){for(var ts=[],Jo=0,rs=Ko.length;Jo<rs;Jo++){var ls=Ko[Jo],ss=new Shape;ss.curves=ls.curves,ts.push(ss)}return ts}function bo(Ko,ts){for(var Jo=ts.length,rs=!1,ls=Jo-1,ss=0;ss<Jo;ls=ss++){var us=ts[ls],ms=ts[ss],As=ms.x-us.x,Os=ms.y-us.y;if(Math.abs(Os)>Number.EPSILON){if(Os<0&&(us=ts[ss],As=-As,ms=ts[ls],Os=-Os),Ko.y<us.y||Ko.y>ms.y)continue;if(Ko.y===us.y){if(Ko.x===us.x)return!0}else{var Es=Os*(Ko.x-us.x)-As*(Ko.y-us.y);if(Es===0)return!0;if(Es<0)continue;rs=!rs}}else{if(Ko.y!==us.y)continue;if(ms.x<=Ko.x&&Ko.x<=us.x||us.x<=Ko.x&&Ko.x<=ms.x)return!0}}return rs}var wo=ShapeUtils.isClockWise,Eo=this.subPaths;if(Eo.length===0)return[];if(_o===!0)return xo(Eo);var To,So,$o,Do=[];if(Eo.length===1)return So=Eo[0],$o=new Shape,$o.curves=So.curves,Do.push($o),Do;var No=!wo(Eo[0].getPoints());No=va?!No:No;var Oo=[],Lo=[],Co=[],Ro=0,jo;Lo[Ro]=void 0,Co[Ro]=[];for(var zo=0,Io=Eo.length;zo<Io;zo++)So=Eo[zo],jo=So.getPoints(),To=wo(jo),To=va?!To:To,To?(!No&&Lo[Ro]&&Ro++,Lo[Ro]={s:new Shape,p:jo},Lo[Ro].s.curves=So.curves,No&&Ro++,Co[Ro]=[]):Co[Ro].push({h:So,p:jo[0]});if(!Lo[0])return xo(Eo);if(Lo.length>1){for(var Po=!1,Bo=[],ko=0,Uo=Lo.length;ko<Uo;ko++)Oo[ko]=[];for(var ko=0,Uo=Lo.length;ko<Uo;ko++)for(var Qo=Co[ko],qo=0;qo<Qo.length;qo++){for(var Zo=Qo[qo],Xo=!0,Fo=0;Fo<Lo.length;Fo++)bo(Zo.p,Lo[Fo].p)&&(ko!==Fo&&Bo.push({froms:ko,tos:Fo,hole:qo}),Xo?(Xo=!1,Oo[Fo].push(Zo)):Po=!0);Xo&&Oo[ko].push(Zo)}Bo.length>0&&(Po||(Co=Oo))}for(var Go,zo=0,Vo=Lo.length;zo<Vo;zo++){$o=Lo[zo].s,Do.push($o),Go=Co[zo];for(var Wo=0,Yo=Go.length;Wo<Yo;Wo++)$o.holes.push(Go[Wo].h)}return Do}});function Font(va){this.type="Font",this.data=va}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(va,_o){_o===void 0&&(_o=100);for(var xo=[],bo=createPaths(va,_o,this.data),wo=0,Eo=bo.length;wo<Eo;wo++)Array.prototype.push.apply(xo,bo[wo].toShapes());return xo}});function createPaths(va,_o,xo){for(var bo=Array.from?Array.from(va):String(va).split(""),wo=_o/xo.resolution,Eo=(xo.boundingBox.yMax-xo.boundingBox.yMin+xo.underlineThickness)*wo,To=[],So=0,$o=0,Do=0;Do<bo.length;Do++){var No=bo[Do];if(No===`
`)So=0,$o-=Eo;else{var Oo=createPath(No,wo,So,$o,xo);So+=Oo.offsetX,To.push(Oo.path)}}return To}function createPath(va,_o,xo,bo,wo){var Eo=wo.glyphs[va]||wo.glyphs["?"];if(!Eo){console.error('THREE.Font: character "'+va+'" does not exists in font family '+wo.familyName+".");return}var To=new ShapePath,So,$o,Do,No,Oo,Lo,Co,Ro;if(Eo.o)for(var jo=Eo._cachedOutline||(Eo._cachedOutline=Eo.o.split(" ")),zo=0,Io=jo.length;zo<Io;){var Po=jo[zo++];switch(Po){case"m":So=jo[zo++]*_o+xo,$o=jo[zo++]*_o+bo,To.moveTo(So,$o);break;case"l":So=jo[zo++]*_o+xo,$o=jo[zo++]*_o+bo,To.lineTo(So,$o);break;case"q":Do=jo[zo++]*_o+xo,No=jo[zo++]*_o+bo,Oo=jo[zo++]*_o+xo,Lo=jo[zo++]*_o+bo,To.quadraticCurveTo(Oo,Lo,Do,No);break;case"b":Do=jo[zo++]*_o+xo,No=jo[zo++]*_o+bo,Oo=jo[zo++]*_o+xo,Lo=jo[zo++]*_o+bo,Co=jo[zo++]*_o+xo,Ro=jo[zo++]*_o+bo,To.bezierCurveTo(Oo,Lo,Co,Ro,Do,No);break}}return{offsetX:Eo.ha*_o,path:To}}function FontLoader(va){Loader.call(this,va)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new FileLoader(this.manager);Eo.setPath(this.path),Eo.load(va,function(To){var So;try{So=JSON.parse(To)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),So=JSON.parse(To.substring(65,To.length-2))}var $o=wo.parse(So);_o&&_o($o)},xo,bo)},parse:function(va){return new Font(va)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(va){_context=va}};function AudioLoader(va){Loader.call(this,va)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(va,_o,xo,bo){var wo=this,Eo=new FileLoader(wo.manager);Eo.setResponseType("arraybuffer"),Eo.setPath(wo.path),Eo.load(va,function(To){try{var So=To.slice(0),$o=AudioContext.getContext();$o.decodeAudioData(So,function(Do){_o(Do)})}catch(Do){bo?bo(Do):console.error(Do),wo.manager.itemError(va)}},xo,bo)}});function HemisphereLightProbe(va,_o,xo){LightProbe.call(this,void 0,xo);var bo=new Color().set(va),wo=new Color().set(_o),Eo=new Vector3(bo.r,bo.g,bo.b),To=new Vector3(wo.r,wo.g,wo.b),So=Math.sqrt(Math.PI),$o=So*Math.sqrt(.75);this.sh.coefficients[0].copy(Eo).add(To).multiplyScalar(So),this.sh.coefficients[1].copy(Eo).sub(To).multiplyScalar($o)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(va){return LightProbe.prototype.copy.call(this,va),this},toJSON:function(va){var _o=LightProbe.prototype.toJSON.call(this,va);return _o}});function AmbientLightProbe(va,_o){LightProbe.call(this,void 0,_o);var xo=new Color().set(va);this.sh.coefficients[0].set(xo.r,xo.g,xo.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(va){return LightProbe.prototype.copy.call(this,va),this},toJSON:function(va){var _o=LightProbe.prototype.toJSON.call(this,va);return _o}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(va){var _o=this._cache,xo=_o.focus!==va.focus||_o.fov!==va.fov||_o.aspect!==va.aspect*this.aspect||_o.near!==va.near||_o.far!==va.far||_o.zoom!==va.zoom||_o.eyeSep!==this.eyeSep;if(xo){_o.focus=va.focus,_o.fov=va.fov,_o.aspect=va.aspect*this.aspect,_o.near=va.near,_o.far=va.far,_o.zoom=va.zoom,_o.eyeSep=this.eyeSep;var bo=va.projectionMatrix.clone(),wo=_o.eyeSep/2,Eo=wo*_o.near/_o.focus,To=_o.near*Math.tan(MathUtils.DEG2RAD*_o.fov*.5)/_o.zoom,So,$o;_eyeLeft.elements[12]=-wo,_eyeRight.elements[12]=wo,So=-To*_o.aspect+Eo,$o=To*_o.aspect+Eo,bo.elements[0]=2*_o.near/($o-So),bo.elements[8]=($o+So)/($o-So),this.cameraL.projectionMatrix.copy(bo),So=-To*_o.aspect-Eo,$o=To*_o.aspect-Eo,bo.elements[0]=2*_o.near/($o-So),bo.elements[8]=($o+So)/($o-So),this.cameraR.projectionMatrix.copy(bo)}this.cameraL.matrixWorld.copy(va.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(va.matrixWorld).multiply(_eyeRight)}});function Clock(va){this.autoStart=va!==void 0?va:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var va=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var _o=(typeof performance=="undefined"?Date:performance).now();va=(_o-this.oldTime)/1e3,this.oldTime=_o,this.elapsedTime+=va}return va}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(va){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=va,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(va){return this.gain.gain.setTargetAtTime(va,this.context.currentTime,.01),this},updateMatrixWorld:function(va){Object3D.prototype.updateMatrixWorld.call(this,va);var _o=this.context.listener,xo=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),_o.positionX){var bo=this.context.currentTime+this.timeDelta;_o.positionX.linearRampToValueAtTime(_position$2.x,bo),_o.positionY.linearRampToValueAtTime(_position$2.y,bo),_o.positionZ.linearRampToValueAtTime(_position$2.z,bo),_o.forwardX.linearRampToValueAtTime(_orientation.x,bo),_o.forwardY.linearRampToValueAtTime(_orientation.y,bo),_o.forwardZ.linearRampToValueAtTime(_orientation.z,bo),_o.upX.linearRampToValueAtTime(xo.x,bo),_o.upY.linearRampToValueAtTime(xo.y,bo),_o.upZ.linearRampToValueAtTime(xo.z,bo)}else _o.setPosition(_position$2.x,_position$2.y,_position$2.z),_o.setOrientation(_orientation.x,_orientation.y,_orientation.z,xo.x,xo.y,xo.z)}});function Audio(va){Object3D.call(this),this.type="Audio",this.listener=va,this.context=va.context,this.gain=this.context.createGain(),this.gain.connect(va.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=va,this.connect(),this},setMediaElementSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(va),this.connect(),this},setMediaStreamSource:function(va){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(va),this.connect(),this},setBuffer:function(va){return this.buffer=va,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(va){if(va===void 0&&(va=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+va;var _o=this.context.createBufferSource();return _o.buffer=this.buffer,_o.loop=this.loop,_o.loopStart=this.loopStart,_o.loopEnd=this.loopEnd,_o.onended=this.onEnded.bind(this),_o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=_o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var va=1,_o=this.filters.length;va<_o;va++)this.filters[va-1].connect(this.filters[va]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var va=1,_o=this.filters.length;va<_o;va++)this.filters[va-1].disconnect(this.filters[va]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(va){return va||(va=[]),this.isPlaying===!0?(this.disconnect(),this.filters=va,this.connect()):this.filters=va,this},setDetune:function(va){if(this.detune=va,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(va){return this.setFilters(va?[va]:[])},setPlaybackRate:function(va){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=va,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(va){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=va,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(va){return this.loopStart=va,this},setLoopEnd:function(va){return this.loopEnd=va,this},getVolume:function(){return this.gain.gain.value},setVolume:function(va){return this.gain.gain.setTargetAtTime(va,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(va){Audio.call(this,va),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(va){return this.panner.refDistance=va,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(va){return this.panner.rolloffFactor=va,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(va){return this.panner.distanceModel=va,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(va){return this.panner.maxDistance=va,this},setDirectionalCone:function(va,_o,xo){return this.panner.coneInnerAngle=va,this.panner.coneOuterAngle=_o,this.panner.coneOuterGain=xo,this},updateMatrixWorld:function(va){if(Object3D.prototype.updateMatrixWorld.call(this,va),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var _o=this.panner;if(_o.positionX){var xo=this.context.currentTime+this.listener.timeDelta;_o.positionX.linearRampToValueAtTime(_position$3.x,xo),_o.positionY.linearRampToValueAtTime(_position$3.y,xo),_o.positionZ.linearRampToValueAtTime(_position$3.z,xo),_o.orientationX.linearRampToValueAtTime(_orientation$1.x,xo),_o.orientationY.linearRampToValueAtTime(_orientation$1.y,xo),_o.orientationZ.linearRampToValueAtTime(_orientation$1.z,xo)}else _o.setPosition(_position$3.x,_position$3.y,_position$3.z),_o.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(va,_o){this.analyser=va.context.createAnalyser(),this.analyser.fftSize=_o!==void 0?_o:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),va.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var va=0,_o=this.getFrequencyData(),xo=0;xo<_o.length;xo++)va+=_o[xo];return va/_o.length}});function PropertyMixer(va,_o,xo){this.binding=va,this.valueSize=xo;var bo,wo,Eo;switch(_o){case"quaternion":bo=this._slerp,wo=this._slerpAdditive,Eo=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(xo*6),this._workIndex=5;break;case"string":case"bool":bo=this._select,wo=this._select,Eo=this._setAdditiveIdentityOther,this.buffer=new Array(xo*5);break;default:bo=this._lerp,wo=this._lerpAdditive,Eo=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(xo*5)}this._mixBufferRegion=bo,this._mixBufferRegionAdditive=wo,this._setIdentity=Eo,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(va,_o){var xo=this.buffer,bo=this.valueSize,wo=va*bo+bo,Eo=this.cumulativeWeight;if(Eo===0){for(var To=0;To!==bo;++To)xo[wo+To]=xo[To];Eo=_o}else{Eo+=_o;var So=_o/Eo;this._mixBufferRegion(xo,wo,0,So,bo)}this.cumulativeWeight=Eo},accumulateAdditive:function(va){var _o=this.buffer,xo=this.valueSize,bo=xo*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(_o,bo,0,va,xo),this.cumulativeWeightAdditive+=va},apply:function(va){var _o=this.valueSize,xo=this.buffer,bo=va*_o+_o,wo=this.cumulativeWeight,Eo=this.cumulativeWeightAdditive,To=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,wo<1){var So=_o*this._origIndex;this._mixBufferRegion(xo,bo,So,1-wo,_o)}Eo>0&&this._mixBufferRegionAdditive(xo,bo,this._addIndex*_o,1,_o);for(var $o=_o,Do=_o+_o;$o!==Do;++$o)if(xo[$o]!==xo[$o+_o]){To.setValue(xo,bo);break}},saveOriginalState:function(){var va=this.binding,_o=this.buffer,xo=this.valueSize,bo=xo*this._origIndex;va.getValue(_o,bo);for(var wo=xo,Eo=bo;wo!==Eo;++wo)_o[wo]=_o[bo+wo%xo];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var va=this.valueSize*3;this.binding.setValue(this.buffer,va)},_setAdditiveIdentityNumeric:function(){for(var va=this._addIndex*this.valueSize,_o=va+this.valueSize,xo=va;xo<_o;xo++)this.buffer[xo]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var va=this._origIndex*this.valueSize,_o=this._addIndex*this.valueSize,xo=0;xo<this.valueSize;xo++)this.buffer[_o+xo]=this.buffer[va+xo]},_select:function(va,_o,xo,bo,wo){if(bo>=.5)for(var Eo=0;Eo!==wo;++Eo)va[_o+Eo]=va[xo+Eo]},_slerp:function(va,_o,xo,bo){Quaternion.slerpFlat(va,_o,va,_o,va,xo,bo)},_slerpAdditive:function(va,_o,xo,bo,wo){var Eo=this._workIndex*wo;Quaternion.multiplyQuaternionsFlat(va,Eo,va,_o,va,xo),Quaternion.slerpFlat(va,_o,va,_o,va,Eo,bo)},_lerp:function(va,_o,xo,bo,wo){for(var Eo=1-bo,To=0;To!==wo;++To){var So=_o+To;va[So]=va[So]*Eo+va[xo+To]*bo}},_lerpAdditive:function(va,_o,xo,bo,wo){for(var Eo=0;Eo!==wo;++Eo){var To=_o+Eo;va[To]=va[To]+va[xo+Eo]*bo}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(va,_o,xo){var bo=xo||PropertyBinding.parseTrackName(_o);this._targetGroup=va,this._bindings=va.subscribe_(_o,bo)}Object.assign(Composite.prototype,{getValue:function(va,_o){this.bind();var xo=this._targetGroup.nCachedObjects_,bo=this._bindings[xo];bo!==void 0&&bo.getValue(va,_o)},setValue:function(va,_o){for(var xo=this._bindings,bo=this._targetGroup.nCachedObjects_,wo=xo.length;bo!==wo;++bo)xo[bo].setValue(va,_o)},bind:function(){for(var va=this._bindings,_o=this._targetGroup.nCachedObjects_,xo=va.length;_o!==xo;++_o)va[_o].bind()},unbind:function(){for(var va=this._bindings,_o=this._targetGroup.nCachedObjects_,xo=va.length;_o!==xo;++_o)va[_o].unbind()}});function PropertyBinding(va,_o,xo){this.path=_o,this.parsedPath=xo||PropertyBinding.parseTrackName(_o),this.node=PropertyBinding.findNode(va,this.parsedPath.nodeName)||va,this.rootNode=va}Object.assign(PropertyBinding,{Composite,create:function(va,_o,xo){return va&&va.isAnimationObjectGroup?new PropertyBinding.Composite(va,_o,xo):new PropertyBinding(va,_o,xo)},sanitizeNodeName:function(va){return va.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(va){var _o=_trackRe.exec(va);if(!_o)throw new Error("PropertyBinding: Cannot parse trackName: "+va);var xo={nodeName:_o[2],objectName:_o[3],objectIndex:_o[4],propertyName:_o[5],propertyIndex:_o[6]},bo=xo.nodeName&&xo.nodeName.lastIndexOf(".");if(bo!==void 0&&bo!==-1){var wo=xo.nodeName.substring(bo+1);_supportedObjectNames.indexOf(wo)!==-1&&(xo.nodeName=xo.nodeName.substring(0,bo),xo.objectName=wo)}if(xo.propertyName===null||xo.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+va);return xo},findNode:function(va,_o){if(!_o||_o===""||_o==="."||_o===-1||_o===va.name||_o===va.uuid)return va;if(va.skeleton){var xo=va.skeleton.getBoneByName(_o);if(xo!==void 0)return xo}if(va.children){var bo=function(Eo){for(var To=0;To<Eo.length;To++){var So=Eo[To];if(So.name===_o||So.uuid===_o)return So;var $o=bo(So.children);if($o)return $o}return null},wo=bo(va.children);if(wo)return wo}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(_o,xo){_o[xo]=this.node[this.propertyName]},function(_o,xo){for(var bo=this.resolvedProperty,wo=0,Eo=bo.length;wo!==Eo;++wo)_o[xo++]=bo[wo]},function(_o,xo){_o[xo]=this.resolvedProperty[this.propertyIndex]},function(_o,xo){this.resolvedProperty.toArray(_o,xo)}],SetterByBindingTypeAndVersioning:[[function(_o,xo){this.targetObject[this.propertyName]=_o[xo]},function(_o,xo){this.targetObject[this.propertyName]=_o[xo],this.targetObject.needsUpdate=!0},function(_o,xo){this.targetObject[this.propertyName]=_o[xo],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_o,xo){for(var bo=this.resolvedProperty,wo=0,Eo=bo.length;wo!==Eo;++wo)bo[wo]=_o[xo++]},function(_o,xo){for(var bo=this.resolvedProperty,wo=0,Eo=bo.length;wo!==Eo;++wo)bo[wo]=_o[xo++];this.targetObject.needsUpdate=!0},function(_o,xo){for(var bo=this.resolvedProperty,wo=0,Eo=bo.length;wo!==Eo;++wo)bo[wo]=_o[xo++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_o,xo){this.resolvedProperty[this.propertyIndex]=_o[xo]},function(_o,xo){this.resolvedProperty[this.propertyIndex]=_o[xo],this.targetObject.needsUpdate=!0},function(_o,xo){this.resolvedProperty[this.propertyIndex]=_o[xo],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(_o,xo){this.resolvedProperty.fromArray(_o,xo)},function(_o,xo){this.resolvedProperty.fromArray(_o,xo),this.targetObject.needsUpdate=!0},function(_o,xo){this.resolvedProperty.fromArray(_o,xo),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(_o,xo){this.bind(),this.getValue(_o,xo)},setValue:function(_o,xo){this.bind(),this.setValue(_o,xo)},bind:function(){var va=this.node,_o=this.parsedPath,xo=_o.objectName,bo=_o.propertyName,wo=_o.propertyIndex;if(va||(va=PropertyBinding.findNode(this.rootNode,_o.nodeName)||this.rootNode,this.node=va),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!va){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(xo){var Eo=_o.objectIndex;switch(xo){case"materials":if(!va.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!va.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}va=va.material.materials;break;case"bones":if(!va.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}va=va.skeleton.bones;for(var To=0;To<va.length;To++)if(va[To].name===Eo){Eo=To;break}break;default:if(va[xo]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}va=va[xo]}if(Eo!==void 0){if(va[Eo]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,va);return}va=va[Eo]}}var So=va[bo];if(So===void 0){var $o=_o.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+$o+"."+bo+" but it wasn't found.",va);return}var Do=this.Versioning.None;this.targetObject=va,va.needsUpdate!==void 0?Do=this.Versioning.NeedsUpdate:va.matrixWorldNeedsUpdate!==void 0&&(Do=this.Versioning.MatrixWorldNeedsUpdate);var No=this.BindingType.Direct;if(wo!==void 0){if(bo==="morphTargetInfluences"){if(!va.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(va.geometry.isBufferGeometry){if(!va.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}va.morphTargetDictionary[wo]!==void 0&&(wo=va.morphTargetDictionary[wo])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}No=this.BindingType.ArrayElement,this.resolvedProperty=So,this.propertyIndex=wo}else So.fromArray!==void 0&&So.toArray!==void 0?(No=this.BindingType.HasFromToArray,this.resolvedProperty=So):Array.isArray(So)?(No=this.BindingType.EntireArray,this.resolvedProperty=So):this.propertyName=bo;this.getValue=this.GetterByBindingType[No],this.setValue=this.SetterByBindingTypeAndVersioning[No][Do]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var va={};this._indicesByUUID=va;for(var _o=0,xo=arguments.length;_o!==xo;++_o)va[arguments[_o].uuid]=_o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var bo=this;this.stats={objects:{get total(){return bo._objects.length},get inUse(){return this.total-bo.nCachedObjects_}},get bindingsPerObject(){return bo._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var va=this._objects,_o=va.length,xo=this.nCachedObjects_,bo=this._indicesByUUID,wo=this._paths,Eo=this._parsedPaths,To=this._bindings,So=To.length,$o=void 0,Do=0,No=arguments.length;Do!==No;++Do){var Oo=arguments[Do],Lo=Oo.uuid,Co=bo[Lo];if(Co===void 0){Co=_o++,bo[Lo]=Co,va.push(Oo);for(var Ro=0,jo=So;Ro!==jo;++Ro)To[Ro].push(new PropertyBinding(Oo,wo[Ro],Eo[Ro]))}else if(Co<xo){$o=va[Co];var zo=--xo,Io=va[zo];bo[Io.uuid]=Co,va[Co]=Io,bo[Lo]=zo,va[zo]=Oo;for(var Ro=0,jo=So;Ro!==jo;++Ro){var Po=To[Ro],Bo=Po[zo],ko=Po[Co];Po[Co]=Bo,ko===void 0&&(ko=new PropertyBinding(Oo,wo[Ro],Eo[Ro])),Po[zo]=ko}}else va[Co]!==$o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=xo},remove:function(){for(var va=this._objects,_o=this.nCachedObjects_,xo=this._indicesByUUID,bo=this._bindings,wo=bo.length,Eo=0,To=arguments.length;Eo!==To;++Eo){var So=arguments[Eo],$o=So.uuid,Do=xo[$o];if(Do!==void 0&&Do>=_o){var No=_o++,Oo=va[No];xo[Oo.uuid]=Do,va[Do]=Oo,xo[$o]=No,va[No]=So;for(var Lo=0,Co=wo;Lo!==Co;++Lo){var Ro=bo[Lo],jo=Ro[No],zo=Ro[Do];Ro[Do]=jo,Ro[No]=zo}}}this.nCachedObjects_=_o},uncache:function(){for(var va=this._objects,_o=va.length,xo=this.nCachedObjects_,bo=this._indicesByUUID,wo=this._bindings,Eo=wo.length,To=0,So=arguments.length;To!==So;++To){var $o=arguments[To],Do=$o.uuid,No=bo[Do];if(No!==void 0)if(delete bo[Do],No<xo){var Oo=--xo,Lo=va[Oo],Co=--_o,Ro=va[Co];bo[Lo.uuid]=No,va[No]=Lo,bo[Ro.uuid]=Oo,va[Oo]=Ro,va.pop();for(var jo=0,zo=Eo;jo!==zo;++jo){var Io=wo[jo],Po=Io[Oo],Bo=Io[Co];Io[No]=Po,Io[Oo]=Bo,Io.pop()}}else{var Co=--_o,Ro=va[Co];bo[Ro.uuid]=No,va[No]=Ro,va.pop();for(var jo=0,zo=Eo;jo!==zo;++jo){var Io=wo[jo];Io[No]=Io[Co],Io.pop()}}}this.nCachedObjects_=xo},subscribe_:function(va,_o){var xo=this._bindingsIndicesByPath,bo=xo[va],wo=this._bindings;if(bo!==void 0)return wo[bo];var Eo=this._paths,To=this._parsedPaths,So=this._objects,$o=So.length,Do=this.nCachedObjects_,No=new Array($o);bo=wo.length,xo[va]=bo,Eo.push(va),To.push(_o),wo.push(No);for(var Oo=Do,Lo=So.length;Oo!==Lo;++Oo){var Co=So[Oo];No[Oo]=new PropertyBinding(Co,va,_o)}return No},unsubscribe_:function(va){var _o=this._bindingsIndicesByPath,xo=_o[va];if(xo!==void 0){var bo=this._paths,wo=this._parsedPaths,Eo=this._bindings,To=Eo.length-1,So=Eo[To],$o=va[To];_o[$o]=xo,Eo[xo]=So,Eo.pop(),wo[xo]=wo[To],wo.pop(),bo[xo]=bo[To],bo.pop()}}});function AnimationAction(va,_o,xo,bo){this._mixer=va,this._clip=_o,this._localRoot=xo||null,this.blendMode=bo||_o.blendMode;for(var wo=_o.tracks,Eo=wo.length,To=new Array(Eo),So={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},$o=0;$o!==Eo;++$o){var Do=wo[$o].createInterpolant(null);To[$o]=Do,Do.settings=So}this._interpolantSettings=So,this._interpolants=To,this._propertyBindings=new Array(Eo),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(va){return this._startTime=va,this},setLoop:function(va,_o){return this.loop=va,this.repetitions=_o,this},setEffectiveWeight:function(va){return this.weight=va,this._effectiveWeight=this.enabled?va:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(va){return this._scheduleFading(va,0,1)},fadeOut:function(va){return this._scheduleFading(va,1,0)},crossFadeFrom:function(va,_o,xo){if(va.fadeOut(_o),this.fadeIn(_o),xo){var bo=this._clip.duration,wo=va._clip.duration,Eo=wo/bo,To=bo/wo;va.warp(1,Eo,_o),this.warp(To,1,_o)}return this},crossFadeTo:function(va,_o,xo){return va.crossFadeFrom(this,_o,xo)},stopFading:function(){var va=this._weightInterpolant;return va!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(va)),this},setEffectiveTimeScale:function(va){return this.timeScale=va,this._effectiveTimeScale=this.paused?0:va,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(va){return this.timeScale=this._clip.duration/va,this.stopWarping()},syncWith:function(va){return this.time=va.time,this.timeScale=va.timeScale,this.stopWarping()},halt:function(va){return this.warp(this._effectiveTimeScale,0,va)},warp:function(va,_o,xo){var bo=this._mixer,wo=bo.time,Eo=this._timeScaleInterpolant,To=this.timeScale;Eo===null&&(Eo=bo._lendControlInterpolant(),this._timeScaleInterpolant=Eo);var So=Eo.parameterPositions,$o=Eo.sampleValues;return So[0]=wo,So[1]=wo+xo,$o[0]=va/To,$o[1]=_o/To,this},stopWarping:function(){var va=this._timeScaleInterpolant;return va!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(va)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(va,_o,xo,bo){if(!this.enabled){this._updateWeight(va);return}var wo=this._startTime;if(wo!==null){var Eo=(va-wo)*xo;if(Eo<0||xo===0)return;this._startTime=null,_o=xo*Eo}_o*=this._updateTimeScale(va);var To=this._updateTime(_o),So=this._updateWeight(va);if(So>0){var $o=this._interpolants,Do=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var No=0,Oo=$o.length;No!==Oo;++No)$o[No].evaluate(To),Do[No].accumulateAdditive(So);break;case NormalAnimationBlendMode:default:for(var No=0,Oo=$o.length;No!==Oo;++No)$o[No].evaluate(To),Do[No].accumulate(bo,So)}}},_updateWeight:function(va){var _o=0;if(this.enabled){_o=this.weight;var xo=this._weightInterpolant;if(xo!==null){var bo=xo.evaluate(va)[0];_o*=bo,va>xo.parameterPositions[1]&&(this.stopFading(),bo===0&&(this.enabled=!1))}}return this._effectiveWeight=_o,_o},_updateTimeScale:function(va){var _o=0;if(!this.paused){_o=this.timeScale;var xo=this._timeScaleInterpolant;if(xo!==null){var bo=xo.evaluate(va)[0];_o*=bo,va>xo.parameterPositions[1]&&(this.stopWarping(),_o===0?this.paused=!0:this.timeScale=_o)}}return this._effectiveTimeScale=_o,_o},_updateTime:function(va){var _o=this.time+va,xo=this._clip.duration,bo=this.loop,wo=this._loopCount,Eo=bo===LoopPingPong;if(va===0)return wo===-1?_o:Eo&&(wo&1)==1?xo-_o:_o;if(bo===LoopOnce){wo===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(_o>=xo)_o=xo;else if(_o<0)_o=0;else{this.time=_o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=_o,this._mixer.dispatchEvent({type:"finished",action:this,direction:va<0?-1:1})}}else{if(wo===-1&&(va>=0?(wo=0,this._setEndings(!0,this.repetitions===0,Eo)):this._setEndings(this.repetitions===0,!0,Eo)),_o>=xo||_o<0){var To=Math.floor(_o/xo);_o-=xo*To,wo+=Math.abs(To);var So=this.repetitions-wo;if(So<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,_o=va>0?xo:0,this.time=_o,this._mixer.dispatchEvent({type:"finished",action:this,direction:va>0?1:-1});else{if(So===1){var $o=va<0;this._setEndings($o,!$o,Eo)}else this._setEndings(!1,!1,Eo);this._loopCount=wo,this.time=_o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:To})}}else this.time=_o;if(Eo&&(wo&1)==1)return xo-_o}return _o},_setEndings:function(va,_o,xo){var bo=this._interpolantSettings;xo?(bo.endingStart=ZeroSlopeEnding,bo.endingEnd=ZeroSlopeEnding):(va?bo.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:bo.endingStart=WrapAroundEnding,_o?bo.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:bo.endingEnd=WrapAroundEnding)},_scheduleFading:function(va,_o,xo){var bo=this._mixer,wo=bo.time,Eo=this._weightInterpolant;Eo===null&&(Eo=bo._lendControlInterpolant(),this._weightInterpolant=Eo);var To=Eo.parameterPositions,So=Eo.sampleValues;return To[0]=wo,So[0]=_o,To[1]=wo+va,So[1]=xo,this}});function AnimationMixer(va){this._root=va,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(va,_o){var xo=va._localRoot||this._root,bo=va._clip.tracks,wo=bo.length,Eo=va._propertyBindings,To=va._interpolants,So=xo.uuid,$o=this._bindingsByRootAndName,Do=$o[So];Do===void 0&&(Do={},$o[So]=Do);for(var No=0;No!==wo;++No){var Oo=bo[No],Lo=Oo.name,Co=Do[Lo];if(Co!==void 0)Eo[No]=Co;else{if(Co=Eo[No],Co!==void 0){Co._cacheIndex===null&&(++Co.referenceCount,this._addInactiveBinding(Co,So,Lo));continue}var Ro=_o&&_o._propertyBindings[No].binding.parsedPath;Co=new PropertyMixer(PropertyBinding.create(xo,Lo,Ro),Oo.ValueTypeName,Oo.getValueSize()),++Co.referenceCount,this._addInactiveBinding(Co,So,Lo),Eo[No]=Co}To[No].resultBuffer=Co.buffer}},_activateAction:function(va){if(!this._isActiveAction(va)){if(va._cacheIndex===null){var _o=(va._localRoot||this._root).uuid,xo=va._clip.uuid,bo=this._actionsByClip[xo];this._bindAction(va,bo&&bo.knownActions[0]),this._addInactiveAction(va,xo,_o)}for(var wo=va._propertyBindings,Eo=0,To=wo.length;Eo!==To;++Eo){var So=wo[Eo];So.useCount++==0&&(this._lendBinding(So),So.saveOriginalState())}this._lendAction(va)}},_deactivateAction:function(va){if(this._isActiveAction(va)){for(var _o=va._propertyBindings,xo=0,bo=_o.length;xo!==bo;++xo){var wo=_o[xo];--wo.useCount==0&&(wo.restoreOriginalState(),this._takeBackBinding(wo))}this._takeBackAction(va)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var va=this;this.stats={actions:{get total(){return va._actions.length},get inUse(){return va._nActiveActions}},bindings:{get total(){return va._bindings.length},get inUse(){return va._nActiveBindings}},controlInterpolants:{get total(){return va._controlInterpolants.length},get inUse(){return va._nActiveControlInterpolants}}}},_isActiveAction:function(va){var _o=va._cacheIndex;return _o!==null&&_o<this._nActiveActions},_addInactiveAction:function(va,_o,xo){var bo=this._actions,wo=this._actionsByClip,Eo=wo[_o];if(Eo===void 0)Eo={knownActions:[va],actionByRoot:{}},va._byClipCacheIndex=0,wo[_o]=Eo;else{var To=Eo.knownActions;va._byClipCacheIndex=To.length,To.push(va)}va._cacheIndex=bo.length,bo.push(va),Eo.actionByRoot[xo]=va},_removeInactiveAction:function(va){var _o=this._actions,xo=_o[_o.length-1],bo=va._cacheIndex;xo._cacheIndex=bo,_o[bo]=xo,_o.pop(),va._cacheIndex=null;var wo=va._clip.uuid,Eo=this._actionsByClip,To=Eo[wo],So=To.knownActions,$o=So[So.length-1],Do=va._byClipCacheIndex;$o._byClipCacheIndex=Do,So[Do]=$o,So.pop(),va._byClipCacheIndex=null;var No=To.actionByRoot,Oo=(va._localRoot||this._root).uuid;delete No[Oo],So.length===0&&delete Eo[wo],this._removeInactiveBindingsForAction(va)},_removeInactiveBindingsForAction:function(va){for(var _o=va._propertyBindings,xo=0,bo=_o.length;xo!==bo;++xo){var wo=_o[xo];--wo.referenceCount==0&&this._removeInactiveBinding(wo)}},_lendAction:function(va){var _o=this._actions,xo=va._cacheIndex,bo=this._nActiveActions++,wo=_o[bo];va._cacheIndex=bo,_o[bo]=va,wo._cacheIndex=xo,_o[xo]=wo},_takeBackAction:function(va){var _o=this._actions,xo=va._cacheIndex,bo=--this._nActiveActions,wo=_o[bo];va._cacheIndex=bo,_o[bo]=va,wo._cacheIndex=xo,_o[xo]=wo},_addInactiveBinding:function(va,_o,xo){var bo=this._bindingsByRootAndName,wo=bo[_o],Eo=this._bindings;wo===void 0&&(wo={},bo[_o]=wo),wo[xo]=va,va._cacheIndex=Eo.length,Eo.push(va)},_removeInactiveBinding:function(va){var _o=this._bindings,xo=va.binding,bo=xo.rootNode.uuid,wo=xo.path,Eo=this._bindingsByRootAndName,To=Eo[bo],So=_o[_o.length-1],$o=va._cacheIndex;So._cacheIndex=$o,_o[$o]=So,_o.pop(),delete To[wo],Object.keys(To).length===0&&delete Eo[bo]},_lendBinding:function(va){var _o=this._bindings,xo=va._cacheIndex,bo=this._nActiveBindings++,wo=_o[bo];va._cacheIndex=bo,_o[bo]=va,wo._cacheIndex=xo,_o[xo]=wo},_takeBackBinding:function(va){var _o=this._bindings,xo=va._cacheIndex,bo=--this._nActiveBindings,wo=_o[bo];va._cacheIndex=bo,_o[bo]=va,wo._cacheIndex=xo,_o[xo]=wo},_lendControlInterpolant:function(){var va=this._controlInterpolants,_o=this._nActiveControlInterpolants++,xo=va[_o];return xo===void 0&&(xo=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),xo.__cacheIndex=_o,va[_o]=xo),xo},_takeBackControlInterpolant:function(va){var _o=this._controlInterpolants,xo=va.__cacheIndex,bo=--this._nActiveControlInterpolants,wo=_o[bo];va.__cacheIndex=bo,_o[bo]=va,wo.__cacheIndex=xo,_o[xo]=wo},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(va,_o,xo){var bo=_o||this._root,wo=bo.uuid,Eo=typeof va=="string"?AnimationClip.findByName(bo,va):va,To=Eo!==null?Eo.uuid:va,So=this._actionsByClip[To],$o=null;if(xo===void 0&&(Eo!==null?xo=Eo.blendMode:xo=NormalAnimationBlendMode),So!==void 0){var Do=So.actionByRoot[wo];if(Do!==void 0&&Do.blendMode===xo)return Do;$o=So.knownActions[0],Eo===null&&(Eo=$o._clip)}if(Eo===null)return null;var No=new AnimationAction(this,Eo,_o,xo);return this._bindAction(No,$o),this._addInactiveAction(No,To,wo),No},existingAction:function(va,_o){var xo=_o||this._root,bo=xo.uuid,wo=typeof va=="string"?AnimationClip.findByName(xo,va):va,Eo=wo?wo.uuid:va,To=this._actionsByClip[Eo];return To!==void 0&&To.actionByRoot[bo]||null},stopAllAction:function(){for(var va=this._actions,_o=this._nActiveActions,xo=_o-1;xo>=0;--xo)va[xo].stop();return this},update:function(va){va*=this.timeScale;for(var _o=this._actions,xo=this._nActiveActions,bo=this.time+=va,wo=Math.sign(va),Eo=this._accuIndex^=1,To=0;To!==xo;++To){var So=_o[To];So._update(bo,va,wo,Eo)}for(var $o=this._bindings,Do=this._nActiveBindings,To=0;To!==Do;++To)$o[To].apply(Eo);return this},setTime:function(va){this.time=0;for(var _o=0;_o<this._actions.length;_o++)this._actions[_o].time=0;return this.update(va)},getRoot:function(){return this._root},uncacheClip:function(va){var _o=this._actions,xo=va.uuid,bo=this._actionsByClip,wo=bo[xo];if(wo!==void 0){for(var Eo=wo.knownActions,To=0,So=Eo.length;To!==So;++To){var $o=Eo[To];this._deactivateAction($o);var Do=$o._cacheIndex,No=_o[_o.length-1];$o._cacheIndex=null,$o._byClipCacheIndex=null,No._cacheIndex=Do,_o[Do]=No,_o.pop(),this._removeInactiveBindingsForAction($o)}delete bo[xo]}},uncacheRoot:function(va){var _o=va.uuid,xo=this._actionsByClip;for(var bo in xo){var wo=xo[bo].actionByRoot,Eo=wo[_o];Eo!==void 0&&(this._deactivateAction(Eo),this._removeInactiveAction(Eo))}var To=this._bindingsByRootAndName,So=To[_o];if(So!==void 0)for(var $o in So){var Do=So[$o];Do.restoreOriginalState(),this._removeInactiveBinding(Do)}},uncacheAction:function(va,_o){var xo=this.existingAction(va,_o);xo!==null&&(this._deactivateAction(xo),this._removeInactiveAction(xo))}});function Uniform(va){typeof va=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),va=arguments[1]),this.value=va}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(va,_o,xo){InterleavedBuffer.call(this,va,_o),this.meshPerAttribute=xo||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(va){return InterleavedBuffer.prototype.copy.call(this,va),this.meshPerAttribute=va.meshPerAttribute,this}});function Raycaster(va,_o,xo,bo){this.ray=new Ray(va,_o),this.near=xo||0,this.far=bo||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(va,_o){return va.distance-_o.distance}function intersectObject(va,_o,xo,bo){if(va.layers.test(_o.layers)&&va.raycast(_o,xo),bo===!0)for(var wo=va.children,Eo=0,To=wo.length;Eo<To;Eo++)intersectObject(wo[Eo],_o,xo,!0)}Object.assign(Raycaster.prototype,{set:function(va,_o){this.ray.set(va,_o)},setFromCamera:function(va,_o){_o&&_o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(_o.matrixWorld),this.ray.direction.set(va.x,va.y,.5).unproject(_o).sub(this.ray.origin).normalize(),this.camera=_o):_o&&_o.isOrthographicCamera?(this.ray.origin.set(va.x,va.y,(_o.near+_o.far)/(_o.near-_o.far)).unproject(_o),this.ray.direction.set(0,0,-1).transformDirection(_o.matrixWorld),this.camera=_o):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(va,_o,xo){var bo=xo||[];return intersectObject(va,this,bo,_o),bo.sort(ascSort),bo},intersectObjects:function(va,_o,xo){var bo=xo||[];if(Array.isArray(va)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),bo;for(var wo=0,Eo=va.length;wo<Eo;wo++)intersectObject(va[wo],this,bo,_o);return bo.sort(ascSort),bo}});function Spherical(va,_o,xo){return this.radius=va!==void 0?va:1,this.phi=_o!==void 0?_o:0,this.theta=xo!==void 0?xo:0,this}Object.assign(Spherical.prototype,{set:function(va,_o,xo){return this.radius=va,this.phi=_o,this.theta=xo,this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.radius=va.radius,this.phi=va.phi,this.theta=va.theta,this},makeSafe:function(){var va=1e-6;return this.phi=Math.max(va,Math.min(Math.PI-va,this.phi)),this},setFromVector3:function(va){return this.setFromCartesianCoords(va.x,va.y,va.z)},setFromCartesianCoords:function(va,_o,xo){return this.radius=Math.sqrt(va*va+_o*_o+xo*xo),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(va,xo),this.phi=Math.acos(MathUtils.clamp(_o/this.radius,-1,1))),this}});function Cylindrical(va,_o,xo){return this.radius=va!==void 0?va:1,this.theta=_o!==void 0?_o:0,this.y=xo!==void 0?xo:0,this}Object.assign(Cylindrical.prototype,{set:function(va,_o,xo){return this.radius=va,this.theta=_o,this.y=xo,this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.radius=va.radius,this.theta=va.theta,this.y=va.y,this},setFromVector3:function(va){return this.setFromCartesianCoords(va.x,va.y,va.z)},setFromCartesianCoords:function(va,_o,xo){return this.radius=Math.sqrt(va*va+xo*xo),this.theta=Math.atan2(va,xo),this.y=_o,this}});var _vector$7=new Vector2;function Box2(va,_o){this.min=va!==void 0?va:new Vector2(1/0,1/0),this.max=_o!==void 0?_o:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(va,_o){return this.min.copy(va),this.max.copy(_o),this},setFromPoints:function(va){this.makeEmpty();for(var _o=0,xo=va.length;_o<xo;_o++)this.expandByPoint(va[_o]);return this},setFromCenterAndSize:function(va,_o){var xo=_vector$7.copy(_o).multiplyScalar(.5);return this.min.copy(va).sub(xo),this.max.copy(va).add(xo),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.min.copy(va.min),this.max.copy(va.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(va){return va===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),va=new Vector2),this.isEmpty()?va.set(0,0):va.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(va){return va===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),va=new Vector2),this.isEmpty()?va.set(0,0):va.subVectors(this.max,this.min)},expandByPoint:function(va){return this.min.min(va),this.max.max(va),this},expandByVector:function(va){return this.min.sub(va),this.max.add(va),this},expandByScalar:function(va){return this.min.addScalar(-va),this.max.addScalar(va),this},containsPoint:function(va){return!(va.x<this.min.x||va.x>this.max.x||va.y<this.min.y||va.y>this.max.y)},containsBox:function(va){return this.min.x<=va.min.x&&va.max.x<=this.max.x&&this.min.y<=va.min.y&&va.max.y<=this.max.y},getParameter:function(va,_o){return _o===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),_o=new Vector2),_o.set((va.x-this.min.x)/(this.max.x-this.min.x),(va.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(va){return!(va.max.x<this.min.x||va.min.x>this.max.x||va.max.y<this.min.y||va.min.y>this.max.y)},clampPoint:function(va,_o){return _o===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),_o=new Vector2),_o.copy(va).clamp(this.min,this.max)},distanceToPoint:function(va){var _o=_vector$7.copy(va).clamp(this.min,this.max);return _o.sub(va).length()},intersect:function(va){return this.min.max(va.min),this.max.min(va.max),this},union:function(va){return this.min.min(va.min),this.max.max(va.max),this},translate:function(va){return this.min.add(va),this.max.add(va),this},equals:function(va){return va.min.equals(this.min)&&va.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(va,_o){this.start=va!==void 0?va:new Vector3,this.end=_o!==void 0?_o:new Vector3}Object.assign(Line3.prototype,{set:function(va,_o){return this.start.copy(va),this.end.copy(_o),this},clone:function(){return new this.constructor().copy(this)},copy:function(va){return this.start.copy(va.start),this.end.copy(va.end),this},getCenter:function(va){return va===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),va=new Vector3),va.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(va){return va===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),va=new Vector3),va.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(va,_o){return _o===void 0&&(console.warn("THREE.Line3: .at() target is now required"),_o=new Vector3),this.delta(_o).multiplyScalar(va).add(this.start)},closestPointToPointParameter:function(va,_o){_startP.subVectors(va,this.start),_startEnd.subVectors(this.end,this.start);var xo=_startEnd.dot(_startEnd),bo=_startEnd.dot(_startP),wo=bo/xo;return _o&&(wo=MathUtils.clamp(wo,0,1)),wo},closestPointToPoint:function(va,_o,xo){var bo=this.closestPointToPointParameter(va,_o);return xo===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),xo=new Vector3),this.delta(xo).multiplyScalar(bo).add(this.start)},applyMatrix4:function(va){return this.start.applyMatrix4(va),this.end.applyMatrix4(va),this},equals:function(va){return va.start.equals(this.start)&&va.end.equals(this.end)}});function ImmediateRenderObject(va){Object3D.call(this),this.material=va,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(va,_o){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=_o;for(var xo=new BufferGeometry,bo=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],wo=0,Eo=1,To=32;wo<To;wo++,Eo++){var So=wo/To*Math.PI*2,$o=Eo/To*Math.PI*2;bo.push(Math.cos(So),Math.sin(So),1,Math.cos($o),Math.sin($o),1)}xo.setAttribute("position",new Float32BufferAttribute(bo,3));var Do=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(xo,Do),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var va=this.light.distance?this.light.distance:1e3,_o=va*Math.tan(this.light.angle);this.cone.scale.set(_o,_o,va),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(va){var _o=[];va&&va.isBone&&_o.push(va);for(var xo=0;xo<va.children.length;xo++)_o.push.apply(_o,getBoneList(va.children[xo]));return _o}function SkeletonHelper(va){for(var _o=getBoneList(va),xo=new BufferGeometry,bo=[],wo=[],Eo=new Color(0,0,1),To=new Color(0,1,0),So=0;So<_o.length;So++){var $o=_o[So];$o.parent&&$o.parent.isBone&&(bo.push(0,0,0),bo.push(0,0,0),wo.push(Eo.r,Eo.g,Eo.b),wo.push(To.r,To.g,To.b))}xo.setAttribute("position",new Float32BufferAttribute(bo,3)),xo.setAttribute("color",new Float32BufferAttribute(wo,3));var Do=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,xo,Do),this.type="SkeletonHelper",this.root=va,this.bones=_o,this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(va){var _o=this.bones,xo=this.geometry,bo=xo.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var wo=0,Eo=0;wo<_o.length;wo++){var To=_o[wo];To.parent&&To.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,To.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),bo.setXYZ(Eo,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,To.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),bo.setXYZ(Eo+1,_vector$9.x,_vector$9.y,_vector$9.z),Eo+=2)}xo.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,va)};function PointLightHelper(va,_o,xo){this.light=va,this.light.updateMatrixWorld(),this.color=xo;var bo=new SphereBufferGeometry(_o,4,2),wo=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,bo,wo),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(va,_o,xo){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=xo;var bo=new OctahedronBufferGeometry(_o);bo.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var wo=bo.getAttribute("position"),Eo=new Float32Array(wo.count*3);bo.setAttribute("color",new BufferAttribute(Eo,3)),this.add(new Mesh(bo,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var va=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var _o=va.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var xo=0,bo=_o.count;xo<bo;xo++){var wo=xo<bo/2?_color1:_color2;_o.setXYZ(xo,wo.r,wo.g,wo.b)}_o.needsUpdate=!0}va.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(va,_o,xo,bo){va=va||10,_o=_o||10,xo=new Color(xo!==void 0?xo:4473924),bo=new Color(bo!==void 0?bo:8947848);for(var wo=_o/2,Eo=va/_o,To=va/2,So=[],$o=[],Do=0,No=0,Oo=-To;Do<=_o;Do++,Oo+=Eo){So.push(-To,0,Oo,To,0,Oo),So.push(Oo,0,-To,Oo,0,To);var Lo=Do===wo?xo:bo;Lo.toArray($o,No),No+=3,Lo.toArray($o,No),No+=3,Lo.toArray($o,No),No+=3,Lo.toArray($o,No),No+=3}var Co=new BufferGeometry;Co.setAttribute("position",new Float32BufferAttribute(So,3)),Co.setAttribute("color",new Float32BufferAttribute($o,3));var Ro=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Co,Ro),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(va){return LineSegments.prototype.copy.call(this,va),this.geometry.copy(va.geometry),this.material.copy(va.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(va,_o,xo,bo,wo,Eo){va=va||10,_o=_o||16,xo=xo||8,bo=bo||64,wo=new Color(wo!==void 0?wo:4473924),Eo=new Color(Eo!==void 0?Eo:8947848);var To=[],So=[],$o,Do,No,Oo,Lo,Co,Ro;for(Oo=0;Oo<=_o;Oo++)No=Oo/_o*(Math.PI*2),$o=Math.sin(No)*va,Do=Math.cos(No)*va,To.push(0,0,0),To.push($o,0,Do),Ro=Oo&1?wo:Eo,So.push(Ro.r,Ro.g,Ro.b),So.push(Ro.r,Ro.g,Ro.b);for(Oo=0;Oo<=xo;Oo++)for(Ro=Oo&1?wo:Eo,Co=va-va/xo*Oo,Lo=0;Lo<bo;Lo++)No=Lo/bo*(Math.PI*2),$o=Math.sin(No)*Co,Do=Math.cos(No)*Co,To.push($o,0,Do),So.push(Ro.r,Ro.g,Ro.b),No=(Lo+1)/bo*(Math.PI*2),$o=Math.sin(No)*Co,Do=Math.cos(No)*Co,To.push($o,0,Do),So.push(Ro.r,Ro.g,Ro.b);var jo=new BufferGeometry;jo.setAttribute("position",new Float32BufferAttribute(To,3)),jo.setAttribute("color",new Float32BufferAttribute(So,3));var zo=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,jo,zo),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(va,_o,xo){Object3D.call(this),this.light=va,this.light.updateMatrixWorld(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.color=xo,_o===void 0&&(_o=1);var bo=new BufferGeometry;bo.setAttribute("position",new Float32BufferAttribute([-_o,_o,0,_o,_o,0,_o,-_o,0,-_o,-_o,0,-_o,_o,0],3));var wo=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(bo,wo),this.add(this.lightPlane),bo=new BufferGeometry,bo.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(bo,wo),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera$1;function CameraHelper(va){var _o=new BufferGeometry,xo=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),bo=[],wo=[],Eo={},To=new Color(16755200),So=new Color(16711680),$o=new Color(43775),Do=new Color(16777215),No=new Color(3355443);Oo("n1","n2",To),Oo("n2","n4",To),Oo("n4","n3",To),Oo("n3","n1",To),Oo("f1","f2",To),Oo("f2","f4",To),Oo("f4","f3",To),Oo("f3","f1",To),Oo("n1","f1",To),Oo("n2","f2",To),Oo("n3","f3",To),Oo("n4","f4",To),Oo("p","n1",So),Oo("p","n2",So),Oo("p","n3",So),Oo("p","n4",So),Oo("u1","u2",$o),Oo("u2","u3",$o),Oo("u3","u1",$o),Oo("c","t",Do),Oo("p","c",No),Oo("cn1","cn2",No),Oo("cn3","cn4",No),Oo("cf1","cf2",No),Oo("cf3","cf4",No);function Oo(Co,Ro,jo){Lo(Co,jo),Lo(Ro,jo)}function Lo(Co,Ro){bo.push(0,0,0),wo.push(Ro.r,Ro.g,Ro.b),Eo[Co]===void 0&&(Eo[Co]=[]),Eo[Co].push(bo.length/3-1)}_o.setAttribute("position",new Float32BufferAttribute(bo,3)),_o.setAttribute("color",new Float32BufferAttribute(wo,3)),LineSegments.call(this,_o,xo),this.type="CameraHelper",this.camera=va,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=va.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Eo,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var va=this.geometry,_o=this.pointMap,xo=1,bo=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",_o,va,_camera,0,0,-1),setPoint("t",_o,va,_camera,0,0,1),setPoint("n1",_o,va,_camera,-xo,-bo,-1),setPoint("n2",_o,va,_camera,xo,-bo,-1),setPoint("n3",_o,va,_camera,-xo,bo,-1),setPoint("n4",_o,va,_camera,xo,bo,-1),setPoint("f1",_o,va,_camera,-xo,-bo,1),setPoint("f2",_o,va,_camera,xo,-bo,1),setPoint("f3",_o,va,_camera,-xo,bo,1),setPoint("f4",_o,va,_camera,xo,bo,1),setPoint("u1",_o,va,_camera,xo*.7,bo*1.1,-1),setPoint("u2",_o,va,_camera,-xo*.7,bo*1.1,-1),setPoint("u3",_o,va,_camera,0,bo*2,-1),setPoint("cf1",_o,va,_camera,-xo,0,1),setPoint("cf2",_o,va,_camera,xo,0,1),setPoint("cf3",_o,va,_camera,0,-bo,1),setPoint("cf4",_o,va,_camera,0,bo,1),setPoint("cn1",_o,va,_camera,-xo,0,-1),setPoint("cn2",_o,va,_camera,xo,0,-1),setPoint("cn3",_o,va,_camera,0,-bo,-1),setPoint("cn4",_o,va,_camera,0,bo,-1),va.getAttribute("position").needsUpdate=!0};function setPoint(va,_o,xo,bo,wo,Eo,To){_vector$b.set(wo,Eo,To).unproject(bo);var So=_o[va];if(So!==void 0)for(var $o=xo.getAttribute("position"),Do=0,No=So.length;Do<No;Do++)$o.setXYZ(So[Do],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(va,_o){this.object=va,_o===void 0&&(_o=16776960);var xo=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),bo=new Float32Array(8*3),wo=new BufferGeometry;wo.setIndex(new BufferAttribute(xo,1)),wo.setAttribute("position",new BufferAttribute(bo,3)),LineSegments.call(this,wo,new LineBasicMaterial({color:_o,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(va){if(va!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var _o=_box$3.min,xo=_box$3.max,bo=this.geometry.attributes.position,wo=bo.array;wo[0]=xo.x,wo[1]=xo.y,wo[2]=xo.z,wo[3]=_o.x,wo[4]=xo.y,wo[5]=xo.z,wo[6]=_o.x,wo[7]=_o.y,wo[8]=xo.z,wo[9]=xo.x,wo[10]=_o.y,wo[11]=xo.z,wo[12]=xo.x,wo[13]=xo.y,wo[14]=_o.z,wo[15]=_o.x,wo[16]=xo.y,wo[17]=_o.z,wo[18]=_o.x,wo[19]=_o.y,wo[20]=_o.z,wo[21]=xo.x,wo[22]=_o.y,wo[23]=_o.z,bo.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(va){return this.object=va,this.update(),this};BoxHelper.prototype.copy=function(va){return LineSegments.prototype.copy.call(this,va),this.object=va.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(va,_o){this.type="Box3Helper",this.box=va,_o=_o||16776960;var xo=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),bo=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],wo=new BufferGeometry;wo.setIndex(new BufferAttribute(xo,1)),wo.setAttribute("position",new Float32BufferAttribute(bo,3)),LineSegments.call(this,wo,new LineBasicMaterial({color:_o,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(va){var _o=this.box;_o.isEmpty()||(_o.getCenter(this.position),_o.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,va))};function PlaneHelper(va,_o,xo){this.plane=va,this.size=_o===void 0?1:_o;var bo=xo!==void 0?xo:16776960,wo=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Eo=new BufferGeometry;Eo.setAttribute("position",new Float32BufferAttribute(wo,3)),Eo.computeBoundingSphere(),Line.call(this,Eo,new LineBasicMaterial({color:bo,toneMapped:!1})),this.type="PlaneHelper";var To=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],So=new BufferGeometry;So.setAttribute("position",new Float32BufferAttribute(To,3)),So.computeBoundingSphere(),this.add(new Mesh(So,new MeshBasicMaterial({color:bo,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(va){var _o=-this.plane.constant;Math.abs(_o)<1e-8&&(_o=1e-8),this.scale.set(.5*this.size,.5*this.size,_o),this.children[0].material.side=_o<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,va)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(va,_o,xo,bo,wo,Eo){Object3D.call(this),this.type="ArrowHelper",va===void 0&&(va=new Vector3(0,0,1)),_o===void 0&&(_o=new Vector3(0,0,0)),xo===void 0&&(xo=1),bo===void 0&&(bo=16776960),wo===void 0&&(wo=.2*xo),Eo===void 0&&(Eo=.2*wo),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(_o),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:bo,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:bo,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(va),this.setLength(xo,wo,Eo)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(va){if(va.y>.99999)this.quaternion.set(0,0,0,1);else if(va.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(va.z,0,-va.x).normalize();var _o=Math.acos(va.y);this.quaternion.setFromAxisAngle(_axis,_o)}};ArrowHelper.prototype.setLength=function(va,_o,xo){_o===void 0&&(_o=.2*va),xo===void 0&&(xo=.2*_o),this.line.scale.set(1,Math.max(1e-4,va-_o),1),this.line.updateMatrix(),this.cone.scale.set(xo,_o,xo),this.cone.position.y=va,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(va){this.line.material.color.set(va),this.cone.material.color.set(va)};ArrowHelper.prototype.copy=function(va){return Object3D.prototype.copy.call(this,va,!1),this.line.copy(va.line),this.cone.copy(va.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(va){va=va||1;var _o=[0,0,0,va,0,0,0,0,0,0,va,0,0,0,0,0,0,va],xo=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],bo=new BufferGeometry;bo.setAttribute("position",new Float32BufferAttribute(_o,3)),bo.setAttribute("color",new Float32BufferAttribute(xo,3));var wo=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,bo,wo),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(va){this._renderer=va,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(va,_o=0,xo=.1,bo=100){_oldTarget=this._renderer.getRenderTarget();var wo=this._allocateTargets();return this._sceneToCubeUV(va,xo,bo,wo),_o>0&&this._blur(wo,0,0,_o),this._applyPMREM(wo),this._cleanup(wo),wo},fromEquirectangular:function(va){return va.magFilter=NearestFilter,va.minFilter=NearestFilter,va.generateMipmaps=!1,this.fromCubemap(va)},fromCubemap:function(va){_oldTarget=this._renderer.getRenderTarget();var _o=this._allocateTargets(va);return this._textureToCubeUV(va,_o),this._applyPMREM(_o),this._cleanup(_o),_o},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var va=0;va<_lodPlanes.length;va++)_lodPlanes[va].dispose()},_cleanup:function(va){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),va.scissorTest=!1,va.setSize(va.width,va.height)},_allocateTargets:function(va){var _o={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(va)?va.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},xo=_createRenderTarget(_o);return xo.depthBuffer=!va,this._pingPongRenderTarget=_createRenderTarget(_o),xo},_compileMaterial:function(va){var _o=new Mesh(_lodPlanes[0],va);this._renderer.compile(_o,_flatCamera)},_sceneToCubeUV:function(va,_o,xo,bo){var wo=90,Eo=1,To=new PerspectiveCamera(wo,Eo,_o,xo),So=[1,-1,1,1,1,1],$o=[1,1,1,-1,-1,-1],Do=this._renderer,No=Do.outputEncoding,Oo=Do.toneMapping,Lo=Do.toneMappingExposure,Co=Do.getClearColor(),Ro=Do.getClearAlpha();Do.toneMapping=LinearToneMapping,Do.toneMappingExposure=1,Do.outputEncoding=LinearEncoding;var jo=va.background;if(jo&&jo.isColor){jo.convertSRGBToLinear();var zo=Math.max(jo.r,jo.g,jo.b),Io=Math.min(Math.max(Math.ceil(Math.log2(zo)),-128),127);jo=jo.multiplyScalar(Math.pow(2,-Io));var Po=(Io+128)/255;Do.setClearColor(jo,Po),va.background=null}for(var Bo=0;Bo<6;Bo++){var ko=Bo%3;ko==0?(To.up.set(0,So[Bo],0),To.lookAt($o[Bo],0,0)):ko==1?(To.up.set(0,0,So[Bo]),To.lookAt(0,$o[Bo],0)):(To.up.set(0,So[Bo],0),To.lookAt(0,0,$o[Bo])),_setViewport(bo,ko*SIZE_MAX,Bo>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Do.setRenderTarget(bo),Do.render(va,To)}Do.toneMapping=Oo,Do.toneMappingExposure=Lo,Do.outputEncoding=No,Do.setClearColor(Co,Ro)},_textureToCubeUV:function(va,_o){var xo=this._renderer;va.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var bo=va.isCubeTexture?this._cubemapShader:this._equirectShader,wo=new Mesh(_lodPlanes[0],bo),Eo=bo.uniforms;Eo.envMap.value=va,va.isCubeTexture||Eo.texelSize.value.set(1/va.image.width,1/va.image.height),Eo.inputEncoding.value=ENCODINGS[va.encoding],Eo.outputEncoding.value=ENCODINGS[_o.texture.encoding],_setViewport(_o,0,0,3*SIZE_MAX,2*SIZE_MAX),xo.setRenderTarget(_o),xo.render(wo,_flatCamera)},_applyPMREM:function(va){var _o=this._renderer,xo=_o.autoClear;_o.autoClear=!1;for(var bo=1;bo<TOTAL_LODS;bo++){var wo=Math.sqrt(_sigmas[bo]*_sigmas[bo]-_sigmas[bo-1]*_sigmas[bo-1]),Eo=_axisDirections[(bo-1)%_axisDirections.length];this._blur(va,bo-1,bo,wo,Eo)}_o.autoClear=xo},_blur:function(va,_o,xo,bo,wo){var Eo=this._pingPongRenderTarget;this._halfBlur(va,Eo,_o,xo,bo,"latitudinal",wo),this._halfBlur(Eo,va,xo,xo,bo,"longitudinal",wo)},_halfBlur:function(va,_o,xo,bo,wo,Eo,To){var So=this._renderer,$o=this._blurMaterial;Eo!=="latitudinal"&&Eo!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Do=3,No=new Mesh(_lodPlanes[bo],$o),Oo=$o.uniforms,Lo=_sizeLods[xo]-1,Co=isFinite(wo)?Math.PI/(2*Lo):2*Math.PI/(2*MAX_SAMPLES-1),Ro=wo/Co,jo=isFinite(wo)?1+Math.floor(Do*Ro):MAX_SAMPLES;jo>MAX_SAMPLES&&console.warn(`sigmaRadians, ${wo}, is too large and will clip, as it requested ${jo} samples when the maximum is set to ${MAX_SAMPLES}`);for(var zo=[],Io=0,Po=0;Po<MAX_SAMPLES;++Po){var Uo=Po/Ro,Bo=Math.exp(-Uo*Uo/2);zo.push(Bo),Po==0?Io+=Bo:Po<jo&&(Io+=2*Bo)}for(var Po=0;Po<zo.length;Po++)zo[Po]=zo[Po]/Io;Oo.envMap.value=va.texture,Oo.samples.value=jo,Oo.weights.value=zo,Oo.latitudinal.value=Eo==="latitudinal",To&&(Oo.poleAxis.value=To),Oo.dTheta.value=Co,Oo.mipInt.value=LOD_MAX-xo,Oo.inputEncoding.value=ENCODINGS[va.texture.encoding],Oo.outputEncoding.value=ENCODINGS[va.texture.encoding];var ko=_sizeLods[bo],Uo=3*Math.max(0,SIZE_MAX-2*ko),Qo=(bo===0?0:2*SIZE_MAX)+2*ko*(bo>LOD_MAX-LOD_MIN?bo-LOD_MAX+LOD_MIN:0);_setViewport(_o,Uo,Qo,3*ko,2*ko),So.setRenderTarget(_o),So.render(No,_flatCamera)}};function _isLDR(va){return va===void 0||va.type!==UnsignedByteType?!1:va.encoding===LinearEncoding||va.encoding===sRGBEncoding||va.encoding===GammaEncoding}function _createPlanes(){for(var va=[],_o=[],xo=[],bo=LOD_MAX,wo=0;wo<TOTAL_LODS;wo++){var Eo=Math.pow(2,bo);_o.push(Eo);var To=1/Eo;wo>LOD_MAX-LOD_MIN?To=EXTRA_LOD_SIGMA[wo-LOD_MAX+LOD_MIN-1]:wo==0&&(To=0),xo.push(To);for(var So=1/(Eo-1),$o=-So/2,Do=1+So/2,No=[$o,$o,Do,$o,Do,Do,$o,$o,Do,Do,$o,Do],Oo=6,Lo=6,Co=3,Ro=2,jo=1,zo=new Float32Array(Co*Lo*Oo),Io=new Float32Array(Ro*Lo*Oo),Po=new Float32Array(jo*Lo*Oo),Bo=0;Bo<Oo;Bo++){var ko=Bo%3*2/3-1,Uo=Bo>2?0:-1,Qo=[ko,Uo,0,ko+2/3,Uo,0,ko+2/3,Uo+1,0,ko,Uo,0,ko+2/3,Uo+1,0,ko,Uo+1,0];zo.set(Qo,Co*Lo*Bo),Io.set(No,Ro*Lo*Bo);var qo=[Bo,Bo,Bo,Bo,Bo,Bo];Po.set(qo,jo*Lo*Bo)}var Zo=new BufferGeometry;Zo.setAttribute("position",new BufferAttribute(zo,Co)),Zo.setAttribute("uv",new BufferAttribute(Io,Ro)),Zo.setAttribute("faceIndex",new BufferAttribute(Po,jo)),va.push(Zo),bo>LOD_MIN&&bo--}return{_lodPlanes:va,_sizeLods:_o,_sigmas:xo}}function _createRenderTarget(va){var _o=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,va);return _o.texture.mapping=CubeUVReflectionMapping,_o.texture.name="PMREM.cubeUv",_o.scissorTest=!0,_o}function _setViewport(va,_o,xo,bo,wo){va.viewport.set(_o,xo,bo,wo),va.scissor.set(_o,xo,bo,wo)}function _getBlurShader(va){var _o=new Float32Array(va),xo=new Vector3(0,1,0),bo=new RawShaderMaterial({defines:{n:va},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:_o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:xo},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return bo.type="SphericalGaussianBlur",bo}function _getEquirectShader(){var va=new Vector2(1,1),_o=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:va},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _o.type="EquirectangularToCubeUV",_o}function _getCubemapShader(){var va=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return va.type="CubemapToCubeUV",va}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(va,_o,xo,bo,wo,Eo,To){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(va,_o,xo,wo,Eo,To)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(va){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),va}function MultiMaterial(va){return va===void 0&&(va=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),va.isMultiMaterial=!0,va.materials=va,va.clone=function(){return va.slice()},va}function PointCloud(va,_o){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(va,_o)}function Particle(va){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(va)}function ParticleSystem(va,_o){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(va,_o)}function PointCloudMaterial(va){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function ParticleBasicMaterial(va){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function ParticleSystemMaterial(va){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(va)}function Vertex(va,_o,xo){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(va,_o,xo)}function DynamicBufferAttribute(va,_o){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(va,_o).setUsage(DynamicDrawUsage)}function Int8Attribute(va,_o){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(va,_o)}function Uint8Attribute(va,_o){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(va,_o)}function Uint8ClampedAttribute(va,_o){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(va,_o)}function Int16Attribute(va,_o){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(va,_o)}function Uint16Attribute(va,_o){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(va,_o)}function Int32Attribute(va,_o){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(va,_o)}function Uint32Attribute(va,_o){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(va,_o)}function Float32Attribute(va,_o){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(va,_o)}function Float64Attribute(va,_o){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(va,_o)}Curve.create=function(va,_o){return console.log("THREE.Curve.create() has been deprecated"),va.prototype=Object.create(Curve.prototype),va.prototype.constructor=va,va.prototype.getPoint=_o,va};Object.assign(CurvePath.prototype,{createPointsGeometry:function(va){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var _o=this.getPoints(va);return this.createGeometry(_o)},createSpacedPointsGeometry:function(va){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var _o=this.getSpacedPoints(va);return this.createGeometry(_o)},createGeometry:function(va){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var _o=new Geometry,xo=0,bo=va.length;xo<bo;xo++){var wo=va[xo];_o.vertices.push(new Vector3(wo.x,wo.y,wo.z||0))}return _o}});Object.assign(Path.prototype,{fromPoints:function(va){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(va)}});function ClosedSplineCurve3(va){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(va){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(va){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,va),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(va){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(va)}function BoundingBoxHelper(va,_o){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(va,_o)}function EdgesHelper(va,_o){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(va.geometry),new LineBasicMaterial({color:_o!==void 0?_o:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(va,_o){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(va.geometry),new LineBasicMaterial({color:_o!==void 0?_o:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(va){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(va)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(va){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(va)}function BinaryTextureLoader(va){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(va)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(va){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(va)}});Object.assign(Box2.prototype,{center:function(va){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(va)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(va){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},size:function(va){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(va)}});Object.assign(Box3.prototype,{center:function(va){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(va)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(va){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},isIntersectionSphere:function(va){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(va)},size:function(va){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(va)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(va){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(va)};Line3.prototype.center=function(va){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(va)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(va){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(va)},nextPowerOfTwo:function(va){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(va)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(va,_o){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(va,_o)},multiplyVector3:function(va){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),va.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(va){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),va.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(va){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(va)},flattenToArrayOffset:function(va,_o){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(va,_o)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(va){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(va)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(va){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},multiplyVector4:function(va){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(va){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),va.transformDirection(this)},crossVector:function(va){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(va){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),va.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(va,_o,xo,bo,wo,Eo){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(va,_o,bo,xo,wo,Eo)}});Plane.prototype.isIntersectionLine=function(va){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(va)};Quaternion.prototype.multiplyVector3=function(va){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),va.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(va){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(va)},isIntersectionPlane:function(va){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(va)},isIntersectionSphere:function(va){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(va)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(va,_o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(va,_o)},midpoint:function(va){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(va)},normal:function(va){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(va)},plane:function(va){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(va)}});Object.assign(Triangle,{barycoordFromPoint:function(va,_o,xo,bo,wo){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(va,_o,xo,bo,wo)},normal:function(va,_o,xo,bo){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(va,_o,xo,bo)}});Object.assign(Shape.prototype,{extractAllPoints:function(va){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(va)},extrude:function(va){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,va)},makeGeometry:function(va){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,va)}});Object.assign(Vector2.prototype,{fromAttribute:function(va,_o,xo){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_o,xo)},distanceToManhattan:function(va){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(va)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(va){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(va)},getScaleFromMatrix:function(va){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(va)},getColumnFromMatrix:function(va,_o){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(_o,va)},applyProjection:function(va){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(va)},fromAttribute:function(va,_o,xo){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_o,xo)},distanceToManhattan:function(va){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(va)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(va,_o,xo){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(va,_o,xo)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(va){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.assign(Object3D.prototype,{getChildByName:function(va){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(va)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(va,_o){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(_o,va)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(va){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(va){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=va}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(va){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=va}});PerspectiveCamera.prototype.setLens=function(va,_o){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),_o!==void 0&&(this.filmGauge=_o),this.setFocalLength(va)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(va){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=va}},shadowCameraLeft:{set:function(va){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=va}},shadowCameraRight:{set:function(va){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=va}},shadowCameraTop:{set:function(va){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=va}},shadowCameraBottom:{set:function(va){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=va}},shadowCameraNear:{set:function(va){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=va}},shadowCameraFar:{set:function(va){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=va}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(va){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=va}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(va){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=va}},shadowMapHeight:{set:function(va){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=va}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(va){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(va===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(va){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(va)},addAttribute:function(va,_o){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(_o&&_o.isBufferAttribute)&&!(_o&&_o.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(va,new BufferAttribute(arguments[1],arguments[2]))):va==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(_o),this):this.setAttribute(va,_o)},addDrawCall:function(va,_o,xo){xo!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(va,_o)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(va){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(va)},applyMatrix:function(va){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(va)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(va){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=va}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(va){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=va}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(va){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(va)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(va){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(va===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(va){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=va===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(va){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=va}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(va){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=va}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(va,_o,xo,bo){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(va),this.clear(_o,xo,bo)},animate:function(va){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(va)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(va){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(va)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(va){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=va}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(va){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=va}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(va){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=va===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(va,_o,xo){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(va,xo)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(va){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=va}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(va){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=va}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(va){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=va}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(va){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=va}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(va){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=va}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(va){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=va}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(va){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=va}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(va){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=va}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(va){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=va}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(va){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=va}}});Object.defineProperties(Audio.prototype,{load:{value:function(va){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var _o=this,xo=new AudioLoader;return xo.load(va,function(bo){_o.setBuffer(bo)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(va,_o){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(va,_o)};var GeometryUtils={merge:function(va,_o,xo){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var bo;_o.isMesh&&(_o.matrixAutoUpdate&&_o.updateMatrix(),bo=_o.matrix,_o=_o.geometry),va.merge(_o,bo,xo)},center:function(va){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),va.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(va,_o,xo,bo){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var wo=new TextureLoader;wo.setCrossOrigin(this.crossOrigin);var Eo=wo.load(va,xo,void 0,bo);return _o&&(Eo.mapping=_o),Eo};ImageUtils.loadTextureCube=function(va,_o,xo,bo){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var wo=new CubeTextureLoader;wo.setCrossOrigin(this.crossOrigin);var Eo=wo.load(va,xo,void 0,bo);return _o&&(Eo.mapping=_o),Eo};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera:Camera$1,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding}),require$$1=getAugmentedNamespace(three_module),five={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(va,_o){for(var xo=new Array(arguments.length-1),bo=0,wo=2,Eo=!0;wo<arguments.length;)xo[bo++]=arguments[wo++];return new Promise(function(So,$o){xo[bo]=function(No){if(Eo)if(Eo=!1,No)$o(No);else{for(var Oo=new Array(arguments.length-1),Lo=0;Lo<Oo.length;)Oo[Lo++]=arguments[Lo];So.apply(null,Oo)}};try{va.apply(_o||null,xo)}catch(Do){Eo&&(Eo=!1,$o(Do))}})}var base64$1={};(function(va){var _o=va;_o.length=function(So){var $o=So.length;if(!$o)return 0;for(var Do=0;--$o%4>1&&So.charAt($o)==="=";)++Do;return Math.ceil(So.length*3)/4-Do};for(var xo=new Array(64),bo=new Array(123),wo=0;wo<64;)bo[xo[wo]=wo<26?wo+65:wo<52?wo+71:wo<62?wo-4:wo-59|43]=wo++;_o.encode=function(So,$o,Do){for(var No=null,Oo=[],Lo=0,Co=0,Ro;$o<Do;){var jo=So[$o++];switch(Co){case 0:Oo[Lo++]=xo[jo>>2],Ro=(jo&3)<<4,Co=1;break;case 1:Oo[Lo++]=xo[Ro|jo>>4],Ro=(jo&15)<<2,Co=2;break;case 2:Oo[Lo++]=xo[Ro|jo>>6],Oo[Lo++]=xo[jo&63],Co=0;break}Lo>8191&&((No||(No=[])).push(String.fromCharCode.apply(String,Oo)),Lo=0)}return Co&&(Oo[Lo++]=xo[Ro],Oo[Lo++]=61,Co===1&&(Oo[Lo++]=61)),No?(Lo&&No.push(String.fromCharCode.apply(String,Oo.slice(0,Lo))),No.join("")):String.fromCharCode.apply(String,Oo.slice(0,Lo))};var Eo="invalid encoding";_o.decode=function(So,$o,Do){for(var No=Do,Oo=0,Lo,Co=0;Co<So.length;){var Ro=So.charCodeAt(Co++);if(Ro===61&&Oo>1)break;if((Ro=bo[Ro])===void 0)throw Error(Eo);switch(Oo){case 0:Lo=Ro,Oo=1;break;case 1:$o[Do++]=Lo<<2|(Ro&48)>>4,Lo=Ro,Oo=2;break;case 2:$o[Do++]=(Lo&15)<<4|(Ro&60)>>2,Lo=Ro,Oo=3;break;case 3:$o[Do++]=(Lo&3)<<6|Ro,Oo=0;break}}if(Oo===1)throw Error(Eo);return Do-No},_o.test=function(So){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(So)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(_o,xo,bo){return(this._listeners[_o]||(this._listeners[_o]=[])).push({fn:xo,ctx:bo||this}),this};EventEmitter.prototype.off=function(_o,xo){if(_o===void 0)this._listeners={};else if(xo===void 0)this._listeners[_o]=[];else for(var bo=this._listeners[_o],wo=0;wo<bo.length;)bo[wo].fn===xo?bo.splice(wo,1):++wo;return this};EventEmitter.prototype.emit=function(_o){var xo=this._listeners[_o];if(xo){for(var bo=[],wo=1;wo<arguments.length;)bo.push(arguments[wo++]);for(wo=0;wo<xo.length;)xo[wo].fn.apply(xo[wo++].ctx,bo)}return this};var float=factory(factory);function factory(va){return typeof Float32Array!="undefined"?function(){var _o=new Float32Array([-0]),xo=new Uint8Array(_o.buffer),bo=xo[3]===128;function wo($o,Do,No){_o[0]=$o,Do[No]=xo[0],Do[No+1]=xo[1],Do[No+2]=xo[2],Do[No+3]=xo[3]}function Eo($o,Do,No){_o[0]=$o,Do[No]=xo[3],Do[No+1]=xo[2],Do[No+2]=xo[1],Do[No+3]=xo[0]}va.writeFloatLE=bo?wo:Eo,va.writeFloatBE=bo?Eo:wo;function To($o,Do){return xo[0]=$o[Do],xo[1]=$o[Do+1],xo[2]=$o[Do+2],xo[3]=$o[Do+3],_o[0]}function So($o,Do){return xo[3]=$o[Do],xo[2]=$o[Do+1],xo[1]=$o[Do+2],xo[0]=$o[Do+3],_o[0]}va.readFloatLE=bo?To:So,va.readFloatBE=bo?So:To}():function(){function _o(bo,wo,Eo,To){var So=wo<0?1:0;if(So&&(wo=-wo),wo===0)bo(1/wo>0?0:2147483648,Eo,To);else if(isNaN(wo))bo(2143289344,Eo,To);else if(wo>34028234663852886e22)bo((So<<31|2139095040)>>>0,Eo,To);else if(wo<11754943508222875e-54)bo((So<<31|Math.round(wo/1401298464324817e-60))>>>0,Eo,To);else{var $o=Math.floor(Math.log(wo)/Math.LN2),Do=Math.round(wo*Math.pow(2,-$o)*8388608)&8388607;bo((So<<31|$o+127<<23|Do)>>>0,Eo,To)}}va.writeFloatLE=_o.bind(null,writeUintLE),va.writeFloatBE=_o.bind(null,writeUintBE);function xo(bo,wo,Eo){var To=bo(wo,Eo),So=(To>>31)*2+1,$o=To>>>23&255,Do=To&8388607;return $o===255?Do?NaN:So*(1/0):$o===0?So*1401298464324817e-60*Do:So*Math.pow(2,$o-150)*(Do+8388608)}va.readFloatLE=xo.bind(null,readUintLE),va.readFloatBE=xo.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var _o=new Float64Array([-0]),xo=new Uint8Array(_o.buffer),bo=xo[7]===128;function wo($o,Do,No){_o[0]=$o,Do[No]=xo[0],Do[No+1]=xo[1],Do[No+2]=xo[2],Do[No+3]=xo[3],Do[No+4]=xo[4],Do[No+5]=xo[5],Do[No+6]=xo[6],Do[No+7]=xo[7]}function Eo($o,Do,No){_o[0]=$o,Do[No]=xo[7],Do[No+1]=xo[6],Do[No+2]=xo[5],Do[No+3]=xo[4],Do[No+4]=xo[3],Do[No+5]=xo[2],Do[No+6]=xo[1],Do[No+7]=xo[0]}va.writeDoubleLE=bo?wo:Eo,va.writeDoubleBE=bo?Eo:wo;function To($o,Do){return xo[0]=$o[Do],xo[1]=$o[Do+1],xo[2]=$o[Do+2],xo[3]=$o[Do+3],xo[4]=$o[Do+4],xo[5]=$o[Do+5],xo[6]=$o[Do+6],xo[7]=$o[Do+7],_o[0]}function So($o,Do){return xo[7]=$o[Do],xo[6]=$o[Do+1],xo[5]=$o[Do+2],xo[4]=$o[Do+3],xo[3]=$o[Do+4],xo[2]=$o[Do+5],xo[1]=$o[Do+6],xo[0]=$o[Do+7],_o[0]}va.readDoubleLE=bo?To:So,va.readDoubleBE=bo?So:To}():function(){function _o(bo,wo,Eo,To,So,$o){var Do=To<0?1:0;if(Do&&(To=-To),To===0)bo(0,So,$o+wo),bo(1/To>0?0:2147483648,So,$o+Eo);else if(isNaN(To))bo(0,So,$o+wo),bo(2146959360,So,$o+Eo);else if(To>17976931348623157e292)bo(0,So,$o+wo),bo((Do<<31|2146435072)>>>0,So,$o+Eo);else{var No;if(To<22250738585072014e-324)No=To/5e-324,bo(No>>>0,So,$o+wo),bo((Do<<31|No/4294967296)>>>0,So,$o+Eo);else{var Oo=Math.floor(Math.log(To)/Math.LN2);Oo===1024&&(Oo=1023),No=To*Math.pow(2,-Oo),bo(No*4503599627370496>>>0,So,$o+wo),bo((Do<<31|Oo+1023<<20|No*1048576&1048575)>>>0,So,$o+Eo)}}}va.writeDoubleLE=_o.bind(null,writeUintLE,0,4),va.writeDoubleBE=_o.bind(null,writeUintBE,4,0);function xo(bo,wo,Eo,To,So){var $o=bo(To,So+wo),Do=bo(To,So+Eo),No=(Do>>31)*2+1,Oo=Do>>>20&2047,Lo=4294967296*(Do&1048575)+$o;return Oo===2047?Lo?NaN:No*(1/0):Oo===0?No*5e-324*Lo:No*Math.pow(2,Oo-1075)*(Lo+4503599627370496)}va.readDoubleLE=xo.bind(null,readUintLE,0,4),va.readDoubleBE=xo.bind(null,readUintBE,4,0)}(),va}function writeUintLE(va,_o,xo){_o[xo]=va&255,_o[xo+1]=va>>>8&255,_o[xo+2]=va>>>16&255,_o[xo+3]=va>>>24}function writeUintBE(va,_o,xo){_o[xo]=va>>>24,_o[xo+1]=va>>>16&255,_o[xo+2]=va>>>8&255,_o[xo+3]=va&255}function readUintLE(va,_o){return(va[_o]|va[_o+1]<<8|va[_o+2]<<16|va[_o+3]<<24)>>>0}function readUintBE(va,_o){return(va[_o]<<24|va[_o+1]<<16|va[_o+2]<<8|va[_o+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(va){}return null}var utf8$2={};(function(va){var _o=va;_o.length=function(bo){for(var wo=0,Eo=0,To=0;To<bo.length;++To)Eo=bo.charCodeAt(To),Eo<128?wo+=1:Eo<2048?wo+=2:(Eo&64512)==55296&&(bo.charCodeAt(To+1)&64512)==56320?(++To,wo+=4):wo+=3;return wo},_o.read=function(bo,wo,Eo){var To=Eo-wo;if(To<1)return"";for(var So=null,$o=[],Do=0,No;wo<Eo;)No=bo[wo++],No<128?$o[Do++]=No:No>191&&No<224?$o[Do++]=(No&31)<<6|bo[wo++]&63:No>239&&No<365?(No=((No&7)<<18|(bo[wo++]&63)<<12|(bo[wo++]&63)<<6|bo[wo++]&63)-65536,$o[Do++]=55296+(No>>10),$o[Do++]=56320+(No&1023)):$o[Do++]=(No&15)<<12|(bo[wo++]&63)<<6|bo[wo++]&63,Do>8191&&((So||(So=[])).push(String.fromCharCode.apply(String,$o)),Do=0);return So?(Do&&So.push(String.fromCharCode.apply(String,$o.slice(0,Do))),So.join("")):String.fromCharCode.apply(String,$o.slice(0,Do))},_o.write=function(bo,wo,Eo){for(var To=Eo,So,$o,Do=0;Do<bo.length;++Do)So=bo.charCodeAt(Do),So<128?wo[Eo++]=So:So<2048?(wo[Eo++]=So>>6|192,wo[Eo++]=So&63|128):(So&64512)==55296&&(($o=bo.charCodeAt(Do+1))&64512)==56320?(So=65536+((So&1023)<<10)+($o&1023),++Do,wo[Eo++]=So>>18|240,wo[Eo++]=So>>12&63|128,wo[Eo++]=So>>6&63|128,wo[Eo++]=So&63|128):(wo[Eo++]=So>>12|224,wo[Eo++]=So>>6&63|128,wo[Eo++]=So&63|128);return Eo-To}})(utf8$2);var pool_1=pool;function pool(va,_o,xo){var bo=xo||8192,wo=bo>>>1,Eo=null,To=bo;return function($o){if($o<1||$o>wo)return va($o);To+$o>bo&&(Eo=va(bo),To=0);var Do=_o.call(Eo,To,To+=$o);return To&7&&(To=(To|7)+1),Do}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(va,_o){this.lo=va>>>0,this.hi=_o>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function va(_o){if(_o===0)return zero;var xo=_o<0;xo&&(_o=-_o);var bo=_o>>>0,wo=(_o-bo)/4294967296>>>0;return xo&&(wo=~wo>>>0,bo=~bo>>>0,++bo>4294967295&&(bo=0,++wo>4294967295&&(wo=0))),new LongBits$2(bo,wo)};LongBits$2.from=function va(_o){if(typeof _o=="number")return LongBits$2.fromNumber(_o);if(util$5.isString(_o))if(util$5.Long)_o=util$5.Long.fromString(_o);else return LongBits$2.fromNumber(parseInt(_o,10));return _o.low||_o.high?new LongBits$2(_o.low>>>0,_o.high>>>0):zero};LongBits$2.prototype.toNumber=function va(_o){if(!_o&&this.hi>>>31){var xo=~this.lo+1>>>0,bo=~this.hi>>>0;return xo||(bo=bo+1>>>0),-(xo+bo*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function va(_o){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(_o)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(_o)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function va(_o){return _o===zeroHash?zero:new LongBits$2((charCodeAt.call(_o,0)|charCodeAt.call(_o,1)<<8|charCodeAt.call(_o,2)<<16|charCodeAt.call(_o,3)<<24)>>>0,(charCodeAt.call(_o,4)|charCodeAt.call(_o,5)<<8|charCodeAt.call(_o,6)<<16|charCodeAt.call(_o,7)<<24)>>>0)};LongBits$2.prototype.toHash=function va(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function va(){var _o=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^_o)>>>0,this.lo=(this.lo<<1^_o)>>>0,this};LongBits$2.prototype.zzDecode=function va(){var _o=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^_o)>>>0,this.hi=(this.hi>>>1^_o)>>>0,this};LongBits$2.prototype.length=function va(){var _o=this.lo,xo=(this.lo>>>28|this.hi<<4)>>>0,bo=this.hi>>>24;return bo===0?xo===0?_o<16384?_o<128?1:2:_o<2097152?3:4:xo<16384?xo<128?5:6:xo<2097152?7:8:bo<128?9:10};(function(va){var _o=va;_o.asPromise=aspromise,_o.base64=base64$1,_o.EventEmitter=eventemitter,_o.float=float,_o.inquire=inquire_1,_o.utf8=utf8$2,_o.pool=pool_1,_o.LongBits=longbits,_o.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_o.global=_o.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,_o.emptyArray=Object.freeze?Object.freeze([]):[],_o.emptyObject=Object.freeze?Object.freeze({}):{},_o.isInteger=Number.isInteger||function(Eo){return typeof Eo=="number"&&isFinite(Eo)&&Math.floor(Eo)===Eo},_o.isString=function(Eo){return typeof Eo=="string"||Eo instanceof String},_o.isObject=function(Eo){return Eo&&typeof Eo=="object"},_o.isset=_o.isSet=function(Eo,To){var So=Eo[To];return So!=null&&Eo.hasOwnProperty(To)?typeof So!="object"||(Array.isArray(So)?So.length:Object.keys(So).length)>0:!1},_o.Buffer=function(){try{var wo=_o.inquire("buffer").Buffer;return wo.prototype.utf8Write?wo:null}catch{return null}}(),_o._Buffer_from=null,_o._Buffer_allocUnsafe=null,_o.newBuffer=function(Eo){return typeof Eo=="number"?_o.Buffer?_o._Buffer_allocUnsafe(Eo):new _o.Array(Eo):_o.Buffer?_o._Buffer_from(Eo):typeof Uint8Array=="undefined"?Eo:new Uint8Array(Eo)},_o.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,_o.Long=_o.global.dcodeIO&&_o.global.dcodeIO.Long||_o.global.Long||_o.inquire("long"),_o.key2Re=/^true|false|0|1$/,_o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_o.longToHash=function(Eo){return Eo?_o.LongBits.from(Eo).toHash():_o.LongBits.zeroHash},_o.longFromHash=function(Eo,To){var So=_o.LongBits.fromHash(Eo);return _o.Long?_o.Long.fromBits(So.lo,So.hi,To):So.toNumber(Boolean(To))};function xo(wo,Eo,To){for(var So=Object.keys(Eo),$o=0;$o<So.length;++$o)(wo[So[$o]]===void 0||!To)&&(wo[So[$o]]=Eo[So[$o]]);return wo}_o.merge=xo,_o.lcFirst=function(Eo){return Eo.charAt(0).toLowerCase()+Eo.substring(1)};function bo(wo){function Eo(To,So){if(!(this instanceof Eo))return new Eo(To,So);Object.defineProperty(this,"message",{get:function(){return To}}),Error.captureStackTrace?Error.captureStackTrace(this,Eo):Object.defineProperty(this,"stack",{value:new Error().stack||""}),So&&xo(this,So)}return(Eo.prototype=Object.create(Error.prototype)).constructor=Eo,Object.defineProperty(Eo.prototype,"name",{get:function(){return wo}}),Eo.prototype.toString=function(){return this.name+": "+this.message},Eo}_o.newError=bo,_o.ProtocolError=bo("ProtocolError"),_o.oneOfGetter=function(Eo){for(var To={},So=0;So<Eo.length;++So)To[Eo[So]]=1;return function(){for(var $o=Object.keys(this),Do=$o.length-1;Do>-1;--Do)if(To[$o[Do]]===1&&this[$o[Do]]!==void 0&&this[$o[Do]]!==null)return $o[Do]}},_o.oneOfSetter=function(Eo){return function(To){for(var So=0;So<Eo.length;++So)Eo[So]!==To&&delete this[Eo[So]]}},_o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_o._configure=function(){var wo=_o.Buffer;if(!wo){_o._Buffer_from=_o._Buffer_allocUnsafe=null;return}_o._Buffer_from=wo.from!==Uint8Array.from&&wo.from||function(To,So){return new wo(To,So)},_o._Buffer_allocUnsafe=wo.allocUnsafe||function(To){return new wo(To)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(va,_o,xo){this.fn=va,this.len=_o,this.next=void 0,this.val=xo}function noop$2(){}function State(va){this.head=va.head,this.tail=va.tail,this.len=va.len,this.next=va.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$1=function va(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function va(_o){return new util$4.Array(_o)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function va(_o,xo,bo){return this.tail=this.tail.next=new Op(_o,xo,bo),this.len+=xo,this};function writeByte(va,_o,xo){_o[xo]=va&255}function writeVarint32(va,_o,xo){for(;va>127;)_o[xo++]=va&127|128,va>>>=7;_o[xo]=va}function VarintOp(va,_o){this.len=va,this.next=void 0,this.val=_o}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function va(_o){return this.len+=(this.tail=this.tail.next=new VarintOp((_o=_o>>>0)<128?1:_o<16384?2:_o<2097152?3:_o<268435456?4:5,_o)).len,this};Writer$1.prototype.int32=function va(_o){return _o<0?this._push(writeVarint64,10,LongBits$1.fromNumber(_o)):this.uint32(_o)};Writer$1.prototype.sint32=function va(_o){return this.uint32((_o<<1^_o>>31)>>>0)};function writeVarint64(va,_o,xo){for(;va.hi;)_o[xo++]=va.lo&127|128,va.lo=(va.lo>>>7|va.hi<<25)>>>0,va.hi>>>=7;for(;va.lo>127;)_o[xo++]=va.lo&127|128,va.lo=va.lo>>>7;_o[xo++]=va.lo}Writer$1.prototype.uint64=function va(_o){var xo=LongBits$1.from(_o);return this._push(writeVarint64,xo.length(),xo)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function va(_o){var xo=LongBits$1.from(_o).zzEncode();return this._push(writeVarint64,xo.length(),xo)};Writer$1.prototype.bool=function va(_o){return this._push(writeByte,1,_o?1:0)};function writeFixed32(va,_o,xo){_o[xo]=va&255,_o[xo+1]=va>>>8&255,_o[xo+2]=va>>>16&255,_o[xo+3]=va>>>24}Writer$1.prototype.fixed32=function va(_o){return this._push(writeFixed32,4,_o>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function va(_o){var xo=LongBits$1.from(_o);return this._push(writeFixed32,4,xo.lo)._push(writeFixed32,4,xo.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function va(_o){return this._push(util$4.float.writeFloatLE,4,_o)};Writer$1.prototype.double=function va(_o){return this._push(util$4.float.writeDoubleLE,8,_o)};var writeBytes=util$4.Array.prototype.set?function va(_o,xo,bo){xo.set(_o,bo)}:function va(_o,xo,bo){for(var wo=0;wo<_o.length;++wo)xo[bo+wo]=_o[wo]};Writer$1.prototype.bytes=function va(_o){var xo=_o.length>>>0;if(!xo)return this._push(writeByte,1,0);if(util$4.isString(_o)){var bo=Writer$1.alloc(xo=base64.length(_o));base64.decode(_o,bo,0),_o=bo}return this.uint32(xo)._push(writeBytes,xo,_o)};Writer$1.prototype.string=function va(_o){var xo=utf8$1.length(_o);return xo?this.uint32(xo)._push(utf8$1.write,xo,_o):this._push(writeByte,1,0)};Writer$1.prototype.fork=function va(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function va(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function va(){var _o=this.head,xo=this.tail,bo=this.len;return this.reset().uint32(bo),bo&&(this.tail.next=_o.next,this.tail=xo,this.len+=bo),this};Writer$1.prototype.finish=function va(){for(var _o=this.head.next,xo=this.constructor.alloc(this.len),bo=0;_o;)_o.fn(_o.val,xo,bo),bo+=_o.len,_o=_o.next;return xo};Writer$1._configure=function(va){BufferWriter$1=va,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(_o,xo,bo){xo.set(_o,bo)}:function(_o,xo,bo){if(_o.copy)_o.copy(xo,bo,0,_o.length);else for(var wo=0;wo<_o.length;)xo[bo++]=_o[wo++]}};BufferWriter.prototype.bytes=function va(_o){util$3.isString(_o)&&(_o=util$3._Buffer_from(_o,"base64"));var xo=_o.length>>>0;return this.uint32(xo),xo&&this._push(BufferWriter.writeBytesBuffer,xo,_o),this};function writeStringBuffer(va,_o,xo){va.length<40?util$3.utf8.write(va,_o,xo):_o.utf8Write?_o.utf8Write(va,xo):_o.write(va,xo)}BufferWriter.prototype.string=function va(_o){var xo=util$3.Buffer.byteLength(_o);return this.uint32(xo),xo&&this._push(writeStringBuffer,xo,_o),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(va,_o){return RangeError("index out of range: "+va.pos+" + "+(_o||1)+" > "+va.len)}function Reader$1(va){this.buf=va,this.pos=0,this.len=va.length}var create_array=typeof Uint8Array!="undefined"?function va(_o){if(_o instanceof Uint8Array||Array.isArray(_o))return new Reader$1(_o);throw Error("illegal buffer")}:function va(_o){if(Array.isArray(_o))return new Reader$1(_o);throw Error("illegal buffer")},create=function va(){return util$2.Buffer?function(xo){return(Reader$1.create=function(wo){return util$2.Buffer.isBuffer(wo)?new BufferReader$1(wo):create_array(wo)})(xo)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function va(){var _o=4294967295;return function(){if(_o=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_o=(_o|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_o=(_o|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_o=(_o|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_o=(_o|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _o;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return _o}}();Reader$1.prototype.int32=function va(){return this.uint32()|0};Reader$1.prototype.sint32=function va(){var _o=this.uint32();return _o>>>1^-(_o&1)|0};function readLongVarint(){var va=new LongBits(0,0),_o=0;if(this.len-this.pos>4){for(;_o<4;++_o)if(va.lo=(va.lo|(this.buf[this.pos]&127)<<_o*7)>>>0,this.buf[this.pos++]<128)return va;if(va.lo=(va.lo|(this.buf[this.pos]&127)<<28)>>>0,va.hi=(va.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return va;_o=0}else{for(;_o<3;++_o){if(this.pos>=this.len)throw indexOutOfRange(this);if(va.lo=(va.lo|(this.buf[this.pos]&127)<<_o*7)>>>0,this.buf[this.pos++]<128)return va}return va.lo=(va.lo|(this.buf[this.pos++]&127)<<_o*7)>>>0,va}if(this.len-this.pos>4){for(;_o<5;++_o)if(va.hi=(va.hi|(this.buf[this.pos]&127)<<_o*7+3)>>>0,this.buf[this.pos++]<128)return va}else for(;_o<5;++_o){if(this.pos>=this.len)throw indexOutOfRange(this);if(va.hi=(va.hi|(this.buf[this.pos]&127)<<_o*7+3)>>>0,this.buf[this.pos++]<128)return va}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function va(){return this.uint32()!==0};function readFixed32_end(va,_o){return(va[_o-4]|va[_o-3]<<8|va[_o-2]<<16|va[_o-1]<<24)>>>0}Reader$1.prototype.fixed32=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function va(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var _o=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_o};Reader$1.prototype.double=function va(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var _o=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_o};Reader$1.prototype.bytes=function va(){var _o=this.uint32(),xo=this.pos,bo=this.pos+_o;if(bo>this.len)throw indexOutOfRange(this,_o);return this.pos+=_o,Array.isArray(this.buf)?this.buf.slice(xo,bo):xo===bo?new this.buf.constructor(0):this._slice.call(this.buf,xo,bo)};Reader$1.prototype.string=function va(){var _o=this.bytes();return utf8.read(_o,0,_o.length)};Reader$1.prototype.skip=function va(_o){if(typeof _o=="number"){if(this.pos+_o>this.len)throw indexOutOfRange(this,_o);this.pos+=_o}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(va){switch(va){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(va=this.uint32()&7)!=4;)this.skipType(va);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+va+" at offset "+this.pos)}return this};Reader$1._configure=function(va){BufferReader$1=va,Reader$1.create=create(),BufferReader$1._configure();var _o=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[_o](!1)},uint64:function(){return readLongVarint.call(this)[_o](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[_o](!1)},fixed64:function(){return readFixed64.call(this)[_o](!0)},sfixed64:function(){return readFixed64.call(this)[_o](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(va){Reader.call(this,va)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function va(){var _o=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_o,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_o,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(va,_o,xo){if(typeof va!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=va,this.requestDelimited=Boolean(_o),this.responseDelimited=Boolean(xo)}Service.prototype.rpcCall=function va(_o,xo,bo,wo,Eo){if(!wo)throw TypeError("request must be specified");var To=this;if(!Eo)return util.asPromise(va,To,_o,xo,bo,wo);if(!To.rpcImpl){setTimeout(function(){Eo(Error("already ended"))},0);return}try{return To.rpcImpl(_o,xo[To.requestDelimited?"encodeDelimited":"encode"](wo).finish(),function($o,Do){if($o)return To.emit("error",$o,_o),Eo($o);if(Do===null){To.end(!0);return}if(!(Do instanceof bo))try{Do=bo[To.responseDelimited?"decodeDelimited":"decode"](Do)}catch(No){return To.emit("error",No,_o),Eo(No)}return To.emit("data",Do,_o),Eo(null,Do)})}catch(So){To.emit("error",So,_o),setTimeout(function(){Eo(So)},0);return}};Service.prototype.end=function va(_o){return this.rpcImpl&&(_o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(va){var _o=va;_o.Service=service})(rpc);var roots={};(function(va){var _o=va;_o.build="minimal",_o.Writer=writer,_o.BufferWriter=writer_buffer,_o.Reader=reader,_o.BufferReader=reader_buffer,_o.util=minimal$1,_o.rpc=rpc,_o.roots=roots,_o.configure=xo;function xo(){_o.util._configure(),_o.Writer._configure(_o.BufferWriter),_o.Reader._configure(_o.BufferReader)}xo()})(indexMinimal);var minimal=indexMinimal,parseWork,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$1,t$3=tslib.exports,i$2=minimal;function n$3(va){if(va&&va.__esModule)return va;var _o=Object.create(null);return va&&Object.keys(va).forEach(function(xo){if(xo!=="default"){var bo=Object.getOwnPropertyDescriptor(va,xo);Object.defineProperty(_o,xo,bo.get?bo:{enumerable:!0,get:function(){return va[xo]}})}}),_o.default=va,Object.freeze(_o)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,u$2={},c$2={},l$3=l$3||function(va,_o){var xo={},bo=xo.lib={},wo=bo.Base=function(){function Lo(){}return{extend:function(Co){Lo.prototype=this;var Ro=new Lo;return Co&&Ro.mixIn(Co),Ro.hasOwnProperty("init")||(Ro.init=function(){Ro.$super.init.apply(this,arguments)}),Ro.init.prototype=Ro,Ro.$super=this,Ro},create:function(){var Co=this.extend();return Co.init.apply(Co,arguments),Co},init:function(){},mixIn:function(Co){for(var Ro in Co)Co.hasOwnProperty(Ro)&&(this[Ro]=Co[Ro]);Co.hasOwnProperty("toString")&&(this.toString=Co.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Eo=bo.WordArray=wo.extend({init:function(Lo,Co){Lo=this.words=Lo||[],this.sigBytes=Co!=null?Co:4*Lo.length},toString:function(Lo){return(Lo||So).stringify(this)},concat:function(Lo){var Co=this.words,Ro=Lo.words,jo=this.sigBytes,zo=Lo.sigBytes;if(this.clamp(),jo%4)for(var Io=0;Io<zo;Io++){var Po=Ro[Io>>>2]>>>24-Io%4*8&255;Co[jo+Io>>>2]|=Po<<24-(jo+Io)%4*8}else for(Io=0;Io<zo;Io+=4)Co[jo+Io>>>2]=Ro[Io>>>2];return this.sigBytes+=zo,this},clamp:function(){var Lo=this.words,Co=this.sigBytes;Lo[Co>>>2]&=4294967295<<32-Co%4*8,Lo.length=va.ceil(Co/4)},clone:function(){var Lo=wo.clone.call(this);return Lo.words=this.words.slice(0),Lo},random:function(Lo){for(var Co=[],Ro=0;Ro<Lo;Ro+=4)Co.push(4294967296*va.random()|0);return new Eo.init(Co,Lo)}}),To=xo.enc={},So=To.Hex={stringify:function(Lo){for(var Co=Lo.words,Ro=Lo.sigBytes,jo=[],zo=0;zo<Ro;zo++){var Io=Co[zo>>>2]>>>24-zo%4*8&255;jo.push((Io>>>4).toString(16)),jo.push((15&Io).toString(16))}return jo.join("")},parse:function(Lo){for(var Co=Lo.length,Ro=[],jo=0;jo<Co;jo+=2)Ro[jo>>>3]|=parseInt(Lo.substr(jo,2),16)<<24-jo%8*4;return new Eo.init(Ro,Co/2)}},$o=To.Latin1={stringify:function(Lo){for(var Co=Lo.words,Ro=Lo.sigBytes,jo=[],zo=0;zo<Ro;zo++){var Io=Co[zo>>>2]>>>24-zo%4*8&255;jo.push(String.fromCharCode(Io))}return jo.join("")},parse:function(Lo){for(var Co=Lo.length,Ro=[],jo=0;jo<Co;jo++)Ro[jo>>>2]|=(255&Lo.charCodeAt(jo))<<24-jo%4*8;return new Eo.init(Ro,Co)}},Do=To.Utf8={stringify:function(Lo){try{return decodeURIComponent(escape($o.stringify(Lo)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Lo){return $o.parse(unescape(encodeURIComponent(Lo)))}},No=bo.BufferedBlockAlgorithm=wo.extend({reset:function(){this._data=new Eo.init,this._nDataBytes=0},_append:function(Lo){typeof Lo=="string"&&(Lo=Do.parse(Lo)),this._data.concat(Lo),this._nDataBytes+=Lo.sigBytes},_process:function(Lo){var Co=this._data,Ro=Co.words,jo=Co.sigBytes,zo=this.blockSize,Io=jo/(4*zo),Po=(Io=Lo?va.ceil(Io):va.max((0|Io)-this._minBufferSize,0))*zo,Bo=va.min(4*Po,jo);if(Po){for(var ko=0;ko<Po;ko+=zo)this._doProcessBlock(Ro,ko);var Uo=Ro.splice(0,Po);Co.sigBytes-=Bo}return new Eo.init(Uo,Bo)},clone:function(){var Lo=wo.clone.call(this);return Lo._data=this._data.clone(),Lo},_minBufferSize:0});bo.Hasher=No.extend({cfg:wo.extend(),init:function(Lo){this.cfg=this.cfg.extend(Lo),this.reset()},reset:function(){No.reset.call(this),this._doReset()},update:function(Lo){return this._append(Lo),this._process(),this},finalize:function(Lo){return Lo&&this._append(Lo),this._doFinalize()},blockSize:16,_createHelper:function(Lo){return function(Co,Ro){return new Lo.init(Ro).finalize(Co)}},_createHmacHelper:function(Lo){return function(Co,Ro){return new Oo.HMAC.init(Lo,Ro).finalize(Co)}}});var Oo=xo.algo={};return xo}(Math);function h$2(va,_o,xo){va!=null&&(typeof va=="number"?this.fromNumber(va,_o,xo):_o==null&&typeof va!="string"?this.fromString(va,256):this.fromString(va,_o))}function d$1(){return new h$2(null)}(function(va){for(var _o=l$3,xo=(wo=_o.lib).WordArray,bo=wo.Hasher,wo=_o.algo,Eo=[],To=[],So=function(Ro){return 4294967296*(Ro-(0|Ro))|0},$o=2,Do=0;64>Do;){var No;e:{No=$o;for(var Oo=va.sqrt(No),Lo=2;Lo<=Oo;Lo++)if(!(No%Lo)){No=!1;break e}No=!0}No&&(8>Do&&(Eo[Do]=So(va.pow($o,.5))),To[Do]=So(va.pow($o,1/3)),Do++),$o++}var Co=[];wo=wo.SHA256=bo.extend({_doReset:function(){this._hash=new xo.init(Eo.slice(0))},_doProcessBlock:function(Ro,jo){for(var zo=this._hash.words,Io=zo[0],Po=zo[1],Bo=zo[2],ko=zo[3],Uo=zo[4],Qo=zo[5],qo=zo[6],Zo=zo[7],Xo=0;64>Xo;Xo++){if(16>Xo)Co[Xo]=0|Ro[jo+Xo];else{var Fo=Co[Xo-15],Go=Co[Xo-2];Co[Xo]=((Fo<<25|Fo>>>7)^(Fo<<14|Fo>>>18)^Fo>>>3)+Co[Xo-7]+((Go<<15|Go>>>17)^(Go<<13|Go>>>19)^Go>>>10)+Co[Xo-16]}Fo=Zo+((Uo<<26|Uo>>>6)^(Uo<<21|Uo>>>11)^(Uo<<7|Uo>>>25))+(Uo&Qo^~Uo&qo)+To[Xo]+Co[Xo],Go=((Io<<30|Io>>>2)^(Io<<19|Io>>>13)^(Io<<10|Io>>>22))+(Io&Po^Io&Bo^Po&Bo),Zo=qo,qo=Qo,Qo=Uo,Uo=ko+Fo|0,ko=Bo,Bo=Po,Po=Io,Io=Fo+Go|0}zo[0]=zo[0]+Io|0,zo[1]=zo[1]+Po|0,zo[2]=zo[2]+Bo|0,zo[3]=zo[3]+ko|0,zo[4]=zo[4]+Uo|0,zo[5]=zo[5]+Qo|0,zo[6]=zo[6]+qo|0,zo[7]=zo[7]+Zo|0},_doFinalize:function(){var Ro=this._data,jo=Ro.words,zo=8*this._nDataBytes,Io=8*Ro.sigBytes;return jo[Io>>>5]|=128<<24-Io%32,jo[14+(Io+64>>>9<<4)]=va.floor(zo/4294967296),jo[15+(Io+64>>>9<<4)]=zo,Ro.sigBytes=4*jo.length,this._process(),this._hash},clone:function(){var Ro=bo.clone.call(this);return Ro._hash=this._hash.clone(),Ro}}),_o.SHA256=bo._createHelper(wo),_o.HmacSHA256=bo._createHmacHelper(wo)})(Math),l$3.lib.Cipher||function(va){var _o=(Co=l$3).lib,xo=_o.Base,bo=_o.WordArray,wo=_o.BufferedBlockAlgorithm,Eo=Co.enc.Base64,To=Co.algo.EvpKDF,So=_o.Cipher=wo.extend({cfg:xo.extend(),createEncryptor:function(jo,zo){return this.create(this._ENC_XFORM_MODE,jo,zo)},createDecryptor:function(jo,zo){return this.create(this._DEC_XFORM_MODE,jo,zo)},init:function(jo,zo,Io){this.cfg=this.cfg.extend(Io),this._xformMode=jo,this._key=zo,this.reset()},reset:function(){wo.reset.call(this),this._doReset()},process:function(jo){return this._append(jo),this._process()},finalize:function(jo){return jo&&this._append(jo),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(jo){return{encrypt:function(zo,Io,Po){return(typeof Io=="string"?Ro:Lo).encrypt(jo,zo,Io,Po)},decrypt:function(zo,Io,Po){return(typeof Io=="string"?Ro:Lo).decrypt(jo,zo,Io,Po)}}}});_o.StreamCipher=So.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var $o=Co.mode={},Do=function(jo,zo,Io){var Po=this._iv;Po?this._iv=void 0:Po=this._prevBlock;for(var Bo=0;Bo<Io;Bo++)jo[zo+Bo]^=Po[Bo]},No=(_o.BlockCipherMode=xo.extend({createEncryptor:function(jo,zo){return this.Encryptor.create(jo,zo)},createDecryptor:function(jo,zo){return this.Decryptor.create(jo,zo)},init:function(jo,zo){this._cipher=jo,this._iv=zo}})).extend();No.Encryptor=No.extend({processBlock:function(jo,zo){var Io=this._cipher,Po=Io.blockSize;Do.call(this,jo,zo,Po),Io.encryptBlock(jo,zo),this._prevBlock=jo.slice(zo,zo+Po)}}),No.Decryptor=No.extend({processBlock:function(jo,zo){var Io=this._cipher,Po=Io.blockSize,Bo=jo.slice(zo,zo+Po);Io.decryptBlock(jo,zo),Do.call(this,jo,zo,Po),this._prevBlock=Bo}}),$o=$o.CBC=No,No=(Co.pad={}).Pkcs7={pad:function(jo,zo){for(var Io,Po=(Io=(Io=4*zo)-jo.sigBytes%Io)<<24|Io<<16|Io<<8|Io,Bo=[],ko=0;ko<Io;ko+=4)Bo.push(Po);Io=bo.create(Bo,Io),jo.concat(Io)},unpad:function(jo){jo.sigBytes-=255&jo.words[jo.sigBytes-1>>>2]}},_o.BlockCipher=So.extend({cfg:So.cfg.extend({mode:$o,padding:No}),reset:function(){So.reset.call(this);var jo=(zo=this.cfg).iv,zo=zo.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Io=zo.createEncryptor;else Io=zo.createDecryptor,this._minBufferSize=1;this._mode=Io.call(zo,this,jo&&jo.words)},_doProcessBlock:function(jo,zo){this._mode.processBlock(jo,zo)},_doFinalize:function(){var jo=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){jo.pad(this._data,this.blockSize);var zo=this._process(!0)}else zo=this._process(!0),jo.unpad(zo);return zo},blockSize:4});var Oo=_o.CipherParams=xo.extend({init:function(jo){this.mixIn(jo)},toString:function(jo){return(jo||this.formatter).stringify(this)}}),Lo=($o=(Co.format={}).OpenSSL={stringify:function(jo){var zo=jo.ciphertext;return((jo=jo.salt)?bo.create([1398893684,1701076831]).concat(jo).concat(zo):zo).toString(Eo)},parse:function(jo){var zo=(jo=Eo.parse(jo)).words;if(zo[0]==1398893684&&zo[1]==1701076831){var Io=bo.create(zo.slice(2,4));zo.splice(0,4),jo.sigBytes-=16}return Oo.create({ciphertext:jo,salt:Io})}},_o.SerializableCipher=xo.extend({cfg:xo.extend({format:$o}),encrypt:function(jo,zo,Io,Po){Po=this.cfg.extend(Po);var Bo=jo.createEncryptor(Io,Po);return zo=Bo.finalize(zo),Bo=Bo.cfg,Oo.create({ciphertext:zo,key:Io,iv:Bo.iv,algorithm:jo,mode:Bo.mode,padding:Bo.padding,blockSize:jo.blockSize,formatter:Po.format})},decrypt:function(jo,zo,Io,Po){return Po=this.cfg.extend(Po),zo=this._parse(zo,Po.format),jo.createDecryptor(Io,Po).finalize(zo.ciphertext)},_parse:function(jo,zo){return typeof jo=="string"?zo.parse(jo,this):jo}})),Co=(Co.kdf={}).OpenSSL={execute:function(jo,zo,Io,Po){return Po||(Po=bo.random(8)),jo=To.create({keySize:zo+Io}).compute(jo,Po),Io=bo.create(jo.words.slice(zo),4*Io),jo.sigBytes=4*zo,Oo.create({key:jo,iv:Io,salt:Po})}},Ro=_o.PasswordBasedCipher=Lo.extend({cfg:Lo.cfg.extend({kdf:Co}),encrypt:function(jo,zo,Io,Po){return Io=(Po=this.cfg.extend(Po)).kdf.execute(Io,jo.keySize,jo.ivSize),Po.iv=Io.iv,(jo=Lo.encrypt.call(this,jo,zo,Io.key,Po)).mixIn(Io),jo},decrypt:function(jo,zo,Io,Po){return Po=this.cfg.extend(Po),zo=this._parse(zo,Po.format),Io=Po.kdf.execute(Io,jo.keySize,jo.ivSize,zo.salt),Po.iv=Io.iv,Lo.decrypt.call(this,jo,zo,Io.key,Po)}})}(),function(){for(var va=l$3,_o=va.lib.BlockCipher,xo=va.algo,bo=[],wo=[],Eo=[],To=[],So=[],$o=[],Do=[],No=[],Oo=[],Lo=[],Co=[],Ro=0;256>Ro;Ro++)Co[Ro]=128>Ro?Ro<<1:Ro<<1^283;var jo=0,zo=0;for(Ro=0;256>Ro;Ro++){var Io=(Io=zo^zo<<1^zo<<2^zo<<3^zo<<4)>>>8^255&Io^99;bo[jo]=Io,wo[Io]=jo;var Po=Co[jo],Bo=Co[Po],ko=Co[Bo],Uo=257*Co[Io]^16843008*Io;Eo[jo]=Uo<<24|Uo>>>8,To[jo]=Uo<<16|Uo>>>16,So[jo]=Uo<<8|Uo>>>24,$o[jo]=Uo,Uo=16843009*ko^65537*Bo^257*Po^16843008*jo,Do[Io]=Uo<<24|Uo>>>8,No[Io]=Uo<<16|Uo>>>16,Oo[Io]=Uo<<8|Uo>>>24,Lo[Io]=Uo,jo?(jo=Po^Co[Co[Co[ko^Po]]],zo^=Co[Co[zo]]):jo=zo=1}var Qo=[0,1,2,4,8,16,32,64,128,27,54];xo=xo.AES=_o.extend({_doReset:function(){for(var qo=(Xo=this._key).words,Zo=Xo.sigBytes/4,Xo=4*((this._nRounds=Zo+6)+1),Fo=this._keySchedule=[],Go=0;Go<Xo;Go++)if(Go<Zo)Fo[Go]=qo[Go];else{var Vo=Fo[Go-1];Go%Zo?6<Zo&&Go%Zo==4&&(Vo=bo[Vo>>>24]<<24|bo[Vo>>>16&255]<<16|bo[Vo>>>8&255]<<8|bo[255&Vo]):(Vo=bo[(Vo=Vo<<8|Vo>>>24)>>>24]<<24|bo[Vo>>>16&255]<<16|bo[Vo>>>8&255]<<8|bo[255&Vo],Vo^=Qo[Go/Zo|0]<<24),Fo[Go]=Fo[Go-Zo]^Vo}for(qo=this._invKeySchedule=[],Zo=0;Zo<Xo;Zo++)Go=Xo-Zo,Vo=Zo%4?Fo[Go]:Fo[Go-4],qo[Zo]=4>Zo||4>=Go?Vo:Do[bo[Vo>>>24]]^No[bo[Vo>>>16&255]]^Oo[bo[Vo>>>8&255]]^Lo[bo[255&Vo]]},encryptBlock:function(qo,Zo){this._doCryptBlock(qo,Zo,this._keySchedule,Eo,To,So,$o,bo)},decryptBlock:function(qo,Zo){var Xo=qo[Zo+1];qo[Zo+1]=qo[Zo+3],qo[Zo+3]=Xo,this._doCryptBlock(qo,Zo,this._invKeySchedule,Do,No,Oo,Lo,wo),Xo=qo[Zo+1],qo[Zo+1]=qo[Zo+3],qo[Zo+3]=Xo},_doCryptBlock:function(qo,Zo,Xo,Fo,Go,Vo,Wo,Yo){for(var Ko=this._nRounds,ts=qo[Zo]^Xo[0],Jo=qo[Zo+1]^Xo[1],rs=qo[Zo+2]^Xo[2],ls=qo[Zo+3]^Xo[3],ss=4,us=1;us<Ko;us++){var ms=Fo[ts>>>24]^Go[Jo>>>16&255]^Vo[rs>>>8&255]^Wo[255&ls]^Xo[ss++],As=Fo[Jo>>>24]^Go[rs>>>16&255]^Vo[ls>>>8&255]^Wo[255&ts]^Xo[ss++],Os=Fo[rs>>>24]^Go[ls>>>16&255]^Vo[ts>>>8&255]^Wo[255&Jo]^Xo[ss++];ls=Fo[ls>>>24]^Go[ts>>>16&255]^Vo[Jo>>>8&255]^Wo[255&rs]^Xo[ss++],ts=ms,Jo=As,rs=Os}ms=(Yo[ts>>>24]<<24|Yo[Jo>>>16&255]<<16|Yo[rs>>>8&255]<<8|Yo[255&ls])^Xo[ss++],As=(Yo[Jo>>>24]<<24|Yo[rs>>>16&255]<<16|Yo[ls>>>8&255]<<8|Yo[255&ts])^Xo[ss++],Os=(Yo[rs>>>24]<<24|Yo[ls>>>16&255]<<16|Yo[ts>>>8&255]<<8|Yo[255&Jo])^Xo[ss++],ls=(Yo[ls>>>24]<<24|Yo[ts>>>16&255]<<16|Yo[Jo>>>8&255]<<8|Yo[255&rs])^Xo[ss++],qo[Zo]=ms,qo[Zo+1]=As,qo[Zo+2]=Os,qo[Zo+3]=ls},keySize:8}),va.AES=_o._createHelper(xo)}(),c$2.lang={extend:function(va,_o,xo){if(!_o||!va)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var bo=function(){};if(bo.prototype=_o.prototype,va.prototype=new bo,va.prototype.constructor=va,va.superclass=_o.prototype,_o.prototype.constructor==Object.prototype.constructor&&(_o.prototype.constructor=_o),xo){var wo;for(wo in xo)va.prototype[wo]=xo[wo];var Eo=function(){},To=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Eo=function(So,$o){for(wo=0;wo<To.length;wo+=1){var Do=To[wo],No=$o[Do];typeof No=="function"&&No!=Object.prototype[Do]&&(So[Do]=No)}})}catch{}Eo(va.prototype,xo)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(h$2.prototype.am=function(va,_o,xo,bo,wo,Eo){for(var To=32767&_o,So=_o>>15;--Eo>=0;){var $o=32767&this[va],Do=this[va++]>>15,No=So*$o+Do*To;wo=(($o=To*$o+((32767&No)<<15)+xo[bo]+(1073741823&wo))>>>30)+(No>>>15)+So*Do+(wo>>>30),xo[bo++]=1073741823&$o}return wo},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(h$2.prototype.am=function(va,_o,xo,bo,wo,Eo){for(;--Eo>=0;){var To=_o*this[va++]+xo[bo]+wo;wo=Math.floor(To/67108864),xo[bo++]=67108863&To}return wo},a$2=26):(h$2.prototype.am=function(va,_o,xo,bo,wo,Eo){for(var To=16383&_o,So=_o>>14;--Eo>=0;){var $o=16383&this[va],Do=this[va++]>>14,No=So*$o+Do*To;wo=(($o=To*$o+((16383&No)<<14)+xo[bo]+wo)>>28)+(No>>14)+So*Do,xo[bo++]=268435455&$o}return wo},a$2=28),h$2.prototype.DB=a$2,h$2.prototype.DM=(1<<a$2)-1,h$2.prototype.DV=1<<a$2;h$2.prototype.FV=Math.pow(2,52),h$2.prototype.F1=52-a$2,h$2.prototype.F2=2*a$2-52;var p$2,A$2,f$2=new Array;for(p$2="0".charCodeAt(0),A$2=0;A$2<=9;++A$2)f$2[p$2++]=A$2;for(p$2="a".charCodeAt(0),A$2=10;A$2<36;++A$2)f$2[p$2++]=A$2;for(p$2="A".charCodeAt(0),A$2=10;A$2<36;++A$2)f$2[p$2++]=A$2;function M$1(va){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(va)}function g$2(va,_o){var xo=f$2[va.charCodeAt(_o)];return xo==null?-1:xo}function y$2(va){var _o=d$1();return _o.fromInt(va),_o}function m$2(va){var _o,xo=1;return(_o=va>>>16)!=0&&(va=_o,xo+=16),(_o=va>>8)!=0&&(va=_o,xo+=8),(_o=va>>4)!=0&&(va=_o,xo+=4),(_o=va>>2)!=0&&(va=_o,xo+=2),(_o=va>>1)!=0&&(va=_o,xo+=1),xo}function v$2(va){this.m=va}function N$2(va){this.m=va,this.mp=va.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<va.DB-15)-1,this.mt2=2*va.t}function D$1(va,_o){return va&_o}function w$2(va,_o){return va|_o}function T(va,_o){return va^_o}function x$1(va,_o){return va&~_o}function E$2(va){if(va==0)return-1;var _o=0;return(65535&va)==0&&(va>>=16,_o+=16),(255&va)==0&&(va>>=8,_o+=8),(15&va)==0&&(va>>=4,_o+=4),(3&va)==0&&(va>>=2,_o+=2),(1&va)==0&&++_o,_o}function j$1(va){for(var _o=0;va!=0;)va&=va-1,++_o;return _o}function z(){}function I$1(va){return va}function b$1(va){this.r2=d$1(),this.q3=d$1(),h$2.ONE.dlShiftTo(2*va.t,this.r2),this.mu=this.r2.divide(va),this.m=va}v$2.prototype.convert=function(va){return va.s<0||va.compareTo(this.m)>=0?va.mod(this.m):va},v$2.prototype.revert=function(va){return va},v$2.prototype.reduce=function(va){va.divRemTo(this.m,null,va)},v$2.prototype.mulTo=function(va,_o,xo){va.multiplyTo(_o,xo),this.reduce(xo)},v$2.prototype.sqrTo=function(va,_o){va.squareTo(_o),this.reduce(_o)},N$2.prototype.convert=function(va){var _o=d$1();return va.abs().dlShiftTo(this.m.t,_o),_o.divRemTo(this.m,null,_o),va.s<0&&_o.compareTo(h$2.ZERO)>0&&this.m.subTo(_o,_o),_o},N$2.prototype.revert=function(va){var _o=d$1();return va.copyTo(_o),this.reduce(_o),_o},N$2.prototype.reduce=function(va){for(;va.t<=this.mt2;)va[va.t++]=0;for(var _o=0;_o<this.m.t;++_o){var xo=32767&va[_o],bo=xo*this.mpl+((xo*this.mph+(va[_o]>>15)*this.mpl&this.um)<<15)&va.DM;for(va[xo=_o+this.m.t]+=this.m.am(0,bo,va,_o,0,this.m.t);va[xo]>=va.DV;)va[xo]-=va.DV,va[++xo]++}va.clamp(),va.drShiftTo(this.m.t,va),va.compareTo(this.m)>=0&&va.subTo(this.m,va)},N$2.prototype.mulTo=function(va,_o,xo){va.multiplyTo(_o,xo),this.reduce(xo)},N$2.prototype.sqrTo=function(va,_o){va.squareTo(_o),this.reduce(_o)},h$2.prototype.copyTo=function(va){for(var _o=this.t-1;_o>=0;--_o)va[_o]=this[_o];va.t=this.t,va.s=this.s},h$2.prototype.fromInt=function(va){this.t=1,this.s=va<0?-1:0,va>0?this[0]=va:va<-1?this[0]=va+this.DV:this.t=0},h$2.prototype.fromString=function(va,_o){var xo;if(_o==16)xo=4;else if(_o==8)xo=3;else if(_o==256)xo=8;else if(_o==2)xo=1;else if(_o==32)xo=5;else{if(_o!=4)return void this.fromRadix(va,_o);xo=2}this.t=0,this.s=0;for(var bo=va.length,wo=!1,Eo=0;--bo>=0;){var To=xo==8?255&va[bo]:g$2(va,bo);To<0?va.charAt(bo)=="-"&&(wo=!0):(wo=!1,Eo==0?this[this.t++]=To:Eo+xo>this.DB?(this[this.t-1]|=(To&(1<<this.DB-Eo)-1)<<Eo,this[this.t++]=To>>this.DB-Eo):this[this.t-1]|=To<<Eo,(Eo+=xo)>=this.DB&&(Eo-=this.DB))}xo==8&&(128&va[0])!=0&&(this.s=-1,Eo>0&&(this[this.t-1]|=(1<<this.DB-Eo)-1<<Eo)),this.clamp(),wo&&h$2.ZERO.subTo(this,this)},h$2.prototype.clamp=function(){for(var va=this.s&this.DM;this.t>0&&this[this.t-1]==va;)--this.t},h$2.prototype.dlShiftTo=function(va,_o){var xo;for(xo=this.t-1;xo>=0;--xo)_o[xo+va]=this[xo];for(xo=va-1;xo>=0;--xo)_o[xo]=0;_o.t=this.t+va,_o.s=this.s},h$2.prototype.drShiftTo=function(va,_o){for(var xo=va;xo<this.t;++xo)_o[xo-va]=this[xo];_o.t=Math.max(this.t-va,0),_o.s=this.s},h$2.prototype.lShiftTo=function(va,_o){var xo,bo=va%this.DB,wo=this.DB-bo,Eo=(1<<wo)-1,To=Math.floor(va/this.DB),So=this.s<<bo&this.DM;for(xo=this.t-1;xo>=0;--xo)_o[xo+To+1]=this[xo]>>wo|So,So=(this[xo]&Eo)<<bo;for(xo=To-1;xo>=0;--xo)_o[xo]=0;_o[To]=So,_o.t=this.t+To+1,_o.s=this.s,_o.clamp()},h$2.prototype.rShiftTo=function(va,_o){_o.s=this.s;var xo=Math.floor(va/this.DB);if(xo>=this.t)_o.t=0;else{var bo=va%this.DB,wo=this.DB-bo,Eo=(1<<bo)-1;_o[0]=this[xo]>>bo;for(var To=xo+1;To<this.t;++To)_o[To-xo-1]|=(this[To]&Eo)<<wo,_o[To-xo]=this[To]>>bo;bo>0&&(_o[this.t-xo-1]|=(this.s&Eo)<<wo),_o.t=this.t-xo,_o.clamp()}},h$2.prototype.subTo=function(va,_o){for(var xo=0,bo=0,wo=Math.min(va.t,this.t);xo<wo;)bo+=this[xo]-va[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;if(va.t<this.t){for(bo-=va.s;xo<this.t;)bo+=this[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;bo+=this.s}else{for(bo+=this.s;xo<va.t;)bo-=va[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;bo-=va.s}_o.s=bo<0?-1:0,bo<-1?_o[xo++]=this.DV+bo:bo>0&&(_o[xo++]=bo),_o.t=xo,_o.clamp()},h$2.prototype.multiplyTo=function(va,_o){var xo=this.abs(),bo=va.abs(),wo=xo.t;for(_o.t=wo+bo.t;--wo>=0;)_o[wo]=0;for(wo=0;wo<bo.t;++wo)_o[wo+xo.t]=xo.am(0,bo[wo],_o,wo,0,xo.t);_o.s=0,_o.clamp(),this.s!=va.s&&h$2.ZERO.subTo(_o,_o)},h$2.prototype.squareTo=function(va){for(var _o=this.abs(),xo=va.t=2*_o.t;--xo>=0;)va[xo]=0;for(xo=0;xo<_o.t-1;++xo){var bo=_o.am(xo,_o[xo],va,2*xo,0,1);(va[xo+_o.t]+=_o.am(xo+1,2*_o[xo],va,2*xo+1,bo,_o.t-xo-1))>=_o.DV&&(va[xo+_o.t]-=_o.DV,va[xo+_o.t+1]=1)}va.t>0&&(va[va.t-1]+=_o.am(xo,_o[xo],va,2*xo,0,1)),va.s=0,va.clamp()},h$2.prototype.divRemTo=function(va,_o,xo){var bo=va.abs();if(!(bo.t<=0)){var wo=this.abs();if(wo.t<bo.t)return _o!=null&&_o.fromInt(0),void(xo!=null&&this.copyTo(xo));xo==null&&(xo=d$1());var Eo=d$1(),To=this.s,So=va.s,$o=this.DB-m$2(bo[bo.t-1]);$o>0?(bo.lShiftTo($o,Eo),wo.lShiftTo($o,xo)):(bo.copyTo(Eo),wo.copyTo(xo));var Do=Eo.t,No=Eo[Do-1];if(No!=0){var Oo=No*(1<<this.F1)+(Do>1?Eo[Do-2]>>this.F2:0),Lo=this.FV/Oo,Co=(1<<this.F1)/Oo,Ro=1<<this.F2,jo=xo.t,zo=jo-Do,Io=_o==null?d$1():_o;for(Eo.dlShiftTo(zo,Io),xo.compareTo(Io)>=0&&(xo[xo.t++]=1,xo.subTo(Io,xo)),h$2.ONE.dlShiftTo(Do,Io),Io.subTo(Eo,Eo);Eo.t<Do;)Eo[Eo.t++]=0;for(;--zo>=0;){var Po=xo[--jo]==No?this.DM:Math.floor(xo[jo]*Lo+(xo[jo-1]+Ro)*Co);if((xo[jo]+=Eo.am(0,Po,xo,zo,0,Do))<Po)for(Eo.dlShiftTo(zo,Io),xo.subTo(Io,xo);xo[jo]<--Po;)xo.subTo(Io,xo)}_o!=null&&(xo.drShiftTo(Do,_o),To!=So&&h$2.ZERO.subTo(_o,_o)),xo.t=Do,xo.clamp(),$o>0&&xo.rShiftTo($o,xo),To<0&&h$2.ZERO.subTo(xo,xo)}}},h$2.prototype.invDigit=function(){if(this.t<1)return 0;var va=this[0];if((1&va)==0)return 0;var _o=3&va;return(_o=(_o=(_o=(_o=_o*(2-(15&va)*_o)&15)*(2-(255&va)*_o)&255)*(2-((65535&va)*_o&65535))&65535)*(2-va*_o%this.DV)%this.DV)>0?this.DV-_o:-_o},h$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},h$2.prototype.exp=function(va,_o){if(va>4294967295||va<1)return h$2.ONE;var xo=d$1(),bo=d$1(),wo=_o.convert(this),Eo=m$2(va)-1;for(wo.copyTo(xo);--Eo>=0;)if(_o.sqrTo(xo,bo),(va&1<<Eo)>0)_o.mulTo(bo,wo,xo);else{var To=xo;xo=bo,bo=To}return _o.revert(xo)},h$2.prototype.toString=function(va){if(this.s<0)return"-"+this.negate().toString(va);var _o;if(va==16)_o=4;else if(va==8)_o=3;else if(va==2)_o=1;else if(va==32)_o=5;else{if(va!=4)return this.toRadix(va);_o=2}var xo,bo=(1<<_o)-1,wo=!1,Eo="",To=this.t,So=this.DB-To*this.DB%_o;if(To-- >0)for(So<this.DB&&(xo=this[To]>>So)>0&&(wo=!0,Eo=M$1(xo));To>=0;)So<_o?(xo=(this[To]&(1<<So)-1)<<_o-So,xo|=this[--To]>>(So+=this.DB-_o)):(xo=this[To]>>(So-=_o)&bo,So<=0&&(So+=this.DB,--To)),xo>0&&(wo=!0),wo&&(Eo+=M$1(xo));return wo?Eo:"0"},h$2.prototype.negate=function(){var va=d$1();return h$2.ZERO.subTo(this,va),va},h$2.prototype.abs=function(){return this.s<0?this.negate():this},h$2.prototype.compareTo=function(va){var _o=this.s-va.s;if(_o!=0)return _o;var xo=this.t;if((_o=xo-va.t)!=0)return this.s<0?-_o:_o;for(;--xo>=0;)if((_o=this[xo]-va[xo])!=0)return _o;return 0},h$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m$2(this[this.t-1]^this.s&this.DM)},h$2.prototype.mod=function(va){var _o=d$1();return this.abs().divRemTo(va,null,_o),this.s<0&&_o.compareTo(h$2.ZERO)>0&&va.subTo(_o,_o),_o},h$2.prototype.modPowInt=function(va,_o){var xo;return xo=va<256||_o.isEven()?new v$2(_o):new N$2(_o),this.exp(va,xo)},h$2.ZERO=y$2(0),h$2.ONE=y$2(1),z.prototype.convert=I$1,z.prototype.revert=I$1,z.prototype.mulTo=function(va,_o,xo){va.multiplyTo(_o,xo)},z.prototype.sqrTo=function(va,_o){va.squareTo(_o)},b$1.prototype.convert=function(va){if(va.s<0||va.t>2*this.m.t)return va.mod(this.m);if(va.compareTo(this.m)<0)return va;var _o=d$1();return va.copyTo(_o),this.reduce(_o),_o},b$1.prototype.revert=function(va){return va},b$1.prototype.reduce=function(va){for(va.drShiftTo(this.m.t-1,this.r2),va.t>this.m.t+1&&(va.t=this.m.t+1,va.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);va.compareTo(this.r2)<0;)va.dAddOffset(1,this.m.t+1);for(va.subTo(this.r2,va);va.compareTo(this.m)>=0;)va.subTo(this.m,va)},b$1.prototype.mulTo=function(va,_o,xo){va.multiplyTo(_o,xo),this.reduce(xo)},b$1.prototype.sqrTo=function(va,_o){va.squareTo(_o),this.reduce(_o)};var O$2=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S$1=(1<<26)/O$2[O$2.length-1];h$2.prototype.chunkSize=function(va){return Math.floor(Math.LN2*this.DB/Math.log(va))},h$2.prototype.toRadix=function(va){if(va==null&&(va=10),this.signum()==0||va<2||va>36)return"0";var _o=this.chunkSize(va),xo=Math.pow(va,_o),bo=y$2(xo),wo=d$1(),Eo=d$1(),To="";for(this.divRemTo(bo,wo,Eo);wo.signum()>0;)To=(xo+Eo.intValue()).toString(va).substr(1)+To,wo.divRemTo(bo,wo,Eo);return Eo.intValue().toString(va)+To},h$2.prototype.fromRadix=function(va,_o){this.fromInt(0),_o==null&&(_o=10);for(var xo=this.chunkSize(_o),bo=Math.pow(_o,xo),wo=!1,Eo=0,To=0,So=0;So<va.length;++So){var $o=g$2(va,So);$o<0?va.charAt(So)=="-"&&this.signum()==0&&(wo=!0):(To=_o*To+$o,++Eo>=xo&&(this.dMultiply(bo),this.dAddOffset(To,0),Eo=0,To=0))}Eo>0&&(this.dMultiply(Math.pow(_o,Eo)),this.dAddOffset(To,0)),wo&&h$2.ZERO.subTo(this,this)},h$2.prototype.fromNumber=function(va,_o,xo){if(typeof _o=="number")if(va<2)this.fromInt(1);else for(this.fromNumber(va,xo),this.testBit(va-1)||this.bitwiseTo(h$2.ONE.shiftLeft(va-1),w$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_o);)this.dAddOffset(2,0),this.bitLength()>va&&this.subTo(h$2.ONE.shiftLeft(va-1),this);else{var bo=new Array,wo=7&va;bo.length=1+(va>>3),_o.nextBytes(bo),wo>0?bo[0]&=(1<<wo)-1:bo[0]=0,this.fromString(bo,256)}},h$2.prototype.bitwiseTo=function(va,_o,xo){var bo,wo,Eo=Math.min(va.t,this.t);for(bo=0;bo<Eo;++bo)xo[bo]=_o(this[bo],va[bo]);if(va.t<this.t){for(wo=va.s&this.DM,bo=Eo;bo<this.t;++bo)xo[bo]=_o(this[bo],wo);xo.t=this.t}else{for(wo=this.s&this.DM,bo=Eo;bo<va.t;++bo)xo[bo]=_o(wo,va[bo]);xo.t=va.t}xo.s=_o(this.s,va.s),xo.clamp()},h$2.prototype.changeBit=function(va,_o){var xo=h$2.ONE.shiftLeft(va);return this.bitwiseTo(xo,_o,xo),xo},h$2.prototype.addTo=function(va,_o){for(var xo=0,bo=0,wo=Math.min(va.t,this.t);xo<wo;)bo+=this[xo]+va[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;if(va.t<this.t){for(bo+=va.s;xo<this.t;)bo+=this[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;bo+=this.s}else{for(bo+=this.s;xo<va.t;)bo+=va[xo],_o[xo++]=bo&this.DM,bo>>=this.DB;bo+=va.s}_o.s=bo<0?-1:0,bo>0?_o[xo++]=bo:bo<-1&&(_o[xo++]=this.DV+bo),_o.t=xo,_o.clamp()},h$2.prototype.dMultiply=function(va){this[this.t]=this.am(0,va-1,this,0,0,this.t),++this.t,this.clamp()},h$2.prototype.dAddOffset=function(va,_o){if(va!=0){for(;this.t<=_o;)this[this.t++]=0;for(this[_o]+=va;this[_o]>=this.DV;)this[_o]-=this.DV,++_o>=this.t&&(this[this.t++]=0),++this[_o]}},h$2.prototype.multiplyLowerTo=function(va,_o,xo){var bo,wo=Math.min(this.t+va.t,_o);for(xo.s=0,xo.t=wo;wo>0;)xo[--wo]=0;for(bo=xo.t-this.t;wo<bo;++wo)xo[wo+this.t]=this.am(0,va[wo],xo,wo,0,this.t);for(bo=Math.min(va.t,_o);wo<bo;++wo)this.am(0,va[wo],xo,wo,0,_o-wo);xo.clamp()},h$2.prototype.multiplyUpperTo=function(va,_o,xo){--_o;var bo=xo.t=this.t+va.t-_o;for(xo.s=0;--bo>=0;)xo[bo]=0;for(bo=Math.max(_o-this.t,0);bo<va.t;++bo)xo[this.t+bo-_o]=this.am(_o-bo,va[bo],xo,0,0,this.t+bo-_o);xo.clamp(),xo.drShiftTo(1,xo)},h$2.prototype.modInt=function(va){if(va<=0)return 0;var _o=this.DV%va,xo=this.s<0?va-1:0;if(this.t>0)if(_o==0)xo=this[0]%va;else for(var bo=this.t-1;bo>=0;--bo)xo=(_o*xo+this[bo])%va;return xo},h$2.prototype.millerRabin=function(va){var _o=this.subtract(h$2.ONE),xo=_o.getLowestSetBit();if(xo<=0)return!1;var bo=_o.shiftRight(xo);(va=va+1>>1)>O$2.length&&(va=O$2.length);for(var wo=d$1(),Eo=0;Eo<va;++Eo){wo.fromInt(O$2[Math.floor(Math.random()*O$2.length)]);var To=wo.modPow(bo,this);if(To.compareTo(h$2.ONE)!=0&&To.compareTo(_o)!=0){for(var So=1;So++<xo&&To.compareTo(_o)!=0;)if((To=To.modPowInt(2,this)).compareTo(h$2.ONE)==0)return!1;if(To.compareTo(_o)!=0)return!1}}return!0},h$2.prototype.clone=function(){var va=d$1();return this.copyTo(va),va},h$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},h$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},h$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},h$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},h$2.prototype.toByteArray=function(){var va=this.t,_o=new Array;_o[0]=this.s;var xo,bo=this.DB-va*this.DB%8,wo=0;if(va-- >0)for(bo<this.DB&&(xo=this[va]>>bo)!=(this.s&this.DM)>>bo&&(_o[wo++]=xo|this.s<<this.DB-bo);va>=0;)bo<8?(xo=(this[va]&(1<<bo)-1)<<8-bo,xo|=this[--va]>>(bo+=this.DB-8)):(xo=this[va]>>(bo-=8)&255,bo<=0&&(bo+=this.DB,--va)),(128&xo)!=0&&(xo|=-256),wo==0&&(128&this.s)!=(128&xo)&&++wo,(wo>0||xo!=this.s)&&(_o[wo++]=xo);return _o},h$2.prototype.equals=function(va){return this.compareTo(va)==0},h$2.prototype.min=function(va){return this.compareTo(va)<0?this:va},h$2.prototype.max=function(va){return this.compareTo(va)>0?this:va},h$2.prototype.and=function(va){var _o=d$1();return this.bitwiseTo(va,D$1,_o),_o},h$2.prototype.or=function(va){var _o=d$1();return this.bitwiseTo(va,w$2,_o),_o},h$2.prototype.xor=function(va){var _o=d$1();return this.bitwiseTo(va,T,_o),_o},h$2.prototype.andNot=function(va){var _o=d$1();return this.bitwiseTo(va,x$1,_o),_o},h$2.prototype.not=function(){for(var va=d$1(),_o=0;_o<this.t;++_o)va[_o]=this.DM&~this[_o];return va.t=this.t,va.s=~this.s,va},h$2.prototype.shiftLeft=function(va){var _o=d$1();return va<0?this.rShiftTo(-va,_o):this.lShiftTo(va,_o),_o},h$2.prototype.shiftRight=function(va){var _o=d$1();return va<0?this.lShiftTo(-va,_o):this.rShiftTo(va,_o),_o},h$2.prototype.getLowestSetBit=function(){for(var va=0;va<this.t;++va)if(this[va]!=0)return va*this.DB+E$2(this[va]);return this.s<0?this.t*this.DB:-1},h$2.prototype.bitCount=function(){for(var va=0,_o=this.s&this.DM,xo=0;xo<this.t;++xo)va+=j$1(this[xo]^_o);return va},h$2.prototype.testBit=function(va){var _o=Math.floor(va/this.DB);return _o>=this.t?this.s!=0:(this[_o]&1<<va%this.DB)!=0},h$2.prototype.setBit=function(va){return this.changeBit(va,w$2)},h$2.prototype.clearBit=function(va){return this.changeBit(va,x$1)},h$2.prototype.flipBit=function(va){return this.changeBit(va,T)},h$2.prototype.add=function(va){var _o=d$1();return this.addTo(va,_o),_o},h$2.prototype.subtract=function(va){var _o=d$1();return this.subTo(va,_o),_o},h$2.prototype.multiply=function(va){var _o=d$1();return this.multiplyTo(va,_o),_o},h$2.prototype.divide=function(va){var _o=d$1();return this.divRemTo(va,_o,null),_o},h$2.prototype.remainder=function(va){var _o=d$1();return this.divRemTo(va,null,_o),_o},h$2.prototype.divideAndRemainder=function(va){var _o=d$1(),xo=d$1();return this.divRemTo(va,_o,xo),new Array(_o,xo)},h$2.prototype.modPow=function(va,_o){var xo,bo,wo=va.bitLength(),Eo=y$2(1);if(wo<=0)return Eo;xo=wo<18?1:wo<48?3:wo<144?4:wo<768?5:6,bo=wo<8?new v$2(_o):_o.isEven()?new b$1(_o):new N$2(_o);var To=new Array,So=3,$o=xo-1,Do=(1<<xo)-1;if(To[1]=bo.convert(this),xo>1){var No=d$1();for(bo.sqrTo(To[1],No);So<=Do;)To[So]=d$1(),bo.mulTo(No,To[So-2],To[So]),So+=2}var Oo,Lo,Co=va.t-1,Ro=!0,jo=d$1();for(wo=m$2(va[Co])-1;Co>=0;){for(wo>=$o?Oo=va[Co]>>wo-$o&Do:(Oo=(va[Co]&(1<<wo+1)-1)<<$o-wo,Co>0&&(Oo|=va[Co-1]>>this.DB+wo-$o)),So=xo;(1&Oo)==0;)Oo>>=1,--So;if((wo-=So)<0&&(wo+=this.DB,--Co),Ro)To[Oo].copyTo(Eo),Ro=!1;else{for(;So>1;)bo.sqrTo(Eo,jo),bo.sqrTo(jo,Eo),So-=2;So>0?bo.sqrTo(Eo,jo):(Lo=Eo,Eo=jo,jo=Lo),bo.mulTo(jo,To[Oo],Eo)}for(;Co>=0&&(va[Co]&1<<wo)==0;)bo.sqrTo(Eo,jo),Lo=Eo,Eo=jo,jo=Lo,--wo<0&&(wo=this.DB-1,--Co)}return bo.revert(Eo)},h$2.prototype.modInverse=function(va){var _o=va.isEven();if(this.isEven()&&_o||va.signum()==0)return h$2.ZERO;for(var xo=va.clone(),bo=this.clone(),wo=y$2(1),Eo=y$2(0),To=y$2(0),So=y$2(1);xo.signum()!=0;){for(;xo.isEven();)xo.rShiftTo(1,xo),_o?(wo.isEven()&&Eo.isEven()||(wo.addTo(this,wo),Eo.subTo(va,Eo)),wo.rShiftTo(1,wo)):Eo.isEven()||Eo.subTo(va,Eo),Eo.rShiftTo(1,Eo);for(;bo.isEven();)bo.rShiftTo(1,bo),_o?(To.isEven()&&So.isEven()||(To.addTo(this,To),So.subTo(va,So)),To.rShiftTo(1,To)):So.isEven()||So.subTo(va,So),So.rShiftTo(1,So);xo.compareTo(bo)>=0?(xo.subTo(bo,xo),_o&&wo.subTo(To,wo),Eo.subTo(So,Eo)):(bo.subTo(xo,bo),_o&&To.subTo(wo,To),So.subTo(Eo,So))}return bo.compareTo(h$2.ONE)!=0?h$2.ZERO:So.compareTo(va)>=0?So.subtract(va):So.signum()<0?(So.addTo(va,So),So.signum()<0?So.add(va):So):So},h$2.prototype.pow=function(va){return this.exp(va,new z)},h$2.prototype.gcd=function(va){var _o=this.s<0?this.negate():this.clone(),xo=va.s<0?va.negate():va.clone();if(_o.compareTo(xo)<0){var bo=_o;_o=xo,xo=bo}var wo=_o.getLowestSetBit(),Eo=xo.getLowestSetBit();if(Eo<0)return _o;for(wo<Eo&&(Eo=wo),Eo>0&&(_o.rShiftTo(Eo,_o),xo.rShiftTo(Eo,xo));_o.signum()>0;)(wo=_o.getLowestSetBit())>0&&_o.rShiftTo(wo,_o),(wo=xo.getLowestSetBit())>0&&xo.rShiftTo(wo,xo),_o.compareTo(xo)>=0?(_o.subTo(xo,_o),_o.rShiftTo(1,_o)):(xo.subTo(_o,xo),xo.rShiftTo(1,xo));return Eo>0&&xo.lShiftTo(Eo,xo),xo},h$2.prototype.isProbablePrime=function(va){var _o,xo=this.abs();if(xo.t==1&&xo[0]<=O$2[O$2.length-1]){for(_o=0;_o<O$2.length;++_o)if(xo[0]==O$2[_o])return!0;return!1}if(xo.isEven())return!1;for(_o=1;_o<O$2.length;){for(var bo=O$2[_o],wo=_o+1;wo<O$2.length&&bo<S$1;)bo*=O$2[wo++];for(bo=xo.modInt(bo);_o<wo;)if(bo%O$2[_o++]==0)return!1}return xo.millerRabin(va)},h$2.prototype.square=function(){var va=d$1();return this.squareTo(va),va};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var L$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function k$1(va){var _o,xo,bo="";for(_o=0;_o+3<=va.length;_o+=3)xo=parseInt(va.substring(_o,_o+3),16),bo+=L$2.charAt(xo>>6)+L$2.charAt(63&xo);for(_o+1==va.length?(xo=parseInt(va.substring(_o,_o+1),16),bo+=L$2.charAt(xo<<2)):_o+2==va.length&&(xo=parseInt(va.substring(_o,_o+2),16),bo+=L$2.charAt(xo>>2)+L$2.charAt((3&xo)<<4));(3&bo.length)>0;)bo+="=";return bo}function C$2(va){var _o,xo,bo,wo="",Eo=0;for(_o=0;_o<va.length&&va.charAt(_o)!="=";++_o)(bo=L$2.indexOf(va.charAt(_o)))<0||(Eo==0?(wo+=M$1(bo>>2),xo=3&bo,Eo=1):Eo==1?(wo+=M$1(xo<<2|bo>>4),xo=15&bo,Eo=2):Eo==2?(wo+=M$1(xo),wo+=M$1(bo>>2),xo=3&bo,Eo=3):(wo+=M$1(xo<<2|bo>>4),wo+=M$1(15&bo),Eo=0));return Eo==1&&(wo+=M$1(xo<<2)),wo}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function P$2(){this.i=0,this.j=0,this.S=new Array}P$2.prototype.init=function(va){var _o,xo,bo;for(_o=0;_o<256;++_o)this.S[_o]=_o;for(xo=0,_o=0;_o<256;++_o)xo=xo+this.S[_o]+va[_o%va.length]&255,bo=this.S[_o],this.S[_o]=this.S[xo],this.S[xo]=bo;this.i=0,this.j=0},P$2.prototype.next=function(){var va;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,va=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=va,this.S[va+this.S[this.i]&255]};var B$1,_$3,U;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function R$2(){var va;va=new Date().getTime(),_$3[U++]^=255&va,_$3[U++]^=va>>8&255,_$3[U++]^=va>>16&255,_$3[U++]^=va>>24&255,U>=256&&(U-=256)}if(_$3==null){var Q$1;if(_$3=new Array,U=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var Y$1=window.crypto||window.msCrypto;if(Y$1.getRandomValues){var F$1=new Uint8Array(32);for(Y$1.getRandomValues(F$1),Q$1=0;Q$1<32;++Q$1)_$3[U++]=F$1[Q$1]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var V$1=window.crypto.random(32);for(Q$1=0;Q$1<V$1.length;++Q$1)_$3[U++]=255&V$1.charCodeAt(Q$1)}}for(;U<256;)Q$1=Math.floor(65536*Math.random()),_$3[U++]=Q$1>>>8,_$3[U++]=255&Q$1;U=0,R$2()}function H$1(){if(B$1==null){for(R$2(),(B$1=new P$2).init(_$3),U=0;U<_$3.length;++U)_$3[U]=0;U=0}return B$1.next()}function G$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function W$2(va,_o){return new h$2(va,_o)}function q$1(va,_o,xo){for(var bo="",wo=0;bo.length<_o;)bo+=xo(String.fromCharCode.apply(String,va.concat([(4278190080&wo)>>24,(16711680&wo)>>16,(65280&wo)>>8,255&wo]))),wo+=1;return bo}function K$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Z$1(va,_o,xo){for(var bo="",wo=0;bo.length<_o;)bo+=xo(va+String.fromCharCode.apply(String,[(4278190080&wo)>>24,(16711680&wo)>>16,(65280&wo)>>8,255&wo])),wo+=1;return bo}function X$1(va){for(var _o="",xo=0;xo<va.length;xo++){var bo=va[xo].toString(16);bo.length==1&&(bo="0"+bo),_o+=bo}return _o}function J$1(va){return X$1(function(_o){for(var xo=new Array,bo=0;bo<_o.length;bo++)xo[bo]=_o.charCodeAt(bo);return xo}(va))}function $$1(va){return va.length%4==2?va+="==":va.length%4==3&&(va+="="),va=(va=va.replace(/-/g,"+")).replace(/_/g,"/")}function ee(va){return va.length%2==1&&(va="0"+va),function(_o){return(_o=(_o=_o.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$1(va))}function te(va){return C$2($$1(va))}function ie(va){return function(_o){return _o.replace(/%/g,"")}(function(_o){for(var xo=encodeURIComponent(_o),bo="",wo=0;wo<xo.length;wo++)xo[wo]=="%"?(bo+=xo.substr(wo,3),wo+=2):bo=bo+"%"+J$1(xo[wo]);return bo}(va))}function ne(va){return decodeURIComponent(function(_o){return _o.replace(/(..)/g,"%$1")}(va))}function re(va){for(var _o="",xo=0;xo<va.length-1;xo+=2)_o+=String.fromCharCode(parseInt(va.substr(xo,2),16));return _o}function oe(va){for(var _o="",xo=0;xo<va.length;xo++)_o+=("0"+va.charCodeAt(xo).toString(16)).slice(-2);return _o}function se(va){var _o=function(xo){return k$1(xo)}(va).replace(/(.{64})/g,`$1\r
`);return _o=_o.replace(/\r\n$/,"")}function ae(va,_o){return"-----BEGIN "+_o+`-----\r
`+se(va)+`\r
-----END `+_o+`-----\r
`}function ue(va,_o){if(va.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+_o;return function(xo){return C$2(xo.replace(/[^0-9A-Za-z\/+=]*/g,""))}(va=_o!==void 0?(va=va.replace(new RegExp("^[^]*-----BEGIN "+_o+"-----"),"")).replace(new RegExp("-----END "+_o+"-----[^]*$"),""):(va=va.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ce(va){var _o="malformed hex value";if(!va.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw _o;if(va.length!=8)return va.length==32?function(xo){if(!xo.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var bo=(xo=xo.toLowerCase()).match(/.{1,4}/g),wo=0;wo<8;wo++)bo[wo]=bo[wo].replace(/^0+/,""),bo[wo]==""&&(bo[wo]="0");var Eo=(xo=":"+bo.join(":")+":").match(/:(0:){2,}/g);if(Eo===null)return xo.slice(1,-1);var To="";for(wo=0;wo<Eo.length;wo++)Eo[wo].length>To.length&&(To=Eo[wo]);return(xo=xo.replace(To,"::")).slice(1,-1)}(va):va;try{return parseInt(va.substr(0,2),16)+"."+parseInt(va.substr(2,2),16)+"."+parseInt(va.substr(4,2),16)+"."+parseInt(va.substr(6,2),16)}catch{throw _o}}function le(va){return va.match(/.{4}/g).map(function(_o){var xo=parseInt(_o.substr(0,2),16),bo=parseInt(_o.substr(2),16);if(xo==0&bo<128)return String.fromCharCode(bo);if(xo<8){var wo=128|63&bo;return ne((192|(7&xo)<<3|(192&bo)>>6).toString(16)+wo.toString(16))}wo=128|(15&xo)<<2|(192&bo)>>6;var Eo=128|63&bo;return ne((224|(240&xo)>>4).toString(16)+wo.toString(16)+Eo.toString(16))}).join("")}function he(va){return!(va.length%2!=0||!va.match(/^[0-9a-f]+$/)&&!va.match(/^[0-9A-F]+$/))}function de(va){return va.length%2==1?"0"+va:va.substr(0,1)>"7"?"00"+va:va}G$1.prototype.nextBytes=function(va){var _o;for(_o=0;_o<va.length;++_o)va[_o]=H$1()},K$1.prototype.doPublic=function(va){return va.modPowInt(this.e,this.n)},K$1.prototype.setPublic=function(va,_o){if(this.isPublic=!0,this.isPrivate=!1,typeof va!="string")this.n=va,this.e=_o;else{if(!(va!=null&&_o!=null&&va.length>0&&_o.length>0))throw"Invalid RSA public key";this.n=W$2(va,16),this.e=parseInt(_o,16)}},K$1.prototype.encrypt=function(va){var _o=function(wo,Eo){if(Eo<wo.length+11)throw"Message too long for RSA";for(var To=new Array,So=wo.length-1;So>=0&&Eo>0;){var $o=wo.charCodeAt(So--);$o<128?To[--Eo]=$o:$o>127&&$o<2048?(To[--Eo]=63&$o|128,To[--Eo]=$o>>6|192):(To[--Eo]=63&$o|128,To[--Eo]=$o>>6&63|128,To[--Eo]=$o>>12|224)}To[--Eo]=0;for(var Do=new G$1,No=new Array;Eo>2;){for(No[0]=0;No[0]==0;)Do.nextBytes(No);To[--Eo]=No[0]}return To[--Eo]=2,To[--Eo]=0,new h$2(To)}(va,this.n.bitLength()+7>>3);if(_o==null)return null;var xo=this.doPublic(_o);if(xo==null)return null;var bo=xo.toString(16);return(1&bo.length)==0?bo:"0"+bo},K$1.prototype.encryptOAEP=function(va,_o,xo){var bo=function(To,So,$o,Do){var No=u$2.crypto.MessageDigest,Oo=u$2.crypto.Util,Lo=null;if($o||($o="sha1"),typeof $o=="string"&&(Lo=No.getCanonicalAlgName($o),Do=No.getHashLength(Lo),$o=function(Uo){return re(Oo.hashHex(oe(Uo),Lo))}),To.length+2*Do+2>So)throw"Message too long for RSA";var Co,Ro="";for(Co=0;Co<So-To.length-2*Do-2;Co+=1)Ro+="\0";var jo=$o("")+Ro+""+To,zo=new Array(Do);new G$1().nextBytes(zo);var Io=q$1(zo,jo.length,$o),Po=[];for(Co=0;Co<jo.length;Co+=1)Po[Co]=jo.charCodeAt(Co)^Io.charCodeAt(Co);var Bo=q$1(Po,zo.length,$o),ko=[0];for(Co=0;Co<zo.length;Co+=1)ko[Co+1]=zo[Co]^Bo.charCodeAt(Co);return new h$2(ko.concat(Po))}(va,this.n.bitLength()+7>>3,_o,xo);if(bo==null)return null;var wo=this.doPublic(bo);if(wo==null)return null;var Eo=wo.toString(16);return(1&Eo.length)==0?Eo:"0"+Eo},K$1.prototype.type="RSA",K$1.prototype.doPrivate=function(va){if(this.p==null||this.q==null)return va.modPow(this.d,this.n);for(var _o=va.mod(this.p).modPow(this.dmp1,this.p),xo=va.mod(this.q).modPow(this.dmq1,this.q);_o.compareTo(xo)<0;)_o=_o.add(this.p);return _o.subtract(xo).multiply(this.coeff).mod(this.p).multiply(this.q).add(xo)},K$1.prototype.setPrivate=function(va,_o,xo){if(this.isPrivate=!0,typeof va!="string")this.n=va,this.e=_o,this.d=xo;else{if(!(va!=null&&_o!=null&&va.length>0&&_o.length>0))throw"Invalid RSA private key";this.n=W$2(va,16),this.e=parseInt(_o,16),this.d=W$2(xo,16)}},K$1.prototype.setPrivateEx=function(va,_o,xo,bo,wo,Eo,To,So){if(this.isPrivate=!0,this.isPublic=!1,va==null)throw"RSASetPrivateEx N == null";if(_o==null)throw"RSASetPrivateEx E == null";if(va.length==0)throw"RSASetPrivateEx N.length == 0";if(_o.length==0)throw"RSASetPrivateEx E.length == 0";if(!(va!=null&&_o!=null&&va.length>0&&_o.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=W$2(va,16),this.e=parseInt(_o,16),this.d=W$2(xo,16),this.p=W$2(bo,16),this.q=W$2(wo,16),this.dmp1=W$2(Eo,16),this.dmq1=W$2(To,16),this.coeff=W$2(So,16)},K$1.prototype.generate=function(va,_o){var xo=new G$1,bo=va>>1;this.e=parseInt(_o,16);for(var wo=new h$2(_o,16);;){for(;this.p=new h$2(va-bo,1,xo),this.p.subtract(h$2.ONE).gcd(wo).compareTo(h$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new h$2(bo,1,xo),this.q.subtract(h$2.ONE).gcd(wo).compareTo(h$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Eo=this.p;this.p=this.q,this.q=Eo}var To=this.p.subtract(h$2.ONE),So=this.q.subtract(h$2.ONE),$o=To.multiply(So);if($o.gcd(wo).compareTo(h$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==va)){this.d=wo.modInverse($o),this.dmp1=this.d.mod(To),this.dmq1=this.d.mod(So),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},K$1.prototype.decrypt=function(va){if(va.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var _o=W$2(va,16),xo=this.doPrivate(_o);return xo==null?null:function(bo,wo){for(var Eo=bo.toByteArray(),To=0;To<Eo.length&&Eo[To]==0;)++To;if(Eo.length-To!=wo-1||Eo[To]!=2)return null;for(++To;Eo[To]!=0;)if(++To>=Eo.length)return null;for(var So="";++To<Eo.length;){var $o=255&Eo[To];$o<128?So+=String.fromCharCode($o):$o>191&&$o<224?(So+=String.fromCharCode((31&$o)<<6|63&Eo[To+1]),++To):(So+=String.fromCharCode((15&$o)<<12|(63&Eo[To+1])<<6|63&Eo[To+2]),To+=2)}return So}(xo,this.n.bitLength()+7>>3)},K$1.prototype.decryptOAEP=function(va,_o,xo){if(va.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var bo=W$2(va,16),wo=this.doPrivate(bo);return wo==null?null:function(Eo,To,So,$o){var Do=u$2.crypto.MessageDigest,No=u$2.crypto.Util,Oo=null;for(So||(So="sha1"),typeof So=="string"&&(Oo=Do.getCanonicalAlgName(So),$o=Do.getHashLength(Oo),So=function(ko){return re(No.hashHex(oe(ko),Oo))}),Eo=Eo.toByteArray(),Lo=0;Lo<Eo.length;Lo+=1)Eo[Lo]&=255;for(;Eo.length<To;)Eo.unshift(0);if((Eo=String.fromCharCode.apply(String,Eo)).length<2*$o+2)throw"Cipher too short";var Lo,Co=Eo.substr(1,$o),Ro=Eo.substr($o+1),jo=Z$1(Ro,$o,So),zo=[];for(Lo=0;Lo<Co.length;Lo+=1)zo[Lo]=Co.charCodeAt(Lo)^jo.charCodeAt(Lo);var Io=Z$1(String.fromCharCode.apply(String,zo),Eo.length-$o,So),Po=[];for(Lo=0;Lo<Ro.length;Lo+=1)Po[Lo]=Ro.charCodeAt(Lo)^Io.charCodeAt(Lo);if((Po=String.fromCharCode.apply(String,Po)).substr(0,$o)!==So(""))throw"Hash mismatch";var Bo=(Po=Po.substr($o)).indexOf("");if((Bo!=-1?Po.substr(0,Bo).lastIndexOf("\0"):-1)+1!=Bo)throw"Malformed data";return Po.substr(Bo+1)}(wo,this.n.bitLength()+7>>3,_o,xo)},u$2.lang!==void 0&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(va){return!!va.match(/^[0-9]+$/)||!!va.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(va){return he(va)},u$2.lang.String.isBase64=function(va){return!(!(va=va.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||va.length%4!=0)},u$2.lang.String.isBase64URL=function(va){return!va.match(/[+/=]/)&&(va=$$1(va),u$2.lang.String.isBase64(va))},u$2.lang.String.isIntegerArray=function(va){return!!(va=va.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(va){return va.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$2.lang.String.isIA5=function(va){return va.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$2.lang.String.isMail=function(va){return va.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe=function(va,_o,xo){return xo==null&&(xo="0"),va.length>=_o?va:new Array(_o-va.length+1).join(xo)+va};function Ae(va,_o){var xo=function(){};xo.prototype=_o.prototype,va.prototype=new xo,va.prototype.constructor=va,va.superclass=_o.prototype,_o.prototype.constructor==Object.prototype.constructor&&(_o.prototype.constructor=_o)}u$2.crypto!==void 0&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:l$3.algo.MD5,sha1:l$3.algo.SHA1,sha224:l$3.algo.SHA224,sha256:l$3.algo.SHA256,sha384:l$3.algo.SHA384,sha512:l$3.algo.SHA512,ripemd160:l$3.algo.RIPEMD160},this.getDigestInfoHex=function(va,_o){if(this.DIGESTINFOHEAD[_o]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+_o;return this.DIGESTINFOHEAD[_o]+va},this.getPaddedDigestInfoHex=function(va,_o,xo){var bo=this.getDigestInfoHex(va,_o),wo=xo/4;if(bo.length+22>wo)throw"key is too short for SigAlg: keylen="+xo+","+_o;for(var Eo="0001",To="00"+bo,So="",$o=wo-Eo.length-To.length,Do=0;Do<$o;Do+=2)So+="ff";return Eo+So+To},this.hashString=function(va,_o){return new u$2.crypto.MessageDigest({alg:_o}).digestString(va)},this.hashHex=function(va,_o){return new u$2.crypto.MessageDigest({alg:_o}).digestHex(va)},this.sha1=function(va){return this.hashString(va,"sha1")},this.sha256=function(va){return this.hashString(va,"sha256")},this.sha256Hex=function(va){return this.hashHex(va,"sha256")},this.sha512=function(va){return this.hashString(va,"sha512")},this.sha512Hex=function(va){return this.hashHex(va,"sha512")},this.isKey=function(va){return va instanceof K$1||va instanceof u$2.crypto.DSA||va instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(va){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(va)},u$2.crypto.Util.ripemd160=function(va){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(va)},u$2.crypto.Util.SECURERANDOMGEN=new G$1,u$2.crypto.Util.getRandomHexOfNbytes=function(va){var _o=new Array(va);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(_o),X$1(_o)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(va){return new h$2(u$2.crypto.Util.getRandomHexOfNbytes(va),16)},u$2.crypto.Util.getRandomHexOfNbits=function(va){var _o=va%8,xo=new Array((va-_o)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(xo),xo[0]=(255<<_o&255^255)&xo[0],X$1(xo)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(va){return new h$2(u$2.crypto.Util.getRandomHexOfNbits(va),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(va){for(var _o=va.bitLength();;){var xo=u$2.crypto.Util.getRandomBigIntegerOfNbits(_o);if(va.compareTo(xo)!=-1)return xo}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(va,_o){var xo=va.compareTo(_o);if(xo==1)throw"biMin is greater than biMax";if(xo==0)return va;var bo=_o.subtract(va);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(bo).add(va)},u$2.crypto.MessageDigest=function(va){this.setAlgAndProvider=function(_o,xo){if((_o=u$2.crypto.MessageDigest.getCanonicalAlgName(_o))!==null&&xo===void 0&&(xo=u$2.crypto.Util.DEFAULTPROVIDER[_o]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(_o)!=-1&&xo=="cryptojs"){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[_o].create()}catch(bo){throw"setAlgAndProvider hash alg set fail alg="+_o+"/"+bo}this.updateString=function(bo){this.md.update(bo)},this.updateHex=function(bo){var wo=l$3.enc.Hex.parse(bo);this.md.update(wo)},this.digest=function(){return this.md.finalize().toString(l$3.enc.Hex)},this.digestString=function(bo){return this.updateString(bo),this.digest()},this.digestHex=function(bo){return this.updateHex(bo),this.digest()}}if(":sha256:".indexOf(_o)!=-1&&xo=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(bo){throw"setAlgAndProvider hash alg set fail alg="+_o+"/"+bo}this.updateString=function(bo){this.md.update(bo)},this.updateHex=function(bo){var wo=sjcl.codec.hex.toBits(bo);this.md.update(wo)},this.digest=function(){var bo=this.md.finalize();return sjcl.codec.hex.fromBits(bo)},this.digestString=function(bo){return this.updateString(bo),this.digest()},this.digestHex=function(bo){return this.updateHex(bo),this.digest()}}},this.updateString=function(_o){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(_o){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(_o){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(_o){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},va!==void 0&&va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(va){return typeof va=="string"&&(va=(va=va.toLowerCase()).replace(/-/,"")),va},u$2.crypto.MessageDigest.getHashLength=function(va){var _o=u$2.crypto.MessageDigest,xo=_o.getCanonicalAlgName(va);if(_o.HASHLENGTH[xo]===void 0)throw"not supported algorithm: "+va;return _o.HASHLENGTH[xo]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(va){this.setAlgAndProvider=function(_o,xo){if((_o=_o.toLowerCase())==null&&(_o="hmacsha1"),(_o=_o.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+_o;xo===void 0&&(xo=u$2.crypto.Util.DEFAULTPROVIDER[_o]),this.algProv=_o+"/"+xo;var bo=_o.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(bo)!=-1&&xo=="cryptojs"){try{var wo=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[bo];this.mac=l$3.algo.HMAC.create(wo,this.pass)}catch(Eo){throw"setAlgAndProvider hash alg set fail hashAlg="+bo+"/"+Eo}this.updateString=function(Eo){this.mac.update(Eo)},this.updateHex=function(Eo){var To=l$3.enc.Hex.parse(Eo);this.mac.update(To)},this.doFinal=function(){return this.mac.finalize().toString(l$3.enc.Hex)},this.doFinalString=function(Eo){return this.updateString(Eo),this.doFinal()},this.doFinalHex=function(Eo){return this.updateHex(Eo),this.doFinal()}}},this.updateString=function(_o){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(_o){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(_o){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(_o){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(_o){if(typeof _o=="string"){var xo=_o;return _o.length%2!=1&&_o.match(/^[0-9A-Fa-f]+$/)||(xo=oe(_o)),void(this.pass=l$3.enc.Hex.parse(xo))}if(typeof _o!="object")throw"KJUR.crypto.Mac unsupported password type: "+_o;if(xo=null,_o.hex!==void 0){if(_o.hex.length%2!=0||!_o.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+_o.hex;xo=_o.hex}if(_o.utf8!==void 0&&(xo=ie(_o.utf8)),_o.rstr!==void 0&&(xo=oe(_o.rstr)),_o.b64!==void 0&&(xo=C$2(_o.b64)),_o.b64u!==void 0&&(xo=te(_o.b64u)),xo==null)throw"KJUR.crypto.Mac unsupported password type: "+_o;this.pass=l$3.enc.Hex.parse(xo)},va!==void 0&&(va.pass!==void 0&&this.setPassword(va.pass),va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(va){var _o=null;if(this._setAlgNames=function(){var xo=this.algName.match(/^(.+)with(.+)$/);xo&&(this.mdAlgName=xo[1].toLowerCase(),this.pubkeyAlgName=xo[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(xo,bo){for(var wo="",Eo=bo/4-xo.length,To=0;To<Eo;To++)wo+="0";return wo+xo},this.setAlgAndProvider=function(xo,bo){if(this._setAlgNames(),bo!="cryptojs/jsrsa")throw new Error("provider not supported: "+bo);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(wo){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+wo)}this.init=function(wo,Eo){var To=null;try{To=Eo===void 0?we.getKey(wo):we.getKey(wo,Eo)}catch(So){throw"init failed:"+So}if(To.isPrivate===!0)this.prvKey=To,this.state="SIGN";else{if(To.isPublic!==!0)throw"init failed.:"+To;this.pubKey=To,this.state="VERIFY"}},this.updateString=function(wo){this.md.updateString(wo)},this.updateHex=function(wo){this.md.updateHex(wo)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof K$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof K$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(wo){return this.updateString(wo),this.sign()},this.signHex=function(wo){return this.updateHex(wo),this.sign()},this.verify=function(wo){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof K$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,wo,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof K$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,wo);if(u$2.crypto.ECDSA!==void 0&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,wo);if(u$2.crypto.DSA!==void 0&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,wo);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(xo,bo){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(xo){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(xo){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(xo){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(xo){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(xo){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=va,va!==void 0&&(va.alg!==void 0&&(this.algName=va.alg,va.prov===void 0?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=va.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),va.psssaltlen!==void 0&&(this.pssSaltLen=va.psssaltlen),va.prvkeypem!==void 0)){if(va.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{_o=we.getKey(va.prvkeypem),this.init(_o)}catch(xo){throw"fatal error to load pem private key: "+xo}}},u$2.crypto.Cipher=function(va){},u$2.crypto.Cipher.encrypt=function(va,_o,xo){if(_o instanceof K$1&&_o.isPublic){var bo=u$2.crypto.Cipher.getAlgByKeyAndName(_o,xo);if(bo==="RSA")return _o.encrypt(va);if(bo==="RSAOAEP")return _o.encryptOAEP(va,"sha1");var wo=bo.match(/^RSAOAEP(\d+)$/);if(wo!==null)return _o.encryptOAEP(va,"sha"+wo[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+xo}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(va,_o,xo){if(_o instanceof K$1&&_o.isPrivate){var bo=u$2.crypto.Cipher.getAlgByKeyAndName(_o,xo);if(bo==="RSA")return _o.decrypt(va);if(bo==="RSAOAEP")return _o.decryptOAEP(va,"sha1");var wo=bo.match(/^RSAOAEP(\d+)$/);if(wo!==null)return _o.decryptOAEP(va,"sha"+wo[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+xo}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(va,_o){if(va instanceof K$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(_o)!=-1)return _o;if(_o==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+_o}throw"getAlgByKeyAndName: not supported algorithm name: "+_o},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var fe,Me,ge,ye,me,ve,Ne,De,we=(fe=function(va,_o,xo){return Me(l$3.AES,va,_o,xo)},Me=function(va,_o,xo,bo){var wo=l$3.enc.Hex.parse(_o),Eo=l$3.enc.Hex.parse(xo),To=l$3.enc.Hex.parse(bo),So={};So.key=Eo,So.iv=To,So.ciphertext=wo;var $o=va.decrypt(So,Eo,{iv:To});return l$3.enc.Hex.stringify($o)},ge=function(va,_o,xo){return ye(l$3.AES,va,_o,xo)},ye=function(va,_o,xo,bo){var wo=l$3.enc.Hex.parse(_o),Eo=l$3.enc.Hex.parse(xo),To=l$3.enc.Hex.parse(bo),So=va.encrypt(wo,Eo,{iv:To}),$o=l$3.enc.Hex.parse(So.toString());return l$3.enc.Base64.stringify($o)},me={"AES-256-CBC":{proc:fe,eproc:ge,keylen:32,ivlen:16},"AES-192-CBC":{proc:fe,eproc:ge,keylen:24,ivlen:16},"AES-128-CBC":{proc:fe,eproc:ge,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(va,_o,xo){return Me(l$3.TripleDES,va,_o,xo)},eproc:function(va,_o,xo){return ye(l$3.TripleDES,va,_o,xo)},keylen:24,ivlen:8},"DES-CBC":{proc:function(va,_o,xo){return Me(l$3.DES,va,_o,xo)},eproc:function(va,_o,xo){return ye(l$3.DES,va,_o,xo)},keylen:8,ivlen:8}},ve=function(va){var _o={},xo=va.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));xo&&(_o.cipher=xo[1],_o.ivsalt=xo[2]);var bo=va.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));bo&&(_o.type=bo[1]);var wo=-1,Eo=0;va.indexOf(`\r
\r
`)!=-1&&(wo=va.indexOf(`\r
\r
`),Eo=2),va.indexOf(`

`)!=-1&&(wo=va.indexOf(`

`),Eo=1);var To=va.indexOf("-----END");if(wo!=-1&&To!=-1){var So=va.substring(wo+2*Eo,To-Eo);So=So.replace(/\s+/g,""),_o.data=So}return _o},Ne=function(va,_o,xo){for(var bo=xo.substring(0,16),wo=l$3.enc.Hex.parse(bo),Eo=l$3.enc.Utf8.parse(_o),To=me[va].keylen+me[va].ivlen,So="",$o=null;;){var Do=l$3.algo.MD5.create();if($o!=null&&Do.update($o),Do.update(Eo),Do.update(wo),$o=Do.finalize(),(So+=l$3.enc.Hex.stringify($o)).length>=2*To)break}var No={};return No.keyhex=So.substr(0,2*me[va].keylen),No.ivhex=So.substr(2*me[va].keylen,2*me[va].ivlen),No},De=function(va,_o,xo,bo){var wo=l$3.enc.Base64.parse(va),Eo=l$3.enc.Hex.stringify(wo);return(0,me[_o].proc)(Eo,xo,bo)},{version:"1.0.0",parsePKCS5PEM:function(va){return ve(va)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(va,_o,xo){return Ne(va,_o,xo)},decryptKeyB64:function(va,_o,xo,bo){return De(va,_o,xo,bo)},getDecryptedKeyHex:function(va,_o){var xo=ve(va);xo.type;var bo=xo.cipher,wo=xo.ivsalt,Eo=xo.data,To=Ne(bo,_o,wo).keyhex;return De(Eo,bo,To,wo)},getEncryptedPKCS5PEMFromPrvKeyHex:function(va,_o,xo,bo,wo){var Eo="";if(bo!==void 0&&bo!=null||(bo="AES-256-CBC"),me[bo]===void 0)throw"KEYUTIL unsupported algorithm: "+bo;wo!==void 0&&wo!=null||(wo=function(So){var $o=l$3.lib.WordArray.random(So);return l$3.enc.Hex.stringify($o)}(me[bo].ivlen).toUpperCase());var To=function(So,$o,Do,No){return(0,me[$o].eproc)(So,Do,No)}(_o,bo,Ne(bo,xo,wo).keyhex,wo);return Eo="-----BEGIN "+va+` PRIVATE KEY-----\r
`,Eo+=`Proc-Type: 4,ENCRYPTED\r
`,Eo+="DEK-Info: "+bo+","+wo+`\r
`,Eo+=`\r
`,Eo+=To.replace(/(.{64})/g,`$1\r
`),Eo+=`\r
-----END `+va+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(va){var _o=Te,xo=_o.getChildIdx,bo=_o.getV,wo={},Eo=xo(va,0);if(Eo.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Eo.length;wo.ciphertext=bo(va,Eo[1]);var To=xo(va,Eo[0]);if(To.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+To.length;if(bo(va,To[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var So=xo(va,To[1]);if(To.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+So.length;var $o=xo(va,So[1]);if($o.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+$o.length;if(bo(va,$o[0])!="2a864886f70d0307")throw"this only supports TripleDES";wo.encryptionSchemeAlg="TripleDES",wo.encryptionSchemeIV=bo(va,$o[1]);var Do=xo(va,So[0]);if(Do.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Do.length;if(bo(va,Do[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var No=xo(va,Do[1]);if(No.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+No.length;wo.pbkdf2Salt=bo(va,No[0]);var Oo=bo(va,No[1]);try{wo.pbkdf2Iter=parseInt(Oo,16)}catch{throw"malformed format pbkdf2Iter: "+Oo}return wo},getPBKDF2KeyHexFromParam:function(va,_o){var xo=l$3.enc.Hex.parse(va.pbkdf2Salt),bo=va.pbkdf2Iter,wo=l$3.PBKDF2(_o,xo,{keySize:6,iterations:bo});return l$3.enc.Hex.stringify(wo)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(va,_o){var xo=ue(va,"ENCRYPTED PRIVATE KEY"),bo=this.parseHexOfEncryptedPKCS8(xo),wo=we.getPBKDF2KeyHexFromParam(bo,_o),Eo={};Eo.ciphertext=l$3.enc.Hex.parse(bo.ciphertext);var To=l$3.enc.Hex.parse(wo),So=l$3.enc.Hex.parse(bo.encryptionSchemeIV),$o=l$3.TripleDES.decrypt(Eo,To,{iv:So});return l$3.enc.Hex.stringify($o)},getKeyFromEncryptedPKCS8PEM:function(va,_o){var xo=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(va,_o);return this.getKeyFromPlainPrivatePKCS8Hex(xo)},parsePlainPrivatePKCS8Hex:function(va){var _o=Te,xo=_o.getChildIdx,bo=_o.getV,wo={algparam:null};if(va.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Eo=xo(va,0);if(Eo.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(va.substr(Eo[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var To=xo(va,Eo[1]);if(To.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(va.substr(To[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(wo.algoid=bo(va,To[0]),va.substr(To[1],2)=="06"&&(wo.algparam=bo(va,To[1])),va.substr(Eo[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return wo.keyidx=_o.getVidx(va,Eo[2]),wo},getKeyFromPlainPrivatePKCS8PEM:function(va){var _o=ue(va,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(_o)},getKeyFromPlainPrivatePKCS8Hex:function(va){var _o,xo=this.parsePlainPrivatePKCS8Hex(va);if(xo.algoid=="2a864886f70d010101")_o=new K$1;else if(xo.algoid=="2a8648ce380401")_o=new u$2.crypto.DSA;else{if(xo.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";_o=new u$2.crypto.ECDSA}return _o.readPKCS8PrvKeyHex(va),_o},_getKeyFromPublicPKCS8Hex:function(va){var _o,xo=Te.getVbyList(va,0,[0,0],"06");if(xo==="2a864886f70d010101")_o=new K$1;else if(xo==="2a8648ce380401")_o=new u$2.crypto.DSA;else{if(xo!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";_o=new u$2.crypto.ECDSA}return _o.readPKCS8PubKeyHex(va),_o},parsePublicRawRSAKeyHex:function(va){var _o=Te,xo=_o.getChildIdx,bo=_o.getV,wo={};if(va.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Eo=xo(va,0);if(Eo.length!=2)throw"malformed RSA key(code:002)";if(va.substr(Eo[0],2)!="02")throw"malformed RSA key(code:003)";if(wo.n=bo(va,Eo[0]),va.substr(Eo[1],2)!="02")throw"malformed RSA key(code:004)";return wo.e=bo(va,Eo[1]),wo},parsePublicPKCS8Hex:function(va){var _o=Te,xo=_o.getChildIdx,bo=_o.getV,wo={algparam:null},Eo=xo(va,0);if(Eo.length!=2)throw"outer DERSequence shall have 2 elements: "+Eo.length;var To=Eo[0];if(va.substr(To,2)!="30")throw"malformed PKCS8 public key(code:001)";var So=xo(va,To);if(So.length!=2)throw"malformed PKCS8 public key(code:002)";if(va.substr(So[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(wo.algoid=bo(va,So[0]),va.substr(So[1],2)=="06"?wo.algparam=bo(va,So[1]):va.substr(So[1],2)=="30"&&(wo.algparam={},wo.algparam.p=_o.getVbyList(va,So[1],[0],"02"),wo.algparam.q=_o.getVbyList(va,So[1],[1],"02"),wo.algparam.g=_o.getVbyList(va,So[1],[2],"02")),va.substr(Eo[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return wo.key=bo(va,Eo[1]).substr(2),wo}});we.getKey=function(va,_o,xo){var bo=(zo=Te).getChildIdx;zo.getV;var wo=zo.getVbyList,Eo=u$2.crypto,To=Eo.ECDSA,So=Eo.DSA,$o=K$1,Do=ue,No=we;if($o!==void 0&&va instanceof $o||To!==void 0&&va instanceof To||So!==void 0&&va instanceof So)return va;if(va.curve!==void 0&&va.xy!==void 0&&va.d===void 0)return new To({pub:va.xy,curve:va.curve});if(va.curve!==void 0&&va.d!==void 0)return new To({prv:va.d,curve:va.curve});if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d===void 0)return(Go=new $o).setPublic(va.n,va.e),Go;if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p!==void 0&&va.q!==void 0&&va.dp!==void 0&&va.dq!==void 0&&va.co!==void 0&&va.qi===void 0)return(Go=new $o).setPrivateEx(va.n,va.e,va.d,va.p,va.q,va.dp,va.dq,va.co),Go;if(va.kty===void 0&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p===void 0)return(Go=new $o).setPrivate(va.n,va.e,va.d),Go;if(va.p!==void 0&&va.q!==void 0&&va.g!==void 0&&va.y!==void 0&&va.x===void 0)return(Go=new So).setPublic(va.p,va.q,va.g,va.y),Go;if(va.p!==void 0&&va.q!==void 0&&va.g!==void 0&&va.y!==void 0&&va.x!==void 0)return(Go=new So).setPrivate(va.p,va.q,va.g,va.y,va.x),Go;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d===void 0)return(Go=new $o).setPublic(te(va.n),te(va.e)),Go;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0&&va.p!==void 0&&va.q!==void 0&&va.dp!==void 0&&va.dq!==void 0&&va.qi!==void 0)return(Go=new $o).setPrivateEx(te(va.n),te(va.e),te(va.d),te(va.p),te(va.q),te(va.dp),te(va.dq),te(va.qi)),Go;if(va.kty==="RSA"&&va.n!==void 0&&va.e!==void 0&&va.d!==void 0)return(Go=new $o).setPrivate(te(va.n),te(va.e),te(va.d)),Go;if(va.kty==="EC"&&va.crv!==void 0&&va.x!==void 0&&va.y!==void 0&&va.d===void 0){var Oo=(Fo=new To({curve:va.crv})).ecparams.keylen/4,Lo="04"+("0000000000"+te(va.x)).slice(-Oo)+("0000000000"+te(va.y)).slice(-Oo);return Fo.setPublicKeyHex(Lo),Fo}if(va.kty==="EC"&&va.crv!==void 0&&va.x!==void 0&&va.y!==void 0&&va.d!==void 0){Oo=(Fo=new To({curve:va.crv})).ecparams.keylen/4,Lo="04"+("0000000000"+te(va.x)).slice(-Oo)+("0000000000"+te(va.y)).slice(-Oo);var Co=("0000000000"+te(va.d)).slice(-Oo);return Fo.setPublicKeyHex(Lo),Fo.setPrivateKeyHex(Co),Fo}if(xo==="pkcs5prv"){var Ro,jo=va,zo=Te;if((Ro=bo(jo,0)).length===9)(Go=new $o).readPKCS5PrvKeyHex(jo);else if(Ro.length===6)(Go=new So).readPKCS5PrvKeyHex(jo);else{if(!(Ro.length>2&&jo.substr(Ro[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Go=new To).readPKCS5PrvKeyHex(jo)}return Go}if(xo==="pkcs8prv")return Go=No.getKeyFromPlainPrivatePKCS8Hex(va);if(xo==="pkcs8pub")return No._getKeyFromPublicPKCS8Hex(va);if(xo==="x509pub")return ze.getPublicKeyFromCertHex(va);if(va.indexOf("-END CERTIFICATE-",0)!=-1||va.indexOf("-END X509 CERTIFICATE-",0)!=-1||va.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return ze.getPublicKeyFromCertPEM(va);if(va.indexOf("-END PUBLIC KEY-")!=-1){var Io=ue(va,"PUBLIC KEY");return No._getKeyFromPublicPKCS8Hex(Io)}if(va.indexOf("-END RSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1){var Po=Do(va,"RSA PRIVATE KEY");return No.getKey(Po,null,"pkcs5prv")}if(va.indexOf("-END DSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1){var Bo=wo(Yo=Do(va,"DSA PRIVATE KEY"),0,[1],"02"),ko=wo(Yo,0,[2],"02"),Uo=wo(Yo,0,[3],"02"),Qo=wo(Yo,0,[4],"02"),qo=wo(Yo,0,[5],"02");return(Go=new So).setPrivate(new h$2(Bo,16),new h$2(ko,16),new h$2(Uo,16),new h$2(Qo,16),new h$2(qo,16)),Go}if(va.indexOf("-END EC PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")==-1)return Po=Do(va,"EC PRIVATE KEY"),No.getKey(Po,null,"pkcs5prv");if(va.indexOf("-END PRIVATE KEY-")!=-1)return No.getKeyFromPlainPrivatePKCS8PEM(va);if(va.indexOf("-END RSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var Zo=No.getDecryptedKeyHex(va,_o),Xo=new K$1;return Xo.readPKCS5PrvKeyHex(Zo),Xo}if(va.indexOf("-END EC PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var Fo,Go=wo(Yo=No.getDecryptedKeyHex(va,_o),0,[1],"04"),Vo=wo(Yo,0,[2,0],"06"),Wo=wo(Yo,0,[3,0],"03").substr(2);if(u$2.crypto.OID.oidhex2name[Vo]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Vo;return(Fo=new To({curve:u$2.crypto.OID.oidhex2name[Vo]})).setPublicKeyHex(Wo),Fo.setPrivateKeyHex(Go),Fo.isPublic=!1,Fo}if(va.indexOf("-END DSA PRIVATE KEY-")!=-1&&va.indexOf("4,ENCRYPTED")!=-1){var Yo;return Bo=wo(Yo=No.getDecryptedKeyHex(va,_o),0,[1],"02"),ko=wo(Yo,0,[2],"02"),Uo=wo(Yo,0,[3],"02"),Qo=wo(Yo,0,[4],"02"),qo=wo(Yo,0,[5],"02"),(Go=new So).setPrivate(new h$2(Bo,16),new h$2(ko,16),new h$2(Uo,16),new h$2(Qo,16),new h$2(qo,16)),Go}if(va.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return No.getKeyFromEncryptedPKCS8PEM(va,_o);throw new Error("not supported argument")},we.generateKeypair=function(va,_o){if(va=="RSA"){var xo=_o;(To=new K$1).generate(xo,"10001"),To.isPrivate=!0,To.isPublic=!0;var bo=new K$1,wo=To.n.toString(16),Eo=To.e.toString(16);return bo.setPublic(wo,Eo),bo.isPrivate=!1,bo.isPublic=!0,(So={}).prvKeyObj=To,So.pubKeyObj=bo,So}if(va=="EC"){var To,So,$o=_o,Do=new u$2.crypto.ECDSA({curve:$o}).generateKeyPairHex();return(To=new u$2.crypto.ECDSA({curve:$o})).setPublicKeyHex(Do.ecpubhex),To.setPrivateKeyHex(Do.ecprvhex),To.isPrivate=!0,To.isPublic=!1,(bo=new u$2.crypto.ECDSA({curve:$o})).setPublicKeyHex(Do.ecpubhex),bo.isPrivate=!1,bo.isPublic=!0,(So={}).prvKeyObj=To,So.pubKeyObj=bo,So}throw"unknown algorithm: "+va},we.getPEM=function(va,_o,xo,bo,wo,Eo){var To=u$2,So=To.asn1,$o=So.DERObjectIdentifier,Do=So.DERInteger,No=So.ASN1Util.newObject,Oo=So.x509.SubjectPublicKeyInfo,Lo=To.crypto,Co=Lo.DSA,Ro=Lo.ECDSA,jo=K$1;function zo(Fo){return No({seq:[{int:0},{int:{bigint:Fo.n}},{int:Fo.e},{int:{bigint:Fo.d}},{int:{bigint:Fo.p}},{int:{bigint:Fo.q}},{int:{bigint:Fo.dmp1}},{int:{bigint:Fo.dmq1}},{int:{bigint:Fo.coeff}}]})}function Io(Fo){return No({seq:[{int:1},{octstr:{hex:Fo.prvKeyHex}},{tag:["a0",!0,{oid:{name:Fo.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Fo.pubKeyHex}}]}]})}function Po(Fo){return No({seq:[{int:0},{int:{bigint:Fo.p}},{int:{bigint:Fo.q}},{int:{bigint:Fo.g}},{int:{bigint:Fo.y}},{int:{bigint:Fo.x}}]})}if((jo!==void 0&&va instanceof jo||Co!==void 0&&va instanceof Co||Ro!==void 0&&va instanceof Ro)&&va.isPublic==1&&(_o===void 0||_o=="PKCS8PUB"))return ae(Qo=new Oo(va).getEncodedHex(),"PUBLIC KEY");if(_o=="PKCS1PRV"&&jo!==void 0&&va instanceof jo&&(xo===void 0||xo==null)&&va.isPrivate==1)return ae(Qo=zo(va).getEncodedHex(),"RSA PRIVATE KEY");if(_o=="PKCS1PRV"&&Ro!==void 0&&va instanceof Ro&&(xo===void 0||xo==null)&&va.isPrivate==1){var Bo=new $o({name:va.curveName}).getEncodedHex(),ko=Io(va).getEncodedHex(),Uo="";return Uo+=ae(Bo,"EC PARAMETERS"),Uo+=ae(ko,"EC PRIVATE KEY")}if(_o=="PKCS1PRV"&&Co!==void 0&&va instanceof Co&&(xo===void 0||xo==null)&&va.isPrivate==1)return ae(Qo=Po(va).getEncodedHex(),"DSA PRIVATE KEY");if(_o=="PKCS5PRV"&&jo!==void 0&&va instanceof jo&&xo!==void 0&&xo!=null&&va.isPrivate==1){var Qo=zo(va).getEncodedHex();return bo===void 0&&(bo="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Qo,xo,bo,Eo)}if(_o=="PKCS5PRV"&&Ro!==void 0&&va instanceof Ro&&xo!==void 0&&xo!=null&&va.isPrivate==1)return Qo=Io(va).getEncodedHex(),bo===void 0&&(bo="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Qo,xo,bo,Eo);if(_o=="PKCS5PRV"&&Co!==void 0&&va instanceof Co&&xo!==void 0&&xo!=null&&va.isPrivate==1)return Qo=Po(va).getEncodedHex(),bo===void 0&&(bo="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Qo,xo,bo,Eo);var qo=function(Fo,Go){var Vo=Zo(Fo,Go);return new No({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Vo.pbkdf2Salt}},{int:Vo.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Vo.encryptionSchemeIV}}]}]}]},{octstr:{hex:Vo.ciphertext}}]}).getEncodedHex()},Zo=function(Fo,Go){var Vo=l$3.lib.WordArray.random(8),Wo=l$3.lib.WordArray.random(8),Yo=l$3.PBKDF2(Go,Vo,{keySize:6,iterations:100}),Ko=l$3.enc.Hex.parse(Fo),ts=l$3.TripleDES.encrypt(Ko,Yo,{iv:Wo})+"",Jo={};return Jo.ciphertext=ts,Jo.pbkdf2Salt=l$3.enc.Hex.stringify(Vo),Jo.pbkdf2Iter=100,Jo.encryptionSchemeAlg="DES-EDE3-CBC",Jo.encryptionSchemeIV=l$3.enc.Hex.stringify(Wo),Jo};if(_o=="PKCS8PRV"&&jo!=null&&va instanceof jo&&va.isPrivate==1){var Xo=zo(va).getEncodedHex();return Qo=No({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Xo}}]}).getEncodedHex(),xo===void 0||xo==null?ae(Qo,"PRIVATE KEY"):ae(ko=qo(Qo,xo),"ENCRYPTED PRIVATE KEY")}if(_o=="PKCS8PRV"&&Ro!==void 0&&va instanceof Ro&&va.isPrivate==1)return Xo=new No({seq:[{int:1},{octstr:{hex:va.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+va.pubKeyHex}}]}]}).getEncodedHex(),Qo=No({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:va.curveName}}]},{octstr:{hex:Xo}}]}).getEncodedHex(),xo===void 0||xo==null?ae(Qo,"PRIVATE KEY"):ae(ko=qo(Qo,xo),"ENCRYPTED PRIVATE KEY");if(_o=="PKCS8PRV"&&Co!==void 0&&va instanceof Co&&va.isPrivate==1)return Xo=new Do({bigint:va.x}).getEncodedHex(),Qo=No({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:va.p}},{int:{bigint:va.q}},{int:{bigint:va.g}}]}]},{octstr:{hex:Xo}}]}).getEncodedHex(),xo===void 0||xo==null?ae(Qo,"PRIVATE KEY"):ae(ko=qo(Qo,xo),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},we.getKeyFromCSRPEM=function(va){var _o=ue(va,"CERTIFICATE REQUEST");return we.getKeyFromCSRHex(_o)},we.getKeyFromCSRHex=function(va){var _o=we.parseCSRHex(va);return we.getKey(_o.p8pubkeyhex,null,"pkcs8pub")},we.parseCSRHex=function(va){var _o=Te,xo=_o.getChildIdx,bo=_o.getTLV,wo={},Eo=va;if(Eo.substr(0,2)!="30")throw"malformed CSR(code:001)";var To=xo(Eo,0);if(To.length<1)throw"malformed CSR(code:002)";if(Eo.substr(To[0],2)!="30")throw"malformed CSR(code:003)";var So=xo(Eo,To[0]);if(So.length<3)throw"malformed CSR(code:004)";return wo.p8pubkeyhex=bo(Eo,So[2]),wo},we.getKeyID=function(va){var _o=we,xo=Te;typeof va=="string"&&va.indexOf("BEGIN ")!=-1&&(va=_o.getKey(va));var bo=ue(_o.getPEM(va)),wo=xo.getIdxbyList(bo,0,[1]),Eo=xo.getV(bo,wo).substring(2);return u$2.crypto.Util.hashHex(Eo,"sha1")},we.getJWKFromKey=function(va){var _o={};if(va instanceof K$1&&va.isPrivate)return _o.kty="RSA",_o.n=ee(va.n.toString(16)),_o.e=ee(va.e.toString(16)),_o.d=ee(va.d.toString(16)),_o.p=ee(va.p.toString(16)),_o.q=ee(va.q.toString(16)),_o.dp=ee(va.dmp1.toString(16)),_o.dq=ee(va.dmq1.toString(16)),_o.qi=ee(va.coeff.toString(16)),_o;if(va instanceof K$1&&va.isPublic)return _o.kty="RSA",_o.n=ee(va.n.toString(16)),_o.e=ee(va.e.toString(16)),_o;if(va instanceof u$2.crypto.ECDSA&&va.isPrivate){if((bo=va.getShortNISTPCurveName())!=="P-256"&&bo!=="P-384")throw"unsupported curve name for JWT: "+bo;var xo=va.getPublicKeyXYHex();return _o.kty="EC",_o.crv=bo,_o.x=ee(xo.x),_o.y=ee(xo.y),_o.d=ee(va.prvKeyHex),_o}if(va instanceof u$2.crypto.ECDSA&&va.isPublic){var bo;if((bo=va.getShortNISTPCurveName())!=="P-256"&&bo!=="P-384")throw"unsupported curve name for JWT: "+bo;return xo=va.getPublicKeyXYHex(),_o.kty="EC",_o.crv=bo,_o.x=ee(xo.x),_o.y=ee(xo.y),_o}throw"not supported key object"},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(va){var _o=va.toString(16);return _o.length%2==1&&(_o="0"+_o),_o},this.bigIntToMinTwosComplementsHex=function(va){var _o=va.toString(16);if(_o.substr(0,1)!="-")_o.length%2==1?_o="0"+_o:_o.match(/^[0-7]/)||(_o="00"+_o);else{var xo=_o.substr(1).length;xo%2==1?xo+=1:_o.match(/^[0-7]/)||(xo+=2);for(var bo="",wo=0;wo<xo;wo++)bo+="f";_o=new h$2(bo,16).xor(va).add(h$2.ONE).toString(16).replace(/^-/,"")}return _o},this.getPEMStringFromHex=function(va,_o){return ae(va,_o)},this.newObject=function(va){var _o=u$2.asn1,xo=_o.ASN1Object,bo=_o.DERBoolean,wo=_o.DERInteger,Eo=_o.DERBitString,To=_o.DEROctetString,So=_o.DERNull,$o=_o.DERObjectIdentifier,Do=_o.DEREnumerated,No=_o.DERUTF8String,Oo=_o.DERNumericString,Lo=_o.DERPrintableString,Co=_o.DERTeletexString,Ro=_o.DERIA5String,jo=_o.DERUTCTime,zo=_o.DERGeneralizedTime,Io=_o.DERVisibleString,Po=_o.DERBMPString,Bo=_o.DERSequence,ko=_o.DERSet,Uo=_o.DERTaggedObject,Qo=_o.ASN1Util.newObject;if(va instanceof _o.ASN1Object)return va;var qo=Object.keys(va);if(qo.length!=1)throw new Error("key of param shall be only one.");var Zo=qo[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Zo+":")==-1)throw new Error("undefined key: "+Zo);if(Zo=="bool")return new bo(va[Zo]);if(Zo=="int")return new wo(va[Zo]);if(Zo=="bitstr")return new Eo(va[Zo]);if(Zo=="octstr")return new To(va[Zo]);if(Zo=="null")return new So(va[Zo]);if(Zo=="oid")return new $o(va[Zo]);if(Zo=="enum")return new Do(va[Zo]);if(Zo=="utf8str")return new No(va[Zo]);if(Zo=="numstr")return new Oo(va[Zo]);if(Zo=="prnstr")return new Lo(va[Zo]);if(Zo=="telstr")return new Co(va[Zo]);if(Zo=="ia5str")return new Ro(va[Zo]);if(Zo=="utctime")return new jo(va[Zo]);if(Zo=="gentime")return new zo(va[Zo]);if(Zo=="visstr")return new Io(va[Zo]);if(Zo=="bmpstr")return new Po(va[Zo]);if(Zo=="asn1")return new xo(va[Zo]);if(Zo=="seq"){for(var Xo=va[Zo],Fo=[],Go=0;Go<Xo.length;Go++){var Vo=Qo(Xo[Go]);Fo.push(Vo)}return new Bo({array:Fo})}if(Zo=="set"){for(Xo=va[Zo],Fo=[],Go=0;Go<Xo.length;Go++)Vo=Qo(Xo[Go]),Fo.push(Vo);return new ko({array:Fo})}if(Zo=="tag"){var Wo=va[Zo];if(Object.prototype.toString.call(Wo)==="[object Array]"&&Wo.length==3){var Yo=Qo(Wo[2]);return new Uo({tag:Wo[0],explicit:Wo[1],obj:Yo})}return new Uo(Wo)}},this.jsonToASN1HEX=function(va){return this.newObject(va).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(va){for(var _o="",xo=parseInt(va.substr(0,2),16),bo=(_o=Math.floor(xo/40)+"."+xo%40,""),wo=2;wo<va.length;wo+=2){var Eo=("00000000"+parseInt(va.substr(wo,2),16).toString(2)).slice(-8);bo+=Eo.substr(1,7),Eo.substr(0,1)=="0"&&(_o=_o+"."+new h$2(bo,2).toString(10),bo="")}return _o},u$2.asn1.ASN1Util.oidIntToHex=function(va){var _o=function(So){var $o=So.toString(16);return $o.length==1&&($o="0"+$o),$o},xo=function(So){var $o="",Do=new h$2(So,10).toString(2),No=7-Do.length%7;No==7&&(No=0);for(var Oo="",Lo=0;Lo<No;Lo++)Oo+="0";for(Do=Oo+Do,Lo=0;Lo<Do.length-1;Lo+=7){var Co=Do.substr(Lo,7);Lo!=Do.length-7&&(Co="1"+Co),$o+=_o(parseInt(Co,2))}return $o};if(!va.match(/^[0-9.]+$/))throw"malformed oid string: "+va;var bo="",wo=va.split("."),Eo=40*parseInt(wo[0])+parseInt(wo[1]);bo+=_o(Eo),wo.splice(0,2);for(var To=0;To<wo.length;To++)bo+=xo(wo[To]);return bo},u$2.asn1.ASN1Object=function(va){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var _o=this.hV.length/2,xo=_o.toString(16);if(xo.length%2==1&&(xo="0"+xo),_o<128)return xo;var bo=xo.length/2;if(bo>15)throw"ASN.1 length too long to represent by 8x: n = "+_o.toString(16);return(128+bo).toString(16)+xo},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(_o){this.params=_o},va!=null&&va.tlv!=null&&(this.hTLV=va.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(va){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(_o){this.hTLV=null,this.isModified=!0,this.s=_o,this.hV=ie(this.s).toLowerCase()},this.setStringHex=function(_o){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_o},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(typeof va=="string"?this.setString(va):va.str!==void 0?this.setString(va.str):va.hex!==void 0&&this.setStringHex(va.hex))},c$2.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(va){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(_o){var xo=_o.getTime()+6e4*_o.getTimezoneOffset();return new Date(xo)},this.formatDate=function(_o,xo,bo){var wo=this.zeroPadding,Eo=this.localDateToUTC(_o),To=String(Eo.getFullYear());xo=="utc"&&(To=To.substr(2,2));var So=To+wo(String(Eo.getMonth()+1),2)+wo(String(Eo.getDate()),2)+wo(String(Eo.getHours()),2)+wo(String(Eo.getMinutes()),2)+wo(String(Eo.getSeconds()),2);if(bo===!0){var $o=Eo.getMilliseconds();if($o!=0){var Do=wo(String($o),3);So=So+"."+(Do=Do.replace(/[0]+$/,""))}}return So+"Z"},this.zeroPadding=function(_o,xo){return _o.length>=xo?_o:new Array(xo-_o.length+1).join("0")+_o},this.getString=function(){return this.s},this.setString=function(_o){this.hTLV=null,this.isModified=!0,this.s=_o,this.hV=J$1(_o)},this.setByDateValue=function(_o,xo,bo,wo,Eo,To){var So=new Date(Date.UTC(_o,xo-1,bo,wo,Eo,To,0));this.setByDate(So)},this.getFreshValueHex=function(){return this.hV}},c$2.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(va){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(_o){this.hTLV=null,this.isModified=!0,this.asn1Array=_o},this.appendASN1Object=function(_o){this.hTLV=null,this.isModified=!0,this.asn1Array.push(_o)},this.asn1Array=new Array,va!==void 0&&va.array!==void 0&&(this.asn1Array=va.array)},c$2.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(va){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=va==0?"010100":"0101ff"},c$2.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(va){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(_o){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_o)},this.setByInteger=function(_o){var xo=new h$2(String(_o),10);this.setByBigInteger(xo)},this.setValueHex=function(_o){this.hV=_o},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(va.bigint!==void 0?this.setByBigInteger(va.bigint):va.int!==void 0?this.setByInteger(va.int):typeof va=="number"?this.setByInteger(va):va.hex!==void 0&&this.setValueHex(va.hex))},c$2.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(va){if(va!==void 0&&va.obj!==void 0){var _o=u$2.asn1.ASN1Util.newObject(va.obj);va.hex="00"+_o.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(xo){this.hTLV=null,this.isModified=!0,this.hV=xo},this.setUnusedBitsAndHexValue=function(xo,bo){if(xo<0||7<xo)throw"unused bits shall be from 0 to 7: u = "+xo;var wo="0"+xo;this.hTLV=null,this.isModified=!0,this.hV=wo+bo},this.setByBinaryString=function(xo){var bo=8-(xo=xo.replace(/0+$/,"")).length%8;bo==8&&(bo=0);for(var wo=0;wo<=bo;wo++)xo+="0";var Eo="";for(wo=0;wo<xo.length-1;wo+=8){var To=xo.substr(wo,8),So=parseInt(To,2).toString(16);So.length==1&&(So="0"+So),Eo+=So}this.hTLV=null,this.isModified=!0,this.hV="0"+bo+Eo},this.setByBooleanArray=function(xo){for(var bo="",wo=0;wo<xo.length;wo++)xo[wo]==1?bo+="1":bo+="0";this.setByBinaryString(bo)},this.newFalseArray=function(xo){for(var bo=new Array(xo),wo=0;wo<xo;wo++)bo[wo]=!1;return bo},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(typeof va=="string"&&va.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(va):va.hex!==void 0?this.setHexValueIncludingUnusedBits(va.hex):va.bin!==void 0?this.setByBinaryString(va.bin):va.array!==void 0&&this.setByBooleanArray(va.array))},c$2.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(va){if(va!==void 0&&va.obj!==void 0){var _o=u$2.asn1.ASN1Util.newObject(va.obj);va.hex=_o.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,va),this.hT="04"},c$2.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},c$2.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(va){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(_o){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_o},this.setValueOidString=function(_o){var xo=function(bo){var wo=function(No){var Oo=No.toString(16);return Oo.length==1&&(Oo="0"+Oo),Oo},Eo=function(No){var Oo="",Lo=parseInt(No,10).toString(2),Co=7-Lo.length%7;Co==7&&(Co=0);for(var Ro="",jo=0;jo<Co;jo++)Ro+="0";for(Lo=Ro+Lo,jo=0;jo<Lo.length-1;jo+=7){var zo=Lo.substr(jo,7);jo!=Lo.length-7&&(zo="1"+zo),Oo+=wo(parseInt(zo,2))}return Oo};try{if(!bo.match(/^[0-9.]+$/))return null;var To="",So=bo.split("."),$o=40*parseInt(So[0],10)+parseInt(So[1],10);To+=wo($o),So.splice(0,2);for(var Do=0;Do<So.length;Do++)To+=Eo(So[Do]);return To}catch{return null}}(_o);if(xo==null)throw new Error("malformed oid string: "+_o);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=xo},this.setValueName=function(_o){var xo=u$2.asn1.x509.OID.name2oid(_o);if(xo==="")throw new Error("DERObjectIdentifier oidName undefined: "+_o);this.setValueOidString(xo)},this.setValueNameOrOid=function(_o){_o.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(_o):this.setValueName(_o)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_o){typeof _o=="string"?this.setValueNameOrOid(_o):_o.oid!==void 0?this.setValueNameOrOid(_o.oid):_o.name!==void 0?this.setValueNameOrOid(_o.name):_o.hex!==void 0&&this.setValueHex(_o.hex)},va!==void 0&&this.setByParam(va)},c$2.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(va){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(_o){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_o)},this.setByInteger=function(_o){var xo=new h$2(String(_o),10);this.setByBigInteger(xo)},this.setValueHex=function(_o){this.hV=_o},this.getFreshValueHex=function(){return this.hV},va!==void 0&&(va.int!==void 0?this.setByInteger(va.int):typeof va=="number"?this.setByInteger(va):va.hex!==void 0&&this.setValueHex(va.hex))},c$2.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(va){u$2.asn1.DERUTF8String.superclass.constructor.call(this,va),this.hT="0c"},c$2.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(va){u$2.asn1.DERNumericString.superclass.constructor.call(this,va),this.hT="12"},c$2.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(va){u$2.asn1.DERPrintableString.superclass.constructor.call(this,va),this.hT="13"},c$2.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(va){u$2.asn1.DERTeletexString.superclass.constructor.call(this,va),this.hT="14"},c$2.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(va){u$2.asn1.DERIA5String.superclass.constructor.call(this,va),this.hT="16"},c$2.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(va){u$2.asn1.DERIA5String.superclass.constructor.call(this,va),this.hT="1a"},c$2.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(va){u$2.asn1.DERBMPString.superclass.constructor.call(this,va),this.hT="1e"},c$2.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(va){u$2.asn1.DERUTCTime.superclass.constructor.call(this,va),this.hT="17",this.setByDate=function(_o){this.hTLV=null,this.isModified=!0,this.date=_o,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},va!==void 0&&(va.str!==void 0?this.setString(va.str):typeof va=="string"&&va.match(/^[0-9]{12}Z$/)?this.setString(va):va.hex!==void 0?this.setStringHex(va.hex):va.date!==void 0&&this.setByDate(va.date))},c$2.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(va){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,va),this.hT="18",this.withMillis=!1,this.setByDate=function(_o){this.hTLV=null,this.isModified=!0,this.date=_o,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},va!==void 0&&(va.str!==void 0?this.setString(va.str):typeof va=="string"&&va.match(/^[0-9]{14}Z$/)?this.setString(va):va.hex!==void 0?this.setStringHex(va.hex):va.date!==void 0&&this.setByDate(va.date),va.millis===!0&&(this.withMillis=!0))},c$2.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(va){u$2.asn1.DERSequence.superclass.constructor.call(this,va),this.hT="30",this.getFreshValueHex=function(){for(var _o="",xo=0;xo<this.asn1Array.length;xo++)_o+=this.asn1Array[xo].getEncodedHex();return this.hV=_o,this.hV}},c$2.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(va){u$2.asn1.DERSet.superclass.constructor.call(this,va),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var _o=new Array,xo=0;xo<this.asn1Array.length;xo++){var bo=this.asn1Array[xo];_o.push(bo.getEncodedHex())}return this.sortFlag==1&&_o.sort(),this.hV=_o.join(""),this.hV},va!==void 0&&va.sortflag!==void 0&&va.sortflag==0&&(this.sortFlag=!1)},c$2.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(va){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var _o=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(xo,bo,wo){this.hT=bo,this.isExplicit=xo,this.asn1Object=wo,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=wo.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,bo),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(xo){xo.tag!=null&&(this.hT=xo.tag),xo.explicit!=null&&(this.isExplicit=xo.explicit),xo.tage!=null&&(this.hT=xo.tage,this.isExplicit=!0),xo.tagi!=null&&(this.hT=xo.tagi,this.isExplicit=!1),xo.obj!=null&&(xo.obj instanceof _o.ASN1Object?(this.asn1Object=xo.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof xo.obj=="object"&&(this.asn1Object=_o.ASN1Util.newObject(xo.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},va!=null&&this.setByParam(va)},c$2.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var Te=new function(){};function xe(va,_o){for(var xo="",bo=_o/4-va.length,wo=0;wo<bo;wo++)xo+="0";return xo+va}function Ee(va,_o,xo){for(var bo="",wo=0;bo.length<_o;)bo+=re(xo(oe(va+String.fromCharCode.apply(String,[(4278190080&wo)>>24,(16711680&wo)>>16,(65280&wo)>>8,255&wo])))),wo+=1;return bo}function je(va){for(var _o in u$2.crypto.Util.DIGESTINFOHEAD){var xo=u$2.crypto.Util.DIGESTINFOHEAD[_o],bo=xo.length;if(va.substring(0,bo)==xo)return[_o,va.substring(bo)]}return[]}function ze(va){var _o,xo=Te,bo=xo.getChildIdx,wo=xo.getV,Eo=xo.getTLV,To=xo.getVbyList,So=xo.getVbyListEx,$o=xo.getTLVbyList,Do=xo.getTLVbyListEx,No=xo.getIdxbyList,Oo=xo.getIdxbyListEx,Lo=xo.getVidx,Co=xo.getInt,Ro=xo.oidname,jo=xo.hextooidstr,zo=ue;try{_o=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Io=$o(this.hex,0,[0,0]);if(Io.substr(0,2)=="a0"){var Po=$o(Io,0,[0]),Bo=Co(Po,0);if(Bo<0||2<Bo)throw new Error("malformed version field");return this.version=Bo+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return So(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Io=Do(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Io)},this.getAlgorithmIdentifierName=function(Io){for(var Po in _o)if(Io===_o[Po])return Po;return Ro(So(Io,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return $o(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return $o(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Io=To(this.hex,0,[0,4+this.foffset,0]);return Io=Io.replace(/(..)/g,"%$1"),Io=decodeURIComponent(Io)},this.getNotAfter=function(){var Io=To(this.hex,0,[0,4+this.foffset,1]);return Io=Io.replace(/(..)/g,"%$1"),Io=decodeURIComponent(Io)},this.getPublicKeyHex=function(){return xo.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return No(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Io=this.getPublicKeyIdx();return No(this.hex,Io,[1,0],"30")},this.getPublicKey=function(){return we.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Io=$o(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Io)},this.getSignatureValueHex=function(){return To(this.hex,0,[2],"03",!0)},this.verifySignature=function(Io){var Po=this.getSignatureAlgorithmField(),Bo=this.getSignatureValueHex(),ko=$o(this.hex,0,[0],"30"),Uo=new u$2.crypto.Signature({alg:Po});return Uo.init(Io),Uo.updateHex(ko),Uo.verify(Bo)},this.parseExt=function(Io){var Po,Bo,ko;if(Io===void 0){if(ko=this.hex,this.version!==3)return-1;Po=No(ko,0,[0,7,0],"30"),Bo=bo(ko,Po)}else{ko=ue(Io);var Uo=No(ko,0,[0,3,0,0],"06");if(wo(ko,Uo)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);Po=No(ko,0,[0,3,0,1,0],"30"),Bo=bo(ko,Po),this.hex=ko}this.aExtInfo=new Array;for(var Qo=0;Qo<Bo.length;Qo++){var qo={critical:!1},Zo=0;bo(ko,Bo[Qo]).length===3&&(qo.critical=!0,Zo=1),qo.oid=xo.hextooidstr(To(ko,Bo[Qo],[0],"06"));var Xo=No(ko,Bo[Qo],[1+Zo]);qo.vidx=Lo(ko,Xo),this.aExtInfo.push(qo)}},this.getExtInfo=function(Io){var Po=this.aExtInfo,Bo=Io;if(Io.match(/^[0-9.]+$/)||(Bo=u$2.asn1.x509.OID.name2oid(Io)),Bo!==""){for(var ko=0;ko<Po.length;ko++)if(Po[ko].oid===Bo)return Po[ko]}},this.getExtBasicConstraints=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("basicConstraints");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"basicConstraints"};if(Po&&(ko.critical=!0),Io==="3000")return ko;if(Io==="30030101ff")return ko.cA=!0,ko;if(Io.substr(0,12)==="30060101ff02"){var Uo=wo(Io,10),Qo=parseInt(Uo,16);return ko.cA=!0,ko.pathLen=Qo,ko}throw new Error("hExtV parse error: "+Io)},this.getExtKeyUsage=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("keyUsage");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"keyUsage"};return Po&&(ko.critical=!0),ko.names=this.getExtKeyUsageString(Io).split(","),ko},this.getExtKeyUsageBin=function(Io){if(Io===void 0){var Po=this.getExtInfo("keyUsage");if(Po===void 0)return"";Io=Eo(this.hex,Po.vidx)}if(Io.length!=8&&Io.length!=10)throw new Error("malformed key usage value: "+Io);var Bo="000000000000000"+parseInt(Io.substr(6),16).toString(2);return Io.length==8&&(Bo=Bo.slice(-8)),Io.length==10&&(Bo=Bo.slice(-16)),(Bo=Bo.replace(/0+$/,""))==""&&(Bo="0"),Bo},this.getExtKeyUsageString=function(Io){for(var Po=this.getExtKeyUsageBin(Io),Bo=new Array,ko=0;ko<Po.length;ko++)Po.substr(ko,1)=="1"&&Bo.push(ze.KEYUSAGE_NAME[ko]);return Bo.join(",")},this.getExtSubjectKeyIdentifier=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("subjectKeyIdentifier");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"subjectKeyIdentifier"};Po&&(ko.critical=!0);var Uo=wo(Io,0);return ko.kid={hex:Uo},ko},this.getExtAuthorityKeyIdentifier=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("authorityKeyIdentifier");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"authorityKeyIdentifier"};Po&&(ko.critical=!0);for(var Uo=bo(Io,0),Qo=0;Qo<Uo.length;Qo++){var qo=Io.substr(Uo[Qo],2);if(qo==="80"&&(ko.kid={hex:wo(Io,Uo[Qo])}),qo==="a1"){var Zo=Eo(Io,Uo[Qo]),Xo=this.getGeneralNames(Zo);ko.issuer=Xo[0].dn}qo==="82"&&(ko.sn={hex:wo(Io,Uo[Qo])})}return ko},this.getExtExtKeyUsage=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("extKeyUsage");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"extKeyUsage",array:[]};Po&&(ko.critical=!0);for(var Uo=bo(Io,0),Qo=0;Qo<Uo.length;Qo++)ko.array.push(Ro(wo(Io,Uo[Qo])));return ko},this.getExtExtKeyUsageName=function(){var Io=this.getExtInfo("extKeyUsage");if(Io===void 0)return Io;var Po=new Array,Bo=Eo(this.hex,Io.vidx);if(Bo==="")return Po;for(var ko=bo(Bo,0),Uo=0;Uo<ko.length;Uo++)Po.push(Ro(wo(Bo,ko[Uo])));return Po},this.getExtSubjectAltName=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("subjectAltName");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"subjectAltName",array:[]};return Po&&(ko.critical=!0),ko.array=this.getGeneralNames(Io),ko},this.getExtIssuerAltName=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("issuerAltName");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"issuerAltName",array:[]};return Po&&(ko.critical=!0),ko.array=this.getGeneralNames(Io),ko},this.getGeneralNames=function(Io){for(var Po=bo(Io,0),Bo=[],ko=0;ko<Po.length;ko++){var Uo=this.getGeneralName(Eo(Io,Po[ko]));Uo!==void 0&&Bo.push(Uo)}return Bo},this.getGeneralName=function(Io){var Po=Io.substr(0,2),Bo=wo(Io,0),ko=re(Bo);return Po=="81"?{rfc822:ko}:Po=="82"?{dns:ko}:Po=="86"?{uri:ko}:Po=="87"?{ip:ce(Bo)}:Po=="a4"?{dn:this.getX500Name(Bo)}:void 0},this.getExtSubjectAltName2=function(){var Io,Po,Bo,ko=this.getExtInfo("subjectAltName");if(ko===void 0)return ko;for(var Uo=new Array,Qo=Eo(this.hex,ko.vidx),qo=bo(Qo,0),Zo=0;Zo<qo.length;Zo++)Bo=Qo.substr(qo[Zo],2),Io=wo(Qo,qo[Zo]),Bo==="81"&&(Po=ne(Io),Uo.push(["MAIL",Po])),Bo==="82"&&(Po=ne(Io),Uo.push(["DNS",Po])),Bo==="84"&&(Po=ze.hex2dn(Io,0),Uo.push(["DN",Po])),Bo==="86"&&(Po=ne(Io),Uo.push(["URI",Po])),Bo==="87"&&(Po=ce(Io),Uo.push(["IP",Po]));return Uo},this.getExtCRLDistributionPoints=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("cRLDistributionPoints");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"cRLDistributionPoints",array:[]};Po&&(ko.critical=!0);for(var Uo=bo(Io,0),Qo=0;Qo<Uo.length;Qo++){var qo=Eo(Io,Uo[Qo]);ko.array.push(this.getDistributionPoint(qo))}return ko},this.getDistributionPoint=function(Io){for(var Po={},Bo=bo(Io,0),ko=0;ko<Bo.length;ko++){var Uo=Io.substr(Bo[ko],2),Qo=Eo(Io,Bo[ko]);Uo=="a0"&&(Po.dpname=this.getDistributionPointName(Qo))}return Po},this.getDistributionPointName=function(Io){for(var Po={},Bo=bo(Io,0),ko=0;ko<Bo.length;ko++){var Uo=Io.substr(Bo[ko],2),Qo=Eo(Io,Bo[ko]);Uo=="a0"&&(Po.full=this.getGeneralNames(Qo))}return Po},this.getExtCRLDistributionPointsURI=function(){var Io=this.getExtInfo("cRLDistributionPoints");if(Io===void 0)return Io;for(var Po=new Array,Bo=bo(this.hex,Io.vidx),ko=0;ko<Bo.length;ko++)try{var Uo=ne(To(this.hex,Bo[ko],[0,0,0],"86"));Po.push(Uo)}catch{}return Po},this.getExtAIAInfo=function(){var Io=this.getExtInfo("authorityInfoAccess");if(Io===void 0)return Io;for(var Po={ocsp:[],caissuer:[]},Bo=bo(this.hex,Io.vidx),ko=0;ko<Bo.length;ko++){var Uo=To(this.hex,Bo[ko],[0],"06"),Qo=To(this.hex,Bo[ko],[1],"86");Uo==="2b06010505073001"&&Po.ocsp.push(ne(Qo)),Uo==="2b06010505073002"&&Po.caissuer.push(ne(Qo))}return Po},this.getExtAuthorityInfoAccess=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("authorityInfoAccess");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"authorityInfoAccess",array:[]};Po&&(ko.critical=!0);for(var Uo=bo(Io,0),Qo=0;Qo<Uo.length;Qo++){var qo=So(Io,Uo[Qo],[0],"06"),Zo=ne(To(Io,Uo[Qo],[1],"86"));if(qo=="2b06010505073001")ko.array.push({ocsp:Zo});else{if(qo!="2b06010505073002")throw new Error("unknown method: "+qo);ko.array.push({caissuer:Zo})}}return ko},this.getExtCertificatePolicies=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("certificatePolicies");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"certificatePolicies",array:[]};Po&&(ko.critical=!0);for(var Uo=bo(Io,0),Qo=0;Qo<Uo.length;Qo++){var qo=Eo(Io,Uo[Qo]),Zo=this.getPolicyInformation(qo);ko.array.push(Zo)}return ko},this.getPolicyInformation=function(Io){var Po={},Bo=To(Io,0,[0],"06");Po.policyoid=Ro(Bo);var ko=Oo(Io,0,[1],"30");if(ko!=-1){Po.array=[];for(var Uo=bo(Io,ko),Qo=0;Qo<Uo.length;Qo++){var qo=Eo(Io,Uo[Qo]),Zo=this.getPolicyQualifierInfo(qo);Po.array.push(Zo)}}return Po},this.getPolicyQualifierInfo=function(Io){var Po={},Bo=To(Io,0,[0],"06");if(Bo==="2b06010505070201"){var ko=So(Io,0,[1],"16");Po.cps=re(ko)}else if(Bo==="2b06010505070202"){var Uo=$o(Io,0,[1],"30");Po.unotice=this.getUserNotice(Uo)}return Po},this.getUserNotice=function(Io){for(var Po={},Bo=bo(Io,0),ko=0;ko<Bo.length;ko++){var Uo=Eo(Io,Bo[ko]);Uo.substr(0,2)!="30"&&(Po.exptext=this.getDisplayText(Uo))}return Po},this.getDisplayText=function(Io){var Po={};return Po.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Io.substr(0,2)],Po.str=re(wo(Io,0)),Po},this.getExtCRLNumber=function(Io,Po){var Bo={extname:"cRLNumber"};if(Po&&(Bo.critical=!0),Io.substr(0,2)=="02")return Bo.num={hex:wo(Io,0)},Bo;throw new Error("hExtV parse error: "+Io)},this.getExtCRLReason=function(Io,Po){var Bo={extname:"cRLReason"};if(Po&&(Bo.critical=!0),Io.substr(0,2)=="0a")return Bo.code=parseInt(wo(Io,0),16),Bo;throw new Error("hExtV parse error: "+Io)},this.getExtOcspNonce=function(Io,Po){var Bo={extname:"ocspNonce"};Po&&(Bo.critical=!0);var ko=wo(Io,0);return Bo.hex=ko,Bo},this.getExtOcspNoCheck=function(Io,Po){var Bo={extname:"ocspNoCheck"};return Po&&(Bo.critical=!0),Bo},this.getExtAdobeTimeStamp=function(Io,Po){if(Io===void 0&&Po===void 0){var Bo=this.getExtInfo("adobeTimeStamp");if(Bo===void 0)return;Io=Eo(this.hex,Bo.vidx),Po=Bo.critical}var ko={extname:"adobeTimeStamp"};Po&&(ko.critical=!0);var Uo=bo(Io,0);if(Uo.length>1){var Qo=Eo(Io,Uo[1]),qo=this.getGeneralName(Qo);qo.uri!=null&&(ko.uri=qo.uri)}if(Uo.length>2){var Zo=Eo(Io,Uo[2]);Zo=="0101ff"&&(ko.reqauth=!0),Zo=="010100"&&(ko.reqauth=!1)}return ko},this.getX500NameRule=function(Io){for(var Po=null,Bo=[],ko=0;ko<Io.length;ko++)for(var Uo=Io[ko],Qo=0;Qo<Uo.length;Qo++)Bo.push(Uo[Qo]);for(ko=0;ko<Bo.length;ko++){var qo=Bo[ko],Zo=qo.ds,Xo=qo.value,Fo=qo.type;if(Zo!="prn"&&Zo!="utf8"&&Zo!="ia5")return"mixed";if(Zo=="ia5"){if(Fo!="CN")return"mixed";if(u$2.lang.String.isMail(Xo))continue;return"mixed"}if(Fo=="C"){if(Zo=="prn")continue;return"mixed"}if(Po==null)Po=Zo;else if(Po!==Zo)return"mixed"}return Po==null?"prn":Po},this.getX500Name=function(Io){var Po=this.getX500NameArray(Io);return{array:Po,str:this.dnarraytostr(Po)}},this.getX500NameArray=function(Io){for(var Po=[],Bo=bo(Io,0),ko=0;ko<Bo.length;ko++)Po.push(this.getRDN(Eo(Io,Bo[ko])));return Po},this.getRDN=function(Io){for(var Po=[],Bo=bo(Io,0),ko=0;ko<Bo.length;ko++)Po.push(this.getAttrTypeAndValue(Eo(Io,Bo[ko])));return Po},this.getAttrTypeAndValue=function(Io){var Po={type:null,value:null,ds:null},Bo=bo(Io,0),ko=To(Io,Bo[0],[],"06"),Uo=To(Io,Bo[1],[]),Qo=u$2.asn1.ASN1Util.oidHexToInt(ko);return Po.type=u$2.asn1.x509.OID.oid2atype(Qo),Po.ds=this.HEX2STAG[Io.substr(Bo[1],2)],Po.ds!="bmp"?Po.value=ne(Uo):Po.value=le(Uo),Po},this.readCertPEM=function(Io){this.readCertHex(zo(Io))},this.readCertHex=function(Io){this.hex=Io,this.getVersion();try{No(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Io={};return Io.version=this.getVersion(),Io.serial={hex:this.getSerialNumberHex()},Io.sigalg=this.getSignatureAlgorithmField(),Io.issuer=this.getIssuer(),Io.notbefore=this.getNotBefore(),Io.notafter=this.getNotAfter(),Io.subject=this.getSubject(),Io.sbjpubkey=ae(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Io.ext=this.getExtParamArray()),Io.sighex=this.getSignatureValueHex(),Io},this.getExtParamArray=function(Io){Io==null&&Oo(this.hex,0,[0,"[3]"])!=-1&&(Io=Do(this.hex,0,[0,"[3]",0],"30"));for(var Po=[],Bo=bo(Io,0),ko=0;ko<Bo.length;ko++){var Uo=Eo(Io,Bo[ko]),Qo=this.getExtParam(Uo);Qo!=null&&Po.push(Qo)}return Po},this.getExtParam=function(Io){var Po=bo(Io,0).length;if(Po!=2&&Po!=3)throw new Error("wrong number elements in Extension: "+Po+" "+Io);var Bo=jo(To(Io,0,[0],"06")),ko=!1;Po==3&&$o(Io,0,[1])=="0101ff"&&(ko=!0);var Uo=$o(Io,0,[Po-1,0]),Qo=void 0;if(Bo=="2.5.29.14"?Qo=this.getExtSubjectKeyIdentifier(Uo,ko):Bo=="2.5.29.15"?Qo=this.getExtKeyUsage(Uo,ko):Bo=="2.5.29.17"?Qo=this.getExtSubjectAltName(Uo,ko):Bo=="2.5.29.18"?Qo=this.getExtIssuerAltName(Uo,ko):Bo=="2.5.29.19"?Qo=this.getExtBasicConstraints(Uo,ko):Bo=="2.5.29.31"?Qo=this.getExtCRLDistributionPoints(Uo,ko):Bo=="2.5.29.32"?Qo=this.getExtCertificatePolicies(Uo,ko):Bo=="2.5.29.35"?Qo=this.getExtAuthorityKeyIdentifier(Uo,ko):Bo=="2.5.29.37"?Qo=this.getExtExtKeyUsage(Uo,ko):Bo=="1.3.6.1.5.5.7.1.1"?Qo=this.getExtAuthorityInfoAccess(Uo,ko):Bo=="2.5.29.20"?Qo=this.getExtCRLNumber(Uo,ko):Bo=="2.5.29.21"?Qo=this.getExtCRLReason(Uo,ko):Bo=="1.3.6.1.5.5.7.48.1.2"?Qo=this.getExtOcspNonce(Uo,ko):Bo=="1.3.6.1.5.5.7.48.1.5"?Qo=this.getExtOcspNoCheck(Uo,ko):Bo=="1.2.840.113583.1.1.9.1"&&(Qo=this.getExtAdobeTimeStamp(Uo,ko)),Qo!=null)return Qo;var qo={extname:Bo,extn:Uo};return ko&&(qo.critical=!0),qo},this.findExt=function(Io,Po){for(var Bo=0;Bo<Io.length;Bo++)if(Io[Bo].extname==Po)return Io[Bo];return null},this.updateExtCDPFullURI=function(Io,Po){var Bo=this.findExt(Io,"cRLDistributionPoints");if(Bo!=null&&Bo.array!=null){for(var ko=Bo.array,Uo=0;Uo<ko.length;Uo++)if(ko[Uo].dpname!=null&&ko[Uo].dpname.full!=null)for(var Qo=ko[Uo].dpname.full,qo=0;qo<Qo.length;qo++){var Zo=Qo[Uo];Zo.uri!=null&&(Zo.uri=Po)}}},this.updateExtAIAOCSP=function(Io,Po){var Bo=this.findExt(Io,"authorityInfoAccess");if(Bo!=null&&Bo.array!=null)for(var ko=Bo.array,Uo=0;Uo<ko.length;Uo++)ko[Uo].ocsp!=null&&(ko[Uo].ocsp=Po)},this.updateExtAIACAIssuer=function(Io,Po){var Bo=this.findExt(Io,"authorityInfoAccess");if(Bo!=null&&Bo.array!=null)for(var ko=Bo.array,Uo=0;Uo<ko.length;Uo++)ko[Uo].caissuer!=null&&(ko[Uo].caissuer=Po)},this.dnarraytostr=function(Io){return"/"+Io.map(function(Po){return function(Bo){return Bo.map(function(ko){return function(Uo){return Uo.type+"="+Uo.value}(ko).replace(/\+/,"\\+")}).join("+")}(Po).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Io,Po,Bo,ko,Uo=function(Yo){for(var Ko="",ts=Yo.array,Jo=0;Jo<ts.length;Jo++){var rs=ts[Jo];if(Ko+="    policy oid: "+rs.policyoid+`
`,rs.array!==void 0)for(var ls=0;ls<rs.array.length;ls++){var ss=rs.array[ls];ss.cps!==void 0&&(Ko+="    cps: "+ss.cps+`
`)}}return Ko},Qo=function(Yo){for(var Ko="",ts=Yo.array,Jo=0;Jo<ts.length;Jo++){var rs=ts[Jo];try{rs.dpname.full[0].uri!==void 0&&(Ko+="    "+rs.dpname.full[0].uri+`
`)}catch{}try{rs.dname.full[0].dn.hex!==void 0&&(Ko+="    "+ze.hex2dn(rs.dpname.full[0].dn.hex)+`
`)}catch{}}return Ko},qo=function(Yo){for(var Ko="",ts=Yo.array,Jo=0;Jo<ts.length;Jo++){var rs=ts[Jo];rs.caissuer!==void 0&&(Ko+="    caissuer: "+rs.caissuer+`
`),rs.ocsp!==void 0&&(Ko+="    ocsp: "+rs.ocsp+`
`)}return Ko};if(Io=`Basic Fields
`,Io+="  serial number: "+this.getSerialNumberHex()+`
`,Io+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Io+="  issuer: "+this.getIssuerString()+`
`,Io+="  notBefore: "+this.getNotBefore()+`
`,Io+="  notAfter: "+this.getNotAfter()+`
`,Io+="  subject: "+this.getSubjectString()+`
`,Io+=`  subject public key info: 
`,Io+="    key algorithm: "+(Po=this.getPublicKey()).type+`
`,Po.type==="RSA"&&(Io+="    n="+de(Po.n.toString(16)).substr(0,16)+`...
`,Io+="    e="+de(Po.e.toString(16))+`
`),(Bo=this.aExtInfo)!=null){Io+=`X509v3 Extensions:
`;for(var Zo=0;Zo<Bo.length;Zo++){var Xo=Bo[Zo],Fo=u$2.asn1.x509.OID.oid2name(Xo.oid);Fo===""&&(Fo=Xo.oid);var Go="";if(Xo.critical===!0&&(Go="CRITICAL"),Io+="  "+Fo+" "+Go+`:
`,Fo==="basicConstraints"){var Vo=this.getExtBasicConstraints();Vo.cA===void 0?Io+=`    {}
`:(Io+="    cA=true",Vo.pathLen!==void 0&&(Io+=", pathLen="+Vo.pathLen),Io+=`
`)}else if(Fo==="keyUsage")Io+="    "+this.getExtKeyUsageString()+`
`;else if(Fo==="subjectKeyIdentifier")Io+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Fo==="authorityKeyIdentifier"){var Wo=this.getExtAuthorityKeyIdentifier();Wo.kid!==void 0&&(Io+="    kid="+Wo.kid.hex+`
`)}else Fo==="extKeyUsage"?Io+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Fo==="subjectAltName"?Io+="    "+(ko=this.getExtSubjectAltName(),JSON.stringify(ko.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Fo==="cRLDistributionPoints"?Io+=Qo(this.getExtCRLDistributionPoints()):Fo==="authorityInfoAccess"?Io+=qo(this.getExtAuthorityInfoAccess()):Fo==="certificatePolicies"&&(Io+=Uo(this.getExtCertificatePolicies()))}}return Io+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Io+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof va=="string"&&(va.indexOf("-----BEGIN")!=-1?this.readCertPEM(va):u$2.lang.String.isHex(va)&&this.readCertHex(va))}function Ie(va){return l$3.SHA256(va).toString()}Te.getLblen=function(va,_o){if(va.substr(_o+2,1)!="8")return 1;var xo=parseInt(va.substr(_o+3,1));return xo==0?-1:0<xo&&xo<10?xo+1:-2},Te.getL=function(va,_o){var xo=Te.getLblen(va,_o);return xo<1?"":va.substr(_o+2,2*xo)},Te.getVblen=function(va,_o){var xo;return(xo=Te.getL(va,_o))==""?-1:(xo.substr(0,1)==="8"?new h$2(xo.substr(2),16):new h$2(xo,16)).intValue()},Te.getVidx=function(va,_o){var xo=Te.getLblen(va,_o);return xo<0?xo:_o+2*(xo+1)},Te.getV=function(va,_o){var xo=Te.getVidx(va,_o),bo=Te.getVblen(va,_o);return va.substr(xo,2*bo)},Te.getTLV=function(va,_o){return va.substr(_o,2)+Te.getL(va,_o)+Te.getV(va,_o)},Te.getTLVblen=function(va,_o){return 2+2*Te.getLblen(va,_o)+2*Te.getVblen(va,_o)},Te.getNextSiblingIdx=function(va,_o){return Te.getVidx(va,_o)+2*Te.getVblen(va,_o)},Te.getChildIdx=function(va,_o){var xo,bo,wo,Eo=Te,To=[];xo=Eo.getVidx(va,_o),bo=2*Eo.getVblen(va,_o),va.substr(_o,2)=="03"&&(xo+=2,bo-=2),wo=0;for(var So=xo;wo<=bo;){var $o=Eo.getTLVblen(va,So);if((wo+=$o)<=bo&&To.push(So),So+=$o,wo>=bo)break}return To},Te.getNthChildIdx=function(va,_o,xo){return Te.getChildIdx(va,_o)[xo]},Te.getIdxbyList=function(va,_o,xo,bo){var wo,Eo,To=Te;return xo.length==0?bo!==void 0&&va.substr(_o,2)!==bo?-1:_o:(wo=xo.shift())>=(Eo=To.getChildIdx(va,_o)).length?-1:To.getIdxbyList(va,Eo[wo],xo,bo)},Te.getIdxbyListEx=function(va,_o,xo,bo){var wo,Eo,To=Te;if(xo.length==0)return bo!==void 0&&va.substr(_o,2)!==bo?-1:_o;wo=xo.shift(),Eo=To.getChildIdx(va,_o);for(var So=0,$o=0;$o<Eo.length;$o++){var Do=va.substr(Eo[$o],2);if(typeof wo=="number"&&!To.isContextTag(Do)&&So==wo||typeof wo=="string"&&To.isContextTag(Do,wo))return To.getIdxbyListEx(va,Eo[$o],xo,bo);To.isContextTag(Do)||So++}return-1},Te.getTLVbyList=function(va,_o,xo,bo){var wo=Te,Eo=wo.getIdxbyList(va,_o,xo,bo);return Eo==-1||Eo>=va.length?null:wo.getTLV(va,Eo)},Te.getTLVbyListEx=function(va,_o,xo,bo){var wo=Te,Eo=wo.getIdxbyListEx(va,_o,xo,bo);return Eo==-1?null:wo.getTLV(va,Eo)},Te.getVbyList=function(va,_o,xo,bo,wo){var Eo,To,So=Te;return(Eo=So.getIdxbyList(va,_o,xo,bo))==-1||Eo>=va.length?null:(To=So.getV(va,Eo),wo===!0&&(To=To.substr(2)),To)},Te.getVbyListEx=function(va,_o,xo,bo,wo){var Eo,To,So=Te;return(Eo=So.getIdxbyListEx(va,_o,xo,bo))==-1?null:(To=So.getV(va,Eo),va.substr(Eo,2)=="03"&&wo!==!1&&(To=To.substr(2)),To)},Te.getInt=function(va,_o,xo){xo==null&&(xo=-1);try{var bo=va.substr(_o,2);if(bo!="02"&&bo!="03")return xo;var wo=Te.getV(va,_o);return bo=="02"?parseInt(wo,16):function(Eo){try{var To=Eo.substr(0,2);if(To=="00")return parseInt(Eo.substr(2),16);var So=parseInt(To,16),$o=Eo.substr(2),Do=parseInt($o,16).toString(2);return Do=="0"&&(Do="00000000"),Do=Do.slice(0,0-So),parseInt(Do,2)}catch{return-1}}(wo)}catch{return xo}},Te.getOID=function(va,_o,xo){xo==null&&(xo=null);try{return va.substr(_o,2)!="06"?xo:function(bo){if(!he(bo))return null;try{var wo=[],Eo=bo.substr(0,2),To=parseInt(Eo,16);wo[0]=new String(Math.floor(To/40)),wo[1]=new String(To%40);for(var So=bo.substr(2),$o=[],Do=0;Do<So.length/2;Do++)$o.push(parseInt(So.substr(2*Do,2),16));var No=[],Oo="";for(Do=0;Do<$o.length;Do++)128&$o[Do]?Oo+=pe((127&$o[Do]).toString(2),7):(Oo+=pe((127&$o[Do]).toString(2),7),No.push(new String(parseInt(Oo,2))),Oo="");var Lo=wo.join(".");return No.length>0&&(Lo=Lo+"."+No.join(".")),Lo}catch{return null}}(Te.getV(va,_o))}catch{return xo}},Te.getOIDName=function(va,_o,xo){xo==null&&(xo=null);try{var bo=Te.getOID(va,_o,xo);if(bo==xo)return xo;var wo=u$2.asn1.x509.OID.oid2name(bo);return wo==""?bo:wo}catch{return xo}},Te.getString=function(va,_o,xo){xo==null&&(xo=null);try{return re(Te.getV(va,_o))}catch{return xo}},Te.hextooidstr=function(va){var _o=function(Oo,Lo){return Oo.length>=Lo?Oo:new Array(Lo-Oo.length+1).join("0")+Oo},xo=[],bo=va.substr(0,2),wo=parseInt(bo,16);xo[0]=new String(Math.floor(wo/40)),xo[1]=new String(wo%40);for(var Eo=va.substr(2),To=[],So=0;So<Eo.length/2;So++)To.push(parseInt(Eo.substr(2*So,2),16));var $o=[],Do="";for(So=0;So<To.length;So++)128&To[So]?Do+=_o((127&To[So]).toString(2),7):(Do+=_o((127&To[So]).toString(2),7),$o.push(new String(parseInt(Do,2))),Do="");var No=xo.join(".");return $o.length>0&&(No=No+"."+$o.join(".")),No},Te.dump=function(va,_o,xo,bo){var wo=Te,Eo=wo.getV,To=wo.dump,So=wo.getChildIdx,$o=va;va instanceof u$2.asn1.ASN1Object&&($o=va.getEncodedHex());var Do=function(qo,Zo){return qo.length<=2*Zo?qo:qo.substr(0,Zo)+"..(total "+qo.length/2+"bytes).."+qo.substr(qo.length-Zo,Zo)};_o===void 0&&(_o={ommit_long_octet:32}),xo===void 0&&(xo=0),bo===void 0&&(bo="");var No,Oo=_o.ommit_long_octet;if((No=$o.substr(xo,2))=="01")return(Lo=Eo($o,xo))=="00"?bo+`BOOLEAN FALSE
`:bo+`BOOLEAN TRUE
`;if(No=="02")return bo+"INTEGER "+Do(Lo=Eo($o,xo),Oo)+`
`;if(No=="03"){var Lo=Eo($o,xo);if(wo.isASN1HEX(Lo.substr(2))){var Co=bo+`BITSTRING, encapsulates
`;return Co+=To(Lo.substr(2),_o,0,bo+"  ")}return bo+"BITSTRING "+Do(Lo,Oo)+`
`}if(No=="04")return Lo=Eo($o,xo),wo.isASN1HEX(Lo)?(Co=bo+`OCTETSTRING, encapsulates
`,Co+=To(Lo,_o,0,bo+"  ")):bo+"OCTETSTRING "+Do(Lo,Oo)+`
`;if(No=="05")return bo+`NULL
`;if(No=="06"){var Ro=Eo($o,xo),jo=u$2.asn1.ASN1Util.oidHexToInt(Ro),zo=u$2.asn1.x509.OID.oid2name(jo),Io=jo.replace(/\./g," ");return zo!=""?bo+"ObjectIdentifier "+zo+" ("+Io+`)
`:bo+"ObjectIdentifier ("+Io+`)
`}if(No=="0a")return bo+"ENUMERATED "+parseInt(Eo($o,xo))+`
`;if(No=="0c")return bo+"UTF8String '"+ne(Eo($o,xo))+`'
`;if(No=="13")return bo+"PrintableString '"+ne(Eo($o,xo))+`'
`;if(No=="14")return bo+"TeletexString '"+ne(Eo($o,xo))+`'
`;if(No=="16")return bo+"IA5String '"+ne(Eo($o,xo))+`'
`;if(No=="17")return bo+"UTCTime "+ne(Eo($o,xo))+`
`;if(No=="18")return bo+"GeneralizedTime "+ne(Eo($o,xo))+`
`;if(No=="1a")return bo+"VisualString '"+ne(Eo($o,xo))+`'
`;if(No=="1e")return bo+"BMPString '"+le(Eo($o,xo))+`'
`;if(No=="30"){if($o.substr(xo,4)=="3000")return bo+`SEQUENCE {}
`;Co=bo+`SEQUENCE
`;var Po=_o;if(((Uo=So($o,xo)).length==2||Uo.length==3)&&$o.substr(Uo[0],2)=="06"&&$o.substr(Uo[Uo.length-1],2)=="04"){zo=wo.oidname(Eo($o,Uo[0]));var Bo=JSON.parse(JSON.stringify(_o));Bo.x509ExtName=zo,Po=Bo}for(var ko=0;ko<Uo.length;ko++)Co+=To($o,Po,Uo[ko],bo+"  ");return Co}if(No=="31"){Co=bo+`SET
`;var Uo=So($o,xo);for(ko=0;ko<Uo.length;ko++)Co+=To($o,_o,Uo[ko],bo+"  ");return Co}if((128&(No=parseInt(No,16)))!=0){var Qo=31&No;if((32&No)!=0){for(Co=bo+"["+Qo+`]
`,Uo=So($o,xo),ko=0;ko<Uo.length;ko++)Co+=To($o,_o,Uo[ko],bo+"  ");return Co}if(Lo=Eo($o,xo),Te.isASN1HEX(Lo)){var Co=bo+"["+Qo+`]
`;return Co+=To(Lo,_o,0,bo+"  ")}return(Lo.substr(0,8)=="68747470"||_o.x509ExtName==="subjectAltName"&&Qo==2)&&(Lo=ne(Lo)),Co=bo+"["+Qo+"] "+Lo+`
`}return bo+"UNKNOWN("+No+") "+Eo($o,xo)+`
`},Te.isContextTag=function(va,_o){var xo,bo;va=va.toLowerCase();try{xo=parseInt(va,16)}catch{return-1}if(_o===void 0)return(192&xo)==128;try{return _o.match(/^\[[0-9]+\]$/)!=null&&!((bo=parseInt(_o.substr(1,_o.length-1),10))>31)&&(192&xo)==128&&(31&xo)==bo}catch{return!1}},Te.isASN1HEX=function(va){var _o=Te;if(va.length%2==1)return!1;var xo=_o.getVblen(va,0),bo=va.substr(0,2),wo=_o.getL(va,0);return va.length-bo.length-wo.length==2*xo},Te.checkStrictDER=function(va,_o,xo,bo,wo){var Eo=Te;if(xo===void 0){if(typeof va!="string")throw new Error("not hex string");if(va=va.toLowerCase(),!u$2.lang.String.isHex(va))throw new Error("not hex string");xo=va.length,wo=(bo=va.length/2)<128?1:Math.ceil(bo.toString(16))+1}if(Eo.getL(va,_o).length>2*wo)throw new Error("L of TLV too long: idx="+_o);var To=Eo.getVblen(va,_o);if(To>bo)throw new Error("value of L too long than hex: idx="+_o);var So=Eo.getTLV(va,_o),$o=So.length-2-Eo.getL(va,_o).length;if($o!==2*To)throw new Error("V string length and L's value not the same:"+$o+"/"+2*To);if(_o===0&&va.length!=So.length)throw new Error("total length and TLV length unmatch:"+va.length+"!="+So.length);var Do=va.substr(_o,2);if(Do==="02"){var No=Eo.getVidx(va,_o);if(va.substr(No,2)=="00"&&va.charCodeAt(No+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Do,16)){for(var Oo=Eo.getVblen(va,_o),Lo=0,Co=Eo.getChildIdx(va,_o),Ro=0;Ro<Co.length;Ro++)Lo+=Eo.getTLV(va,Co[Ro]).length,Eo.checkStrictDER(va,Co[Ro],xo,bo,wo);if(2*Oo!=Lo)throw new Error("sum of children's TLV length and L unmatch: "+2*Oo+"!="+Lo)}},Te.oidname=function(va){var _o=u$2.asn1;u$2.lang.String.isHex(va)&&(va=_o.ASN1Util.oidHexToInt(va));var xo=_o.x509.OID.oid2name(va);return xo===""&&(xo=va),xo},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.x509!==void 0&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(va){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERBitString,bo=_o.DERSequence,wo=_o.x509,Eo=wo.TBSCertificate,To=wo.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(So){this.params=So},this.sign=function(){var So=this.params,$o=So.sigalg;So.sigalg.name!=null&&($o=So.sigalg.name);var Do=So.tbsobj.getEncodedHex(),No=new u$2.crypto.Signature({alg:$o});No.init(So.cakey),No.updateHex(Do),So.sighex=No.sign()},this.getPEM=function(){return ae(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var So=this.params;if(So.tbsobj!=null&&So.tbsobj!=null||(So.tbsobj=new Eo(So)),So.sighex==null&&So.cakey!=null&&this.sign(),So.sighex==null)throw new Error("sighex or cakey parameter not defined");var $o=[];return $o.push(So.tbsobj),$o.push(new To({name:So.sigalg})),$o.push(new xo({hex:"00"+So.sighex})),new bo({array:$o}).getEncodedHex()},va!=null&&(this.params=va)},Ae(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(va){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.x509,bo=_o.DERTaggedObject,wo=_o.DERInteger,Eo=_o.DERSequence,To=xo.AlgorithmIdentifier,So=xo.Time,$o=xo.X500Name,Do=xo.Extensions,No=xo.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Oo){this.params=Oo},this.getEncodedHex=function(){var Oo=[],Lo=this.params;if(Lo.version!=null||Lo.version!=1){var Co=2;Lo.version!=null&&(Co=Lo.version-1);var Ro=new bo({obj:new wo({int:Co})});Oo.push(Ro)}return Oo.push(new wo(Lo.serial)),Oo.push(new To({name:Lo.sigalg})),Oo.push(new $o(Lo.issuer)),Oo.push(new Eo({array:[new So(Lo.notbefore),new So(Lo.notafter)]})),Oo.push(new $o(Lo.subject)),Oo.push(new No(we.getKey(Lo.sbjpubkey))),Lo.ext!==void 0&&Lo.ext.length>0&&Oo.push(new bo({tag:"a3",obj:new Do(Lo.ext)})),new u$2.asn1.DERSequence({array:Oo}).getEncodedHex()},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(va){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERSequence,bo=_o.x509;this.aParam=[],this.setByParam=function(wo){this.aParam=wo},this.getEncodedHex=function(){for(var wo=[],Eo=0;Eo<this.aParam.length;Eo++){var To=this.aParam[Eo],So=To.extname,$o=null;if(To.extn!=null)$o=new bo.PrivateExtension(To);else if(So=="subjectKeyIdentifier")$o=new bo.SubjectKeyIdentifier(To);else if(So=="keyUsage")$o=new bo.KeyUsage(To);else if(So=="subjectAltName")$o=new bo.SubjectAltName(To);else if(So=="issuerAltName")$o=new bo.IssuerAltName(To);else if(So=="basicConstraints")$o=new bo.BasicConstraints(To);else if(So=="cRLDistributionPoints")$o=new bo.CRLDistributionPoints(To);else if(So=="certificatePolicies")$o=new bo.CertificatePolicies(To);else if(So=="authorityKeyIdentifier")$o=new bo.AuthorityKeyIdentifier(To);else if(So=="extKeyUsage")$o=new bo.ExtKeyUsage(To);else if(So=="authorityInfoAccess")$o=new bo.AuthorityInfoAccess(To);else if(So=="cRLNumber")$o=new bo.CRLNumber(To);else if(So=="cRLReason")$o=new bo.CRLReason(To);else if(So=="ocspNonce")$o=new bo.OCSPNonce(To);else if(So=="ocspNoCheck")$o=new bo.OCSPNoCheck(To);else if(So=="adobeTimeStamp")$o=new bo.AdobeTimeStamp(To);else{if(So!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(To));$o=new bo.SubjectDirectoryAttributes(To)}$o!=null&&wo.push($o)}return new xo({array:wo}).getEncodedHex()},va!=null&&this.setByParam(va)},Ae(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(va){u$2.asn1.x509.Extension.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERObjectIdentifier,bo=_o.DEROctetString;_o.DERBitString;var wo=_o.DERBoolean,Eo=_o.DERSequence;this.getEncodedHex=function(){var To=new xo({oid:this.oid}),So=new bo({hex:this.getExtnValueHex()}),$o=new Array;return $o.push(To),this.critical&&$o.push(new wo),$o.push(So),new Eo({array:$o}).getEncodedHex()},this.critical=!1,va!==void 0&&va.critical!==void 0&&(this.critical=va.critical)},Ae(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(va){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,va);var _o=ze.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",va!==void 0&&(va.bin!==void 0&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(va)),va.names!==void 0&&va.names.length!==void 0)){for(var xo=va.names,bo="000000000",wo=0;wo<xo.length;wo++)for(var Eo=0;Eo<_o.length;Eo++)xo[wo]===_o[Eo]&&(bo=bo.substring(0,Eo)+"1"+bo.substring(Eo+1,bo.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:bo})}},Ae(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(va){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.DERBoolean,bo=_o.DERInteger,wo=_o.DERSequence;this.getExtnValueHex=function(){var Eo=new Array;this.cA&&Eo.push(new xo),this.pathLen>-1&&Eo.push(new bo({int:this.pathLen}));var To=new wo({array:Eo});return this.asn1ExtnValue=To,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,va!==void 0&&(va.cA!==void 0&&(this.cA=va.cA),va.pathLen!==void 0&&(this.pathLen=va.pathLen))},Ae(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(va){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(bo){for(var wo=[],Eo=0;Eo<bo.length;Eo++)if(bo[Eo]instanceof u$2.asn1.ASN1Object)wo.push(bo[Eo]);else{var To=new xo.DistributionPoint(bo[Eo]);wo.push(To)}this.asn1ExtnValue=new _o.DERSequence({array:wo})},this.setByOneURI=function(bo){var wo=new xo.DistributionPoint({fulluri:bo});this.setByDPArray([wo])},this.oid="2.5.29.31",va!==void 0&&(va.array!==void 0?this.setByDPArray(va.array):va.uri!==void 0&&this.setByOneURI(va.uri))},Ae(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(va){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.x509.DistributionPointName;this.getEncodedHex=function(){var bo=new _o.DERSequence;if(this.asn1DP!=null){var wo=new _o.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});bo.appendASN1Object(wo)}return this.hTLV=bo.getEncodedHex(),this.hTLV},va!==void 0&&(va.dpobj!==void 0?this.asn1DP=va.dpobj:va.dpname!==void 0?this.asn1DP=new xo(va.dpname):va.fulluri!==void 0&&(this.asn1DP=new xo({full:[{uri:va.fulluri}]})))},Ae(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(va){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new xo({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},va!==void 0)if(_o.x509.GeneralNames.prototype.isPrototypeOf(va))this.type="full",this.tag="a0",this.asn1V=va;else{if(va.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new _o.x509.GeneralNames(va.full)}},Ae(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(va){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.x509,bo=_o.DERSequence,wo=xo.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Eo=[],To=0;To<this.params.array.length;To++)Eo.push(new wo(this.params.array[To]));var So=new bo({array:Eo});return this.asn1ExtnValue=So,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(va){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.DERSequence,bo=_o.DERObjectIdentifier,wo=_o.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Eo=[new bo(this.params.policyoid)];if(this.params.array!==void 0){for(var To=[],So=0;So<this.params.array.length;So++)To.push(new wo(this.params.array[So]));To.length>0&&Eo.push(new xo({array:To}))}return new xo({array:Eo}).getEncodedHex()},va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(va){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.DERSequence,bo=_o.DERIA5String,wo=_o.DERObjectIdentifier,Eo=_o.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new xo({array:[new wo({oid:"1.3.6.1.5.5.7.2.1"}),new bo({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new xo({array:[new wo({oid:"1.3.6.1.5.5.7.2.2"}),new Eo(this.params.unotice)]}).getEncodedHex():void 0},va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(va){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,va);var _o=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var xo=u$2.asn1.x509.DisplayText,bo=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var wo=[];return this.params.noticeref!==void 0&&wo.push(new bo(this.params.noticeref)),this.params.exptext!==void 0&&wo.push(new xo(this.params.exptext)),new _o({array:wo}).getEncodedHex()},va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(va){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,va);var _o=u$2.asn1.DERSequence,xo=u$2.asn1.DERInteger,bo=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var wo=[];if(this.params.org!==void 0&&wo.push(new bo(this.params.org)),this.params.noticenum!==void 0){for(var Eo=[],To=this.params.noticenum,So=0;So<To.length;So++)Eo.push(new xo(To[So]));wo.push(new _o({array:Eo}))}if(wo.length==0)throw new Error("parameter is empty");return new _o({array:wo}).getEncodedHex()},va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(va){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,va),this.hT="0c",va!==void 0&&(va.type==="ia5"?this.hT="16":va.type==="vis"?this.hT="1a":va.type==="bmp"&&(this.hT="1e"))},Ae(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(va){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,va);var _o=u$2.asn1;this.setPurposeArray=function(xo){this.asn1ExtnValue=new _o.DERSequence;for(var bo=0;bo<xo.length;bo++){var wo=new _o.DERObjectIdentifier(xo[bo]);this.asn1ExtnValue.appendASN1Object(wo)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",va!==void 0&&va.array!==void 0&&this.setPurposeArray(va.array)},Ae(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(va){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,va);var _o=u$2,xo=_o.asn1,bo=xo.DERTaggedObject,wo=xo.x509.GeneralNames;_o.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Eo=new Array;this.asn1KID&&Eo.push(new bo({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Eo.push(new bo({explicit:!1,tag:"a1",obj:new wo([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Eo.push(new bo({explicit:!1,tag:"82",obj:this.asn1CertSN}));var To=new xo.DERSequence({array:Eo});return this.asn1ExtnValue=To,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Eo){if(Eo.str!==void 0||Eo.hex!==void 0)this.asn1KID=new u$2.asn1.DEROctetString(Eo);else if(typeof Eo=="object"&&u$2.crypto.Util.isKey(Eo)||typeof Eo=="string"&&Eo.indexOf("BEGIN ")!=-1){var To=Eo;typeof Eo=="string"&&(To=we.getKey(Eo));var So=we.getKeyID(To);this.asn1KID=new u$2.asn1.DEROctetString({hex:So})}},this.setCertIssuerByParam=function(Eo){Eo.str!==void 0||Eo.ldapstr!==void 0||Eo.hex!==void 0||Eo.certsubject!==void 0||Eo.certissuer!==void 0?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(Eo):typeof Eo=="string"&&Eo.indexOf("BEGIN ")!=-1&&Eo.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:Eo}))},this.setCertSNByParam=function(Eo){if(Eo.str!==void 0||Eo.bigint!==void 0||Eo.hex!==void 0)this.asn1CertSN=new u$2.asn1.DERInteger(Eo);else if(typeof Eo=="string"&&Eo.indexOf("BEGIN ")!=-1&&Eo.indexOf("CERTIFICATE")){var To=new ze;To.readCertPEM(Eo);var So=To.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:So})}},this.oid="2.5.29.35",va!==void 0&&(va.kid!==void 0&&this.setKIDByParam(va.kid),va.issuer!==void 0&&this.setCertIssuerByParam(va.issuer),va.sn!==void 0&&this.setCertSNByParam(va.sn),va.issuersn!==void 0&&typeof va.issuersn=="string"&&va.issuersn.indexOf("BEGIN ")!=-1&&va.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(va.issuersn),this.setCertIssuerByParam(va.issuersn)))},Ae(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(va){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,va);var _o=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(xo){if(xo.str!==void 0||xo.hex!==void 0)this.asn1KID=new _o(xo);else if(typeof xo=="object"&&u$2.crypto.Util.isKey(xo)||typeof xo=="string"&&xo.indexOf("BEGIN")!=-1){var bo=xo;typeof xo=="string"&&(bo=we.getKey(xo));var wo=we.getKeyID(bo);this.asn1KID=new u$2.asn1.DEROctetString({hex:wo})}},this.oid="2.5.29.14",va!==void 0&&va.kid!==void 0&&this.setKIDByParam(va.kid)},Ae(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(va){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,va),this.setAccessDescriptionArray=function(_o){for(var xo=new Array,bo=u$2.asn1,wo=bo.DERSequence,Eo=bo.DERObjectIdentifier,To=bo.x509.GeneralName,So=0;So<_o.length;So++){var $o,Do=_o[So];if(Do.ocsp!==void 0)$o=new wo({array:[new Eo({oid:"1.3.6.1.5.5.7.48.1"}),new To({uri:Do.ocsp})]});else{if(Do.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Do));$o=new wo({array:[new Eo({oid:"1.3.6.1.5.5.7.48.2"}),new To({uri:Do.caissuer})]})}xo.push($o)}this.asn1ExtnValue=new wo({array:xo})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",va!==void 0&&va.array!==void 0&&this.setAccessDescriptionArray(va.array)},Ae(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(va){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,va),this.setNameArray=function(_o){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(_o)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",va!==void 0&&va.array!==void 0&&this.setNameArray(va.array)},Ae(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(va){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,va),this.setNameArray=function(_o){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(_o)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",va!==void 0&&va.array!==void 0&&this.setNameArray(va.array)},Ae(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(va){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.DERSequence,bo=_o.ASN1Util.newObject,wo=_o.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Eo=[],To=0;To<this.params.array.length;To++){var So=this.params.array[To],$o={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(So.attr=="dateOfBirth")$o.seq[0].oid=wo(So.attr),$o.seq[1].set[0]={gentime:So.str};else if(So.attr=="placeOfBirth")$o.seq[0].oid=wo(So.attr),$o.seq[1].set[0]={utf8str:So.str};else if(So.attr=="gender")$o.seq[0].oid=wo(So.attr),$o.seq[1].set[0]={prnstr:So.str};else if(So.attr=="countryOfCitizenship")$o.seq[0].oid=wo(So.attr),$o.seq[1].set[0]={prnstr:So.str};else{if(So.attr!="countryOfResidence")throw new Error("unsupported attribute: "+So.attr);$o.seq[0].oid=wo(So.attr),$o.seq[1].set[0]={prnstr:So.str}}Eo.push(new bo($o))}var Do=new xo({array:Eo});return this.asn1ExtnValue=Do,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",va!==void 0&&(this.params=va)},Ae(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(va){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,va);var _o=u$2,xo=_o.lang.String.isHex,bo=_o.asn1,wo=bo.x509.OID.name2oid,Eo=bo.ASN1Util.newObject;this.params=null,this.setByParam=function(To){this.oid=wo(To.extname),this.params=To},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var To=this.params.extn;if(typeof To=="string"&&xo(To))return To;if(typeof To=="object")try{return Eo(To).getEncodedHex()}catch{}throw new Error("unsupported extn value")},va!=null&&this.setByParam(va)},Ae(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(va){u$2.asn1.x509.CRL.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERSequence,bo=_o.DERBitString,wo=_o.x509,Eo=wo.AlgorithmIdentifier,To=wo.TBSCertList;this.params=void 0,this.setByParam=function(So){this.params=So},this.sign=function(){var So=new To(this.params).getEncodedHex(),$o=new u$2.crypto.Signature({alg:this.params.sigalg});$o.init(this.params.cakey),$o.updateHex(So);var Do=$o.sign();this.params.sighex=Do},this.getPEM=function(){return ae(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var So=this.params;if(So.tbsobj==null&&(So.tbsobj=new To(So)),So.sighex==null&&So.cakey!=null&&this.sign(),So.sighex==null)throw new Error("sighex or cakey parameter not defined");var $o=[];return $o.push(So.tbsobj),$o.push(new Eo({name:So.sigalg})),$o.push(new bo({hex:"00"+So.sighex})),new xo({array:$o}).getEncodedHex()},va!=null&&(this.params=va)},Ae(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(va){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERInteger,bo=_o.DERSequence,wo=_o.DERTaggedObject;_o.DERObjectIdentifier;var Eo=_o.x509,To=Eo.AlgorithmIdentifier,So=Eo.Time,$o=Eo.Extensions,Do=Eo.X500Name;this.params=null,this.setByParam=function(No){this.params=No},this.getRevCertSequence=function(){for(var No=[],Oo=this.params.revcert,Lo=0;Lo<Oo.length;Lo++){var Co=[new xo(Oo[Lo].sn),new So(Oo[Lo].date)];Oo[Lo].ext!=null&&Co.push(new $o(Oo[Lo].ext)),No.push(new bo({array:Co}))}return new bo({array:No})},this.getEncodedHex=function(){var No=[],Oo=this.params;if(Oo.version!=null){var Lo=Oo.version-1,Co=new xo({int:Lo});No.push(Co)}if(No.push(new To({name:Oo.sigalg})),No.push(new Do(Oo.issuer)),No.push(new So(Oo.thisupdate)),Oo.nextupdate!=null&&No.push(new So(Oo.nextupdate)),Oo.revcert!=null&&No.push(this.getRevCertSequence()),Oo.ext!=null){var Ro=new $o(Oo.ext);No.push(new wo({tag:"a0",explicit:!0,obj:Ro}))}return new bo({array:No}).getEncodedHex()},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(va){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var _o=u$2.asn1;this.setCertSerial=function(xo){this.sn=new _o.DERInteger(xo)},this.setRevocationDate=function(xo){this.time=new _o.x509.Time(xo)},this.getEncodedHex=function(){var xo=new _o.DERSequence({array:[this.sn,this.time]});return this.TLV=xo.getEncodedHex(),this.TLV},va!==void 0&&(va.time!==void 0&&this.setRevocationDate(va.time),va.sn!==void 0&&this.setCertSerial(va.sn))},Ae(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(va){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",va!=null&&(this.params=va)},Ae(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(va){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",va!=null&&(this.params=va)},Ae(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(va){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",va!=null&&(this.params=va)},Ae(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(va){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,va),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",va!=null&&(this.params=va)},Ae(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(va){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,va);var _o=u$2.asn1,xo=_o.DERInteger,bo=_o.DERBoolean,wo=_o.DERSequence,Eo=_o.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var To=this.params,So=[new xo(1)];return So.push(new Eo({uri:To.uri})),To.reqauth!=null&&So.push(new bo(To.reqauth)),this.asn1ExtnValue=new wo({array:So}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(va){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _o=u$2.asn1,xo=_o.x509,bo=xo.RDN;this.setByString=function(wo,Eo){Eo!==void 0&&(this.sRule=Eo);var To=wo.split("/");To.shift();for(var So=[],$o=0;$o<To.length;$o++)if(To[$o].match(/^[^=]+=.+$/))So.push(To[$o]);else{var Do=So.length-1;So[Do]=So[Do]+"/"+To[$o]}for($o=0;$o<So.length;$o++)this.asn1Array.push(new bo({str:So[$o],rule:this.sRule}))},this.setByLdapString=function(wo,Eo){Eo!==void 0&&(this.sRule=Eo);var To=xo.X500Name.ldapToCompat(wo);this.setByString(To,Eo)},this.setByObject=function(wo,Eo){for(var To in Eo!==void 0&&(this.sRule=Eo),wo)if(wo.hasOwnProperty(To)){var So=new bo({str:To+"="+wo[To],rule:this.sRule});this.asn1Array?this.asn1Array.push(So):this.asn1Array=[So]}},this.setByParam=function(wo){var Eo;wo.rule!==void 0&&(this.sRule=wo.rule),wo.array!==void 0?this.paramArray=wo.array:wo.str!==void 0?this.setByString(wo.str):wo.ldapstr!==void 0?this.setByLdapString(wo.ldapstr):wo.hex!==void 0?this.hTLV=wo.hex:wo.certissuer!==void 0?((Eo=new ze).readCertPEM(wo.certissuer),this.hTLV=Eo.getIssuerHex()):wo.certsubject!==void 0?((Eo=new ze).readCertPEM(wo.certsubject),this.hTLV=Eo.getSubjectHex()):typeof wo=="object"&&wo.certsubject===void 0&&wo.certissuer===void 0&&this.setByObject(wo)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var wo=0;wo<this.paramArray.length;wo++){var Eo={array:this.paramArray[wo]};this.sRule!="utf8"&&(Eo.rule=this.sRule);var To=new bo(Eo);this.asn1Array.push(To)}var So=new _o.DERSequence({array:this.asn1Array});return this.hTLV=So.getEncodedHex(),this.hTLV},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(va){if(va.substr(0,1)!=="/")throw"malformed input";var _o=(va=va.substr(1)).split("/");return _o.reverse(),(_o=_o.map(function(xo){return xo.replace(/,/,"\\,")})).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(va){return u$2.asn1.x509.X500Name.compatToLDAP(va)},u$2.asn1.x509.X500Name.ldapToCompat=function(va){for(var _o=va.split(","),xo=!1,bo=[],wo=0;_o.length>0;wo++){var Eo=_o.shift();if(xo===!0){var To=(bo.pop()+","+Eo).replace(/\\,/g,",");bo.push(To),xo=!1}else bo.push(Eo);Eo.substr(-1,1)==="\\"&&(xo=!0)}return(bo=bo.map(function(So){return So.replace("/","\\/")})).reverse(),"/"+bo.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(va){return u$2.asn1.x509.X500Name.ldapToCompat(va)},u$2.asn1.x509.RDN=function(va){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _o=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(xo){xo.rule!==void 0&&(this.sRule=xo.rule),xo.str!==void 0&&this.addByMultiValuedString(xo.str),xo.array!==void 0&&(this.paramArray=xo.array)},this.addByString=function(xo){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:xo,rule:this.sRule}))},this.addByMultiValuedString=function(xo){for(var bo=u$2.asn1.x509.RDN.parseString(xo),wo=0;wo<bo.length;wo++)this.addByString(bo[wo])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var xo=0;xo<this.paramArray.length;xo++){var bo=this.paramArray[xo];bo.rule!==void 0&&this.sRule!="utf8"&&(bo.rule=this.sRule);var wo=new _o(bo);this.asn1Array.push(wo)}var Eo=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=Eo.getEncodedHex(),this.TLV},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(va){for(var _o=va.split(/\+/),xo=!1,bo=[],wo=0;_o.length>0;wo++){var Eo=_o.shift();if(xo===!0){var To=(bo.pop()+"+"+Eo).replace(/\\\+/g,"+");bo.push(To),xo=!1}else bo.push(Eo);Eo.substr(-1,1)==="\\"&&(xo=!0)}var So=!1,$o=[];for(wo=0;bo.length>0;wo++){if(Eo=bo.shift(),So===!0){var Do=$o.pop();Eo.match(/"$/)?(To=(Do+"+"+Eo).replace(/^([^=]+)="(.*)"$/,"$1=$2"),$o.push(To),So=!1):$o.push(Do+"+"+Eo)}else $o.push(Eo);Eo.match(/^[^=]+="/)&&(So=!0)}return $o},u$2.asn1.x509.AttributeTypeAndValue=function(va){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var _o=u$2,xo=_o.asn1,bo=xo.DERSequence,wo=xo.DERUTF8String,Eo=xo.DERPrintableString,To=xo.DERTeletexString,So=xo.DERIA5String,$o=xo.DERVisibleString,Do=xo.DERBMPString,No=_o.lang.String.isMail,Oo=_o.lang.String.isPrintable;this.setByParam=function(Lo){if(Lo.rule!==void 0&&(this.sRule=Lo.rule),Lo.ds!==void 0&&(this.dsType=Lo.ds),Lo.value===void 0&&Lo.str!==void 0){var Co=Lo.str.match(/^([^=]+)=(.+)$/);if(!Co)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Co[1],this.sValue=Co[2]}else this.sType=Lo.type,this.sValue=Lo.value},this.setByString=function(Lo,Co){Co!==void 0&&(this.sRule=Co);var Ro=Lo.match(/^([^=]+)=(.+)$/);if(!Ro)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Ro[1],Ro[2])},this._getDsType=function(){var Lo=this.sType,Co=this.sValue,Ro=this.sRule;return Ro==="prn"?Lo=="CN"&&No(Co)?"ia5":Oo(Co)?"prn":"utf8":Ro==="utf8"?Lo=="CN"&&No(Co)?"ia5":Lo=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Lo,Co,Ro){Ro!==void 0&&(this.sRule=Ro),this.sType=Lo,this.sValue=Co},this.getValueObj=function(Lo,Co){if(Lo=="utf8")return new wo({str:Co});if(Lo=="prn")return new Eo({str:Co});if(Lo=="tel")return new To({str:Co});if(Lo=="ia5")return new So({str:Co});if(Lo=="vis")return new $o({str:Co});if(Lo=="bmp")return new Do({str:Co});throw new Error("unsupported directory string type: type="+Lo+" value="+Co)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Lo=u$2.asn1.x509.OID.atype2obj(this.sType),Co=this.getValueObj(this.dsType,this.sValue),Ro=new bo({array:[Lo,Co]});return this.TLV=Ro.getEncodedHex(),this.TLV},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(va){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var _o=u$2,xo=_o.asn1,bo=xo.DERInteger,wo=xo.DERBitString,Eo=xo.DERObjectIdentifier,To=xo.DERSequence,So=xo.ASN1Util.newObject,$o=xo.x509.AlgorithmIdentifier,Do=_o.crypto;Do.ECDSA,Do.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new To({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var No=this.getASN1Object();return this.hTLV=No.getEncodedHex(),this.hTLV},this.setPubKey=function(No){try{if(No instanceof K$1){var Oo=So({seq:[{int:{bigint:No.n}},{int:{int:No.e}}]}).getEncodedHex();this.asn1AlgId=new $o({name:"rsaEncryption"}),this.asn1SubjPKey=new wo({hex:"00"+Oo})}}catch{}try{if(No instanceof u$2.crypto.ECDSA){var Lo=new Eo({name:No.curveName});this.asn1AlgId=new $o({name:"ecPublicKey",asn1params:Lo}),this.asn1SubjPKey=new wo({hex:"00"+No.pubKeyHex})}}catch{}try{if(No instanceof u$2.crypto.DSA){Lo=new So({seq:[{int:{bigint:No.p}},{int:{bigint:No.q}},{int:{bigint:No.g}}]}),this.asn1AlgId=new $o({name:"dsa",asn1params:Lo});var Co=new bo({bigint:No.y});this.asn1SubjPKey=new wo({hex:"00"+Co.getEncodedHex()})}}catch{}},va!==void 0&&this.setPubKey(va)},Ae(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(va){u$2.asn1.x509.Time.superclass.constructor.call(this);var _o=u$2.asn1,xo=_o.DERUTCTime,bo=_o.DERGeneralizedTime;this.setTimeParams=function(wo){this.timeParams=wo},this.getEncodedHex=function(){var wo=null;return wo=this.timeParams!=null?this.type=="utc"?new xo(this.timeParams):new bo(this.timeParams):this.type=="utc"?new xo:new bo,this.TLV=wo.getEncodedHex(),this.TLV},this.type="utc",va!==void 0&&(va.type!==void 0?this.type=va.type:va.str!==void 0&&(va.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),va.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=va)},Ae(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(va){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var _o=u$2.asn1,xo=_o.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var wo=null;for(var Eo in xo)Eo===this.nameAlg&&(wo=xo[Eo]);if(wo!==null)return this.hTLV=wo,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=_o.x509.OID.name2obj(this.nameAlg));var To=[this.asn1Alg];this.asn1Params!==null&&To.push(this.asn1Params);var So=new _o.DERSequence({array:To});return this.hTLV=So.getEncodedHex(),this.hTLV},va!==void 0&&(va.name!==void 0&&(this.nameAlg=va.name),va.asn1params!==void 0&&(this.asn1Params=va.asn1params),va.paramempty!==void 0&&(this.paramEmpty=va.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var bo=this.nameAlg.toLowerCase();bo.substr(-7,7)!=="withdsa"&&bo.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new _o.DERNull)}},Ae(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(va){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var _o={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},xo=u$2.asn1;xo.DERSequence;var bo=xo.DEROctetString,wo=xo.DERIA5String,Eo=xo.DERTaggedObject,To=xo.ASN1Object,So=xo.x509.X500Name,$o=ue;this.explicit=!1,this.setByParam=function(Do){var No=null;if(Do!==void 0){if(Do.rfc822!==void 0&&(this.type="rfc822",No=new wo({str:Do[this.type]})),Do.dns!==void 0&&(this.type="dns",No=new wo({str:Do[this.type]})),Do.uri!==void 0&&(this.type="uri",No=new wo({str:Do[this.type]})),Do.dn!==void 0&&(this.type="dn",this.explicit=!0,No=typeof Do.dn=="string"?new So({str:Do.dn}):Do.dn instanceof u$2.asn1.x509.X500Name?Do.dn:new So(Do.dn)),Do.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,No=new So({ldapstr:Do.ldapdn})),Do.certissuer!==void 0){this.type="dn",this.explicit=!0;var Oo=null;if((Co=Do.certissuer).match(/^[0-9A-Fa-f]+$/),Co.indexOf("-----BEGIN ")!=-1&&(Oo=$o(Co)),Oo==null)throw"certissuer param not cert";(Ro=new ze).hex=Oo;var Lo=Ro.getIssuerHex();(No=new To).hTLV=Lo}if(Do.certsubj!==void 0){this.type="dn",this.explicit=!0;var Co,Ro;if(Oo=null,(Co=Do.certsubj).match(/^[0-9A-Fa-f]+$/),Co.indexOf("-----BEGIN ")!=-1&&(Oo=$o(Co)),Oo==null)throw"certsubj param not cert";(Ro=new ze).hex=Oo,Lo=Ro.getSubjectHex(),(No=new To).hTLV=Lo}if(Do.ip!==void 0){this.type="ip",this.explicit=!1;var jo,zo=Do.ip,Io="malformed IP address";if(zo.match(/^[0-9.]+[.][0-9.]+$/)){if((jo=function(Po){Po=(Po=(Po=Po.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return Po.split(/,/).map(function(Bo,ko,Uo){var Qo=parseInt(Bo);if(Qo<0||255<Qo)throw"integer not in range 0-255";return("00"+Qo.toString(16)).slice(-2)}).join("")}catch(Bo){throw"malformed integer array string: "+Bo}}("["+zo.split(".").join(",")+"]")).length!==8)throw Io}else if(zo.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))jo=function(Po){var Bo="malformed IPv6 address";if(!Po.match(/^[0-9A-Fa-f:]+$/))throw Bo;var ko=(Po=Po.toLowerCase()).split(":").length-1;if(ko<2)throw Bo;var Uo=":".repeat(7-ko+2),Qo=(Po=Po.replace("::",Uo)).split(":");if(Qo.length!=8)throw Bo;for(var qo=0;qo<8;qo++)Qo[qo]=("0000"+Qo[qo]).slice(-4);return Qo.join("")}(zo);else{if(!zo.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Io;jo=zo}No=new bo({hex:jo})}if(this.type==null)throw"unsupported type in params="+Do;this.asn1Obj=new Eo({explicit:this.explicit,tag:_o[this.type],obj:No})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},va!==void 0&&this.setByParam(va)},Ae(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(va){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var _o=u$2.asn1;this.setByParamArray=function(xo){for(var bo=0;bo<xo.length;bo++){var wo=new _o.x509.GeneralName(xo[bo]);this.asn1Array.push(wo)}},this.getEncodedHex=function(){return new _o.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,va!==void 0&&this.setByParamArray(va)},Ae(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(va){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(_o){if(this.objCache[_o]!==void 0)return this.objCache[_o];if(this.name2oidList[_o]===void 0)throw"Name of ObjectIdentifier not defined: "+_o;var xo=this.name2oidList[_o],bo=new u$2.asn1.DERObjectIdentifier({oid:xo});return this.objCache[_o]=bo,bo},this.atype2obj=function(_o){if(this.objCache[_o]!==void 0)return this.objCache[_o];var xo;if(_o.match(/^\d+\.\d+\.[0-9.]+$/))xo=_o;else if(this.atype2oidList[_o]!==void 0)xo=this.atype2oidList[_o];else{if(this.name2oidList[_o]===void 0)throw"AttributeType name undefined: "+_o;xo=this.name2oidList[_o]}var bo=new u$2.asn1.DERObjectIdentifier({oid:xo});return this.objCache[_o]=bo,bo}},u$2.asn1.x509.OID.oid2name=function(va){var _o=u$2.asn1.x509.OID.name2oidList;for(var xo in _o)if(_o[xo]==va)return xo;return""},u$2.asn1.x509.OID.oid2atype=function(va){var _o=u$2.asn1.x509.OID.atype2oidList;for(var xo in _o)if(_o[xo]==va)return xo;return va},u$2.asn1.x509.OID.name2oid=function(va){if(va.match(/^[0-9.]+$/))return va;var _o=u$2.asn1.x509.OID.name2oidList;return _o[va]===void 0?"":_o[va]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(va){var _o=u$2.asn1.x509;return _o.TBSCertificate,new _o.Certificate(va).getPEM()},K$1.getPosArrayOfChildrenFromHex=function(va){return Te.getChildIdx(va,0)},K$1.getHexValueArrayOfChildrenFromHex=function(va){var _o,xo=Te.getV,bo=xo(va,(_o=K$1.getPosArrayOfChildrenFromHex(va))[0]),wo=xo(va,_o[1]),Eo=xo(va,_o[2]),To=xo(va,_o[3]),So=xo(va,_o[4]),$o=xo(va,_o[5]),Do=xo(va,_o[6]),No=xo(va,_o[7]),Oo=xo(va,_o[8]);return(_o=new Array).push(bo,wo,Eo,To,So,$o,Do,No,Oo),_o},K$1.prototype.readPrivateKeyFromPEMString=function(va){var _o=ue(va),xo=K$1.getHexValueArrayOfChildrenFromHex(_o);this.setPrivateEx(xo[1],xo[2],xo[3],xo[4],xo[5],xo[6],xo[7],xo[8])},K$1.prototype.readPKCS5PrvKeyHex=function(va){var _o=K$1.getHexValueArrayOfChildrenFromHex(va);this.setPrivateEx(_o[1],_o[2],_o[3],_o[4],_o[5],_o[6],_o[7],_o[8])},K$1.prototype.readPKCS8PrvKeyHex=function(va){var _o,xo,bo,wo,Eo,To,So,$o,Do=Te,No=Do.getVbyListEx;if(Do.isASN1HEX(va)===!1)throw new Error("not ASN.1 hex string");try{_o=No(va,0,[2,0,1],"02"),xo=No(va,0,[2,0,2],"02"),bo=No(va,0,[2,0,3],"02"),wo=No(va,0,[2,0,4],"02"),Eo=No(va,0,[2,0,5],"02"),To=No(va,0,[2,0,6],"02"),So=No(va,0,[2,0,7],"02"),$o=No(va,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(_o,xo,bo,wo,Eo,To,So,$o)},K$1.prototype.readPKCS5PubKeyHex=function(va){var _o=Te,xo=_o.getV;if(_o.isASN1HEX(va)===!1)throw new Error("keyHex is not ASN.1 hex string");var bo=_o.getChildIdx(va,0);if(bo.length!==2||va.substr(bo[0],2)!=="02"||va.substr(bo[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var wo=xo(va,bo[0]),Eo=xo(va,bo[1]);this.setPublic(wo,Eo)},K$1.prototype.readPKCS8PubKeyHex=function(va){var _o=Te;if(_o.isASN1HEX(va)===!1)throw new Error("not ASN.1 hex string");if(_o.getTLVbyListEx(va,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var xo=_o.getTLVbyListEx(va,0,[1,0]);this.readPKCS5PubKeyHex(xo)},K$1.prototype.readCertPubKeyHex=function(va,_o){var xo,bo;(xo=new ze).readCertHex(va),bo=xo.getPublicKeyHex(),this.readPKCS8PubKeyHex(bo)},K$1.prototype.sign=function(va,_o){var xo,bo=(xo=va,u$2.crypto.Util.hashString(xo,_o));return this.signWithMessageHash(bo,_o)},K$1.prototype.signWithMessageHash=function(va,_o){var xo=W$2(u$2.crypto.Util.getPaddedDigestInfoHex(va,_o,this.n.bitLength()),16);return xe(this.doPrivate(xo).toString(16),this.n.bitLength())},K$1.prototype.signPSS=function(va,_o,xo){var bo,wo=(bo=oe(va),u$2.crypto.Util.hashHex(bo,_o));return xo===void 0&&(xo=-1),this.signWithMessageHashPSS(wo,_o,xo)},K$1.prototype.signWithMessageHashPSS=function(va,_o,xo){var bo,wo=re(va),Eo=wo.length,To=this.n.bitLength()-1,So=Math.ceil(To/8),$o=function(zo){return u$2.crypto.Util.hashHex(zo,_o)};if(xo===-1||xo===void 0)xo=Eo;else if(xo===-2)xo=So-Eo-2;else if(xo<-2)throw new Error("invalid salt length");if(So<Eo+xo+2)throw new Error("data too long");var Do="";xo>0&&(Do=new Array(xo),new G$1().nextBytes(Do),Do=String.fromCharCode.apply(String,Do));var No=re($o(oe("\0\0\0\0\0\0\0\0"+wo+Do))),Oo=[];for(bo=0;bo<So-xo-Eo-2;bo+=1)Oo[bo]=0;var Lo=String.fromCharCode.apply(String,Oo)+""+Do,Co=Ee(No,Lo.length,$o),Ro=[];for(bo=0;bo<Lo.length;bo+=1)Ro[bo]=Lo.charCodeAt(bo)^Co.charCodeAt(bo);var jo=65280>>8*So-To&255;for(Ro[0]&=~jo,bo=0;bo<Eo;bo++)Ro.push(No.charCodeAt(bo));return Ro.push(188),xe(this.doPrivate(new h$2(Ro)).toString(16),this.n.bitLength())},K$1.prototype.verify=function(va,_o){if((_o=_o.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var xo=W$2(_o,16),bo=this.n.bitLength();if(xo.bitLength()>bo)return!1;var wo=this.doPublic(xo).toString(16);if(wo.length+3!=bo/4)return!1;var Eo=je(wo.replace(/^1f+00/,""));if(Eo.length==0)return!1;var To,So=Eo[0];return Eo[1]==(To=va,u$2.crypto.Util.hashString(To,So))},K$1.prototype.verifyWithMessageHash=function(va,_o){if(_o.length!=Math.ceil(this.n.bitLength()/4))return!1;var xo=W$2(_o,16);if(xo.bitLength()>this.n.bitLength())return 0;var bo=je(this.doPublic(xo).toString(16).replace(/^1f+00/,""));return bo.length!=0&&(bo[0],bo[1]==va)},K$1.prototype.verifyPSS=function(va,_o,xo,bo){var wo=function(Eo){return u$2.crypto.Util.hashHex(Eo,xo)}(oe(va));return bo===void 0&&(bo=-1),this.verifyWithMessageHashPSS(wo,_o,xo,bo)},K$1.prototype.verifyWithMessageHashPSS=function(va,_o,xo,bo){if(_o.length!=Math.ceil(this.n.bitLength()/4))return!1;var wo,Eo=new h$2(_o,16),To=function(Po){return u$2.crypto.Util.hashHex(Po,xo)},So=re(va),$o=So.length,Do=this.n.bitLength()-1,No=Math.ceil(Do/8);if(bo===-1||bo===void 0)bo=$o;else if(bo===-2)bo=No-$o-2;else if(bo<-2)throw new Error("invalid salt length");if(No<$o+bo+2)throw new Error("data too long");var Oo=this.doPublic(Eo).toByteArray();for(wo=0;wo<Oo.length;wo+=1)Oo[wo]&=255;for(;Oo.length<No;)Oo.unshift(0);if(Oo[No-1]!==188)throw new Error("encoded message does not end in 0xbc");var Lo=(Oo=String.fromCharCode.apply(String,Oo)).substr(0,No-$o-1),Co=Oo.substr(Lo.length,$o),Ro=65280>>8*No-Do&255;if((Lo.charCodeAt(0)&Ro)!=0)throw new Error("bits beyond keysize not zero");var jo=Ee(Co,Lo.length,To),zo=[];for(wo=0;wo<Lo.length;wo+=1)zo[wo]=Lo.charCodeAt(wo)^jo.charCodeAt(wo);zo[0]&=~Ro;var Io=No-$o-bo-2;for(wo=0;wo<Io;wo+=1)if(zo[wo]!==0)throw new Error("leftmost octets not zero");if(zo[Io]!==1)throw new Error("0x01 marker not found");return Co===re(To(oe("\0\0\0\0\0\0\0\0"+So+String.fromCharCode.apply(String,zo.slice(-bo)))))},K$1.SALT_LEN_HLEN=-1,K$1.SALT_LEN_MAX=-2,K$1.SALT_LEN_RECOVER=-2,ze.hex2dn=function(va,_o){_o===void 0&&(_o=0);var xo=new ze;return Te.getTLV(va,_o),xo.getX500Name(va).str},ze.hex2rdn=function(va,_o){if(_o===void 0&&(_o=0),va.substr(_o,2)!=="31")throw new Error("malformed RDN");for(var xo=new Array,bo=Te.getChildIdx(va,_o),wo=0;wo<bo.length;wo++)xo.push(ze.hex2attrTypeValue(va,bo[wo]));return(xo=xo.map(function(Eo){return Eo.replace("+","\\+")})).join("+")},ze.hex2attrTypeValue=function(va,_o){var xo=Te,bo=xo.getV;if(_o===void 0&&(_o=0),va.substr(_o,2)!=="30")throw new Error("malformed attribute type and value");var wo=xo.getChildIdx(va,_o);wo.length!==2||va.substr(wo[0],2);var Eo=bo(va,wo[0]),To=u$2.asn1.ASN1Util.oidHexToInt(Eo);return u$2.asn1.x509.OID.oid2atype(To)+"="+re(bo(va,wo[1]))},ze.getPublicKeyFromCertHex=function(va){var _o=new ze;return _o.readCertHex(va),_o.getPublicKey()},ze.getPublicKeyFromCertPEM=function(va){var _o=new ze;return _o.readCertPEM(va),_o.getPublicKey()},ze.getPublicKeyInfoPropOfCertPEM=function(va){var _o,xo,bo=Te.getVbyList,wo={};return wo.algparam=null,(_o=new ze).readCertPEM(va),xo=_o.getPublicKeyHex(),wo.keyhex=bo(xo,0,[1],"03").substr(2),wo.algoid=bo(xo,0,[0,0],"06"),wo.algoid==="2a8648ce3d0201"&&(wo.algparam=bo(xo,0,[0,1],"06")),wo},ze.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var be,Oe=[(be=new ze,be.readCertPEM(function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),be)];function Se(va,_o){var xo=va.getIssuerHex();if(xo===va.getSubjectHex())return va.verifySignature(va.getPublicKey());var bo=function(wo,Eo){for(var To=0,So=Eo;To<So.length;To++){var $o=So[To];if($o.getSubjectHex()===wo)return $o}}(xo,_o);return!!bo&&va.verifySignature(bo.getPublicKey())!==!1&&Se(bo,_o)}function Le(va){return va.getIssuerHex()!==va.getSubjectHex()&&Se(va,Oe)}(function(va){var _o=new ze;typeof va=="string"?_o.readCertPEM(va):_o.readCertHex(va.hex),Le(_o),Oe.push(_o)})(function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var ke=2*Math.PI,Ce=Math.PI/2;function Pe(va){return va>0&&va<=ke?va:(va%ke+ke)%ke}var Be=function(va){function _o(xo){var bo=va.call(this,xo,1,.1,1e3)||this;return bo.pose={longitude:0,latitude:0,fov:xo,distance:0,offset:new r$3.Vector3},bo.computePose(),bo}return t$3.__extends(_o,va),_o.prototype.computePose=function(){var xo=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Pe(-Math.atan2(xo.x,-xo.z)),this.pose.latitude=-Math.asin(xo.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},_o.prototype.setFromPose=function(xo){var bo,wo,Eo,To,So,$o=Pe((bo=xo.longitude)!==null&&bo!==void 0?bo:this.pose.longitude),Do=Math.max(1e-4-Ce,Math.min(Ce-1e-4,(wo=xo.latitude)!==null&&wo!==void 0?wo:this.pose.latitude)),No=(Eo=xo.fov)!==null&&Eo!==void 0?Eo:this.pose.fov,Oo=(To=xo.distance)!==null&&To!==void 0?To:this.pose.distance,Lo=(So=xo.offset)!==null&&So!==void 0?So:this.pose.offset,Co=function(Ro){var jo=Math.abs(Math.cos(Ro.latitude));return new r$3.Vector3(-Math.sin(Ro.longitude)*jo,-Math.sin(Ro.latitude),-Math.cos(Ro.longitude)*jo)}({longitude:$o,latitude:Do}).normalize();return this.position.set(0,0,0),this.lookAt(Co),this.position.add(Lo).sub(Co.clone().setLength(Oo)),this.fov!==No&&(this.fov=No,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=$o,this.pose.latitude=Do,this.pose.fov=No,this.pose.distance=Oo,this.pose.offset.copy(Lo),this},_o.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},_o}(r$3.PerspectiveCamera),_e=function(va){function _o(){return va!==null&&va.apply(this,arguments)||this}return t$3.__extends(_o,va),_o.prototype.add=function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.prototype.add.apply(this,xo)},_o.prototype.remove=function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.prototype.remove.apply(this,xo)},_o}(r$3.Scene),Ue=function(va){function _o(xo){var bo=xo.preserveDrawingBuffer,wo=bo===void 0||bo,Eo=xo.backgroundColor,To=Eo===void 0?1579548:Eo,So=xo.backgroundAlpha,$o=So===void 0?1:So,Do=xo.pixelRatio,No=Do===void 0?1:Do,Oo=xo.antialias,Lo=Oo!==void 0&&Oo,Co=va.call(this,{antialias:Lo,preserveDrawingBuffer:wo,alpha:$o<1})||this;return Co.setPixelRatio(No),Co.setClearColor(To,$o),Co.outputEncoding=r$3.sRGBEncoding,Co.autoClear=!0,Co}return t$3.__extends(_o,va),_o}(r$3.WebGLRenderer);function Re(va){return va==null}function Qe(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o]}function Ye(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Fe(){return(Ye()+Ye()+"-"+Ye()+"-4"+Ye().substr(0,3)+"-"+Ye()+"-"+Ye()+Ye()+Ye()).toLowerCase()}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),He=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()},Ge=function(){if(typeof window!="undefined"){var va=window;return va.requestAnimationFrame||va.mozRequestAnimationFrame||va.webkitRequestAnimationFrame||va.msRequestAnimationFrame||function(_o){return setTimeout(_o,16)}}return function(_o){return setTimeout(_o,16)}}(),We=function(){function va(){this.frames=[],this.stoped=!1,this.time=He(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(va,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new va),this.sharedInstance},enumerable:!1,configurable:!0}),va.prototype.loop=function(){if(!this.stoped){var _o=He(),xo=_o-this.time;this.time=_o;for(var bo=[],wo=0,Eo=this.frames;wo<Eo.length;wo++){var To=Eo[wo];if(To.delay>0)To.delay=To.delay-1;else{try{To.callback(_o,xo)}catch(So){console.error(So)}To.once&&bo.push(To)}}bo.length>0&&(this.frames=this.frames.filter(function(So){return bo.indexOf(So)===-1})),Ge(this.loop)}},va.prototype.remove=function(_o){var xo=this.frames.indexOf(_o);xo>=0&&this.frames.splice(xo,1)},va.prototype.add=function(_o,xo,bo,wo){var Eo=this;xo===void 0&&(xo=!1),bo===void 0&&(bo=0),wo===void 0&&(wo=5);var To={callback:_o,once:xo,delay:bo,order:wo};return this.frames.push(To),this.frames.sort(function(So,$o){return So.order-$o.order}),function(){return Eo.remove(To)}},va.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},va.prototype.getFrameTime=function(_o){return this.add(function(xo,bo){return _o(bo)},!0,0,0)},va}(),qe=function(va){function _o(){var xo=va!==null&&va.apply(this,arguments)||this;return xo.floorIndex=0,xo.needsRender=!0,xo}return t$3.__extends(_o,va),_o}(r$3.Mesh),Ke=function(va){function _o(){var xo=va!==null&&va.apply(this,arguments)||this;return xo.needsRender=!0,xo}return t$3.__extends(_o,va),_o.prototype.getTransparent=function(){var xo;return this.traverse(function(bo){xo===void 0&&bo instanceof qe&&bo.material.forEach(function(wo){xo===void 0&&wo.uniforms.originOpacity.value===1&&(xo=wo.transparent)})}),xo!=null&&xo},_o.prototype.setTransparent=function(xo){this.traverse(function(bo){bo instanceof qe&&bo.material.forEach(function(wo){wo.uniforms.originOpacity.value===1&&(wo.transparent=xo)})})},_o.prototype.getMaterial=function(){var xo=null;return this.traverse(function(bo){if(xo===null&&bo instanceof qe){var wo=bo.material[0];xo={pano0:wo.pano0,pano1:wo.pano1,modelAlpha:wo.modelAlpha,progress:wo.progress,useBlackTransition:wo.useBlackTransition,perspToOrtho:wo.perspToOrtho,opacity:wo.opacity,panoVideo:wo.panoVideo}}}),xo},_o.prototype.setMaterial=function(xo){this.traverse(function(bo){bo instanceof qe&&bo.material.forEach(function(wo){xo.pano0!==void 0&&(wo.pano0=xo.pano0),xo.pano1!==void 0&&(wo.pano1=xo.pano1),xo.modelAlpha!==void 0&&(wo.modelAlpha=xo.modelAlpha),xo.progress!==void 0&&(wo.progress=xo.progress),xo.useBlackTransition!==void 0&&(wo.useBlackTransition=xo.useBlackTransition),xo.perspToOrtho!==void 0&&(wo.perspToOrtho=xo.perspToOrtho),xo.opacity!==void 0&&(wo.opacity=xo.opacity),xo.panoVideo!==void 0&&(wo.panoVideo=xo.panoVideo)})})},_o.prototype.disposeMaterial=function(){this.traverse(function(xo){if(xo instanceof qe){var bo=[];xo.material.forEach(function(wo){var Eo=wo.uniforms;Object.keys(Eo).map(function(To){if(["pano0DepthMap"].indexOf(To)>=0)Eo[To].value=null;else{var So=Eo[To].value;So&&typeof So.dispose=="function"&&bo.indexOf(So)===-1&&(Eo[To].value=null,bo.push(So))}}),wo.dispose()}),bo.forEach(function(wo){return wo.dispose()})}})},_o.prototype.disposeGeometry=function(){this.traverse(function(xo){xo instanceof qe&&xo.geometry.dispose()})},_o}(r$3.Group),Ze=function(va){function _o(){var xo=va!==null&&va.apply(this,arguments)||this;return xo.floorIndex=0,xo}return t$3.__extends(_o,va),_o}(Ke),Xe=function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-5z|qryZnv\x07-7-n{s|zrq6;\x07\b	H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H\f`),Je=function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?0vs-qrsv{rq5b`RlYbZV[N[PR6p-]n{|]vpr-\n--nz}yrPor-zn}H--nz}yrPor-yzv{n{prZn}H--znA-znv\x07H\fH0ryrp-]n{|]vpr-\n--nz}yrPor-zn}H--znA-znv\x07H\fH0r{qvsp-]n{|cvqr|-\n--rp?-v	rH--znA-znv\x07H--sy|n-ny}unH--nz}yr?Q-zn}H\fH{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-|vtv{\\}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH{vs|z-]n{|]vpr-}n{|=H{vs|z-]n{|]vpr-}n{|>H0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6--{vs|z-]n{|cvqr|-}n{|cvqr|H0r{qvsn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr9-|vtv{\\}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{-:-}n{|=;znv\x07h@j;\x07\b	6-7-zn@5}n{|=;znv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{-:-}n{|>;znv\x07h@j;\x07\b	6-7-zn@5}n{|>;znv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=;zn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>;zn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=;yzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>;yzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|;znv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|;v	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|;v	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|;zn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|;ny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function $e(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var et=$e();et.width=et.height=8;var tt=new r$3.Texture(et);tt.name="EMPTY_TEXTURE";var it=new r$3.CubeTexture([et,et,et,et,et,et]);it.name="EMPTY_CUBE_TEXTURE",tt.dispose=it.dispose=function(){};var nt=Object.assign({modelAlpha:new r$3.Uniform(0),originOpacity:new r$3.Uniform(1),progress:new r$3.Uniform(0),pano0:new r$3.Uniform({map:it,luminanceMap:null,matrix:new r$3.Matrix4}),pano1:new r$3.Uniform({map:it,luminanceMap:null,matrix:new r$3.Matrix4}),pano0DepthMap:new r$3.Uniform(null),panoVideo:new r$3.Uniform(null),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),rt=function(va){function _o(xo){var bo,wo,Eo,To,So,$o,Do,No;xo===void 0&&(xo={});var Oo=va.call(this,{vertexShader:Xe,fragmentShader:Je,uniforms:r$3.UniformsUtils.clone(nt),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$3.NoBlending,lights:!0})||this;return Object.defineProperties(Oo,{pano0:{get:function(){var Lo=this.uniforms.pano0.value;return Lo.map===it?null:{map:Lo.map,luminanceMap:Lo.luminanceMap,matrix:Lo.matrix.clone()}},set:function(Lo){this.uniforms.pano0.value=Lo===null?{map:it,luminanceMap:null,matrix:new r$3.Matrix4}:{map:Lo.map,luminanceMap:Lo.luminanceMap,matrix:Lo.matrix.clone()};var Co=this.uniforms.pano0.value.luminanceMap!==null&&this.uniforms.pano1.value.luminanceMap!==null;this.defines.USE_LUMINANCE!==Co&&(this.defines.USE_LUMINANCE=Co,this.needsUpdate=!0)}},pano1:{get:function(){var Lo=this.uniforms.pano1.value;return Lo.map===it?null:{map:Lo.map,luminanceMap:Lo.luminanceMap,matrix:Lo.matrix.clone()}},set:function(Lo){this.uniforms.pano1.value=Lo===null?{map:it,luminanceMap:null,matrix:new r$3.Matrix4}:{map:Lo.map,luminanceMap:Lo.luminanceMap,matrix:Lo.matrix.clone()};var Co=this.uniforms.pano0.value.luminanceMap!==null&&this.uniforms.pano1.value.luminanceMap!==null;this.defines.USE_LUMINANCE!==Co&&(this.defines.USE_LUMINANCE=Co,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Lo){this.uniforms.modelAlpha.value=Lo}},progress:{get:function(){return this.uniforms.progress.value},set:function(Lo){this.uniforms.progress.value=Lo}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Lo){this.defines.USE_BLACK_TRANSITION!==Lo&&(this.defines.USE_BLACK_TRANSITION=Lo,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Lo){this.uniforms.opacity.value=Lo,this.blending=Lo<1?r$3.NormalBlending:r$3.NoBlending}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Lo){this.uniforms.perspToOrtho.value=Lo}},panoVideo:{get:function(){return this.uniforms.panoVideo.value},set:function(Lo){this.uniforms.panoVideo.value=Lo;var Co=Lo!==null;Co!==this.defines.USE_PANO_VIDEO&&(this.defines.USE_PANO_VIDEO=Co,this.needsUpdate=!0)}}}),Oo.pano0=(bo=xo.pano0)!==null&&bo!==void 0?bo:null,Oo.pano1=(wo=xo.pano1)!==null&&wo!==void 0?wo:null,Oo.modelAlpha=(Eo=xo.modelAlpha)!==null&&Eo!==void 0?Eo:1,Oo.progress=(To=xo.progress)!==null&&To!==void 0?To:0,Oo.useBlackTransition=(So=xo.useBlackTransition)!==null&&So!==void 0&&So,Oo.perspToOrtho=($o=xo.perspToOrtho)!==null&&$o!==void 0?$o:0,Oo.opacity=(Do=xo.opacity)!==null&&Do!==void 0?Do:1,Oo.panoVideo=(No=xo.panoVideo)!==null&&No!==void 0?No:null,Oo}return t$3.__extends(_o,va),_o}(r$3.ShaderMaterial),ot=new r$3.Vector3(0,0,0),st=function(va){function _o(xo,bo){bo===void 0&&(bo=ot);var wo=va.call(this)||this,Eo=new r$3.BoxBufferGeometry(xo.max.x-xo.min.x+2*bo.x,xo.max.y-xo.min.y+2*bo.y,xo.max.z-xo.min.z+2*bo.z,1,1);Eo.groups.length=0,Eo.groups.push({start:0,count:36,materialIndex:0}),Eo.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1));var To=new rt;To.defines.USE_MAP=!1,To.defines.USE_UV=!1,To.uniforms.diffuse.value=new r$3.Color(16777215);var So=new qe(Eo,[To]);return So.floorIndex=-1,So.position.copy(xo.getCenter(new r$3.Vector3)),So.frustumCulled=!1,wo.renderOrder=-1,wo.add(So),wo.boundingBox=new r$3.Box3,wo.computeBoundingBox(),wo}return t$3.__extends(_o,va),_o.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},_o.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},_o}(Ze);function at(va,_o){return _o===void 0&&(_o=ot),new st(va,_o)}var ut,ct,lt,ht,dt=function(){function va(_o,xo,bo){_o===void 0&&(_o=0),xo===void 0&&(xo=0),bo===void 0&&(bo=0),this.x=_o,this.y=xo,this.z=bo}return va.prototype.copy=function(_o){return this.x=_o.x,this.y=_o.y,this.z=_o.z,this},va.prototype.set=function(_o,xo,bo){return this.x=_o,this.y=xo,this.z=bo,this},va.prototype.fromArray=function(_o,xo){return xo===void 0&&(xo=0),this.x=_o[xo],this.y=_o[xo+1],this.z=_o[xo+2],this},va.prototype.add=function(_o){return this.x+=_o.x,this.y+=_o.y,this.z+=_o.z,this},va.prototype.multiplyScalar=function(_o){return this.x*=_o,this.y*=_o,this.z*=_o,this},va.prototype.subVectors=function(_o,xo){return this.x=_o.x-xo.x,this.y=_o.y-xo.y,this.z=_o.z-xo.z,this},va.prototype.dot=function(_o){return this.x*_o.x+this.y*_o.y+this.z*_o.z},va.prototype.cross=function(_o){var xo=this.x,bo=this.y,wo=this.z;return this.x=bo*_o.z-wo*_o.y,this.y=wo*_o.x-xo*_o.z,this.z=xo*_o.y-bo*_o.x,this},va.prototype.crossVectors=function(_o,xo){var bo=_o.x,wo=_o.y,Eo=_o.z,To=xo.x,So=xo.y,$o=xo.z;return this.x=wo*$o-Eo*So,this.y=Eo*To-bo*$o,this.z=bo*So-wo*To,this},va.prototype.clone=function(){return new va(this.x,this.y,this.z)},va}(),pt=function(){function va(_o,xo,bo,wo,Eo){this._extentsMin=_o,this._extentsMax=xo,this._startIndex=bo,this._endIndex=wo,this._level=Eo,this._node0=null,this._node1=null,this.elementCount=wo-bo,this.center=[(_o.x+xo.x)/2,(_o.y+xo.y)/2,(_o.z+xo.z)/2];var To,So=this.size=[xo.x-_o.x,xo.y-_o.y,xo.z-_o.z];To=So[0]>So[1]?So[1]>So[2]?[2,1,0]:So[0]>So[2]?[1,2,0]:[1,0,2]:So[1]>So[2]?So[0]>So[2]?[2,0,1]:[0,2,1]:[0,1,2],this.order=To}return va.prototype.clearShapes=function(){this._startIndex=-1,this._endIndex=-1,this.elementCount=0},va}(),At=(ut=new dt,ct=new dt,lt=new dt,ht=new dt,function(va,_o,xo,bo,wo,Eo){ct.subVectors(_o,va),lt.subVectors(xo,va),ht.crossVectors(ct,lt);var To,So=wo.dot(ht);if(So>0){if(Eo)return null;To=1}else{if(!(So<0))return null;To=-1,So=-So}ut.subVectors(bo,va);var $o=To*wo.dot(lt.crossVectors(ut,lt));if($o<0)return null;var Do=To*wo.dot(ct.cross(ut));if(Do<0||$o+Do>So)return null;var No=-To*ut.dot(ht);if(No<0)return null;var Oo=No/So;return new dt().copy(wo).multiplyScalar(Oo).add(bo)});function ft(va,_o,xo){var bo={min:0,max:0};_o.x>=0?(bo.min=(xo._extentsMin.x-va.x)*_o.x,bo.max=(xo._extentsMax.x-va.x)*_o.x):(bo.min=(xo._extentsMax.x-va.x)*_o.x,bo.max=(xo._extentsMin.x-va.x)*_o.x);var wo={min:0,max:0};if(_o.y>=0?(wo.min=(xo._extentsMin.y-va.y)*_o.y,wo.max=(xo._extentsMax.y-va.y)*_o.y):(wo.min=(xo._extentsMax.y-va.y)*_o.y,wo.max=(xo._extentsMin.y-va.y)*_o.y),bo.min>wo.max||wo.min>bo.max)return!1;wo.min>bo.min&&(bo.min=wo.min),wo.max<bo.max&&(bo.max=wo.max);var Eo={min:0,max:0};return _o.z>=0?(Eo.min=(xo._extentsMin.z-va.z)*_o.z,Eo.max=(xo._extentsMax.z-va.z)*_o.z):(Eo.min=(xo._extentsMax.z-va.z)*_o.z,Eo.max=(xo._extentsMin.z-va.z)*_o.z),!(bo.min>Eo.max||Eo.min>bo.max)&&(Eo.min>bo.min&&(bo.min=Eo.min),Eo.max<bo.max&&(bo.max=Eo.max),!(bo.max<0))}var Mt=function(){function va(_o,xo){xo===void 0&&(xo=10),this._trianglesArray=_o,this._maxTrianglesPerNode=xo,this._bboxArray=this.calcBoundingBoxes(_o),this._bboxHelper=new Float32Array(this._bboxArray.length),this._bboxHelper.set(this._bboxArray);var bo=_o.length/9,wo=this.calcExtents(0,bo,1e-6);this._rootNode=new pt(wo[0],wo[1],0,bo,0),this._nodesToSplit=[this._rootNode],this.splitNode()}return va.prototype.calcBoundingBoxes=function(_o){for(var xo,bo,wo,Eo,To,So,$o,Do,No,Oo,Lo,Co,Ro,jo,zo,Io=_o.length/9,Po=new Float32Array(7*Io),Bo=0,ko=0,Uo=0;Uo<Io;Bo+=9,ko+=7,Uo++)xo=_o[Bo],bo=_o[Bo+1],wo=_o[Bo+2],Eo=_o[Bo+3],To=_o[Bo+4],So=_o[Bo+5],Eo<(Oo=xo)&&(Oo=Eo),($o=_o[Bo+6])<Oo&&(Oo=$o),To<(Lo=bo)&&(Lo=To),(Do=_o[Bo+7])<Lo&&(Lo=Do),So<(Co=wo)&&(Co=So),(No=_o[Bo+8])<Co&&(Co=No),Eo>(Ro=xo)&&(Ro=Eo),$o>Ro&&(Ro=$o),To>(jo=bo)&&(jo=To),Do>jo&&(jo=Do),So>(zo=wo)&&(zo=So),No>zo&&(zo=No),Po[ko]=Uo,Po[ko+1]=Oo,Po[ko+2]=Lo,Po[ko+3]=Co,Po[ko+4]=Ro,Po[ko+5]=jo,Po[ko+6]=zo;return Po},va.prototype.splitNode=function(){if(this._rootNode)for(this._splitNode(this._rootNode);this._nodesToSplit.length>0;)this._splitNode(this._nodesToSplit.pop())},va.prototype._splitNode=function(_o){if(!(_o.elementCount<=this._maxTrianglesPerNode||_o.elementCount===0)){for(var xo=_o._startIndex,bo=_o._endIndex,wo=[[],[],[]],Eo=[[],[],[]],To=_o.center,So=7*(Uo=xo);Uo<bo;Uo++,So+=7)for(var $o=0;$o<3;$o++)(this._bboxArray[So+1+$o]+this._bboxArray[So+4+$o])/2<To[$o]?wo[$o][wo[$o].length]=Uo:Eo[$o][Eo[$o].length]=Uo;var Do=[!(wo[0].length&Eo[0].length),!(wo[1].length&Eo[1].length),!(wo[2].length&Eo[2].length)];if(!(Do[0]&Do[1]&Do[2])){var No,Oo,Lo=_o.order;for($o=0;$o<3;$o++){var Co=Lo[$o];if(!Do[Co]){No=wo[Co],Oo=Eo[Co];break}}for(var Ro,jo=xo,zo=jo+No.length,Io=zo,Po=bo,Bo=_o._startIndex,ko=No.concat(Oo),Uo=0;Uo<ko.length;Uo++)Ro=ko[Uo],this._bboxHelper[7*Bo]=this._bboxArray[7*Ro],this._bboxHelper[7*Bo+1]=this._bboxArray[7*Ro+1],this._bboxHelper[7*Bo+2]=this._bboxArray[7*Ro+2],this._bboxHelper[7*Bo+3]=this._bboxArray[7*Ro+3],this._bboxHelper[7*Bo+4]=this._bboxArray[7*Ro+4],this._bboxHelper[7*Bo+5]=this._bboxArray[7*Ro+5],this._bboxHelper[7*Bo+6]=this._bboxArray[7*Ro+6],Bo++;var Qo=this._bboxHelper.subarray(7*_o._startIndex,7*_o._endIndex);this._bboxArray.set(Qo,7*_o._startIndex);var qo=this.calcExtents(jo,zo,1e-6),Zo=this.calcExtents(Io,Po,1e-6),Xo=new pt(qo[0],qo[1],jo,zo,_o._level+1),Fo=new pt(Zo[0],Zo[1],Io,Po,_o._level+1);_o._node0=Xo,_o._node1=Fo,_o.clearShapes(),this._nodesToSplit.push(Xo,Fo)}}},va.prototype.calcExtents=function(_o,xo,bo){if(_o>=xo)return[{x:0,y:0,z:0},{x:0,y:0,z:0}];var wo,Eo=7*_o,To=7*xo+1,So=this._bboxArray[Eo+1],$o=this._bboxArray[Eo+2],Do=this._bboxArray[Eo+3],No=this._bboxArray[Eo+4],Oo=this._bboxArray[Eo+5],Lo=this._bboxArray[Eo+6],Co=this._bboxArray;for(Eo+=7;Eo<To;Eo+=7)(wo=Co[Eo+1])<So&&(So=wo),(wo=Co[Eo+2])<$o&&($o=wo),(wo=Co[Eo+3])<Do&&(Do=wo),(wo=Co[Eo+4])>No&&(No=wo),(wo=Co[Eo+5])>Oo&&(Oo=wo),(wo=Co[Eo+6])>Lo&&(Lo=wo);return[{x:So-bo,y:$o-bo,z:Do-bo},{x:No+bo,y:Oo+bo,z:Lo+bo}]},va.prototype.intersectRay=function(_o,xo,bo){for(var wo=[this._rootNode],Eo=[],To=[],So=new dt(1/xo.x,1/xo.y,1/xo.z);wo.length>0;){var $o=wo.pop();if(ft(_o,So,$o)){$o._node0&&wo.push($o._node0),$o._node1&&wo.push($o._node1);for(var Do=$o._startIndex;Do<$o._endIndex;Do++)Eo.push(this._bboxArray[7*Do])}}var No=new dt,Oo=new dt,Lo=new dt,Co=new dt(_o.x,_o.y,_o.z),Ro=new dt(xo.x,xo.y,xo.z);for(Do=0;Do<Eo.length;Do++){var jo=Eo[Do];No.fromArray(this._trianglesArray,9*jo),Oo.fromArray(this._trianglesArray,9*jo+3),Lo.fromArray(this._trianglesArray,9*jo+6);var zo=At(No,Oo,Lo,Co,Ro,bo);zo&&To.push({triangle:[No.clone(),Oo.clone(),Lo.clone()],triangleIndex:jo,intersectionPoint:zo})}return To},va.prototype.dispose=function(){this._trianglesArray=new Float32Array,this._bboxArray=new Float32Array,this._bboxHelper=new Float32Array,this._rootNode=null,this._nodesToSplit.length=0},va}(),gt,yt=(gt="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<"+gt+">$":Symbol(gt));function mt(va){return va[yt]||(va[yt]={}),va[yt]}var vt=function(){function va(){}return va.prototype.hasListener=function(_o){var xo=mt(this);return xo&&xo[_o]&&xo[_o].length>0},va.prototype.on=function(_o,xo,bo){var wo=this,Eo=mt(this);return Eo[_o]||(Eo[_o]=[]),Eo[_o].push([xo,bo||!1]),function(){return wo.off(_o,xo)}},va.prototype.once=function(_o,xo){return this.on(_o,xo,!0)},va.prototype.off=function(_o,xo){if(_o!==void 0){var bo,wo=mt(this);if(wo[_o]||(wo[_o]=[]),xo!==void 0){for(var Eo=0;Eo<wo[_o].length&&wo[_o][Eo][0]!==xo;Eo++);Eo<wo[_o].length&&wo[_o].splice(Eo,1)}else wo[_o].length=0}else(bo=this)[yt]||delete bo[yt]},va.prototype.emit=function(_o){for(var xo=[],bo=1;bo<arguments.length;bo++)xo[bo-1]=arguments[bo];for(var wo=!1,Eo=mt(this),To=Eo[_o]||[],So=0,$o=To.slice();So<$o.length;So++){var Do=$o[So],No=Do[0],Oo=Do[1],Lo=Oo!==void 0&&Oo,Co=No.apply(void 0,xo);Lo&&this.off(_o,No),Co===!1&&(wo=!0)}return wo},va}();function Nt(va){Object.freeze(va);var _o=typeof va=="function",xo=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(va).forEach(function(bo){!xo.call(va,bo)||_o&&(bo==="caller"||bo==="callee"||bo==="arguments")||va[bo]===null||typeof va[bo]!="object"&&typeof va[bo]!="function"||Object.isFrozen(va[bo])||Nt(va[bo])}),va}var Dt=/^([^.]+)(\.([^.]+))*$/;function wt(va){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(va)}function Tt(va,_o){return Dt.test(va)&&Dt.test(_o)&&function(xo,bo){if(xo==="*")return!0;var wo=xo.split(".").reverse(),Eo=bo.split(".").reverse();if(wo.length<=1)return xo===bo;for(var To=0;To<wo.length;To++)if(wo[To]!==Eo[To])return!1;return!0}(va,_o)}var xt=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Et=Nt(JSON.parse(function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/-j"))),jt=function(va){function _o(xo,bo,wo){return va.call(this,"[NETWORK]: response error(type: "+bo+", reason: "+wo+"): "+xo)||this}return t$3.__extends(_o,va),_o}(Error),zt=function(va){function _o(xo,bo,wo){var Eo=va.call(this,"[NETWORK]: response error(type: "+bo+", status: "+wo+"): "+xo)||this;return Eo.httpStatus=wo,Eo}return t$3.__extends(_o,va),_o}(Error);(function(va){function _o(xo,bo){return va.call(this,"[NETWORK]: request abort(type: "+bo+"): "+xo)||this}t$3.__extends(_o,va)})(Error);var It=function(va){function _o(xo,bo,wo){return va.call(this,"[NETWORK]: request timeout(type: "+bo+", timeout: "+wo+"ms): "+xo)||this}return t$3.__extends(_o,va),_o}(Error);function bt(va){for(var _o=0,xo=xt;_o<xo.length;_o++){var bo=xo[_o],wo=va.match(bo);if(wo)return"jsonp_"+wo[1]}return null}function Ot(va){return bt(va)!==null}function St(va){return xt.reduce(function(_o,xo){return _o.replace(xo,"")},va)}function Lt(va){var _o=va.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return _o?_o[2]:location.hostname}(function(va){function _o(xo,bo,wo){return va.call(this,"[NETWORK]: request forbidden(type: "+bo+", reason: "+wo+"): "+xo)||this}t$3.__extends(_o,va)})(Error);var kt=function(va){function _o(){return va!==null&&va.apply(this,arguments)||this}return t$3.__extends(_o,va),_o}(vt);function Ct(va,_o,xo,bo,wo){return _o===void 0&&(_o={}),xo===void 0&&(xo=Qe),bo===void 0&&(bo=Qe),wo===void 0&&(wo=Qe),new Promise(function(Eo,To){var So,$o=_o.allowHosts?Et.concat(_o.allowHosts):Et.slice(),Do=Lt(va),No=bt(va);if(location.hostname.length!==0&&!wt(location.hostname)&&Et.filter(function(Fo){return Tt(Fo,location.hostname)}).length===0&&!wt(Do)&&$o.filter(function(Fo){return Tt(Fo,Do)}).length===0){var Oo=No?"Script":"XMLHttpRequest",Lo=new jt(va,Oo,"request host("+Do+") is not allowed");return bo(Lo),To(Lo),void((So=_o.networkSubscribe)===null||So===void 0||So.emit("network",va,Oo,"forbidden",Lo.message))}if(No){var Co=window,Ro=null,jo=!1,zo=He(),Io=document.createElement("script");Co[No]=function(Fo){var Go,Vo,Wo=He(),Yo=Wo-zo;if(delete Co[No],Io.parentNode&&Io.parentNode.removeChild(Io),Ro!==null&&(window.clearTimeout(Ro),Ro=null),jo!==!0){if(Fo.indexOf("data:")!==0){var Ko=new zt(va,"Script",500);return bo(Ko),To(Ko),void((Go=_o.networkSubscribe)===null||Go===void 0||Go.emit("network",va,"Script","error",Ko.message))}var ts=Fo.split(","),Jo=(ts[0].match(/:(.*?);/)||[])[1],rs=ts[1];if(_o.responseType==="arraybuffer"||_o.responseType==="blob"){for(var ls=atob(ts[1]),ss=ls.length,us=new Uint8Array(ss),ms=0;ms<ss;ms++)us[ms]=ls.charCodeAt(ms);rs=_o.responseType==="arraybuffer"?us.buffer:new Blob([us],{type:Jo})}var As={body:rs,meta:{source:va,requestTime:zo,responseTime:Wo,costs:Yo,headers:{}}};xo(As),Eo(As),(Vo=_o.networkSubscribe)===null||Vo===void 0||Vo.emit("network",va,"Script","ok",JSON.stringify(As.meta)),jo=!0}},Io.src=va,document.body.appendChild(Io),typeof _o.timeout=="number"&&(Ro=window.setTimeout(function(){var Fo;if(Ro=null,jo!==!0){jo=!0;var Go=new It(va,"Script",_o.timeout||NaN);bo(Go),To(Go),(Fo=_o.networkSubscribe)===null||Fo===void 0||Fo.emit("network",va,"Script","timeout",Go.message)}},_o.timeout))}else{var Po=He(),Bo=!1,ko=new XMLHttpRequest,Uo=function(){ko&&(ko.removeEventListener("timeout",Qo,!1),ko.removeEventListener("progress",qo,!1),ko.removeEventListener("load",Zo,!1),ko.removeEventListener("error",Xo,!1)),ko=null,Uo=Qe},Qo=function(){var Fo;if(Bo!==!0){Bo=!0,Uo();var Go=new It(va,"XMLHttpRequest",_o.timeout||NaN);bo(Go),To(Go),(Fo=_o.networkSubscribe)===null||Fo===void 0||Fo.emit("network",va,"XMLHttpRequest","timeout",Go.message)}},qo=function(Fo){if(Bo!==!0&&Fo.lengthComputable){var Go=Fo.loaded,Vo=Fo.total;wo(Go/Vo)}},Zo=function(Fo){var Go;if(Bo!==!0){Bo=!0,Uo();var Vo=He(),Wo=Vo-Po,Yo=function(Jo){if(!Jo)return{};for(var rs={},ls=Jo.trim().split(`
`),ss=0;ss<ls.length;ss++){var us=ls[ss],ms=us.indexOf(":"),As=us.slice(0,ms).trim().toLowerCase(),Os=us.slice(ms+1).trim();Os&&(rs[As]?rs[As]+=", "+Os:rs[As]=Os)}return rs}(this.getAllResponseHeaders()),Ko=Fo.total,ts={body:this.response,meta:{source:va,requestTime:Po,responseTime:Vo,costs:Wo,headers:Yo,size:Ko}};xo(ts),Eo(ts),(Go=_o.networkSubscribe)===null||Go===void 0||Go.emit("network",va,"XMLHttpRequest","ok",JSON.stringify(ts.meta))}},Xo=function(){var Fo;if(Bo!==!0){Bo=!0,Uo();var Go=new zt(va,"XMLHttpRequest",this.status);bo(Go),To(Go),(Fo=_o.networkSubscribe)===null||Fo===void 0||Fo.emit("network",va,"XMLHttpRequest","error",Go.message)}};ko.addEventListener("timeout",Qo,!1),ko.addEventListener("progress",qo,!1),ko.addEventListener("load",Zo,!1),ko.addEventListener("error",Xo,!1),_o.responseType&&(ko.responseType=_o.responseType),typeof _o.timeout=="number"&&(ko.timeout=_o.timeout),ko.open("GET",va,!0),ko.send(null)}})}var Pt={};function Bt(va,_o,xo,bo,wo,Eo){return _o===void 0&&(_o={}),xo===void 0&&(xo=Qe),bo===void 0&&(bo=Qe),wo===void 0&&(wo=Qe),new Promise(function(To,So){var $o,Do=_o.allowHosts?Et.concat(_o.allowHosts):Et.slice(),No=Lt(va);if(location.hostname.length!==0&&!wt(location.hostname)&&Et.filter(function(Po){return Tt(Po,location.hostname)}).length===0&&!wt(No)&&Do.filter(function(Po){return Tt(Po,No)}).length===0){var Oo=new jt(va,"Image","request host("+No+") is not allowed");return bo(Oo),So(Oo),void(($o=_o.networkSubscribe)===null||$o===void 0||$o.emit("network",va,"Image","forbidden",Oo.message))}var Lo=Eo!=null?Eo:new Image,Co=He(),Ro=!1,jo=null,zo=function(){var Po;if(Lo.removeEventListener("load",zo,!1),Lo.removeEventListener("error",Io,!1),jo!==null&&(clearTimeout(jo),jo=null),Ro!==!0){var Bo=He();Ro=!0;var ko={body:Lo,meta:{headers:{},source:va,requestTime:Co,responseTime:Bo,costs:Bo-Co}};wo(1),xo(ko),To(ko),(Po=_o.networkSubscribe)===null||Po===void 0||Po.emit("network",va,"Image","ok",JSON.stringify(ko.meta))}},Io=function(Po){var Bo;if(Lo.removeEventListener("load",zo,!1),Lo.removeEventListener("error",Io,!1),jo!==null&&(clearTimeout(jo),jo=null),Ro!==!0){Ro=!0;var ko=new zt(va,"Image",0);bo(ko),So(ko),(Bo=_o.networkSubscribe)===null||Bo===void 0||Bo.emit("network",va,"Image","ok",ko.message)}};typeof _o.timeout=="number"&&(jo=window.setTimeout(function(){var Po;if(Lo.removeEventListener("load",zo,!1),Lo.removeEventListener("error",Io,!1),jo=null,Ro!==!0){Ro=!0;var Bo=new It(va,"Image",_o.timeout);bo(Bo),So(Bo),(Po=_o.networkSubscribe)===null||Po===void 0||Po.emit("network",va,"Image","timeout",Bo.message)}},_o.timeout)),Lo.addEventListener("load",zo,!1),Lo.addEventListener("error",Io,!1),wo(0),Lo.src=va})}var _t=null,Ut=!1,Rt=[];function Qt(va){if(va===void 0&&(va=!1),va||!Ut)if(_t)Ut=!1;else{Ut=!0;var _o=Rt.shift();if(_o){try{_o()}catch{}We.shared.add(function(){return Qt(!0)},!0,2)}else Ut=!1}}function Yt(){_t=null,Qt()}function Ft(va){return new Promise(function(_o,xo){Rt.push(function(){try{_o(va())}catch(bo){xo(bo)}}),Qt()})}var Vt={OutWindow:function(){this._windowSize=0}};Vt.OutWindow.prototype.create=function(va){this._buffer&&this._windowSize===va||(this._buffer=[]),this._windowSize=va,this._pos=0,this._streamPos=0},Vt.OutWindow.prototype.flush=function(){var va=this._pos-this._streamPos;if(va!==0){for(;va--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},Vt.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},Vt.OutWindow.prototype.setStream=function(va){this.releaseStream(),this._stream=va},Vt.OutWindow.prototype.init=function(va){va||(this._streamPos=0,this._pos=0)},Vt.OutWindow.prototype.copyBlock=function(va,_o){var xo=this._pos-va-1;for(xo<0&&(xo+=this._windowSize);_o--;)xo>=this._windowSize&&(xo=0),this._buffer[this._pos++]=this._buffer[xo++],this._pos>=this._windowSize&&this.flush()},Vt.OutWindow.prototype.putByte=function(va){this._buffer[this._pos++]=va,this._pos>=this._windowSize&&this.flush()},Vt.OutWindow.prototype.getByte=function(va){var _o=this._pos-va-1;return _o<0&&(_o+=this._windowSize),this._buffer[_o]},Vt.RangeDecoder=function(){},Vt.RangeDecoder.prototype.setStream=function(va){this._stream=va},Vt.RangeDecoder.prototype.releaseStream=function(){this._stream=null},Vt.RangeDecoder.prototype.init=function(){var va=5;for(this._code=0,this._range=-1;va--;)this._code=this._code<<8|this._stream.readByte()},Vt.RangeDecoder.prototype.decodeDirectBits=function(va){for(var _o,xo=0,bo=va;bo--;)this._range>>>=1,_o=this._code-this._range>>>31,this._code-=this._range&_o-1,xo=xo<<1|1-_o,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return xo},Vt.RangeDecoder.prototype.decodeBit=function(va,_o){var xo=va[_o],bo=(this._range>>>11)*xo;return(2147483648^this._code)<(2147483648^bo)?(this._range=bo,va[_o]+=2048-xo>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=bo,this._code-=bo,va[_o]-=xo>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},Vt.initBitModels=function(va,_o){for(;_o--;)va[_o]=1024},Vt.BitTreeDecoder=function(va){this._models=[],this._numBitLevels=va},Vt.BitTreeDecoder.prototype.init=function(){Vt.initBitModels(this._models,1<<this._numBitLevels)},Vt.BitTreeDecoder.prototype.decode=function(va){for(var _o=1,xo=this._numBitLevels;xo--;)_o=_o<<1|va.decodeBit(this._models,_o);return _o-(1<<this._numBitLevels)},Vt.BitTreeDecoder.prototype.reverseDecode=function(va){for(var _o,xo=1,bo=0,wo=0;wo<this._numBitLevels;++wo)xo=xo<<1|(_o=va.decodeBit(this._models,xo)),bo|=_o<<wo;return bo},Vt.reverseDecode2=function(va,_o,xo,bo){for(var wo,Eo=1,To=0,So=0;So<bo;++So)Eo=Eo<<1|(wo=xo.decodeBit(va,_o+Eo)),To|=wo<<So;return To},Vt.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new Vt.BitTreeDecoder(8),this._numPosStates=0},Vt.LenDecoder.prototype.create=function(va){for(;this._numPosStates<va;++this._numPosStates)this._lowCoder[this._numPosStates]=new Vt.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new Vt.BitTreeDecoder(3)},Vt.LenDecoder.prototype.init=function(){var va=this._numPosStates;for(Vt.initBitModels(this._choice,2);va--;)this._lowCoder[va].init(),this._midCoder[va].init();this._highCoder.init()},Vt.LenDecoder.prototype.decode=function(va,_o){return va.decodeBit(this._choice,0)===0?this._lowCoder[_o].decode(va):va.decodeBit(this._choice,1)===0?8+this._midCoder[_o].decode(va):16+this._highCoder.decode(va)},Vt.Decoder2=function(){this._decoders=[]},Vt.Decoder2.prototype.init=function(){Vt.initBitModels(this._decoders,768)},Vt.Decoder2.prototype.decodeNormal=function(va){var _o=1;do _o=_o<<1|va.decodeBit(this._decoders,_o);while(_o<256);return 255&_o},Vt.Decoder2.prototype.decodeWithMatchByte=function(va,_o){var xo,bo,wo=1;do if(xo=_o>>7&1,_o<<=1,wo=wo<<1|(bo=va.decodeBit(this._decoders,(1+xo<<8)+wo)),xo!==bo){for(;wo<256;)wo=wo<<1|va.decodeBit(this._decoders,wo);break}while(wo<256);return 255&wo},Vt.LiteralDecoder=function(){},Vt.LiteralDecoder.prototype.create=function(va,_o){var xo;if(!this._coders||this._numPrevBits!==_o||this._numPosBits!==va)for(this._numPosBits=va,this._posMask=(1<<va)-1,this._numPrevBits=_o,this._coders=[],xo=1<<this._numPrevBits+this._numPosBits;xo--;)this._coders[xo]=new Vt.Decoder2},Vt.LiteralDecoder.prototype.init=function(){for(var va=1<<this._numPrevBits+this._numPosBits;va--;)this._coders[va].init()},Vt.LiteralDecoder.prototype.getDecoder=function(va,_o){return this._coders[((va&this._posMask)<<this._numPrevBits)+((255&_o)>>>8-this._numPrevBits)]},Vt.Decoder=function(){this._outWindow=new Vt.OutWindow,this._rangeDecoder=new Vt.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new Vt.BitTreeDecoder(4),this._lenDecoder=new Vt.LenDecoder,this._repLenDecoder=new Vt.LenDecoder,this._literalDecoder=new Vt.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new Vt.BitTreeDecoder(6),this._posSlotDecoder[1]=new Vt.BitTreeDecoder(6),this._posSlotDecoder[2]=new Vt.BitTreeDecoder(6),this._posSlotDecoder[3]=new Vt.BitTreeDecoder(6)},Vt.Decoder.prototype.setDictionarySize=function(va){return!(va<0)&&(this._dictionarySize!==va&&(this._dictionarySize=va,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},Vt.Decoder.prototype.setLcLpPb=function(va,_o,xo){var bo=1<<xo;return!(va>8||_o>4||xo>4)&&(this._literalDecoder.create(_o,va),this._lenDecoder.create(bo),this._repLenDecoder.create(bo),this._posStateMask=bo-1,!0)},Vt.Decoder.prototype.init=function(){var va=4;for(this._outWindow.init(!1),Vt.initBitModels(this._isMatchDecoders,192),Vt.initBitModels(this._isRep0LongDecoders,192),Vt.initBitModels(this._isRepDecoders,12),Vt.initBitModels(this._isRepG0Decoders,12),Vt.initBitModels(this._isRepG1Decoders,12),Vt.initBitModels(this._isRepG2Decoders,12),Vt.initBitModels(this._posDecoders,114),this._literalDecoder.init();va--;)this._posSlotDecoder[va].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},Vt.Decoder.prototype.decode=function(va,_o,xo){var bo,wo,Eo,To,So,$o,Do=0,No=0,Oo=0,Lo=0,Co=0,Ro=0,jo=0;for(this._rangeDecoder.setStream(va),this._outWindow.setStream(_o),this.init();xo<0||Ro<xo;)if(bo=Ro&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Do<<4)+bo)===0)wo=this._literalDecoder.getDecoder(Ro++,jo),jo=Do>=7?wo.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(No)):wo.decodeNormal(this._rangeDecoder),this._outWindow.putByte(jo),Do=Do<4?0:Do-(Do<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Do)===1)Eo=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Do)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Do<<4)+bo)===0&&(Do=Do<7?9:11,Eo=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Do)===0?To=Oo:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Do)===0?To=Lo:(To=Co,Co=Lo),Lo=Oo),Oo=No,No=To),Eo===0&&(Eo=2+this._repLenDecoder.decode(this._rangeDecoder,bo),Do=Do<7?8:11);else if(Co=Lo,Lo=Oo,Oo=No,Eo=2+this._lenDecoder.decode(this._rangeDecoder,bo),Do=Do<7?7:10,(So=this._posSlotDecoder[Eo<=5?Eo-2:3].decode(this._rangeDecoder))>=4){if(No=(2|1&So)<<($o=(So>>1)-1),So<14)No+=Vt.reverseDecode2(this._posDecoders,No-So-1,this._rangeDecoder,$o);else if(No+=this._rangeDecoder.decodeDirectBits($o-4)<<4,(No+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(No===-1)break;return!1}}else No=So;if(No>=Ro||No>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(No,Eo),Ro+=Eo,jo=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},Vt.Decoder.prototype.setDecoderProperties=function(va){var _o,xo,bo,wo,Eo;return!(va.size<5)&&(xo=(_o=va.readByte())%9,bo=(_o=~~(_o/9))%5,wo=~~(_o/5),!!this.setLcLpPb(xo,bo,wo)&&(Eo=va.readByte(),Eo|=va.readByte()<<8,Eo|=va.readByte()<<16,Eo+=16777216*va.readByte(),this.setDictionarySize(Eo)))},Vt.decompress=function(va,_o,xo,bo){var wo=new Vt.Decoder;if(!wo.setDecoderProperties(va))throw"Incorrect stream properties";if(!wo.decode(_o,xo,bo))throw"Error in data stream";return!0},Vt.decompressFile=function(va,_o){var xo,bo=new Vt.Decoder;if(!bo.setDecoderProperties(va))throw"Incorrect stream properties";if(xo=va.readByte(),xo|=va.readByte()<<8,xo|=va.readByte()<<16,xo+=16777216*va.readByte(),va.readByte(),va.readByte(),va.readByte(),va.readByte(),!bo.decode(va,_o,xo))throw"Error in data stream";return!0};var Ht=typeof Worker!="undefined"&&typeof Blob!="undefined",Gt="";if(Ht)try{var Wt=new Blob([`
  self.onmessage = function (event) {
    var Packet = event.data;
    var Result = null;
    try {
      if (!Packet.PacketID) {
        throw new Error('No incoming id.');
      }
      if (!Packet.Data) {
        throw new Error('No input data.');
      }
      if (Packet.Type == 'compress') {
        // C: checking if input is valid
        if (Packet.Data.constructor != Uint8Array) {
          throw new Error('Input data is not Uint8Array.');
        }
        // C: encoding data
        Result = Util.compressFile(Packet.Data, null, Packet.Level, null);
      } else if (Packet.Type == 'decompress') {
        // C: checking if input is valid
        if (Packet.Data.constructor != Uint8Array) {
          throw new Error('Input data is not Uint8Array.');
        }
        var inStream = {
          data: Packet.Data,
          offset: 0,
          readByte () {
            return this.data[this.offset++];
          }
        };
        var partLength = inStream.data.length;
        var outStream = {
          data: [],
          offset: 0,
          writeByte (value) {
            var partIndex = Math.floor(this.offset / partLength);
            if (!this.data[partIndex]) {
              this.data[partIndex] = new Uint8Array(partLength);
            }
            this.data[partIndex][this.offset % partLength] = value;
            this.offset++;
          }
        }
        // C: decoding data

        LZMA.decompressFile(inStream, outStream);
        Result = new Uint8Array(outStream.offset)
        for (var i = 0; i < outStream.offset; i++) {
          Result[i] = outStream.data[Math.floor(i / partLength)][i % partLength];
        }
      }
      postMessage({ PacketID: Packet.PacketID, Result, Error: null }, [Result.buffer]);
    } catch (error) {
      postMessage({ PacketID: Packet.PacketID, Error: error.toString() });
    }
  };


  /*
  Copyright (c) 2011 Juan Mellado

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
  */

  /*
  References:
  - "LZMA SDK" by Igor Pavlov
    http://www.7-zip.org/sdk.html
  */

  var LZMA = LZMA || {};

  LZMA.OutWindow = function(){
    this._windowSize = 0;
  };

  LZMA.OutWindow.prototype.create = function(windowSize){
    if ( (!this._buffer) || (this._windowSize !== windowSize) ){
      this._buffer = [];
    }
    this._windowSize = windowSize;
    this._pos = 0;
    this._streamPos = 0;
  };

  LZMA.OutWindow.prototype.flush = function(){
    var size = this._pos - this._streamPos;
    if (size !== 0){
      while(size --){
        this._stream.writeByte(this._buffer[this._streamPos ++]);
      }
      if (this._pos >= this._windowSize){
        this._pos = 0;
      }
      this._streamPos = this._pos;
    }
  };

  LZMA.OutWindow.prototype.releaseStream = function(){
    this.flush();
    this._stream = null;
  };

  LZMA.OutWindow.prototype.setStream = function(stream){
    this.releaseStream();
    this._stream = stream;
  };

  LZMA.OutWindow.prototype.init = function(solid){
    if (!solid){
      this._streamPos = 0;
      this._pos = 0;
    }
  };

  LZMA.OutWindow.prototype.copyBlock = function(distance, len){
    var pos = this._pos - distance - 1;
    if (pos < 0){
      pos += this._windowSize;
    }
    while(len --){
      if (pos >= this._windowSize){
        pos = 0;
      }
      this._buffer[this._pos ++] = this._buffer[pos ++];
      if (this._pos >= this._windowSize){
        this.flush();
      }
    }
  };

  LZMA.OutWindow.prototype.putByte = function(b){
    this._buffer[this._pos ++] = b;
    if (this._pos >= this._windowSize){
      this.flush();
    }
  };

  LZMA.OutWindow.prototype.getByte = function(distance){
    var pos = this._pos - distance - 1;
    if (pos < 0){
      pos += this._windowSize;
    }
    return this._buffer[pos];
  };

  LZMA.RangeDecoder = function(){
  };

  LZMA.RangeDecoder.prototype.setStream = function(stream){
    this._stream = stream;
  };

  LZMA.RangeDecoder.prototype.releaseStream = function(){
    this._stream = null;
  };

  LZMA.RangeDecoder.prototype.init = function(){
    var i = 5;

    this._code = 0;
    this._range = -1;

    while(i --){
      this._code = (this._code << 8) | this._stream.readByte();
    }
  };

  LZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){
    var result = 0, i = numTotalBits, t;

    while(i --){
      this._range >>>= 1;
      t = (this._code - this._range) >>> 31;
      this._code -= this._range & (t - 1);
      result = (result << 1) | (1 - t);

      if ( (this._range & 0xff000000) === 0){
        this._code = (this._code << 8) | this._stream.readByte();
        this._range <<= 8;
      }
    }

    return result;
  };

  LZMA.RangeDecoder.prototype.decodeBit = function(probs, index){
    var prob = probs[index],
        newBound = (this._range >>> 11) * prob;

    if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){
      this._range = newBound;
      probs[index] += (2048 - prob) >>> 5;
      if ( (this._range & 0xff000000) === 0){
        this._code = (this._code << 8) | this._stream.readByte();
        this._range <<= 8;
      }
      return 0;
    }

    this._range -= newBound;
    this._code -= newBound;
    probs[index] -= prob >>> 5;
    if ( (this._range & 0xff000000) === 0){
      this._code = (this._code << 8) | this._stream.readByte();
      this._range <<= 8;
    }
    return 1;
  };

  LZMA.initBitModels = function(probs, len){
    while(len --){
      probs[len] = 1024;
    }
  };

  LZMA.BitTreeDecoder = function(numBitLevels){
    this._models = [];
    this._numBitLevels = numBitLevels;
  };

  LZMA.BitTreeDecoder.prototype.init = function(){
    LZMA.initBitModels(this._models, 1 << this._numBitLevels);
  };

  LZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){
    var m = 1, i = this._numBitLevels;

    while(i --){
      m = (m << 1) | rangeDecoder.decodeBit(this._models, m);
    }
    return m - (1 << this._numBitLevels);
  };

  LZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){
    var m = 1, symbol = 0, i = 0, bit;

    for (; i < this._numBitLevels; ++ i){
      bit = rangeDecoder.decodeBit(this._models, m);
      m = (m << 1) | bit;
      symbol |= bit << i;
    }
    return symbol;
  };

  LZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){
    var m = 1, symbol = 0, i = 0, bit;

    for (; i < numBitLevels; ++ i){
      bit = rangeDecoder.decodeBit(models, startIndex + m);
      m = (m << 1) | bit;
      symbol |= bit << i;
    }
    return symbol;
  };

  LZMA.LenDecoder = function(){
    this._choice = [];
    this._lowCoder = [];
    this._midCoder = [];
    this._highCoder = new LZMA.BitTreeDecoder(8);
    this._numPosStates = 0;
  };

  LZMA.LenDecoder.prototype.create = function(numPosStates){
    for (; this._numPosStates < numPosStates; ++ this._numPosStates){
      this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);
      this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);
    }
  };

  LZMA.LenDecoder.prototype.init = function(){
    var i = this._numPosStates;
    LZMA.initBitModels(this._choice, 2);
    while(i --){
      this._lowCoder[i].init();
      this._midCoder[i].init();
    }
    this._highCoder.init();
  };

  LZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){
    if (rangeDecoder.decodeBit(this._choice, 0) === 0){
      return this._lowCoder[posState].decode(rangeDecoder);
    }
    if (rangeDecoder.decodeBit(this._choice, 1) === 0){
      return 8 + this._midCoder[posState].decode(rangeDecoder);
    }
    return 16 + this._highCoder.decode(rangeDecoder);
  };

  LZMA.Decoder2 = function(){
    this._decoders = [];
  };

  LZMA.Decoder2.prototype.init = function(){
    LZMA.initBitModels(this._decoders, 0x300);
  };

  LZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){
    var symbol = 1;

    do{
      symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);
    }while(symbol < 0x100);

    return symbol & 0xff;
  };

  LZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){
    var symbol = 1, matchBit, bit;

    do{
      matchBit = (matchByte >> 7) & 1;
      matchByte <<= 1;
      bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);
      symbol = (symbol << 1) | bit;
      if (matchBit !== bit){
        while(symbol < 0x100){
          symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);
        }
        break;
      }
    }while(symbol < 0x100);

    return symbol & 0xff;
  };

  LZMA.LiteralDecoder = function(){
  };

  LZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){
    var i;

    if (this._coders
      && (this._numPrevBits === numPrevBits)
      && (this._numPosBits === numPosBits) ){
      return;
    }
    this._numPosBits = numPosBits;
    this._posMask = (1 << numPosBits) - 1;
    this._numPrevBits = numPrevBits;

    this._coders = [];

    i = 1 << (this._numPrevBits + this._numPosBits);
    while(i --){
      this._coders[i] = new LZMA.Decoder2();
    }
  };

  LZMA.LiteralDecoder.prototype.init = function(){
    var i = 1 << (this._numPrevBits + this._numPosBits);
    while(i --){
      this._coders[i].init();
    }
  };

  LZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){
    return this._coders[( (pos & this._posMask) << this._numPrevBits)
      + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];
  };

  LZMA.Decoder = function(){
    this._outWindow = new LZMA.OutWindow();
    this._rangeDecoder = new LZMA.RangeDecoder();
    this._isMatchDecoders = [];
    this._isRepDecoders = [];
    this._isRepG0Decoders = [];
    this._isRepG1Decoders = [];
    this._isRepG2Decoders = [];
    this._isRep0LongDecoders = [];
    this._posSlotDecoder = [];
    this._posDecoders = [];
    this._posAlignDecoder = new LZMA.BitTreeDecoder(4);
    this._lenDecoder = new LZMA.LenDecoder();
    this._repLenDecoder = new LZMA.LenDecoder();
    this._literalDecoder = new LZMA.LiteralDecoder();
    this._dictionarySize = -1;
    this._dictionarySizeCheck = -1;

    this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);
    this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);
    this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);
    this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);
  };

  LZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){
    if (dictionarySize < 0){
      return false;
    }
    if (this._dictionarySize !== dictionarySize){
      this._dictionarySize = dictionarySize;
      this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);
      this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );
    }
    return true;
  };

  LZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){
    var numPosStates = 1 << pb;

    if (lc > 8 || lp > 4 || pb > 4){
      return false;
    }

    this._literalDecoder.create(lp, lc);

    this._lenDecoder.create(numPosStates);
    this._repLenDecoder.create(numPosStates);
    this._posStateMask = numPosStates - 1;

    return true;
  };

  LZMA.Decoder.prototype.init = function(){
    var i = 4;

    this._outWindow.init(false);

    LZMA.initBitModels(this._isMatchDecoders, 192);
    LZMA.initBitModels(this._isRep0LongDecoders, 192);
    LZMA.initBitModels(this._isRepDecoders, 12);
    LZMA.initBitModels(this._isRepG0Decoders, 12);
    LZMA.initBitModels(this._isRepG1Decoders, 12);
    LZMA.initBitModels(this._isRepG2Decoders, 12);
    LZMA.initBitModels(this._posDecoders, 114);

    this._literalDecoder.init();

    while(i --){
      this._posSlotDecoder[i].init();
    }

    this._lenDecoder.init();
    this._repLenDecoder.init();
    this._posAlignDecoder.init();
    this._rangeDecoder.init();
  };

  LZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){
    var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,
        posState, decoder2, len, distance, posSlot, numDirectBits;

    this._rangeDecoder.setStream(inStream);
    this._outWindow.setStream(outStream);

    this.init();

    while(outSize < 0 || nowPos64 < outSize){
      posState = nowPos64 & this._posStateMask;

      if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){
        decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);

        if (state >= 7){
          prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );
        }else{
          prevByte = decoder2.decodeNormal(this._rangeDecoder);
        }
        this._outWindow.putByte(prevByte);

        state = state < 4? 0: state - (state < 10? 3: 6);

      }else{

        if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){
          len = 0;
          if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){
            if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){
              state = state < 7? 9: 11;
              len = 1;
            }
          }else{
            if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){
              distance = rep1;
            }else{
              if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){
                distance = rep2;
              }else{
                distance = rep3;
                rep3 = rep2;
              }
              rep2 = rep1;
            }
            rep1 = rep0;
            rep0 = distance;
          }
          if (len === 0){
            len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);
            state = state < 7? 8: 11;
          }
        }else{
          rep3 = rep2;
          rep2 = rep1;
          rep1 = rep0;

          len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);
          state = state < 7? 7: 10;

          posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);
          if (posSlot >= 4){

            numDirectBits = (posSlot >> 1) - 1;
            rep0 = (2 | (posSlot & 1) ) << numDirectBits;

            if (posSlot < 14){
              rep0 += LZMA.reverseDecode2(this._posDecoders,
                  rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);
            }else{
              rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;
              rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);
              if (rep0 < 0){
                if (rep0 === -1){
                  break;
                }
                return false;
              }
            }
          }else{
            rep0 = posSlot;
          }
        }

        if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){
          return false;
        }

        this._outWindow.copyBlock(rep0, len);
        nowPos64 += len;
        prevByte = this._outWindow.getByte(0);
      }
    }

    this._outWindow.flush();
    this._outWindow.releaseStream();
    this._rangeDecoder.releaseStream();

    return true;
  };

  LZMA.Decoder.prototype.setDecoderProperties = function(properties){
    var value, lc, lp, pb, dictionarySize;

    if (properties.size < 5){
      return false;
    }

    value = properties.readByte();
    lc = value % 9;
    value = ~~(value / 9);
    lp = value % 5;
    pb = ~~(value / 5);

    if ( !this.setLcLpPb(lc, lp, pb) ){
      return false;
    }

    dictionarySize = properties.readByte();
    dictionarySize |= properties.readByte() << 8;
    dictionarySize |= properties.readByte() << 16;
    dictionarySize += properties.readByte() * 16777216;

    return this.setDictionarySize(dictionarySize);
  };

  LZMA.decompress = function(properties, inStream, outStream, outSize){
    var decoder = new LZMA.Decoder();

    if ( !decoder.setDecoderProperties(properties) ){
      throw "Incorrect stream properties";
    }

    if ( !decoder.decode(inStream, outStream, outSize) ){
      throw "Error in data stream";
    }

    return true;
  };

  LZMA.decompressFile = function(inStream, outStream){
    var decoder = new LZMA.Decoder(), outSize;

    if ( !decoder.setDecoderProperties(inStream) ){
      throw "Incorrect stream properties";
    }

    outSize = inStream.readByte();
    outSize |= inStream.readByte() << 8;
    outSize |= inStream.readByte() << 16;
    outSize += inStream.readByte() * 16777216;

    inStream.readByte();
    inStream.readByte();
    inStream.readByte();
    inStream.readByte();

    if ( !decoder.decode(inStream, outStream, outSize) ){
      throw "Error in data stream";
    }

    return true;
  };
`],{type:"text/javascript"});Gt=URL.createObjectURL(Wt)}catch(va){}var qt=function(){function va(){var _o=this;if(this.callCounter=0,this.requests=[],!Ht)throw new Error("LZMACaller cannot work in this broswer.");var xo=this.worker=new Worker(Gt);xo.onmessage=function(bo){var wo,Eo,To=bo.data,So=To.PacketID,$o=To.Result,Do=To.Error;Do?(Eo=_o.requests[So])===null||Eo===void 0||Eo.onCompleteCallback(new Error(Do)):(wo=_o.requests[So])===null||wo===void 0||wo.onCompleteCallback(null,$o),delete _o.requests[So]},xo.onerror=function(bo){return console.error(bo)}}return va.prototype.compress=function(_o,xo,bo){var wo=++this.callCounter;this.requests[wo]={onCompleteCallback:bo},this.worker.postMessage({Type:"compress",PacketID:wo,Data:_o,Level:xo},[_o.buffer])},va.prototype.decompress=function(_o,xo){var bo=++this.callCounter;this.requests[bo]={onCompleteCallback:xo},this.worker.postMessage({Type:"decompress",PacketID:bo,Data:_o},[_o.buffer])},va.prototype.terminate=function(){this.worker.terminate()},va.support=Ht,va}();function Kt(va){return Array.prototype.reduce.call(va,function(_o,xo,bo){return _o|xo<<8*bo},0)}function Zt(va){for(var _o=new Uint8Array(va),xo=Kt(_o.slice(0,4)),bo=[],wo=[],Eo=4+4*xo,To=0;To<xo;To++)wo[To]=Kt(_o.slice(4+4*To,8+4*To)),bo[To]=To===xo-1?_o.subarray(Eo,Eo+wo[To]):_o.slice(Eo,Eo+wo[To]),Eo+=wo[To];return qt.support?function(So){for(var $o=[],Do=So.length,No=function(Lo){$o.push(new Promise(function(Co,Ro){var jo=new qt;jo.decompress(So[Lo],function(zo,Io){if(jo.terminate(),zo)return Ro(zo);Co(Io)})}))},Oo=0;Oo<Do;Oo++)No(Oo);return Promise.all($o)}(bo):Promise.resolve(function(So){for(var $o,Do=[],No=So.length,Oo=function(Co){var Ro={data:So[Co],offset:0,readByte:function(){return this.data[this.offset++]}},jo=Ro.data.length,zo={data:[],offset:0,writeByte:function(Po){var Bo=Math.floor(this.offset/jo);this.data[Bo]||(this.data[Bo]=new Uint8Array(jo)),this.data[Bo][this.offset%jo]=Po,this.offset++}};Vt.decompressFile(Ro,zo),$o=new Uint8Array(zo.offset);for(var Io=0;Io<zo.offset;Io++)$o[Io]=zo.data[Math.floor(Io/jo)][Io%jo];Do.push($o)},Lo=0;Lo<No;Lo++)Oo(Lo);return Do}(bo))}function Xt(va,_o){for(var xo={},bo=0,wo=_o;bo<wo.length;bo++){var Eo=wo[bo];Eo in va&&(xo[Eo]=va[Eo])}return xo}var Jt="//vrlab-public.ljcdn.com/",$t="//vrlab-image[1-4].ljcdn.com/";function ei(va,_o){var xo,bo=va.split("?")[0],wo=bo.split(".").pop();if(wo==="jpeg"&&(wo="jpg"),wo!=="png"&&wo!=="jpg")return va;var Eo="";if(_o.format!==void 0&&_o.format!==wo&&(Eo+="/format/"+_o.format),_o.cut!==void 0&&(Eo+="/cut/"+_o.cut[2]+"x"+_o.cut[3]+"x"+_o.cut[0]+"x"+_o.cut[1]),_o.size!==void 0&&(Eo+="/thumbnail/"+_o.size+"x"),_o.quality!==void 0){var To=(xo=_o.format)!==null&&xo!==void 0?xo:wo;To&&["jpg","webp","tpg","heif","avif"].indexOf(To)>=0&&(Eo+="/quality/"+_o.quality)}return Eo.length&&(Eo="?imageMogr2"+Eo),bo+Eo}function ti(va,_o){return va.indexOf(Jt)>=0?(/\.basis(\?|$)/.test(va)&&_o.basisLoaderInitialized!==!0&&(va=va.replace(/\.basis(\?|$)/,".jpg$1")),ei(function(xo,bo){var wo=bo.split("."),Eo=wo[0],To=wo.slice(1);if(Eo==="texture")return xo.replace(Jt,$t.replace("[1-4]","3"));if(Eo==="pano"||Eo==="pano_luminance")switch(To[0],To[1]){case"front":case"left":case"up":return xo.replace(Jt,$t.replace("[1-4]","1"));case"down":case"right":case"back":return xo.replace(Jt,$t.replace("[1-4]","2"))}else if(Eo==="pano_tile"||Eo==="pano_tile_luminance"){To[0],To[1];var So=To[2],$o=To[3],Do=To[4],No=Math.pow(2,Number(So))*Number($o)+Number(Do);if(!isNaN(No))return xo.replace(Jt,"//vr-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(No%2+1)))}return xo.replace(Jt,$t.replace("[1-4]","3"))}(va,_o.key),_o)):va.indexOf("//test-vr-public.realsee-cdn.com/")>=0?(/\.basis(\?|$)/.test(va)&&_o.basisLoaderInitialized!==!0&&(va=va.replace(/\.basis(\?|$)/,".jpg$1")),ei(va.replace("//test-vr-public.realsee-cdn.com/","//test-vr-image.realsee-cdn.com/"),_o)):va}var ii=!1;try{ii=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(va){}var ni=[],ri=[];function oi(){var va=this;/^blob\:/.test(this.src)&&URL.revokeObjectURL(this.src),this.onerror=this.onload=Qe,this.removeAttribute("src"),We.shared.add(function(){ni.push(va)},!0,1)}function si(){ri.push(this)}function ai(){var va;return(va=ni.shift())!==null&&va!==void 0?va:Object.assign(new Image,{crossOrigin:"",close:oi})}function ui(va){return new Promise(function(_o,xo){var bo=ai(),wo=function(){bo.removeEventListener("load",wo,!1),bo.removeEventListener("error",Eo,!1),_o(bo)},Eo=function(){bo.removeEventListener("load",wo,!1),bo.removeEventListener("error",Eo,!1),xo(new Error("image load error: "+bo.src)),bo.close()};bo.addEventListener("load",wo,!1),bo.addEventListener("error",Eo,!1),bo.src=URL.createObjectURL(va)})}function ci(va,_o){if(_o&&(va.width>_o.width||va.height>_o.height)){var xo=function(So,$o){var Do=ri.shift();if(Do)return Do.width=So,Do.height=$o,Do;if(ii){var No=new OffscreenCanvas(So,$o);return Object.assign(No,{close:si})}return No=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(No,{close:si})}(Math.min(va.width,_o.width),Math.min(va.height,_o.height));xo.getContext("2d").drawImage(va,0,0,xo.width,xo.height),va.close();var bo=new r$3.Texture(xo);bo.needsUpdate=!0,bo.flipY=!0;var wo=bo.dispose;return bo.dispose=function(){xo.close(),wo.call(bo)},bo}var Eo=new r$3.Texture(va);Eo.needsUpdate=!0,Eo.flipY=!0;var To=Eo.dispose;return Eo.dispose=function(){va.close(),To.call(Eo)},Eo}var li=new r$3.WebGLRenderTarget(1,1),hi=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$3.Mesh(di),Ai=new r$3.Scene;Ai.add(pi);var fi,Mi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),gi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function yi(va,_o,xo){return _o.flipY!==void 0&&(va.flipY=_o.flipY),_o.format!==void 0&&(va.format=_o.format),_o.encoding!==void 0&&(va.encoding=_o.encoding),_o.minFilter!==void 0&&(va.minFilter=_o.minFilter),_o.magFilter!==void 0&&(va.magFilter=_o.magFilter),xo?new Promise(function(bo){We.shared.add(function(){try{var wo=xo.getRenderTarget();xo.setRenderTarget(li),va instanceof r$3.CubeTexture?(pi.material=gi,gi.uniforms.map.value=va,xo.render(Ai,hi),gi.uniforms.map.value=null):(pi.material=Mi,Mi.uniforms.map.value=va,xo.render(Ai,hi),gi.uniforms.map.value=null),xo.setRenderTarget(wo),bo(va)}catch{bo(va)}},!0,1,1e3)}):Promise.resolve(va)}var mi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,vi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},Ni={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},Di=((fi={})[vi.cTFBC1]=Ni.COMPRESSED_RGB_S3TC_DXT1_EXT,fi[vi.cTFBC3]=Ni.COMPRESSED_RGBA_S3TC_DXT5_EXT,fi),wi=function(){function va(){}return va.setTranscoderPath=function(_o){return this.transcoderPath=_o,this},va.setWorkerLimit=function(_o){return this.workerLimit=_o,this},va.isInitialized=function(){return this.workerPool.filter(function(_o){return _o._initialized}).length!==0},va.detectSupport=function(_o){var xo=this.workerConfig;if(xo.astcSupported=!!_o.extensions.get("WEBGL_compressed_texture_astc"),xo.bptcSupported=!!_o.extensions.get("EXT_texture_compression_bptc"),xo.etcSupported=!!_o.extensions.get("WEBGL_compressed_texture_etc1"),xo.dxtSupported=!!_o.extensions.get("WEBGL_compressed_texture_s3tc"),xo.pvrtcSupported=!!_o.extensions.get("WEBGL_compressed_texture_pvrtc")||!!_o.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),xo.astcSupported)xo.format=va.BASIS_FORMAT.cTFASTC_4x4;else if(xo.bptcSupported)xo.format=va.BASIS_FORMAT.cTFBC7_M5;else if(xo.dxtSupported)xo.format=va.BASIS_FORMAT.cTFBC3;else if(xo.pvrtcSupported)xo.format=va.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!xo.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");xo.format=va.BASIS_FORMAT.cTFETC1}return this},va.createTexture=function(_o){var xo,bo,wo=this,Eo=_o.byteLength,To=this._allocateWorker(Eo).then(function(So){return xo=So,bo=wo.workerNextTaskID++,new Promise(function($o,Do){xo._callbacks[bo]={resolve:$o,reject:Do},xo.postMessage({type:"transcode",id:bo,buffer:_o},[_o])})}).then(function(So){var $o,Do=wo.workerConfig,No=So.width,Oo=So.height,Lo=So.mipmaps;switch(So.format){case vi.cTFASTC_4x4:$o=new r$3.CompressedTexture(Lo,No,Oo,r$3.RGBA_ASTC_4x4_Format);break;case vi.cTFBC1:case vi.cTFBC3:$o=new r$3.CompressedTexture(Lo,No,Oo,Di[Do.format],r$3.UnsignedByteType);break;case vi.cTFETC1:$o=new r$3.CompressedTexture(Lo,No,Oo,r$3.RGB_ETC1_Format);break;case vi.cTFPVRTC1_4_RGB:$o=new r$3.CompressedTexture(Lo,No,Oo,r$3.RGB_PVRTC_4BPPV1_Format);break;case vi.cTFPVRTC1_4_RGBA:$o=new r$3.CompressedTexture(Lo,No,Oo,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return $o.minFilter=Lo.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,$o.magFilter=r$3.LinearFilter,$o.generateMipmaps=!1,$o.needsUpdate=!0,$o});return To.catch(function(){return!0}).then(function(){xo&&bo&&(xo._taskLoad-=Eo,delete xo._callbacks[bo])}),To},va._initTranscoder=function(){var _o=this;if(!this.transcoderPending){var xo=new r$3.FileLoader;xo.setPath(this.transcoderPath);var bo=new Promise(function(To,So){xo.load("basis_transcoder.js",To,void 0,So)}),wo=new r$3.FileLoader;wo.setPath(this.transcoderPath),wo.setResponseType("arraybuffer");var Eo=new Promise(function(To,So){wo.load("basis_transcoder.wasm",To,void 0,So)});this.transcoderPending=Promise.all([bo,Eo]).then(function(To){var So=To[0],$o=To[1],Do=["/* basis_transcoder.js */",So,"/* worker */",mi].join(`
`);_o.workerSourceURL=URL.createObjectURL(new Blob([Do])),_o.transcoderBinary=$o})}return this.transcoderPending},va._allocateWorker=function(_o){var xo=this;return this._initTranscoder().then(function(){if(xo.workerPool.length<xo.workerLimit){var bo=function(Eo){var To=new Worker(Eo);return Object.assign(To,{_callbacks:{},_initialized:!1,_taskLoad:0})}(xo.workerSourceURL);bo._callbacks={},bo._initialized=!1,bo._taskLoad=0,bo.postMessage({type:"init",config:xo.workerConfig,transcoderBinary:xo.transcoderBinary}),bo.onmessage=function(Eo){var To=Eo.data;switch(To.type){case"initialized":bo._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":bo._callbacks[To.id].resolve(To);break;case"error":bo._callbacks[To.id].reject(To);break;default:console.error('BasisTextureLoader: Unexpected message, "'+To.type+'"')}},xo.workerPool.push(bo)}else xo.workerPool.sort(function(Eo,To){return Eo._taskLoad>To._taskLoad?-1:1});var wo=xo.workerPool[xo.workerPool.length-1];return wo._taskLoad+=_o,wo})},va.prototype.dispose=function(){for(var _o=0;_o<va.workerPool.length;_o++)va.workerPool[_o].terminate();return va.workerPool.length=0,this},va.BASIS_FORMAT=vi,va.DXT_FORMAT=Ni,va.DXT_FORMAT_MAP=Di,va.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",va.transcoderBinary=null,va.transcoderPending=null,va.workerLimit=1,va.workerPool=[],va.workerNextTaskID=1,va.workerSourceURL="",va.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},va}();function Ti(va){var _o=va.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return _o?_o[1]:location.protocol}var xi=function(){function va(_o){this.timeout=_o.timeout,this.allowHosts=_o.allowHosts,this.networkSubscribe=_o.networkSubscribe}return va.prototype.setAllowHosts=function(_o){this.allowHosts=_o},va.prototype.setNetworkSubscribe=function(_o){this.networkSubscribe=_o},va.prototype.load=function(_o,xo,bo,wo,Eo,To){xo===void 0&&(xo={}),bo===void 0&&(bo=Qe),wo===void 0&&(wo=Qe),Eo===void 0&&(Eo=Qe);var So=Ti(_o),$o={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe};if(/^https?:$/.test(So)||Ot(_o)){if(/\.basis$/.test(St(_o).split("?")[0])){var Do=null,No="arraybuffer";return xo.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):Ct(_o,t$3.__assign(t$3.__assign({},$o),{responseType:No}),void 0,void 0,Eo).then(function(Co){return Do=Co.meta,wi.createTexture(Co.body)}).then(function(Co){return yi(Co,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Xt(xo,["wrapS","wrapT"])),To)}).then(function(Co){var Ro={meta:Do,body:Co};return bo(Ro),Ro}).catch(function(Co){return wo(Co),Promise.reject(Co)})}return No="blob",Ct(_o,t$3.__assign(t$3.__assign({},$o),{responseType:No}),void 0,void 0,Eo).then(function(Co){return ui(Co.body)}).then(function(Co){return ci(Co,xo.maxSize)}).then(function(Co){return yi(Co,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},xo),To)}).then(function(Co){var Ro={meta:null,body:Co};return bo(Ro),Ro}).catch(function(Co){return wo(Co),Promise.reject(Co)})}var Oo=null,Lo=ai();return Bt(_o,$o,void 0,void 0,Eo,Lo).then(function(Co){return Oo=Co.meta,ci(Co.body,xo.maxSize)}).then(function(Co){return yi(Co,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},xo),To)}).then(function(Co){var Ro={meta:Oo,body:Co};return bo(Ro),Ro}).catch(function(Co){return Lo.close(),wo(Co),Promise.reject(Co)})},va.prototype.loadCube=function(_o,xo,bo,wo,Eo,To){xo===void 0&&(xo={}),bo===void 0&&(bo=Qe),wo===void 0&&(wo=Qe),Eo===void 0&&(Eo=Qe),Array.isArray(_o)||(_o=[_o.right,_o.left,_o.up,_o.down,_o.front,_o.back]);for(var So={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},$o=[],Do=[0,0,0,0,0,0],No=[],Oo=function(Co){var Ro=_o[Co],jo=Ti(Ro),zo=function(ko){Do[Co]=ko,Eo(Do.reduce(function(Uo,Qo){return Uo+Qo},0)/6)};if(/^https?\:$/.test(jo)||Ot(Ro))if(/\.basis$/.test(St(Ro).split("?")[0])){var Io="arraybuffer",Po=Ct(Ro,t$3.__assign(t$3.__assign({},So),{responseType:Io}),void 0,void 0,zo).then(function(ko){return No[Co]=ko.meta,wi.createTexture(ko.body)});$o.push(Po)}else Io="blob",Po=Ct(Ro,t$3.__assign(t$3.__assign({},So),{responseType:Io}),void 0,void 0,zo).then(function(ko){return No[Co]=ko.meta,typeof createImageBitmap!="undefined"?createImageBitmap(ko.body,{colorSpaceConversion:"none"}):ui(ko.body)}),$o.push(Po);else{var Bo=ai();Po=Bt(Ro,So,void 0,void 0,zo,Bo).then(function(ko){return No[Co]=ko.meta,ko.body}).catch(function(ko){return Bo.close(),Promise.reject(ko)}),$o.push(Po)}},Lo=0;Lo<6;Lo++)Oo(Lo);return Promise.all($o).then(function(Co){return Co[0]instanceof r$3.CompressedTexture?function(Ro){var jo=new r$3.CubeTexture(Ro);jo.needsUpdate=!0;var zo=jo.dispose;return jo.dispose=function(){for(var Io=0,Po=Ro;Io<Po.length;Io++)Po[Io].dispose();zo.call(jo)},jo.isCompressedTexture=!0,jo.format=Ro[0].format,jo.minFilter=Ro[0].minFilter,jo.magFilter=Ro[0].magFilter,jo}(Co):function(Ro){var jo=new r$3.CubeTexture(Ro);jo.needsUpdate=!0,jo.flipY=!1;var zo=jo.dispose;return jo.dispose=function(){for(var Io=0,Po=Ro;Io<Po.length;Io++)Po[Io].close();zo.call(jo)},jo}(Co)}).then(function(Co){return Co.isCompressedTexture?yi(Co,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Xt(xo,["wrapS","wrapT"])),To):yi(Co,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},xo),To)}).then(function(Co){var Ro={body:Co,meta:No};return bo(Ro),Ro}).catch(function(Co){for(var Ro=0,jo=$o;Ro<jo.length;Ro++)jo[Ro].then(function(zo){zo instanceof r$3.Texture?zo.dispose():zo.close()}).catch(Qe);return wo(Co),Promise.reject(Co)})},va}(),Ei={computeTangents:function(va){var _o=va.index,xo=va.attributes;if(_o!==null&&xo.position!==void 0&&xo.normal!==void 0&&xo.uv!==void 0){var bo=_o.array,wo=xo.position.array,Eo=xo.normal.array,To=xo.uv.array,So=wo.length/3;xo.tangent===void 0&&va.setAttribute("tangent",new r$3.BufferAttribute(new Float32Array(4*So),4));for(var $o=xo.tangent.array,Do=[],No=[],Oo=0;Oo<So;Oo++)Do[Oo]=new r$3.Vector3,No[Oo]=new r$3.Vector3;var Lo=new r$3.Vector3,Co=new r$3.Vector3,Ro=new r$3.Vector3,jo=new r$3.Vector2,zo=new r$3.Vector2,Io=new r$3.Vector2,Po=new r$3.Vector3,Bo=new r$3.Vector3,ko=va.groups;ko.length===0&&(ko=[{start:0,count:bo.length}]),Oo=0;for(var Uo=ko.length;Oo<Uo;++Oo)for(var Qo=ts=(Ko=ko[Oo]).start,qo=ts+Ko.count;Qo<qo;Qo+=3)Jo(bo[Qo+0],bo[Qo+1],bo[Qo+2]);var Zo,Xo,Fo,Go=new r$3.Vector3,Vo=new r$3.Vector3,Wo=new r$3.Vector3,Yo=new r$3.Vector3;for(Oo=0,Uo=ko.length;Oo<Uo;++Oo){var Ko,ts;for(Qo=ts=(Ko=ko[Oo]).start,qo=ts+Ko.count;Qo<qo;Qo+=3)rs(bo[Qo+0]),rs(bo[Qo+1]),rs(bo[Qo+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function Jo(ls,ss,us){Lo.fromArray(wo,3*ls),Co.fromArray(wo,3*ss),Ro.fromArray(wo,3*us),jo.fromArray(To,2*ls),zo.fromArray(To,2*ss),Io.fromArray(To,2*us);var ms=Co.x-Lo.x,As=Ro.x-Lo.x,Os=Co.y-Lo.y,Es=Ro.y-Lo.y,Ms=Co.z-Lo.z,$s=Ro.z-Lo.z,ks=zo.x-jo.x,zs=Io.x-jo.x,Cs=zo.y-jo.y,xs=Io.y-jo.y,Bs=1/(ks*xs-zs*Cs);Po.set((xs*ms-Cs*As)*Bs,(xs*Os-Cs*Es)*Bs,(xs*Ms-Cs*$s)*Bs),Bo.set((ks*As-zs*ms)*Bs,(ks*Es-zs*Os)*Bs,(ks*$s-zs*Ms)*Bs),Do[ls].add(Po),Do[ss].add(Po),Do[us].add(Po),No[ls].add(Bo),No[ss].add(Bo),No[us].add(Bo)}function rs(ls){Wo.fromArray(Eo,3*ls),Yo.copy(Wo),Xo=Do[ls],Go.copy(Xo),Go.sub(Wo.multiplyScalar(Wo.dot(Xo))).normalize(),Vo.crossVectors(Yo,Xo),Fo=Vo.dot(No[ls]),Zo=Fo<0?-1:1,$o[4*ls]=Go.x,$o[4*ls+1]=Go.y,$o[4*ls+2]=Go.z,$o[4*ls+3]=Zo}},mergeBufferGeometries:function(va,_o){for(var xo=va[0].index!==null,bo=new Set(Object.keys(va[0].attributes)),wo=new Set(Object.keys(va[0].morphAttributes)),Eo={},To={},So=new r$3.BufferGeometry,$o=0,Do=0;Do<va.length;++Do){var No=va[Do];if(xo!==(No.index!==null))return null;for(var Oo in No.attributes){if(!bo.has(Oo))return null;Eo[Oo]===void 0&&(Eo[Oo]=[]),Eo[Oo].push(No.attributes[Oo])}for(var Oo in No.morphAttributes){if(!wo.has(Oo))return null;To[Oo]===void 0&&(To[Oo]=[]),To[Oo].push(No.morphAttributes[Oo])}if(So.userData.mergedUserData=So.userData.mergedUserData||[],So.userData.mergedUserData.push(No.userData),_o){var Lo;if(xo)Lo=No.index.count;else{if(No.attributes.position===void 0)return null;Lo=No.attributes.position.count}So.addGroup($o,Lo,Do),$o+=Lo}}if(xo){var Co=0,Ro=[];for(Do=0;Do<va.length;++Do){for(var jo=va[Do].index,zo=0;zo<jo.count;++zo)Ro.push(jo.getX(zo)+Co);Co+=va[Do].attributes.position.count}So.setIndex(Ro)}for(var Oo in Eo){var Io=this.mergeBufferAttributes(Eo[Oo]);if(!Io)return null;So.setAttribute(Oo,Io)}for(var Oo in To){var Po=To[Oo][0].length;if(Po===0)break;for(So.morphAttributes=So.morphAttributes||{},So.morphAttributes[Oo]=[],Do=0;Do<Po;++Do){var Bo=[];for(zo=0;zo<To[Oo].length;++zo)Bo.push(To[Oo][zo][Do]);var ko=this.mergeBufferAttributes(Bo);if(!ko)return null;So.morphAttributes[Oo].push(ko)}}return So},mergeBufferAttributes:function(va){for(var _o,xo,bo,wo=0,Eo=0;Eo<va.length;++Eo){var To=va[Eo];if(To.isInterleavedBufferAttribute||(_o===void 0&&(_o=To.array.constructor),_o!==To.array.constructor)||(xo===void 0&&(xo=To.itemSize),xo!==To.itemSize)||(bo===void 0&&(bo=To.normalized),bo!==To.normalized))return null;wo+=To.array.length}var So=new _o(wo),$o=0;for(Eo=0;Eo<va.length;++Eo)So.set(va[Eo].array,$o),$o+=va[Eo].array.length;return new r$3.BufferAttribute(So,xo,bo)},interleaveAttributes:function(va){for(var _o,xo=0,bo=0,wo=0,Eo=va.length;wo<Eo;++wo){var To=va[wo];if(_o===void 0&&(_o=To.array.constructor),_o!==To.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;xo+=To.array.length,bo+=To.itemSize}var So=new r$3.InterleavedBuffer(new _o(xo),bo),$o=0,Do=[],No=["getX","getY","getZ","getW"],Oo=["setX","setY","setZ","setW"],Lo=0;for(Eo=va.length;Lo<Eo;Lo++){var Co=(To=va[Lo]).itemSize,Ro=To.count,jo=new r$3.InterleavedBufferAttribute(So,Co,$o,To.normalized);Do.push(jo),$o+=Co;for(var zo=0;zo<Ro;zo++)for(var Io=0;Io<Co;Io++)jo[Oo[Io]](zo,To[No[Io]](zo))}return Do},estimateBytesUsed:function(va){var _o=0;for(var xo in va.attributes){var bo=va.getAttribute(xo);_o+=bo.count*bo.itemSize*bo.array.BYTES_PER_ELEMENT}var wo=va.getIndex();return _o+=wo?wo.count*wo.itemSize*wo.array.BYTES_PER_ELEMENT:0},mergeVertices:function(va,_o){_o===void 0&&(_o=1e-4),_o=Math.max(_o,Number.EPSILON);for(var xo={},bo=va.getIndex(),wo=va.getAttribute("position"),Eo=bo?bo.count:wo.count,To=0,So=Object.keys(va.attributes),$o={},Do={},No=[],Oo=["getX","getY","getZ","getW"],Lo=0,Co=So.length;Lo<Co;Lo++)$o[Bo=So[Lo]]=[],(qo=va.morphAttributes[Bo])&&(Do[Bo]=new Array(qo.length).fill().map(function(){return[]}));var Ro=Math.log10(1/_o),jo=Math.pow(10,Ro);for(Lo=0;Lo<Eo;Lo++){var zo=bo?bo.getX(Lo):Lo,Io="",Po=0;for(Co=So.length;Po<Co;Po++)for(var Bo=So[Po],ko=(Qo=va.getAttribute(Bo)).itemSize,Uo=0;Uo<ko;Uo++)Io+=~~(Qo[Oo[Uo]](zo)*jo)+",";if(Io in xo)No.push(xo[Io]);else{for(Po=0,Co=So.length;Po<Co;Po++){Bo=So[Po];var Qo=va.getAttribute(Bo),qo=va.morphAttributes[Bo],Zo=(ko=Qo.itemSize,$o[Bo]),Xo=Do[Bo];for(Uo=0;Uo<ko;Uo++){var Fo=Oo[Uo];if(Zo.push(Qo[Fo](zo)),qo)for(var Go=0,Vo=qo.length;Go<Vo;Go++)Xo[Go].push(qo[Go][Fo](zo))}}xo[Io]=To,No.push(To),To++}}var Wo=va.clone();for(Lo=0,Co=So.length;Lo<Co;Lo++){Bo=So[Lo];var Yo=va.getAttribute(Bo),Ko=new Yo.array.constructor($o[Bo]);if(Qo=new r$3.BufferAttribute(Ko,Yo.itemSize,Yo.normalized),Wo.setAttribute(Bo,Qo),Bo in Do)for(Po=0;Po<Do[Bo].length;Po++){var ts=va.morphAttributes[Bo][Po],Jo=(Ko=new ts.array.constructor(Do[Bo][Po]),new r$3.BufferAttribute(Ko,ts.itemSize,ts.normalized));Wo.morphAttributes[Bo][Po]=Jo}}return Wo.setIndex(No),Wo}};const ji=o$2.Reader,zi=o$2.Writer,Ii=o$2.util,bi=o$2.roots["@REALSEE/FIVE:1"]||(o$2.roots["@REALSEE/FIVE:1"]={}),Oi=bi.Model=(()=>{function va(_o){if(this.chunks=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.chunks=Ii.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=zi.create()),_o.chunks!=null&&_o.chunks.length)for(let bo=0;bo<_o.chunks.length;++bo)bi.Chunk.encode(_o.chunks[bo],xo.uint32(10).fork()).ldelim();return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof ji||(_o=ji.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new bi.Model;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.chunks&&wo.chunks.length||(wo.chunks=[]),wo.chunks.push(bi.Chunk.decode(_o,_o.uint32()));break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof ji||(_o=new ji(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.chunks!=null&&_o.hasOwnProperty("chunks")){if(!Array.isArray(_o.chunks))return"chunks: array expected";for(let xo=0;xo<_o.chunks.length;++xo){let bo=bi.Chunk.verify(_o.chunks[xo]);if(bo)return"chunks."+bo}}return null},va.fromObject=function(_o){if(_o instanceof bi.Model)return _o;let xo=new bi.Model;if(_o.chunks){if(!Array.isArray(_o.chunks))throw TypeError(".Model.chunks: array expected");xo.chunks=[];for(let bo=0;bo<_o.chunks.length;++bo){if(typeof _o.chunks[bo]!="object")throw TypeError(".Model.chunks: object expected");xo.chunks[bo]=bi.Chunk.fromObject(_o.chunks[bo])}}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.chunks=[]),_o.chunks&&_o.chunks.length){bo.chunks=[];for(let wo=0;wo<_o.chunks.length;++wo)bo.chunks[wo]=bi.Chunk.toObject(_o.chunks[wo],xo)}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})();bi.Chunk=(()=>{function va(_o){if(_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.vertices=null,va.prototype.faces=null,va.prototype.name="",va.prototype.texture="",va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){return xo||(xo=zi.create()),bi.Vertices.encode(_o.vertices,xo.uint32(10).fork()).ldelim(),bi.Faces.encode(_o.faces,xo.uint32(18).fork()).ldelim(),xo.uint32(26).string(_o.name),_o.texture!=null&&Object.hasOwnProperty.call(_o,"texture")&&xo.uint32(34).string(_o.texture),xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof ji||(_o=ji.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new bi.Chunk;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.vertices=bi.Vertices.decode(_o,_o.uint32());break;case 2:wo.faces=bi.Faces.decode(_o,_o.uint32());break;case 3:wo.name=_o.string();break;case 4:wo.texture=_o.string();break;default:_o.skipType(7&Eo)}}if(!wo.hasOwnProperty("vertices"))throw Ii.ProtocolError("missing required 'vertices'",{instance:wo});if(!wo.hasOwnProperty("faces"))throw Ii.ProtocolError("missing required 'faces'",{instance:wo});if(!wo.hasOwnProperty("name"))throw Ii.ProtocolError("missing required 'name'",{instance:wo});return wo},va.decodeDelimited=function(_o){return _o instanceof ji||(_o=new ji(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";{let xo=bi.Vertices.verify(_o.vertices);if(xo)return"vertices."+xo}{let xo=bi.Faces.verify(_o.faces);if(xo)return"faces."+xo}return Ii.isString(_o.name)?_o.texture!=null&&_o.hasOwnProperty("texture")&&!Ii.isString(_o.texture)?"texture: string expected":null:"name: string expected"},va.fromObject=function(_o){if(_o instanceof bi.Chunk)return _o;let xo=new bi.Chunk;if(_o.vertices!=null){if(typeof _o.vertices!="object")throw TypeError(".Chunk.vertices: object expected");xo.vertices=bi.Vertices.fromObject(_o.vertices)}if(_o.faces!=null){if(typeof _o.faces!="object")throw TypeError(".Chunk.faces: object expected");xo.faces=bi.Faces.fromObject(_o.faces)}return _o.name!=null&&(xo.name=String(_o.name)),_o.texture!=null&&(xo.texture=String(_o.texture)),xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};return xo.defaults&&(bo.vertices=null,bo.faces=null,bo.name="",bo.texture=""),_o.vertices!=null&&_o.hasOwnProperty("vertices")&&(bo.vertices=bi.Vertices.toObject(_o.vertices,xo)),_o.faces!=null&&_o.hasOwnProperty("faces")&&(bo.faces=bi.Faces.toObject(_o.faces,xo)),_o.name!=null&&_o.hasOwnProperty("name")&&(bo.name=_o.name),_o.texture!=null&&_o.hasOwnProperty("texture")&&(bo.texture=_o.texture),bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),bi.Vertices=(()=>{function va(_o){if(this.xyz=[],this.uvs=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.xyz=Ii.emptyArray,va.prototype.uvs=Ii.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=zi.create()),_o.xyz!=null&&_o.xyz.length){xo.uint32(10).fork();for(let bo=0;bo<_o.xyz.length;++bo)xo.float(_o.xyz[bo]);xo.ldelim()}if(_o.uvs!=null&&_o.uvs.length){xo.uint32(18).fork();for(let bo=0;bo<_o.uvs.length;++bo)xo.float(_o.uvs[bo]);xo.ldelim()}return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof ji||(_o=ji.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new bi.Vertices;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.xyz&&wo.xyz.length||(wo.xyz=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.xyz.push(_o.float())}else wo.xyz.push(_o.float());break;case 2:if(wo.uvs&&wo.uvs.length||(wo.uvs=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.uvs.push(_o.float())}else wo.uvs.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof ji||(_o=new ji(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.xyz!=null&&_o.hasOwnProperty("xyz")){if(!Array.isArray(_o.xyz))return"xyz: array expected";for(let xo=0;xo<_o.xyz.length;++xo)if(typeof _o.xyz[xo]!="number")return"xyz: number[] expected"}if(_o.uvs!=null&&_o.hasOwnProperty("uvs")){if(!Array.isArray(_o.uvs))return"uvs: array expected";for(let xo=0;xo<_o.uvs.length;++xo)if(typeof _o.uvs[xo]!="number")return"uvs: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof bi.Vertices)return _o;let xo=new bi.Vertices;if(_o.xyz){if(!Array.isArray(_o.xyz))throw TypeError(".Vertices.xyz: array expected");xo.xyz=[];for(let bo=0;bo<_o.xyz.length;++bo)xo.xyz[bo]=Number(_o.xyz[bo])}if(_o.uvs){if(!Array.isArray(_o.uvs))throw TypeError(".Vertices.uvs: array expected");xo.uvs=[];for(let bo=0;bo<_o.uvs.length;++bo)xo.uvs[bo]=Number(_o.uvs[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.xyz=[],bo.uvs=[]),_o.xyz&&_o.xyz.length){bo.xyz=[];for(let wo=0;wo<_o.xyz.length;++wo)bo.xyz[wo]=xo.json&&!isFinite(_o.xyz[wo])?String(_o.xyz[wo]):_o.xyz[wo]}if(_o.uvs&&_o.uvs.length){bo.uvs=[];for(let wo=0;wo<_o.uvs.length;++wo)bo.uvs[wo]=xo.json&&!isFinite(_o.uvs[wo])?String(_o.uvs[wo]):_o.uvs[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),bi.Faces=(()=>{function va(_o){if(this.indices=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.indices=Ii.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=zi.create()),_o.indices!=null&&_o.indices.length){xo.uint32(10).fork();for(let bo=0;bo<_o.indices.length;++bo)xo.uint32(_o.indices[bo]);xo.ldelim()}return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof ji||(_o=ji.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new bi.Faces;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.indices&&wo.indices.length||(wo.indices=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.indices.push(_o.uint32())}else wo.indices.push(_o.uint32());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof ji||(_o=new ji(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.indices!=null&&_o.hasOwnProperty("indices")){if(!Array.isArray(_o.indices))return"indices: array expected";for(let xo=0;xo<_o.indices.length;++xo)if(!Ii.isInteger(_o.indices[xo]))return"indices: integer[] expected"}return null},va.fromObject=function(_o){if(_o instanceof bi.Faces)return _o;let xo=new bi.Faces;if(_o.indices){if(!Array.isArray(_o.indices))throw TypeError(".Faces.indices: array expected");xo.indices=[];for(let bo=0;bo<_o.indices.length;++bo)xo.indices[bo]=_o.indices[bo]>>>0}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.indices=[]),_o.indices&&_o.indices.length){bo.indices=[];for(let wo=0;wo<_o.indices.length;++wo)bo.indices[wo]=_o.indices[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})();var Si=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function Li(va){var _o=va.match(/(group|floor)-?(\d+)/);return _o?parseInt(_o[2],10):0}function ki(va){var _o=va.match(/(chunk)-?(\d+)/);return _o?parseInt(_o[2],10):0}function Ci(va){var _o=va.indices,xo=va.vertices,bo=va.uvs,wo=new r$3.BufferGeometry;wo.setIndex(new r$3.BufferAttribute(new Uint32Array(_o),1)),wo.setAttribute("position",new r$3.BufferAttribute(new Float32Array(xo),3)),wo.attributes.position.applyMatrix4(Si),Re(bo)||wo.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(bo),2));for(var Eo=new Float32Array(xo.length),To=new r$3.Vector3,So=new r$3.Vector3,$o=new r$3.Vector3,Do=new r$3.Vector3,No=new r$3.Vector3,Oo=new r$3.Vector3,Lo=0,Co=wo.index.array.length,Ro=void 0,jo=void 0,zo=void 0;Lo<Co;Lo+=3)Ro=3*_o[Lo+0],jo=3*_o[Lo+1],zo=3*_o[Lo+2],To.x=xo[Ro],To.y=xo[Ro+1],To.z=xo[Ro+2],So.x=xo[jo],So.y=xo[jo+1],So.z=xo[jo+2],$o.x=xo[zo],$o.y=xo[zo+1],$o.z=xo[zo+2],Do.x=$o.x-So.x,Do.y=$o.y-So.y,Do.z=$o.z-So.z,No.x=To.x-So.x,No.y=To.y-So.y,No.z=To.z-So.z,Oo.x=Do.y*No.z-Do.z*No.y,Oo.y=Do.z*No.x-Do.x*No.z,Oo.z=Do.x*No.y-Do.y*No.x,Eo[Ro]+=Oo.x,Eo[Ro+1]+=Oo.y,Eo[Ro+2]+=Oo.z,Eo[jo]+=Oo.x,Eo[jo+1]+=Oo.y,Eo[jo+2]+=Oo.z,Eo[zo]+=Oo.x,Eo[zo+1]+=Oo.y,Eo[zo+2]+=Oo.z;return wo.setAttribute("normal",new r$3.BufferAttribute(Eo,3)),wo}function Pi(va,_o,xo,bo){var wo=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:wi.isInitialized()},Xt(_o,["format","quality","size"]));return va=_o.transform?_o.transform(va,wo):ti(va,wo),new xi({allowHosts:xo,networkSubscribe:bo}).load(va,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:new r$3.Vector2(1024,1024)}).then(function(Eo){var To=Eo.body;return To.needsUpdate=!0,To})}function Bi(va){var _o=new rt;return va.catch(function(){return null}).then(function(xo){_o.uniforms.map.value=xo,_o.uniforms.exposure.value=3.3}),_o}function _i(va,_o,xo,bo,wo,Eo,To){wo===void 0&&(wo={});for(var So=0,$o=va;So<$o.length;So++){var Do=$o[So];Do.chunkName=ki(Do.name),Do.floorName=Li(Do.name),Do.texture&&(Do.texture=xo[Do.chunkName]=xo[Do.chunkName]||_o+Do.texture)}va.sort(function(Co,Ro){return 1e3*Co.floorName+Co.chunkName-(1e3*Ro.floorName+Ro.chunkName)});var No=[],Oo=[],Lo=Promise.resolve();return(Lo=(Lo=Lo.then(function(){return Ft(function(){for(var Co=va.length,Ro=0;Ro<Co;Ro++){var jo=va[Ro],zo=Li(jo.name),Io=No[zo]=No[zo]||{geometries:[],materials:[]},Po=Ci({vertices:jo.vertices.xyz,uvs:jo.vertices.uvs,indices:jo.faces.indices});if(Po.name="model_geo_chunk_"+Ro,Io.geometries.push(Po),jo.texture)(Bo=Bi(jo.texture in wo?wo[jo.texture]:wo[jo.texture]=Pi(jo.texture,bo,Eo,To))).name="model_mtl_chunk_"+Ro,Io.materials.push(Bo);else{var Bo;(Bo=new rt).defines.USE_MAP=!1,Bo.uniforms.color.value=new r$3.Color(16777215),Bo.name="model_mtl_chunk_"+Ro,Io.materials.push(Bo)}}})})).then(function(){return Ft(function(){for(var Co=0;Co<No.length;Co++){var Ro=No[Co];if(Ro){var jo=Ei.mergeBufferGeometries(Ro.geometries,!0);Ro.geometries.forEach(function(Io){return Io.dispose()});var zo=new qe(jo,Ro.materials);zo.floorIndex=Co,zo.name="model_floor_"+Co,Oo.push(zo)}}})})).then(function(){var Co=Object.keys(wo).map(function(Ro){return wo[Ro].catch(function(){})});return Promise.all(Co).then(function(){return Oo})})}function Ui(va,_o){return(va=Object.assign({},va)).autoResize!==!1&&(va.size=_o>96?Math.min(va.size||1/0,100):_o>48?Math.min(va.size||1/0,200):_o>24?Math.min(va.size||1/0,400):_o>12?Math.min(va.size||1/0,800):Math.min(va.size||1/0,1024)),va}function Ri(va){return va.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(va)}const Qi=o$2.Reader,Yi=o$2.Writer,Fi=o$2.util,Vi=o$2.roots["@REALSEE/FIVE:0"]||(o$2.roots["@REALSEE/FIVE:0"]={}),Hi=Vi.Model=(()=>{function va(_o){if(this.meshes=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.meshes=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.meshes!=null&&_o.meshes.length)for(let bo=0;bo<_o.meshes.length;++bo)Vi.Mesh.encode(_o.meshes[bo],xo.uint32(10).fork()).ldelim();return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Model;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.meshes&&wo.meshes.length||(wo.meshes=[]),wo.meshes.push(Vi.Mesh.decode(_o,_o.uint32()));break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.meshes!=null&&_o.hasOwnProperty("meshes")){if(!Array.isArray(_o.meshes))return"meshes: array expected";for(let xo=0;xo<_o.meshes.length;++xo){let bo=Vi.Mesh.verify(_o.meshes[xo]);if(bo)return"meshes."+bo}}return null},va.fromObject=function(_o){if(_o instanceof Vi.Model)return _o;let xo=new Vi.Model;if(_o.meshes){if(!Array.isArray(_o.meshes))throw TypeError(".Model.meshes: array expected");xo.meshes=[];for(let bo=0;bo<_o.meshes.length;++bo){if(typeof _o.meshes[bo]!="object")throw TypeError(".Model.meshes: object expected");xo.meshes[bo]=Vi.Mesh.fromObject(_o.meshes[bo])}}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.meshes=[]),_o.meshes&&_o.meshes.length){bo.meshes=[];for(let wo=0;wo<_o.meshes.length;++wo)bo.meshes[wo]=Vi.Mesh.toObject(_o.meshes[wo],xo)}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})();Vi.Mesh=(()=>{function va(_o){if(this.chunks=[],this.matrix=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.name="",va.prototype.chunks=Fi.emptyArray,va.prototype.matrix=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),xo.uint32(10).string(_o.name),_o.chunks!=null&&_o.chunks.length)for(let bo=0;bo<_o.chunks.length;++bo)Vi.Chunk.encode(_o.chunks[bo],xo.uint32(18).fork()).ldelim();if(_o.matrix!=null&&_o.matrix.length)for(let bo=0;bo<_o.matrix.length;++bo)Vi.Matrix.encode(_o.matrix[bo],xo.uint32(26).fork()).ldelim();return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Mesh;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.name=_o.string();break;case 2:wo.chunks&&wo.chunks.length||(wo.chunks=[]),wo.chunks.push(Vi.Chunk.decode(_o,_o.uint32()));break;case 3:wo.matrix&&wo.matrix.length||(wo.matrix=[]),wo.matrix.push(Vi.Matrix.decode(_o,_o.uint32()));break;default:_o.skipType(7&Eo)}}if(!wo.hasOwnProperty("name"))throw Fi.ProtocolError("missing required 'name'",{instance:wo});return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(!Fi.isString(_o.name))return"name: string expected";if(_o.chunks!=null&&_o.hasOwnProperty("chunks")){if(!Array.isArray(_o.chunks))return"chunks: array expected";for(let xo=0;xo<_o.chunks.length;++xo){let bo=Vi.Chunk.verify(_o.chunks[xo]);if(bo)return"chunks."+bo}}if(_o.matrix!=null&&_o.hasOwnProperty("matrix")){if(!Array.isArray(_o.matrix))return"matrix: array expected";for(let xo=0;xo<_o.matrix.length;++xo){let bo=Vi.Matrix.verify(_o.matrix[xo]);if(bo)return"matrix."+bo}}return null},va.fromObject=function(_o){if(_o instanceof Vi.Mesh)return _o;let xo=new Vi.Mesh;if(_o.name!=null&&(xo.name=String(_o.name)),_o.chunks){if(!Array.isArray(_o.chunks))throw TypeError(".Mesh.chunks: array expected");xo.chunks=[];for(let bo=0;bo<_o.chunks.length;++bo){if(typeof _o.chunks[bo]!="object")throw TypeError(".Mesh.chunks: object expected");xo.chunks[bo]=Vi.Chunk.fromObject(_o.chunks[bo])}}if(_o.matrix){if(!Array.isArray(_o.matrix))throw TypeError(".Mesh.matrix: array expected");xo.matrix=[];for(let bo=0;bo<_o.matrix.length;++bo){if(typeof _o.matrix[bo]!="object")throw TypeError(".Mesh.matrix: object expected");xo.matrix[bo]=Vi.Matrix.fromObject(_o.matrix[bo])}}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.chunks=[],bo.matrix=[]),xo.defaults&&(bo.name=""),_o.name!=null&&_o.hasOwnProperty("name")&&(bo.name=_o.name),_o.chunks&&_o.chunks.length){bo.chunks=[];for(let wo=0;wo<_o.chunks.length;++wo)bo.chunks[wo]=Vi.Chunk.toObject(_o.chunks[wo],xo)}if(_o.matrix&&_o.matrix.length){bo.matrix=[];for(let wo=0;wo<_o.matrix.length;++wo)bo.matrix[wo]=Vi.Matrix.toObject(_o.matrix[wo],xo)}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Matrix=(()=>{function va(_o){if(this.elements=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.elements=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.elements!=null&&_o.elements.length)for(let bo=0;bo<_o.elements.length;++bo)xo.uint32(13).float(_o.elements[bo]);return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Matrix;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.elements&&wo.elements.length||(wo.elements=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.elements.push(_o.float())}else wo.elements.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.elements!=null&&_o.hasOwnProperty("elements")){if(!Array.isArray(_o.elements))return"elements: array expected";for(let xo=0;xo<_o.elements.length;++xo)if(typeof _o.elements[xo]!="number")return"elements: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof Vi.Matrix)return _o;let xo=new Vi.Matrix;if(_o.elements){if(!Array.isArray(_o.elements))throw TypeError(".Matrix.elements: array expected");xo.elements=[];for(let bo=0;bo<_o.elements.length;++bo)xo.elements[bo]=Number(_o.elements[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.elements=[]),_o.elements&&_o.elements.length){bo.elements=[];for(let wo=0;wo<_o.elements.length;++wo)bo.elements[wo]=xo.json&&!isFinite(_o.elements[wo])?String(_o.elements[wo]):_o.elements[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Chunk=(()=>{function va(_o){if(this.material=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.geometry=null,va.prototype.material=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),Vi.Geometry.encode(_o.geometry,xo.uint32(18).fork()).ldelim(),_o.material!=null&&_o.material.length)for(let bo=0;bo<_o.material.length;++bo)Vi.Material.encode(_o.material[bo],xo.uint32(26).fork()).ldelim();return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Chunk;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 2:wo.geometry=Vi.Geometry.decode(_o,_o.uint32());break;case 3:wo.material&&wo.material.length||(wo.material=[]),wo.material.push(Vi.Material.decode(_o,_o.uint32()));break;default:_o.skipType(7&Eo)}}if(!wo.hasOwnProperty("geometry"))throw Fi.ProtocolError("missing required 'geometry'",{instance:wo});return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";{let xo=Vi.Geometry.verify(_o.geometry);if(xo)return"geometry."+xo}if(_o.material!=null&&_o.hasOwnProperty("material")){if(!Array.isArray(_o.material))return"material: array expected";for(let xo=0;xo<_o.material.length;++xo){let bo=Vi.Material.verify(_o.material[xo]);if(bo)return"material."+bo}}return null},va.fromObject=function(_o){if(_o instanceof Vi.Chunk)return _o;let xo=new Vi.Chunk;if(_o.geometry!=null){if(typeof _o.geometry!="object")throw TypeError(".Chunk.geometry: object expected");xo.geometry=Vi.Geometry.fromObject(_o.geometry)}if(_o.material){if(!Array.isArray(_o.material))throw TypeError(".Chunk.material: array expected");xo.material=[];for(let bo=0;bo<_o.material.length;++bo){if(typeof _o.material[bo]!="object")throw TypeError(".Chunk.material: object expected");xo.material[bo]=Vi.Material.fromObject(_o.material[bo])}}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.material=[]),xo.defaults&&(bo.geometry=null),_o.geometry!=null&&_o.hasOwnProperty("geometry")&&(bo.geometry=Vi.Geometry.toObject(_o.geometry,xo)),_o.material&&_o.material.length){bo.material=[];for(let wo=0;wo<_o.material.length;++wo)bo.material[wo]=Vi.Material.toObject(_o.material[wo],xo)}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Geometry=(()=>{function va(_o){if(this.groups=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.position=null,va.prototype.uv=null,va.prototype.uv2=null,va.prototype.normal=null,va.prototype.groups=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),Vi.Position.encode(_o.position,xo.uint32(10).fork()).ldelim(),_o.uv!=null&&Object.hasOwnProperty.call(_o,"uv")&&Vi.UV.encode(_o.uv,xo.uint32(18).fork()).ldelim(),_o.uv2!=null&&Object.hasOwnProperty.call(_o,"uv2")&&Vi.UV.encode(_o.uv2,xo.uint32(26).fork()).ldelim(),Vi.Normal.encode(_o.normal,xo.uint32(34).fork()).ldelim(),_o.groups!=null&&_o.groups.length)for(let bo=0;bo<_o.groups.length;++bo)Vi.Group.encode(_o.groups[bo],xo.uint32(42).fork()).ldelim();return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Geometry;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.position=Vi.Position.decode(_o,_o.uint32());break;case 2:wo.uv=Vi.UV.decode(_o,_o.uint32());break;case 3:wo.uv2=Vi.UV.decode(_o,_o.uint32());break;case 4:wo.normal=Vi.Normal.decode(_o,_o.uint32());break;case 5:wo.groups&&wo.groups.length||(wo.groups=[]),wo.groups.push(Vi.Group.decode(_o,_o.uint32()));break;default:_o.skipType(7&Eo)}}if(!wo.hasOwnProperty("position"))throw Fi.ProtocolError("missing required 'position'",{instance:wo});if(!wo.hasOwnProperty("normal"))throw Fi.ProtocolError("missing required 'normal'",{instance:wo});return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";{let xo=Vi.Position.verify(_o.position);if(xo)return"position."+xo}if(_o.uv!=null&&_o.hasOwnProperty("uv")){let xo=Vi.UV.verify(_o.uv);if(xo)return"uv."+xo}if(_o.uv2!=null&&_o.hasOwnProperty("uv2")){let xo=Vi.UV.verify(_o.uv2);if(xo)return"uv2."+xo}{let xo=Vi.Normal.verify(_o.normal);if(xo)return"normal."+xo}if(_o.groups!=null&&_o.hasOwnProperty("groups")){if(!Array.isArray(_o.groups))return"groups: array expected";for(let xo=0;xo<_o.groups.length;++xo){let bo=Vi.Group.verify(_o.groups[xo]);if(bo)return"groups."+bo}}return null},va.fromObject=function(_o){if(_o instanceof Vi.Geometry)return _o;let xo=new Vi.Geometry;if(_o.position!=null){if(typeof _o.position!="object")throw TypeError(".Geometry.position: object expected");xo.position=Vi.Position.fromObject(_o.position)}if(_o.uv!=null){if(typeof _o.uv!="object")throw TypeError(".Geometry.uv: object expected");xo.uv=Vi.UV.fromObject(_o.uv)}if(_o.uv2!=null){if(typeof _o.uv2!="object")throw TypeError(".Geometry.uv2: object expected");xo.uv2=Vi.UV.fromObject(_o.uv2)}if(_o.normal!=null){if(typeof _o.normal!="object")throw TypeError(".Geometry.normal: object expected");xo.normal=Vi.Normal.fromObject(_o.normal)}if(_o.groups){if(!Array.isArray(_o.groups))throw TypeError(".Geometry.groups: array expected");xo.groups=[];for(let bo=0;bo<_o.groups.length;++bo){if(typeof _o.groups[bo]!="object")throw TypeError(".Geometry.groups: object expected");xo.groups[bo]=Vi.Group.fromObject(_o.groups[bo])}}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.groups=[]),xo.defaults&&(bo.position=null,bo.uv=null,bo.uv2=null,bo.normal=null),_o.position!=null&&_o.hasOwnProperty("position")&&(bo.position=Vi.Position.toObject(_o.position,xo)),_o.uv!=null&&_o.hasOwnProperty("uv")&&(bo.uv=Vi.UV.toObject(_o.uv,xo)),_o.uv2!=null&&_o.hasOwnProperty("uv2")&&(bo.uv2=Vi.UV.toObject(_o.uv2,xo)),_o.normal!=null&&_o.hasOwnProperty("normal")&&(bo.normal=Vi.Normal.toObject(_o.normal,xo)),_o.groups&&_o.groups.length){bo.groups=[];for(let wo=0;wo<_o.groups.length;++wo)bo.groups[wo]=Vi.Group.toObject(_o.groups[wo],xo)}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Position=(()=>{function va(_o){if(this.array=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.array=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.array!=null&&_o.array.length){xo.uint32(10).fork();for(let bo=0;bo<_o.array.length;++bo)xo.float(_o.array[bo]);xo.ldelim()}return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Position;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.array&&wo.array.length||(wo.array=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.array.push(_o.float())}else wo.array.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.array!=null&&_o.hasOwnProperty("array")){if(!Array.isArray(_o.array))return"array: array expected";for(let xo=0;xo<_o.array.length;++xo)if(typeof _o.array[xo]!="number")return"array: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof Vi.Position)return _o;let xo=new Vi.Position;if(_o.array){if(!Array.isArray(_o.array))throw TypeError(".Position.array: array expected");xo.array=[];for(let bo=0;bo<_o.array.length;++bo)xo.array[bo]=Number(_o.array[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.array=[]),_o.array&&_o.array.length){bo.array=[];for(let wo=0;wo<_o.array.length;++wo)bo.array[wo]=xo.json&&!isFinite(_o.array[wo])?String(_o.array[wo]):_o.array[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.UV=(()=>{function va(_o){if(this.array=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.array=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.array!=null&&_o.array.length){xo.uint32(10).fork();for(let bo=0;bo<_o.array.length;++bo)xo.float(_o.array[bo]);xo.ldelim()}return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.UV;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.array&&wo.array.length||(wo.array=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.array.push(_o.float())}else wo.array.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.array!=null&&_o.hasOwnProperty("array")){if(!Array.isArray(_o.array))return"array: array expected";for(let xo=0;xo<_o.array.length;++xo)if(typeof _o.array[xo]!="number")return"array: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof Vi.UV)return _o;let xo=new Vi.UV;if(_o.array){if(!Array.isArray(_o.array))throw TypeError(".UV.array: array expected");xo.array=[];for(let bo=0;bo<_o.array.length;++bo)xo.array[bo]=Number(_o.array[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.array=[]),_o.array&&_o.array.length){bo.array=[];for(let wo=0;wo<_o.array.length;++wo)bo.array[wo]=xo.json&&!isFinite(_o.array[wo])?String(_o.array[wo]):_o.array[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Normal=(()=>{function va(_o){if(this.array=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.array=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.array!=null&&_o.array.length){xo.uint32(10).fork();for(let bo=0;bo<_o.array.length;++bo)xo.float(_o.array[bo]);xo.ldelim()}return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Normal;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.array&&wo.array.length||(wo.array=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.array.push(_o.float())}else wo.array.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.array!=null&&_o.hasOwnProperty("array")){if(!Array.isArray(_o.array))return"array: array expected";for(let xo=0;xo<_o.array.length;++xo)if(typeof _o.array[xo]!="number")return"array: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof Vi.Normal)return _o;let xo=new Vi.Normal;if(_o.array){if(!Array.isArray(_o.array))throw TypeError(".Normal.array: array expected");xo.array=[];for(let bo=0;bo<_o.array.length;++bo)xo.array[bo]=Number(_o.array[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.array=[]),_o.array&&_o.array.length){bo.array=[];for(let wo=0;wo<_o.array.length;++wo)bo.array[wo]=xo.json&&!isFinite(_o.array[wo])?String(_o.array[wo]):_o.array[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Group=(()=>{function va(_o){if(_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.start=0,va.prototype.count=0,va.prototype.materialIndex=0,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){return xo||(xo=Yi.create()),xo.uint32(8).uint32(_o.start),xo.uint32(16).uint32(_o.count),xo.uint32(24).uint32(_o.materialIndex),xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Group;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.start=_o.uint32();break;case 2:wo.count=_o.uint32();break;case 3:wo.materialIndex=_o.uint32();break;default:_o.skipType(7&Eo)}}if(!wo.hasOwnProperty("start"))throw Fi.ProtocolError("missing required 'start'",{instance:wo});if(!wo.hasOwnProperty("count"))throw Fi.ProtocolError("missing required 'count'",{instance:wo});if(!wo.hasOwnProperty("materialIndex"))throw Fi.ProtocolError("missing required 'materialIndex'",{instance:wo});return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){return typeof _o!="object"||_o===null?"object expected":Fi.isInteger(_o.start)?Fi.isInteger(_o.count)?Fi.isInteger(_o.materialIndex)?null:"materialIndex: integer expected":"count: integer expected":"start: integer expected"},va.fromObject=function(_o){if(_o instanceof Vi.Group)return _o;let xo=new Vi.Group;return _o.start!=null&&(xo.start=_o.start>>>0),_o.count!=null&&(xo.count=_o.count>>>0),_o.materialIndex!=null&&(xo.materialIndex=_o.materialIndex>>>0),xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};return xo.defaults&&(bo.start=0,bo.count=0,bo.materialIndex=0),_o.start!=null&&_o.hasOwnProperty("start")&&(bo.start=_o.start),_o.count!=null&&_o.hasOwnProperty("count")&&(bo.count=_o.count),_o.materialIndex!=null&&_o.hasOwnProperty("materialIndex")&&(bo.materialIndex=_o.materialIndex),bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Material=(()=>{function va(_o){if(_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.kd=null,va.prototype.ks=null,va.prototype.ke=null,va.prototype.mapkd="",va.prototype.mapks="",va.prototype.mapke="",va.prototype.norm="",va.prototype.mapbump="",va.prototype.bump="",va.prototype.mapd="",va.prototype.ns=0,va.prototype.d=0,va.prototype.tr=0,va.prototype.mapkdrepeat="",va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){return xo||(xo=Yi.create()),_o.kd!=null&&Object.hasOwnProperty.call(_o,"kd")&&Vi.Color.encode(_o.kd,xo.uint32(10).fork()).ldelim(),_o.ks!=null&&Object.hasOwnProperty.call(_o,"ks")&&Vi.Color.encode(_o.ks,xo.uint32(18).fork()).ldelim(),_o.ke!=null&&Object.hasOwnProperty.call(_o,"ke")&&Vi.Color.encode(_o.ke,xo.uint32(26).fork()).ldelim(),_o.mapkd!=null&&Object.hasOwnProperty.call(_o,"mapkd")&&xo.uint32(34).string(_o.mapkd),_o.mapks!=null&&Object.hasOwnProperty.call(_o,"mapks")&&xo.uint32(42).string(_o.mapks),_o.mapke!=null&&Object.hasOwnProperty.call(_o,"mapke")&&xo.uint32(50).string(_o.mapke),_o.norm!=null&&Object.hasOwnProperty.call(_o,"norm")&&xo.uint32(58).string(_o.norm),_o.mapbump!=null&&Object.hasOwnProperty.call(_o,"mapbump")&&xo.uint32(66).string(_o.mapbump),_o.bump!=null&&Object.hasOwnProperty.call(_o,"bump")&&xo.uint32(74).string(_o.bump),_o.mapd!=null&&Object.hasOwnProperty.call(_o,"mapd")&&xo.uint32(82).string(_o.mapd),_o.ns!=null&&Object.hasOwnProperty.call(_o,"ns")&&xo.uint32(93).float(_o.ns),_o.d!=null&&Object.hasOwnProperty.call(_o,"d")&&xo.uint32(101).float(_o.d),_o.tr!=null&&Object.hasOwnProperty.call(_o,"tr")&&xo.uint32(109).float(_o.tr),_o.mapkdrepeat!=null&&Object.hasOwnProperty.call(_o,"mapkdrepeat")&&xo.uint32(114).string(_o.mapkdrepeat),xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Material;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:wo.kd=Vi.Color.decode(_o,_o.uint32());break;case 2:wo.ks=Vi.Color.decode(_o,_o.uint32());break;case 3:wo.ke=Vi.Color.decode(_o,_o.uint32());break;case 4:wo.mapkd=_o.string();break;case 5:wo.mapks=_o.string();break;case 6:wo.mapke=_o.string();break;case 7:wo.norm=_o.string();break;case 8:wo.mapbump=_o.string();break;case 9:wo.bump=_o.string();break;case 10:wo.mapd=_o.string();break;case 11:wo.ns=_o.float();break;case 12:wo.d=_o.float();break;case 13:wo.tr=_o.float();break;case 14:wo.mapkdrepeat=_o.string();break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.kd!=null&&_o.hasOwnProperty("kd")){let xo=Vi.Color.verify(_o.kd);if(xo)return"kd."+xo}if(_o.ks!=null&&_o.hasOwnProperty("ks")){let xo=Vi.Color.verify(_o.ks);if(xo)return"ks."+xo}if(_o.ke!=null&&_o.hasOwnProperty("ke")){let xo=Vi.Color.verify(_o.ke);if(xo)return"ke."+xo}return _o.mapkd!=null&&_o.hasOwnProperty("mapkd")&&!Fi.isString(_o.mapkd)?"mapkd: string expected":_o.mapks!=null&&_o.hasOwnProperty("mapks")&&!Fi.isString(_o.mapks)?"mapks: string expected":_o.mapke!=null&&_o.hasOwnProperty("mapke")&&!Fi.isString(_o.mapke)?"mapke: string expected":_o.norm!=null&&_o.hasOwnProperty("norm")&&!Fi.isString(_o.norm)?"norm: string expected":_o.mapbump!=null&&_o.hasOwnProperty("mapbump")&&!Fi.isString(_o.mapbump)?"mapbump: string expected":_o.bump!=null&&_o.hasOwnProperty("bump")&&!Fi.isString(_o.bump)?"bump: string expected":_o.mapd!=null&&_o.hasOwnProperty("mapd")&&!Fi.isString(_o.mapd)?"mapd: string expected":_o.ns!=null&&_o.hasOwnProperty("ns")&&typeof _o.ns!="number"?"ns: number expected":_o.d!=null&&_o.hasOwnProperty("d")&&typeof _o.d!="number"?"d: number expected":_o.tr!=null&&_o.hasOwnProperty("tr")&&typeof _o.tr!="number"?"tr: number expected":_o.mapkdrepeat!=null&&_o.hasOwnProperty("mapkdrepeat")&&!Fi.isString(_o.mapkdrepeat)?"mapkdrepeat: string expected":null},va.fromObject=function(_o){if(_o instanceof Vi.Material)return _o;let xo=new Vi.Material;if(_o.kd!=null){if(typeof _o.kd!="object")throw TypeError(".Material.kd: object expected");xo.kd=Vi.Color.fromObject(_o.kd)}if(_o.ks!=null){if(typeof _o.ks!="object")throw TypeError(".Material.ks: object expected");xo.ks=Vi.Color.fromObject(_o.ks)}if(_o.ke!=null){if(typeof _o.ke!="object")throw TypeError(".Material.ke: object expected");xo.ke=Vi.Color.fromObject(_o.ke)}return _o.mapkd!=null&&(xo.mapkd=String(_o.mapkd)),_o.mapks!=null&&(xo.mapks=String(_o.mapks)),_o.mapke!=null&&(xo.mapke=String(_o.mapke)),_o.norm!=null&&(xo.norm=String(_o.norm)),_o.mapbump!=null&&(xo.mapbump=String(_o.mapbump)),_o.bump!=null&&(xo.bump=String(_o.bump)),_o.mapd!=null&&(xo.mapd=String(_o.mapd)),_o.ns!=null&&(xo.ns=Number(_o.ns)),_o.d!=null&&(xo.d=Number(_o.d)),_o.tr!=null&&(xo.tr=Number(_o.tr)),_o.mapkdrepeat!=null&&(xo.mapkdrepeat=String(_o.mapkdrepeat)),xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};return xo.defaults&&(bo.kd=null,bo.ks=null,bo.ke=null,bo.mapkd="",bo.mapks="",bo.mapke="",bo.norm="",bo.mapbump="",bo.bump="",bo.mapd="",bo.ns=0,bo.d=0,bo.tr=0,bo.mapkdrepeat=""),_o.kd!=null&&_o.hasOwnProperty("kd")&&(bo.kd=Vi.Color.toObject(_o.kd,xo)),_o.ks!=null&&_o.hasOwnProperty("ks")&&(bo.ks=Vi.Color.toObject(_o.ks,xo)),_o.ke!=null&&_o.hasOwnProperty("ke")&&(bo.ke=Vi.Color.toObject(_o.ke,xo)),_o.mapkd!=null&&_o.hasOwnProperty("mapkd")&&(bo.mapkd=_o.mapkd),_o.mapks!=null&&_o.hasOwnProperty("mapks")&&(bo.mapks=_o.mapks),_o.mapke!=null&&_o.hasOwnProperty("mapke")&&(bo.mapke=_o.mapke),_o.norm!=null&&_o.hasOwnProperty("norm")&&(bo.norm=_o.norm),_o.mapbump!=null&&_o.hasOwnProperty("mapbump")&&(bo.mapbump=_o.mapbump),_o.bump!=null&&_o.hasOwnProperty("bump")&&(bo.bump=_o.bump),_o.mapd!=null&&_o.hasOwnProperty("mapd")&&(bo.mapd=_o.mapd),_o.ns!=null&&_o.hasOwnProperty("ns")&&(bo.ns=xo.json&&!isFinite(_o.ns)?String(_o.ns):_o.ns),_o.d!=null&&_o.hasOwnProperty("d")&&(bo.d=xo.json&&!isFinite(_o.d)?String(_o.d):_o.d),_o.tr!=null&&_o.hasOwnProperty("tr")&&(bo.tr=xo.json&&!isFinite(_o.tr)?String(_o.tr):_o.tr),_o.mapkdrepeat!=null&&_o.hasOwnProperty("mapkdrepeat")&&(bo.mapkdrepeat=_o.mapkdrepeat),bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})(),Vi.Color=(()=>{function va(_o){if(this.rgb=[],_o)for(let xo=Object.keys(_o),bo=0;bo<xo.length;++bo)_o[xo[bo]]!=null&&(this[xo[bo]]=_o[xo[bo]])}return va.prototype.rgb=Fi.emptyArray,va.create=function(_o){return new va(_o)},va.encode=function(_o,xo){if(xo||(xo=Yi.create()),_o.rgb!=null&&_o.rgb.length)for(let bo=0;bo<_o.rgb.length;++bo)xo.uint32(13).float(_o.rgb[bo]);return xo},va.encodeDelimited=function(_o,xo){return this.encode(_o,xo).ldelim()},va.decode=function(_o,xo){_o instanceof Qi||(_o=Qi.create(_o));let bo=xo===void 0?_o.len:_o.pos+xo,wo=new Vi.Color;for(;_o.pos<bo;){let Eo=_o.uint32();switch(Eo>>>3){case 1:if(wo.rgb&&wo.rgb.length||(wo.rgb=[]),(7&Eo)==2){let To=_o.uint32()+_o.pos;for(;_o.pos<To;)wo.rgb.push(_o.float())}else wo.rgb.push(_o.float());break;default:_o.skipType(7&Eo)}}return wo},va.decodeDelimited=function(_o){return _o instanceof Qi||(_o=new Qi(_o)),this.decode(_o,_o.uint32())},va.verify=function(_o){if(typeof _o!="object"||_o===null)return"object expected";if(_o.rgb!=null&&_o.hasOwnProperty("rgb")){if(!Array.isArray(_o.rgb))return"rgb: array expected";for(let xo=0;xo<_o.rgb.length;++xo)if(typeof _o.rgb[xo]!="number")return"rgb: number[] expected"}return null},va.fromObject=function(_o){if(_o instanceof Vi.Color)return _o;let xo=new Vi.Color;if(_o.rgb){if(!Array.isArray(_o.rgb))throw TypeError(".Color.rgb: array expected");xo.rgb=[];for(let bo=0;bo<_o.rgb.length;++bo)xo.rgb[bo]=Number(_o.rgb[bo])}return xo},va.toObject=function(_o,xo){xo||(xo={});let bo={};if((xo.arrays||xo.defaults)&&(bo.rgb=[]),_o.rgb&&_o.rgb.length){bo.rgb=[];for(let wo=0;wo<_o.rgb.length;++wo)bo.rgb[wo]=xo.json&&!isFinite(_o.rgb[wo])?String(_o.rgb[wo]):_o.rgb[wo]}return bo},va.prototype.toJSON=function(){return this.constructor.toObject(this,o$2.util.toJSONOptions)},va})();var Gi={};function Wi(va,_o,xo,bo,wo){var Eo,To=[],So=[];function $o(Do,No,Oo){var Lo=function(Io){var Po=Io.position,Bo=Io.normal,ko=Io.uv,Uo=Io.uv2,Qo=Io.groups,qo=new r$3.BufferGeometry;return qo.setAttribute("position",new r$3.BufferAttribute(new Float32Array(Po.array),3)),Bo&&qo.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(Bo.array),3)),ko&&qo.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(ko.array),2)),Uo&&qo.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(Uo.array),2)),Qo.forEach(function(Zo){return qo.addGroup(Zo.start,Zo.count,Zo.materialIndex)}),qo}(Do);Lo.applyMatrix4(Oo);var Co=new r$3.Vector3,Ro=new r$3.Quaternion,jo=new r$3.Vector3;Oo.decompose(Co,Ro,jo),jo.x*jo.y*jo.z<0&&Lo.attributes.normal&&Lo.attributes.position&&Lo.attributes.uv&&function(Io){for(var Po=[0,0,0],Bo=0;Bo<Io.attributes.normal.array.length/9;Bo++)Po[0]=Io.attributes.normal.array[9*Bo],Po[1]=Io.attributes.normal.array[9*Bo+1],Po[2]=Io.attributes.normal.array[9*Bo+2],Io.attributes.normal.array[9*Bo]=Io.attributes.normal.array[9*Bo+6],Io.attributes.normal.array[9*Bo+1]=Io.attributes.normal.array[9*Bo+7],Io.attributes.normal.array[9*Bo+2]=Io.attributes.normal.array[9*Bo+8],Io.attributes.normal.array[9*Bo+6]=Po[0],Io.attributes.normal.array[9*Bo+7]=Po[1],Io.attributes.normal.array[9*Bo+8]=Po[2];for(Bo=0;Bo<Io.attributes.position.array.length/9;Bo++)Po[0]=Io.attributes.position.array[9*Bo],Po[1]=Io.attributes.position.array[9*Bo+1],Po[2]=Io.attributes.position.array[9*Bo+2],Io.attributes.position.array[9*Bo]=Io.attributes.position.array[9*Bo+6],Io.attributes.position.array[9*Bo+1]=Io.attributes.position.array[9*Bo+7],Io.attributes.position.array[9*Bo+2]=Io.attributes.position.array[9*Bo+8],Io.attributes.position.array[9*Bo+6]=Po[0],Io.attributes.position.array[9*Bo+7]=Po[1],Io.attributes.position.array[9*Bo+8]=Po[2];for(Bo=0;Bo<Io.attributes.uv.array.length/6;Bo++)Po[0]=Io.attributes.uv.array[6*Bo],Po[1]=Io.attributes.uv.array[6*Bo+1],Io.attributes.uv.array[6*Bo]=Io.attributes.uv.array[6*Bo+4],Io.attributes.uv.array[6*Bo+1]=Io.attributes.uv.array[6*Bo+5],Io.attributes.uv.array[6*Bo+4]=Po[0],Io.attributes.uv.array[6*Bo+5]=Po[1];Io.attributes.normal.needsUpdate=!0,Io.attributes.position.needsUpdate=!0,Io.attributes.uv.needsUpdate=!0}(Lo);var zo=No.map(function(Io){var Po=function(Uo,Qo,qo,Zo,Xo){function Fo(ss,us){if(Gi[ss])return Promise.resolve(Gi[ss]);var ms=new xi({allowHosts:Zo,networkSubscribe:Xo});Ri(ss)||(ss=Qo+ss),(ss=(ss=ss.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).split("?")[0]).indexOf(".png")!==-1&&(ss=ss.split(".png")[0]+".png"),ss.indexOf(".jpg")!==-1&&(ss=ss.split(".jpg")[0]+".jpg"),ss.indexOf("//")===0&&(ss="https:"+ss);var As=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:wi.isInitialized()},Xt(qo,["quality","format"]));return ss=qo.transform?qo.transform(ss,As):ti(ss,As),ms.load(ss,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping}).then(function(Os){var Es=Os.body;return us&&Es.repeat.copy(us),Es.needsUpdate=!0,Es.updateMatrix(),Gi[ss]=Es,Es})}var Go=[],Vo=new rt,Wo=Vo.uniforms;Wo.exposure.value=4.3;var Yo,Ko=Vo.defines;if(Ko.USE_MAP=!1,Ko.USE_UV=!1,Uo.hasOwnProperty("kd")&&(Wo.diffuse.value=new r$3.Color().fromArray(Uo.kd.rgb)),Uo.hasOwnProperty("mapkd")){var ts=void 0;if(Uo.mapkdrepeat){var Jo=Uo.mapkdrepeat.split(/\s+/).map(function(ss){return Number(ss)}),rs=Jo[0],ls=Jo[1];ts=new r$3.Vector2(rs,ls)}Go.push(Fo(Uo.mapkd,ts).then(function(ss){Ko.USE_MAP=!0,Ko.USE_UV=!0,Wo.map.value=ss,Wo.uvTransform.value=ss.matrix}).catch(function(ss){}))}return Uo.hasOwnProperty("ks")&&(Wo.specular.value=new r$3.Color().fromArray(Uo.ks.rgb)),Uo.hasOwnProperty("mapks")&&Go.push(Fo(Uo.mapks).then(function(ss){Wo.specularMap.value=ss}).catch(function(ss){})),Uo.hasOwnProperty("ke")&&(Wo.emissive.value=new r$3.Color().fromArray(Uo.ke.rgb)),Uo.hasOwnProperty("mapke")&&Go.push(Fo(Uo.mapke).then(function(ss){Wo.emissiveMap.value=ss}).catch(function(ss){})),Uo.hasOwnProperty("norm")&&Go.push(Fo(Uo.norm).then(function(ss){Wo.normalMap.value=ss}).catch(function(ss){})),Uo.hasOwnProperty("mapbump")&&Go.push(Fo(Uo.mapbump).then(function(ss){Wo.bumpMap.value=ss}).catch(function(ss){})),Uo.hasOwnProperty("bump")&&Go.push(Fo(Uo.bump).then(function(ss){Wo.bumpMap.value=ss}).catch(function(ss){})),Uo.hasOwnProperty("ns")&&(Wo.shininess.value=Uo.ns),Uo.hasOwnProperty("d")&&(Yo=Uo.d)>=0&&Yo<1&&(Wo.originOpacity.value=Yo),Uo.hasOwnProperty("tr")&&(Yo=1-Uo.tr)>=0&&Yo<1&&(Wo.originOpacity.value=Yo),Wo.originOpacity.value<1&&(Vo.transparent=!0),{material:Vo,textureReady:Promise.all(Go).then(function(){})}}(Io,_o,xo,bo,wo),Bo=Po.material,ko=Po.textureReady;return So.push(ko),Bo});return new qe(Lo,zo)}return(Eo=va,Hi.decode(Eo).meshes).forEach(function(Do){var No=Do.name,Oo=Do.chunks,Lo=Do.matrix;No!=="Ceiling"&&No!=="CeilingDrop"&&Lo.map(function(Co){var Ro,jo=new r$3.Matrix4;if(jo.elements=Co.elements,Oo.length===1){var zo=Oo[0],Io=zo.geometry,Po=zo.material;Ro=$o(Io,Po,jo)}else Ro=new Ze,Oo.forEach(function(Bo,ko){var Uo=$o(Bo.geometry,Bo.material,jo);Uo.name="chunk"+ko,Ro.add(Uo)});Ro.floorIndex=0,Ro.name=No,To.push(Ro)})}),Promise.all(So).catch(function(){}).then(function(){return To})}function qi(){Object.keys(Gi).forEach(function(va){Gi[va].dispose(),delete Gi[va]})}function Ki(va){var _o;return new((_o=r$3.Triangle).bind.apply(_o,t$3.__spreadArray([void 0],va.map(function(xo){return new r$3.Vector3(xo.x,xo.y,xo.z)}),!1)))}var Zi={at3d:function(va,_o){for(var xo=Ui(_o.textureOptions,va.textures.length),bo={},wo=0,Eo=va.textures;wo<Eo.length;wo++){var To=Eo[wo];bo[To]=Pi(To,xo,_o.allowHosts,_o.networkSubscribe)}return Promise.resolve().then(function(){return Ct(va.file,{responseType:"arraybuffer",allowHosts:_o.allowHosts,networkSubscribe:_o.networkSubscribe})}).then(function(So){return Zt(So.body)}).then(function(So){return Ft(function(){for(var $o=[],Do=0,No=So;Do<No.length;Do++){var Oo=No[Do];try{var Lo=Oi.decode(Oo);$o.push.apply($o,Lo.chunks)}catch(Co){console.error(Co)}}return $o})}).then(function(So){return Ft(function(){return _i(So,va.textureBase,va.textures.slice(),xo,bo,_o.allowHosts,_o.networkSubscribe)})})},pbm:function(va,_o){for(var xo=Ui(_o.textureOptions,va.textures.length),bo={},wo=0,Eo=va.textures;wo<Eo.length;wo++){var To=Eo[wo];bo[To]=Pi(To,xo,_o.allowHosts,_o.networkSubscribe)}return Promise.resolve().then(function(){return Ct(va.file,{responseType:"arraybuffer",allowHosts:_o.allowHosts,networkSubscribe:_o.networkSubscribe})}).then(function(So){return Ft(function(){var $o=new Uint8Array(So.body),Do=Oi.decode($o);return[].concat(Do.chunks)})}).then(function(So){return Ft(function(){return _i(So,va.textureBase,va.textures.slice(),xo,bo,_o.allowHosts,_o.networkSubscribe)})})},dome:function(va,_o){return Promise.resolve().then(function(){return qi()}).then(function(){return Ct(va.file,{responseType:"arraybuffer",allowHosts:_o.allowHosts,networkSubscribe:_o.networkSubscribe})}).then(function(xo){return Wi(new Uint8Array(xo.body),va.textureBase,_o.textureOptions,_o.allowHosts,_o.networkSubscribe)})},domez:function(va,_o){return Promise.resolve().then(function(){return qi()}).then(function(){return Ct(va.file,{responseType:"arraybuffer",allowHosts:_o.allowHosts,networkSubscribe:_o.networkSubscribe})}).then(function(xo){return Zt(xo.body)}).then(function(xo){var bo=xo.reduce(function(To,So){return To+So.length},0),wo=new Uint8Array(bo),Eo=0;return xo.forEach(function(To){wo.set(To,Eo),Eo+=To.length}),wo}).then(function(xo){return Wi(xo,va.textureBase,_o.textureOptions,_o.allowHosts,_o.networkSubscribe)})}},Xi=function(va){function _o(xo){xo===void 0&&(xo={});var bo=va.call(this)||this;return bo.empty=!1,bo.name="model",bo.loaded=!1,bo.bvhs=Object.assign([],{loaded:!1}),bo.bounding=new r$3.Box3,bo.shownFloor=null,bo.floorLength=0,bo.networkSubscribe=xo.networkSubscribe,bo.allowHosts=xo.allowHosts,bo.renderOrder=-2,bo}return t$3.__extends(_o,va),Object.defineProperty(_o.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),_o.prototype.getEdges=function(xo){var bo;xo===void 0&&(xo=30/180*Math.PI);for(var wo=Math.cos(xo),Eo=[],To=0,So=this.children;To<So.length;To++){var $o=So[To];if($o instanceof qe){for(var Do={},No=["a","b","c"],Oo=Ei.mergeVertices($o.geometry),Lo=Oo.getAttribute("position").array,Co=((bo=Oo.getIndex())===null||bo===void 0?void 0:bo.array)||[],Ro=[],jo=[],zo=0,Io=Lo.length;zo<Io;zo+=3)Ro.push(new r$3.Vector3(Lo[zo],Lo[zo+1],Lo[zo+2]));for(zo=0,Io=Co.length;zo<Io;zo+=3){var Po=Co[zo],Bo=Co[zo+1],ko=Co[zo+2],Uo=new r$3.Vector3().crossVectors(Ro[Bo].clone().sub(Ro[Po]),Ro[ko].clone().sub(Ro[Po])).normalize();jo.push({a:Po,b:Bo,c:ko,normal:Uo})}for(zo=0,Io=jo.length;zo<Io;zo++)for(var Qo=jo[zo],qo=0;qo<3;qo++){var Zo=Qo[No[qo]],Xo=Qo[No[(qo+1)%3]],Fo=[Math.min(Zo,Xo),Math.max(Zo,Xo)];Do[Go=Fo[0]+"-"+Fo[1]]===void 0?Do[Go]={index1:Fo[0],index2:Fo[1],face1:zo}:Do[Go].face2=zo}for(var Go in Do){var Vo=Do[Go];if(Vo.face2===void 0||jo[Vo.face1].normal.dot(jo[Vo.face2].normal)<=wo){var Wo=Ro[Vo.index1],Yo=Ro[Vo.index2];Eo.push(new r$3.Line3(Wo,Yo))}}Oo.dispose(),Ro.length=0,jo.length=0}}return Eo},_o.prototype.hasFloors=function(){return this.hasFloors_()},_o.prototype.hasFloors_=function(){var xo=[];return this.traverse(function(bo){bo instanceof qe&&(xo[bo.floorIndex]=!0)}),xo.length},_o.prototype.show=function(){for(var xo,bo=[],wo=0;wo<arguments.length;wo++)bo[wo]=arguments[wo];var Eo=this.shownFloor,To=null,So=(xo=bo[1])!==null&&xo!==void 0?xo:.1,$o=bo.length!==0;this.shownFloor=To=$o?bo[0]:null,this.traverse(function(Do){Do instanceof qe&&Do.material.forEach(function(No){To===null||To===Do.floorIndex?No.opacity=1:No.opacity=So})}),Eo!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},_o.prototype.intersectRaycaster=function(xo,bo){var wo=xo.ray,Eo=wo.origin,To=wo.direction;if(Re(bo))if(Re(this.shownFloor)){var So=this.floorLength;bo=[];for(var $o=0;$o<So;$o++)bo.push($o)}else bo=[this.shownFloor];var Do=[],No=[];Array.isArray(bo)?No.push.apply(No,bo):No.push(bo);for(var Oo=function(jo){var zo=Lo.bvhs&&Lo.bvhs[jo];if(zo){var Io=new dt(Eo.x,Eo.y,Eo.z),Po=new dt(To.x,To.y,To.z);(Bo=zo.intersectRay(Io,Po,!0).map(function(Uo){var Qo=Uo.intersectionPoint,qo=Uo.triangle,Zo=new r$3.Vector3(Qo.x,Qo.y,Qo.z);return{point:Zo,face:{normal:Ki(qo).getNormal(new r$3.Vector3)},distance:Eo.distanceTo(Zo)}})).length&&Do.push.apply(Do,Bo)}else{var Bo,ko=[];Lo.traverse(function(Uo){Uo instanceof qe&&Uo.floorIndex===jo&&ko.push(Uo)}),(Bo=xo.intersectObjects(ko).map(function(Uo){var Qo=Uo.face?{normal:Uo.face.normal}:void 0;return{point:Uo.point,face:Qo,distance:Uo.distance}})).length&&Do.push.apply(Do,Bo)}},Lo=this,Co=0,Ro=No;Co<Ro.length;Co++)Oo(Ro[Co]);return Do.filter(function(jo){var zo=jo.distance;return zo<=xo.far&&zo>=xo.near}).sort(function(jo,zo){return jo.distance-zo.distance})},_o.prototype.buildBVH=function(){var xo,bo=[];this.traverse(function(Eo){Eo instanceof qe&&(bo[Eo.floorIndex]=bo[Eo.floorIndex]||[],bo[Eo.floorIndex].push(Eo.geometry))});var wo=bo.map(function(Eo){var To=Eo.reduce(function($o,Do){return $o+(Do.index?Do.index.array.length:Do.attributes.position.array.length)},0),So=new Float32Array(3*To);return Eo.reduce(function($o,Do){for(var No=Do.index?Do.index.array:null,Oo=Do.attributes.position.array,Lo=No?No.length:Oo.length/3,Co=0;Co<Lo;Co++){var Ro=3*($o+Co),jo=No?3*No[Co]:3*Co;So[Ro+0]=Oo[jo+0],So[Ro+1]=Oo[jo+1],So[Ro+2]=Oo[jo+2]}return $o+Lo},0),new Mt(So,10)});this.bvhs.length=0,(xo=this.bvhs).push.apply(xo,wo),this.bvhs.loaded=!0,this.emit("bvhLoaded")},_o.prototype.load=function(xo,bo){var wo=this;if(bo===void 0&&(bo={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Eo=function(So,$o){$o===void 0&&($o=[]);var Do=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(So);if(!Do)return"";for(var No=0,Oo=String(Do[1]).trim().split(".").slice(1).reverse();No<Oo.length;No++){var Lo=Oo[No],Co=$o.indexOf(Lo);if(Co>=0)return $o[Co]}return""}(xo.file,Object.keys(Zi)),To=Zi[Eo];if(!To)throw new Error("[MODEL LOAD ERROR]: file type("+Eo+") does not support.");return To(xo,{textureOptions:bo,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(So){for(var $o=[],Do=0,No=So;Do<No.length;Do++)(Ro=No[Do]).traverse(function(jo){jo instanceof qe&&(jo.geometry.computeBoundingBox(),jo.geometry.computeBoundingSphere(),$o.push(jo.geometry.boundingBox))}),wo.add(Ro);wo.floorLength=wo.hasFloors_(),wo.bounding=function(jo){for(var zo=new r$3.Box3,Io=0,Po=jo;Io<Po.length;Io++){var Bo=Po[Io];zo.union(Bo)}return zo}($o);for(var Oo=wo.bounding.getCenter(new r$3.Vector3),Lo=0,Co=So;Lo<Co.length;Lo++){var Ro;(Ro=Co[Lo]).traverse(function(jo){jo instanceof qe&&jo.material.forEach(function(zo){zo.uniforms.modelCenter.value=Oo})})}$o.length=0,wo.emit("geometryLoaded"),wo.emit("materialLoaded"),wo.loaded=!0,We.shared.add(function(){return wo.emit("loaded")},!0)}).catch(function(So){return wo.emit("error",So),Promise.reject(So)})},_o.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},_o}(Ke);function Ji(va){switch(va.getError()){case va.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case va.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case va.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case va.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case va.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case va.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}Object.assign(Xi.prototype,{on:vt.prototype.on,once:vt.prototype.once,off:vt.prototype.off,emit:vt.prototype.emit,hasListener:vt.prototype.hasListener});var $i=2*Math.PI;function en(va){return(va%$i+$i)%$i}var tn=Math.PI,nn=2*tn;function rn(va,_o,xo){if(va===_o)return _o;var bo=_o-va;return Math.abs(bo)<=xo?_o:va+(bo>0?1:-1)*xo}var on=function(){function va(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={work:null,option:{}}}return va.prototype.toJSON=function(){return this.raw.work},va}();function sn(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=[];va=va.map(function(So){return So.trim()}).filter(function(So){return So.length>0&&!/^\/+$/.test(So)});for(var bo=0;bo<va.length;bo++){var wo=bo===0,Eo=bo===va.length-1,To=va[bo];wo||(To=To.replace(/^\/+/,"")),Eo||(To=To.replace(/\/+$/,"")),xo.push(To)}return xo.join("/")}function an(va){return va instanceof Error}function un(va,_o){if(va===_o)return!0;if(va&&_o&&typeof va=="object"&&typeof _o=="object"){if(va.constructor!==_o.constructor)return!1;var xo,bo,wo;if(Array.isArray(va)){if((xo=va.length)!=_o.length)return!1;for(bo=xo;bo--!=0;)if(!un(va[bo],_o[bo]))return!1;return!0}if(va.constructor===RegExp)return va.source===_o.source&&va.flags===_o.flags;if(va.valueOf!==Object.prototype.valueOf)return va.valueOf()===_o.valueOf();if(va.toString!==Object.prototype.toString)return va.toString()===_o.toString();if((xo=(wo=Object.keys(va)).length)!==Object.keys(_o).length)return!1;for(bo=xo;bo--!=0;)if(!Object.prototype.hasOwnProperty.call(_o,wo[bo]))return!1;for(bo=xo;bo--!=0;){var Eo=wo[bo];if(!un(va[Eo],_o[Eo]))return!1}return!0}return va!=va&&_o!=_o}function cn(va){return typeof va=="number"}function ln(va){return(va&va-1)==0&&va!==0}function hn(va,_o){_o===void 0&&(_o=!1);var xo=typeof va;if(xo==="string")return JSON.stringify(va);if(va===!0)return"true";if(va===!1)return"false";if(va===null)return"null";if(va instanceof Array){for(var bo="[",wo=va.length-1,Eo=0;Eo<wo;Eo++)bo+=hn(va[Eo],!1)+",";return wo>-1&&(bo+=hn(va[Eo],!1)),bo+"]"}if(va instanceof Object){if(typeof va.toJSON=="function")return hn(va.toJSON(),_o);var To=Object.keys(va).sort(),So=To.length;for(bo="",Eo=0;Eo<So;){var $o=To[Eo],Do=hn(va[$o],!0);Do!==void 0&&(Eo&&bo!==""&&(bo+=","),bo+=JSON.stringify($o)+":"+Do),Eo++}return"{"+bo+"}"}switch(xo){case"function":case"undefined":return _o?void 0:null;case"number":return 0;default:return isFinite(va)?va:null}}function dn(va){return String(hn(va,!1))}function pn(va){var _o,xo,bo,wo=JSON.parse(va),Eo=typeof location!="undefined"?location.hostname:"",To=Date.now();if(typeof wo!="object")return new Error("input is not an object");if(Eo.length===0||wt(Eo)||Et.filter(function(Co){return Tt(Co,Eo)}).length>0){var So=String((_o=wo.certificate)!==null&&_o!==void 0?_o:"");if(So){var $o=new ze;return $o.readCertPEM(So),{issuer:$o.getSubjectString()}}return{issuer:"none"}}var Do=String((xo=wo.certificate)!==null&&xo!==void 0?xo:"");if(!Do)return new Error("certificate is not existed.");var No=new ze;No.readCertPEM(Do);var Oo=String((bo=wo._signature)!==null&&bo!==void 0?bo:"");if(!Oo)return new Error("signature is not existed.");if(function(Co,Ro,jo){var zo=new ze;if(typeof jo=="string"?zo.readCertPEM(jo):zo.readCertHex(jo.hex),Le(zo)===!1)return!1;var Io=new K$1;return Io.readCertPubKeyHex(zo.hex,6),!!Io.verify(Co,C$2(Ro))}(dn(function(Co,Ro){for(var jo={},zo=0,Io=Object.keys(Co);zo<Io.length;zo++){var Po=Io[zo];Ro.indexOf(Po)===-1&&(jo[Po]=Co[Po])}return jo}(wo,["_signature"])),Oo,No)===!1)return new Error("signature verify failed.");var Lo=new Date(typeof wo.expire_at=="string"&&/^\d+$/.test(wo.expire_at)?Number(wo.expire_at):wo.expire_at);return To<Lo.getTime()?(Array.isArray(wo.allow_hosts)?wo.allow_hosts:[]).filter(function(Co){return Tt(Co,Eo)}).length===0?function(Co){return new Error("host("+JSON.stringify(Co)+") is not allowed.")}(Eo):{issuer:No.getSubjectString()}:function(Co){return new Error("date("+Co.toString()+") expired.")}(Lo)}var An=new WeakMap;function fn(va,_o,xo){var bo,wo=JSON.stringify(_o),Eo=JSON.stringify(va),To=pn(Eo);va=JSON.parse(Eo),_o=JSON.parse(wo);var So=new on;So.issuer=To instanceof Error?"none":To.issuer,So.raw={work:va,options:_o};var $o=(bo=va.base_url)!==null&&bo!==void 0?bo:"";$o&&$o[$o.length-1]!=="/"&&($o+="/");var Do=function(xs,Bs){var Fs,Zs=xs;if(_o.jsonp===!0&&(Zs=(Zs=xs.replace(/([\?\#].*)?$/i,""))+"."+Ie(""+Zs).slice(0,7)+".jsonp"),_o.shortPath===!0){var bu=Zs.replace($o,"").split("."),Au=(Fs=bu.shift())!==null&&Fs!==void 0?Fs:"",ds=bu.join(".");Zs=sn($o,Ie(Au))+(ds?"."+ds:"")}var cs=Zs.replace($o,"");return _o.baseURL&&(Zs=sn(_o.baseURL,cs)),xo&&xo(xs,Zs,cs,Bs),Zs},No=function(xs,Bs){var Fs,Zs,bu,Au,ds,cs,bs=xs;if(!Ri(xs)){var Ls=(cs=(Au=(Zs=(Fs=va.panorama)===null||Fs===void 0?void 0:Fs.pano_high_cube_base_url)!==null&&Zs!==void 0?Zs:(bu=va.panorama)===null||bu===void 0?void 0:bu.pano_cube_base_url)!==null&&Au!==void 0?Au:(ds=va.panorama)===null||ds===void 0?void 0:ds.base_url)!==null&&cs!==void 0?cs:"";Ls&&(Ls=sn(Ls,String(Bs))),bs=sn(Ls,bs)}return Ri(bs)||(bs=sn($o,bs)),Do(bs,"panorama")},Oo=function(xs){var Bs=xs;return Ri(Bs)||(Bs=sn($o,xs)),Do(Bs,"model")},Lo=function(xs,Bs){Bs===void 0&&(Bs="");var Fs=xs;return Ri(Fs)||(Fs=sn(Bs,Fs)),Ri(Fs)||(Fs=sn($o,Fs)),Do(Fs,"texture")};if(So.workCode=String(va.work_code||va.code||va.vr_code||va.workCode),So.name=String(va.name),So.expire=new Date(typeof va.expire_at=="string"&&/^\d+$/.test(va.expire_at)?Number(va.expire_at):va.expire_at),So.allowHosts=va.allow_hosts||[],an(To)||(va.initial&&(va.initial.mode!=="Floorplan"&&va.initial.mode!=="Topview"&&va.initial.mode!=="Panorama"&&va.initial.mode!=="VRPanorama"&&va.initial.mode!=="Model"&&va.initial.mode!=="DepthPanorama"||(So.initial.mode=va.initial.mode),cn(va.initial.latitude)&&(So.initial.latitude=va.initial.latitude),cn(va.initial.longitude)?So.initial.longitude=va.initial.longitude:cn(va.initial.heading)&&(So.initial.longitude=-(360*(va.initial.heading-.25)+90)/180*Math.PI),cn(va.initial.fov)&&(So.initial.fov=va.initial.fov),cn(va.initial.panoIndex)?So.initial.panoIndex=va.initial.panoIndex:cn(va.initial.pano_index)?So.initial.panoIndex=va.initial.pano_index:cn(va.initial.pano)&&(So.initial.panoIndex=va.initial.pano)),an(To)))return To;if(va.model){var Co={bvh:!0,async:!1,textureBase:"",textures:[]};typeof _o.modelBvh=="boolean"?Co.bvh=_o.modelBvh:typeof va.model.bvh=="boolean"?Co.bvh=va.model.bvh:typeof va.bvh=="boolean"&&(Co.bvh=va.bvh),_o.modelAsync,Co.async=_o.modelAsync,va.model.file?Co.file=Oo(va.model.file):va.model.file_url&&(Co.file=Oo(va.model.file_url)),va.model.textureBase?Co.textureBase=va.model.textureBase:va.model.material_base_url&&(Co.textureBase=va.model.material_base_url),Array.isArray(va.model.textures)?Co.textures=va.model.textures.map(function(xs){return Lo(xs,Co.textureBase)}):Array.isArray(va.model.material_textures)&&(Co.textures=va.model.material_textures.map(function(xs){return Lo(xs,Co.textureBase)})),Co.file&&(So.model=Co)}if(an(To))return To;if(va.observers&&Array.isArray(va.observers)){var Ro=[];va.panorama&&(Array.isArray(va.panorama)?Ro=va.panorama:Array.isArray(va.panorama.list)?Ro=va.panorama.list:Array.isArray(va.panorama.info)&&(Ro=va.panorama.info));for(var jo=0;jo<va.observers.length;jo++){var zo={},Io=va.observers[jo];if(!Io)break;var Po=Ro[jo]||{};Io=Object.assign({},Io,Po,{active:Io.active!==!1&&Po.active!==!1}),zo.panoIndex=jo,zo.active=Io.active!==!1,zo.loadable=Io.loadable===!0,zo.images={up:No(Io.images?Io.images.up:Io.up,jo),down:No(Io.images?Io.images.down:Io.down,jo),right:No(Io.images?Io.images.right:Io.right,jo),left:No(Io.images?Io.images.left:Io.left,jo),front:No(Io.images?Io.images.front:Io.front,jo),back:No(Io.images?Io.images.back:Io.back,jo)};var Bo=Io.images?Io.images.depth:Io.depth;Bo&&(zo.images.depth=No(Bo,jo));var ko=Io.images?Io.images.luminance:Io.luminance;ko&&(zo.images.luminance={up:No(ko.up,jo),down:No(ko.down,jo),right:No(ko.right,jo),left:No(ko.left,jo),front:No(ko.front,jo),back:No(ko.back,jo)});var Uo=Io.images?Io.images.tiles:Io.tiles;if(Uo){for(var Qo=[],qo=function(xs){var Bs=xs.match(/\/cube_(\d+)\//);if(Bs){var Fs=Number(Bs[1]);if(ln(Fs))return Fs}return!1},Zo=function(xs,Bs){return xs.replace(/\/cube_(\d+)\//,function(){return"/cube_"+Bs+"/"})},Xo=0,Fo=Uo;Xo<Fo.length;Xo++){var Go=Fo[Xo];if(typeof Go=="number"){var Vo=Go,Wo=qo(zo.images.front);if(Wo===!1)continue;if((ss=Math.max(Wo,512*Math.pow(2,Vo)))>2048){var Yo=Zo(zo.images.up,ss),Ko=Zo(zo.images.down,ss),ts=Zo(zo.images.right,ss),Jo=Zo(zo.images.left,ss),rs=Zo(zo.images.front,ss),ls=Zo(zo.images.back,ss);Qo.push({level:Vo,size:ss,up:Yo,down:Ko,right:ts,left:Jo,front:rs,back:ls})}else Yo=zo.images.up,Ko=zo.images.down,ts=zo.images.right,Jo=zo.images.left,rs=zo.images.front,ls=zo.images.back,Qo.push({level:Vo,size:ss,up:Yo,down:Ko,right:ts,left:Jo,front:rs,back:ls})}else{var ss;if(typeof(Vo=Go.level)!="number"||typeof(ss=Go.size)!="number")continue;Yo=No(Go.up,jo),Ko=No(Go.down,jo),ts=No(Go.right,jo),Jo=No(Go.left,jo),rs=No(Go.front,jo),ls=No(Go.back,jo),Qo.push({level:Vo,size:ss,up:Yo,down:Ko,right:ts,left:Jo,front:rs,back:ls})}}Qo.sort(function(xs,Bs){return xs.level-Bs.level}),zo.images.tiles=Qo}if(Io.position instanceof r$3.Vector3)zo.position=Io.position.clone();else{if(!Array.isArray(Io.position))break;zo.position=new r$3.Vector3().fromArray(Io.position)}if(Io.standingPosition instanceof r$3.Vector3)zo.standingPosition=Io.standingPosition.clone();else if(Array.isArray(Io.standingPosition))zo.standingPosition=new r$3.Vector3().fromArray(Io.standingPosition);else if(Io.standing_position instanceof r$3.Vector3)zo.standingPosition=Io.standing_position.clone();else{if(!Array.isArray(Io.standing_position))break;zo.standingPosition=new r$3.Vector3().fromArray(Io.standing_position)}if(Io.quaternion instanceof r$3.Quaternion)zo.quaternion=Io.quaternion.clone();else if(Array.isArray(Io.quaternion))zo.quaternion=new r$3.Quaternion().fromArray(Io.quaternion);else{if(!Io.quaternion)break;var us=Io.quaternion,ms=us.x,As=us.y,Os=us.z,Es=us.w;zo.quaternion=new r$3.Quaternion(ms,As,Os,Es)}if(Array.isArray(Io.accessibleNodes)?zo.accessibleNodes=Io.accessibleNodes.slice():Array.isArray(Io.accessible_nodes)&&(zo.accessibleNodes=Io.accessible_nodes.slice()),Array.isArray(Io.visibleNodes)?zo.visibleNodes=Io.visibleNodes.slice():Array.isArray(Io.visible_nodes)&&(zo.visibleNodes=Io.visible_nodes.slice()),cn(Io.floorIndex)?zo.floorIndex=Io.floorIndex:cn(Io.floor_index)?zo.floorIndex=Io.floor_index:zo.floorIndex=0,Io.video){var Ms={};typeof Io.video.source=="string"&&(Ms.source=Io.video.source),Io.video.matrix instanceof r$3.Matrix4?Ms.matrix=Io.video.matrix.clone():Array.isArray(Io.video.matrix)&&(Ms.matrix=new r$3.Matrix4().fromArray(Io.video.matrix)),Io.video.size instanceof r$3.Vector2?Ms.size=Io.video.size.clone():Array.isArray(Io.video.size)&&(Ms.size=new r$3.Vector2().fromArray(Io.video.size)),Ms.source&&Ms.matrix&&Ms.size&&(zo.video=Ms)}So.observers[jo]=zo}}if(an(To))return To;for(var $s=0,ks=So.observers;$s<ks.length;$s++){if(!(zo=ks[$s]).accessibleNodes){zo.accessibleNodes=[];for(var zs=0;zs<So.observers.length;zs++)So.observers[zs]!==zo&&zo.accessibleNodes.push(zs)}if(!zo.visibleNodes)for(zo.visibleNodes=[],zs=0;zs<So.observers.length;zs++)So.observers[zs]!==zo&&zo.visibleNodes.push(zs)}if(an(To))return To;var Cs=Nt(So);return An.set(Cs,{work:Eo,options:wo}),Cs}function Mn(va,_o,xo){typeof va=="string"&&va.trim()[0]==="{"&&(va=JSON.parse(va));var bo=An.get(va);if(bo){if(_o&&!un(JSON.parse(bo.options),_o))throw new Error("[PARSE FAILED]: work is parsed with different options.");return va}var wo=fn(va,_o!=null?_o:{},xo);if(an(wo))throw new Error("[PARSE FAILED]: "+wo.message);return wo}function gn(va,_o,xo){var bo=Math.abs(va-_o);return bo<.001||xo!==void 0&&Math.abs(xo-bo)<.001}function yn(va,_o,xo){return!gn(va,_o,xo)}function mn(va,_o){return va.distanceTo(_o)<.001}function vn(va,_o){return!mn(va,_o)}function Nn(va,_o){va.mode=_o.mode,va.panoIndex=_o.panoIndex,va.longitude=_o.longitude,va.latitude=_o.latitude,va.fov=_o.fov,va.offset.copy(_o.offset)}function Dn(va,_o){return va.panoIndex===_o.panoIndex&&va.mode===_o.mode&&gn(va.longitude,_o.longitude,2*Math.PI)&&gn(va.latitude,_o.latitude)&&gn(va.fov,_o.fov)&&mn(va.offset,_o.offset)}var wn=function(va){return Number(va)};function Tn(va,_o,xo){var bo;_o===void 0&&(_o=wn),xo===void 0&&(xo=!1);for(var wo,Eo=1/0,To=0,So=va;To<So.length;To++){var $o=So[To],Do=_o($o);Do<=Eo&&(wo=(bo=[$o,Do])[0],Eo=bo[1])}return xo?[wo,Eo]:wo}function xn(va,_o,xo){return Math.max(_o,Math.min(xo,va))}function En(va){for(var _o in va)return!1;return!0}function jn(va){return{longitude:va.longitude,latitude:va.latitude,fov:va.fov,offset:va.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var zn=function(va,_o,xo,bo){var wo,Eo=["","webkit","Moz","MS","ms","o"],To=_o.createElement?_o.createElement("div"):bo,So=Math.round,$o=Math.abs,Do=Date.now;function No(as,hs,gs){return setTimeout(Io(as,gs),hs)}function Oo(as,hs,gs){return!!Array.isArray(as)&&(Lo(as,gs[hs],gs),!0)}function Lo(as,hs,gs){var _s;if(as)if(as.forEach)as.forEach(hs,gs);else if(as.length!==bo)for(_s=0;_s<as.length;)hs.call(gs,as[_s],_s,as),_s++;else for(_s in as)as.hasOwnProperty(_s)&&hs.call(gs,as[_s],_s,as)}function Co(as,hs,gs){var _s="DEPRECATED METHOD: "+hs+`
`+gs+` AT 
`;return function(){var Rs=new Error("get-stack-trace"),cu=Rs&&Rs.stack?Rs.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",lu=va.console&&(va.console.warn||va.console.log);return lu&&lu.call(va.console,_s,cu),as.apply(this,arguments)}}wo=typeof Object.assign!="function"?function(as){if(as===bo||as===null)throw new TypeError("Cannot convert undefined or null to object");for(var hs=Object(as),gs=1;gs<arguments.length;gs++){var _s=arguments[gs];if(_s!==bo&&_s!==null)for(var Rs in _s)_s.hasOwnProperty(Rs)&&(hs[Rs]=_s[Rs])}return hs}:Object.assign;var Ro=Co(function(as,hs,gs){for(var _s=Object.keys(hs),Rs=0;Rs<_s.length;)(!gs||gs&&as[_s[Rs]]===bo)&&(as[_s[Rs]]=hs[_s[Rs]]),Rs++;return as},"extend","Use `assign`."),jo=Co(function(as,hs){return Ro(as,hs,!0)},"merge","Use `assign`.");function zo(as,hs,gs){var _s,Rs=hs.prototype;(_s=as.prototype=Object.create(Rs)).constructor=as,_s._super=Rs,gs&&wo(_s,gs)}function Io(as,hs){return function(){return as.apply(hs,arguments)}}function Po(as,hs){return typeof as=="function"?as.apply(hs&&hs[0]||bo,hs):as}function Bo(as,hs){return as===bo?hs:as}function ko(as,hs,gs){Lo(Zo(hs),function(_s){as.addEventListener(_s,gs,!1)})}function Uo(as,hs,gs){Lo(Zo(hs),function(_s){as.removeEventListener(_s,gs,!1)})}function Qo(as,hs){for(;as;){if(as==hs)return!0;as=as.parentNode}return!1}function qo(as,hs){return as.indexOf(hs)>-1}function Zo(as){return as.trim().split(/\s+/g)}function Xo(as,hs,gs){if(as.indexOf&&!gs)return as.indexOf(hs);for(var _s=0;_s<as.length;){if(gs&&as[_s][gs]==hs||!gs&&as[_s]===hs)return _s;_s++}return-1}function Fo(as){return Array.prototype.slice.call(as,0)}function Go(as,hs,gs){for(var _s=[],Rs=[],cu=0;cu<as.length;){var lu=hs?as[cu][hs]:as[cu];Xo(Rs,lu)<0&&_s.push(as[cu]),Rs[cu]=lu,cu++}return gs&&(_s=hs?_s.sort(function(Iu,su){return Iu[hs]>su[hs]}):_s.sort()),_s}function Vo(as,hs){for(var gs,_s,Rs=hs[0].toUpperCase()+hs.slice(1),cu=0;cu<Eo.length;){if((_s=(gs=Eo[cu])?gs+Rs:hs)in as)return _s;cu++}return bo}var Wo=1;function Yo(as){var hs=as.ownerDocument||as;return hs.defaultView||hs.parentWindow||va}var Ko="ontouchstart"in va,ts=Vo(va,"PointerEvent")!==bo,Jo=Ko&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rs="touch",ls="mouse",ss=24,us=["x","y"],ms=["clientX","clientY"];function As(as,hs){var gs=this;this.manager=as,this.callback=hs,this.element=as.element,this.target=as.options.inputTarget,this.domHandler=function(_s){Po(as.options.enable,[as])&&gs.handler(_s)},this.init()}function Os(as,hs,gs){var _s=gs.pointers.length,Rs=gs.changedPointers.length,cu=1&hs&&_s-Rs==0,lu=12&hs&&_s-Rs==0;gs.isFirst=!!cu,gs.isFinal=!!lu,cu&&(as.session={}),gs.eventType=hs,function(Iu,su){var Cu=Iu.session,Qu=su.pointers,Zu=Qu.length;Cu.firstInput||(Cu.firstInput=Es(su)),Zu>1&&!Cu.firstMultiple?Cu.firstMultiple=Es(su):Zu===1&&(Cu.firstMultiple=!1);var tl=Cu.firstInput,Ju=Cu.firstMultiple,dl=Ju?Ju.center:tl.center,pl=su.center=Ms(Qu);su.timeStamp=Do(),su.deltaTime=su.timeStamp-tl.timeStamp,su.angle=Cs(dl,pl),su.distance=zs(dl,pl),function(Hu,Nu){var $u=Nu.center,Ho=Hu.offsetDelta||{},es=Hu.prevDelta||{},ns=Hu.prevInput||{};Nu.eventType!==1&&ns.eventType!==4||(es=Hu.prevDelta={x:ns.deltaX||0,y:ns.deltaY||0},Ho=Hu.offsetDelta={x:$u.x,y:$u.y}),Nu.deltaX=es.x+($u.x-Ho.x),Nu.deltaY=es.y+($u.y-Ho.y)}(Cu,su),su.offsetDirection=ks(su.deltaX,su.deltaY);var Ku=$s(su.deltaTime,su.deltaX,su.deltaY);su.overallVelocityX=Ku.x,su.overallVelocityY=Ku.y,su.overallVelocity=$o(Ku.x)>$o(Ku.y)?Ku.x:Ku.y,su.scale=Ju?function(Hu,Nu){return zs(Nu[0],Nu[1],ms)/zs(Hu[0],Hu[1],ms)}(Ju.pointers,Qu):1,su.rotation=Ju?function(Hu,Nu){return Cs(Nu[1],Nu[0],ms)+Cs(Hu[1],Hu[0],ms)}(Ju.pointers,Qu):0,su.maxPointers=Cu.prevInput?su.pointers.length>Cu.prevInput.maxPointers?su.pointers.length:Cu.prevInput.maxPointers:su.pointers.length,function(Hu,Nu){var $u,Ho,es,ns,os=Hu.lastInterval||Nu,ps=Nu.timeStamp-os.timeStamp;if(Nu.eventType!=8&&(ps>25||os.velocity===bo)){var vs=Nu.deltaX-os.deltaX,Ss=Nu.deltaY-os.deltaY,js=$s(ps,vs,Ss);Ho=js.x,es=js.y,$u=$o(js.x)>$o(js.y)?js.x:js.y,ns=ks(vs,Ss),Hu.lastInterval=Nu}else $u=os.velocity,Ho=os.velocityX,es=os.velocityY,ns=os.direction;Nu.velocity=$u,Nu.velocityX=Ho,Nu.velocityY=es,Nu.direction=ns}(Cu,su);var Su=Iu.element;Qo(su.srcEvent.target,Su)&&(Su=su.srcEvent.target),su.target=Su}(as,gs),as.emit("hammer.input",gs),as.recognize(gs),as.session.prevInput=gs}function Es(as){for(var hs=[],gs=0;gs<as.pointers.length;)hs[gs]={clientX:So(as.pointers[gs].clientX),clientY:So(as.pointers[gs].clientY)},gs++;return{timeStamp:Do(),pointers:hs,center:Ms(hs),deltaX:as.deltaX,deltaY:as.deltaY}}function Ms(as){var hs=as.length;if(hs===1)return{x:So(as[0].clientX),y:So(as[0].clientY)};for(var gs=0,_s=0,Rs=0;Rs<hs;)gs+=as[Rs].clientX,_s+=as[Rs].clientY,Rs++;return{x:So(gs/hs),y:So(_s/hs)}}function $s(as,hs,gs){return{x:hs/as||0,y:gs/as||0}}function ks(as,hs){return as===hs?1:$o(as)>=$o(hs)?as<0?2:4:hs<0?8:16}function zs(as,hs,gs){gs||(gs=us);var _s=hs[gs[0]]-as[gs[0]],Rs=hs[gs[1]]-as[gs[1]];return Math.sqrt(_s*_s+Rs*Rs)}function Cs(as,hs,gs){gs||(gs=us);var _s=hs[gs[0]]-as[gs[0]],Rs=hs[gs[1]]-as[gs[1]];return 180*Math.atan2(Rs,_s)/Math.PI}As.prototype={handler:function(){},init:function(){this.evEl&&ko(this.element,this.evEl,this.domHandler),this.evTarget&&ko(this.target,this.evTarget,this.domHandler),this.evWin&&ko(Yo(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Uo(this.element,this.evEl,this.domHandler),this.evTarget&&Uo(this.target,this.evTarget,this.domHandler),this.evWin&&Uo(Yo(this.element),this.evWin,this.domHandler)}};var xs={mousedown:1,mousemove:2,mouseup:4},Bs="mousedown",Fs="mousemove mouseup";function Zs(){this.evEl=Bs,this.evWin=Fs,this.pressed=!1,As.apply(this,arguments)}zo(Zs,As,{handler:function(as){var hs=xs[as.type];1&hs&&as.button===0&&(this.pressed=!0),2&hs&&as.which!==1&&(hs=4),this.pressed&&(4&hs&&(this.pressed=!1),this.callback(this.manager,hs,{pointers:[as],changedPointers:[as],pointerType:ls,srcEvent:as}))}});var bu={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Au={2:rs,3:"pen",4:ls,5:"kinect"},ds="pointerdown",cs="pointermove pointerup pointercancel";function bs(){this.evEl=ds,this.evWin=cs,As.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}va.MSPointerEvent&&!va.PointerEvent&&(ds="MSPointerDown",cs="MSPointerMove MSPointerUp MSPointerCancel"),zo(bs,As,{handler:function(as){var hs=this.store,gs=!1,_s=as.type.toLowerCase().replace("ms",""),Rs=bu[_s],cu=Au[as.pointerType]||as.pointerType,lu=cu==rs,Iu=Xo(hs,as.pointerId,"pointerId");1&Rs&&(as.button===0||lu)?Iu<0&&(hs.push(as),Iu=hs.length-1):12&Rs&&(gs=!0),Iu<0||(hs[Iu]=as,this.callback(this.manager,Rs,{pointers:hs,changedPointers:[as],pointerType:cu,srcEvent:as}),gs&&hs.splice(Iu,1))}});var Ls={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Js="touchstart",Qs="touchstart touchmove touchend touchcancel";function Gs(){this.evTarget=Js,this.evWin=Qs,this.started=!1,As.apply(this,arguments)}function fu(as,hs){var gs=Fo(as.touches),_s=Fo(as.changedTouches);return 12&hs&&(gs=Go(gs.concat(_s),"identifier",!0)),[gs,_s]}zo(Gs,As,{handler:function(as){var hs=Ls[as.type];if(hs===1&&(this.started=!0),this.started){var gs=fu.call(this,as,hs);12&hs&&gs[0].length-gs[1].length==0&&(this.started=!1),this.callback(this.manager,hs,{pointers:gs[0],changedPointers:gs[1],pointerType:rs,srcEvent:as})}}});var ru={touchstart:1,touchmove:2,touchend:4,touchcancel:8},eu="touchstart touchmove touchend touchcancel";function Vs(){this.evTarget=eu,this.targetIds={},As.apply(this,arguments)}function Hs(as,hs){var gs=Fo(as.touches),_s=this.targetIds;if(3&hs&&gs.length===1)return _s[gs[0].identifier]=!0,[gs,gs];var Rs,cu,lu=Fo(as.changedTouches),Iu=[],su=this.target;if(cu=gs.filter(function(Cu){return Qo(Cu.target,su)}),hs===1)for(Rs=0;Rs<cu.length;)_s[cu[Rs].identifier]=!0,Rs++;for(Rs=0;Rs<lu.length;)_s[lu[Rs].identifier]&&Iu.push(lu[Rs]),12&hs&&delete _s[lu[Rs].identifier],Rs++;return Iu.length?[Go(cu.concat(Iu),"identifier",!0),Iu]:void 0}zo(Vs,As,{handler:function(as){var hs=ru[as.type],gs=Hs.call(this,as,hs);gs&&this.callback(this.manager,hs,{pointers:gs[0],changedPointers:gs[1],pointerType:rs,srcEvent:as})}});function Ys(){As.apply(this,arguments);var as=Io(this.handler,this);this.touch=new Vs(this.manager,as),this.mouse=new Zs(this.manager,as),this.primaryTouch=null,this.lastTouches=[]}function tu(as,hs){1&as?(this.primaryTouch=hs.changedPointers[0].identifier,ys.call(this,hs)):12&as&&ys.call(this,hs)}function ys(as){var hs=as.changedPointers[0];if(hs.identifier===this.primaryTouch){var gs={x:hs.clientX,y:hs.clientY};this.lastTouches.push(gs);var _s=this.lastTouches;setTimeout(function(){var Rs=_s.indexOf(gs);Rs>-1&&_s.splice(Rs,1)},2500)}}function Xs(as){for(var hs=as.srcEvent.clientX,gs=as.srcEvent.clientY,_s=0;_s<this.lastTouches.length;_s++){var Rs=this.lastTouches[_s],cu=Math.abs(hs-Rs.x),lu=Math.abs(gs-Rs.y);if(cu<=25&&lu<=25)return!0}return!1}zo(Ys,As,{handler:function(as,hs,gs){var _s=gs.pointerType==rs,Rs=gs.pointerType==ls;if(!(Rs&&gs.sourceCapabilities&&gs.sourceCapabilities.firesTouchEvents)){if(_s)tu.call(this,hs,gs);else if(Rs&&Xs.call(this,gs))return;this.callback(as,hs,gs)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ks=To?Vo(To.style,"touchAction"):bo,du=Ks!==bo,qs="compute",uu="auto",xu="manipulation",Eu="none",ju="pan-x",au="pan-y",Lu=function(){if(!du)return!1;var as={},hs=va.CSS&&va.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(gs){as[gs]=!hs||va.CSS.supports("touch-action",gs)}),as}();function zu(as,hs){this.manager=as,this.set(hs)}zu.prototype={set:function(as){as==qs&&(as=this.compute()),du&&this.manager.element.style&&Lu[as]&&(this.manager.element.style[Ks]=as),this.actions=as.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var as=[];return Lo(this.manager.recognizers,function(hs){Po(hs.options.enable,[hs])&&(as=as.concat(hs.getTouchAction()))}),function(hs){if(qo(hs,Eu))return Eu;var gs=qo(hs,ju),_s=qo(hs,au);return gs&&_s?Eu:gs||_s?gs?ju:au:qo(hs,xu)?xu:uu}(as.join(" "))},preventDefaults:function(as){var hs=as.srcEvent,gs=as.offsetDirection;if(this.manager.session.prevented)hs.preventDefault();else{var _s=this.actions,Rs=qo(_s,Eu)&&!Lu.none,cu=qo(_s,au)&&!Lu["pan-y"],lu=qo(_s,ju)&&!Lu["pan-x"];if(Rs){var Iu=as.pointers.length===1,su=as.distance<2,Cu=as.deltaTime<250;if(Iu&&su&&Cu)return}if(!lu||!cu)return Rs||cu&&6&gs||lu&&gs&ss?this.preventSrc(hs):void 0}},preventSrc:function(as){this.manager.session.prevented=!0,as.preventDefault()}};var Pu=32;function ku(as){this.options=wo({},this.defaults,as||{}),this.id=Wo++,this.manager=null,this.options.enable=Bo(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Du(as){return 16&as?"cancel":8&as?"end":4&as?"move":2&as?"start":""}function Xu(as){return as==16?"down":as==8?"up":as==2?"left":as==4?"right":""}function fs(as,hs){var gs=hs.manager;return gs?gs.get(as):as}function Ns(){ku.apply(this,arguments)}function Ts(){Ns.apply(this,arguments),this.pX=null,this.pY=null}function Ps(){Ns.apply(this,arguments)}function Ws(){ku.apply(this,arguments),this._timer=null,this._input=null}function vu(){Ns.apply(this,arguments)}function iu(){Ns.apply(this,arguments)}function ou(){ku.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function pu(as,hs){return(hs=hs||{}).recognizers=Bo(hs.recognizers,pu.defaults.preset),new mu(as,hs)}ku.prototype={defaults:{},set:function(as){return wo(this.options,as),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(as){if(Oo(as,"recognizeWith",this))return this;var hs=this.simultaneous;return hs[(as=fs(as,this)).id]||(hs[as.id]=as,as.recognizeWith(this)),this},dropRecognizeWith:function(as){return Oo(as,"dropRecognizeWith",this)||(as=fs(as,this),delete this.simultaneous[as.id]),this},requireFailure:function(as){if(Oo(as,"requireFailure",this))return this;var hs=this.requireFail;return Xo(hs,as=fs(as,this))===-1&&(hs.push(as),as.requireFailure(this)),this},dropRequireFailure:function(as){if(Oo(as,"dropRequireFailure",this))return this;as=fs(as,this);var hs=Xo(this.requireFail,as);return hs>-1&&this.requireFail.splice(hs,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(as){return!!this.simultaneous[as.id]},emit:function(as){var hs=this,gs=this.state;function _s(Rs){hs.manager.emit(Rs,as)}gs<8&&_s(hs.options.event+Du(gs)),_s(hs.options.event),as.additionalEvent&&_s(as.additionalEvent),gs>=8&&_s(hs.options.event+Du(gs))},tryEmit:function(as){if(this.canEmit())return this.emit(as);this.state=Pu},canEmit:function(){for(var as=0;as<this.requireFail.length;){if(!(33&this.requireFail[as].state))return!1;as++}return!0},recognize:function(as){var hs=wo({},as);if(!Po(this.options.enable,[this,hs]))return this.reset(),void(this.state=Pu);56&this.state&&(this.state=1),this.state=this.process(hs),30&this.state&&this.tryEmit(hs)},process:function(as){},getTouchAction:function(){},reset:function(){}},zo(Ns,ku,{defaults:{pointers:1},attrTest:function(as){var hs=this.options.pointers;return hs===0||as.pointers.length===hs},process:function(as){var hs=this.state,gs=as.eventType,_s=6&hs,Rs=this.attrTest(as);return _s&&(8&gs||!Rs)?16|hs:_s||Rs?4&gs?8|hs:2&hs?4|hs:2:Pu}}),zo(Ts,Ns,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var as=this.options.direction,hs=[];return 6&as&&hs.push(au),as&ss&&hs.push(ju),hs},directionTest:function(as){var hs=this.options,gs=!0,_s=as.distance,Rs=as.direction,cu=as.deltaX,lu=as.deltaY;return Rs&hs.direction||(6&hs.direction?(Rs=cu===0?1:cu<0?2:4,gs=cu!=this.pX,_s=Math.abs(as.deltaX)):(Rs=lu===0?1:lu<0?8:16,gs=lu!=this.pY,_s=Math.abs(as.deltaY))),as.direction=Rs,gs&&_s>hs.threshold&&Rs&hs.direction},attrTest:function(as){return Ns.prototype.attrTest.call(this,as)&&(2&this.state||!(2&this.state)&&this.directionTest(as))},emit:function(as){this.pX=as.deltaX,this.pY=as.deltaY;var hs=Xu(as.direction);hs&&(as.additionalEvent=this.options.event+hs),this._super.emit.call(this,as)}}),zo(Ps,Ns,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Eu]},attrTest:function(as){return this._super.attrTest.call(this,as)&&(Math.abs(as.scale-1)>this.options.threshold||2&this.state)},emit:function(as){if(as.scale!==1){var hs=as.scale<1?"in":"out";as.additionalEvent=this.options.event+hs}this._super.emit.call(this,as)}}),zo(Ws,ku,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[uu]},process:function(as){var hs=this.options,gs=as.pointers.length===hs.pointers,_s=as.distance<hs.threshold,Rs=as.deltaTime>hs.time;if(this._input=as,!_s||!gs||12&as.eventType&&!Rs)this.reset();else if(1&as.eventType)this.reset(),this._timer=No(function(){this.state=8,this.tryEmit()},hs.time,this);else if(4&as.eventType)return 8;return Pu},reset:function(){clearTimeout(this._timer)},emit:function(as){this.state===8&&(as&&4&as.eventType?this.manager.emit(this.options.event+"up",as):(this._input.timeStamp=Do(),this.manager.emit(this.options.event,this._input)))}}),zo(vu,Ns,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Eu]},attrTest:function(as){return this._super.attrTest.call(this,as)&&(Math.abs(as.rotation)>this.options.threshold||2&this.state)}}),zo(iu,Ns,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ts.prototype.getTouchAction.call(this)},attrTest:function(as){var hs,gs=this.options.direction;return 30&gs?hs=as.overallVelocity:6&gs?hs=as.overallVelocityX:gs&ss&&(hs=as.overallVelocityY),this._super.attrTest.call(this,as)&&gs&as.offsetDirection&&as.distance>this.options.threshold&&as.maxPointers==this.options.pointers&&$o(hs)>this.options.velocity&&4&as.eventType},emit:function(as){var hs=Xu(as.offsetDirection);hs&&this.manager.emit(this.options.event+hs,as),this.manager.emit(this.options.event,as)}}),zo(ou,ku,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xu]},process:function(as){var hs=this.options,gs=as.pointers.length===hs.pointers,_s=as.distance<hs.threshold,Rs=as.deltaTime<hs.time;if(this.reset(),1&as.eventType&&this.count===0)return this.failTimeout();if(_s&&Rs&&gs){if(as.eventType!=4)return this.failTimeout();var cu=!this.pTime||as.timeStamp-this.pTime<hs.interval,lu=!this.pCenter||zs(this.pCenter,as.center)<hs.posThreshold;if(this.pTime=as.timeStamp,this.pCenter=as.center,lu&&cu?this.count+=1:this.count=1,this._input=as,this.count%hs.taps==0)return this.hasRequireFailures()?(this._timer=No(function(){this.state=8,this.tryEmit()},hs.interval,this),2):8}return Pu},failTimeout:function(){return this._timer=No(function(){this.state=Pu},this.options.interval,this),Pu},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),pu.VERSION="2.0.7",pu.defaults={domEvents:!1,touchAction:qs,enable:!0,inputTarget:null,inputClass:null,preset:[[vu,{enable:!1}],[Ps,{enable:!1},["rotate"]],[iu,{direction:6}],[Ts,{direction:6},["swipe"]],[ou],[ou,{event:"doubletap",taps:2},["tap"]],[Ws]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function mu(as,hs){var gs;this.options=wo({},pu.defaults,hs||{}),this.options.inputTarget=this.options.inputTarget||as,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=as,this.input=new((gs=this).options.inputClass||(ts?bs:Jo?Vs:Ko?Ys:Zs))(gs,Os),this.touchAction=new zu(this,this.options.touchAction),Tu(this,!0),Lo(this.options.recognizers,function(_s){var Rs=this.add(new _s[0](_s[1]));_s[2]&&Rs.recognizeWith(_s[2]),_s[3]&&Rs.requireFailure(_s[3])},this)}function Tu(as,hs){var gs,_s=as.element;_s.style&&(Lo(as.options.cssProps,function(Rs,cu){gs=Vo(_s.style,cu),hs?(as.oldCssProps[gs]=_s.style[gs],_s.style[gs]=Rs):_s.style[gs]=as.oldCssProps[gs]||""}),hs||(as.oldCssProps={}))}return mu.prototype={set:function(as){return wo(this.options,as),as.touchAction&&this.touchAction.update(),as.inputTarget&&(this.input.destroy(),this.input.target=as.inputTarget,this.input.init()),this},stop:function(as){this.session.stopped=as?2:1},recognize:function(as){var hs=this.session;if(!hs.stopped){var gs;this.touchAction.preventDefaults(as);var _s=this.recognizers,Rs=hs.curRecognizer;(!Rs||Rs&&8&Rs.state)&&(Rs=hs.curRecognizer=null);for(var cu=0;cu<_s.length;)gs=_s[cu],hs.stopped===2||Rs&&gs!=Rs&&!gs.canRecognizeWith(Rs)?gs.reset():gs.recognize(as),!Rs&&14&gs.state&&(Rs=hs.curRecognizer=gs),cu++}},get:function(as){if(as instanceof ku)return as;for(var hs=this.recognizers,gs=0;gs<hs.length;gs++)if(hs[gs].options.event==as)return hs[gs];return null},add:function(as){if(Oo(as,"add",this))return this;var hs=this.get(as.options.event);return hs&&this.remove(hs),this.recognizers.push(as),as.manager=this,this.touchAction.update(),as},remove:function(as){if(Oo(as,"remove",this))return this;if(as=this.get(as)){var hs=this.recognizers,gs=Xo(hs,as);gs!==-1&&(hs.splice(gs,1),this.touchAction.update())}return this},on:function(as,hs){if(as!==bo&&hs!==bo){var gs=this.handlers;return Lo(Zo(as),function(_s){gs[_s]=gs[_s]||[],gs[_s].push(hs)}),this}},off:function(as,hs){if(as!==bo){var gs=this.handlers;return Lo(Zo(as),function(_s){hs?gs[_s]&&gs[_s].splice(Xo(gs[_s],hs),1):delete gs[_s]}),this}},emit:function(as,hs){this.options.domEvents&&function(Rs,cu){var lu=_o.createEvent("Event");lu.initEvent(Rs,!0,!0),lu.gesture=cu,cu.target.dispatchEvent(lu)}(as,hs);var gs=this.handlers[as]&&this.handlers[as].slice();if(gs&&gs.length){hs.type=as,hs.preventDefault=function(){hs.srcEvent.preventDefault()};for(var _s=0;_s<gs.length;)gs[_s](hs),_s++}},destroy:function(){this.element&&Tu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},wo(pu,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Pu,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:ss,DIRECTION_ALL:30,Manager:mu,Input:As,TouchAction:zu,TouchInput:Vs,MouseInput:Zs,PointerEventInput:bs,TouchMouseInput:Ys,SingleTouchInput:Gs,Recognizer:ku,AttrRecognizer:Ns,Tap:ou,Pan:Ts,Swipe:iu,Pinch:Ps,Rotate:vu,Press:Ws,on:ko,off:Uo,each:Lo,merge:jo,extend:Ro,assign:wo,inherit:zo,bindFn:Io,prefixed:Vo}),pu}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function In(va,_o){var xo=document.mozFullScreen?"DOMMouseScroll":"mousewheel",bo=!!window.addEventListener,wo=!!window.attachEvent,Eo=function(To,So){var $o=document.mozFullScreen?"DOMMouseScroll":"mousewheel",Do=!!window.addEventListener,No=!!window.attachEvent;return So.__mouseWheelWrapper=function(Oo){if(Oo=Oo||window.event,Do&&Oo.preventDefault(),No&&(Oo.returnValue=!1),$o=="DOMMouseScroll"||$o=="mousewheel"){var Lo=Oo.wheelDelta;Oo.delta=Lo?Lo/120:-(Oo.delta||0)/3}So.call(To,Oo)}}(va,_o);bo?va.addEventListener(xo,Eo,!1):wo&&va.attachEvent("on"+xo,Eo)}function bn(va,_o,xo){var bo=_o.offsetWidth,wo=_o.offsetHeight,Eo=_o.getBoundingClientRect(),To=Eo.top,So=Eo.left;return xo&&(So+=bo*xo.left,To+=wo*(1-xo.bottom-xo.height),bo*=xo.width,wo*=xo.height),new r$3.Vector2((va.x-So)/bo*2-1,-(va.y-To)/wo*2+1)}(function(){try{var va=document.createElement("canvas");!window.WebGLRenderingContext||!va.getContext("webgl")&&va.getContext("experimental-webgl")}catch{return!1}})();var On=new r$3.OrthographicCamera(-1,1,1,-1,0,1),Sn=new r$3.BufferGeometry;Sn.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),Sn.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var Ln=new r$3.Mesh(Sn),kn=new r$3.Scene;kn.add(Ln);var Cn=function(){function va(_o,xo){var bo;this.renderer=_o,this.material=new r$3.ShaderMaterial({vertexShader:(bo=xo.vertex)!==null&&bo!==void 0?bo:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:xo.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},xo.uniforms),defines:Object.assign({},xo.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return va.prototype.render=function(_o,xo){var bo=this.renderer.getRenderTarget(),wo=Ln.material;this.material.uniforms.inputBuffer.value=_o.texture,Ln.material=this.material,this.renderer.setRenderTarget(xo||null),this.renderer.render(kn,On),this.renderer.setRenderTarget(bo),Ln.material=wo},va.prototype.dispose=function(){this.material.dispose()},va}(),Pn=function(){function va(_o){this.renderer=_o,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return va.prototype.render=function(_o,xo){var bo=this.renderer.getRenderTarget(),wo=Ln.material;this.material.uniforms.inputValue.value.copy(_o),Ln.material=this.material,this.renderer.setRenderTarget(xo||null),this.renderer.render(kn,On),this.renderer.setRenderTarget(bo),Ln.material=wo},va.prototype.dispose=function(){this.material.dispose()},va}(),Bn=function(va){function _o(xo){return va.call(this,xo,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$3.__extends(_o,va),_o}(Cn),_n=function(){function va(_o){this.enable=!0,this.renderer=_o,this.copyPass=new Bn(this.renderer)}return va.prototype.render=function(_o,xo){this.copyPass.render(_o)},va.prototype.dispose=function(){this.copyPass.dispose()},va}();function Un(va,_o,xo){return va+(_o-va)*xo}function Rn(va,_o){var xo=_o[1]-_o[0];return va<_o[0]?Rn(va+xo,_o):va>=_o[1]?Rn(va-xo,_o):va}function Qn(va,_o,xo,bo){return bo?function(wo,Eo,To,So){var $o=So[1]-So[0];return wo=Rn(wo,So),Un((Eo=Rn(Eo,So))-wo>$o/2?wo+$o:wo-Eo>$o/2?wo-$o:wo,Eo,To)}(va,_o,xo,bo):Un(va,_o,xo)}var Yn=function(){function va(_o){for(var xo in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=He(),this.startVelocity=0,this.duration=0,this.keyframes=[],_o){var bo=_o[xo];typeof bo=="number"?(this.value[xo]=bo,this.config[xo]={circle:!1}):(this.value[xo]=bo.value,this.config[xo]={circle:bo.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return va.prototype.getProgress=function(_o){var xo=_o-this.startTime;return xo<0?0:xo>=this.duration?1:1-function(bo,wo,Eo,To){var So=(wo*Eo+2*bo)/Math.pow(Eo,3),$o=-(2*wo*Eo+3*bo)/Math.pow(Eo,2),Do=wo,No=bo;return So*Math.pow(To,3)+$o*Math.pow(To,2)+Do*To+No}(1,this.startVelocity,this.duration,xo)},va.prototype.getValue=function(_o){for(var xo=1;xo<this.keyframes.length;xo++)if(this.keyframes[xo].progress>_o){var bo=this.keyframes[xo-1],wo=this.keyframes[xo],Eo={};for(var To in this.config){var So=(_o-bo.progress)/(wo.progress-bo.progress);Eo[To]=Qn(bo.value[To],wo.value[To],So,this.config[To].circle)}return Eo}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},va.prototype.getProgressVelocity=function(_o){var xo=_o-this.startTime;return xo>=this.duration?0:function(bo,wo,Eo,To){var So=(wo*Eo+2*bo)/Math.pow(Eo,3),$o=-(2*wo*Eo+3*bo)/Math.pow(Eo,2),Do=wo;return 3*So*Math.pow(To,2)+2*$o*To+Do}(1,this.startVelocity,this.duration,xo)},va.prototype.update=function(_o){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(_o))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},va.prototype.getKeyFrameSegment=function(_o){for(var xo=this.getProgress(_o),bo=1;bo<this.keyframes.length;bo++)if(this.keyframes[bo].progress>xo)return[this.keyframes[bo-1],this.keyframes[bo]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},va.prototype.set=function(_o,xo,bo,wo){var Eo;bo===void 0&&(bo=0),wo=wo!=null?wo:He();var To=this.getProgress(wo),So=this.getValue(To),$o={};for(var Do in this.config)$o[Do]=(Eo=_o[Do])!==null&&Eo!==void 0?Eo:So[Do];var No=[{progress:0,value:So},{progress:1,value:$o}];return this.setKeyFrames(No,xo,bo,wo)},va.prototype.setKeyFrames=function(_o,xo,bo,wo){var Eo=this;if(bo===void 0&&(bo=0),_o.length<2)throw new Error("keyframes invoid.");return this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(To,So){wo=wo!=null?wo:He(),Eo.progress=0,Eo.ended=!1,Eo.startTime=wo,Eo.startVelocity=bo,Eo.keyframes=_o,Eo.duration=xo,xo===0?(Eo.progress=1,Eo.value=t$3.__assign({},_o[_o.length-1].value)):Eo.value=t$3.__assign({},_o[0].value),Eo.callbacks=[To,So]})},va.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},va}(),Fn=function(va){function _o(xo){var bo,wo=va.call(this)||this,Eo=_o.parseArgs(xo);return wo.pending=!0,wo.userAction=Eo.initial[3],wo.destroyed=!1,wo.ident=Eo.ident,wo.scene=Eo.scene,wo.helper=Eo.helper,wo.camera=Eo.camera,wo.renderer=Eo.renderer,wo.scissor=Eo.scissor,wo.element=Eo.element,wo.model=Eo.model,wo.enableIOSEDR=(bo=Eo.enableIOSEDR)!==null&&bo!==void 0&&bo,wo.work=Eo.work,wo.imageOptions=Eo.imageOptions,wo.videoTexture=Eo.videoTexture,wo.networkSubscribe=Eo.networkSubscribe,wo.needsRender=!0,wo.maxFov=120,wo.minFov=40,wo.maxLatitude=+Math.PI/2,wo.minLatitude=-Math.PI/2,wo.cameraMotion=new Yn({longitude:{value:wo.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:wo.camera.pose.latitude,fov:wo.camera.pose.fov}),wo.eventUnbinds=[Eo.element].concat(Eo.extraElements||[]).map(function(To){return wo.bindEvents(To)}),We.shared.add(function(){return wo.initAnimation.apply(wo,Eo.initial)},!0),wo}return t$3.__extends(_o,va),_o.parseArgs=function(xo){return t$3.__assign({},xo)},_o.initAnimationEndState=function(xo){var bo=this.parseArgs(xo);return{longitude:bo.camera.pose.longitude,latitude:bo.camera.pose.latitude,fov:bo.camera.pose.fov,offset:bo.camera.pose.offset.clone()}},_o.prototype.destroy=function(){this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var xo=0,bo=this.eventUnbinds;xo<bo.length;xo++)(0,bo[xo])();this.effect&&(this.effect.dispose(),delete this.effect)},_o.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},_o.prototype.bindExtraElement=function(xo){for(var bo=0,wo=this.eventUnbinds;bo<wo.length;bo++)if(wo[bo].element===xo)return;this.eventUnbinds.push(this.bindEvents(xo))},_o.prototype.unbindExtraElement=function(xo){for(var bo=0,wo=this.eventUnbinds;bo<wo.length&&wo[bo].element!==xo;bo++);},_o.prototype.updateRenderSize=function(){this.needsRender=!0},_o.prototype.updateModel=function(xo){this.model=xo,this.needsRender=!0},_o.prototype.updateWork=function(xo,bo,wo,Eo,To){return this.work=xo,this.userAction=To,!1},_o.prototype.updateTime=function(xo,bo){if(!this.destroyed){var wo={};this.cameraMotion.ended&&(this.cameraMotion.update(xo),wo.longitude=this.cameraMotion.value.longitude,wo.latitude=this.cameraMotion.value.latitude,wo.fov=this.cameraMotion.value.fov),En(wo)&&this.setCamera(wo)}},_o.prototype.render=function(xo){this.renderer.render(this.scene,this.camera)},_o.prototype.postProcessing=function(xo,bo){this.destroyed||(this.effect||(this.effect=new _n(this.renderer)),this.effect.render(xo,bo))},_o.prototype.updateCamera=function(xo,bo,wo){return this.userAction=wo,this.cameraMotion.set(xo,bo)},_o.prototype.getTargetPose=function(){var xo=this.cameraMotion.getKeyFrameSegment(He())[1];return{longitude:xo.value.longitude,latitude:xo.value.latitude,fov:xo.value.fov,offset:this.camera.pose.offset.clone()}},_o.prototype.moveToPano=function(xo,bo,wo){bo===void 0&&(bo={}),this.userAction=wo;var Eo={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};bo.moveStartCallback&&bo.moveStartCallback(xo,Eo),this.emit("moveToPano",xo,this.userAction),this.emit("panoArrived",xo,Eo,this.userAction),bo.moveEndCallback&&bo.moveEndCallback(xo,Eo)},_o.prototype.initAnimation=function(xo,bo,wo,Eo){this.pending=!1,this.userAction=Eo},_o.prototype.setCamera=function(xo){var bo,wo,Eo,To,So;xo===void 0&&(xo={});var $o=(bo=xo.longitude)!==null&&bo!==void 0?bo:this.camera.pose.longitude,Do=(wo=xo.latitude)!==null&&wo!==void 0?wo:this.camera.pose.latitude,No=(Eo=xo.fov)!==null&&Eo!==void 0?Eo:this.camera.pose.fov,Oo=(To=xo.distance)!==null&&To!==void 0?To:this.camera.pose.distance,Lo=(So=xo.offset)!==null&&So!==void 0?So:this.camera.pose.offset,Co=this.camera.position.clone(),Ro=yn($o,this.camera.pose.longitude,2*Math.PI)||yn(Do,this.camera.pose.latitude),jo=yn(No,this.camera.pose.fov),zo=yn(Oo,this.camera.pose.distance),Io=vn(Lo,this.camera.pose.offset);this.camera.setFromPose({longitude:$o,latitude:Do,fov:No,distance:Oo,offset:Lo});var Po=vn(Co,this.camera.position);jo&&this.emit("cameraFovUpdate",No,this.userAction),Ro&&this.emit("cameraDirectionUpdate",{longitude:$o,latitude:Do},this.userAction),Po&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(jo||Ro||Io||zo)&&this.emit("cameraUpdate",{longitude:$o,latitude:Do,fov:No,offset:Lo},this.userAction),this.needsRender=!0,(_t||Rt.length!==0)&&(_t&&clearTimeout(_t),_t=window.setTimeout(Yt,200))},_o.prototype.onPanGesture=function(xo){},_o.prototype.onTapGesture=function(xo){},_o.prototype.onPinchGesture=function(xo){},_o.prototype.onMouseWheel=function(xo){},_o.prototype.onMouseMove=function(xo){},_o.prototype.onMouseOut=function(){},_o.prototype.relativeClientPosition=function(xo){return bn(xo,this.element,this.scissor)},_o.prototype.bindEvents=function(xo){var bo=this,wo=function(No){var Oo=bn(No,bo.element,bo.scissor);return!(Math.abs(Oo.x)>1||Math.abs(Oo.y)>1)},Eo=new zn.Manager(xo),To=function(No){return No.session.firstInput||null};Eo.add(new zn.Pan({threshold:10,pointers:0})),Eo.add(new zn.Tap({interval:410})),Eo.add(new zn.Pinch({threshold:0,pointers:2}).recognizeWith(Eo.get("pan"))),Eo.on("panstart pan",function(No){var Oo=To(Eo);Oo&&!wo(Oo.center)||bo.onPanGesture(No)}),Eo.on("tap",function(No){var Oo=To(Eo);Oo&&!wo(Oo.center)||bo.onTapGesture(No)}),Eo.on("pinchstart pinch pinchend",function(No){var Oo=To(Eo);Oo&&!wo(Oo.center)||bo.onPinchGesture(No)});var So=function(No){var Oo={x:No.clientX,y:No.clientY};wo(Oo)&&bo.onMouseWheel(No)},$o=function(No){if(!((Oo=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node").match(/android/i)||Oo.match(/webos/i)||Oo.match(/ipad|iphone|ipod/i)||Oo.match(/iemobile/i)||Oo.match(/opera mini/i)||Oo.match(/blackberry/i)||Oo.match(/windows phone/i))){var Oo,Lo={x:No.clientX,y:No.clientY};wo(Lo)?bo.onMouseMove(No):bo.onMouseOut()}},Do=function(){bo.onMouseOut()};return In(xo,So),zn.on(xo,"mousemove",$o),zn.on(xo,"mouseout",Do),Object.assign(function(){Eo.destroy(),function(No,Oo){var Lo=document.mozFullScreen?"DOMMouseScroll":"mousewheel",Co=!!window.addEventListener,Ro=!!window.attachEvent;Oo.__mouseWheelWrapper&&(Co?No.removeEventListener(Lo,Oo.__mouseWheelWrapper,!1):Ro&&No.detachEvent("on"+Lo,Oo.__mouseWheelWrapper),delete Oo.__mouseWheelWrapper)}(xo,So),zn.off(xo,"mousemove",$o),zn.off(xo,"mouseout",Do)},{element:xo})},_o}(vt),Vn=function(va){function _o(xo){var bo,wo,Eo,To,So=this,$o=_o.parseArgs(xo);return(So=va.call(this,$o)||this).defaultLongitude=$o.defaultLongitude,So.defaultLatitude=$o.defaultLatitude,So.defaultFov=$o.defaultFov,So.maxFov=$o.maxFov,So.minFov=$o.minFov,So.maxLatitude=$o.maxLatitude,So.minLatitude=$o.minLatitude,So.locationMotion=new Yn({x:So.camera.pose.offset.x,y:So.camera.pose.offset.y,z:So.camera.pose.offset.z,distance:So.camera.pose.distance,modelAlpha:(wo=(bo=So.model.getMaterial())===null||bo===void 0?void 0:bo.modelAlpha)!==null&&wo!==void 0?wo:0,perspToOrtho:(To=(Eo=So.model.getMaterial())===null||Eo===void 0?void 0:Eo.perspToOrtho)!==null&&To!==void 0?To:0}),So}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo,wo,Eo,To,So,$o,Do,No=va.parseArgs.call(this,xo);return t$3.__assign(t$3.__assign({},No),{defaultLongitude:(bo=xo.defaultLongitude)!==null&&bo!==void 0?bo:Math.PI/4,defaultLatitude:(wo=xo.defaultLatitude)!==null&&wo!==void 0?wo:Math.PI/4,defaultFov:(Eo=xo.defaultFov)!==null&&Eo!==void 0?Eo:80,maxFov:(To=xo.maxFov)!==null&&To!==void 0?To:120,minFov:(So=xo.minFov)!==null&&So!==void 0?So:40,maxLatitude:($o=xo.maxLatitude)!==null&&$o!==void 0?$o:+Math.PI/2,minLatitude:(Do=xo.minLatitude)!==null&&Do!==void 0?Do:-Math.PI/2})},_o.initAnimationEndPose=function(xo){var bo,wo,Eo,To=this.parseArgs(xo),So=xo.initial[1];return{longitude:(bo=So.longitude)!==null&&bo!==void 0?bo:To.defaultLongitude,latitude:xn((wo=So.latitude)!==null&&wo!==void 0?wo:To.defaultLatitude,To.minLatitude,To.maxLatitude),fov:(Eo=So.fov)!==null&&Eo!==void 0?Eo:To.defaultFov,offset:xo.model.bounding.getCenter(new r$3.Vector3)}},_o.prototype.destroy=function(){va.prototype.destroy.call(this),this.locationMotion.dispose()},_o.prototype.isReady=function(){return this.locationMotion.ended!==!1&&va.prototype.isReady.call(this)},_o.prototype.updateWork=function(xo,bo,wo,Eo,To){return this.work=xo,!0},_o.prototype.updateModel=function(xo){va.prototype.updateModel.call(this,xo);var bo=xo.bounding.getCenter(new r$3.Vector3),wo=this.cameraDistance(xo);this.locationMotion.set({x:bo.x,y:bo.y,z:bo.z,distance:wo},0).catch(Qe)},_o.prototype.updateTime=function(xo,bo){if(!this.destroyed){var wo={},Eo={};this.locationMotion.ended||(this.locationMotion.update(xo),wo.modelAlpha=this.locationMotion.value.modelAlpha,wo.perspToOrtho=xn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Eo.distance=this.locationMotion.value.distance,Eo.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(xo),Eo.longitude=this.cameraMotion.value.longitude,Eo.latitude=this.cameraMotion.value.latitude,Eo.fov=this.cameraMotion.value.fov),En(wo)||this.model.setMaterial(wo),En(Eo)||this.setCamera(Eo)}},_o.prototype.getTargetPose=function(){var xo=this.cameraMotion.getKeyFrameSegment(He())[1],bo=this.locationMotion.getKeyFrameSegment(He())[1];return{longitude:xo.value.longitude,latitude:xo.value.latitude,fov:xo.value.fov,offset:new r$3.Vector3(bo.value.x,bo.value.y,bo.value.z)}},_o.prototype.initAnimation=function(xo,bo,wo,Eo){var To,So,$o,Do=this;if(!this.destroyed){this.pending=!1,this.userAction=Eo;var No=this.model.bounding.getCenter(new r$3.Vector3),Oo={longitude:(To=bo.longitude)!==null&&To!==void 0?To:this.defaultLongitude,latitude:xn((So=bo.latitude)!==null&&So!==void 0?So:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:xn(($o=bo.fov)!==null&&$o!==void 0?$o:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},Lo=this.cameraDistance(this.model),Co=Xt(Oo,["longitude","latitude","fov"]),Ro={x:No.x,y:No.y,z:No.z,distance:Lo,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",xo,Oo,this.userAction),this.cameraMotion.set(Co,wo).catch(Qe),this.locationMotion.set(Ro,wo).then(function(){Do.emit("initAnimationEnded",xo,Oo,Do.userAction)},function(jo){var zo=jn(Do.camera.pose);Do.emit("initAnimationEnded",xo,zo,Do.userAction)})}},_o.prototype.cameraDistance=function(xo){var bo=xo.bounding,wo=this.camera.aspect,Eo=Math.pow(Math.pow(bo.max.x-bo.min.x+2,2)+Math.pow(bo.max.y-bo.min.y+2,2)+Math.pow(bo.max.z-bo.min.z+2,2),.5),To=Eo/2/Math.tan(Math.PI*this.defaultFov/360);return wo<1&&(To/=wo),isNaN(To)?Eo:To},_o.prototype.getForwardPanoIndexOrNot=function(xo){var bo=this.work.observers.filter(function(So){return So.active}),wo=this.model.intersectRaycaster(xo)[0];if(!wo)return null;var Eo=Tn(bo,function(So){return So.standingPosition.distanceTo(wo.point)},!0),To=Eo[0];return Eo[1]<5?this.work.observers.indexOf(To):null},_o.prototype.coordinatesChangeWithOffset=function(xo,bo){var wo=this.element,Eo=this.camera,To=wo.offsetWidth,So=wo.offsetHeight,$o=2*bo.x/To*Eo.fov/30,Do=2*bo.y/So*Eo.fov/30;return{longitude:en(xo.longitude+$o),latitude:xn(xo.latitude+Do,-Math.PI/2,Math.PI/2)}},_o.prototype.requestInteriaMovement=function(xo){var bo=this;if(this.interiaMovement!==!1){var wo=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},xo),Eo=wo.longitude,To=wo.latitude,So={longitude:Eo,latitude:To,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset};this.cameraMotion.set({longitude:Eo,latitude:To},0).catch(Qe);var $o=Math.abs(xo.x)>1||Math.abs(xo.y)>1;this.emit("interiaPan",So,!$o),$o?We.shared.add(function(){bo.requestInteriaMovement({x:.8*xo.x,y:.8*xo.y})},!0,1):this.interiaMovement=!1}},_o.prototype.onPanGesture=function(xo){var bo=this,wo=this.lastPanPoint,Eo=xo.pointers.length;if(xo.isFinal?delete this.lastPanPoint:this.lastPanPoint={pointerLength:Eo,x:xo.center.x,y:xo.center.y},wo!==void 0&&wo.pointerLength===Eo){var To=xo.pointers.map(function(Lo){return Xt(Lo,["x","y"])});if(!this.emit("wantsGesture","pan",To,xo.isFinal)){var So={x:xo.center.x-wo.x,y:xo.center.y-wo.y},$o=this.relativeClientPosition(xo.center),Do=this.camera.pose.latitude<Math.PI/6||$o.y<0?-1:1;So.x*=Do;var No=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},So),Oo={longitude:No.longitude,latitude:No.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset};this.emit("wantsPanGesture",Oo,xo.isFinal)||(this.emit("gesture","pan",To,xo.isFinal),this.emit("panGesture",Oo,xo.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Oo.longitude,latitude:Oo.latitude,fov:Oo.fov},0).catch(Qe),xo.isFinal&&(this.emit("wantsInteriaPan",Oo)||(this.interiaMovement=!0,We.shared.getFrameTime(function(Lo){var Co=xo.velocityX*Lo*Do,Ro=xo.velocityY*Lo,jo=Math.sqrt(Co*Co+Ro*Ro);jo>100&&(Co=Co/jo*100,Ro=Ro/jo*100),bo.requestInteriaMovement({x:Co,y:Ro})}))))}}},_o.prototype.onPinchGesture=function(xo){var bo=this.lastPinchFov,wo=!1;if(xo.type==="pinchstart")return this.lastPinchFov=this.cameraMotion.value.fov,void delete this.lastPanPoint;if(xo.type==="pinchend"&&(wo=!0,delete this.lastPanPoint,delete this.lastPinchFov),bo!==void 0){var Eo=xo.pointers.map(function(So){return Xt(So,["x","y"])});if(!this.emit("wantsGesture","pinch",Eo,wo)){var To=xn(bo/xo.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",xo.scale,To,wo)||this.emit("wantsChangeCameraFov",To)||(this.emit("gesture","pinch",Eo,wo),this.emit("pinchGesture",xo.scale,To,wo),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:To},0).catch(Qe))}}},_o.prototype.onMouseWheel=function(xo){var bo=this,wo=xo.delta,Eo=[{x:xo.clientX,y:xo.clientY}];if(!this.emit("wantsGesture","mouseWheel",Eo,!1)){var To=this.minFov,So=this.maxFov,$o=xn(this.camera.fov-wo,To,So);this.emit("wantsMouseWheel",wo,$o,!1)||this.emit("wantsChangeCameraFov",$o)||(this.emit("gesture","mouseWheel",Eo,!1),this.emit("mouseWheel",wo,$o,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:$o},0).catch(Qe),clearTimeout(this.onMouseWheelFinalInterval),this.onMouseWheelFinalInterval=window.setTimeout(function(){delete bo.onMouseWheelFinalInterval,bo.emit("wantsGesture","mouseWheel",Eo,!0)||bo.emit("wantsMouseWheel",wo,$o,!0)||(bo.emit("gesture","mouseWheel",Eo,!0),bo.emit("mouseWheel",0,$o,!0))},200))}},_o.prototype.onTapGesture=function(xo){var bo=xo.pointers.map(function($o){return Xt($o,["x","y"])});if(!this.emit("wantsGesture","tap",bo,!0)){var wo=this.relativeClientPosition(xo.center),Eo=new r$3.Raycaster;if(Eo.setFromCamera(wo,this.camera),!this.emit("wantsTapGesture",Eo,wo)){this.emit("gesture","tap",bo,!0),this.emit("tapGesture",Eo,wo),this.interiaMovement=!1;var To=this.getForwardPanoIndexOrNot(Eo);if(!Re(To)){this.emit("panoSelected",To);var So={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",To,So,!0)}}}},_o}(Fn),Hn=function(va){function _o(xo){var bo=_o.parseArgs(xo);return va.call(this,bo)||this}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo=[xo.initial[0],t$3.__assign(t$3.__assign({},xo.initial[1]),{longitude:0,latitude:Math.PI/2}),xo.initial[2],xo.initial[3]],wo=t$3.__assign(t$3.__assign({},xo),{initial:bo,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return va.parseArgs.call(this,wo)},_o.initAnimationEndPose=function(xo){var bo=this.parseArgs(xo);return va.initAnimationEndPose.call(this,bo)},_o.prototype.updateModel=function(xo){this.model=xo,this.needsRender=!0;var bo=xo.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:bo.x,y:bo.y,z:bo.z,distance:this.cameraDistance(xo)},0).catch(Qe)},_o.prototype.initAnimation=function(xo,bo,wo,Eo){var To,So=this;if(!this.destroyed){this.pending=!1,this.userAction=Eo;var $o=this.model.bounding.getCenter(new r$3.Vector3),Do={longitude:0,latitude:Math.PI/2,fov:xn((To=bo.fov)!==null&&To!==void 0?To:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},No=this.cameraDistance(this.model),Oo=Xt(Do,["longitude","latitude","fov"]),Lo={x:$o.x,y:$o.y,z:$o.z,distance:No,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Oo,wo).catch(Qe),this.locationMotion.set(Lo,wo).then(function(){So.emit("initAnimationEnded",xo,Do,So.userAction)},function(Co){var Ro=jn(So.camera.pose);So.emit("initAnimationEnded",xo,Ro,So.userAction)})}},_o.prototype.getZoomOffsetFromFov=function(xo,bo,wo){var Eo=new r$3.Vector3(0,-1,0),To=Math.tan(wo/2*Math.PI/180),So=Math.tan(bo.fov/2*Math.PI/180),$o=(So-To)/So,Do=new r$3.Raycaster;Do.setFromCamera(xo,bo);var No=Do.ray.direction,Oo=No.angleTo(Eo),Lo=this.cameraDistance(this.model),Co=Lo*Math.tan(Oo),Ro=No.clone().setLength(Lo*Math.cos(Oo)).projectOnPlane(Eo),jo=Ro.length(),zo=$o/jo*Ro.x*Co,Io=$o/jo*Ro.z*Co;return new r$3.Vector3(zo,0,Io)},_o.prototype.requestInteriaMovement=function(xo){},_o.prototype.onPanGesture=function(xo){var bo=this.renderer.getSize(new r$3.Vector2),wo=this.lastPanPoint,Eo=xo.pointers.length;if(xo.isFinal?delete this.lastPanPoint:this.lastPanPoint={pointerLength:Eo,x:xo.center.x,y:xo.center.y},wo!==void 0&&wo.pointerLength===Eo){var To=xo.pointers.map(function(zo){return Xt(zo,["x","y"])});if(!this.emit("wantsGesture","pan",To,xo.isFinal)){var So=xo.center.x-wo.x,$o=xo.center.y-wo.y,Do=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),No=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);Do.add(function(zo,Io){var Po=new r$3.Vector3;return Po.setFromMatrixColumn(Io,0),Po.multiplyScalar(-zo),Po}(2*So*No/bo.y,this.camera.matrix)),Do.add(function(zo,Io,Po){var Bo=new r$3.Vector3;return Bo.setFromMatrixColumn(Po,0),Bo.crossVectors(Io,Bo),Bo.multiplyScalar(zo),Bo}(2*$o*No/bo.y,this.camera.up,this.camera.matrix));var Oo=this.model.bounding,Lo=Oo.getCenter(new r$3.Vector3),Co=(Oo.max.x-Oo.min.x)/this.defaultFov*this.cameraMotion.value.fov,Ro=(Oo.max.y,Oo.min.y,this.defaultFov,this.cameraMotion.value.fov,(Oo.max.z-Oo.min.z)/this.defaultFov*this.cameraMotion.value.fov);Do.x=xn(Do.x,Lo.x-Co,Lo.x+Co),Do.z=xn(Do.z,Lo.z-Ro,Lo.z+Ro),Do.y=Lo.y;var jo={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Do};this.emit("wantsPanGesture",jo,xo.isFinal)||(this.emit("gesture","pan",To,xo.isFinal),this.emit("panGesture",jo,xo.isFinal),this.userAction=!0,this.locationMotion.set({x:Do.x,y:Do.y,z:Do.z},0).catch(Qe))}}},_o.prototype.onPinchGesture=function(xo){var bo=this.lastPinchFov,wo=!1;if(xo.type==="pinchstart")return this.lastPinchFov=this.cameraMotion.value.fov,void delete this.lastPanPoint;if(xo.type==="pinchend"&&(wo=!0,delete this.lastPanPoint,delete this.lastPinchFov),bo!==void 0){var Eo=xo.pointers.map(function(No){return Xt(No,["x","y"])});if(!this.emit("wantsGesture","pinch",Eo,wo)){var To=xn(bo/xo.scale,this.minFov,this.maxFov),So=this.relativeClientPosition({x:xo.center.x,y:xo.center.y}),$o=this.getZoomOffsetFromFov(So,this.camera,To),Do=this.camera.pose.offset.clone().add($o);this.emit("wantsPinchGesture",xo.scale,To,wo)||this.emit("wantsChangeCameraFov",To)||(this.emit("gesture","pinch",Eo,wo),this.emit("pinchGesture",xo.scale,To,wo),this.userAction=!0,this.locationMotion.set({x:Do.x,y:Do.y,z:Do.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:To},0).catch(Qe))}}},_o.prototype.onMouseWheel=function(xo){var bo=this,wo=xo.delta,Eo=[{x:xo.clientX,y:xo.clientY}];if(!this.emit("wantsGesture","mouseWheel",Eo,!1)){var To=xn(this.cameraMotion.value.fov-wo,this.minFov,this.maxFov),So=this.relativeClientPosition({x:xo.clientX,y:xo.clientY}),$o=this.getZoomOffsetFromFov(So,this.camera,To),Do=this.camera.pose.offset.clone().add($o);this.emit("wantsMouseWheel",wo,To,!1)||this.emit("wantsChangeCameraFov",To)||(this.emit("gesture","mouseWheel",Eo,!1),this.emit("mouseWheel",wo,To,!1),this.userAction=!0,this.locationMotion.set({x:Do.x,y:Do.y,z:Do.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:To},0).catch(Qe),clearTimeout(this.onMouseWheelFinalInterval),this.onMouseWheelFinalInterval=window.setTimeout(function(){delete bo.onMouseWheelFinalInterval,bo.emit("wantsGesture","mouseWheel",Eo,!0)||bo.emit("wantsMouseWheel",wo,To,!0)||bo.emit("wantsChangeCameraFov",To)||(bo.emit("gesture","mouseWheel",Eo,!0),bo.emit("mouseWheel",0,To,!0))},200))}},_o}(Vn);function Gn(va,_o){_o===void 0&&(_o=!1);var xo=typeof va;if(xo==="string")return JSON.stringify(va);if(va===!0)return"true";if(va===!1)return"false";if(va===null)return"null";if(va instanceof Array){for(var bo="[",wo=va.length-1,Eo=0;Eo<wo;Eo++)bo+=Gn(va[Eo],!1)+",";return wo>-1&&(bo+=Gn(va[Eo],!1)),bo+"]"}if(va instanceof Object){if(typeof va.toJSON=="function")return Gn(va.toJSON(),_o);var To=Object.keys(va).sort(),So=To.length;for(bo="",Eo=0;Eo<So;){var $o=To[Eo],Do=Gn(va[$o],!0);Do!==void 0&&(Eo&&bo!==""&&(bo+=","),bo+=JSON.stringify($o)+":"+Do),Eo++}return"{"+bo+"}"}switch(xo){case"function":case"undefined":return _o?void 0:null;case"number":return va;default:return isFinite(va)?va:null}}function Wn(va){return Ie(String(Gn(va,!1)))}var qn=function(va){function _o(){var xo=va.call(this)||this,bo=new r$3.RingBufferGeometry(.04,.08,32),wo=new r$3.MeshBasicMaterial({color:1245179,opacity:.8,side:r$3.DoubleSide,transparent:!0});return xo.ringMesh=new r$3.Mesh(bo,wo),xo.ringMesh.renderOrder=100,xo.add(xo.ringMesh),xo}return t$3.__extends(_o,va),_o.prototype.dispose=function(){this.remove(this.ringMesh),this.ringMesh.geometry.dispose(),Array.isArray(this.ringMesh.material)?this.ringMesh.material.forEach(function(xo){return xo.dispose()}):this.ringMesh.material.dispose()},_o}(r$3.Object3D);function Kn(){return new qn}var Zn=function(va){function _o(xo){var bo=this,wo=_o.parseArgs(xo);return(bo=va.call(this,wo)||this).defaultLongitude=wo.defaultLongitude,bo.defaultLatitude=wo.defaultLongitude,bo.defaultFov=wo.defaultFov,bo.maxFov=wo.maxFov,bo.minFov=wo.minFov,bo.maxLatitude=wo.maxLatitude,bo.minLatitude=wo.minLatitude,bo.moveSpeed=wo.moveSpeed,bo.intersectMeshCreator=wo.intersectMeshCreator,bo.interiaMovement=!1,bo.intersectMesh=bo.intersectMeshCreator(),bo.intersectMesh.name="intersect",bo.intersectMesh.visible=!1,bo.helper.add(bo.intersectMesh),bo}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo,wo,Eo,To,So,$o,Do,No,Oo,Lo=va.parseArgs.call(this,xo);return t$3.__assign(t$3.__assign({},Lo),{defaultLongitude:(bo=xo.defaultLongitude)!==null&&bo!==void 0?bo:0,defaultLatitude:(wo=xo.defaultLatitude)!==null&&wo!==void 0?wo:0,defaultFov:(Eo=xo.defaultFov)!==null&&Eo!==void 0?Eo:90,maxFov:(To=xo.maxFov)!==null&&To!==void 0?To:120,minFov:(So=xo.minFov)!==null&&So!==void 0?So:40,maxLatitude:($o=xo.maxLatitude)!==null&&$o!==void 0?$o:+Math.PI/2,minLatitude:(Do=xo.minLatitude)!==null&&Do!==void 0?Do:-Math.PI/2,moveSpeed:(No=xo.moveSpeed)!==null&&No!==void 0?No:3.2,intersectMeshCreator:(Oo=xo.intersectMeshCreator)!==null&&Oo!==void 0?Oo:Kn})},_o.initAnimationEndPose=function(xo){var bo,wo,Eo,To=this.parseArgs(xo),So=xo.initial,$o=So[0],Do=So[1];return{longitude:(bo=Do.longitude)!==null&&bo!==void 0?bo:To.defaultLongitude,latitude:xn((wo=Do.latitude)!==null&&wo!==void 0?wo:To.defaultLatitude,To.minLatitude,To.maxLatitude),fov:xn((Eo=Do.fov)!==null&&Eo!==void 0?Eo:To.defaultFov,To.minFov,To.maxFov),offset:To.work.observers[$o].position.clone()}},_o.prototype.destroy=function(){va.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose())},_o.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&va.prototype.isReady.call(this)},_o.prototype.calculateMovingDuration=function(xo,bo){switch(typeof xo){case"function":return xo(bo,this.moveSpeed);case"number":return xo;case"string":return Number(xo);default:return Math.floor(Math.max(Math.min(bo/this.moveSpeed*1e3,1500),500))}},_o.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},_o.prototype.coordinatesForOffset=function(xo){var bo=this.cameraMotion.value.fov,wo=this.camera.aspect,Eo=this.renderer.getSize(new r$3.Vector2);return{longitude:2*xo.x/Eo.x*bo/95*wo,latitude:-2*xo.y/Eo.y*bo/95}},_o.prototype.cameraBounce=function(){var xo=this.cameraMotion.value,bo=xo.longitude,wo=xo.latitude,Eo=xo.fov,To=[{progress:0,value:{longitude:bo,latitude:wo,fov:Eo}},{progress:.5,value:{longitude:bo,latitude:wo,fov:.98*Eo}},{progress:1,value:{longitude:bo,latitude:wo,fov:Eo}}];this.cameraMotion.setKeyFrames(To,500).catch(Qe)},_o.prototype.requestInteriaMovement=function(xo){var bo=this;if(this.interiaMovement!==!1){var wo=this.coordinatesForOffset(xo),Eo=en(this.cameraMotion.value.longitude+wo.longitude),To=xn(this.cameraMotion.value.latitude+wo.latitude,this.minLatitude,this.maxLatitude),So={longitude:Eo,latitude:To,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Eo,latitude:To},0).catch(Qe);var $o=Math.abs(xo.x)>1||Math.abs(xo.y)>1;this.emit("interiaPan",So,!$o),$o?We.shared.add(function(){var Do={x:.9*xo.x,y:.9*xo.y*.7};bo.requestInteriaMovement(Do)},!0,1):this.interiaMovement=!1}},_o.prototype.onPanGesture=function(xo){var bo=this,wo=this.panState,Eo=xo.pointers.length;if(xo.isFinal?delete this.panState:this.panState={pointerLength:Eo,x:xo.center.x,y:xo.center.y},wo!==void 0&&wo.pointerLength===Eo){var To=xo.pointers.map(function(Co){return Xt(Co,["x","y"])});if(!this.emit("wantsGesture","pan",To,xo.isFinal)){var So={x:xo.center.x-wo.x,y:xo.center.y-wo.y},$o=this.coordinatesForOffset(So),Do=en(this.cameraMotion.value.longitude+$o.longitude),No=xn(this.cameraMotion.value.latitude+$o.latitude,this.minLatitude,this.maxLatitude);Math.abs(xo.overallVelocityX)>.2&&Math.atan2(Math.abs(xo.overallVelocityY),Math.abs(xo.overallVelocityX))<Math.PI/6.923&&(No=this.cameraMotion.value.latitude);var Oo={longitude:Do,latitude:No,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",Oo,xo.isFinal)){this.emit("gesture","pan",To,xo.isFinal),this.emit("panGesture",Oo,xo.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Lo={longitude:Oo.longitude,latitude:Oo.latitude,fov:Oo.fov};this.cameraMotion.set(Lo,0).catch(Qe),xo.isFinal&&(this.emit("wantsInteriaPan",Oo)||We.shared.getFrameTime(function(Co){bo.interiaMovement=!0;var Ro=xo.velocityX*Co,jo=xo.velocityY*Co,zo=Math.sqrt(Ro*Ro+jo*jo);zo>100&&(Ro=Ro/zo*100,jo=jo/zo*100),Math.abs(jo/Ro)<Math.tan(20/180*Math.PI)&&(jo=0),bo.requestInteriaMovement({x:Ro,y:jo})}))}}}},_o.prototype.onPinchGesture=function(xo){var bo,wo=(bo=this.pinchState)===null||bo===void 0?void 0:bo.fov,Eo=xo.scale,To=!1;if(xo.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(xo.type==="pinchend"&&(To=!0,delete this.panState,delete this.pinchState),wo!==void 0){var So=xo.pointers.map(function(Do){return Xt(Do,["x","y"])});if(!this.emit("wantsGesture","pinch",So,To)){var $o=xn(wo/Eo,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Eo,$o,To)||this.emit("wantsChangeCameraFov",$o)||(this.emit("gesture","pinch",So,To),this.emit("pinchGesture",Eo,$o,To),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:$o},0).catch(Qe))}}},_o.prototype.onMouseWheel=function(xo){var bo=this,wo=xo.delta,Eo=[{x:xo.clientX,y:xo.clientY}];if(!this.emit("wantsGesture","mouseWheel",Eo,!1)){var To=xn(this.cameraMotion.value.fov-wo,this.minFov,this.maxFov);this.emit("wantsMouseWheel",wo,To,!1)||this.emit("wantsChangeCameraFov",To)||(this.emit("gesture","mouseWheel",Eo,!1),this.emit("mouseWheel",wo,To,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:To},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete bo.mouseWheelState,bo.emit("wantsGesture","mouseWheel",Eo,!0)||bo.emit("wantsMouseWheel",wo,To,!0)||bo.emit("wantsChangeCameraFov",To)||(bo.emit("gesture","mouseWheel",Eo,!0),bo.emit("mouseWheel",0,To,!0))},200)})}},_o.prototype.onMouseMove=function(xo){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var bo=this.relativeClientPosition({x:xo.clientX,y:xo.clientY}),wo=new r$3.Raycaster;if(wo.setFromCamera(bo,this.camera),this.emit("wantsShowIntersectionOnModel",wo))this.hideIntersectMesh();else{var Eo=this.model.intersectRaycaster(wo)[0];if(Eo&&Eo.face){var To=Eo.face.normal,So=To.clone().multiplyScalar(.05),$o=Eo.point.clone().add(So);this.intersectMesh.position.copy($o);var Do=$o.clone().add(So);if(this.intersectMesh.lookAt(Do),Math.abs(To.y)>.99){var No=this.camera.position.clone().sub($o);this.intersectMesh.rotation.z=-Math.atan2(No.z,No.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Eo,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:xo.clientX,clientY:xo.clientY}}}},_o.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},_o}(Fn),Xn=$e(),Jn=new r$3.Texture(Xn);Xn.onload=function(){return Jn.needsUpdate=!0},Xn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var $n=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),er=new r$3.MeshBasicMaterial({map:Jn,transparent:!0});function tr(){if(typeof document=="undefined"){var va=new r$3.Texture;return Object.assign(va,{draw:function(No){},retain:!1,pool:!1})}var _o=document.createElement("canvas"),xo=512,bo=256,wo=190;_o.setAttribute("width",String(xo)),_o.setAttribute("height",String(xo));var Eo=new r$3.Texture(_o),To=_o.getContext("2d");if(!To)throw Error("cannot create canvas context");var So=To.createRadialGradient(bo,bo,150,bo,bo,0);function $o(){var No=Math.PI/12,Oo=2*Math.PI/3;To&&(To.beginPath(),To.arc(bo,bo,wo,0*Oo,1*Oo-No),To.stroke(),To.beginPath(),To.arc(bo,bo,wo,1*Oo,2*Oo-No),To.stroke(),To.beginPath(),To.arc(bo,bo,wo,2*Oo,3*Oo-No),To.stroke())}function Do(No){To&&(To.clearRect(0,0,xo,xo),To.lineWidth=20,No!==-1&&(To.globalCompositeOperation="source-over",To.strokeStyle="rgba(255, 255, 255, 1)",$o(),To.globalCompositeOperation="source-in",To.beginPath(),To.arc(bo,bo,wo,0,2*Math.PI*No),To.strokeStyle="rgba(255, 255, 255, 1)",To.stroke(),To.globalCompositeOperation="source-over",To.strokeStyle="rgba(255, 255, 255, "+(No?.5:1)+")",$o()),To.beginPath(),To.arc(bo,bo,150,0,2*Math.PI),To.closePath(),To.fillStyle=So,To.fill(),To.fillStyle="rgba(255, 255, 255, 0.01)",To.fillRect(0,0,xo,xo),Eo.needsUpdate=!0)}return So.addColorStop(0,"rgba(255, 255, 255, 1)"),So.addColorStop(.15,"rgba(255, 255, 255, 1)"),So.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),So.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),So.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Do(0),Object.assign(Eo,{draw:Do,retain:!1,pool:!1})}var ir=[],nr=tr();nr.draw(0);var rr=tr();rr.draw(1);var or=tr();or.draw(-1);var sr=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function ar(){return new r$3.Mesh(sr,new r$3.MeshBasicMaterial({map:nr,transparent:!0}))}var ur=function(va){function _o(){var xo=va.call(this)||this;return xo.loading=!1,xo.disabled=!1,xo.current=!1,xo.progress=0,xo.opacity=1,xo.centerMesh=ar(),xo.centerMesh.position.y+=.01,xo.add(xo.centerMesh),xo.loadingMesh=new r$3.Mesh($n,er),xo.loadingMesh.position.y+=.011,xo.needsRender=!0,xo}return t$3.__extends(_o,va),_o.prototype.setLoading=function(xo){var bo=this;this.loading=xo,this.stopInterval&&this.stopInterval(),xo?(this.add(this.loadingMesh),this.stopInterval=We.shared.add(function(){bo.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),bo.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},_o.prototype.setDisabled=function(xo){function bo(wo){var Eo=wo.map;Eo.pool===!0&&(Eo.retain=!1),wo.map=xo?or:nr}this.disabled=xo,Array.isArray(this.centerMesh.material)?this.centerMesh.material.forEach(function(wo){bo(wo)}):bo(this.centerMesh.material),this.needsRender=!0},_o.prototype.setProgress=function(xo){function bo(wo,Eo){var To=wo.map;Eo===0||Eo===1?(To.pool===!0&&(To.retain=!1),Eo===0&&(wo.map=nr),Eo===1&&(wo.map=rr)):(To.pool!==!0&&(wo.map=function(){for(var So=0,$o=ir;So<$o.length;So++){var Do=$o[So];if(Do.retain===!1)return Do}var No=tr();return No.pool=!0,No.retain=!0,ir.push(No),No}()),wo.map.draw(Eo))}this.setLoading(!1),this.setDisabled(!1),this.progress=xo=xn(xo,0,1),Array.isArray(this.centerMesh.material)?this.centerMesh.material.forEach(function(wo){bo(wo,xo)}):bo(this.centerMesh.material,xo),this.needsRender=!0},_o.prototype.setOpacity=function(xo){this.opacity=xo=xn(xo,0,1),this.current&&(xo=1),Array.isArray(this.centerMesh.material)?this.centerMesh.material.forEach(function(bo){bo.opacity=xo}):this.centerMesh.material.opacity=xo,this.needsRender=!0},_o.prototype.setCurrent=function(xo){this.current=xo,this.setOpacity(this.opacity)},_o.prototype.dispose=function(){this.setLoading(!1),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.geometry.dispose(),Array.isArray(this.centerMesh.material)?this.centerMesh.material.forEach(function(xo){xo.dispose()}):this.centerMesh.material.dispose(),this.loadingMesh.geometry.dispose(),Array.isArray(this.loadingMesh.material)?this.loadingMesh.material.forEach(function(xo){xo.dispose()}):this.loadingMesh.material.dispose()},_o}(r$3.Object3D);function cr(){return new ur}var lr,hr,dr=function(va){function _o(xo,bo){return bo===void 0&&(bo=.5),va.call(this,xo,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(bo)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$3.__extends(_o,va),_o}(Cn),pr=function(va){function _o(xo,bo){bo===void 0&&(bo=.002);var wo=va.call(this,xo,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(bo)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return wo.material.extensions.shaderTextureLOD=!0,wo}return t$3.__extends(_o,va),Object.defineProperty(_o.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(xo){this.material.uniforms.targetBuffer.value=xo},enumerable:!1,configurable:!0}),Object.defineProperty(_o.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(xo){this.material.uniforms.step.value=xo},enumerable:!1,configurable:!0}),_o}(Cn),Ar=function(va){function _o(xo){var bo=va.call(this,xo,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 0.8;
          float whitePoint = 8.0;
          float exposure = 1.5;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return bo.material.transparent=!0,bo}return t$3.__extends(_o,va),Object.defineProperty(_o.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(xo){this.material.uniforms.luminanceAdaptiveBuffer.value=xo},enumerable:!1,configurable:!0}),Object.defineProperty(_o.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(xo){this.material.uniforms.progress.value=xo},enumerable:!1,configurable:!0}),_o}(Cn),fr=function(va){function _o(xo){var bo=va.call(this,xo)||this;return bo.enableTime=He(),bo.renderer=xo,bo.valuePass=new Pn(bo.renderer),bo.luminancePass=new dr(bo.renderer,.75),bo.nextStepPass=new pr(bo.renderer,.002),bo.luminanceAdaptivePass=new Ar(bo.renderer),bo}return t$3.__extends(_o,va),_o.prototype.render=function(xo){if(!this.enable)return this.enableTime=null,void this.copyPass.render(xo);this.enableTime===null&&(this.enableTime=He()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(xo,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((He()-this.enableTime)/3e3,1),this.luminanceAdaptivePass.render(xo)},_o.prototype.dispose=function(){var xo,bo,wo;(xo=this.luminanceTargetBuffer)===null||xo===void 0||xo.dispose(),(bo=this.luminancePrevBuffer)===null||bo===void 0||bo.dispose(),(wo=this.luminanceNextBuffer)===null||wo===void 0||wo.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},_o}(_n),Mr=["up","down","left","right","front","back"],gr=(hr=Math.SQRT1_2)!==null&&hr!==void 0?hr:Math.sqrt(2),yr={up:new r$3.Quaternion(gr,0,0,gr),down:new r$3.Quaternion(-gr,0,0,gr),left:new r$3.Quaternion(0,gr,0,gr),right:new r$3.Quaternion(0,-gr,0,gr),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},mr=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),vr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Nr=new Float32Array([0,0,1,0,0,1,1,1]),Dr=new Uint8Array([0,1,2,1,3,2]),wr=new r$3.BufferGeometry;wr.setAttribute("position",new r$3.BufferAttribute(vr,3)),wr.setAttribute("uv",new r$3.BufferAttribute(Nr,2)),wr.setIndex(new r$3.BufferAttribute(Dr,1));var Tr=function(va){function _o(){var xo=va.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return xo.depthTest=!1,xo.depthWrite=!1,xo.blending=r$3.NoBlending,xo.map=xo.uniforms.map.value,xo.luminanceMap=xo.uniforms.luminanceMap.value,Object.defineProperties(xo,{map:{get:function(){return this.uniforms.map.value},set:function(bo){this.uniforms.map.value=bo}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(bo){this.uniforms.luminanceMap.value=bo,this.defines.USE_LUMINANCE=bo!==null}}}),xo}return t$3.__extends(_o,va),_o}(r$3.ShaderMaterial),xr=function(va){function _o(){var xo=va!==null&&va.apply(this,arguments)||this;return xo.level=0,xo.sideCount=0,xo.col=0,xo.row=0,xo.index=0,xo.type="up",xo}return t$3.__extends(_o,va),_o}(r$3.Box3),Er=function(va){function _o(xo,bo){var wo=this,Eo=new Tr;return Eo.visible=!1,(wo=va.call(this,wr,Eo)||this).position.copy(xo.getCenter(new r$3.Vector3)),wo.quaternion.copy(yr[xo.type]),wo.scale.setScalar(1/Math.pow(2,xo.level)),wo.level=xo.level,wo.activeTime=-1,wo.disposed=!1,wo.needsRender=!1,wo.frustumCulled=!1,bo.then(function(To){var So=To[0],$o=To[1];wo.disposed?(So.dispose(),$o==null||$o.dispose()):(wo.material.map=So,wo.material.luminanceMap=$o,wo.material.needsUpdate=!0,wo.material.visible=!0,wo.needsRender=!0)}).catch(Qe),wo}return t$3.__extends(_o,va),_o.getBox=function(xo,bo,wo){var Eo=new xr,To=Math.pow(2,xo),So=1/To,$o=wo%To,Do=Math.floor(wo/To);switch(Eo.level=xo,Eo.index=wo,Eo.sideCount=To,Eo.row=Do,Eo.col=$o,Eo.type=bo,bo){case"up":Eo.min.y=.5,Eo.max.y=.5,Eo.min.x=+$o*So-.5,Eo.max.x=+$o*So-.5+So,Eo.min.z=-Do*So+.5-So,Eo.max.z=-Do*So+.5;break;case"down":Eo.min.y=-.5,Eo.max.y=-.5,Eo.min.x=+$o*So-.5,Eo.max.x=+$o*So-.5+So,Eo.min.z=+Do*So-.5,Eo.max.z=+Do*So-.5+So;break;case"left":Eo.min.x=-.5,Eo.max.x=-.5,Eo.min.z=-$o*So+.5-So,Eo.max.z=-$o*So+.5,Eo.min.y=-Do*So+.5-So,Eo.max.y=-Do*So+.5;break;case"right":Eo.min.x=.5,Eo.max.x=.5,Eo.min.z=+$o*So-.5,Eo.max.z=+$o*So-.5+So,Eo.min.y=-Do*So+.5-So,Eo.max.y=-Do*So+.5;break;case"front":Eo.min.z=-.5,Eo.max.z=-.5,Eo.min.x=+$o*So-.5,Eo.max.x=+$o*So-.5+So,Eo.min.y=-Do*So+.5-So,Eo.max.y=-Do*So+.5;break;case"back":Eo.min.z=.5,Eo.max.z=.5,Eo.min.x=-$o*So+.5-So,Eo.max.x=-$o*So+.5,Eo.min.y=-Do*So+.5-So,Eo.max.y=-Do*So+.5}return Eo},_o.prototype.dispose=function(){var xo;this.material.map&&this.material.map.image instanceof ImageBitmap&&(this.material.map.dispose(),(xo=this.material.luminanceMap)===null||xo===void 0||xo.dispose()),this.material.dispose()},_o}(r$3.Mesh),jr=function(va){function _o(){var xo=va.call(this)||this;return xo.needsRender=!1,xo.name="tiling",xo}return t$3.__extends(_o,va),_o}(r$3.Group),zr=function(){function va(_o,xo){this.disposed=!1,this.textureLoader=new xi(_o),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=xo,this.object=new jr}return va.prototype.setAllowHosts=function(_o){this.textureLoader.setAllowHosts(_o)},va.prototype.setNetworkSubscribe=function(_o){this.textureLoader.setNetworkSubscribe(_o)},va.prototype.cleanup=function(){for(var _o=0;_o<this.tiles.length;_o++)if(this.tiles[_o]){var xo=this.tiles[_o],bo="level-group:"+_o,wo=this.object.getObjectByName(bo);for(var Eo in xo){var To=xo[Eo];To.dispose(),wo.remove(To),delete xo[Eo]}}},va.prototype.setRotation=function(_o){this.object.quaternion.multiplyQuaternions(_o,mr),this.object.needsRender=!0},va.prototype.setResource=function(_o){if(!this.disposed&&this.resource!==_o){this.cleanup(),this.resource=_o;for(var xo=0;xo<_o.length;xo++){var bo=_o[xo].level;this.tiles[bo]={};var wo="level-group:"+bo,Eo=this.object.getObjectByName(wo);Eo||((Eo=new r$3.Group).name=wo,Eo.renderOrder=-1),this.object.add(Eo)}this.object.needsRender=!0}},va.prototype.setLuminance=function(_o){this.luminance=_o},va.prototype.getTileResource=function(_o){for(var xo,bo=(xo=this.imageOptions.size)!==null&&xo!==void 0?xo:2048,wo=this.resource.length-1;wo>=0;wo--)if(this.resource[wo].level<=_o&&512*Math.pow(2,this.resource[wo].level)>bo)return this.resource[wo];return null},va.prototype.update=function(_o,xo,bo){var wo=this;if(!this.disposed){this.object.position.copy(_o.position),this.level=xo;var Eo=new r$3.PerspectiveCamera().copy(_o);Eo.position.set(0,0,0),Eo.quaternion.premultiply(this.object.quaternion.clone().inverse()),Eo.updateMatrixWorld(!0),Eo.updateProjectionMatrix();var To=Eo.getWorldDirection(new r$3.Vector3),So=new r$3.Frustum().setFromProjectionMatrix(new r$3.Matrix4().multiplyMatrices(Eo.projectionMatrix,Eo.matrixWorldInverse)),$o=this.getTileResource(xo);if($o){for(var Do=[],No=$o.level,Oo=Math.pow(2,No),Lo=Oo*Oo,Co=this.object.getObjectByName("level-group:"+No),Ro=0,jo=Mr;Ro<jo.length;Ro++)for(var zo=jo[Ro],Io=0;Io<Lo;Io++){var Po=Er.getBox(No,zo,Io);So.intersectsBox(Po)&&Do.push(Po)}Do.sort(function(Es,Ms){return Es.getCenter(new r$3.Vector3).angleTo(To)-Ms.getCenter(new r$3.Vector3).angleTo(To)});for(var Bo=[],ko=0,Uo=Do;ko<Uo.length;ko++){var Qo=(Po=Uo[ko]).sideCount,qo=Po.row,Zo=Po.col,Xo=(zo=Po.type,"tile-level:"+No+"-face:"+zo+"-row:"+qo+"-col:"+Zo);if(!this.tiles[No][Xo]){var Fo=$o[zo],Go=$o.size/Qo,Vo=[Go*Zo,Go*qo,Go,Go],Wo=t$3.__assign({key:"pano_tile."+this.panoIndex+"."+zo+"."+No+"."+qo+"."+Zo,basisLoaderInitialized:wi.isInitialized(),cut:Vo},Xt(this.imageOptions,["format"]));Go!==512&&(Wo.size=512);var Yo=this.imageOptions.transform?this.imageOptions.transform(Fo,Wo):ti(Fo,Wo),Ko=this.textureLoader.load(Yo,{magFilter:r$3.LinearFilter,minFilter:r$3.NearestFilter}).then(function(Es){return Es.body}),ts=null;if(this.luminance){var Jo=this.luminance[zo],rs=t$3.__assign(t$3.__assign({},Wo),{size:256,key:"pano_tile_luminance."+this.panoIndex+"."+zo+"."+No+"."+qo+"."+Zo}),ls=this.imageOptions.transform?this.imageOptions.transform(Jo,rs):ti(Jo,rs);ts=this.textureLoader.load(ls,{format:r$3.LuminanceFormat}).then(function(Es){return Es.body}).catch(function(){return null})}(ms=this.tiles[No][Xo]=new Er(Po,Promise.all([Ko,ts]))).name=Xo,ms.renderOrder=No,Co.add(ms)}this.tiles[No][Xo].activeTime=bo,Bo.push(Xo)}for(var ss=0,us=Object.keys(this.tiles[No]).sort(function(Es,Ms){return wo.tiles[No][Ms].activeTime-wo.tiles[No][Es].activeTime}).slice(Math.max(24,Bo.length));ss<us.length;ss++){Xo=us[ss];var ms=this.tiles[No][Xo];Co.remove(ms),ms.dispose(),delete this.tiles[No][Xo]}}for(var As=0;As<this.tiles.length;As++)if(this.tiles[As]){var Os=!!$o&&As<=$o.level;for(var Xo in this.tiles[As])this.tiles[As][Xo].visible=Os}this.object.needsRender=!0}},va.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},va}(),Ir=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),br=new r$3.Vector3(-1,1,1),Or=function(va){function _o(xo){var bo,wo,Eo,To,So,$o,Do,No=this,Oo=_o.parseArgs(xo);(No=va.call(this,Oo)||this).currentPanoIndex=Oo.initial[0],No.maxAccessibleDistance=Oo.maxAccessibleDistance,No.panoTapTriggerRadius=Oo.panoTapTriggerRadius,No.panoCircleMeshCreator=Oo.panoCircleMeshCreator,No.tileLevelForFov=Oo.tileLevelForFov;var Lo=No.model.getMaterial()||{},Co=Lo.pano0,Ro=Lo.pano1;Co&&(Ro==null?void 0:Ro.map)!==Co.map&&(No.model.setMaterial({pano0:Ro}),Co.map.dispose(),(bo=Co.luminanceMap)===null||bo===void 0||bo.dispose()),No.boundingMesh=No.generateBoundingMesh(),No.boundingMesh.setMaterial(No.model.getMaterial()||{}),No.boundingMesh.visible=!1,No.scene.add(No.boundingMesh),No.panoMeshes=[],No.updatePanoMeshes(),No.locationMotion=new Yn({count:0,distance:No.camera.pose.distance,modelAlpha:(Eo=(wo=No.model.getMaterial())===null||wo===void 0?void 0:wo.modelAlpha)!==null&&Eo!==void 0?Eo:0,perspToOrtho:(So=(To=No.model.getMaterial())===null||To===void 0?void 0:To.perspToOrtho)!==null&&So!==void 0?So:0}),No.panoResources={},No.panoResources[No.locationMotion.keyframes[0].key=No.locationMotion.keyframes[1].key=Fe()]={panoIndex:No.currentPanoIndex,workCode:No.work.workCode,panoPicture:(Do=($o=No.model.getMaterial())===null||$o===void 0?void 0:$o.pano1)!==null&&Do!==void 0?Do:null,position:No.camera.pose.offset.clone(),effect:"fly"};var jo={allowHosts:No.work.allowHosts,networkSubscribe:No.networkSubscribe};return No.textureLoader=new xi(jo),No.tiling=new zr(jo,No.imageOptions),No.scene.add(No.tiling.object),No}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo,wo,Eo,To,So=va.parseArgs.call(this,xo);return t$3.__assign(t$3.__assign({},So),{maxAccessibleDistance:(bo=xo.maxAccessibleDistance)!==null&&bo!==void 0?bo:5,panoTapTriggerRadius:(wo=xo.panoTapTriggerRadius)!==null&&wo!==void 0?wo:1,panoCircleMeshCreator:(Eo=xo.panoCircleMeshCreator)!==null&&Eo!==void 0?Eo:cr,tileLevelForFov:(To=xo.tileLevelForFov)!==null&&To!==void 0?To:function($o){var Do,No=So.renderer.getSize(new r$3.Vector2),Oo=2*Math.atan(Math.tan($o/180*Math.PI/2)*So.camera.aspect)/Math.PI*180,Lo=Math.max(No.width/Oo,No.height/$o),Co=(Do=So.imageOptions.size)!==null&&Do!==void 0?Do:2048;return Co<8192&&Lo>24?4:Co<4096&&Lo>16?3:Co<2048&&Lo>12?2:Co<1024&&Lo>10?1:0}})},_o.initAnimationEndPose=function(xo){var bo=this.parseArgs(xo);return va.initAnimationEndPose.call(this,bo)},_o.prototype.destroy=function(){var xo,bo,wo=this;va.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(jo){wo.helper.remove(jo),jo.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Eo=this.videoTexture.image;Eo.pause(),Eo.oncanplay=function(){},Eo.ontimeupdate=function(){};var To={panoVideo:null};this.model.setMaterial(To),this.boundingMesh.setMaterial(To);for(var So=(xo=this.model.getMaterial())!==null&&xo!==void 0?xo:{},$o=So.pano0,Do=So.pano1,No=0,Oo=Object.keys(this.panoResources);No<Oo.length;No++){var Lo=Oo[No],Co=this.panoResources[Lo];if(Co.panoPicture){var Ro=Co.panoPicture.map;Ro&&Ro!==($o==null?void 0:$o.map)&&Ro!==(Do==null?void 0:Do.map)&&(Ro.dispose(),(bo=Co.panoPicture.luminanceMap)===null||bo===void 0||bo.dispose(),Co.panoPicture=null)}delete this.panoResources[Lo]}},_o.prototype.isReady=function(){return this.locationMotion.ended===!0&&va.prototype.isReady.call(this)},_o.prototype.updateWork=function(xo,bo,wo,Eo,To){this.userAction=To,this.work=xo,this.currentPanoIndex=bo,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts);var So={},$o=!0;this.boundingMesh&&(So=this.boundingMesh.getMaterial()||{},$o=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=$o,this.boundingMesh.setMaterial(So),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes(!1);for(var Do=0,No=this.panoMeshes;Do<No.length;Do++)No[Do].visible=!1;return this.moveToPano(bo,{effect:"fade",duration:Eo,longitude:wo.longitude,latitude:wo.latitude,fov:wo.fov},To),!0},_o.prototype.updateModel=function(xo){var bo=this;this.model=xo;var wo={};this.boundingMesh&&(wo=this.boundingMesh.getMaterial()||{},this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=!0,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(wo),this.scene.add(this.boundingMesh),this.needsRender=!0,Ft(function(){bo.updatePanoMeshes(),bo.needsRender=!0})},_o.prototype.updateTime=function(xo,bo){var wo,Eo,To,So,$o,Do,No;if(!this.destroyed){var Oo={},Lo={};if(this.locationMotion.ended===!1){this.locationMotion.update(xo);var Co=this.locationMotion.getKeyFrameSegment(xo),Ro=Co[0],jo=Co[1],zo=this.panoResourceFromLocationMotionKeyframe(Ro),Io=this.panoResourceFromLocationMotionKeyframe(jo),Po=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Bo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ko=new r$3.Vector3().copy(zo.position),Uo=new r$3.Vector3().copy(Io.position),Qo=this.locationMotion.value.count-jo.value.count+1;Oo.modelAlpha=this.locationMotion.value.modelAlpha,Oo.perspToOrtho=xn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Oo.useBlackTransition=Io.effect==="instant",Io.panoPicture&&(Qo<1?zo.panoPicture&&(Oo.pano0=zo.panoPicture):Oo.pano0=Io.panoPicture,Oo.pano1=Io.panoPicture),Io.effect==="fade"&&(Oo.pano0&&zo.panoPicture&&(Oo.pano0={map:Oo.pano0.map,luminanceMap:Oo.pano0.luminanceMap,matrix:zo.panoPicture.matrix.clone().setPosition(Io.position)}),ko.copy(Uo)),Oo.progress=Qo,Lo.distance=this.locationMotion.value.distance,Lo.offset=new r$3.Vector3(ko.x+(Uo.x-ko.x)*Qo,ko.y+(Uo.y-ko.y)*Qo,ko.z+(Uo.z-ko.z)*Qo);for(var qo=[],Zo=[],Xo=0,Fo=this.locationMotion.keyframes;Xo<Fo.length;Xo++){var Go=Fo[Xo],Vo=Go.key,Wo=Go.progress;Vo!==void 0&&(qo.push(Vo),Wo>=this.locationMotion.progress&&Zo.push(Vo))}for(var Yo=0,Ko=Object.keys(this.panoResources);Yo<Ko.length;Yo++){var ts=Ko[Yo];if(!(Zo.indexOf(ts)>=0)){var Jo=this.panoResources[ts];if(Jo.panoPicture){var rs=Jo.panoPicture.map;if(rs){if(rs===((wo=Oo.pano0)===null||wo===void 0?void 0:wo.map)||rs===((Eo=Oo.pano1)===null||Eo===void 0?void 0:Eo.map))continue;rs.dispose(),(To=Jo.panoPicture.luminanceMap)===null||To===void 0||To.dispose(),Jo.panoPicture=null}}qo.indexOf(ts)>=0||delete this.panoResources[ts]}}zo.workCode===Io.workCode?this.currentPanoIndex=Qo<.5?zo.panoIndex:Io.panoIndex:this.currentPanoIndex=Io.panoIndex,this.emit("movingToPano",Bo.panoIndex,Po.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(xo),Lo.longitude=this.cameraMotion.value.longitude,Lo.latitude=this.cameraMotion.value.latitude,Lo.fov=this.cameraMotion.value.fov),En(Oo)===!1&&(this.model.setMaterial(Oo),this.boundingMesh.setMaterial(Oo)),En(Lo)===!1&&this.setCamera(Lo),this.boundingMesh.visible=Boolean((So=this.boundingMesh.getMaterial())===null||So===void 0?void 0:So.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position),this.tileLevelForFov&&this.locationMotion.ended&&this.pending===!1&&this.tiling.object.visible&&this.work.observers[this.currentPanoIndex]){var ls=this.work.observers[this.currentPanoIndex];this.enableIOSEDR&&this.tiling.setLuminance(($o=ls.images.luminance)!==null&&$o!==void 0?$o:null),this.tiling.panoIndex=this.currentPanoIndex,this.tiling.setResource((No=(Do=ls.images)===null||Do===void 0?void 0:Do.tiles)!==null&&No!==void 0?No:[]),this.tiling.setRotation(ls.quaternion),this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov),xo)}}},_o.prototype.render=function(xo){var bo=this.work.observers[this.currentPanoIndex];bo&&bo.video&&(this.needsRender=!0),va.prototype.render.call(this,xo)},_o.prototype.postProcessing=function(xo,bo){if(!this.destroyed)return this.effect||(this.effect=new fr(this.renderer)),this.effect.render(xo,bo)},_o.prototype.getTargetPose=function(){var xo=this.cameraMotion.getKeyFrameSegment(He())[1],bo=this.locationMotion.getKeyFrameSegment(He())[1],wo=this.panoResourceFromLocationMotionKeyframe(bo),Eo=this.work.observers[wo.panoIndex];return{longitude:xo.value.longitude,latitude:xo.value.latitude,fov:xo.value.fov,offset:Eo?Eo.position.clone():this.camera.position.clone()}},_o.prototype.moveToPano=function(xo,bo,wo){var Eo,To,So,$o=this,Do=this.work.observers[xo],No=t$3.__assign({key:"pano."+xo,basisLoaderInitialized:wi.isInitialized()},Xt(this.imageOptions,["format","size","quality"])),Oo=(Eo=this.imageOptions.transform)!==null&&Eo!==void 0?Eo:ti,Lo={right:Oo(Do.images.right,t$3.__assign(t$3.__assign({},No),{key:No.key+".right"})),left:Oo(Do.images.left,t$3.__assign(t$3.__assign({},No),{key:No.key+".left"})),up:Oo(Do.images.up,t$3.__assign(t$3.__assign({},No),{key:No.key+".up"})),down:Oo(Do.images.down,t$3.__assign(t$3.__assign({},No),{key:No.key+".down"})),front:Oo(Do.images.front,t$3.__assign(t$3.__assign({},No),{key:No.key+".front"})),back:Oo(Do.images.back,t$3.__assign(t$3.__assign({},No),{key:No.key+".back"}))},Co={key:"pano_luminance."+xo,basisLoaderInitialized:wi.isInitialized(),size:No.size?No.size/2:1024},Ro=this.enableIOSEDR&&Do.images.luminance?{right:Oo(Do.images.luminance.right,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".right"})),left:Oo(Do.images.luminance.left,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".left"})),up:Oo(Do.images.luminance.up,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".up"})),down:Oo(Do.images.luminance.down,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".down"})),front:Oo(Do.images.luminance.front,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".front"})),back:Oo(Do.images.luminance.back,t$3.__assign(t$3.__assign({},Co),{key:Co.key+".back"}))}:null,jo="pano:"+Wn(Lo);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===jo)return;var zo=this.pendingTextureTask.panoIndex;(To=this.panoMeshes[zo])===null||To===void 0||To.setProgress(0),this.emit("textureAbort",zo,Do),this.pendingTextureTask.onError(new Error("texture aborted"))}var Io,Po=this.model.getMaterial()||{},Bo=Po.pano0,ko=Po.pano1;if((Bo==null?void 0:Bo.map.name)===jo?Io=Bo:(ko==null?void 0:ko.map.name)===jo&&(Io=ko),Io){var Uo={panoIndex:xo,workCode:this.work.workCode,effect:(So=bo.effect)!==null&&So!==void 0?So:"fly",panoPicture:{map:Io.map,luminanceMap:Io.luminanceMap,matrix:new r$3.Matrix4().compose(Do.position,Do.quaternion,br)},position:Do.position.clone()};this.doMoveToPano(xo,Uo,bo,wo)}else this.pending=!0,this.pendingTextureTask={panoIndex:xo,hash:jo,onLoad:function(Qo,qo){var Zo,Xo;if($o.pending=!1,$o.destroyed)Qo.body.dispose();else{Qo.body.name=jo,$o.emit("panoLoaded",xo);var Fo={panoIndex:xo,workCode:$o.work.workCode,effect:(Zo=bo.effect)!==null&&Zo!==void 0?Zo:"fly",panoPicture:{map:Qo.body,luminanceMap:(Xo=qo==null?void 0:qo.body)!==null&&Xo!==void 0?Xo:null,matrix:new r$3.Matrix4().compose(Do.position,Do.quaternion,br)},position:Do.position.clone()};$o.doMoveToPano(xo,Fo,bo,wo)}},onError:function(Qo){$o.pending=!1,bo.moveCancelCallback&&bo.moveCancelCallback(),$o.emit("panoLoadError",Qo,xo),$o.emit("moveToPanoCanceled",xo)}},Promise.all([this.textureLoader.loadCube(Lo,{format:r$3.RGBFormat},void 0,void 0,function(Qo){var qo,Zo;((qo=$o.pendingTextureTask)===null||qo===void 0?void 0:qo.hash)===jo&&((Zo=$o.panoMeshes[xo])===null||Zo===void 0||Zo.setProgress(Qo)),$o.emit("textureLoading",Qo,xo,Do)},this.renderer),Ro?this.textureLoader.loadCube(Ro,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Qo){var qo,Zo,Xo=Qo[0],Fo=Qo[1];((qo=$o.pendingTextureTask)===null||qo===void 0?void 0:qo.hash)===jo?($o.pendingTextureTask.onLoad(Xo,Fo),(Zo=$o.panoMeshes[xo])===null||Zo===void 0||Zo.setProgress(0),delete $o.pendingTextureTask,$o.emit("textureLoaded",xo,Do,Xo.meta)):(Xo.body.dispose(),Fo==null||Fo.body.dispose())}).catch(function(Qo){var qo,Zo;((qo=$o.pendingTextureTask)===null||qo===void 0?void 0:qo.hash)===jo&&($o.pendingTextureTask.onError(Qo),(Zo=$o.panoMeshes[xo])===null||Zo===void 0||Zo.setProgress(0),delete $o.pendingTextureTask,$o.emit("textureError",Qo,xo,Do),$o.emit("error",Qo))}),this.emit("textureStartLoad",xo,Do)},_o.prototype.setCamera=function(xo){xo===void 0&&(xo={}),va.prototype.setCamera.call(this,xo);var bo=this.work.observers[this.currentPanoIndex];if(bo)for(var wo=bo.visibleNodes.concat(this.currentPanoIndex),Eo=this.getForwardPanoIndexOrNot(),To=0;To<this.work.observers.length;To++){var So=this.work.observers[To],$o=this.panoMeshes[To];if($o.visible=!0,$o.setCurrent(Eo===To),$o)if(So.loadable||So.active)if(wo.indexOf(To)===-1)$o.visible=!1;else{$o.visible=!0;var Do=$o.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Do<.01?$o.setOpacity(0):$o.setOpacity(xn(1.5/Do,0,1))}else $o.visible=!0}},_o.prototype.initAnimation=function(xo,bo,wo,Eo){var To,So,$o,Do=this;if(!this.destroyed){var No=!1;this.pending=!1,this.userAction=Eo,this.moveToPano(xo,{longitude:(To=bo.longitude)!==null&&To!==void 0?To:this.defaultLongitude,latitude:xn((So=bo.latitude)!==null&&So!==void 0?So:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:xn(($o=bo.fov)!==null&&$o!==void 0?$o:this.defaultFov,this.minFov,this.maxFov),duration:wo,moveStartCallback:function(Oo,Lo){No=!0,Do.emit("initAnimationWillStart",Oo,Lo,Do.userAction)},moveEndCallback:function(Oo,Lo){Do.emit("initAnimationEnded",Oo,Lo,Do.userAction)},moveCancelCallback:function(){var Oo={longitude:Do.camera.pose.longitude,latitude:Do.camera.pose.latitude,fov:Do.camera.pose.fov,offset:Do.camera.pose.offset.clone()};No===!1&&Do.emit("initAnimationWillStart",Do.currentPanoIndex,Oo,Do.userAction),Do.emit("initAnimationEnded",Do.currentPanoIndex,Oo,Do.userAction)}},Eo)}},_o.prototype.panoResourceFromLocationMotionKeyframe=function(xo){return this.panoResources[xo.key]},_o.prototype.locationMotionKeyframesLength=function(xo){for(var bo=0,wo=1;wo<xo.length;wo++){var Eo=this.panoResourceFromLocationMotionKeyframe(xo[wo-1]).position,To=this.panoResourceFromLocationMotionKeyframe(xo[wo]).position;bo+=Eo.distanceTo(To)*(xo[wo].value.count-xo[wo-1].value.count)}return bo},_o.prototype.updatePanoMeshes=function(xo){xo===void 0&&(xo=!0);for(var bo=[],wo=0,Eo=this.panoMeshes;wo<Eo.length;wo++)($o=Eo[wo]).loading&&bo.push($o.name),this.helper.remove($o),$o.dispose();this.panoMeshes.length=0;for(var To=new r$3.Vector3(0,-1,0),So=0;So<this.work.observers.length;So++){var $o,Do=this.work.observers[So];if(($o=this.panoCircleMeshCreator()).name="panoCircle_"+this.work.workCode+"_"+So,$o.position.copy(Do.standingPosition),$o.needsRender=!0,this.helper.add($o),xo&&this.model.loaded&&this.model.bvhs.loaded){var No=$o.position.clone().add(new r$3.Vector3(0,1,0)),Oo=new r$3.Raycaster(No,To,0,1),Lo=this.model.intersectRaycaster(Oo)[0];Lo&&Lo.point.distanceTo($o.position)>.1&&($o.position.copy(Lo.point.clone()),$o.needsRender=!0)}Do.active===!1&&($o.setDisabled(!0),bo.indexOf($o.name)>=0&&($o.setDisabled(!1),$o.setLoading(!0))),this.panoMeshes[So]=$o}},_o.prototype.generateBoundingMesh=function(xo){xo===void 0&&(xo=!1);for(var bo=this.model.bounding.clone(),wo=0,Eo=this.work.observers;wo<Eo.length;wo++){var To=Eo[wo];bo.expandByPoint(To.standingPosition),bo.expandByPoint(new r$3.Vector3().fromArray([To.position.x,2*To.position.y-To.standingPosition.y,To.position.z]))}xo&&bo.expandByPoint(this.camera.position);var So=at(bo,new r$3.Vector3(1,0,1));return So.name="panorama_bounding",So},_o.prototype.doMoveToPano=function(xo,bo,wo,Eo){var To,So,$o,Do=this;wo===void 0&&(wo={}),this.userAction=Eo;var No=He(),Oo=Fe();this.panoResources[Oo]=bo;var Lo,Co,Ro;if(this.locationMotion.ended){var jo=this.locationMotion.getKeyFrameSegment(No);jo[0];var zo=jo[1],Io=this.locationMotion.value,Po=this.panoResourceFromLocationMotionKeyframe(zo).position,Bo=bo.position;Lo=Math.max(Po.distanceTo(Bo),1),Co=[{key:zo.key,progress:0,value:t$3.__assign(t$3.__assign({},Io),{count:0})},{key:Oo,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Ro=0}else{var ko=this.locationMotion.getKeyFrameSegment(No),Uo=ko[0],Qo=(zo=ko[1],Io=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Uo).position),qo=(Po=this.panoResourceFromLocationMotionKeyframe(zo).position,Bo=bo.position,zo.value.count-Io.count),Zo=Math.max(Qo.distanceTo(Po),1)*qo;Lo=Zo+Math.max(Po.distanceTo(Bo),1),Co=[{key:Uo.key,progress:0,value:t$3.__assign({},Io)},{key:zo.key,progress:Zo/Lo,value:zo.value},{key:Oo,progress:1,value:{count:zo.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Xo=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Fo=this.locationMotionKeyframesLength(Co);Ro=this.locationMotion.getProgressVelocity(No)*Xo/Fo}var Go=this.calculateMovingDuration(wo.duration,Lo),Vo={longitude:wo.longitude,latitude:wo.latitude,fov:wo.fov},Wo={longitude:(To=Vo.longitude)!==null&&To!==void 0?To:this.camera.pose.longitude,latitude:(So=Vo.latitude)!==null&&So!==void 0?So:this.camera.pose.latitude,fov:($o=Vo.fov)!==null&&$o!==void 0?$o:this.camera.pose.fov,offset:bo.position.clone()};wo.moveStartCallback&&wo.moveStartCallback(xo,Wo),this.emit("panoWillArrive",xo,Wo,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.model.setMaterial({panoVideo:null}),this.boundingMesh.setMaterial({panoVideo:null}),this.cameraMotion.set(Vo,Go).catch(Qe),this.locationMotion.setKeyFrames(Co,Go,Ro).then(function(){var Yo,Ko,ts,Jo={longitude:Do.camera.pose.longitude,latitude:Do.camera.pose.latitude,fov:Do.camera.pose.fov,offset:Do.camera.pose.offset.clone()};wo.moveEndCallback&&wo.moveEndCallback(xo,Jo),Do.emit("panoArrived",xo,Jo,Eo);var rs=Do.work.observers[Do.currentPanoIndex];if(rs&&rs.video&&Do.videoTexture&&Do.videoTexture.image instanceof HTMLVideoElement){var ls=Ir.clone().multiply((ts=(Ko=(Yo=Do.model.getMaterial())===null||Yo===void 0?void 0:Yo.pano1)===null||Ko===void 0?void 0:Ko.matrix)!==null&&ts!==void 0?ts:new r$3.Matrix4).multiply(rs.video.matrix),ss={map:Do.videoTexture,size:rs.video.size,matrix:ls,alpha:1},us=Fe(),ms=Do.videoTexture.image;ms.setAttribute("uuid",us),(lr||(lr=new Promise(function(As){var Os,Es=document.createElement("video");Es.muted=!0,Es.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Es.addEventListener("timeupdate",function Ms(){Es.removeEventListener("timeupdate",Ms,!1),clearTimeout(Os);var $s=document.createElement("canvas");$s.width=$s.height=1;var ks=$s.getContext("2d");ks?(ks.drawImage(Es,0,0,1,1),ks.getImageData(0,0,1,1).data[3]>10?As(!0):As(!1)):As(!1)},!1),Es.addEventListener("canplay",function Ms(){Es.removeEventListener("canplay",Ms,!1),Es.play()},!1),Os=window.setTimeout(function(){return As(!1)},1e3)}))).then(function(As){As&&rs.video&&ms.getAttribute("uuid")===us&&(ms.oncanplay=function(){ms.oncanplay=Qe,ms.play()},ms.ontimeupdate=function(){ms.currentTime>.5&&(ms.ontimeupdate=Qe,Do.model.setMaterial({panoVideo:ss}),Do.boundingMesh.setMaterial({panoVideo:ss}))},ms.src=rs.video.source)}).catch(function(){ms.removeAttribute("uuid")})}},function(){wo.moveCancelCallback&&wo.moveCancelCallback(),Do.emit("moveToPanoCanceled",xo)})},_o.prototype.getForwardPanoIndexOrNot=function(xo){var bo=this,wo=this.camera.getWorldDirection(new r$3.Vector3),Eo=this.camera.position.clone(),To=this.work.observers[this.currentPanoIndex];if(!To)return null;var So=To.accessibleNodes.filter(function(Io){if(Io===bo.currentPanoIndex)return!1;var Po=bo.work.observers[Io],Bo=Po.standingPosition.clone().sub(Eo);return Bo.length()!==0&&!(Bo.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(Po.loadable||Po.active)}),$o=(xo?xo.ray.direction.clone():wo.clone()).setY(0);if($o.length()===0)return null;for(var Do=So.slice().sort(function(Io,Po){var Bo=bo.work.observers[Io].position.clone().setY(Eo.y),ko=bo.work.observers[Po].position.clone().setY(Eo.y);return Bo.distanceTo(Eo)-ko.distanceTo(Eo)}),No=0,Oo=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];No<Oo.length;No++)for(var Lo=Oo[No],Co=0,Ro=Do;Co<Ro.length;Co++){var jo=Ro[Co],zo=this.work.observers[jo].position.clone().setY(Eo.y).sub(Eo);if(zo.length()!==0&&$o.angleTo(zo)<Lo)return jo}return null},_o.prototype.onTapGesture=function(xo){var bo=this,wo=xo.pointers.map(function(Jo){return Xt(Jo,["x","y"])});if(!this.emit("wantsGesture","tap",wo,!0)){var Eo=this.relativeClientPosition(xo.center),To=new r$3.Raycaster;if(To.setFromCamera(Eo,this.camera),!this.emit("wantsTapGesture",To,Eo)){this.emit("gesture","tap",wo,!0),this.emit("tapGesture",To,Eo),this.interiaMovement=!1;var So=this.camera.getWorldDirection(new r$3.Vector3).setY(0),$o=null,Do=this.work.observers[this.currentPanoIndex];if(Do){var No=Do.accessibleNodes.filter(function(Jo){if(Jo===bo.currentPanoIndex)return!1;var rs=bo.work.observers[Jo];return!(rs.position.distanceTo(bo.camera.position)>bo.maxAccessibleDistance)&&(rs.loadable||rs.active)}),Oo=this.model.intersectRaycaster(To)[0];if(Oo){var Lo=Tn(No,function(Jo){var rs=bo.work.observers[Jo].standingPosition.clone();return rs.clone().sub(bo.camera.position).setY(0).angleTo(So)>Math.PI/2?1/0:rs.distanceTo(Oo.point)},!0),Co=Lo[0];Lo[1]<this.panoTapTriggerRadius&&($o=Co)}Re($o)&&($o=this.getForwardPanoIndexOrNot(To));for(var Ro=0,jo=this.locationMotion.keyframes;Ro<jo.length;Ro++){var zo=jo[Ro],Io=this.panoResourceFromLocationMotionKeyframe(zo);if(!(zo.progress<this.locationMotion.progress)&&Io.panoIndex===$o){$o=null;break}}if(this.emit("panoSelected",$o),Re($o))this.locationMotion.ended===!0&&this.cameraBounce();else{var Po=this.work.observers[$o];if(Po.active){for(var Bo={},ko=Math.PI/6,Uo=Math.PI/12,Qo=new r$3.Vector3(0,1,0),qo=Po.position.clone().setY(0).sub(Do.position.clone().setY(0)).normalize(),Zo=qo.clone().applyAxisAngle(Qo,ko),Xo=qo.clone().applyAxisAngle(Qo,-ko),Fo=[],Go=[],Vo=[],Wo=0,Yo=Po.accessibleNodes;Wo<Yo.length;Wo++)if((Co=Yo[Wo])!==this.currentPanoIndex&&Co!==$o){var Ko=this.work.observers[Co].position.clone().sub(Po.position).setY(0);qo.angleTo(Ko)<ko?Vo.push(Ko):Zo.angleTo(Ko)<ko?Fo.push(Ko):Xo.angleTo(Ko)<ko&&Go.push(Ko)}var ts=(Vo.length>0?Vo:t$3.__spreadArray(t$3.__spreadArray([],Fo,!0),Go,!0)).slice().sort(function(Jo,rs){return Jo.angleTo(qo)-rs.angleTo(qo)})[0];ts&&ts.angleTo(So)>Uo&&(Bo.longitude=Math.atan2(-ts.x,-ts.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Bo.latitude=xn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Bo.fov=this.defaultFov),this.emit("wantsMoveToPano",$o,Bo,!0)}else this.panoMeshes[$o]&&(this.panoMeshes[$o].setDisabled(!1),this.panoMeshes[$o].setLoading(!0))}}}}},_o}(Zn),Sr=function(va,_o){var xo=va!==void 0?va:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{};function bo(Ro){return Ro&&Ro.__esModule&&Object.prototype.hasOwnProperty.call(Ro,"default")?Ro.default:Ro}function wo(Ro,jo){return Ro(jo={exports:{}},jo.exports),jo.exports}var Eo=function(){return/Android/i.test(_o.userAgent)||/iPhone|iPad|iPod/i.test(_o.userAgent)},To=function(Ro,jo){for(var zo=0,Io=Ro.length;zo<Io;zo++)jo[zo]=Ro[zo]},So=function(Ro,jo){for(var zo in jo)jo.hasOwnProperty(zo)&&(Ro[zo]=jo[zo]);return Ro},$o=bo(wo(function(Ro,jo){/**
         * @license
         * cardboard-vr-display
         * Copyright (c) 2015-2017 Google
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         *//**
         * @license
         * gl-preserve-state
         * Copyright (c) 2016, Brandon Jones.
         *
         * Permission is hereby granted, free of charge, to any person obtaining a copy
         * of this software and associated documentation files (the "Software"), to deal
         * in the Software without restriction, including without limitation the rights
         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         * copies of the Software, and to permit persons to whom the Software is
         * furnished to do so, subject to the following conditions:
         *
         * The above copyright notice and this permission notice shall be included in
         * all copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
         * THE SOFTWARE.
         *//**
         * @license
         * webvr-polyfill-dpdb
         * Copyright (c) 2015-2017 Google
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         *//**
         * @license
         * nosleep.js
         * Copyright (c) 2017, Rich Tibbett
         *
         * Permission is hereby granted, free of charge, to any person obtaining a copy
         * of this software and associated documentation files (the "Software"), to deal
         * in the Software without restriction, including without limitation the rights
         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         * copies of the Software, and to permit persons to whom the Software is
         * furnished to do so, subject to the following conditions:
         *
         * The above copyright notice and this permission notice shall be included in
         * all copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
         * THE SOFTWARE.
         */(function(zo,Io){Ro.exports=Io()})(0,function(){var zo,Io=function(Ho,es){if(!(Ho instanceof es))throw new TypeError("Cannot call a class as a function")},Po=function(){function Ho(es,ns){for(var os=0;os<ns.length;os++){var ps=ns[os];ps.enumerable=ps.enumerable||!1,ps.configurable=!0,"value"in ps&&(ps.writable=!0),Object.defineProperty(es,ps.key,ps)}}return function(es,ns,os){return ns&&Ho(es.prototype,ns),os&&Ho(es,os),es}}(),Bo=function(){function Ho(es,ns){var os=[],ps=!0,vs=!1,Ss=void 0;try{for(var js,Us=es[Symbol.iterator]();!(ps=(js=Us.next()).done)&&(os.push(js.value),!ns||os.length!==ns);ps=!0);}catch(Ds){vs=!0,Ss=Ds}finally{try{!ps&&Us.return&&Us.return()}finally{if(vs)throw Ss}}return os}return function(es,ns){if(Array.isArray(es))return es;if(Symbol.iterator in Object(es))return Ho(es,ns);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ko=.001,Uo=1,Qo=function(Ho,es){return"data:"+Ho+","+encodeURIComponent(es)},qo=function(Ho,es,ns){return Ho+(es-Ho)*ns},Zo=function(){var Ho=/iPad|iPhone|iPod/.test(_o.platform);return function(){return Ho}}(),Xo=function(){var Ho=_o.userAgent.indexOf("Version")!==-1&&_o.userAgent.indexOf("Android")!==-1&&_o.userAgent.indexOf("Chrome")!==-1;return function(){return Ho}}(),Fo=function(){var Ho=/^((?!chrome|android).)*safari/i.test(_o.userAgent);return function(){return Ho}}(),Go=function(){var Ho=_o.userAgent.indexOf("Firefox")!==-1&&_o.userAgent.indexOf("Android")!==-1;return function(){return Ho}}(),Vo=function(){var Ho=_o.userAgent.match(/.*Chrome\/([0-9]+)/),es=Ho?parseInt(Ho[1],10):null;return function(){return es}}(),Wo=function(){var Ho=!1;return Ho=Zo()&&Fo()&&_o.userAgent.indexOf("13_4")!==-1,function(){return Ho}}(),Yo=function(){var Ho=!1;if(Vo()===65){var es=_o.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(es){var ns=es[1].split("."),os=Bo(ns,4);os[0],os[1];var ps=os[2],vs=os[3];Ho=parseInt(ps,10)===3325&&parseInt(vs,10)<148}}return function(){return Ho}}(),Ko=function(){var Ho=_o.userAgent.indexOf("R7 Build")!==-1;return function(){return Ho}}(),ts=function(){var Ho=va.orientation==90||va.orientation==-90;return Ko()?!Ho:Ho},Jo=function(Ho){return!(isNaN(Ho)||Ho<=ko||Ho>Uo)},rs=function(){return Math.max(va.screen.width,va.screen.height)*va.devicePixelRatio},ls=function(){return Math.min(va.screen.width,va.screen.height)*va.devicePixelRatio},ss=function(Ho){if(Xo())return!1;if(Ho.requestFullscreen)Ho.requestFullscreen();else if(Ho.webkitRequestFullscreen)Ho.webkitRequestFullscreen();else if(Ho.mozRequestFullScreen)Ho.mozRequestFullScreen();else{if(!Ho.msRequestFullscreen)return!1;Ho.msRequestFullscreen()}return!0},us=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},ms=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},As=function(Ho,es,ns,os){var ps=Ho.createShader(Ho.VERTEX_SHADER);Ho.shaderSource(ps,es),Ho.compileShader(ps);var vs=Ho.createShader(Ho.FRAGMENT_SHADER);Ho.shaderSource(vs,ns),Ho.compileShader(vs);var Ss=Ho.createProgram();for(var js in Ho.attachShader(Ss,ps),Ho.attachShader(Ss,vs),os)Ho.bindAttribLocation(Ss,os[js],js);return Ho.linkProgram(Ss),Ho.deleteShader(ps),Ho.deleteShader(vs),Ss},Os=function(Ho,es){for(var ns={},os=Ho.getProgramParameter(es,Ho.ACTIVE_UNIFORMS),ps="",vs=0;vs<os;vs++)ns[ps=Ho.getActiveUniform(es,vs).name.replace("[0]","")]=Ho.getUniformLocation(es,ps);return ns},Es=function(Ho,es,ns,os,ps,vs,Ss){var js=1/(es-ns),Us=1/(os-ps),Ds=1/(vs-Ss);return Ho[0]=-2*js,Ho[1]=0,Ho[2]=0,Ho[3]=0,Ho[4]=0,Ho[5]=-2*Us,Ho[6]=0,Ho[7]=0,Ho[8]=0,Ho[9]=0,Ho[10]=2*Ds,Ho[11]=0,Ho[12]=(es+ns)*js,Ho[13]=(ps+os)*Us,Ho[14]=(Ss+vs)*Ds,Ho[15]=1,Ho},Ms=function(){var Ho,es=!1;return Ho=_o.userAgent||_o.vendor||va.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Ho)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Ho.substr(0,4)))&&(es=!0),es},$s=function(Ho,es){for(var ns in es)es.hasOwnProperty(ns)&&(Ho[ns]=es[ns]);return Ho},ks=function(Ho){if(Zo()){var es=Ho.style.width,ns=Ho.style.height;Ho.style.width=parseInt(es)+1+"px",Ho.style.height=parseInt(ns)+"px",setTimeout(function(){Ho.style.width=es,Ho.style.height=ns},100)}va.canvas=Ho},zs=function(){var Ho=Math.PI/180,es=.25*Math.PI;function ns(Ds,Is,nu,hu){var gu=Math.tan(Is?Is.upDegrees*Ho:es),yu=Math.tan(Is?Is.downDegrees*Ho:es),Mu=Math.tan(Is?Is.leftDegrees*Ho:es),_u=Math.tan(Is?Is.rightDegrees*Ho:es),wu=2/(Mu+_u),Ou=2/(gu+yu);return Ds[0]=wu,Ds[1]=0,Ds[2]=0,Ds[3]=0,Ds[4]=0,Ds[5]=Ou,Ds[6]=0,Ds[7]=0,Ds[8]=-(Mu-_u)*wu*.5,Ds[9]=(gu-yu)*Ou*.5,Ds[10]=hu/(nu-hu),Ds[11]=-1,Ds[12]=0,Ds[13]=0,Ds[14]=hu*nu/(nu-hu),Ds[15]=0,Ds}function os(Ds,Is,nu){var hu=Is[0],gu=Is[1],yu=Is[2],Mu=Is[3],_u=hu+hu,wu=gu+gu,Ou=yu+yu,Fu=hu*_u,Ru=hu*wu,Wu=hu*Ou,Yu=gu*wu,qu=gu*Ou,Uu=yu*Ou,Vu=Mu*_u,Gu=Mu*wu,el=Mu*Ou;return Ds[0]=1-(Yu+Uu),Ds[1]=Ru+el,Ds[2]=Wu-Gu,Ds[3]=0,Ds[4]=Ru-el,Ds[5]=1-(Fu+Uu),Ds[6]=qu+Vu,Ds[7]=0,Ds[8]=Wu+Gu,Ds[9]=qu-Vu,Ds[10]=1-(Fu+Yu),Ds[11]=0,Ds[12]=nu[0],Ds[13]=nu[1],Ds[14]=nu[2],Ds[15]=1,Ds}function ps(Ds,Is,nu){var hu,gu,yu,Mu,_u,wu,Ou,Fu,Ru,Wu,Yu,qu,Uu=nu[0],Vu=nu[1],Gu=nu[2];return Is===Ds?(Ds[12]=Is[0]*Uu+Is[4]*Vu+Is[8]*Gu+Is[12],Ds[13]=Is[1]*Uu+Is[5]*Vu+Is[9]*Gu+Is[13],Ds[14]=Is[2]*Uu+Is[6]*Vu+Is[10]*Gu+Is[14],Ds[15]=Is[3]*Uu+Is[7]*Vu+Is[11]*Gu+Is[15]):(hu=Is[0],gu=Is[1],yu=Is[2],Mu=Is[3],_u=Is[4],wu=Is[5],Ou=Is[6],Fu=Is[7],Ru=Is[8],Wu=Is[9],Yu=Is[10],qu=Is[11],Ds[0]=hu,Ds[1]=gu,Ds[2]=yu,Ds[3]=Mu,Ds[4]=_u,Ds[5]=wu,Ds[6]=Ou,Ds[7]=Fu,Ds[8]=Ru,Ds[9]=Wu,Ds[10]=Yu,Ds[11]=qu,Ds[12]=hu*Uu+_u*Vu+Ru*Gu+Is[12],Ds[13]=gu*Uu+wu*Vu+Wu*Gu+Is[13],Ds[14]=yu*Uu+Ou*Vu+Yu*Gu+Is[14],Ds[15]=Mu*Uu+Fu*Vu+qu*Gu+Is[15]),Ds}function vs(Ds,Is){var nu=Is[0],hu=Is[1],gu=Is[2],yu=Is[3],Mu=Is[4],_u=Is[5],wu=Is[6],Ou=Is[7],Fu=Is[8],Ru=Is[9],Wu=Is[10],Yu=Is[11],qu=Is[12],Uu=Is[13],Vu=Is[14],Gu=Is[15],el=nu*_u-hu*Mu,rl=nu*wu-gu*Mu,nl=nu*Ou-yu*Mu,il=hu*wu-gu*_u,al=hu*Ou-yu*_u,ol=gu*Ou-yu*wu,sl=Fu*Uu-Ru*qu,ul=Fu*Vu-Wu*qu,ll=Fu*Gu-Yu*qu,cl=Ru*Vu-Wu*Uu,fl=Ru*Gu-Yu*Uu,hl=Wu*Gu-Yu*Vu,Bu=el*hl-rl*fl+nl*cl+il*ll-al*ul+ol*sl;return Bu?(Bu=1/Bu,Ds[0]=(_u*hl-wu*fl+Ou*cl)*Bu,Ds[1]=(gu*fl-hu*hl-yu*cl)*Bu,Ds[2]=(Uu*ol-Vu*al+Gu*il)*Bu,Ds[3]=(Wu*al-Ru*ol-Yu*il)*Bu,Ds[4]=(wu*ll-Mu*hl-Ou*ul)*Bu,Ds[5]=(nu*hl-gu*ll+yu*ul)*Bu,Ds[6]=(Vu*nl-qu*ol-Gu*rl)*Bu,Ds[7]=(Fu*ol-Wu*nl+Yu*rl)*Bu,Ds[8]=(Mu*fl-_u*ll+Ou*sl)*Bu,Ds[9]=(hu*ll-nu*fl-yu*sl)*Bu,Ds[10]=(qu*al-Uu*nl+Gu*el)*Bu,Ds[11]=(Ru*nl-Fu*al-Yu*el)*Bu,Ds[12]=(_u*ul-Mu*cl-wu*sl)*Bu,Ds[13]=(nu*cl-hu*ul+gu*sl)*Bu,Ds[14]=(Uu*rl-qu*il-Vu*el)*Bu,Ds[15]=(Fu*il-Ru*rl+Wu*el)*Bu,Ds):null}var Ss=new Float32Array([0,0,0,1]),js=new Float32Array([0,0,0]);function Us(Ds,Is,nu,hu,gu,yu){ns(Ds,hu||null,yu.depthNear,yu.depthFar),os(Is,nu.orientation||Ss,nu.position||js),gu&&ps(Is,Is,gu),vs(Is,Is)}return function(Ds,Is,nu){return!(!Ds||!Is||(Ds.pose=Is,Ds.timestamp=Is.timestamp,Us(Ds.leftProjectionMatrix,Ds.leftViewMatrix,Is,nu._getFieldOfView("left"),nu._getEyeOffset("left"),nu),Us(Ds.rightProjectionMatrix,Ds.rightViewMatrix,Is,nu._getFieldOfView("right"),nu._getEyeOffset("right"),nu),0))}}(),Cs=function(){var Ho=va.self!==va.top,es=xs(document.referrer),ns=xs(va.location.href);return Ho&&es!==ns},xs=function(Ho){var es,ns=Ho.indexOf("://");es=ns!==-1?ns+3:0;var os=Ho.indexOf("/",es);return os===-1&&(os=Ho.length),Ho.substring(0,os)},Bs=function(Ho){return Ho.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(Ho.w)},Fs=(zo={},function(Ho,es){zo[Ho]===void 0&&(console.warn("webvr-polyfill: "+es),zo[Ho]=!0)}),Zs=function(Ho,es){Fs(Ho,Ho+" has been deprecated. This may not work on native WebVR displays. "+(es?"Please use "+es+" instead.":""))};function bu(Ho,es,ns){if(es){for(var os=[],ps=null,vs=0;vs<es.length;++vs)switch(Ss=es[vs]){case Ho.TEXTURE_BINDING_2D:case Ho.TEXTURE_BINDING_CUBE_MAP:if((Us=es[++vs])<Ho.TEXTURE0||Us>Ho.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),os.push(null,null);break}ps||(ps=Ho.getParameter(Ho.ACTIVE_TEXTURE)),Ho.activeTexture(Us),os.push(Ho.getParameter(Ss),null);break;case Ho.ACTIVE_TEXTURE:ps=Ho.getParameter(Ho.ACTIVE_TEXTURE),os.push(null);break;default:os.push(Ho.getParameter(Ss))}for(ns(Ho),vs=0;vs<es.length;++vs){var Ss=es[vs],js=os[vs];switch(Ss){case Ho.ACTIVE_TEXTURE:break;case Ho.ARRAY_BUFFER_BINDING:Ho.bindBuffer(Ho.ARRAY_BUFFER,js);break;case Ho.COLOR_CLEAR_VALUE:Ho.clearColor(js[0],js[1],js[2],js[3]);break;case Ho.COLOR_WRITEMASK:Ho.colorMask(js[0],js[1],js[2],js[3]);break;case Ho.CURRENT_PROGRAM:Ho.useProgram(js);break;case Ho.ELEMENT_ARRAY_BUFFER_BINDING:Ho.bindBuffer(Ho.ELEMENT_ARRAY_BUFFER,js);break;case Ho.FRAMEBUFFER_BINDING:Ho.bindFramebuffer(Ho.FRAMEBUFFER,js);break;case Ho.RENDERBUFFER_BINDING:Ho.bindRenderbuffer(Ho.RENDERBUFFER,js);break;case Ho.TEXTURE_BINDING_2D:if((Us=es[++vs])<Ho.TEXTURE0||Us>Ho.TEXTURE31)break;Ho.activeTexture(Us),Ho.bindTexture(Ho.TEXTURE_2D,js);break;case Ho.TEXTURE_BINDING_CUBE_MAP:var Us;if((Us=es[++vs])<Ho.TEXTURE0||Us>Ho.TEXTURE31)break;Ho.activeTexture(Us),Ho.bindTexture(Ho.TEXTURE_CUBE_MAP,js);break;case Ho.VIEWPORT:Ho.viewport(js[0],js[1],js[2],js[3]);break;case Ho.BLEND:case Ho.CULL_FACE:case Ho.DEPTH_TEST:case Ho.SCISSOR_TEST:case Ho.STENCIL_TEST:js?Ho.enable(Ss):Ho.disable(Ss);break;default:console.log("No GL restore behavior for 0x"+Ss.toString(16))}ps&&Ho.activeTexture(ps)}}else ns(Ho)}var Au=bu,ds=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),cs=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function bs(Ho,es,ns,os){this.gl=Ho,this.cardboardUI=es,this.bufferScale=ns,this.dirtySubmitFrameBindings=os,this.ctxAttribs=Ho.getContextAttributes(),this.instanceExt=Ho.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=Ho.drawingBufferWidth,this.bufferHeight=Ho.drawingBufferHeight,this.realBindFramebuffer=Ho.bindFramebuffer,this.realEnable=Ho.enable,this.realDisable=Ho.disable,this.realColorMask=Ho.colorMask,this.realClearColor=Ho.clearColor,this.realViewport=Ho.viewport,Zo()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(Ho.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(Ho.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=As(Ho,ds,cs,this.attribs),this.uniforms=Os(Ho,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=Ho.createBuffer(),this.indexBuffer=Ho.createBuffer(),this.indexCount=0,this.renderTarget=Ho.createTexture(),this.framebuffer=Ho.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=Ho.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=Ho.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=Ho.createRenderbuffer()),this.patch(),this.onResize()}bs.prototype.destroy=function(){var Ho=this.gl;this.unpatch(),Ho.deleteProgram(this.program),Ho.deleteBuffer(this.vertexBuffer),Ho.deleteBuffer(this.indexBuffer),Ho.deleteTexture(this.renderTarget),Ho.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&Ho.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&Ho.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&Ho.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},bs.prototype.onResize=function(){var Ho=this.gl,es=this,ns=[Ho.RENDERBUFFER_BINDING,Ho.TEXTURE_BINDING_2D,Ho.TEXTURE0];Au(Ho,ns,function(os){es.realBindFramebuffer.call(os,os.FRAMEBUFFER,null),es.scissorTest&&es.realDisable.call(os,os.SCISSOR_TEST),es.realColorMask.call(os,!0,!0,!0,!0),es.realViewport.call(os,0,0,os.drawingBufferWidth,os.drawingBufferHeight),es.realClearColor.call(os,0,0,0,1),os.clear(os.COLOR_BUFFER_BIT),es.realBindFramebuffer.call(os,os.FRAMEBUFFER,es.framebuffer),os.bindTexture(os.TEXTURE_2D,es.renderTarget),os.texImage2D(os.TEXTURE_2D,0,es.ctxAttribs.alpha?os.RGBA:os.RGB,es.bufferWidth,es.bufferHeight,0,es.ctxAttribs.alpha?os.RGBA:os.RGB,os.UNSIGNED_BYTE,null),os.texParameteri(os.TEXTURE_2D,os.TEXTURE_MAG_FILTER,os.LINEAR),os.texParameteri(os.TEXTURE_2D,os.TEXTURE_MIN_FILTER,os.LINEAR),os.texParameteri(os.TEXTURE_2D,os.TEXTURE_WRAP_S,os.CLAMP_TO_EDGE),os.texParameteri(os.TEXTURE_2D,os.TEXTURE_WRAP_T,os.CLAMP_TO_EDGE),os.framebufferTexture2D(os.FRAMEBUFFER,os.COLOR_ATTACHMENT0,os.TEXTURE_2D,es.renderTarget,0),es.ctxAttribs.depth&&es.ctxAttribs.stencil?(os.bindRenderbuffer(os.RENDERBUFFER,es.depthStencilBuffer),os.renderbufferStorage(os.RENDERBUFFER,os.DEPTH_STENCIL,es.bufferWidth,es.bufferHeight),os.framebufferRenderbuffer(os.FRAMEBUFFER,os.DEPTH_STENCIL_ATTACHMENT,os.RENDERBUFFER,es.depthStencilBuffer)):es.ctxAttribs.depth?(os.bindRenderbuffer(os.RENDERBUFFER,es.depthBuffer),os.renderbufferStorage(os.RENDERBUFFER,os.DEPTH_COMPONENT16,es.bufferWidth,es.bufferHeight),os.framebufferRenderbuffer(os.FRAMEBUFFER,os.DEPTH_ATTACHMENT,os.RENDERBUFFER,es.depthBuffer)):es.ctxAttribs.stencil&&(os.bindRenderbuffer(os.RENDERBUFFER,es.stencilBuffer),os.renderbufferStorage(os.RENDERBUFFER,os.STENCIL_INDEX8,es.bufferWidth,es.bufferHeight),os.framebufferRenderbuffer(os.FRAMEBUFFER,os.STENCIL_ATTACHMENT,os.RENDERBUFFER,es.stencilBuffer)),!os.checkFramebufferStatus(os.FRAMEBUFFER)===os.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),es.realBindFramebuffer.call(os,os.FRAMEBUFFER,es.lastBoundFramebuffer),es.scissorTest&&es.realEnable.call(os,os.SCISSOR_TEST),es.realColorMask.apply(os,es.colorMask),es.realViewport.apply(os,es.viewport),es.realClearColor.apply(os,es.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},bs.prototype.patch=function(){if(!this.isPatched){var Ho=this,es=this.gl.canvas,ns=this.gl;Zo()||(es.width=rs()*this.bufferScale,es.height=ls()*this.bufferScale,Object.defineProperty(es,"width",{configurable:!0,enumerable:!0,get:function(){return Ho.bufferWidth},set:function(os){Ho.bufferWidth=os,Ho.realCanvasWidth.set.call(es,os),Ho.onResize()}}),Object.defineProperty(es,"height",{configurable:!0,enumerable:!0,get:function(){return Ho.bufferHeight},set:function(os){Ho.bufferHeight=os,Ho.realCanvasHeight.set.call(es,os),Ho.onResize()}})),this.lastBoundFramebuffer=ns.getParameter(ns.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(ns.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(os,ps){Ho.lastBoundFramebuffer=ps||Ho.framebuffer,Ho.realBindFramebuffer.call(ns,os,Ho.lastBoundFramebuffer)},this.cullFace=ns.getParameter(ns.CULL_FACE),this.depthTest=ns.getParameter(ns.DEPTH_TEST),this.blend=ns.getParameter(ns.BLEND),this.scissorTest=ns.getParameter(ns.SCISSOR_TEST),this.stencilTest=ns.getParameter(ns.STENCIL_TEST),ns.enable=function(os){switch(os){case ns.CULL_FACE:Ho.cullFace=!0;break;case ns.DEPTH_TEST:Ho.depthTest=!0;break;case ns.BLEND:Ho.blend=!0;break;case ns.SCISSOR_TEST:Ho.scissorTest=!0;break;case ns.STENCIL_TEST:Ho.stencilTest=!0}Ho.realEnable.call(ns,os)},ns.disable=function(os){switch(os){case ns.CULL_FACE:Ho.cullFace=!1;break;case ns.DEPTH_TEST:Ho.depthTest=!1;break;case ns.BLEND:Ho.blend=!1;break;case ns.SCISSOR_TEST:Ho.scissorTest=!1;break;case ns.STENCIL_TEST:Ho.stencilTest=!1}Ho.realDisable.call(ns,os)},this.colorMask=ns.getParameter(ns.COLOR_WRITEMASK),ns.colorMask=function(os,ps,vs,Ss){Ho.colorMask[0]=os,Ho.colorMask[1]=ps,Ho.colorMask[2]=vs,Ho.colorMask[3]=Ss,Ho.realColorMask.call(ns,os,ps,vs,Ss)},this.clearColor=ns.getParameter(ns.COLOR_CLEAR_VALUE),ns.clearColor=function(os,ps,vs,Ss){Ho.clearColor[0]=os,Ho.clearColor[1]=ps,Ho.clearColor[2]=vs,Ho.clearColor[3]=Ss,Ho.realClearColor.call(ns,os,ps,vs,Ss)},this.viewport=ns.getParameter(ns.VIEWPORT),ns.viewport=function(os,ps,vs,Ss){Ho.viewport[0]=os,Ho.viewport[1]=ps,Ho.viewport[2]=vs,Ho.viewport[3]=Ss,Ho.realViewport.call(ns,os,ps,vs,Ss)},this.isPatched=!0,ks(es)}},bs.prototype.unpatch=function(){if(this.isPatched){var Ho=this.gl,es=this.gl.canvas;Zo()||(Object.defineProperty(es,"width",this.realCanvasWidth),Object.defineProperty(es,"height",this.realCanvasHeight)),es.width=this.bufferWidth,es.height=this.bufferHeight,Ho.bindFramebuffer=this.realBindFramebuffer,Ho.enable=this.realEnable,Ho.disable=this.realDisable,Ho.colorMask=this.realColorMask,Ho.clearColor=this.realClearColor,Ho.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&Ho.bindFramebuffer(Ho.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){ks(es)},1)}},bs.prototype.setTextureBounds=function(Ho,es){Ho||(Ho=[0,0,.5,1]),es||(es=[.5,0,.5,1]),this.viewportOffsetScale[0]=Ho[0],this.viewportOffsetScale[1]=Ho[1],this.viewportOffsetScale[2]=Ho[2],this.viewportOffsetScale[3]=Ho[3],this.viewportOffsetScale[4]=es[0],this.viewportOffsetScale[5]=es[1],this.viewportOffsetScale[6]=es[2],this.viewportOffsetScale[7]=es[3]},bs.prototype.submitFrame=function(){var Ho=this.gl,es=this,ns=[];if(this.dirtySubmitFrameBindings||ns.push(Ho.CURRENT_PROGRAM,Ho.ARRAY_BUFFER_BINDING,Ho.ELEMENT_ARRAY_BUFFER_BINDING,Ho.TEXTURE_BINDING_2D,Ho.TEXTURE0),Au(Ho,ns,function(ps){es.realBindFramebuffer.call(ps,ps.FRAMEBUFFER,null);var vs=0,Ss=0;es.instanceExt&&(vs=ps.getVertexAttrib(es.attribs.position,es.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),Ss=ps.getVertexAttrib(es.attribs.texCoord,es.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),es.cullFace&&es.realDisable.call(ps,ps.CULL_FACE),es.depthTest&&es.realDisable.call(ps,ps.DEPTH_TEST),es.blend&&es.realDisable.call(ps,ps.BLEND),es.scissorTest&&es.realDisable.call(ps,ps.SCISSOR_TEST),es.stencilTest&&es.realDisable.call(ps,ps.STENCIL_TEST),es.realColorMask.call(ps,!0,!0,!0,!0),es.realViewport.call(ps,0,0,ps.drawingBufferWidth,ps.drawingBufferHeight),(es.ctxAttribs.alpha||Zo())&&(es.realClearColor.call(ps,0,0,0,1),ps.clear(ps.COLOR_BUFFER_BIT)),ps.useProgram(es.program),ps.bindBuffer(ps.ELEMENT_ARRAY_BUFFER,es.indexBuffer),ps.bindBuffer(ps.ARRAY_BUFFER,es.vertexBuffer),ps.enableVertexAttribArray(es.attribs.position),ps.enableVertexAttribArray(es.attribs.texCoord),ps.vertexAttribPointer(es.attribs.position,2,ps.FLOAT,!1,20,0),ps.vertexAttribPointer(es.attribs.texCoord,3,ps.FLOAT,!1,20,8),es.instanceExt&&(vs!=0&&es.instanceExt.vertexAttribDivisorANGLE(es.attribs.position,0),Ss!=0&&es.instanceExt.vertexAttribDivisorANGLE(es.attribs.texCoord,0)),ps.activeTexture(ps.TEXTURE0),ps.uniform1i(es.uniforms.diffuse,0),ps.bindTexture(ps.TEXTURE_2D,es.renderTarget),ps.uniform4fv(es.uniforms.viewportOffsetScale,es.viewportOffsetScale),ps.drawElements(ps.TRIANGLES,es.indexCount,ps.UNSIGNED_SHORT,0),es.cardboardUI&&es.cardboardUI.renderNoState(),es.realBindFramebuffer.call(es.gl,ps.FRAMEBUFFER,es.framebuffer),es.ctxAttribs.preserveDrawingBuffer||(es.realClearColor.call(ps,0,0,0,0),ps.clear(ps.COLOR_BUFFER_BIT)),es.dirtySubmitFrameBindings||es.realBindFramebuffer.call(ps,ps.FRAMEBUFFER,es.lastBoundFramebuffer),es.cullFace&&es.realEnable.call(ps,ps.CULL_FACE),es.depthTest&&es.realEnable.call(ps,ps.DEPTH_TEST),es.blend&&es.realEnable.call(ps,ps.BLEND),es.scissorTest&&es.realEnable.call(ps,ps.SCISSOR_TEST),es.stencilTest&&es.realEnable.call(ps,ps.STENCIL_TEST),es.realColorMask.apply(ps,es.colorMask),es.realViewport.apply(ps,es.viewport),!es.ctxAttribs.alpha&&es.ctxAttribs.preserveDrawingBuffer||es.realClearColor.apply(ps,es.clearColor),es.instanceExt&&(vs!=0&&es.instanceExt.vertexAttribDivisorANGLE(es.attribs.position,vs),Ss!=0&&es.instanceExt.vertexAttribDivisorANGLE(es.attribs.texCoord,Ss))}),Zo()){var os=Ho.canvas;os.width==es.bufferWidth&&os.height==es.bufferHeight||(es.bufferWidth=os.width,es.bufferHeight=os.height,es.onResize())}},bs.prototype.updateDeviceInfo=function(Ho){var es=this.gl,ns=this,os=[es.ARRAY_BUFFER_BINDING,es.ELEMENT_ARRAY_BUFFER_BINDING];Au(es,os,function(ps){var vs=ns.computeMeshVertices_(ns.meshWidth,ns.meshHeight,Ho);if(ps.bindBuffer(ps.ARRAY_BUFFER,ns.vertexBuffer),ps.bufferData(ps.ARRAY_BUFFER,vs,ps.STATIC_DRAW),!ns.indexCount){var Ss=ns.computeMeshIndices_(ns.meshWidth,ns.meshHeight);ps.bindBuffer(ps.ELEMENT_ARRAY_BUFFER,ns.indexBuffer),ps.bufferData(ps.ELEMENT_ARRAY_BUFFER,Ss,ps.STATIC_DRAW),ns.indexCount=Ss.length}})},bs.prototype.computeMeshVertices_=function(Ho,es,ns){for(var os=new Float32Array(2*Ho*es*5),ps=ns.getLeftEyeVisibleTanAngles(),vs=ns.getLeftEyeNoLensTanAngles(),Ss=ns.getLeftEyeVisibleScreenRect(vs),js=0,Us=0;Us<2;Us++){for(var Ds=0;Ds<es;Ds++)for(var Is=0;Is<Ho;Is++,js++){var nu=Is/(Ho-1),hu=Ds/(es-1),gu=nu,yu=hu,Mu=qo(ps[0],ps[2],nu),_u=qo(ps[3],ps[1],hu),wu=Math.sqrt(Mu*Mu+_u*_u),Ou=ns.distortion.distortInverse(wu),Fu=_u*Ou/wu;nu=(Mu*Ou/wu-vs[0])/(vs[2]-vs[0]),hu=(Fu-vs[3])/(vs[1]-vs[3]),nu=2*(Ss.x+nu*Ss.width-.5),hu=2*(Ss.y+hu*Ss.height-.5),os[5*js+0]=nu,os[5*js+1]=hu,os[5*js+2]=gu,os[5*js+3]=yu,os[5*js+4]=Us}var Ru=ps[2]-ps[0];ps[0]=-(Ru+ps[0]),ps[2]=Ru-ps[2],Ru=vs[2]-vs[0],vs[0]=-(Ru+vs[0]),vs[2]=Ru-vs[2],Ss.x=1-(Ss.x+Ss.width)}return os},bs.prototype.computeMeshIndices_=function(Ho,es){for(var ns=new Uint16Array(2*(Ho-1)*(es-1)*6),os=Ho/2,ps=es/2,vs=0,Ss=0,js=0;js<2;js++)for(var Us=0;Us<es;Us++)for(var Ds=0;Ds<Ho;Ds++,vs++)Ds!=0&&Us!=0&&(Ds<=os==Us<=ps?(ns[Ss++]=vs,ns[Ss++]=vs-Ho-1,ns[Ss++]=vs-Ho,ns[Ss++]=vs-Ho-1,ns[Ss++]=vs,ns[Ss++]=vs-1):(ns[Ss++]=vs-1,ns[Ss++]=vs-Ho,ns[Ss++]=vs,ns[Ss++]=vs-Ho,ns[Ss++]=vs-1,ns[Ss++]=vs-Ho-1));return ns},bs.prototype.getOwnPropertyDescriptor_=function(Ho,es){var ns=Object.getOwnPropertyDescriptor(Ho,es);return ns.get!==void 0&&ns.set!==void 0||(ns.configurable=!0,ns.enumerable=!0,ns.get=function(){return this.getAttribute(es)},ns.set=function(os){this.setAttribute(es,os)}),ns};var Ls=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Js=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Qs=Math.PI/180,Gs=60,fu=12,ru=20,eu=1,Vs=.75,Hs=.3125,Ys=4,tu=28,ys=1.5;function Xs(Ho){this.gl=Ho,this.attribs={position:0},this.program=As(Ho,Ls,Js,this.attribs),this.uniforms=Os(Ho,this.program),this.vertexBuffer=Ho.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function Ks(Ho){this.coefficients=Ho}Xs.prototype.destroy=function(){var Ho=this.gl;this.listener&&Ho.canvas.removeEventListener("click",this.listener,!1),Ho.deleteProgram(this.program),Ho.deleteBuffer(this.vertexBuffer)},Xs.prototype.listen=function(Ho,es){var ns=this.gl.canvas;this.listener=function(os){var ps=ns.clientWidth/2,vs=tu*ys;os.clientX>ps-vs&&os.clientX<ps+vs&&os.clientY>ns.clientHeight-vs?Ho(os):os.clientX<vs&&os.clientY<vs&&es(os)},ns.addEventListener("click",this.listener,!1)},Xs.prototype.onResize=function(){var Ho=this.gl,es=this,ns=[Ho.ARRAY_BUFFER_BINDING];Au(Ho,ns,function(os){var ps=[],vs=os.drawingBufferWidth/2,Ss=Math.max(screen.width,screen.height)*va.devicePixelRatio,js=os.drawingBufferWidth/Ss*va.devicePixelRatio,Us=Ys*js/2,Ds=tu*ys*js,Is=tu*js/2,nu=(tu*ys-tu)*js;function hu(wu,Ou){var Fu=(90-wu)*Qs,Ru=Math.cos(Fu),Wu=Math.sin(Fu);ps.push(Hs*Ru*Is+vs,Hs*Wu*Is+Is),ps.push(Ou*Ru*Is+vs,Ou*Wu*Is+Is)}ps.push(vs-Us,Ds),ps.push(vs-Us,os.drawingBufferHeight),ps.push(vs+Us,Ds),ps.push(vs+Us,os.drawingBufferHeight),es.gearOffset=ps.length/2;for(var gu=0;gu<=6;gu++){var yu=gu*Gs;hu(yu,eu),hu(yu+fu,eu),hu(yu+ru,Vs),hu(yu+(Gs-ru),Vs),hu(yu+(Gs-fu),eu)}function Mu(wu,Ou){ps.push(nu+wu,os.drawingBufferHeight-nu-Ou)}es.gearVertexCount=ps.length/2-es.gearOffset,es.arrowOffset=ps.length/2;var _u=Us/Math.sin(45*Qs);Mu(0,Is),Mu(Is,0),Mu(Is+_u,_u),Mu(_u,Is+_u),Mu(_u,Is-_u),Mu(0,Is),Mu(Is,2*Is),Mu(Is+_u,2*Is-_u),Mu(_u,Is-_u),Mu(0,Is),Mu(_u,Is-Us),Mu(tu*js,Is-Us),Mu(_u,Is+Us),Mu(tu*js,Is+Us),es.arrowVertexCount=ps.length/2-es.arrowOffset,os.bindBuffer(os.ARRAY_BUFFER,es.vertexBuffer),os.bufferData(os.ARRAY_BUFFER,new Float32Array(ps),os.STATIC_DRAW)})},Xs.prototype.render=function(){var Ho=this.gl,es=this,ns=[Ho.CULL_FACE,Ho.DEPTH_TEST,Ho.BLEND,Ho.SCISSOR_TEST,Ho.STENCIL_TEST,Ho.COLOR_WRITEMASK,Ho.VIEWPORT,Ho.CURRENT_PROGRAM,Ho.ARRAY_BUFFER_BINDING];Au(Ho,ns,function(os){os.disable(os.CULL_FACE),os.disable(os.DEPTH_TEST),os.disable(os.BLEND),os.disable(os.SCISSOR_TEST),os.disable(os.STENCIL_TEST),os.colorMask(!0,!0,!0,!0),os.viewport(0,0,os.drawingBufferWidth,os.drawingBufferHeight),es.renderNoState()})},Xs.prototype.renderNoState=function(){var Ho=this.gl;Ho.useProgram(this.program),Ho.bindBuffer(Ho.ARRAY_BUFFER,this.vertexBuffer),Ho.enableVertexAttribArray(this.attribs.position),Ho.vertexAttribPointer(this.attribs.position,2,Ho.FLOAT,!1,8,0),Ho.uniform4f(this.uniforms.color,1,1,1,1),Es(this.projMat,0,Ho.drawingBufferWidth,0,Ho.drawingBufferHeight,.1,1024),Ho.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),Ho.drawArrays(Ho.TRIANGLE_STRIP,0,4),Ho.drawArrays(Ho.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),Ho.drawArrays(Ho.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},Ks.prototype.distortInverse=function(Ho){for(var es=0,ns=1,os=Ho-this.distort(es);Math.abs(ns-es)>1e-4;){var ps=Ho-this.distort(ns),vs=ns-ps*((ns-es)/(ps-os));es=ns,ns=vs,os=ps}return ns},Ks.prototype.distort=function(Ho){for(var es=Ho*Ho,ns=0,os=0;os<this.coefficients.length;os++)ns=es*(ns+this.coefficients[os]);return(ns+1)*Ho};var du=Math.PI/180,qs=180/Math.PI,uu=function(Ho,es,ns){this.x=Ho||0,this.y=es||0,this.z=ns||0};uu.prototype={constructor:uu,set:function(Ho,es,ns){return this.x=Ho,this.y=es,this.z=ns,this},copy:function(Ho){return this.x=Ho.x,this.y=Ho.y,this.z=Ho.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var Ho=this.length();if(Ho!==0){var es=1/Ho;this.multiplyScalar(es)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(Ho){this.x*=Ho,this.y*=Ho,this.z*=Ho},applyQuaternion:function(Ho){var es=this.x,ns=this.y,os=this.z,ps=Ho.x,vs=Ho.y,Ss=Ho.z,js=Ho.w,Us=js*es+vs*os-Ss*ns,Ds=js*ns+Ss*es-ps*os,Is=js*os+ps*ns-vs*es,nu=-ps*es-vs*ns-Ss*os;return this.x=Us*js+nu*-ps+Ds*-Ss-Is*-vs,this.y=Ds*js+nu*-vs+Is*-ps-Us*-Ss,this.z=Is*js+nu*-Ss+Us*-vs-Ds*-ps,this},dot:function(Ho){return this.x*Ho.x+this.y*Ho.y+this.z*Ho.z},crossVectors:function(Ho,es){var ns=Ho.x,os=Ho.y,ps=Ho.z,vs=es.x,Ss=es.y,js=es.z;return this.x=os*js-ps*Ss,this.y=ps*vs-ns*js,this.z=ns*Ss-os*vs,this}};var xu,Eu,ju,au=function(Ho,es,ns,os){this.x=Ho||0,this.y=es||0,this.z=ns||0,this.w=os!==void 0?os:1};function Lu(Ho){this.width=Ho.width||rs(),this.height=Ho.height||ls(),this.widthMeters=Ho.widthMeters,this.heightMeters=Ho.heightMeters,this.bevelMeters=Ho.bevelMeters}au.prototype={constructor:au,set:function(Ho,es,ns,os){return this.x=Ho,this.y=es,this.z=ns,this.w=os,this},copy:function(Ho){return this.x=Ho.x,this.y=Ho.y,this.z=Ho.z,this.w=Ho.w,this},setFromEulerXYZ:function(Ho,es,ns){var os=Math.cos(Ho/2),ps=Math.cos(es/2),vs=Math.cos(ns/2),Ss=Math.sin(Ho/2),js=Math.sin(es/2),Us=Math.sin(ns/2);return this.x=Ss*ps*vs+os*js*Us,this.y=os*js*vs-Ss*ps*Us,this.z=os*ps*Us+Ss*js*vs,this.w=os*ps*vs-Ss*js*Us,this},setFromEulerYXZ:function(Ho,es,ns){var os=Math.cos(Ho/2),ps=Math.cos(es/2),vs=Math.cos(ns/2),Ss=Math.sin(Ho/2),js=Math.sin(es/2),Us=Math.sin(ns/2);return this.x=Ss*ps*vs+os*js*Us,this.y=os*js*vs-Ss*ps*Us,this.z=os*ps*Us-Ss*js*vs,this.w=os*ps*vs+Ss*js*Us,this},setFromAxisAngle:function(Ho,es){var ns=es/2,os=Math.sin(ns);return this.x=Ho.x*os,this.y=Ho.y*os,this.z=Ho.z*os,this.w=Math.cos(ns),this},multiply:function(Ho){return this.multiplyQuaternions(this,Ho)},multiplyQuaternions:function(Ho,es){var ns=Ho.x,os=Ho.y,ps=Ho.z,vs=Ho.w,Ss=es.x,js=es.y,Us=es.z,Ds=es.w;return this.x=ns*Ds+vs*Ss+os*Us-ps*js,this.y=os*Ds+vs*js+ps*Ss-ns*Us,this.z=ps*Ds+vs*Us+ns*js-os*Ss,this.w=vs*Ds-ns*Ss-os*js-ps*Us,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var Ho=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return Ho===0?(this.x=0,this.y=0,this.z=0,this.w=1):(Ho=1/Ho,this.x=this.x*Ho,this.y=this.y*Ho,this.z=this.z*Ho,this.w=this.w*Ho),this},slerp:function(Ho,es){if(es===0)return this;if(es===1)return this.copy(Ho);var ns=this.x,os=this.y,ps=this.z,vs=this.w,Ss=vs*Ho.w+ns*Ho.x+os*Ho.y+ps*Ho.z;if(Ss<0?(this.w=-Ho.w,this.x=-Ho.x,this.y=-Ho.y,this.z=-Ho.z,Ss=-Ss):this.copy(Ho),Ss>=1)return this.w=vs,this.x=ns,this.y=os,this.z=ps,this;var js=Math.acos(Ss),Us=Math.sqrt(1-Ss*Ss);if(Math.abs(Us)<.001)return this.w=.5*(vs+this.w),this.x=.5*(ns+this.x),this.y=.5*(os+this.y),this.z=.5*(ps+this.z),this;var Ds=Math.sin((1-es)*js)/Us,Is=Math.sin(es*js)/Us;return this.w=vs*Ds+this.w*Is,this.x=ns*Ds+this.x*Is,this.y=os*Ds+this.y*Is,this.z=ps*Ds+this.z*Is,this},setFromUnitVectors:(ju=1e-6,function(Ho,es){return xu===void 0&&(xu=new uu),(Eu=Ho.dot(es)+1)<ju?(Eu=0,Math.abs(Ho.x)>Math.abs(Ho.z)?xu.set(-Ho.y,Ho.x,0):xu.set(0,-Ho.z,Ho.y)):xu.crossVectors(Ho,es),this.x=xu.x,this.y=xu.y,this.z=xu.z,this.w=Eu,this.normalize(),this})};var zu=new Lu({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Pu=new Lu({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),ku={CardboardV1:new Xu({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Xu({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Du(Ho,es){this.viewer=ku.CardboardV2,this.updateDeviceParams(Ho),this.distortion=new Ks(this.viewer.distortionCoefficients);for(var ns=0;ns<es.length;ns++){var os=es[ns];ku[os.id]=new Xu(os)}}function Xu(Ho){this.id=Ho.id,this.label=Ho.label,this.fov=Ho.fov,this.interLensDistance=Ho.interLensDistance,this.baselineLensDistance=Ho.baselineLensDistance,this.screenLensDistance=Ho.screenLensDistance,this.distortionCoefficients=Ho.distortionCoefficients,this.inverseCoefficients=Ho.inverseCoefficients}Du.prototype.updateDeviceParams=function(Ho){this.device=this.determineDevice_(Ho)||this.device},Du.prototype.getDevice=function(){return this.device},Du.prototype.setViewer=function(Ho){this.viewer=Ho,this.distortion=new Ks(this.viewer.distortionCoefficients)},Du.prototype.determineDevice_=function(Ho){if(!Ho)return Zo()?(console.warn("Using fallback iOS device measurements."),Pu):(console.warn("Using fallback Android device measurements."),zu);var es=.0254,ns=es/Ho.xdpi,os=es/Ho.ydpi;return new Lu({widthMeters:ns*rs(),heightMeters:os*ls(),bevelMeters:.001*Ho.bevelMm})},Du.prototype.getDistortedFieldOfViewLeftEye=function(){var Ho=this.viewer,es=this.device,ns=this.distortion,os=Ho.screenLensDistance,ps=(es.widthMeters-Ho.interLensDistance)/2,vs=Ho.interLensDistance/2,Ss=Ho.baselineLensDistance-es.bevelMeters,js=es.heightMeters-Ss,Us=qs*Math.atan(ns.distort(ps/os)),Ds=qs*Math.atan(ns.distort(vs/os)),Is=qs*Math.atan(ns.distort(Ss/os)),nu=qs*Math.atan(ns.distort(js/os));return{leftDegrees:Math.min(Us,Ho.fov),rightDegrees:Math.min(Ds,Ho.fov),downDegrees:Math.min(Is,Ho.fov),upDegrees:Math.min(nu,Ho.fov)}},Du.prototype.getLeftEyeVisibleTanAngles=function(){var Ho=this.viewer,es=this.device,ns=this.distortion,os=Math.tan(-du*Ho.fov),ps=Math.tan(du*Ho.fov),vs=Math.tan(du*Ho.fov),Ss=Math.tan(-du*Ho.fov),js=es.widthMeters/4,Us=es.heightMeters/2,Ds=Ho.baselineLensDistance-es.bevelMeters-Us,Is=Ho.interLensDistance/2-js,nu=-Ds,hu=Ho.screenLensDistance,gu=ns.distort((Is-js)/hu),yu=ns.distort((nu+Us)/hu),Mu=ns.distort((Is+js)/hu),_u=ns.distort((nu-Us)/hu),wu=new Float32Array(4);return wu[0]=Math.max(os,gu),wu[1]=Math.min(ps,yu),wu[2]=Math.min(vs,Mu),wu[3]=Math.max(Ss,_u),wu},Du.prototype.getLeftEyeNoLensTanAngles=function(){var Ho=this.viewer,es=this.device,ns=this.distortion,os=new Float32Array(4),ps=ns.distortInverse(Math.tan(-du*Ho.fov)),vs=ns.distortInverse(Math.tan(du*Ho.fov)),Ss=ns.distortInverse(Math.tan(du*Ho.fov)),js=ns.distortInverse(Math.tan(-du*Ho.fov)),Us=es.widthMeters/4,Ds=es.heightMeters/2,Is=Ho.baselineLensDistance-es.bevelMeters-Ds,nu=Ho.interLensDistance/2-Us,hu=-Is,gu=Ho.screenLensDistance,yu=(nu-Us)/gu,Mu=(hu+Ds)/gu,_u=(nu+Us)/gu,wu=(hu-Ds)/gu;return os[0]=Math.max(ps,yu),os[1]=Math.min(vs,Mu),os[2]=Math.min(Ss,_u),os[3]=Math.max(js,wu),os},Du.prototype.getLeftEyeVisibleScreenRect=function(Ho){var es=this.viewer,ns=this.device,os=es.screenLensDistance,ps=(ns.widthMeters-es.interLensDistance)/2,vs=es.baselineLensDistance-ns.bevelMeters,Ss=(Ho[0]*os+ps)/ns.widthMeters,js=(Ho[1]*os+vs)/ns.heightMeters,Us=(Ho[2]*os+ps)/ns.widthMeters,Ds=(Ho[3]*os+vs)/ns.heightMeters;return{x:Ss,y:Ds,width:Us-Ss,height:js-Ds}},Du.prototype.getFieldOfViewLeftEye=function(Ho){return Ho?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Du.prototype.getFieldOfViewRightEye=function(Ho){var es=this.getFieldOfViewLeftEye(Ho);return{leftDegrees:es.rightDegrees,rightDegrees:es.leftDegrees,upDegrees:es.upDegrees,downDegrees:es.downDegrees}},Du.prototype.getUndistortedFieldOfViewLeftEye=function(){var Ho=this.getUndistortedParams_();return{leftDegrees:qs*Math.atan(Ho.outerDist),rightDegrees:qs*Math.atan(Ho.innerDist),downDegrees:qs*Math.atan(Ho.bottomDist),upDegrees:qs*Math.atan(Ho.topDist)}},Du.prototype.getUndistortedViewportLeftEye=function(){var Ho=this.getUndistortedParams_(),es=this.viewer,ns=this.device,os=es.screenLensDistance,ps=ns.widthMeters/os,vs=ns.heightMeters/os,Ss=ns.width/ps,js=ns.height/vs,Us=Math.round((Ho.eyePosX-Ho.outerDist)*Ss),Ds=Math.round((Ho.eyePosY-Ho.bottomDist)*js);return{x:Us,y:Ds,width:Math.round((Ho.eyePosX+Ho.innerDist)*Ss)-Us,height:Math.round((Ho.eyePosY+Ho.topDist)*js)-Ds}},Du.prototype.getUndistortedParams_=function(){var Ho=this.viewer,es=this.device,ns=this.distortion,os=Ho.screenLensDistance,ps=Ho.interLensDistance/2/os,vs=es.widthMeters/os,Ss=es.heightMeters/os,js=vs/2-ps,Us=(Ho.baselineLensDistance-es.bevelMeters)/os,Ds=Ho.fov,Is=ns.distortInverse(Math.tan(du*Ds)),nu=Math.min(js,Is),hu=Math.min(ps,Is),gu=Math.min(Us,Is);return{outerDist:nu,innerDist:hu,topDist:Math.min(Ss-Us,Is),bottomDist:gu,eyePosX:js,eyePosY:Us}},Du.Viewers=ku;var fs={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Ns(Ho,es){if(this.dpdb=fs,this.recalculateDeviceParams_(),Ho){this.onDeviceParamsUpdated=es;var ns=new XMLHttpRequest,os=this;ns.open("GET",Ho,!0),ns.addEventListener("load",function(){os.loading=!1,ns.status>=200&&ns.status<=299?(os.dpdb=JSON.parse(ns.response),os.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),ns.send()}}function Ts(Ho){this.xdpi=Ho.xdpi,this.ydpi=Ho.ydpi,this.bevelMm=Ho.bevelMm}function Ps(Ho,es){this.set(Ho,es)}function Ws(Ho,es){this.kFilter=Ho,this.isDebug=es,this.currentAccelMeasurement=new Ps,this.currentGyroMeasurement=new Ps,this.previousGyroMeasurement=new Ps,Zo()?this.filterQ=new au(-1,0,0,1):this.filterQ=new au(1,0,0,1),this.previousFilterQ=new au,this.previousFilterQ.copy(this.filterQ),this.accelQ=new au,this.isOrientationInitialized=!1,this.estimatedGravity=new uu,this.measuredGravity=new uu,this.gyroIntegralQ=new au}function vu(Ho,es){this.predictionTimeS=Ho,this.isDebug=es,this.previousQ=new au,this.previousTimestampS=null,this.deltaQ=new au,this.outQ=new au}function iu(Ho,es,ns,os){this.yawOnly=ns,this.accelerometer=new uu,this.gyroscope=new uu,this.filter=new Ws(Ho,os),this.posePredictor=new vu(es,os),this.isFirefoxAndroid=Go(),this.isIOS=Zo();var ps=Vo();this.isDeviceMotionInRadians=!this.isIOS&&ps&&ps<66,this.isWithoutDeviceMotion=Yo()||Wo(),this.filterToWorldQ=new au,Zo()?this.filterToWorldQ.setFromAxisAngle(new uu(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new uu(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new au,this.worldToScreenQ=new au,this.originalPoseAdjustQ=new au,this.originalPoseAdjustQ.setFromAxisAngle(new uu(0,0,1),-va.orientation*Math.PI/180),this.setScreenTransform_(),ts()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new au,this.orientationOut_=new Float32Array(4),this.start()}Ns.prototype.getDeviceParams=function(){return this.deviceParams},Ns.prototype.recalculateDeviceParams_=function(){var Ho=this.calcDeviceParams_();Ho?(this.deviceParams=Ho,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Ns.prototype.calcDeviceParams_=function(){var Ho=this.dpdb;if(!Ho)return console.error("DPDB not available."),null;if(Ho.format!=1)return console.error("DPDB has unexpected format version."),null;if(!Ho.devices||!Ho.devices.length)return console.error("DPDB does not have a devices section."),null;var es=_o.userAgent||_o.vendor||va.opera,ns=rs(),os=ls();if(!Ho.devices)return console.error("DPDB has no devices section."),null;for(var ps=0;ps<Ho.devices.length;ps++){var vs=Ho.devices[ps];if(vs.rules)if(vs.type=="ios"||vs.type=="android"){if(Zo()==(vs.type=="ios")){for(var Ss=!1,js=0;js<vs.rules.length;js++){var Us=vs.rules[js];if(this.ruleMatches_(Us,es,ns,os)){Ss=!0;break}}if(Ss)return new Ts({xdpi:vs.dpi[0]||vs.dpi,ydpi:vs.dpi[1]||vs.dpi,bevelMm:vs.bw})}}else console.warn("Device["+ps+"] has invalid type.");else console.warn("Device["+ps+"] has no rules section.")}return console.warn("No DPDB device match."),null},Ns.prototype.ruleMatches_=function(Ho,es,ns,os){if(!Ho.ua&&!Ho.res||(Ho.ua&&Ho.ua.substring(0,2)==="SM"&&(Ho.ua=Ho.ua.substring(0,7)),Ho.ua&&es.indexOf(Ho.ua)<0))return!1;if(Ho.res){if(!Ho.res[0]||!Ho.res[1])return!1;var ps=Ho.res[0],vs=Ho.res[1];if(Math.min(ns,os)!=Math.min(ps,vs)||Math.max(ns,os)!=Math.max(ps,vs))return!1}return!0},Ps.prototype.set=function(Ho,es){this.sample=Ho,this.timestampS=es},Ps.prototype.copy=function(Ho){this.set(Ho.sample,Ho.timestampS)},Ws.prototype.addAccelMeasurement=function(Ho,es){this.currentAccelMeasurement.set(Ho,es)},Ws.prototype.addGyroMeasurement=function(Ho,es){this.currentGyroMeasurement.set(Ho,es);var ns=es-this.previousGyroMeasurement.timestampS;Jo(ns)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Ws.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var Ho=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,es=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,Ho);this.gyroIntegralQ.multiply(es),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(es);var ns=new au;ns.copy(this.filterQ),ns.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(ns),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var os=new au;os.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),os.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",qs*Bs(os),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var ps=new au;ps.copy(this.filterQ),ps.multiply(os),this.filterQ.slerp(ps,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Ws.prototype.getOrientation=function(){return this.filterQ},Ws.prototype.accelToQuaternion_=function(Ho){var es=new uu;es.copy(Ho),es.normalize();var ns=new au;return ns.setFromUnitVectors(new uu(0,0,-1),es),ns.inverse(),ns},Ws.prototype.gyroToQuaternionDelta_=function(Ho,es){var ns=new au,os=new uu;return os.copy(Ho),os.normalize(),ns.setFromAxisAngle(os,Ho.length()*es),ns},vu.prototype.getPrediction=function(Ho,es,ns){if(!this.previousTimestampS)return this.previousQ.copy(Ho),this.previousTimestampS=ns,Ho;var os=new uu;os.copy(es),os.normalize();var ps=es.length();if(ps<20*du)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(qs*ps).toFixed(1)),this.outQ.copy(Ho),this.previousQ.copy(Ho),this.outQ;var vs=ps*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(os,vs),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(Ho),this.previousTimestampS=ns,this.outQ},iu.prototype.getPosition=function(){return null},iu.prototype.getOrientation=function(){var Ho=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var ps=new au().setFromAxisAngle(new uu(0,0,-1),0),vs=new au;return va.orientation===-90?vs.setFromAxisAngle(new uu(0,1,0),Math.PI/-2):vs.setFromAxisAngle(new uu(0,1,0),Math.PI/2),ps.multiply(vs)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((es=new au).setFromAxisAngle(new uu(1,0,0),-Math.PI/2),es),Ho=this._deviceOrientationQ,(ns=new au).copy(Ho),ns.multiply(this.deviceOrientationFilterToWorldQ),ns.multiply(this.resetQ),ns.multiply(this.worldToScreenQ),ns.multiplyQuaternions(this.deviceOrientationFixQ,ns),this.yawOnly&&(ns.x=0,ns.z=0,ns.normalize()),this.orientationOut_[0]=ns.x,this.orientationOut_[1]=ns.y,this.orientationOut_[2]=ns.z,this.orientationOut_[3]=ns.w,this.orientationOut_;var es,ns,os=this.filter.getOrientation();return Ho=this.posePredictor.getPrediction(os,this.gyroscope,this.previousTimestampS),(ns=new au).copy(this.filterToWorldQ),ns.multiply(this.resetQ),ns.multiply(Ho),ns.multiply(this.worldToScreenQ),this.yawOnly&&(ns.x=0,ns.z=0,ns.normalize()),this.orientationOut_[0]=ns.x,this.orientationOut_[1]=ns.y,this.orientationOut_[2]=ns.z,this.orientationOut_[3]=ns.w,this.orientationOut_},iu.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ts()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},iu.prototype.onDeviceOrientation_=function(Ho){this._deviceOrientationQ=this._deviceOrientationQ||new au;var es=Ho.alpha,ns=Ho.beta,os=Ho.gamma;es=(es||0)*Math.PI/180,ns=(ns||0)*Math.PI/180,os=(os||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(ns,es,-os)},iu.prototype.onDeviceMotion_=function(Ho){this.updateDeviceMotion_(Ho)},iu.prototype.updateDeviceMotion_=function(Ho){var es=Ho.accelerationIncludingGravity,ns=Ho.rotationRate,os=Ho.timeStamp/1e3,ps=os-this.previousTimestampS;return ps<0?(Fs("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=os)):ps<=ko||ps>Uo?(Fs("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=os)):(this.accelerometer.set(-es.x,-es.y,-es.z),ns&&(Ko()?this.gyroscope.set(-ns.beta,ns.alpha,ns.gamma):this.gyroscope.set(ns.alpha,ns.beta,ns.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,os)),this.filter.addAccelMeasurement(this.accelerometer,os),void(this.previousTimestampS=os))},iu.prototype.onOrientationChange_=function(Ho){this.setScreenTransform_()},iu.prototype.onMessage_=function(Ho){var es=Ho.data;es&&es.type&&es.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(es.deviceMotionEvent)},iu.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),va.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new uu(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new uu(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},iu.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),Zo()&&Cs()&&va.addEventListener("message",this.onMessageCallback_),va.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?va.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):va.addEventListener("devicemotion",this.onDeviceMotionCallback_)},iu.prototype.stop=function(){va.removeEventListener("devicemotion",this.onDeviceMotionCallback_),va.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),va.removeEventListener("orientationchange",this.onOrientationChangeCallback_),va.removeEventListener("message",this.onMessageCallback_)};var ou=60,pu=new uu(1,0,0),mu=new uu(0,0,1),Tu=new au;Tu.setFromAxisAngle(pu,-Math.PI/2),Tu.multiply(new au().setFromAxisAngle(mu,Math.PI/2));var as=function(){function Ho(es){Io(this,Ho),this.config=es,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new au,this._outQ=new au,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return Po(Ho,[{key:"init",value:function(){var es=null;try{(es=new RelativeOrientationSensor({frequency:ou,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(ns){this.errors.push(ns),ns.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):ns.name==="ReferenceError"?this.useDeviceMotion():console.error(ns)}es&&(this.api="sensor",this.sensor=es,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new iu(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var es=this.sensor.quaternion;this._sensorQ.set(es[0],es[1],es[2],es[3]);var ns=this._outQ;return ns.copy(Tu),ns.multiply(this._sensorQ),this.config.YAW_ONLY&&(ns.x=ns.z=0,ns.normalize()),this._out[0]=ns.x,this._out[1]=ns.y,this._out[2]=ns.z,this._out[3]=ns.w,this._out}},{key:"_onSensorError",value:function(es){this.errors.push(es.error),es.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):es.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(es.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),Ho}(),hs="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function gs(){this.loadIcon_();var Ho=document.createElement("div");(vs=Ho.style).position="fixed",vs.top=0,vs.right=0,vs.bottom=0,vs.left=0,vs.backgroundColor="gray",vs.fontFamily="sans-serif",vs.zIndex=1e6;var es=document.createElement("img");es.src=this.icon,(vs=es.style).marginLeft="25%",vs.marginTop="25%",vs.width="50%",Ho.appendChild(es);var ns=document.createElement("div");(vs=ns.style).textAlign="center",vs.fontSize="16px",vs.lineHeight="24px",vs.margin="24px 25%",vs.width="50%",ns.innerHTML="Place your phone into your Cardboard viewer.",Ho.appendChild(ns);var os=document.createElement("div");(vs=os.style).backgroundColor="#CFD8DC",vs.position="fixed",vs.bottom=0,vs.width="100%",vs.height="48px",vs.padding="14px 24px",vs.boxSizing="border-box",vs.color="#656A6B",Ho.appendChild(os);var ps=document.createElement("div");ps.style.float="left",ps.innerHTML="No Cardboard viewer?";var vs,Ss=document.createElement("a");Ss.href="https://www.google.com/get/cardboard/get-cardboard/",Ss.innerHTML="get one",Ss.target="_blank",(vs=Ss.style).float="right",vs.fontWeight=600,vs.textTransform="uppercase",vs.borderLeft="1px solid gray",vs.paddingLeft="24px",vs.textDecoration="none",vs.color="#656A6B",os.appendChild(ps),os.appendChild(Ss),this.overlay=Ho,this.text=ns,this.hide()}gs.prototype.show=function(Ho){Ho||this.overlay.parentElement?Ho&&(this.overlay.parentElement&&this.overlay.parentElement!=Ho&&this.overlay.parentElement.removeChild(this.overlay),Ho.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var es=this.overlay.querySelector("img").style;ts()?(es.width="20%",es.marginLeft="40%",es.marginTop="3%"):(es.width="50%",es.marginLeft="25%",es.marginTop="25%")},gs.prototype.hide=function(){this.overlay.style.display="none"},gs.prototype.showTemporarily=function(Ho,es){this.show(es),this.timer=setTimeout(this.hide.bind(this),Ho)},gs.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},gs.prototype.update=function(){this.disableShowTemporarily(),!ts()&&Ms()?this.show():this.hide()},gs.prototype.loadIcon_=function(){this.icon=Qo("image/svg+xml",hs)};var _s="CardboardV1",Rs="WEBVR_CARDBOARD_VIEWER",cu="webvr-polyfill-viewer-selector";function lu(Ho){try{this.selectedKey=localStorage.getItem(Rs)}catch(es){console.error("Failed to load viewer profile: %s",es)}this.selectedKey||(this.selectedKey=Ho||_s),this.dialog=this.createDialog_(Du.Viewers),this.root=null,this.onChangeCallbacks_=[]}function Iu(Ho){return Ho&&Ho.__esModule&&Object.prototype.hasOwnProperty.call(Ho,"default")?Ho.default:Ho}function su(Ho,es){return Ho(es={exports:{}},es.exports),es.exports}lu.prototype.show=function(Ho){this.root=Ho,Ho.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},lu.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},lu.prototype.getCurrentViewer=function(){return Du.Viewers[this.selectedKey]},lu.prototype.getSelectedKey_=function(){var Ho=this.dialog.querySelector("input[name=field]:checked");return Ho?Ho.id:null},lu.prototype.onChange=function(Ho){this.onChangeCallbacks_.push(Ho)},lu.prototype.fireOnChange_=function(Ho){for(var es=0;es<this.onChangeCallbacks_.length;es++)this.onChangeCallbacks_[es](Ho)},lu.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Du.Viewers[this.selectedKey]){this.fireOnChange_(Du.Viewers[this.selectedKey]);try{localStorage.setItem(Rs,this.selectedKey)}catch(Ho){console.error("Failed to save viewer profile: %s",Ho)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},lu.prototype.createDialog_=function(Ho){var es=document.createElement("div");es.classList.add(cu),es.style.display="none";var ns=document.createElement("div");(vs=ns.style).position="fixed",vs.left=0,vs.top=0,vs.width="100%",vs.height="100%",vs.background="rgba(0, 0, 0, 0.3)",ns.addEventListener("click",this.hide.bind(this));var os=280,ps=document.createElement("div"),vs=ps.style;for(var Ss in vs.boxSizing="border-box",vs.position="fixed",vs.top="24px",vs.left="50%",vs.marginLeft=-os/2+"px",vs.width=os+"px",vs.padding="24px",vs.overflow="hidden",vs.background="#fafafa",vs.fontFamily="'Roboto', sans-serif",vs.boxShadow="0px 5px 20px #666",ps.appendChild(this.createH1_("Select your viewer")),Ho)ps.appendChild(this.createChoice_(Ss,Ho[Ss].label));return ps.appendChild(this.createButton_("Save",this.onSave_.bind(this))),es.appendChild(ns),es.appendChild(ps),es},lu.prototype.createH1_=function(Ho){var es=document.createElement("h1"),ns=es.style;return ns.color="black",ns.fontSize="20px",ns.fontWeight="bold",ns.marginTop=0,ns.marginBottom="24px",es.innerHTML=Ho,es},lu.prototype.createChoice_=function(Ho,es){var ns=document.createElement("div");ns.style.marginTop="8px",ns.style.color="black";var os=document.createElement("input");os.style.fontSize="30px",os.setAttribute("id",Ho),os.setAttribute("type","radio"),os.setAttribute("value",Ho),os.setAttribute("name","field");var ps=document.createElement("label");return ps.style.marginLeft="4px",ps.setAttribute("for",Ho),ps.innerHTML=es,ns.appendChild(os),ns.appendChild(ps),ns},lu.prototype.createButton_=function(Ho,es){var ns=document.createElement("button");ns.innerHTML=Ho;var os=ns.style;return os.float="right",os.textTransform="uppercase",os.color="#1094f7",os.fontSize="14px",os.letterSpacing=0,os.border=0,os.background="none",os.marginTop="16px",ns.addEventListener("click",es),ns};var Cu=Iu(su(function(Ho,es){(function(ns,os){Ho.exports=os()})(0,function(){return function(ns){var os={};function ps(vs){if(os[vs])return os[vs].exports;var Ss=os[vs]={i:vs,l:!1,exports:{}};return ns[vs].call(Ss.exports,Ss,Ss.exports,ps),Ss.l=!0,Ss.exports}return ps.m=ns,ps.c=os,ps.d=function(vs,Ss,js){ps.o(vs,Ss)||Object.defineProperty(vs,Ss,{configurable:!1,enumerable:!0,get:js})},ps.n=function(vs){var Ss=vs&&vs.__esModule?function(){return vs.default}:function(){return vs};return ps.d(Ss,"a",Ss),Ss},ps.o=function(vs,Ss){return Object.prototype.hasOwnProperty.call(vs,Ss)},ps.p="",ps(ps.s=0)}([function(ns,os,ps){var vs=function(){function Is(nu,hu){for(var gu=0;gu<hu.length;gu++){var yu=hu[gu];yu.enumerable=yu.enumerable||!1,yu.configurable=!0,"value"in yu&&(yu.writable=!0),Object.defineProperty(nu,yu.key,yu)}}return function(nu,hu,gu){return hu&&Is(nu.prototype,hu),gu&&Is(nu,gu),nu}}();function Ss(Is,nu){if(!(Is instanceof nu))throw new TypeError("Cannot call a class as a function")}var js=ps(1),Us=_o!==void 0&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(_o.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!va.MSStream,Ds=function(){function Is(){Ss(this,Is),Us?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",js),this.noSleepVideo.addEventListener("timeupdate",function(nu){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return vs(Is,[{key:"enable",value:function(){Us?(this.disable(),this.noSleepTimer=va.setInterval(function(){va.location.href="/",va.setTimeout(va.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){Us?this.noSleepTimer&&(va.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),Is}();ns.exports=Ds},function(ns,os,ps){ns.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})})),Qu=1e3,Zu=[0,0,.5,1],tl=[.5,0,.5,1],Ju=va.requestAnimationFrame,dl=va.cancelAnimationFrame;function pl(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Ku(Ho){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:Ho.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:Ho.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:Ho.canPresent},maxLayers:{writable:!1,enumerable:!0,value:Ho.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Zs("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),Ho.hasOrientation}}})}function Su(Ho){var es=!("wakelock"in(Ho=Ho||{}))||Ho.wakelock;this.isPolyfilled=!0,this.displayId=Qu++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return Zs("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Ku({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,es&&Ms()&&(this.wakelock_=new Cu)}Su.prototype.getFrameData=function(Ho){return zs(Ho,this._getPose(),this)},Su.prototype.getPose=function(){return Zs("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Su.prototype.resetPose=function(){return Zs("VRDisplay.prototype.resetPose"),this._resetPose()},Su.prototype.getImmediatePose=function(){return Zs("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Su.prototype.requestAnimationFrame=function(Ho){return Ju(Ho)},Su.prototype.cancelAnimationFrame=function(Ho){return dl(Ho)},Su.prototype.wrapForFullscreen=function(Ho){if(Zo())return Ho;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var es=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",es.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==Ho)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=Ho,this.originalParent_=Ho.parentElement,this.originalParent_||document.body.appendChild(Ho),!this.fullscreenWrapper_.parentElement){var ns=this.fullscreenElement_.parentElement;ns.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),ns.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var os=this;function ps(){if(os.fullscreenElement_){var vs=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];os.fullscreenElement_.setAttribute("style",vs.join("; ")+";")}}return ps(),this.fullscreenWrapper_},Su.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var Ho=this.fullscreenElement_;this.fullscreenElementCachedStyle_?Ho.setAttribute("style",this.fullscreenElementCachedStyle_):Ho.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var es=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(Ho),this.originalParent_===es?es.insertBefore(Ho,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(Ho),es.removeChild(this.fullscreenWrapper_),Ho}},Su.prototype.requestPresent=function(Ho){var es=this.isPresenting,ns=this;return Ho instanceof Array||(Zs("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),Ho=[Ho]),new Promise(function(os,ps){if(ns.capabilities.canPresent)if(Ho.length==0||Ho.length>ns.capabilities.maxLayers)ps(new Error("Invalid number of layers."));else{var vs=Ho[0];if(vs.source){var Ss=vs.leftBounds||Zu,js=vs.rightBounds||tl;if(es){var Us=ns.layer_;Us.source!==vs.source&&(Us.source=vs.source);for(var Ds=0;Ds<4;Ds++)Us.leftBounds[Ds]=Ss[Ds],Us.rightBounds[Ds]=js[Ds];return ns.wrapForFullscreen(ns.layer_.source),ns.updatePresent_(),void os()}if(ns.layer_={predistorted:vs.predistorted,source:vs.source,leftBounds:Ss.slice(0),rightBounds:js.slice(0)},ns.waitingForPresent_=!1,ns.layer_&&ns.layer_.source){var Is=ns.wrapForFullscreen(ns.layer_.source),nu=function(){var gu=ms();ns.isPresenting=Is===gu,ns.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(yu){console.error("screen.orientation.lock() failed due to",yu.message)}),ns.waitingForPresent_=!1,ns.beginPresent_(),os()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),ns.removeFullscreenWrapper(),ns.disableWakeLock(),ns.endPresent_(),ns.removeFullscreenListeners_()),ns.fireVRDisplayPresentChange_()},hu=function(){ns.waitingForPresent_&&(ns.removeFullscreenWrapper(),ns.removeFullscreenListeners_(),ns.disableWakeLock(),ns.waitingForPresent_=!1,ns.isPresenting=!1,ps(new Error("Unable to present.")))};ns.addFullscreenListeners_(Is,nu,hu),ss(Is)?(ns.enableWakeLock(),ns.waitingForPresent_=!0):(Zo()||Xo())&&(ns.enableWakeLock(),ns.isPresenting=!0,ns.beginPresent_(),ns.fireVRDisplayPresentChange_(),os())}ns.waitingForPresent_||Zo()||(us(),ps(new Error("Unable to present.")))}else os()}else ps(new Error("VRDisplay is not capable of presenting."))})},Su.prototype.exitPresent=function(){var Ho=this.isPresenting,es=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(ns,os){Ho?(!us()&&Zo()&&(es.endPresent_(),es.fireVRDisplayPresentChange_()),Xo()&&(es.removeFullscreenWrapper(),es.removeFullscreenListeners_(),es.endPresent_(),es.fireVRDisplayPresentChange_()),ns()):os(new Error("Was not presenting to VRDisplay."))})},Su.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Su.prototype.fireVRDisplayPresentChange_=function(){var Ho=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});va.dispatchEvent(Ho)},Su.prototype.fireVRDisplayConnect_=function(){var Ho=new CustomEvent("vrdisplayconnect",{detail:{display:this}});va.dispatchEvent(Ho)},Su.prototype.addFullscreenListeners_=function(Ho,es,ns){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=Ho,this.fullscreenChangeHandler_=es,this.fullscreenErrorHandler_=ns,es&&(document.fullscreenEnabled?Ho.addEventListener("fullscreenchange",es,!1):document.webkitFullscreenEnabled?Ho.addEventListener("webkitfullscreenchange",es,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",es,!1):document.msFullscreenEnabled&&Ho.addEventListener("msfullscreenchange",es,!1)),ns&&(document.fullscreenEnabled?Ho.addEventListener("fullscreenerror",ns,!1):document.webkitFullscreenEnabled?Ho.addEventListener("webkitfullscreenerror",ns,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",ns,!1):document.msFullscreenEnabled&&Ho.addEventListener("msfullscreenerror",ns,!1))},Su.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var Ho=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var es=this.fullscreenChangeHandler_;Ho.removeEventListener("fullscreenchange",es,!1),Ho.removeEventListener("webkitfullscreenchange",es,!1),document.removeEventListener("mozfullscreenchange",es,!1),Ho.removeEventListener("msfullscreenchange",es,!1)}if(this.fullscreenErrorHandler_){var ns=this.fullscreenErrorHandler_;Ho.removeEventListener("fullscreenerror",ns,!1),Ho.removeEventListener("webkitfullscreenerror",ns,!1),document.removeEventListener("mozfullscreenerror",ns,!1),Ho.removeEventListener("msfullscreenerror",ns,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Su.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Su.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Su.prototype.beginPresent_=function(){},Su.prototype.endPresent_=function(){},Su.prototype.submitFrame=function(Ho){},Su.prototype.getEyeParameters=function(Ho){return null};var Hu={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Nu={LEFT:"left",RIGHT:"right"};function $u(Ho){var es=$s({},Hu);Ho=$s(es,Ho||{}),Su.call(this,{wakelock:Ho.MOBILE_WAKE_LOCK}),this.config=Ho,this.displayName="Cardboard VRDisplay",this.capabilities=new Ku({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new as(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Ns(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Du(this.dpdb_.getDeviceParams(),Ho.ADDITIONAL_VIEWERS),this.viewerSelector_=new lu(Ho.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new gs),Zo()&&va.addEventListener("resize",this.onResize_.bind(this))}return $u.prototype=Object.create(Su.prototype),$u.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},$u.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},$u.prototype._getFieldOfView=function(Ho){var es;if(Ho==Nu.LEFT)es=this.deviceInfo_.getFieldOfViewLeftEye();else{if(Ho!=Nu.RIGHT)return console.error("Invalid eye provided: %s",Ho),null;es=this.deviceInfo_.getFieldOfViewRightEye()}return es},$u.prototype._getEyeOffset=function(Ho){var es;if(Ho==Nu.LEFT)es=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(Ho!=Nu.RIGHT)return console.error("Invalid eye provided: %s",Ho),null;es=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return es},$u.prototype.getEyeParameters=function(Ho){var es=this._getEyeOffset(Ho),ns=this._getFieldOfView(Ho),os={offset:es,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(os,"fieldOfView",{enumerable:!0,get:function(){return Zs("VRFieldOfView","VRFrameData's projection matrices"),ns}}),os},$u.prototype.onDeviceParamsUpdated_=function(Ho){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(Ho),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},$u.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},$u.prototype.beginPresent_=function(){var Ho=this.layer_.source.getContext("webgl");Ho||(Ho=this.layer_.source.getContext("experimental-webgl")),Ho||(Ho=this.layer_.source.getContext("webgl2")),Ho&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(Ho.canvas.width=rs()*this.bufferScale_,Ho.canvas.height=ls()*this.bufferScale_,this.cardboardUI_=new Xs(Ho)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Xs(Ho)),this.distorter_=new bs(Ho,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(es){this.viewerSelector_.show(this.layer_.source.parentElement),es.stopPropagation(),es.preventDefault()}.bind(this),function(es){this.exitPresent(),es.stopPropagation(),es.preventDefault()}.bind(this)),this.rotateInstructions_&&(ts()&&Ms()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),va.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),va.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},$u.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),va.removeEventListener("orientationchange",this.orientationHandler),va.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},$u.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},$u.prototype.submitFrame=function(Ho){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var es=this.layer_.source.getContext("webgl");es||(es=this.layer_.source.getContext("experimental-webgl")),es||(es=this.layer_.source.getContext("webgl2"));var ns=es.canvas;ns.width==this.lastWidth&&ns.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=ns.width,this.lastHeight=ns.height,this.cardboardUI_.render()}},$u.prototype.onOrientationChange_=function(Ho){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},$u.prototype.onResize_=function(Ho){if(this.layer_){var es=this.layer_.source.getContext("webgl");es||(es=this.layer_.source.getContext("experimental-webgl")),es||(es=this.layer_.source.getContext("webgl2"));var ns=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];es.canvas.setAttribute("style",ns.join("; ")+";"),ks(es.canvas)}},$u.prototype.onViewerChanged_=function(Ho){this.deviceInfo_.setViewer(Ho),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},$u.prototype.fireVRDisplayDeviceParamsChange_=function(){var Ho=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});va.dispatchEvent(Ho)},$u.VRFrameData=pl,$u.VRDisplay=Su,$u})})),Do="0.10.12",No={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Oo(Ro){this.config=So(So({},No),Ro),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in _o,this.native={},this.native.getVRDisplays=_o.getVRDisplays,this.native.VRFrameData=va.VRFrameData,this.native.VRDisplay=va.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&Eo())&&(this.enable(),this.getVRDisplays().then(function(jo){jo&&jo[0]&&jo[0].fireVRDisplayConnect_&&jo[0].fireVRDisplayConnect_()}))}Oo.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(Eo()){var Ro=new $o({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(Ro)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},Oo.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var Ro=this.native.VRFrameData,jo=new this.native.VRFrameData,zo=this.native.VRDisplay.prototype.getFrameData;va.VRDisplay.prototype.getFrameData=function(Io){Io instanceof Ro?zo.call(this,Io):(zo.call(this,jo),Io.pose=jo.pose,To(jo.leftProjectionMatrix,Io.leftProjectionMatrix),To(jo.rightProjectionMatrix,Io.rightProjectionMatrix),To(jo.leftViewMatrix,Io.leftViewMatrix),To(jo.rightViewMatrix,Io.rightViewMatrix))}}_o.getVRDisplays=this.getVRDisplays.bind(this),va.VRDisplay=$o.VRDisplay,va.VRFrameData=$o.VRFrameData},Oo.prototype.getVRDisplays=function(){var Ro=this;return this.config,this.hasNative?this.native.getVRDisplays.call(_o).then(function(jo){return jo.length>0?jo:Ro.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},Oo.version=Do,Oo.VRFrameData=$o.VRFrameData,Oo.VRDisplay=$o.VRDisplay;var Lo=Object.freeze({default:Oo}),Co=Lo&&Oo||Lo;return xo!==void 0&&xo.window&&(xo.document||(xo.document=xo.window.document),xo.navigator||(xo.navigator=xo.window.navigator)),Co}(typeof window!="undefined"?window:{screen:{width:512,height:512}},typeof navigator!="undefined"?navigator:{userAgent:"node"});function Lr(va,_o){var xo,bo,wo,Eo,To=new r$3.Vector3,So=new r$3.Vector3,$o=null;"VRFrameData"in window&&($o=new window.VRFrameData),typeof navigator!="undefined"&&navigator.getVRDisplays&&navigator.getVRDisplays().then(function(ko){bo=ko,ko.length>0?xo=ko[0]:_o&&_o(new Error("HMD not available"))}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var Do=this,No=va.getSize(new r$3.Vector2),Oo=!1,Lo=va.getPixelRatio();this.getVRDisplay=function(){return xo},this.setVRDisplay=function(ko){xo=ko},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),bo},this.setSize=function(ko,Uo,Qo){if(No=new r$3.Vector2(ko,Uo),Oo=Qo,Do.isPresenting){var qo=xo.getEyeParameters("left");va.setPixelRatio(1),va.setSize(2*qo.renderWidth,qo.renderHeight,!1)}else va.setPixelRatio(Lo),va.setSize(ko,Uo,Qo)};var Co=va.domElement,Ro=[0,0,.5,1],jo=[.5,0,.5,1];function zo(){var ko=Do.isPresenting;if(Do.isPresenting=xo!==void 0&&xo.isPresenting,Do.isPresenting){var Uo=xo.getEyeParameters("left"),Qo=Uo.renderWidth,qo=Uo.renderHeight;ko||(Lo=va.getPixelRatio(),No=va.getSize(new r$3.Vector2),va.setPixelRatio(1),va.setSize(2*Qo,qo,!1))}else ko&&(va.setPixelRatio(Lo),va.setSize(No.width,No.height,Oo))}window.addEventListener("vrdisplaypresentchange",zo,!1),this.setFullScreen=function(ko){return new Promise(function(Uo,Qo){xo!==void 0?Do.isPresenting!==ko?ko?(xo.requestPresent([{source:Co}]),Uo()):(xo.exitPresent(),Uo()):Uo():Qo(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(ko){return xo!==void 0?xo.requestAnimationFrame(ko):window.requestAnimationFrame(ko)},this.cancelAnimationFrame=function(ko){xo!==void 0?xo.cancelAnimationFrame(ko):window.cancelAnimationFrame(ko)},this.submitFrame=function(){xo!==void 0&&Do.isPresenting&&xo.submitFrame()},this.autoSubmitFrame=!0;var Io=new r$3.PerspectiveCamera;Io.layers.enable(1);var Po=new r$3.PerspectiveCamera;function Bo(ko,Uo,Qo,qo){var Zo=Math.PI/180;return function(Xo,Fo,Go,Vo){Go=Go===void 0?.01:Go,Vo=Vo===void 0?1e4:Vo;var Wo=(Fo=Fo===void 0||Fo)?-1:1,Yo=new r$3.Matrix4,Ko=Yo.elements,ts=function(Jo){var rs=2/(Jo.leftTan+Jo.rightTan),ls=(Jo.leftTan-Jo.rightTan)*rs*.5,ss=2/(Jo.upTan+Jo.downTan);return{scale:[rs,ss],offset:[ls,(Jo.upTan-Jo.downTan)*ss*.5]}}(Xo);return Ko[0]=ts.scale[0],Ko[1]=0,Ko[2]=ts.offset[0]*Wo,Ko[3]=0,Ko[4]=0,Ko[5]=ts.scale[1],Ko[6]=-ts.offset[1]*Wo,Ko[7]=0,Ko[8]=0,Ko[9]=0,Ko[10]=Vo/(Go-Vo)*-Wo,Ko[11]=Vo*Go/(Go-Vo),Ko[12]=0,Ko[13]=0,Ko[14]=Wo,Ko[15]=0,Yo.transpose(),Yo}({upTan:Math.tan(ko.upDegrees*Zo),downTan:Math.tan(ko.downDegrees*Zo),leftTan:Math.tan(ko.leftDegrees*Zo),rightTan:Math.tan(ko.rightDegrees*Zo)},Uo,Qo,qo)}Po.layers.enable(2),this.render=function(ko,Uo){var Qo,qo;if(xo&&Do.isPresenting){var Zo=ko.autoUpdate;Zo&&(ko.updateMatrixWorld(),ko.autoUpdate=!1);var Xo=xo.getEyeParameters("left"),Fo=xo.getEyeParameters("right");To.fromArray(Xo.offset),So.fromArray(Fo.offset),Array.isArray(ko)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),ko=ko[0]);var Go,Vo,Wo=va.getSize(new r$3.Vector2),Yo=xo.getLayers();if(Yo.length){var Ko=Yo[0];Go=Ko.leftBounds!==null&&((Qo=Ko.leftBounds)===null||Qo===void 0?void 0:Qo.length)===4?Ko.leftBounds:Ro,Vo=Ko.rightBounds!==null&&((qo=Ko.rightBounds)===null||qo===void 0?void 0:qo.length)===4?Ko.rightBounds:jo}else Go=Ro,Vo=jo;wo={x:Math.round(Wo.width*Go[0]),y:Math.round(Wo.height*Go[1]),width:Math.round(Wo.width*Go[2]),height:Math.round(Wo.height*Go[3])},Eo={x:Math.round(Wo.width*Vo[0]),y:Math.round(Wo.height*Vo[1]),width:Math.round(Wo.width*Vo[2]),height:Math.round(Wo.height*Vo[3])},va.setScissorTest(!0),va.autoClear&&va.clear(),Uo.parent===null&&Uo.updateMatrixWorld(),Uo.matrixWorld.decompose(Io.position,Io.quaternion,Io.scale),Uo.matrixWorld.decompose(Po.position,Po.quaternion,Po.scale);var ts=this.scale;return Io.translateOnAxis(To,ts),Po.translateOnAxis(So,ts),xo.getFrameData&&$o?(xo.depthNear=Uo.near,xo.depthFar=Uo.far,xo.getFrameData($o),Io.projectionMatrix.elements=[].slice.call($o.leftProjectionMatrix),Po.projectionMatrix.elements=[].slice.call($o.rightProjectionMatrix)):(Io.projectionMatrix=Bo(Xo.fieldOfView,!0,Uo.near,Uo.far),Po.projectionMatrix=Bo(Fo.fieldOfView,!0,Uo.near,Uo.far)),va.setViewport(wo.x,wo.y,wo.width,wo.height),va.setScissor(wo.x,wo.y,wo.width,wo.height),va.render(ko,Io),va.setViewport(Eo.x,Eo.y,Eo.width,Eo.height),va.setScissor(Eo.x,Eo.y,Eo.width,Eo.height),va.render(ko,Po),va.setViewport(0,0,Wo.width,Wo.height),va.setScissorTest(!1),Zo&&(ko.autoUpdate=!0),void(Do.autoSubmitFrame&&Do.submitFrame())}va.render(ko,Uo)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",zo,!1)}}var kr=new r$3.SphereBufferGeometry(.1,32,32);function Cr(va,_o){va.setValues({color:_o})}var Pr=function(va){function _o(){var xo=va.call(this)||this,bo=new r$3.MeshBasicMaterial({color:8900346,opacity:.5,transparent:!0});return xo.mesh=new r$3.Mesh(kr,bo),xo.current=!1,xo.add(xo.mesh),xo.loading=!1,xo.disabled=!1,xo.progress=0,xo.opacity=1,xo.needsRender=!0,xo}return t$3.__extends(_o,va),_o.prototype.setDisabled=function(xo){this.disabled!==xo&&(this.disabled=xo)},_o.prototype.setLoading=function(xo){this.loading!==xo&&(this.loading=xo)},_o.prototype.setProgress=function(xo){this.progress!==xo&&(this.progress=xo)},_o.prototype.setOpacity=function(xo){this.opacity!==xo&&(this.opacity=xo)},_o.prototype.setCurrent=function(xo){this.current!==xo&&(this.current=xo,this.draw())},_o.prototype.draw=function(){this.progress>0?Cr(this.mesh.material,16776960):this.current?Cr(this.mesh.material,65280):Cr(this.mesh.material,8900346)},_o.prototype.dispose=function(){this.remove(this.mesh),Array.isArray(this.mesh.material)?this.mesh.material.forEach(function(xo){return xo.dispose()}):this.mesh.material.dispose()},_o}(r$3.Object3D),Br=null,_r=[{zh:"1. \u8FDB\u5165: \u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165VR\u773C\u955C\u4E2D",en:"1. Enter: Put your phone<br/> horizontally into the VR glasses",ja:"1. \u5165\u529B\uFF1A\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u7F6E\u304D\u307E\u3059"},{zh:"2. \u524D\u8FDB: \u89C6\u89D2\u4E2D\u5FC3\u5BF9\u51C6\u84DD\u70B9, \u76F4\u81F3\u53D8\u7EFF",en:"2. Forward: align the center of the viewing<br/> angle with the blue dot, until it turns green",ja:"2. \u524D\u65B9\uFF1A\u7DD1\u8272\u306B\u5909\u308F\u308B\u307E\u3067\u3001<br/>\u8996\u91CE\u89D2\u306E\u4E2D\u5FC3\u3092\u9752\u3044\u70B9\u306B\u5408\u308F\u305B\u307E\u3059"},{zh:"3. \u9000\u51FA: \u5C06\u624B\u673A\u7AD6\u5C4F\u518D\u89E6\u78B0\u5C4F\u5E55",en:"3. Exit: Put the phone in portrait<br/> orientation and then touch the screen",ja:"3. \u7D42\u4E86\uFF1A\u96FB\u8A71\u3092\u7E26\u5411\u304D\u306B\u3057\u3066\u304B\u3089<br/>\u753B\u9762\u306B\u30BF\u30C3\u30C1\u3057\u307E\u3059"}],Ur=function(va){function _o(xo){var bo=this;Re(Br)&&(Br=new Sr(xo.webvrPolyfillConfig||{}));var wo=_o.parseArgs(xo);return(bo=va.call(this,wo)||this).effect=new Lr(bo.renderer),bo.effect.setSize(bo.element.offsetWidth,bo.element.offsetHeight),bo.effect.isPresenting=!0,bo.initHelper(bo.element),bo}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo=t$3.__assign(t$3.__assign({},xo),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return va.parseArgs.call(this,bo)},_o.initAnimationEndPose=function(xo){var bo=this.parseArgs(xo);return va.initAnimationEndPose.call(this,bo)},_o.prototype.destroy=function(){va.prototype.destroy.call(this),this.destroyHelper();for(var xo=0,bo=this.panoMeshes;xo<bo.length;xo++){var wo=bo[xo];this.helper.remove(wo),wo.dispose()}this.panoMeshes.length=0},_o.prototype.isReady=function(){return!1},_o.prototype.updateRenderSize=function(){this.effect.isPresenting=!1,this.effect.setSize(this.element.offsetWidth,this.element.offsetHeight),this.effect.isPresenting=!0,this.needsRender=!0,this.setHelperElementSize()},_o.prototype.updatePanoMeshes=function(){var xo=this;this.panoMeshes.forEach(function(To){xo.helper.remove(To),To.dispose()}),this.panoMeshes.length=0;for(var bo=0;bo<this.work.observers.length;bo++){var wo=this.work.observers[bo],Eo=new Pr;Eo.name="panoSphere_"+this.work.workCode+"_"+bo,Eo.position.copy(wo.position),Eo.needsRender=!0,this.helper.add(Eo),this.panoMeshes[bo]=Eo}},_o.prototype.updateTime=function(xo,bo){var wo,Eo;if(!this.destroyed){this.needsRender=!0,this.intersect(xo);var To={},So={};if(this.locationMotion.ended===!1){this.locationMotion.update(xo);var $o=this.locationMotion.getKeyFrameSegment(xo),Do=$o[0],No=$o[1],Oo=this.panoResourceFromLocationMotionKeyframe(Do),Lo=this.panoResourceFromLocationMotionKeyframe(No),Co=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ro=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),jo=Oo.position,zo=Lo.position,Io=this.locationMotion.value.count-No.value.count+1;To.modelAlpha=this.locationMotion.value.modelAlpha,To.perspToOrtho=xn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),To.useBlackTransition=Lo.effect==="instant",Lo.panoPicture&&(Io<1?Oo.panoPicture&&(To.pano0=Oo.panoPicture):To.pano0=Lo.panoPicture,To.pano1=Lo.panoPicture),Lo.effect==="fade"&&(To.pano0&&Oo.panoPicture&&(To.pano0={map:To.pano0.map,luminanceMap:To.pano0.luminanceMap,matrix:Oo.panoPicture.matrix.clone().setPosition(Lo.position)}),jo.copy(zo)),To.progress=Io,So.distance=this.locationMotion.value.distance,So.offset=new r$3.Vector3(jo.x+(zo.x-jo.x)*Io,jo.y+(zo.y-jo.y)*Io,jo.z+(zo.z-jo.z)*Io);for(var Po=[],Bo=[],ko=0,Uo=this.locationMotion.keyframes;ko<Uo.length;ko++){var Qo=(Jo=Uo[ko]).key,qo=Jo.progress;Qo!==void 0&&(Po.push(Qo),qo>=this.locationMotion.progress&&Bo.push(Qo))}for(var Zo=0,Xo=Object.keys(this.panoResources);Zo<Xo.length;Zo++){var Fo=Xo[Zo];if(!(Bo.indexOf(Fo)>=0)){var Go=this.panoResources[Fo];if(Go.panoPicture){var Vo=Go.panoPicture.map;if(Vo){if(Vo===((wo=To.pano0)===null||wo===void 0?void 0:wo.map)||Vo===((Eo=To.pano1)===null||Eo===void 0?void 0:Eo.map))continue;Vo.dispose(),Go.panoPicture=null}}Po.indexOf(Fo)>=0||delete this.panoResources[Fo]}}this.currentPanoIndex=Io<.5?Oo.panoIndex:Lo.panoIndex,this.emit("movingToPano",Ro.panoIndex,Co.panoIndex,this.locationMotion.progress)}for(var Wo=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),Yo=[],Ko=0,ts=this.locationMotion.keyframes;Ko<ts.length;Ko++){var Jo;(Jo=ts[Ko]).progress>=this.locationMotion.progress&&Yo.push(this.panoResourceFromLocationMotionKeyframe(Jo).panoIndex)}for(var rs=0;rs<this.work.observers.length;rs++){var ls=this.work.observers[rs],ss=this.panoMeshes[rs];if(ss.visible=!0,Yo.indexOf(rs)>=0)ss.visible=!1;else if(ls.loadable||ls.active)if(Wo.indexOf(rs)===-1)ss.visible=!1;else{ss.visible=!0;var us=ss.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);us<.01?ss.setOpacity(0):ss.setOpacity(xn(1.5/us,0,1))}else ss.visible=!0}En(To)===!1&&(this.model.setMaterial(To),this.boundingMesh.setMaterial(To)),So.offset&&this.camera.position.copy(So.offset);var ms=this.camera.pose.longitude,As=this.camera.pose.latitude,Os=this.effect.getVRDisplay();if(Os){var Es=Os.getPose();Es&&Es.orientation&&this.camera.quaternion.fromArray(Es.orientation)}this.camera.updateMatrixWorld(),this.camera.computePose(),ms===this.camera.pose.longitude&&As===this.camera.pose.latitude||(this.cameraMotion.set(Xt(this.camera.pose,["longitude","latitude"]),0).catch(Qe),this.emit("cameraDirectionUpdate",Xt(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",jn(Xt(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},_o.prototype.render=function(){this.effect.render(this.scene,this.camera)},_o.prototype.setCamera=function(xo){},_o.prototype.initHelper=function(xo){for(var bo=this,wo="five_webvr_helper_"+Fe(),Eo=1,To=document.getElementsByTagName("meta"),So=0;So<To.length;So++){var $o=To[So];if($o.getAttribute("name")==="viewport"){var Do=($o.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Do&&(Eo=Number(Do[1])),isNaN(Eo)&&(Eo=1)}}var No=document.createElement("style");No.setAttribute("type","text/css");var Oo,Lo,Co=`
    .`+(Oo=wo)+`{
      font-family:sans-serif;
      background:#394043;color:#ffffff;
      position:absolute;display:none;
      -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    .`+Oo+` img{
      position:absolute;top:50%;left:50%;
      -webkit-transform:translate(-50%,-100%);
      -moz-transform:translate(-50%,-100%);
      transform:translate(-50%,-100%);
      pointer-events:none;
      width:`+(Lo=function(zo){return Math.floor(zo*Eo)+"px"})(132)+`;
      height:`+Lo(162)+`;
    }
    .`+Oo+` ol{
      position:absolute;top:50%;left:50%;
      -webkit-transform:translate(-50%,0);
      -moz-transform:translate(-50%,0);
      transform:translate(-50%,0);
      pointer-events:none;
      margin-top:`+Lo(38)+`;
      font-size:`+Lo(16)+`;
      line-height:`+Lo(30)+`;
    }
    .`+Oo+` li{
      list-style-type:none;
      white-space:nowrap;
      position:relative;
      padding-left:`+Lo(14)+`;
      margin-bottom:`+Lo(12)+`;
    }
    @media screen and (orientation: portrait){
      .`+Oo+`{display: block!important}
    }
  `;"styleSheet"in No?No.styleSheet.cssText=Co:No.appendChild(document.createTextNode(Co));var Ro=this.helperElement=document.createElement("div");Ro.className=wo,Ro.innerHTML=`
      <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTMycHgiIGhlaWdodD0iMTYycHgiIHZpZXdCb3g9IjAgMCAxMzIgMTYyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ni4xICg0NDQ2MykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cG9seWdvbiBpZD0icGF0aC0xIiBwb2ludHM9IjY1Ljk4NTM0MjMgOTMuMTg5NjU1MiAwIDkzLjE4OTY1NTIgMCAwLjI0NzE1NTE3MiAxMzEuOTcwNjg1IDAuMjQ3MTU1MTcyIDEzMS45NzA2ODUgOTMuMTg5NjU1MiI+PC9wb2x5Z29uPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9vemhtS1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE4LjAwMDAwMCwgLTE4NC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMDAwMDAwLCAxODQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iUGFnZS0xIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaXBob25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNS4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4yMDIzNzg3LDMyLjI2OTE1MzIgQzYyLjIwODU3NTQsMzQuNDI4MDQyOSA2MC42ODkzNDU5LDM3LjA2MDgzNTEgNTguODA3NjA4MiwzOC4xNDI4NjEgTDU1Ljg3MDM2MjMsMzkuODQwMjM3NyBMNTUuMTc5NDI3OSwzOC42Mzc0MTMgTDU1LjEzNTAxOCwyMi4xNTMwMzY0IEw1Ni4zMTM0Mjc5LDIyLjE0Njg0MTYgQzU2LjMxMzQyNzksMjMuNDk1MjQ0MiA1Ny4yNjk3ODg1LDI0LjAzOTM1NDUgNTguNDQ3MTY1NiwyMy4zNTU4NjEgQzU5LjYxODM0NTksMjIuNjc4NTYyMyA2MC41NjIzMTMxLDIxLjAzOTAwMzkgNjAuNTYyMzEzMSwxOS42OTY3OTYxIEw2Mi4xNjQxNjU2LDE5LjY5MDYwMTMgTDYyLjIwMjM3ODcsMzIuMjY5MTUzMiBaIiBpZD0iRmlsbC0xIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4xMjAxNjg5LDUuMjYzNjIyNzMgTDYyLjE2MzU0NTksMTkuNjkxMzI0IEw2MC41NjI3MjYyLDE5LjY5NjQ4NjQgQzYwLjU1NTQ5NjcsMTguMzQxODg5IDU5LjYwNTMzMjgsMTcuNzk3Nzc4NiA1OC40Mjc5NTU3LDE4LjQ3NTA3NzMgQzU3LjI1Njc3NTQsMTkuMTUyMzc2IDU2LjMwNjYxMTUsMjAuNzk4MTI5MiA1Ni4zMTI4MDgyLDIyLjE0NzU2NDMgTDU1LjEzNTQzMTEsMjIuMTUyNzI2NiBMNTUuMDkxMDIxMyw3LjAxMDU1Nzc5IEw1NC4zOTQ5MjMsNS44MDc3MzMxMiBMNTguNzA2ODA4MiwzLjMxOTQ4NjM2IEM2MC41ODc1MTMxLDIuMjMxMjY1NTggNjIuMTIwMTY4OSwzLjEwNDczMzEyIDYyLjEyMDE2ODksNS4yNjM2MjI3MyIgaWQ9IkZpbGwtMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjAuMTEyNjM3NywxOS45NTYxNTE5IEM2MC4xMTI2Mzc3LDIxLjAxMzM5ODcgNTkuMzY0OSwyMi4zMTEyMTA0IDU4LjQ0MDU1NTcsMjIuODQyOTMxMiBDNTcuNTE2MjExNSwyMy4zNzU2ODQ0IDU2Ljc2MjI3NywyMi45NDUxNDU1IDU2Ljc2MjI3NywyMS44ODY4NjYyIEM1Ni43NTYwODAzLDIwLjgyMzQyNDcgNTcuNTAzODE4LDE5LjUyNTYxMyA1OC40MzQzNTksMTguOTkzODkyMiBDNTkuMzUyNTA2NiwxOC40NjIxNzE0IDYwLjEwNjQ0MSwxOC44OTI3MTA0IDYwLjExMjYzNzcsMTkuOTU2MTUxOSIgaWQ9IkZpbGwtNyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS4wMTA4NTkwMiw1My4yOTE1MzQ0IEw4Ljk5MTIzNjA3LDQ1LjYxOTI2ODIgQzguOTkxMjM2MDcsNDUuNDc0NzIyNyA4Ljg5MDAyMjk1LDQ1LjQxNjkwNDUgOC43NjQwMjI5NSw0NS40ODYwNzk5IEM4LjYzNjk5MDE2LDQ1LjU2MzUxNDkgOC41NDE5NzM3Nyw0NS43MzM4NzIxIDguNTQxOTczNzcsNDUuODc4NDE3NSBMOC41NjA1NjM5Myw1My41NTE3MTYyIEM4LjU2MDU2MzkzLDUzLjY5MTA5OTQgOC42NjI4MDk4NCw1My43NDY4NTI2IDguNzgyNjEzMTEsNTMuNjc3Njc3MyBDOC45MDk2NDU5LDUzLjYwMjMwNzEgOS4wMTA4NTkwMiw1My40MzE5NSA5LjAxMDg1OTAyLDUzLjI5MTUzNDQgTDkuMDEwODU5MDIsNTMuMjkxNTM0NCBaIE01NS4xNzk1MzExLDM4LjYzNzcyMjcgTDU1Ljg3MDQ2NTYsMzkuODQwNTQ3NCBMOS4xODc0NjU1Nyw2Ni43ODE3NTUyIEM3LjMwNzc5MzQ0LDY3Ljg3MTAwODQgNS43NzUxMzc3LDY2Ljk5NjUwODQgNS43NzUxMzc3LDY0LjgzODY1MTMgTDUuNjkyNTE0NzUsMzcuODMyMzk4MSBDNS42ODYzMTgwMywzNS42NzU1NzM0IDcuMjA1NTQ3NTQsMzMuMDQxNzQ4NyA5LjA4NzI4NTI1LDMxLjk1ODY5MDMgTDU0LjM5NDYxMzEsNS44MDgzNTI2IEw1NS4wOTA3MTE1LDcuMDExMTc3MjcgTDExLjg5ODUzMTEsMzEuOTM5MDczNCBMMTEuOTg3MzUwOCw2My41NjU2MTg4IEw1NS4xNzk1MzExLDM4LjYzNzcyMjcgWiIgaWQ9IkZpbGwtOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IEM1NC44NjYyODY5LDAuMDAwNTE2MjMzNzY2IDU0LjM0Njc5NTEsMC4xNTAyMjQwMjYgNTMuNzk4Mzg1MiwwLjQ2NzE5MTU1OCBMNC4xNzkxNzIxMywyOS4xMDU3NzYgQzIuMjk5NSwzMC4xOTA4OTk0IDAuNzgwMjcwNDkyLDMyLjgyMTYyNjYgMC43ODU0MzQ0MjYsMzQuOTgxNTQ4NyBMMC44NjI4OTM0NDMsNjEuOTg3ODAxOSBDMC44NjU5OTE4MDMsNjMuMDYwNTM1NyAxLjI0Mzk5MTgsNjMuODE1MjY5NSAxLjg1NTQwMTY0LDY0LjE2OTQwNTggTDYuNzY0MjM3Nyw2Ny4wMjIxMTM2IEM2LjE1Mzg2MDY2LDY2LjY2Njk0NDggNS43NzQ4Mjc4Nyw2NS45MTIyMTEgNS43NzE3Mjk1MSw2NC44Mzk0NzczIEw1LjY5NTMwMzI4LDM3LjgzMzIyNCBDNS42ODkxMDY1NiwzNS42NzQzMzQ0IDcuMjA4MzM2MDcsMzMuMDQyNTc0NyA5LjA4ODAwODIsMzEuOTU3NDUxMyBMNTguNzA3MjIxMywzLjMxODg2Njg4IEM1OS4yNTY2NjM5LDMuMDAxODk5MzUgNTkuNzc1MTIzLDIuODUyMTkxNTYgNjAuMjM0NzEzMSwyLjg1MjE5MTU2IEM2MC41NjgzMDMzLDIuODUyMTkxNTYgNjAuODY5ODc3LDIuOTMwNjU5MDkgNjEuMTMwMTM5MywzLjA4MTM5OTM1IEw1Ni4yMjAyNzA1LDAuMjMwNzU2NDk0IEM1NS45NjEwNDEsMC4wNzg5ODM3NjYyIDU1LjY1ODQzNDQsMC4wMDA1MTYyMzM3NjYgNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IE01NS4zMjU4NzcsMC42MzM0MTg4MzEgQzU1LjU0Mzc5NTEsMC42MzM0MTg4MzEgNTUuNzM3OTU5LDAuNjgxOTQ0ODA1IDU1LjkwMjE3MjEsMC43NzY5MzE4MTggTDU4Ljg5NjIyMTMsMi41MTY2Mzk2MSBDNTguNzI4OTA5OCwyLjU4Nzg3OTg3IDU4LjU2MDU2NTYsMi42NzM1NzQ2OCA1OC4zOTExODg1LDIuNzcxNjU5MDkgTDguNzcxOTc1NDEsMzEuNDEwMjQzNSBDNi42ODQ3MTMxMSwzMi42MTQxMDA2IDUuMDU0OTc1NDEsMzUuNDM2ODY2OSA1LjA2MjIwNDkyLDM3LjgzNTI4OSBMNS4xMzg2MzExNSw2NC44NDE1NDIyIEM1LjEzODYzMTE1LDY1LjAyMTE5MTYgNS4xNDg5NTkwMiw2NS4xOTU2Nzg2IDUuMTY3NTQ5MTgsNjUuMzYyOTM4MyBMMi4xNzM1LDYzLjYyMzIzMDUgQzEuNzM4Njk2NzIsNjMuMzcwMjc2IDEuNDk4MDU3MzgsNjIuNzg3OTY0MyAxLjQ5NTk5MTgsNjEuOTg1NzM3IEwxLjQxOTU2NTU3LDM0Ljk3OTQ4MzggQzEuNDEzMzY4ODUsMzMuMDU5MDk0MiAyLjgyMzEyMjk1LDMwLjYxOTM3MzQgNC40OTUyMDQ5MiwyOS42NTQwMTYyIEw1NC4xMTU0NTA4LDEuMDE0Mzk5MzUgQzU0LjU0ODE4ODUsMC43NjU1NzQ2NzUgNTQuOTY2NDY3MiwwLjYzMzQxODgzMSA1NS4zMjU4NzcsMC42MzM0MTg4MzEiIGlkPSJGaWxsLTM1Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjA4ODUyNDU5LDMyLjI3NDIxMjMgQzkuMDMzNzg2ODksMzIuMjc0MjEyMyA4Ljk4MDA4MTk3LDMyLjI1OTc1NzggOC45Mjk0NzU0MSwzMi4yMzE4ODEyIEw0LjM4OTM0NDI2LDI5LjU5MzkyNjYgQzQuMjM3NTI0NTksMjkuNTA2MTY2OSA0LjE4NTg4NTI1LDI5LjMxMjA2MyA0LjI3MzY3MjEzLDI5LjE2MTMyMjcgQzQuMzYyNDkxOCwyOS4wMDk1NSA0LjU1NjY1NTc0LDI4Ljk1OTk5MTYgNC43MDc0NDI2MiwyOS4wNDY3MTg4IEw5LjI0NzU3Mzc3LDMxLjY4NDY3MzQgQzkuMzk4MzYwNjYsMzEuNzcyNDMzMSA5LjQ1LDMxLjk2NTUwNDUgOS4zNjIyMTMxMSwzMi4xMTcyNzczIEM5LjMwMzM0NDI2LDMyLjIxNzQyNjYgOS4xOTY5NjcyMSwzMi4yNzQyMTIzIDkuMDg4NTI0NTksMzIuMjc0MjEyMyIgaWQ9IkZpbGwtMzciPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTU4LjcwNzYzNDQsMy42MzUzMTgxOCBDNTguNjUyODk2NywzLjYzNTMxODE4IDU4LjU5OTE5MTgsMy42MjE4OTYxIDU4LjU0ODU4NTIsMy41OTI5ODcwMSBMNTMuOTY5MjA4MiwwLjkzMjMxODE4MiBDNTMuODE4NDIxMywwLjg0NDU1ODQ0MiA1My43NjY3ODIsMC42NTA0NTQ1NDUgNTMuODU0NTY4OSwwLjQ5OTcxNDI4NiBDNTMuOTQyMzU1NywwLjM0NjkwOTA5MSA1NC4xMzY1MTk3LDAuMjk4MzgzMTE3IDU0LjI4NzMwNjYsMC4zODUxMTAzOSBMNTguODY2NjgzNiwzLjA0NTc3OTIyIEM1OS4wMTc0NzA1LDMuMTMzNTM4OTYgNTkuMDY5MTA5OCwzLjMyNjYxMDM5IDU4Ljk4MTMyMywzLjQ3ODM4MzEyIEM1OC45MjI0NTQxLDMuNTc5NTY0OTQgNTguODE2MDc3LDMuNjM1MzE4MTggNTguNzA3NjM0NCwzLjYzNTMxODE4IiBpZD0iRmlsbC0zOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy4zMjA5MjYyMyw2My4zMzk5MjE0IEMyLjc5NjI3MDQ5LDYzLjMzOTkyMTQgMi4zNzA3NjIzLDYyLjkxNTU3NzMgMi4zNzA3NjIzLDYyLjM5MDA1MTMgTDIuMzcwNzYyMyw1OC4xMzAwOTAzIEMyLjM3MDc2MjMsNTcuNjA0NTY0MyAyLjc5NjI3MDQ5LDU3LjE4MDIyMDEgMy4zMjA5MjYyMyw1Ny4xODAyMjAxIEMzLjg0NTU4MTk3LDU3LjE4MDIyMDEgNC4yNzAwNTczOCw1Ny42MDQ1NjQzIDQuMjcwMDU3MzgsNTguMTMwMDkwMyBMNC4yNzAwNTczOCw2Mi4zOTAwNTEzIEM0LjI3MDA1NzM4LDYyLjkxNTU3NzMgMy44NDU1ODE5Nyw2My4zMzk5MjE0IDMuMzIwOTI2MjMsNjMuMzM5OTIxNCIgaWQ9IkZpbGwtNDEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNjguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkNsaXAtNDYiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBDODAuMzMyNzcwNiw1MC4yNzIxNzI0IDgxLjQ3MTM3MTgsNDguNjk5MjkzMSA4Mi43NjcwNzczLDQ3Ljk1MDUzNDUgQzgzLjM3MDM5MDIsNDcuNjAyMDg2MiA4My45NDIxMjAyLDQ3LjQ3OTcyNDEgODQuMzM4OTMwMSw0Ny42MTUwNTE3IEM4NC42MTI2NDc5LDQ3LjcwNzQzMSA4NC44MTgzNDExLDQ3LjkyNjIyNDEgODQuOTY3MzQ3Miw0OC4yODQzOTY2IEw4OC41NTQwMjIxLDU2LjkxOTQzMSBDODguNTYzNzM5OSw1Ni45NDEzMTAzIDg4LjU3NjY5NjksNTYuOTYwNzU4NiA4OC41ODcyMjQ1LDU2Ljk4MTAxNzIgQzg4LjU5Nzc1MjEsNTcuMDAwNDY1NSA4OC42MDU4NTAzLDU3LjAxOTkxMzggODguNjE3OTk3NSw1Ny4wMzg1NTE3IEM4OC42MzUwMDM3LDU3LjA2NDQ4MjggODguNjU1MjQ5MSw1Ny4wODcxNzI0IDg4LjY3NDY4NDcsNTcuMTA5ODYyMSBDODguNjg1MjEyMyw1Ny4xMjM2Mzc5IDg4LjY5NDkzMDEsNTcuMTM4MjI0MSA4OC43MDYyNjc1LDU3LjE0OTU2OSBDODguNzMyMTgxNiw1Ny4xNzYzMTAzIDg4Ljc2MDUyNTIsNTcuMTk5ODEwMyA4OC43ODk2Nzg1LDU3LjIyMTY4OTcgQzg4Ljc5Nzc3NjcsNTcuMjI4MTcyNCA4OC44MDUwNjUsNTcuMjM1NDY1NSA4OC44MTMxNjMyLDU3LjI0MTk0ODMgQzg5LjAwNzUxOSw1Ny4zNzgwODYyIDg5LjI2MjYxMSw1Ny40MjEwMzQ1IDg5LjQ5OTg4NzEsNTcuMzMyNzA2OSBMODkuODMxMTAxOCw1Ny4yMDc5MTM4IEw5MC4wNzQ4NTY0LDU3LjExODc3NTkgQzkwLjIxMDkwNTUsNTcuMDY4NTM0NSA5MC4zNDc3NjQ0LDU3LjAxODI5MzEgOTAuNDg1NDMzMSw1Ni45Njk2NzI0IEM5MC43ODY2ODQ3LDU2Ljg2MTg5NjYgOTEuMDkwMzY1Niw1Ni43NTk3OTMxIDkxLjM5NDA0NjYsNTYuNjU3Njg5NyBMOTIuMzY1MDE2LDU2LjM0MTY1NTIgQzkyLjgwMjMxNjYsNTYuMjAzMDg2MiA5My4yNDA0MjcsNTYuMDY4NTY5IDkzLjY4MjU4NjUsNTUuOTQwNTM0NSBDOTMuODUxMDI4Miw1NS44OTE5MTM4IDk0LjAxOTQ2OTksNTUuODQ0OTEzOCA5NC4xODc5MTE3LDU1Ljc5NjI5MzEgTDk0LjI3OTQyMDksNTUuNzcxMTcyNCBDOTQuNjg0MzI4OCw1NS42NTc3MjQxIDk1LjA5MDA0NjYsNTUuNTQ5OTQ4MyA5NS40OTczODQsNTUuNDQ2MjI0MSBMOTUuNjA2NzA5Miw1NS40MTcwNTE3IEM5NS43NjMwMDM3LDU1LjM3NjUzNDUgOTUuOTIwMTA4LDU1LjMzNjAxNzIgOTYuMDc3MjEyMyw1NS4yOTc5MzEgQzk2LjU2NjM0MTEsNTUuMTc3MTg5NyA5Ny4wNTU0Njk5LDU1LjA2Mzc0MTQgOTcuNTQ2MjE4NCw1NC45NTUxNTUyIEw5Ny44NTM5NDg1LDU0Ljg4NTQ2NTUgQzk4LjQ0NDMwNDMsNTQuNzU5MDUxNyA5OS4wMzcwODk2LDU0LjY0MjM2MjEgOTkuNjI3NDQ1NCw1NC41MzM3NzU5IEwxMDAuMDIxMDE2LDU0LjQ2NjUxNzIgQzEwMC42MTU0MjEsNTQuMzYxMTcyNCAxMDEuMjA5MDE2LDU0LjI2NjM2MjEgMTAxLjgwNDIzMSw1NC4xNzk2NTUyIEwxMDIuMjY1MDE2LDU0LjExMjM5NjYgQzEwMi45NjA2NDgsNTQuMDE2Nzc1OSAxMDMuNjQ3MzcyLDUzLjkzNDEyMDcgMTA0LjMwNTc1Miw1My44NjYwNTE3IEwxMDQuODM2MTgyLDUzLjgxNzQzMSBDMTA1LjIyNjUxMyw1My43ODE3NzU5IDEwNS42MTUyMjUsNTMuNzQ3NzQxNCAxMDYuMDA0NzQ2LDUzLjcyMDE4OTcgQzEwNi4yMTQ0ODgsNTMuNzA0NzkzMSAxMDYuNDIxODAxLDUzLjY5MjYzNzkgMTA2LjYzMDczNCw1My42Nzk2NzI0IEMxMDcuMDAwMDEsNTMuNjU3NzkzMSAxMDcuMzY2ODU2LDUzLjYzODM0NDggMTA3LjczNTMyMyw1My42MjM3NTg2IEMxMDcuOTUyMzUzLDUzLjYxNDg0NDggMTA4LjE2OTM4NCw1My42MDUxMjA3IDEwOC4zODU2MDUsNTMuNTk4NjM3OSBDMTA4LjY0Nzk4NSw1My41OTIxNTUyIDEwOC45MTAzNjYsNTMuNTg3MjkzMSAxMDkuMTczNTU2LDUzLjU4NDA1MTcgQzEwOS42NzgwNzEsNTMuNTc1OTQ4MyAxMTAuMTc4NTM3LDUzLjU3Njc1ODYgMTEwLjY4MDYyMyw1My41ODQ4NjIxIEwxMTAuNzY0MDM0LDUzLjU4NTY3MjQgQzExMC45ODE4NzUsNTMuNTg4OTEzOCAxMTEuMTk5NzE1LDUzLjU5MjE1NTIgMTExLjQxNTEyNiw1My41OTc4Mjc2IEMxMTEuNjI4MTA4LDUzLjYwNTEyMDcgMTExLjg0MDI4LDUzLjYxNDg0NDggMTEyLjA1MjQ1Miw1My42MjM3NTg2IEMxMTIuMzE0MDIyLDUzLjYzNDI5MzEgMTEyLjU3NDc4Myw1My42NDcyNTg2IDExMi44MzQ3MzQsNTMuNjYyNjU1MiBDMTEzLjA0NDQ3Niw1My42NzQ4MTAzIDExMy4yNTQyMTgsNTMuNjg5Mzk2NiAxMTMuNDYzOTYxLDUzLjcwNDc5MzEgQzExMy43MjQ3MjEsNTMuNzI0MjQxNCAxMTMuOTg1NDgyLDUzLjc0NDUgMTE0LjI0MzgxMyw1My43NjcxODk3IEMxMTQuNDMzMzEsNTMuNzg1MDE3MiAxMTQuNjIxOTk4LDUzLjgwMjg0NDggMTE0LjgwOTA2NSw1My44MjIyOTMxIEMxMTUuMDczODc1LDUzLjg0OTAzNDUgMTE1LjMzNjI1NSw1My44Nzk4Mjc2IDExNS41OTYyMDYsNTMuOTExNDMxIEMxMTUuNzgwMDM0LDUzLjkzMzMxMDMgMTE1Ljk2MzA1Myw1My45NTYgMTE2LjE0NDQ1Miw1My45ODAzMTAzIEMxMTYuNDEyNTAxLDU0LjAxNjc3NTkgMTE2LjY3ODEyLDU0LjA1NzI5MzEgMTE2Ljk0MTMxLDU0LjA5ODYyMDcgTDExNy4wOTExMjYsNTQuMTIxMzEwMyBDMTE3LjIxMDE2OSw1NC4xMzkxMzc5IDExNy4zMjY3ODMsNTQuMTU3Nzc1OSAxMTcuNDQyNTg3LDU0LjE3NjQxMzggQzExNy43MzA4ODEsNTQuMjI1ODQ0OCAxMTguMDE1MTI2LDU0LjI3OTMyNzYgMTE4LjMwMDk5MSw1NC4zMzUyNDE0IEwxMTguNDQ2NzU4LDU0LjM2MTk4MjggQzExOC41MzUwMjgsNTQuMzc4MTg5NyAxMTguNjIzMjk4LDU0LjM5NTIwNjkgMTE4LjcxMjM3OCw1NC40MTMwMzQ1IEMxMTkuMDE3Njc5LDU0LjQ3NDYyMDcgMTE5LjMxNzMxLDU0LjU0NDMxMDMgMTE5LjYxNTMyMyw1NC42MTQgTDExOS45NzE2NDIsNTQuNjk0MjI0MSBDMTIwLjM4NDY0OCw1NC43OTU1MTcyIDEyMC43OTE5ODUsNTQuOTAyNDgyOCAxMjEuMTkyODQ0LDU1LjAxNjc0MTQgQzEyMS42MjkzMzUsNTUuMTQyMzQ0OCAxMjIuMDU2OTE4LDU1LjI3NjA1MTcgMTIyLjQ3ODgzMiw1NS40MTc4NjIxIEMxMjIuNTU0MTQ1LDU1LjQ0MjE3MjQgMTIyLjYyNzAyOCw1NS40Njk3MjQxIDEyMi43MDA3MjEsNTUuNDk1NjU1MiBMMTIyLjg1NjIwNiw1NS41NTMxODk3IEMxMjMuMTQ1MzEsNTUuNjU0NDgyOCAxMjMuNDMyNzk1LDU1Ljc1NjU4NjIgMTIzLjcxNjIzMSw1NS44Njc2MDM0IEMxMjMuNzc2OTY3LDU1Ljg5MTEwMzQgMTIzLjgzNTI3NCw1NS45MTYyMjQxIDEyMy44OTQzOSw1NS45NDA1MzQ1IEwxMjQuMDQwOTY3LDU2LjAwMTMxMDMgQzEyNC40MTc1MzEsNTYuMTU0NDY1NSAxMjQuNzg1MTg4LDU2LjMxNDkxMzggMTI1LjE0MzkzNiw1Ni40ODI2NTUyIEwxMjUuMjMwNTg3LDU2LjUyMzE3MjQgQzEyNS4zMjc3NjQsNTYuNTY3NzQxNCAxMjUuNDI0OTQyLDU2LjYxMzEyMDcgMTI1LjUyMjEyLDU2LjY2MTc0MTQgQzEyNS44NTk4MTMsNTYuODI3MDUxNyAxMjYuMTYwMjU1LDU2Ljk4MTgyNzYgMTI2LjQzNTU5Myw1Ny4xMzA5MzEgQzEyNi40MzU1OTMsNTcuMzczMjI0MSAxMjYuNDM1NTkzLDU3LjY4NjgyNzYgMTI2LjQzNjQwMiw1OC4wMDM2NzI0IEwxMjYuNDM2NDAyLDU4LjAyNzE3MjQgQzExNy40MzUyOTgsNTMuNTMzIDEwMy4wNTg2MzYsNTMuNTYyMTcyNCA5MC4wMjU0NTc3LDU4LjE5ODE1NTIgTDg4LjQ5ODE0NDgsNTguMTg2IEw3OC44MzI5OTE0LDU1LjY4NzcwNjkgTDc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBaIE03Ni4yNDQwMDk4LDU3LjQ1OTkzMSBMNzYuMjQ3MjQ5MSw1Ni40MjI2ODk3IEM3Ni4yNDcyNDkxLDU2LjQxNTM5NjYgNzYuMjQ0ODE5Niw1Ni40MDg5MTM4IDc2LjI0NDgxOTYsNTYuNDAxNjIwNyBDNzYuMjQ0MDA5OCw1Ni4zODg2NTUyIDc2LjI0NTYyOTQsNTYuMzc0ODc5MyA3Ni4yNDQwMDk4LDU2LjM2MTkxMzggTDc2LjI0NDAwOTgsNTYuMjI5MDE3MiBDNzYuMjQ0MDA5OCw1NS45NjI0MTM4IDc2LjEwMjI5Miw1NS43MTY4NzkzIDc1Ljg3MTQ5NDUsNTUuNTgzOTgyOCBDNzUuNzMyMjA2MSw1NS41MDM3NTg2IDc1LjU3MzQ4MjIsNTUuNDc3ODI3NiA3NS40MTg4MDc0LDU1LjQ5NDg0NDggQzc1LjI5MzI4NTksNTUuNDE3ODYyMSA3NS4xNjQ1MjUyLDU1LjM0MzMxMDMgNzUuMDQyMjQyOSw1NS4yNjM4OTY2IEM3NS4wMDQxODE2LDU1LjIzODc3NTkgNzQuOTY4NTQ5Nyw1NS4yMTI4NDQ4IDc0LjkyOTY3ODUsNTUuMTg2OTEzOCBDNzQuNjg5MTYzMiw1NS4wMjgwODYyIDc0LjQ1MjY5NjksNTQuODY1MjA2OSA3NC4yMjY3NTgzLDU0LjY5ODI3NTkgQzc0LjIxMjk5MTQsNTQuNjg3NzQxNCA3NC4xOTkyMjQ1LDU0LjY3NzIwNjkgNzQuMTg1NDU3Nyw1NC42Njc0ODI4IEM3My42Nzc3MDMxLDU0LjI4OTg2MjEgNzMuMjA1NTgwNCw1My44OTQ0MTM4IDcyLjc3Mzk0ODUsNTMuNDgwMzI3NiBDNzMuNDc3Njc4NSw1MS45MzAxMzc5IDczLjg0NjE0NDgsNTAuMzY2OTgyOCA3My44NDIwOTU3LDQ4LjkzMDI0MTQgQzczLjgzNzIzNjgsNDcuMTYyODc5MyA3My4yNDYwNzEyLDQ1Ljc1NTMxMDMgNzIuMTc3MTE0MSw0NC45NjYwMzQ1IEM3MS43MzczODQsNDQuNjQwMjc1OSA3MS4yMjgwMDk4LDQ0LjQzNjg3OTMgNzAuNjc3MzM1LDQ0LjM0NjEyMDcgQzcwLjY4Nzg2MjYsNDQuMzIzNDMxIDcwLjY5ODM5MDIsNDQuMjk3NSA3MC43MDg5MTc4LDQ0LjI3NDgxMDMgQzcwLjcxMDUzNzQsNDQuMjcxNTY5IDcwLjczMzIxMjMsNDQuMjI3IDcwLjczNDgzMTksNDQuMjIzNzU4NiBDNzAuNzk3OTk3NSw0NC4wOTI0ODI4IDcwLjg2NzY0MTcsNDMuOTYyODI3NiA3MC45MzcyODU5LDQzLjgzMDc0MTQgTDcxLjE4MjY2MDEsNDMuMzU2Njg5NyBDNzEuMjM2MTA4LDQzLjI2MjY4OTcgNzEuMjkxOTg1Myw0My4xNjc4NzkzIDcxLjM0ODY3MjQsNDMuMDczMDY5IEw3MS40MTUwNzczLDQyLjk2Mjg2MjEgQzcxLjUzNDkzMDEsNDIuNzYxMDg2MiA3MS42NTg4MzE5LDQyLjU1ODUgNzEuNzkwMDIyMSw0Mi4zNTY3MjQxIEM3MS44NzAxOTM5LDQyLjIzMjc0MTQgNzEuOTUzNjA0OSw0Mi4xMDg3NTg2IDcyLjAzNzgyNTgsNDEuOTg2Mzk2NiBDNzIuMTc1NDk0NSw0MS43ODYyNDE0IDcyLjMxODAyMjEsNDEuNTg2ODk2NiA3Mi40NjU0MDg2LDQxLjM4OTE3MjQgTDcyLjU2MTc3NjcsNDEuMjU3ODk2NiBDNzIuNjU0OTA1NSw0MS4xMzIyOTMxIDcyLjc0ODAzNDQsNDEuMDA1ODc5MyA3Mi44NDUyMTIzLDQwLjg4MjcwNjkgQzcyLjg4NDg5MzMsNDAuODMxNjU1MiA3Mi45MjcwMDM3LDQwLjc4MjIyNDEgNzIuOTY5MTE0MSw0MC43MzExNzI0IEw3My4wNTk4MTM1LDQwLjYyMzM5NjYgQzczLjIwOTYyOTQsNDAuNDQwMjU4NiA3My4zNTk0NDU0LDQwLjI1NzkzMSA3My41MzM1NTU4LDQwLjA1Nzc3NTkgQzczLjc2NTk3MywzOS43OTAzNjIxIDc0LjAxMDUzNzQsMzkuNTI0NTY5IDc0LjI2NDAwOTgsMzkuMjU5NTg2MiBDNzQuMzQ0MTgxNiwzOS4xNzUzMTAzIDc0LjQyNTE2MzIsMzkuMDkxMDM0NSA3NC41MDg1NzQyLDM5LjAwNjc1ODYgQzc0Ljc1NzE4NzcsMzguNzUxNSA3NS4wMTM4OTk0LDM4LjUwMDI5MzEgNzUuMjg1MTg3NywzOC4yNDM0MTM4IEw3NS4zNjEzMTA0LDM4LjE3MTI5MzEgQzc1LjQ1NjA1ODksMzguMDgxMzQ0OCA3NS41NTU2NjYzLDM3Ljk5MzgyNzYgNzUuNjU1MjczNiwzNy45MDM4NzkzIEw3NS44NzM5MjM5LDM3LjcwODU4NjIgQzc2LjAzODMxNjYsMzcuNTYxMTAzNCA3Ni4yMDE4OTk0LDM3LjQxNTI0MTQgNzYuMzcyNzcwNiwzNy4yNjkzNzkzIEM3Ni40NzM5OTc1LDM3LjE4NDI5MzEgNzYuNTc3NjU0LDM3LjA5ODM5NjYgNzYuNjgxMzEwNCwzNy4wMTMzMTAzIEw3Ni43ODkwMTYsMzYuOTIzMzYyMSBDNzcuMDIzODYyNiwzNi43MzEzMTAzIDc3LjI2MDMyODgsMzYuNTM5MjU4NiA3Ny41MDQwODM0LDM2LjM0ODgyNzYgQzc3LjY1NzEzODcsMzYuMjMwNTE3MiA3Ny44MTE4MTM1LDM2LjExMjIwNjkgNzcuOTY3Mjk4MiwzNS45OTQ3MDY5IEM3OC4yMTc1MzEzLDM1LjgwNTg5NjYgNzguNDc1MDUyOCwzNS42MTk1MTcyIDc4LjczNDE5MzksMzUuNDMzOTQ4MyBMNzguODA0NjQ3OSwzNS4zODQ1MTcyIEM3OC45MzkwNzczLDM1LjI4ODg5NjYgNzkuMDc0MzE2NiwzNS4xOTI0NjU1IDc5LjIxMDM2NTYsMzUuMDk3NjU1MiBDNzkuNTAxMDg5NiwzNC44OTgzMTAzIDc5Ljc5OTkxMTcsMzQuNzAwNTg2MiA4MC4xMDAzNTM0LDM0LjUwNTI5MzEgTDgwLjI3Njg5MzMsMzQuMzg4NjAzNCBDODAuMzcwMDIyMSwzNC4zMjc4Mjc2IDgwLjQ2MjM0MTEsMzQuMjY2MjQxNCA4MC41NjExMzg3LDM0LjIwNDY1NTIgTDgwLjgzNDg1NjQsMzQuMDM0NDgyOCBDODEuMTkzNjA0OSwzMy44MTE2Mzc5IDgxLjU1NTU5MjYsMzMuNTkwNDEzOCA4MS45MzA1Mzc0LDMzLjM3MTYyMDcgQzgyLjM0NzU5MjYsMzMuMTI5MzI3NiA4Mi43NzE5MzYyLDMyLjg5MzUxNzIgODMuMjAxMTM4NywzMi42NjA5NDgzIEM4My4yOTAyMTg0LDMyLjYxMzk0ODMgODMuMzc4NDg4MywzMi41NjY5NDgzIDgzLjQ2ODM3NzksMzIuNTIwNzU4NiBMODQuMjAyODgxLDMyLjEzOTA4NjIgQzg0LjMwMjQ4ODMsMzIuMDg3MjI0MSA4NC40MDI5MDU1LDMyLjAzNTM2MjEgODQuNTAxNzAzMSwzMS45ODUxMjA3IEw4NS4yOTM3MDMxLDMxLjYwMTAxNzIgQzg1LjQ3MjY3MjQsMzEuNTEzNSA4NS42NTI0NTE1LDMxLjQyNjc5MzEgODUuODM0NjYwMSwzMS4zNDI1MTcyIEM4Ni4wMTg0ODgzLDMxLjI1NjYyMDcgODYuMjA0NzQ2LDMxLjE3MzE1NTIgODYuMzkxMDAzNywzMS4wODg4NzkzIEM4Ni42NTc0MzMxLDMwLjk2ODk0ODMgODYuOTI1NDgyMiwzMC44NDkwMTcyIDg3LjE5NTE1MDksMzAuNzMzOTQ4MyBDODcuMzg1NDU3NywzMC42NTA0ODI4IDg3LjU3NjU3NDIsMzAuNTcwMjU4NiA4Ny43NzAxMjAyLDMwLjQ5MDAzNDUgQzg4LjAzOTc4OSwzMC4zNzczOTY2IDg4LjMxMTg4NzEsMzAuMjY2Mzc5MyA4OC41ODQ3OTUxLDMwLjE1Nzc5MzEgQzg4Ljc3NjcyMTUsMzAuMDgxNjIwNyA4OC45Njk0NTc3LDMwLjAwNDYzNzkgODkuMTYwNTc0MiwyOS45MzA4OTY2IEM4OS40MTA4MDc0LDI5LjgzNTI3NTkgODkuNjYxMDQwNSwyOS43NDIwODYyIDg5LjkxMjg5MzMsMjkuNjQ5NzA2OSBDODkuOTE1MzIyNywyOS42NDg4OTY2IDkwLjAwNDQwMjUsMjkuNjE1NjcyNCA5MC4wMDYwMjIxLDI5LjYxNDg2MjEgTDkwLjE0NDUwMDYsMjkuNTYzIEM5MC4yODYyMTg0LDI5LjUxMTk0ODMgOTAuNDI3MTI2NCwyOS40NTkyNzU5IDkwLjU3MTI3MzYsMjkuNDA5MDM0NSBDOTAuNjg1NDU3NywyOS4zNjc3MDY5IDkwLjgwMTI2MTMsMjkuMzI4ODEwMyA5MC45MTYyNTUyLDI5LjI4OTkxMzggTDkxLjAyODgxOTYsMjkuMjUxODI3NiBDOTEuMTc5NDQ1NCwyOS4xOTkxNTUyIDkxLjMzMDg4MSwyOS4xNDcyOTMxIDkxLjQ4MzkzNjIsMjkuMDk1NDMxIEw5Mi40NTI0NzYxLDI4Ljc4MDIwNjkgQzkyLjg4OTc3NjcsMjguNjQyNDQ4MyA5My4zMjcwNzczLDI4LjUwNzkzMSA5My43NjY4MDc0LDI4LjM3OTg5NjYgQzkzLjk2NjAyMjEsMjguMzIyMzYyMSA5NC4xNjYwNDY2LDI4LjI2NjQ0ODMgOTQuMzY3NjkwOCwyOC4yMDk3MjQxIEM5NC43NzA5NzkxLDI4LjA5Nzg5NjYgOTUuMTc1ODg3MSwyNy45ODg1IDk1LjU4MzIyNDUsMjcuODgzOTY1NSBMOTUuNzIyNTEyOSwyNy44NDkxMjA3IEM5NS44Njk4OTk0LDI3LjgxMDIyNDEgOTYuMDE2NDc2MSwyNy43NzIxMzc5IDk2LjE2Mzg2MjYsMjcuNzM1NjcyNCBDOTYuNjUyMTgxNiwyNy42MTY1NTE3IDk3LjE0MTMxMDQsMjcuNTAyMjkzMSA5Ny42MzY5MTc4LDI3LjM5MzcwNjkgTDk3Ljk0MDU5ODgsMjcuMzI0ODI3NiBDOTguNTMwOTU0NiwyNy4xOTc2MDM0IDk5LjEyMjkzMDEsMjcuMDgxNzI0MSA5OS43MTQwOTU3LDI2Ljk3MzEzNzkgTDEwMC4xMDc2NjYsMjYuOTA1ODc5MyBDMTAwLjcwMTI2MSwyNi44MDA1MzQ1IDEwMS4yOTQwNDcsMjYuNzA1NzI0MSAxMDEuODg3NjQyLDI2LjYxODIwNjkgTDEwMi4zNTI0NzYsMjYuNTUwOTQ4MyBDMTAzLjAzMjcyMSwyNi40NTY5NDgzIDEwMy43MTk0NDUsMjYuMzc1MTAzNCAxMDQuMzkyNDAyLDI2LjMwNjIyNDEgTDEwNC45MjQ0NTIsMjYuMjU2NzkzMSBDMTA1LjMxMzE2MywyNi4yMjAzMjc2IDEwNS43MDEwNjUsMjYuMTg3MTAzNCAxMDYuMDg5Nzc3LDI2LjE1OTU1MTcgQzEwNi4yOTc4OTksMjYuMTQ0MTU1MiAxMDYuNTA1MjEyLDI2LjEzMTE4OTcgMTA2LjcxODE5NCwyNi4xMTgyMjQxIEMxMDYuOTY1OTk4LDI2LjEwMzYzNzkgMTA3LjIxMjE4MiwyNi4wOTIyOTMxIDEwNy40NTkxNzUsMjYuMDgwOTQ4MyBMMTA3LjUxOTkxMiw0NS4yODQ1IEw4OS42Mjc4MzgsNTUuNjIxMjU4NiBMODYuMzQyNDE0Nyw0Ny43MTMxMDM0IEM4Ni4wMjkwMTYsNDYuOTU3MDUxNyA4NS41MDE4MjU4LDQ2LjQzNTE4OTcgODQuODE3NTMxMyw0Ni4yMDI2MjA3IEM4NC4wMDIwNDY2LDQ1LjkyNTQ4MjggODMuMDEwODMxOSw0Ni4wODgzNjIxIDgyLjAyMjg1NjQsNDYuNjU5NjU1MiBDODAuMzgyMTY5Myw0Ny42MDc3NTg2IDc5LjAwNTQ4MjIsNDkuNDg0NTE3MiA3OC40MzA1MTI5LDUxLjU1OSBMNzYuMjQ0MDA5OCw1OS40NTkwNTE3IEw3Ni4yNDQwMDk4LDU3LjQ1OTkzMSBaIE01OC4wMzEyNDkxLDExLjkwMTUzNDUgTDMuMjI1MzM0OTcsNDMuNjE4NDMxIEwzLjIyNTMzNDk3LDM3Ljc5NTI5MzEgQzMuMjI1MzM0OTcsMzUuMDY3NjcyNCA0LjY5MTEwMTg0LDMyLjUyNTYyMDcgNy4wNTA5MDU1MiwzMS4xNjAxODk3IEw1NC4zMDQ0NzYxLDMuODE0MjkzMSBDNTUuMDgyNzA5MiwzLjM2MjkzMTAzIDU2LjAxMDc1ODMsMy4zNjIxMjA2OSA1Ni43ODgxODE2LDMuODEyNjcyNDEgQzU3LjU2NjQxNDcsNC4yNjE2MDM0NSA1OC4wMzEyNDkxLDUuMDY2Mjc1ODYgNTguMDMxMjQ5MSw1Ljk2NDk0ODI4IEw1OC4wMzEyNDkxLDExLjkwMTUzNDUgWiBNMTI3LjIwOTc3NywyNS40Mzk5NjU1IEMxMjcuMTQ5ODUsMjUuNDA2NzQxNCAxMjcuMDg5OTI0LDI1LjM3NDMyNzYgMTI3LjAyOTk5OCwyNS4zNDI3MjQxIEMxMjYuOTUzMDY1LDI1LjMwMjIwNjkgMTI2Ljg4MDE4MiwyNS4yNjA4NzkzIDEyNi44MDMyNDksMjUuMjIwMzYyMSBDMTI2LjgwMjQzOSwyNS4yMTk1NTE3IDEyNi44MDE2MjksMjUuMjE5NTUxNyAxMjYuODAxNjI5LDI1LjIxOTU1MTcgQzEyNi42NDEyODYsMjUuMTM1Mjc1OSAxMjYuNDc5MzIzLDI1LjA1NDI0MTQgMTI2LjMxNTc0LDI0Ljk3MzIwNjkgQzEyNi4yOTcxMTQsMjQuOTY0MjkzMSAxMjYuMjc5Mjk4LDI0Ljk1NTM3OTMgMTI2LjI2MTQ4MiwyNC45NDU2NTUyIEMxMjYuMTU3ODI2LDI0Ljg5NTQxMzggMTI2LjA1MDkzLDI0Ljg0NTk4MjggMTI1LjkwNjc4MywyNC43Nzg3MjQxIEMxMjUuOTAzNTQ0LDI0Ljc3NjI5MzEgMTI1Ljg2NDY3MiwyNC43NTg0NjU1IDEyNS44NjA2MjMsMjQuNzU2MDM0NSBDMTI1Ljg0MzYxNywyNC43NDc5MzEgMTI1LjgyNDk5MSwyNC43NDE0NDgzIDEyNS44MDc5ODUsMjQuNzMyNTM0NSBDMTI1LjQ5Mjk2NywyNC41ODgyOTMxIDEyNS4xNzE0NywyNC40NDgxMDM0IDEyNC44NDUxMTQsMjQuMzEzNTg2MiBDMTI0Ljc5MjQ3NiwyNC4yOTA4OTY2IDEyNC43NDIyNjcsMjQuMjY2NTg2MiAxMjQuNjg4ODIsMjQuMjQ1NTE3MiBMMTI0LjU2MDg2OSwyNC4xOTEyMjQxIEMxMjQuNDg3OTg1LDI0LjE2MTI0MTQgMTI0LjQxNTEwMiwyNC4xMzEyNTg2IDEyNC4zNDA1OTksMjQuMTAyMDg2MiBDMTI0LjMxOTU0NCwyNC4wOTMxNzI0IDEyNC4yOTYwNTksMjQuMDg1ODc5MyAxMjQuMjc0MTk0LDI0LjA3Nzc3NTkgQzEyNC4yNTIzMjksMjQuMDY4ODYyMSAxMjQuMjI4MDM0LDI0LjA2MDc1ODYgMTI0LjIwNjE2OSwyNC4wNTE4NDQ4IEMxMjMuOTUzNTA3LDIzLjk1NjIyNDEgMTIzLjY5NzYwNSwyMy44NjMwMzQ1IDEyMy40MzkyNzQsMjMuNzcxNDY1NSBMMTIzLjI4NzgzOCwyMy43MTYzNjIxIEMxMjMuMjA1MjM3LDIzLjY4NjM3OTMgMTIzLjEyMTgyNiwyMy42NTYzOTY2IDEyMy4wMzc2MDUsMjMuNjI4MDM0NSBDMTIyLjU5NTQ0NSwyMy40Nzg5MzEgMTIyLjE0NTk5OCwyMy4zMzk1NTE3IDEyMS42ODY4MzIsMjMuMjA3NDY1NSBDMTIxLjI2ODE1NywyMy4wODgzNDQ4IDEyMC44NDMwMDQsMjIuOTc2NTE3MiAxMjAuNDEwNTYyLDIyLjg3MDM2MjEgQzEyMC4zMzM2MjksMjIuODUxNzI0MSAxMjAuMjU1MDc3LDIyLjgzNDcwNjkgMTIwLjE3NzMzNSwyMi44MTY4NzkzIEwxMjAuMDQxMjg2LDIyLjc4Njg5NjYgQzExOS43Mjg2OTcsMjIuNzEzOTY1NSAxMTkuNDE0NDg4LDIyLjY0MTg0NDggMTE5LjA5NDYxMSwyMi41NzYyMDY5IEwxMTguNjY3ODM4LDIyLjQ5NTk4MjggQzExOC4zNzIyNTUsMjIuNDM4NDQ4MyAxMTguMDc2NjcyLDIyLjM4MTcyNDEgMTE3Ljc3NzA0LDIyLjMzMTQ4MjggQzExNy42NTQ3NTgsMjIuMzExMjI0MSAxMTcuNTMxNjY2LDIyLjI5MjU4NjIgMTE3LjQwODU3NCwyMi4yNzMxMzc5IEwxMTcuMjU3MTM5LDIyLjI0OTYzNzkgQzExNi45ODE4MDEsMjIuMjA2Njg5NyAxMTYuNzA3Mjc0LDIyLjE2NDU1MTcgMTE2LjQzMDMxNywyMi4xMjcyNzU5IEMxMTYuMjY1MTE0LDIyLjEwNTM5NjYgMTE2LjA5OTEwMiwyMi4wODUxMzc5IDExNS45MzMwOSwyMi4wNjQwNjkgTDExNS44NjQyNTUsMjIuMDU1OTY1NSBDMTE1LjYwOTE2MywyMi4wMjUxNzI0IDExNS4zNTI0NTIsMjEuOTk1MTg5NyAxMTUuMTEwMzE3LDIxLjk3MDg3OTMgQzExNS4xMDQ2NDgsMjEuOTcwMDY5IDExNS4wNTI4MiwyMS45NjM1ODYyIDExNS4wNDc5NjEsMjEuOTYzNTg2MiBDMTE0Ljg1NTIyNSwyMS45NDQxMzc5IDExNC42NjAwNTksMjEuOTI0Njg5NyAxMTQuNDYzMjc0LDIxLjkwNjg2MjEgQzExNC4xOTY4NDQsMjEuODgzMzYyMSAxMTMuOTI4Nzk1LDIxLjg2MjI5MzEgMTEzLjY1OTEyNiwyMS44NDI4NDQ4IEMxMTMuNDQyMDk2LDIxLjgyNjYzNzkgMTEzLjIyNTA2NSwyMS44MTEyNDE0IDExMy4wMTQ1MTMsMjEuNzk5MDg2MiBMMTEyLjkyMDU3NCwyMS43OTQyMjQxIEMxMTIuNjgxNjc5LDIxLjc4MDQ0ODMgMTEyLjQ0MTE2MywyMS43NjgyOTMxIDExMi4xOTk4MzgsMjEuNzU3NzU4NiBDMTExLjk4MzYxNywyMS43NDg4NDQ4IDExMS43NjY1ODcsMjEuNzM5OTMxIDExMS41NDc5MzYsMjEuNzMzNDQ4MyBDMTExLjMyMzYxNywyMS43MjYxNTUyIDExMS4wOTg0ODgsMjEuNzIyOTEzOCAxMTAuODcyNTUsMjEuNzIwNDgyOCBMMTEwLjc4ODMyOSwyMS43MTg4NjIxIEMxMTAuMjc0MDk2LDIxLjcxMDc1ODYgMTA5Ljc2MTQ4MiwyMS43MDk5NDgzIDEwOS4yMzgzNDEsMjEuNzE3MjQxNCBDMTA4Ljk2ODY3MiwyMS43MjEyOTMxIDEwOC42OTk4MTMsMjEuNzI0NTM0NSAxMDguNDI4NTI1LDIxLjczMzQ0ODMgQzEwOC4yNTQ0MTUsMjEuNzM4MzEwMyAxMDguMDc5NDk0LDIxLjc0NTYwMzQgMTA3LjkwNDU3NCwyMS43NTI4OTY2IEwxMDcuNzU3MTg4LDIxLjc1Nzc1ODYgQzEwNy4zODIyNDMsMjEuNzczOTY1NSAxMDcuMDA1Njc5LDIxLjc5MjYwMzQgMTA2LjYyMDIwNiwyMS44MTY5MTM4IEMxMDYuNDA3MjI1LDIxLjgyOTA2OSAxMDYuMTk1MDUzLDIxLjg0Mjg0NDggMTA1Ljk4MjA3MSwyMS44NTc0MzEgQzEwNS41ODQ0NTIsMjEuODg2NjAzNCAxMDUuMTg2MDIyLDIxLjkyMTQ0ODMgMTA0Ljc4NTE2MywyMS45NTc5MTM4IEwxMDQuMjQwOTY3LDIyLjAwODE1NTIgQzEwMy41NjM5NjEsMjIuMDc3MDM0NSAxMDIuODYwMjMxLDIyLjE2MTMxMDMgMTAyLjE1MDAyMiwyMi4yNjAxNzI0IEwxMDEuNjczMDQsMjIuMzI5MDUxNyBDMTAxLjA2NDg2OSwyMi40MTczNzkzIDEwMC40NTc1MDcsMjIuNTE1NDMxIDk5Ljg0NjA5NTcsMjIuNjIzMjA2OSBMOTkuNDQ2MDQ2NiwyMi42OTIwODYyIEM5OC44Mzk0OTQ1LDIyLjgwMzEwMzQgOTguMjMzNzUyMSwyMi45MjIyMjQxIDk3LjYyMzE1MDksMjMuMDUzNSBMOTcuMzEyMTgxNiwyMy4xMjQgQzk2LjgxMDA5NTcsMjMuMjM1MDE3MiA5Ni4zMDgwMDk4LDIzLjM1MDA4NjIgOTUuODA4MzUzNCwyMy40NzQ4NzkzIEM5NS42MzkxMDE4LDIzLjUxNTM5NjYgOTUuNDcwNjYwMSwyMy41NTkxNTUyIDk1LjMwMjIxODQsMjMuNjAyOTEzOCBMOTUuMjEyMzI4OCwyMy42MjU2MDM0IEM5NC43OTYwODM0LDIzLjczMjU2OSA5NC4zODA2NDc5LDIzLjg0NDM5NjYgOTMuOTY2MDIyMSwyMy45NTk0NjU1IEM5My43NjExMzg3LDI0LjAxNyA5My41NTYyNTUyLDI0LjA3NDUzNDUgOTMuMzUwNTYyLDI0LjEzMzY4OTcgQzkyLjkwMDMwNDMsMjQuMjY0OTY1NSA5Mi40NTE2NjYzLDI0LjQwMjcyNDEgOTIuMDAzODM4LDI0LjU0NDUzNDUgTDkxLjgxNzU4MDQsMjQuNjAyMDY5IEM5MS43MjIwMjIxLDI0LjYzMTI0MTQgOTEuNjI3MjczNiwyNC42NjA0MTM4IDkxLjUzMzMzNSwyNC42OTEyMDY5IEM5MS40MTUxMDE4LDI0LjcyOTI5MzEgOTEuMjk2ODY4NywyNC43Njk4MTAzIDkxLjE3ODYzNTYsMjQuODEwMzI3NiBMOTAuMDc0MDQ2NiwyNS4xODg3NTg2IEM4OS45MjUwNDA1LDI1LjI0MTQzMSA4OS43Nzc2NTQsMjUuMjk1NzI0MSA4OS42MzAyNjc1LDI1LjM1MDAxNzIgTDg5LjM5Nzg1MDMsMjUuNDM1OTEzOCBDODkuMTQwMzI4OCwyNS41MzE1MzQ1IDg4Ljg4MjgwNzQsMjUuNjI2MzQ0OCA4OC42MjYwOTU3LDI1LjcyNTIwNjkgQzg4LjQyNjg4MSwyNS44MDIxODk3IDg4LjIzMDA5NTcsMjUuODc5MTcyNCA4OC4wMzQxMjAyLDI1Ljk1ODU4NjIgQzg3Ljc1MzExNDEsMjYuMDcwNDEzOCA4Ny40NzM3Mjc2LDI2LjE4MzA1MTcgODcuMTk1OTYwNywyNi4yOTk3NDE0IEM4Ny4xMDkzMTA0LDI2LjMzNjIwNjkgODcuMDIyNjYwMSwyNi4zNzI2NzI0IDg2LjkzNjAwOTgsMjYuNDA5OTQ4MyBDODYuODk4NzU4MywyNi40MjUzNDQ4IDg2Ljg2MDY5NjksMjYuNDQxNTUxNyA4Ni44MjI2MzU2LDI2LjQ1Njk0ODMgQzg2Ljc1MDU2MiwyNi40ODc3NDE0IDg2LjY3NzY3ODUsMjYuNTE3NzI0MSA4Ni42MDU2MDQ5LDI2LjU0OTMyNzYgQzg2LjMyNzgzOCwyNi42NjkyNTg2IDg2LjA1MjUwMDYsMjYuNzkxNjIwNyA4NS43Nzg3ODI4LDI2LjkxNTYwMzQgQzg1LjcxMDc1ODMsMjYuOTQ2Mzk2NiA4NS42NDM1NDM2LDI2Ljk3NzE4OTcgODUuNTc1NTE5LDI3LjAwNzE3MjQgQzg1LjQ4NjQzOTMsMjcuMDQ4NSA4NS4zOTY1NDk3LDI3LjA4OTAxNzIgODUuMzA3NDY5OSwyNy4xMjk1MzQ1IEM4NS4yNzM0NTc3LDI3LjE0NTc0MTQgODUuMjM5NDQ1NCwyNy4xNTk1MTcyIDg1LjIwNjI0MjksMjcuMTc1NzI0MSBDODUuMDQxMDQwNSwyNy4yNTI3MDY5IDg0Ljg3ODI2NzUsMjcuMzMxMzEwMyA4NC43MTU0OTQ1LDI3LjQwOTkxMzggTDg0LjIwNzczOTksMjcuNjU0NjM3OSBDODQuMTk1NTkyNiwyNy42NjExMjA3IDg0LjE4MzQ0NTQsMjcuNjY2NzkzMSA4NC4xNzEyOTgyLDI3LjY3MjQ2NTUgQzg0LjA3MDg4MSwyNy43MjE4OTY2IDgzLjk3MDQ2MzgsMjcuNzY5NzA2OSA4My44NzA4NTY0LDI3LjgxOTk0ODMgQzgzLjg1ODcwOTIsMjcuODI2NDMxIDgzLjg0NjU2MiwyNy44MzIxMDM0IDgzLjgzNDQxNDcsMjcuODM3Nzc1OSBDODMuNzI1ODk5NCwyNy44OTI4NzkzIDgzLjYxOTgxMzUsMjcuOTQ3OTgyOCA4My41MTI5MTc4LDI4LjAwMzg5NjYgTDgzLjE1NDk3OTEsMjguMTkwMjc1OSBDODIuOTM2MzI4OCwyOC4zMDQ1MzQ1IDgyLjcxNTI0OTEsMjguNDE1NTUxNyA4Mi40OTkwMjgyLDI4LjUzMjI0MTQgTDgyLjQ5MzM1OTUsMjguNTM1NDgyOCBDODIuMDUxMiwyOC43NzQ1MzQ1IDgxLjYxMzA4OTYsMjkuMDE3NjM3OSA4MS4xODIyNjc1LDI5LjI2ODg0NDggQzgwLjc5NTE3NTUsMjkuNDkzMzEwMyA4MC40MjAyMzA3LDI5LjcyMzQ0ODMgODAuMDUwOTU0NiwyOS45NTI3NzU5IEw3OS43NjI2NjAxLDMwLjEzMTA1MTcgQzc5Ljc1NjE4MTYsMzAuMTM1MTAzNCA3OS43NTA1MTI5LDMwLjEzOTE1NTIgNzkuNzQ0ODQ0MiwzMC4xNDIzOTY2IEM3OS42MDE1MDY3LDMwLjIzMjM0NDggNzkuNDY1NDU3NywzMC4zMjU1MzQ1IDc5LjMyNDU0OTcsMzAuNDE3MTAzNCBMNzkuMjg4MTA4LDMwLjQ0MDYwMzQgQzc5LjIyNzM3MTgsMzAuNDgwMzEwMyA3OS4xNjk4NzQ4LDMwLjUyMDAxNzIgNzkuMTA5OTQ4NSwzMC41NTk3MjQxIEM3Mi4zODkyODU5LDM0Ljk3NzcyNDEgNjguNDQyMjQyOSw0MC4zMjM1NjkgNjguMDcyMTU3MSw0NS41NTY3NzU5IEw2OC4wNTExMDE4LDQ1Ljg0NzY4OTcgQzY4LjA0Nzg2MjYsNDUuOTA5Mjc1OSA2OC4wNTExMDE4LDQ1Ljk3MDg2MjEgNjguMDQ4NjcyNCw0Ni4wMzMyNTg2IEM2OC4wNDU0MzMxLDQ2LjE0ODMyNzYgNjguMDMyNDc2MSw0Ni4yNjQyMDY5IDY4LjAzMjQ3NjEsNDYuMzc4NDY1NSBDNjguMDM4MTQ0OCw1MC4wMjUwMTcyIDY5Ljc5OTQ5NDUsNTMuMjI3NSA3My4xNDU2NTQsNTUuNzUwOTEzOCBDNzMuMTU1MzcxOCw1NS43NTgyMDY5IDczLjE2NTg5OTQsNTUuNzY2MzEwMyA3My4xNzY0MjcsNTUuNzczNjAzNCBDNzMuMzYxODc0OCw1NS45MTI5ODI4IDczLjU1MDU2Miw1Ni4wNDk5MzEgNzMuNzQ1NzI3Niw1Ni4xODUyNTg2IEM3My43ODM3ODksNTYuMjExMTg5NyA3My44MjE4NTAzLDU2LjIzNzkzMSA3My44NTk5MTE3LDU2LjI2Mzg2MjEgQzczLjg3NDQ4ODMsNTYuMjczNTg2MiA3My44ODY2MzU2LDU2LjI4MzMxMDMgNzMuOTAwNDAyNSw1Ni4yOTMwMzQ1IEw3My4xODkzODQsNTYuNzAzMDY5IEwzOC41NjQ4OTMzLDM2LjY5OTcwNjkgTDY4LjIyODQ1MTUsMTkuNTMzMzYyMSBDNjguMjMyNTAwNiwxOS41MzA5MzEgNjguMjM3MzU5NSwxOS41Mjc2ODk3IDY4LjI0MTQwODYsMTkuNTI2MDY5IEw5My4zNzY0NzYxLDQuOTc5NTY4OTcgTDEyOC4wMDAxNTcsMjQuOTgzNzQxNCBMMTI3LjIwOTc3NywyNS40Mzk5NjU1IFogTTEyOC4wMDUwMTYsMjkuMjMzMTg5NyBDMTI4LjAxMzkyNCwyOS4xNzI0MTM4IDEyOC4wMTIzMDQsMjkuMTEwODI3NiAxMjguMDA1MDE2LDI5LjA0OTI0MTQgTDEyOC4wMTE0OTQsMjYuNjk3NjIwNyBMMTI4Ljc0NDM3OCwyNi4yNzQ2MjA3IEwxMjguNzQ0Mzc4LDU3Ljc0MTkzMSBMMTI3LjkyOTcwMyw1OC4yMTM1NTE3IEwxMjguMDA1MDE2LDI5LjIzMzE4OTcgWiBNMTA4LjI2NjU2Miw0Ni41NzM3NTg2IEwxMTkuNDkyMjMxLDUzLjA1OTc1ODYgQzExOS4zMzE4ODcsNTMuMDIzMjkzMSAxMTkuMTczMTYzLDUyLjk4NjAxNzIgMTE5LjAxMDM5LDUyLjk1Mjc5MzEgQzExOC45MTQwMjIsNTIuOTMyNTM0NSAxMTguODE2MDM0LDUyLjkxNDcwNjkgMTE4LjcxODA0Nyw1Mi44OTYwNjkgTDExOC41ODExODgsNTIuODcwOTQ4MyBDMTE4LjI4NjQxNSw1Mi44MTQyMjQxIDExNy45OTI0NTIsNTIuNzU4MzEwMyAxMTcuNjkyMDEsNTIuNzA3MjU4NiBDMTE3LjU2ODEwOCw1Mi42ODYxODk3IDExNy40NDI1ODcsNTIuNjY3NTUxNyAxMTcuMzE3ODc1LDUyLjY0ODEwMzQgTDExNy4xNjk2NzksNTIuNjI0NjAzNCBDMTE2Ljg5NTk2MSw1Mi41ODI0NjU1IDExNi42MjE0MzMsNTIuNTQxMTM3OSAxMTYuMzQyODU2LDUyLjUwMzA1MTcgQzExNi4xNTQ5NzksNTIuNDc4NzQxNCAxMTUuOTY2MjkyLDUyLjQ1NDQzMSAxMTUuNzc1OTg1LDUyLjQzMTc0MTQgQzExNS41MDU1MDcsNTIuMzk5MzI3NiAxMTUuMjM1MDI4LDUyLjM2NzcyNDEgMTE0Ljk2MDUwMSw1Mi4zMzkzNjIxIEMxMTQuNzY3NzY0LDUyLjMxOTEwMzQgMTE0LjU3MjU5OSw1Mi4zMDEyNzU5IDExNC4zNzgyNDMsNTIuMjgyNjM3OSBDMTE0LjExMTgxMyw1Mi4yNTkxMzc5IDExMy44NDIxNDUsNTIuMjM4MDY5IDExMy41NzI0NzYsNTIuMjE3ODEwMyBDMTEzLjM1NjI1NSw1Mi4yMDI0MTM4IDExMy4xMzkyMjUsNTIuMTg3MDE3MiAxMTIuOTIyMTk0LDUyLjE3NDg2MjEgQzExMi42NTQxNDUsNTIuMTU4NjU1MiAxMTIuMzg0NDc2LDUyLjE0NTY4OTcgMTEyLjExNTYxNyw1Mi4xMzQzNDQ4IEMxMTEuODk4NTg3LDUyLjEyNDYyMDcgMTExLjY4MDc0Niw1Mi4xMTU3MDY5IDExMS40NjA0NzYsNTIuMTA5MjI0MSBDMTExLjIzNjE1Nyw1Mi4xMDE5MzEgMTExLjAxMTAyOCw1Mi4wOTg2ODk3IDExMC43ODY3MDksNTIuMDk1NDQ4MyBMMTEwLjcwMjQ4OCw1Mi4wOTM4Mjc2IEMxMTAuMTg2NjM2LDUyLjA4NjUzNDUgMTA5LjY2ODM1Myw1Mi4wODU3MjQxIDEwOS4xNTI1MDEsNTIuMDkzMDE3MiBDMTA4Ljg4MjgzMiw1Mi4wOTcwNjkgMTA4LjYxMzE2Myw1Mi4xMDExMjA3IDEwOC4zNDI2ODUsNTIuMTA5MjI0MSBDMTA4LjExOTk4NSw1Mi4xMTU3MDY5IDEwNy44OTY0NzYsNTIuMTI0NjIwNyAxMDcuNjczNzc3LDUyLjEzNDM0NDggQzEwNy4yOTcyMTIsNTIuMTQ4OTMxIDEwNi45MTk4MzgsNTIuMTY4Mzc5MyAxMDYuNTQxNjU0LDUyLjE5MTg3OTMgQzEwNi4zMjcwNTMsNTIuMjA0ODQ0OCAxMDYuMTEyNDUyLDUyLjIxNzgxMDMgMTA1Ljg5Nzg1LDUyLjIzNDAxNzIgQzEwNS40OTg2MTEsNTIuMjYyMzc5MyAxMDUuMDk4NTYyLDUyLjI5NjQxMzggMTA0LjY5OTMyMyw1Mi4zMzM2ODk3IEwxMDQuNTIzNTkzLDUyLjM0OTA4NjIgQzEwNC40MDA1MDEsNTIuMzYwNDMxIDEwNC4yNzc0MDksNTIuMzcxNzc1OSAxMDQuMTUzNTA3LDUyLjM4MzkzMSBDMTAzLjQ3ODkzLDUyLjQ1MjgxMDMgMTAyLjc3NTIsNTIuNTM3ODk2NiAxMDIuMDYwMTMzLDUyLjYzNTk0ODMgTDEwMS41ODk2MjksNTIuNzA0ODI3NiBDMTAwLjk4MDY0OCw1Mi43OTMxNTUyIDEwMC4zNzE2NjYsNTIuODkwMzk2NiA5OS43NjI2ODQ3LDUyLjk5ODE3MjQgTDk5LjM1OTM5NjMsNTMuMDY3ODYyMSBDOTguNzUzNjU0LDUzLjE3OTY4OTcgOTguMTQ3MTAxOCw1My4yOTggOTcuNTQxMzU5NSw1My40Mjc2NTUyIEw5Ny4yMjcxNTA5LDUzLjQ5OTc3NTkgQzk2LjcyMzQ0NTQsNTMuNjA5OTgyOCA5Ni4yMjIxNjkzLDUzLjcyNjY3MjQgOTUuNzIwODkzMyw1My44NTA2NTUyIEM5NS42OTE3Mzk5LDUzLjg1NzEzNzkgOTUuNjYyNTg2NSw1My44NjUyNDE0IDk1LjYzNDI0MjksNTMuODcxNzI0MSBMMTA4LjI2NjU2Miw0Ni41NzM3NTg2IFogTTEwOS4wMDkxNjMsNDUuMjgyODc5MyBMMTA4Ljk0ODQyNywyNi4wMjkwODYyIEMxMDkuMDUyODkzLDI2LjAyNjY1NTIgMTA5LjE1NjU1LDI2LjAyNDIyNDEgMTA5LjI2MDIwNiwyNi4wMjI2MDM0IEMxMDkuNzY1NTMxLDI2LjAxNTMxMDMgMTEwLjI2NTk5OCwyNi4wMTUzMTAzIDExMC43NjY0NjQsMjYuMDIzNDEzOCBMMTEwLjg0OTg3NSwyNi4wMjQyMjQxIEMxMTEuMDY4NTI1LDI2LjAyODI3NTkgMTExLjI4NzE3NSwyNi4wMzE1MTcyIDExMS41MDI1ODcsMjYuMDM4IEMxMTEuNzE0NzU4LDI2LjA0MzY3MjQgMTExLjkyNTMxLDI2LjA1MzM5NjYgMTEyLjEzNzQ4MiwyNi4wNjMxMjA3IEMxMTIuMzcxNTE5LDI2LjA3MjAzNDUgMTEyLjYwMzEyNiwyNi4wODMzNzkzIDExMi44Mzk1OTMsMjYuMDk3MTU1MiBDMTEyLjg0MTIxMiwyNi4wOTcxNTUyIDExMi45MTgxNDUsMjYuMTAxMjA2OSAxMTIuOTE5NzY0LDI2LjEwMTIwNjkgQzExMy4xMzExMjYsMjYuMTEzMzYyMSAxMTMuMzQwODY5LDI2LjEyNzk0ODMgMTEzLjU1MDYxMSwyNi4xNDQxNTUyIEMxMTMuODExMzcyLDI2LjE2Mjc5MzEgMTE0LjA3MTMyMywyNi4xODMwNTE3IDExNC4zMzA0NjQsMjYuMjA3MzYyMSBDMTE0LjUxOTE1MSwyNi4yMjM1NjkgMTE0LjcwNjIxOCwyNi4yNDEzOTY2IDExNC45NDEwNjUsMjYuMjY2NTE3MiBDMTE1LjE5MDQ4OCwyNi4yOTI0NDgzIDExNS40Mzc0ODIsMjYuMzIgMTE1LjY4Mjg1NiwyNi4zNDk5ODI4IEMxMTUuODY2Njg1LDI2LjM3MjY3MjQgMTE2LjA0ODg5MywyNi4zOTUzNjIxIDExNi4yMjk0ODIsMjYuNDE4ODYyMSBDMTE2LjQ5NzUzMSwyNi40NTUzMjc2IDExNi43NjMxNTEsMjYuNDk1ODQ0OCAxMTcuMDI5NTgsMjYuNTM3OTgyOCBMMTE3LjE0NTM4NCwyNi41NTU4MTAzIEMxMTcuMjczMzM1LDI2LjU3NTI1ODYgMTE3LjQwMjA5NiwyNi41OTQ3MDY5IDExNy41MzAwNDcsMjYuNjE2NTg2MiBDMTE3LjgxNzUzMSwyNi42NjUyMDY5IDExOC4xMDE3NzcsMjYuNzE4Njg5NyAxMTguMzg1MjEyLDI2Ljc3Mzc5MzEgTDExOC43OTc0MDksMjYuODUyMzk2NiBDMTE5LjEwMjcwOSwyNi45MTQ3OTMxIDExOS40MDMxNTEsMjYuOTgzNjcyNCAxMTkuNzAyNzgzLDI3LjA1NDE3MjQgTDEyMC4wNTgyOTIsMjcuMTMzNTg2MiBDMTIwLjQ3MTI5OCwyNy4yMzQwNjkgMTIwLjg3NzgyNiwyNy4zNDE4NDQ4IDEyMS4yNzc4NzUsMjcuNDU2MTAzNCBDMTIxLjcxNDM2NiwyNy41ODA4OTY2IDEyMi4xNDM1NjgsMjcuNzE0NjAzNCAxMjIuNTY0NjcyLDI3Ljg1NjQxMzggQzEyMi42MzUxMjYsMjcuODc5OTEzOCAxMjIuNzA1NTgsMjcuOTA1MDM0NSAxMjIuNzc1MjI1LDI3LjkzMTc3NTkgTDEyMi45NDUyODYsMjcuOTkyNTUxNyBDMTIzLjIzMjc3MSwyOC4wOTQ2NTUyIDEyMy41MjAyNTUsMjguMTk2NzU4NiAxMjMuNzk5NjQyLDI4LjMwNTM0NDggQzEyMy44NjExODgsMjguMzI5NjU1MiAxMjMuOTIwMzA0LDI4LjM1Mzk2NTUgMTIzLjk4MDIzMSwyOC4zNzkwODYyIEwxMjQuMTI3NjE3LDI4LjQ0MDY3MjQgQzEyNC41MDMzNzIsMjguNTkzODI3NiAxMjQuODcxODM4LDI4Ljc1NDI3NTkgMTI1LjIzMzAxNiwyOC45MjM2Mzc5IEwxMjUuNjA2MzQxLDI5LjA5OTQ4MjggQzEyNS43Nzk2NDIsMjkuMTg0NTY5IDEyNS45NTA1MTMsMjkuMjcyMDg2MiAxMjYuMTE3MzM1LDI5LjM1NzE3MjQgQzEyNi4yNTE3NjQsMjkuNDI3NjcyNCAxMjYuMzgyMTQ1LDI5LjUwMTQxMzggMTI2LjUxNDE0NSwyOS41NzI3MjQxIEwxMjYuNDQ3NzQsNTUuMzU3MDg2MiBMMTA5LjAwOTE2Myw0NS4yODI4NzkzIFogTTc5LjEwOTEzODcsMzIuMzU0NjM3OSBDNzkuMTM3NDgyMiwzMi4zMzUxODk3IDc5LjE2NDIwNjEsMzIuMzE1NzQxNCA3OS4xOTE3Mzk5LDMyLjI5NjI5MzEgQzc5LjU4NzczOTksMzIuMDIxNTg2MiA3OS45OTUwNzczLDMxLjc1MjU1MTcgODAuNDEyMTMyNSwzMS40ODU5NDgzIEM4MC40NTUwNTI4LDMxLjQ1NzU4NjIgODAuNDk4NzgyOCwzMS40MjkyMjQxIDgwLjU0MjUxMjksMzEuNDAxNjcyNCBDODAuOTkzNTgwNCwzMS4xMTQ4MTAzIDgxLjQ1NTk4NTMsMzAuODM0NDMxIDgxLjkzMDUzNzQsMzAuNTU4MTAzNCBDODIuMzUwMDIyMSwzMC4zMTMzNzkzIDgyLjc3Njc5NTEsMzAuMDc1OTQ4MyA4My4yMDY4MDc0LDI5Ljg0MzM3OTMgTDg0LjAxODI0MjksMjkuNDIwMzc5MyBDODQuMTcwNDg4MywyOS4zNDI1ODYyIDg0LjMyMTExNDEsMjkuMjYxNTUxNyA4NC40NzQxNjkzLDI5LjE4NDU2OSBMODQuNTAxNzAzMSwyOS4xNzA3OTMxIEw4NS4zMDUwNDA1LDI4Ljc4MDIwNjkgQzg1LjQ4NDgxOTYsMjguNjk0MzEwMyA4NS42NjI5NzkxLDI4LjYwNjc5MzEgODUuODQ0Mzc3OSwyOC41MjI1MTcyIEM4Ni4wMjQ5NjY5LDI4LjQzOTA1MTcgODYuMjA3OTg1MywyOC4zNTYzOTY2IDg2LjM5MTAwMzcsMjguMjczNzQxNCBDODYuNjU3NDMzMSwyOC4xNTM4MTAzIDg2LjkyNTQ4MjIsMjguMDM0Njg5NyA4Ny4xOTUxNTA5LDI3LjkxODgxMDMgQzg3LjM4NjI2NzUsMjcuODM2MTU1MiA4Ny41NzgxOTM5LDI3Ljc1NTEyMDcgODcuNzcwMTIwMiwyNy42NzQwODYyIEM4OC4wMzk3ODksMjcuNTYyMjU4NiA4OC4zMTE4ODcxLDI3LjQ1MjA1MTcgODguNTg0Nzk1MSwyNy4zNDM0NjU1IEM4OC43NzY3MjE1LDI3LjI2NjQ4MjggODguOTY5NDU3NywyNy4xOTExMjA3IDg5LjE2MDU3NDIsMjcuMTE2NTY5IEM4OS40MTA4MDc0LDI3LjAyMDk0ODMgODkuNjYxMDQwNSwyNi45MjY5NDgzIDg5LjkxMjg5MzMsMjYuODM0NTY5IEM4OS45MTUzMjI3LDI2LjgzMzc1ODYgOTAuMDA0NDAyNSwyNi44MDA1MzQ1IDkwLjAwNjAyMjEsMjYuNzk5NzI0MSBMOTAuMTQ0NTAwNiwyNi43NDk0ODI4IEM5MC4yODYyMTg0LDI2LjY5NjgxMDMgOTAuNDI3MTI2NCwyNi42NDQ5NDgzIDkwLjU3MTI3MzYsMjYuNTkzODk2NiBMOTEuNjU0ODA3NCwyNi4yMjI3NTg2IEM5MS43NjczNzE4LDI2LjE4Mzg2MjEgOTEuODc5OTM2MiwyNi4xNDQ5NjU1IDkxLjk5NTczOTksMjYuMTA4NSBMOTIuNDUyNDc2MSwyNS45NjU4NzkzIEM5Mi44ODk3NzY3LDI1LjgyNzMxMDMgOTMuMzI3MDc3MywyNS42OTM2MDM0IDkzLjc2NjgwNzQsMjUuNTY1NTY5IEM5My45NjY4MzE5LDI1LjUwNzIyNDEgOTQuMTY2ODU2NCwyNS40NTEzMTAzIDk0LjM2NzY5MDgsMjUuMzk1Mzk2NiBDOTQuNzcwOTc5MSwyNS4yODE5NDgzIDk1LjE3NjY5NjksMjUuMTczMzYyMSA5NS41ODMyMjQ1LDI1LjA2ODgyNzYgTDk1LjY3MzkyMzksMjUuMDQ2MTM3OSBDOTUuODM3NTA2NywyNS4wMDQgOTYuMDAwMjc5OCwyNC45NjE4NjIxIDk2LjE2Mzg2MjYsMjQuOTIxMzQ0OCBDOTYuNjUyMTgxNiwyNC44MDE0MTM4IDk3LjE0MTMxMDQsMjQuNjg3MTU1MiA5Ny42MzA0MzkzLDI0LjU4MDE4OTcgTDk3Ljk0MDU5ODgsMjQuNTA5Njg5NyBDOTguNTMwOTU0NiwyNC4zODMyNzU5IDk5LjEyMjkzMDEsMjQuMjY2NTg2MiA5OS43MTQwOTU3LDI0LjE1OCBMMTAwLjEwNjg1NiwyNC4wODk5MzEgQzEwMC43MDEyNjEsMjMuOTg1Mzk2NiAxMDEuMjk0MDQ3LDIzLjg5MDU4NjIgMTAxLjg4NzY0MiwyMy44MDM4NzkzIEwxMDIuMzUyNDc2LDIzLjczNjYyMDcgQzEwMy4wNDY0ODgsMjMuNjQxIDEwMy43MzI0MDIsMjMuNTU4MzQ0OCAxMDQuMzkyNDAyLDIzLjQ5MTA4NjIgTDEwNC45MjI4MzIsMjMuNDQyNDY1NSBDMTA1LjMxMjM1MywyMy40MDYgMTA1LjcwMTA2NSwyMy4zNzI3NzU5IDEwNi4wODk3NzcsMjMuMzQ0NDEzOCBDMTA2LjI5Nzg5OSwyMy4zMjk4Mjc2IDEwNi41MDUyMTIsMjMuMzE2MDUxNyAxMDYuNzE5MDA0LDIzLjMwMzg5NjYgQzEwNy4wODc0NywyMy4yODEyMDY5IDEwNy40NTM1MDcsMjMuMjYyNTY5IDEwNy44MTc5MjQsMjMuMjQ3MTcyNCBMMTA3Ljk2NTMxLDIzLjI0MTUgQzEwOC4xMzM3NTIsMjMuMjM1MDE3MiAxMDguMzAzMDA0LDIzLjIyNzcyNDEgMTA4LjQ3MjI1NSwyMy4yMjI4NjIxIEMxMDguNzM1NDQ1LDIzLjIxNTU2OSAxMDguOTk3ODI2LDIzLjIxMTUxNzIgMTA5LjI2MDIwNiwyMy4yMDc0NjU1IEMxMDkuNzY1NTMxLDIzLjIwMDk4MjggMTEwLjI2NTk5OCwyMy4yMDE3OTMxIDExMC43NjY0NjQsMjMuMjA4Mjc1OSBMMTEwLjg0OTg3NSwyMy4yMDkwODYyIEMxMTEuMDY4NTI1LDIzLjIxMzEzNzkgMTExLjI4NzE3NSwyMy4yMTYzNzkzIDExMS41MDQyMDYsMjMuMjIyODYyMSBDMTExLjcxNjM3OCwyMy4yMjkzNDQ4IDExMS45MjYxMiwyMy4yMzkwNjkgMTEyLjEzNTg2MywyMy4yNDcxNzI0IEMxMTIuMzY5ODk5LDIzLjI1Njg5NjYgMTEyLjYwMzEyNiwyMy4yNjkwNTE3IDExMi44Mzk1OTMsMjMuMjgyMDE3MiBDMTEyLjg0MTIxMiwyMy4yODIwMTcyIDExMi45MTgxNDUsMjMuMjg2MDY5IDExMi45MTk3NjQsMjMuMjg2MDY5IEMxMTMuMTMxMTI2LDIzLjI5OTAzNDUgMTEzLjM0MDg2OSwyMy4zMTM2MjA3IDExMy41NTA2MTEsMjMuMzI5MDE3MiBDMTEzLjgxMTM3MiwyMy4zNDc2NTUyIDExNC4wNzEzMjMsMjMuMzY5NTM0NSAxMTQuMzMyMDgzLDIzLjM5MjIyNDEgQzExNC41MTk5NjEsMjMuNDA5MjQxNCAxMTQuNzA3MDI4LDIzLjQyNzA2OSAxMTQuOTQxMDY1LDIzLjQ1MTM3OTMgQzExNS4xOTA0ODgsMjMuNDc3MzEwMyAxMTUuNDM3NDgyLDIzLjUwNTY3MjQgMTE1LjY4Mjg1NiwyMy41MzU2NTUyIEwxMTUuNzUxNjkxLDIzLjU0NDU2OSBDMTE1LjkxMTIyNSwyMy41NjMyMDY5IDExNi4wNzA3NTgsMjMuNTgyNjU1MiAxMTYuMjI5NDgyLDIzLjYwNDUzNDUgQzExNi40OTgzNDEsMjMuNjQxODEwMyAxMTYuNzYzOTYxLDIzLjY4MTUxNzIgMTE3LjAyNzk2MSwyMy43MjIwMzQ1IEwxMTcuMTgxODI2LDIzLjc0NzE1NTIgQzExNy4yOTg0MzksMjMuNzY0MTcyNCAxMTcuNDE0MjQzLDIzLjc4MTE4OTcgMTE3LjUzMDA0NywyMy44MDE0NDgzIEMxMTcuODE3NTMxLDIzLjg1MDA2OSAxMTguMTAxNzc3LDIzLjkwNDM2MjEgMTE4LjM4NzY0MiwyMy45NTk0NjU1IEwxMTguNzk3NDA5LDI0LjAzNzI1ODYgQzExOS4xMDI3MDksMjQuMDk5NjU1MiAxMTkuNDAzMTUxLDI0LjE2OTM0NDggMTE5LjcwNTIxMiwyNC4yMzkwMzQ1IEwxMjAuMDU3NDgyLDI0LjMxODQ0ODMgQzEyMC40NzA0ODgsMjQuNDE5NzQxNCAxMjAuODc3ODI2LDI0LjUyNTg5NjYgMTIxLjI3Nzg3NSwyNC42NDA5NjU1IEMxMjEuNzE0MzY2LDI0Ljc2NTc1ODYgMTIyLjE0Mjc1OCwyNC44OTg2NTUyIDEyMi41NjQ2NzIsMjUuMDQxMjc1OSBDMTIyLjYzNTEyNiwyNS4wNjQ3NzU5IDEyMi43MDU1OCwyNS4wOTA3MDY5IDEyMi43NzUyMjUsMjUuMTE2NjM3OSBMMTIyLjk0NjA5NiwyNS4xNzgyMjQxIEMxMjMuMjMzNTgsMjUuMjc4NzA2OSAxMjMuNTIwMjU1LDI1LjM4MTYyMDcgMTIzLjc5OTY0MiwyNS40OTEwMTcyIEMxMjMuODYyODA3LDI1LjUxNDUxNzIgMTIzLjkyMjczNCwyNS41NDA0NDgzIDEyMy45ODM0NywyNS41NjYzNzkzIEwxMjQuMTI3NjE3LDI1LjYyNjM0NDggQzEyNC41MDQxODIsMjUuNzc4Njg5NyAxMjQuODcyNjQ4LDI1Ljk0MDc1ODYgMTI1LjI1NjUwMSwyNi4xMTkwMzQ1IEMxMjUuMjYwNTUsMjYuMTIwNjU1MiAxMjUuMzEzOTk4LDI2LjE0NjU4NjIgMTI1LjMxODA0NywyNi4xNDgyMDY5IEMxMjUuNDE2MDM0LDI2LjE5MzU4NjIgMTI1LjUxMzIxMiwyNi4yMzk3NzU5IDEyNS42MDc5NjEsMjYuMjg1MTU1MiBDMTI1Ljc4MDQ1MiwyNi4zNzAyNDE0IDEyNS45NTEzMjMsMjYuNDU2OTQ4MyAxMjYuMTE3MzM1LDI2LjU0MzY1NTIgQzEyNi4xMTk3NjQsMjYuNTQ0NDY1NSAxMjYuMTIzMDA0LDI2LjU0NjA4NjIgMTI2LjEyNTQzMywyNi41NDc3MDY5IEMxMjYuMjU5MDUzLDI2LjYxNzM5NjYgMTI2LjM5MTA1MywyNi42ODg3MDY5IDEyNi41MjIyNDMsMjYuNzYxNjM3OSBMMTI2LjUxOTAwNCwyNy44OTEyNTg2IEMxMjYuNDMzMTYzLDI3Ljg0NzUgMTI2LjM0ODk0MiwyNy44MDM3NDE0IDEyNi4yNjE0ODIsMjcuNzYwNzkzMSBMMTI1Ljg2MTQzMywyNy41NzExNzI0IEMxMjUuNDc5MiwyNy4zOTM3MDY5IDEyNS4wODgwNTksMjcuMjIzNTM0NSAxMjQuNjg4ODIsMjcuMDU5ODQ0OCBMMTI0LjU1ODQzOSwyNy4wMDYzNjIxIEMxMjQuNDg3MTc1LDI2Ljk3NjM3OTMgMTI0LjQxNDI5MiwyNi45NDU1ODYyIDEyNC4zNDA1OTksMjYuOTE3MjI0MSBDMTI0LjA0NjYzNiwyNi44MDEzNDQ4IDEyMy43NDQ1NzQsMjYuNjkzNTY5IDEyMy40MzkyNzQsMjYuNTg1NzkzMSBMMTIzLjI4NzgzOCwyNi41MzE1IEMxMjMuMjA1MjM3LDI2LjUwMTUxNzIgMTIzLjEyMTgyNiwyNi40NzA3MjQxIDEyMy4wMzc2MDUsMjYuNDQyMzYyMSBDMTIyLjU5NDYzNiwyNi4yOTQwNjkgMTIyLjE0NTk5OCwyNi4xNTM4NzkzIDEyMS42ODY4MzIsMjYuMDIyNjAzNCBDMTIxLjI2NzM0NywyNS45MDI2NzI0IDEyMC44NDMwMDQsMjUuNzkwODQ0OCAxMjAuNDEwNTYyLDI1LjY4NTUgQzEyMC4zMzg0ODgsMjUuNjY4NDgyOCAxMjAuMjYzOTg1LDI1LjY1MTQ2NTUgMTIwLjE4OTQ4MiwyNS42MzYwNjkgTDEyMC4wNDEyODYsMjUuNjAyMDM0NSBDMTE5LjcyODY5NywyNS41MjkxMDM0IDExOS40MTQ0ODgsMjUuNDU2OTgyOCAxMTkuMDk0NjExLDI1LjM5MTM0NDggTDExOC42Njc4MzgsMjUuMzEwMzEwMyBDMTE4LjM3MjI1NSwyNS4yNTI3NzU5IDExOC4wNzY2NzIsMjUuMTk2ODYyMSAxMTcuNzc3MDQsMjUuMTQ1ODEwMyBDMTE3LjY0MTgwMSwyNS4xMjM5MzEgMTE3LjUwNTc1MiwyNS4xMDIwNTE3IDExNy4zNjk3MDMsMjUuMDgyNjAzNCBMMTE3LjI1Nzk0OCwyNS4wNjM5NjU1IEMxMTYuOTgyNjExLDI1LjAyMTgyNzYgMTE2LjcwNzI3NCwyNC45Nzk2ODk3IDExNi40Mjc4ODcsMjQuOTQyNDEzOCBDMTE2LjI0MTYyOSwyNC45MTcyOTMxIDExNi4wNTM3NTIsMjQuODk0NjAzNCAxMTUuODY0MjU1LDI0Ljg3MDI5MzEgQzExNS42MDgzNTMsMjQuODM5NSAxMTUuMzUyNDUyLDI0LjgxMDMyNzYgMTE1LjA0Nzk2MSwyNC43Nzg3MjQxIEMxMTQuODU1MjI1LDI0Ljc1OTI3NTkgMTE0LjY2MDA1OSwyNC43Mzk4Mjc2IDExNC40NjQwODMsMjQuNzIyODEwMyBDMTE0LjE5NzY1NCwyNC42OTc2ODk3IDExMy45Mjg3OTUsMjQuNjc3NDMxIDExMy42NTkxMjYsMjQuNjU3MTcyNCBDMTEzLjQ0MjA5NiwyNC42NDE3NzU5IDExMy4yMjUwNjUsMjQuNjI1NTY5IDExMy4wMTQ1MTMsMjQuNjE0MjI0MSBMMTEyLjkyMDU3NCwyNC42MDkzNjIxIEMxMTIuNjgwODY5LDI0LjU5NDc3NTkgMTEyLjQ0MDM1MywyNC41ODM0MzEgMTEyLjE5OTgzOCwyNC41NzI4OTY2IEMxMTEuOTgzNjE3LDI0LjU2Mzk4MjggMTExLjc2NzM5NiwyNC41NTUwNjkgMTExLjU0NzkzNiwyNC41NDc3NzU5IEMxMTEuMzIzNjE3LDI0LjU0MTI5MzEgMTExLjA5ODQ4OCwyNC41MzgwNTE3IDExMC44NzI1NSwyNC41MzQgTDExMC43ODgzMjksMjQuNTMyMzc5MyBDMTEwLjI3NDA5NiwyNC41MjUwODYyIDEwOS43NjE0ODIsMjQuNTI0Mjc1OSAxMDkuMjM4MzQxLDI0LjUzMTU2OSBDMTA4Ljk2ODY3MiwyNC41MzU2MjA3IDEwOC42OTk4MTMsMjQuNTQwNDgyOCAxMDguNDI4NTI1LDI0LjU0ODU4NjIgQzEwOC40MTMxMzksMjQuNTQ5Mzk2NiAxMDguMzk2OTQyLDI0LjU1MDIwNjkgMTA4LjM4MTU1NiwyNC41NTAyMDY5IEMxMDguMzIzMjQ5LDI0LjUzNTYyMDcgMTA4LjI2MzMyMywyNC41MjUwODYyIDEwOC4yMDA5NjcsMjQuNTI1MDg2MiBMMTA4LjE5ODUzNywyNC41MjUwODYyIEMxMDguMTE5MTc1LDI0LjUyNTg5NjYgMTA4LjA0Mzg2MywyNC41NDIxMDM0IDEwNy45NzI1OTksMjQuNTY0NzkzMSBDMTA3LjkwMTMzNSwyNC41NjgwMzQ1IDEwNy44MjkyNjEsMjQuNTcwNDY1NSAxMDcuNzU3OTk4LDI0LjU3Mjg5NjYgQzEwNy4zODMwNTMsMjQuNTg5MTAzNCAxMDcuMDA3Mjk4LDI0LjYwNzc0MTQgMTA2LjYyMDIwNiwyNC42MzA0MzEgQzEwNi40MDcyMjUsMjQuNjQ0MjA2OSAxMDYuMTk1MDUzLDI0LjY1NzE3MjQgMTA1Ljk4MjA3MSwyNC42NzI1NjkgQzEwNS41ODQ0NTIsMjQuNzAwOTMxIDEwNS4xODUyMTIsMjQuNzM1Nzc1OSAxMDQuNzg2NzgzLDI0Ljc3MjI0MTQgTDEwNC42MTEwNTMsMjQuNzg5MjU4NiBDMTA0LjQ4Nzk2MSwyNC43OTg5ODI4IDEwNC4zNjQwNTksMjQuODEwMzI3NiAxMDQuMjQwMTU3LDI0LjgyMzI5MzEgQzEwMy41NTAxOTQsMjQuODk0NjAzNCAxMDIuODQ2NDY0LDI0Ljk3ODA2OSAxMDIuMTUwMDIyLDI1LjA3NDUgTDEwMS42NzMwNCwyNS4xNDMzNzkzIEMxMDEuMDY0ODY5LDI1LjIzMjUxNzIgMTAwLjQ1NjY5NywyNS4zMzA1NjkgOTkuODQ5MzM1LDI1LjQzNjcyNDEgTDk5LjQ0NTIzNjgsMjUuNTA2NDEzOCBDOTguODM5NDk0NSwyNS42MTgyNDE0IDk4LjIzMzc1MjEsMjUuNzM4MTcyNCA5Ny42Mjk2Mjk0LDI1Ljg2NzAxNzIgTDk3LjMxMjE4MTYsMjUuOTM5MTM3OSBDOTYuODEwMDk1NywyNi4wNDg1MzQ1IDk2LjMwODgxOTYsMjYuMTY2MDM0NSA5NS44MDgzNTM0LDI2LjI4ODM5NjYgQzk1LjY1NTI5ODIsMjYuMzI2NDgyOCA5NS41MDIyNDI5LDI2LjM2NjE4OTcgOTUuMzQ5MTg3NywyNi40MDU4OTY2IEw5NS4yMTM5NDg1LDI2LjQ0MDc0MTQgQzk0Ljc5NjA4MzQsMjYuNTQ3NzA2OSA5NC4zODA2NDc5LDI2LjY1ODcyNDEgOTMuOTY3NjQxNywyNi43NzQ2MDM0IEM5My43NjE5NDg1LDI2LjgzMTMyNzYgOTMuNTU2MjU1MiwyNi44ODg4NjIxIDkzLjM1MDU2MiwyNi45NDg4Mjc2IEM5Mi45MDAzMDQzLDI3LjA4MDEwMzQgOTIuNDUxNjY2MywyNy4yMTc4NjIxIDkyLjAwMzgzOCwyNy4zNTk2NzI0IEw5MS4wMDkzODQsMjcuNjgzIEM5MC44NTE0Njk5LDI3LjczNDg2MjEgOTAuNjk1OTg1MywyNy43ODk5NjU1IDkwLjU0NDU0OTcsMjcuODQyNjM3OSBMOTAuNDM5MjczNiwyNy44Nzc0ODI4IEM5MC4zMTY5OTE0LDI3LjkxOTYyMDcgOTAuMTk0NzA5MiwyNy45NjA5NDgzIDkwLjA3NDA0NjYsMjguMDAzMDg2MiBDODkuOTI1MDQwNSwyOC4wNTU3NTg2IDg5Ljc3NzY1NCwyOC4xMTAwNTE3IDg5LjYzMDI2NzUsMjguMTY1MTU1MiBMODkuMzk3ODUwMywyOC4yNTAyNDE0IEM4OS4xNDAzMjg4LDI4LjM0NTA1MTcgODguODgyODA3NCwyOC40NDA2NzI0IDg4LjYyNjA5NTcsMjguNTQwMzQ0OCBDODguNDI2ODgxLDI4LjYxNjUxNzIgODguMjMwMDk1NywyOC42OTQzMTAzIDg4LjAzNDEyMDIsMjguNzczNzI0MSBDODcuNzUzMTE0MSwyOC44ODQ3NDE0IDg3LjQ3MzcyNzYsMjguOTk4MTg5NyA4Ny4xOTc1ODA0LDI5LjExNDg3OTMgQzg2Ljk5OTE3NTUsMjkuMTk1OTEzOCA4Ni44MDE1ODA0LDI5LjI4MDE4OTcgODYuNjA1NjA0OSwyOS4zNjM2NTUyIEM4Ni4zMjc4MzgsMjkuNDg0Mzk2NiA4Ni4wNTI1MDA2LDI5LjYwNTk0ODMgODUuNzc4NzgyOCwyOS43Mjk5MzEgQzg1LjU4NjA0NjYsMjkuODE2NjM3OSA4NS4zOTQ5MzAxLDI5LjkwMjUzNDUgODUuMjA2MjQyOSwyOS45OTE2NzI0IEM4NS4wMTY3NDYsMzAuMDc5MTg5NyA4NC44MzA0ODgzLDMwLjE2OTEzNzkgODQuNjQzNDIwOSwzMC4yNTk4OTY2IEw4NC4yMDc3Mzk5LDMwLjQ2ODk2NTUgQzg0LjA4MzAyODIsMzAuNTMwNTUxNyA4My45NTkxMjY0LDMwLjU5MDUxNzIgODMuODM0NDE0NywzMC42NTI5MTM4IEM4My43MjU4OTk0LDMwLjcwNzIwNjkgODMuNjE5ODEzNSwzMC43NjMxMjA3IDgzLjUxMjkxNzgsMzAuODE5MDM0NSBMODIuNzgyNDYzOCwzMS4xOTc0NjU1IEM4Mi42ODUyODU5LDMxLjI0NzcwNjkgODIuNTg4MTA4LDMxLjI5ODc1ODYgODIuNDkzMzU5NSwzMS4zNDk4MTAzIEM4Mi4wNTEyLDMxLjU4ODg2MjEgODEuNjEzMDg5NiwzMS44MzI3NzU5IDgxLjE4MTQ1NzcsMzIuMDgzOTgyOCBDODAuNzk0MzY1NiwzMi4zMDkyNTg2IDgwLjQxOTQyMDksMzIuNTM3Nzc1OSA4MC4wNDg1MjUyLDMyLjc2ODcyNDEgTDc5Ljc2MzQ2OTksMzIuOTQ1Mzc5MyBDNzkuNjU5ODEzNSwzMy4wMTEwMTcyIDc5LjU1ODU4NjUsMzMuMDc3NDY1NSA3OS40NTczNTk1LDMzLjE0MzkxMzggTDc5LjI4ODEwOCwzMy4yNTU3NDE0IEM3OC45NzYzMjg4LDMzLjQ1OTEzNzkgNzguNjY2OTc5MSwzMy42NjMzNDQ4IDc4LjM2NTcyNzYsMzMuODcwNzkzMSBDNzguMjIxNTgwNCwzMy45NzA0NjU1IDc4LjA4MDY3MjQsMzQuMDcwMTM3OSA3Ny45Mzk3NjQ0LDM0LjE3MDYyMDcgTDc3Ljg2OTMxMDQsMzQuMjIwODYyMSBDNzcuNTk4ODMxOSwzNC40MTQ1MzQ1IDc3LjMzMDc4MjgsMzQuNjA4MjA2OSA3Ny4wNzAwMjIxLDM0LjgwNTEyMDcgQzc2LjkwODA1ODksMzQuOTI3NDgyOCA3Ni43NDc3MTUzLDM1LjA0OTg0NDggNzYuNTg5ODAxMiwzNS4xNzMwMTcyIEM3Ni4zMzQ3MDkyLDM1LjM3MTU1MTcgNzYuMDg2MDk1NywzNS41NzA4OTY2IDc1Ljg0MTUzMTMsMzUuNzczNDgyOCBMNzUuNzMzODI1OCwzNS44NjI2MjA3IEM3NS42MjQ1MDA2LDM1Ljk1MjU2OSA3NS41MTQzNjU2LDM2LjA0MjUxNzIgNzUuNDA3NDY5OSwzNi4xMzQwODYyIEM3NS4yMjc2OTA4LDM2LjI4ODA1MTcgNzUuMDU0MzkwMiwzNi40NDI4Mjc2IDc0Ljg4MTA4OTYsMzYuNTk2NzkzMSBMNzQuNjYyNDM5MywzNi43OTI4OTY2IEM3NC41NTQ3MzM3LDM2Ljg4OTMyNzYgNzQuNDQ3ODM4LDM2Ljk4NDk0ODMgNzQuMzM0NDYzOCwzNy4wOTAyOTMxIEw3NC4yNTc1MzEzLDM3LjE2NDg0NDggQzczLjk3NzMzNSwzNy40MjkwMTcyIDczLjcwNjA0NjYsMzcuNjk1NjIwNyA3My40NDUyODU5LDM3Ljk2MjIyNDEgQzczLjM1NzAxNiwzOC4wNTIxNzI0IDczLjI2OTU1NTgsMzguMTQyMTIwNyA3My4xODUzMzUsMzguMjMyMDY5IEM3Mi45MTY0NzYxLDM4LjUxMzI1ODYgNzIuNjU3MzM1LDM4Ljc5NTI1ODYgNzIuMzkzMzM1LDM5LjA5NzUxNzIgQzcyLjIyNDg5MzMsMzkuMjkxMTg5NyA3Mi4wNjUzNTk1LDM5LjQ4NDg2MjEgNzEuOTA3NDQ1NCwzOS42NzkzNDQ4IEw3MS44MjcyNzM2LDM5Ljc3NDk2NTUgQzcxLjc3NjI1NTIsMzkuODM1NzQxNCA3MS43MjYwNDY2LDM5Ljg5NTcwNjkgNzEuNjc3NDU3NywzOS45NTcyOTMxIEM3MS41NjgxMzI1LDQwLjA5NTg2MjEgNzEuNDY2MDk1Nyw0MC4yMzM2MjA3IDcxLjM2NDA1ODksNDAuMzcxMzc5MyBMNzEuMjcwMTIwMiw0MC40OTk0MTM4IEM3MS4yMTE4MTM1LDQwLjU3NzIwNjkgNzEuMTU5MTc1NSw0MC42NTU4MTAzIDcxLjEwMjQ4ODMsNDAuNzMzNjAzNCBDNzIuNjkxMzQ3MiwzNy44MDk4NzkzIDc1LjQyNzcxNTMsMzQuOTIxODEwMyA3OS4xMDkxMzg3LDMyLjM1NDYzNzkgTDc5LjEwOTEzODcsMzIuMzU0NjM3OSBaIE03MS42NjIwNzEyLDUyLjI3ODU4NjIgQzcxLjYxODM0MTEsNTIuMjI0MjkzMSA3MS41NzM4MDEyLDUyLjE3MTYyMDcgNzEuNTMyNTAwNiw1Mi4xMTczMjc2IEM3MS40MzA0NjM4LDUxLjk4NTI0MTQgNzEuMzM1NzE1Myw1MS44NTE1MzQ1IDcxLjI0MTc3NjcsNTEuNzE3MDE3MiBDNzEuMTk2NDI3LDUxLjY1MjE4OTcgNzEuMTQ5NDU3Nyw1MS41ODgxNzI0IDcxLjEwNjUzNzQsNTEuNTIzMzQ0OCBDNzEuMDE3NDU3Nyw1MS4zODk2Mzc5IDcwLjkzNDA0NjYsNTEuMjU0MzEwMyA3MC44NTMwNjUsNTEuMTE4MTcyNCBDNzAuODEwOTU0Niw1MS4wNDg0ODI4IDcwLjc2ODAzNDQsNTAuOTc4NzkzMSA3MC43MjgzNTM0LDUwLjkwODI5MzEgQzcwLjY1Mzg1MDMsNTAuNzc2MjA2OSA3MC41ODMzOTYzLDUwLjY0MjUgNzAuNTE1MzcxOCw1MC41MDc5ODI4IEM3MC40NzU2OTA4LDUwLjQzMDE4OTcgNzAuNDM2MDA5OCw1MC4zNTMyMDY5IDcwLjM5OTU2ODEsNTAuMjc0NjAzNCBDNzAuMzM4ODMxOSw1MC4xNDY1NjkgNzAuMjgyOTU0Niw1MC4wMTY5MTM4IDcwLjIyODY5NjksNDkuODg3MjU4NiBDNzAuMTkxNDQ1NCw0OS43OTgxMjA3IDcwLjE1NDE5MzksNDkuNzA4MTcyNCA3MC4xMjAxODE2LDQ5LjYxNzQxMzggQzcwLjA3NDgzMTksNDkuNDk4MjkzMSA3MC4wMzI3MjE1LDQ5LjM3NzU1MTcgNjkuOTkyMjMwNyw0OS4yNTY4MTAzIEM2OS45NTc0MDg2LDQ5LjE1MDY1NTIgNjkuOTIzMzk2Myw0OS4wNDQ1IDY5Ljg5MTgxMzUsNDguOTM4MzQ0OCBDNjkuODYwMjMwNyw0OC44MzEzNzkzIDY5LjgzMTg4NzEsNDguNzIyNzkzMSA2OS44MDQzNTM0LDQ4LjYxNDIwNjkgQzY5Ljc3Mjc3MDYsNDguNDg4NjAzNCA2OS43NDI4MDc0LDQ4LjM2MTM3OTMgNjkuNzE2ODkzMyw0OC4yMzMzNDQ4IEM2OS42OTgyNjc1LDQ4LjE0MzM5NjYgNjkuNjgwNDUxNSw0OC4wNTM0NDgzIDY5LjY2NTA2NSw0Ny45NjE4NzkzIEM2OS42NTI5MTc4LDQ3Ljg5MzgxMDMgNjkuNjQ0ODE5Niw0Ny44MjQ5MzEgNjkuNjM1MTAxOCw0Ny43NTY4NjIxIEM2OS42NTA0ODgzLDQ3LjY0NTg0NDggNjkuNjY5MTE0MSw0Ny41Mjk5NjU1IDY5LjY5MzQwODYsNDcuMzkxMzk2NiBDNjkuNzEzNjU0LDQ3LjI3NzEzNzkgNjkuNzMzODk5NCw0Ny4xNjIwNjkgNjkuNzU4MTkzOSw0Ny4wNDk0MzEgQzY5Ljc5Nzg3NDgsNDYuODYwNjIwNyA2OS44NDY0NjM4LDQ2LjY3MTgxMDMgNjkuODk2NjcyNCw0Ni40ODM4MTAzIEw2OS45MjkwNjUsNDYuMzYzMDY5IEM2OS45NDYwNzEyLDQ2LjI5NSA2OS45NjM4ODcxLDQ2LjIyNjkzMSA2OS45ODgxODE2LDQ2LjE1MDc1ODYgTDcwLjAzNTk2MDcsNDYuMDAyNDY1NSBDNzAuMDU4NjM1Niw0NS45MzExNTUyIDcwLjA4MzczOTksNDUuODU3NDEzOCA3MC4xMDg4NDQyLDQ1Ljc4NDQ4MjggQzcwLjU2MDcyMTUsNDUuNzk1ODI3NiA3MC45NjIzOTAyLDQ1LjkxOTgxMDMgNzEuMjkyNzk1MSw0Ni4xNjUzNDQ4IEM3MS45NzIyMzA3LDQ2LjY2Njk0ODMgNzIuMzQ4Nzk1MSw0Ny42NTE1MTcyIDcyLjM1Mjg0NDIsNDguOTM0MjkzMSBDNzIuMzU1MjczNiw0OS45NjQyNDE0IDcyLjExMTUxOSw1MS4xMjMwMzQ1IDcxLjY2MjA3MTIsNTIuMjc4NTg2MiBMNzEuNjYyMDcxMiw1Mi4yNzg1ODYyIFogTTc0LjAyMTg3NDgsNTcuOTQzNzA2OSBMNzQuNzU0NzU4Myw1Ny41MTk4OTY2IEw3NC43NTQ3NTgzLDU3LjUyOTYyMDcgTDc0LjczNTMyMjcsNjQuNTQ4MDE3MiBMNzQuNzM1MzIyNyw2NC41NDg4Mjc2IEM3NC43MzQ1MTI5LDY0LjYwNjM2MjEgNzQuNzQyNjExLDY0LjY2MjI3NTkgNzQuNzU0NzU4Myw2NC43MTU3NTg2IEw3NC43NTQ3NTgzLDg4Ljk4ODAxNzIgTDczLjkzOTI3MzYsODkuNDU4ODI3NiBMNzQuMDIxODc0OCw1Ny45NDM3MDY5IFogTTM3Ljc0MDUwMDYsNjkuMjE5NjU1MiBMMzcuODIyMjkyLDM3Ljk5MjIwNjkgTDcyLjUzMTgxMzUsNTguMDQ1IEw3Mi40NTQwNzEyLDg3LjgyMTkzMSBDNzIuNDQ2NzgyOCw4Ny44NjQwNjkgNzIuNDQ0MzUzNCw4Ny45MDUzOTY2IDcyLjQ0NDM1MzQsODcuOTQ3NTM0NSBDNzIuNDQ1MTYzMiw4OC4wMDUwNjkgNzIuNDQ1MTYzMiw4OC42MjgyMjQxIDcyLjQ0NTk3Myw4OS4yNTA1NjkgTDcyLjQ0NTk3Myw4OS4yNjkyMDY5IEwzNy43NDA1MDA2LDY5LjIxOTY1NTIgWiBNNTguNzMzMzU5NSwxMy4yMTc1MzQ1IEw2Ni41MjI5NzkxLDE4Ljc5ODM3OTMgTDM2LjcwNzk4NTMsMzYuMDUyMjQxNCBDMzYuNzAwNjk2OSwzNi4wNTcxMDM0IDM2LjY5NDIxODQsMzYuMDYyNzc1OSAzNi42ODc3Mzk5LDM2LjA2NzYzNzkgQzM2LjY3NzIxMjMsMzYuMDczMzEwMyAzNi42NjY2ODQ3LDM2LjA3ODk4MjggMzYuNjU2OTY2OSwzNi4wODYyNzU5IEMzNi42MzUxMDE4LDM2LjEwMTY3MjQgMzYuNjE0MDQ2NiwzNi4xMTcwNjkgMzYuNTkzODAxMiwzNi4xMzU3MDY5IEMzNi41ODczMjI3LDM2LjE0MDU2OSAzNi41ODE2NTQsMzYuMTQ2MjQxNCAzNi41NzUxNzU1LDM2LjE1MTkxMzggQzM2LjU3MTEyNjQsMzYuMTU1OTY1NSAzNi41NjcwNzczLDM2LjE2MDAxNzIgMzYuNTYyMjE4NCwzNi4xNjQwNjkgQzM2LjU1ODk3OTEsMzYuMTY3MzEwMyAzNi41NTU3Mzk5LDM2LjE3MDU1MTcgMzYuNTUyNTAwNiwzNi4xNzI5ODI4IEMzNi41Mjk4MjU4LDM2LjE5NTY3MjQgMzYuNTA4NzcwNiwzNi4yMTk5ODI4IDM2LjQ4OTMzNSwzNi4yNDUxMDM0IEMzNi40ODY5MDU1LDM2LjI0ODM0NDggMzYuNDg1Mjg1OSwzNi4yNTE1ODYyIDM2LjQ4Mjg1NjQsMzYuMjU0ODI3NiBDMzYuNDc3MTg3NywzNi4yNjIxMjA3IDM2LjQ3MjMyODgsMzYuMjY5NDEzOCAzNi40NjY2NjAxLDM2LjI3NTg5NjYgQzM2LjQ2NTg1MDMsMzYuMjc4MzI3NiAzNi40NjQyMzA3LDM2LjI3OTk0ODMgMzYuNDYyNjExLDM2LjI4MjM3OTMgQzM2LjQ1MjA4MzQsMzYuMjk3Nzc1OSAzNi40Mzk5MzYyLDM2LjMxMDc0MTQgMzYuNDMwMjE4NCwzNi4zMjY5NDgzIEMzNi4zNTAwNDY2LDM2LjQ2NzEzNzkgMzYuMzIwODkzMywzNi42MjE5MTM4IDM2LjMzNTQ2OTksMzYuNzcxODI3NiBMMzYuMjUzNjc4NSw2OC4xODk3MDY5IEwzLjg1Mzc1MjE1LDQ0Ljk3ODE4OTcgTDU4LjczMzM1OTUsMTMuMjE3NTM0NSBaIE0xMzAuNzI5MjM3LDIyLjgzMTQ2NTUgTDk0LjYxNzExNDEsMS45NjgzMjc1OSBDOTQuMjMzMjYxMywxLjc0NjI5MzEgOTMuODA0MDU4OSwxLjYzNTI3NTg2IDkzLjM3NTY2NjMsMS42MzUyNzU4NiBDOTIuOTQ2NDYzOCwxLjYzNTI3NTg2IDkyLjUxNzI2MTMsMS43NDYyOTMxIDkyLjEzMjU5ODgsMS45NjkxMzc5MyBMNjguMDM4MTQ0OCwxNS45MTM1NTE3IEw2MS4yNjA3OTUxLDExLjA1NTUzNDUgTDYxLjI2MDc5NTEsNS45NjI1MTcyNCBDNjEuMjYwNzk1MSwyLjgxMTg5NjU1IDU4LjY5NjEwOCwwLjI0NzE1NTE3MiA1NS41NDM0OTQ1LDAuMjQ3MTU1MTcyIEM1NC41NDgyMzA3LDAuMjQ3MTU1MTcyIDUzLjU2MTA2NSwwLjUxNTM3OTMxIDUyLjY4NzI3MzYsMS4wMjE4NDQ4MyBMNS40MzUzMjI3LDI4LjM2NjkzMSBDMi4wODM0OTQ0OCwzMC4zMDI4NDQ4IC0wLjAwMDE2MTk2MzE5LDMzLjkxNjE3MjQgLTAuMDAwMTYxOTYzMTksMzcuNzk1MjkzMSBMLTAuMDAwMTYxOTYzMTksNDQuOTEwOTMxIEMtMC4wMDAxNjE5NjMxOSw0NS43MTE1NTE3IDAuMzg2MTIwMjQ1LDQ2LjQ2NDM2MjEgMS4wMzcyMTIyNyw0Ni45MzAzMTAzIEwzNS41NDk5NDg1LDcxLjY2Mjg0NDggQzM1LjU2MjkwNTUsNzEuNjcyNTY5IDM1LjU3NjY3MjQsNzEuNjgyMjkzMSAzNS41ODk2Mjk0LDcxLjY5MTIwNjkgTDM1LjY2ODk5MTQsNzEuNzQ1NSBDMzUuNzIyNDM5Myw3MS43ODI3NzU5IDM1Ljc3NzUwNjcsNzEuODE3NjIwNyAzNS44MzQxOTM5LDcxLjg1MDAzNDUgTDcxLjUyNTIxMjMsOTIuNDY2MDE3MiBDNzEuOTk0OTA1NSw5Mi45MzUyMDY5IDcyLjYzMDYxMSw5My4xODk2NTUyIDczLjI3OTI3MzYsOTMuMTg5NjU1MiBDNzMuNzAwMzc3OSw5My4xODk2NTUyIDc0LjEyNzk2MDcsOTMuMDgxODc5MyA3NC41MTkxMDE4LDkyLjg1NTc5MzEgTDc2Ljc0MzY2NjMsOTEuNTY4OTY1NSBDNzcuNTExMzcxOCw5MS4xMjQ4OTY2IDc3Ljk4MzQ5NDUsOTAuMzA0ODI3NiA3Ny45ODM0OTQ1LDg5LjQxODMxMDMgTDc3Ljk4MzQ5NDUsNjUuMjQ4OTY1NSBDNzguMDA1MzU5NSw2NS4xODkgNzguMDI1NjA0OSw2NS4xMjc0MTM4IDc4LjA0MjYxMSw2NS4wNjUwMTcyIEw3OS42NTY1NzQyLDU5LjIzMzc3NTkgTDc5LjgxNjEwOCw1OS4yNzUxMDM0IEw4Ny43NzkwMjgyLDYxLjMzNjYyMDcgQzg3Ljk3NTAwMzcsNjEuMzg3NjcyNCA4OC4xNzY2NDc5LDYxLjQxNDQxMzggODguMzc5OTExNyw2MS40MTYwMzQ1IEw5MC4xMjc0OTQ1LDYxLjQzMDYyMDcgTDkwLjE0ODU0OTcsNjEuNDMwNjIwNyBDOTAuNDMzNjA0OSw2MS40MzA2MjA3IDkwLjcxNjIzMDcsNjEuMzgyIDkwLjk4NTA4OTYsNjEuMjg1NTY5IEM5Ny4wMjA2NDc5LDU5LjEyMzU2OSAxMDMuNzcyMDgzLDU3LjkzMjM2MjEgMTA5Ljk5NDcwOSw1Ny45MzIzNjIxIEMxMTYuMTk5NTE5LDU3LjkzMjM2MjEgMTIxLjc0OTE4OCw1OS4xMTU0NjU1IDEyNS42NzE5MzYsNjEuMjY5MzYyMSBDMTI1Ljk1NzgwMSw2MS41MjYyNDE0IDEyNi4zMDE5NzMsNjEuNzE0MjQxNCAxMjYuNjgwMTU3LDYxLjgxNjM0NDggQzEyNi44OTMxMzksNjEuODczODc5MyAxMjcuMTEwOTc5LDYxLjkwMjI0MTQgMTI3LjMyODAxLDYxLjkwMjI0MTQgQzEyNy43NTk2NDIsNjEuOTAyMjQxNCAxMjguMTg4MDM0LDYxLjc5MDQxMzggMTI4LjU2ODY0OCw2MS41NyBMMTMwLjcyODQyNyw2MC4zMjI4NzkzIEMxMzEuNDk2OTQyLDU5Ljg3OTYyMDcgMTMxLjk3MDY4NSw1OS4wNTk1NTE3IDEzMS45NzA2ODUsNTguMTcxNDEzOCBMMTMxLjk3MDY4NSwyNC45ODIxMjA3IEMxMzEuOTcwNjg1LDI0LjA5NDc5MzEgMTMxLjQ5Njk0MiwyMy4yNzQ3MjQxIDEzMC43MjkyMzcsMjIuODMxNDY1NSBMMTMwLjcyOTIzNywyMi44MzE0NjU1IFoiIGlkPSJGaWxsLTQ1IiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTk3LjUyODgwNzQsMjkuMzM4NDUzNCBDOTguMjg1OTg1MywyOC45MDA4NjcyIDk5LjAwMDI0MjksMjguNjc5NjQzMSA5OS42MjYyMzA3LDI4LjY3OTY0MzEgQzEwMC4wMjMwNCwyOC42Nzk2NDMxIDEwMC4zODM0MDksMjguNzY4NzgxIDEwMC42OTU5OTgsMjguOTQ5NDg3OSBDMTAxLjQ5MjA0NywyOS40MDczMzI4IDEwMS45MzMzOTYsMzAuNDM1NjYwMyAxMDEuOTM3NDQ1LDMxLjg0MjQxOSBDMTAxLjk0NjM1MywzNS4wOTUxNDMxIDk5LjY1MDUyNTIsMzkuMDcxNTA1MiA5Ni44MjAyMTg0LDQwLjcwNTk3MDcgQzk1LjU4MjgxOTYsNDEuNDE5ODg0NSA5NC40NTk2MDQ5LDQxLjU1NzY0MzEgOTMuNjU2MjY3NSw0MS4wOTQ5MzYyIEM5Mi44NTk0MDg2LDQwLjYzNTQ3MDcgOTIuNDE4MDU4OSwzOS42MDc5NTM0IDkyLjQxNDgxOTYsMzguMjAxMTk0OCBDOTIuNDA1MTAxOCwzNC45NDg0NzA3IDk0LjY5OTMxMDQsMzAuOTczNzI5MyA5Ny41Mjg4MDc0LDI5LjMzODQ1MzQgTTkyLjkxMzY2NjMsNDIuMzg3NDM2MiBDOTMuNDU4NjcyNCw0Mi43MDAyMjkzIDk0LjA2ODQ2MzgsNDIuODU2NjI1OSA5NC43MjExNzU1LDQyLjg1NjYyNTkgQzk1LjYwODczMzcsNDIuODU2NjI1OSA5Ni41NzY0NjM4LDQyLjU2NzMzMjggOTcuNTY0NDM5Myw0MS45OTY4NSBDMTAwLjg2MjAxLDQwLjA5MjUzOTcgMTAzLjQzNzIyNSwzNS42Mjk5NzA3IDEwMy40MjY2OTcsMzEuODM4MzY3MiBDMTAzLjQyMTAyOCwyOS44NzY1MjI0IDEwMi43MTQ4NjksMjguMzkxOTcwNyAxMDEuNDM4NTk5LDI3LjY1Njk4NzkgQzEwMC4xNTQyMzEsMjYuOTE3MTQzMSA5OC41MDEzOTYzLDI3LjA1NjUyMjQgOTYuNzgzNzc2NywyOC4wNDc1NzQxIEM5My40ODc4MjU4LDI5Ljk1MTg4NDUgOTAuOTE0MjMwNywzNC40MTQ0NTM0IDkwLjkyNTU2ODEsMzguMjA0NDM2MiBDOTAuOTMwNDI3LDQwLjE2NTQ3MDcgOTEuNjM3Mzk2Myw0MS42NTE2NDMxIDkyLjkxMzY2NjMsNDIuMzg3NDM2MiIgaWQ9IkZpbGwtNDMiIGZpbGw9IiNGRkZGRkYiIG1hc2s9InVybCgjbWFzay0yKSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03NC42MjY2OTc1LDU0LjgyNTc1MjggTDc3LjA0MDEwMDIsNTkuMDQ5MjA3NSBMNzcuMDQwMTAwMiw1OS4wNDkyMDc1IEM3Ny4zMDY0OTY4LDU5LjUxNTQwMTUgNzcuMTU3MTc5OCw2MC4xMDg3NjczIDc2LjcwMTg1Niw2MC4zOTMzNDQ3IEw3MS44NzUwNTA3LDYzLjQxMDA5OCBMNzEuODc1MDUwNyw2My40MTAwOTggQzcxLjQwNjcxNDEsNjMuNzAyODA4NCA3MC43ODk3NjM4LDYzLjU2MDQzNTIgNzAuNDk3MDUzNCw2My4wOTIwOTg3IEM3MC4zMzg5NjQ1LDYyLjgzOTE1NjMgNzAuMzAyMDQzNSw2Mi41Mjg4NDY4IDcwLjM5NjM2ODQsNjIuMjQ1ODcyIEw3Mi44MDk3NzExLDU1LjAwNTY2NCBMNzIuODA5NzcxMSw1NS4wMDU2NjQgQzcyLjk4NDQxODksNTQuNDgxNzIwNyA3My41NTA3Mzg4LDU0LjE5ODU2MDcgNzQuMDc0NjgyMiw1NC4zNzMyMDg0IEM3NC4zMDgwOTMxLDU0LjQ1MTAxMjEgNzQuNTA0NjI5MSw1NC42MTIxMzMxIDc0LjYyNjY5NzUsNTQuODI1NzUyOCBaIiBpZD0iVHJpYW5nbGUiIGZpbGwtb3BhY2l0eT0iMC4yNjYwNDk1OTIiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjc1ODUyMSwgNTguOTQxOTI3KSByb3RhdGUoMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC03My43NTg1MjEsIC01OC45NDE5MjcpICI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="/>
      <ol>
        `+_r.map(function(zo){var Io;return"<li>"+((Io=zo[navigator.language.split("-")[0]])!==null&&Io!==void 0?Io:zo.zh)+"</li>"}).join("")+`
      </ol>
    `;var jo=new zn(Ro);xo.parentNode&&(xo.parentNode.insertBefore(No,xo),xo.parentNode.insertBefore(Ro,xo),this.setHelperElementSize(),jo.on("tap",function(){return bo.emit("vrWantsToExit")})),this.destroyHelper=function(){jo.destroy(),No.parentNode&&No.parentNode.removeChild(No),Ro.parentNode&&Ro.parentNode.removeChild(Ro)}},_o.prototype.destroyHelper=function(){},_o.prototype.setHelperElementSize=function(){if(this.helperElement){var xo=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),bo=xo.x*this.scissor.left,wo=xo.y*(1-this.scissor.bottom-this.scissor.height),Eo=xo.x*this.scissor.width,To=xo.y*this.scissor.height;this.helperElement.style.marginLeft=bo+"px",this.helperElement.style.marginTop=wo+"px",this.helperElement.style.width=Eo+"px",this.helperElement.style.height=To+"px"}},_o.prototype.intersect=function(xo){if(this.locationMotion.ended!==!1){if(this.activePanoMesh&&this.activeTime&&xo-this.activeTime>2e3){var bo=this.panoMeshes.indexOf(this.activePanoMesh);return bo>=0&&this.moveToPano(bo,{},!0),delete this.activePanoMesh,void delete this.activeTime}for(var wo=0,Eo=this.panoMeshes;wo<Eo.length;wo++)(Lo=Eo[wo]).setCurrent(!1);for(var To=this.camera.getWorldDirection(new r$3.Vector3),So=new r$3.Raycaster(this.camera.position,To),$o=void 0,Do=[],No=0,Oo=this.panoMeshes;No<Oo.length;No++){var Lo;if((Lo=Oo[No]).visible!==!1){var Co=So.intersectObject(Lo,!0)[0];Co&&Do.push({panoMesh:Lo,intersection:Co})}}var Ro=Do.sort(function(Bo,ko){return Bo.intersection.distance-ko.intersection.distance})[0];if(Ro&&($o=Ro.intersection,Ro.panoMesh.setCurrent(!0),this.activePanoMesh!==Ro.panoMesh&&(this.activePanoMesh=Ro.panoMesh,this.activeTime=xo)),$o||this.model.empty||($o=this.model.intersectRaycaster(So)[0]),$o&&$o.face){var jo=$o.face.normal,zo=new r$3.Quaternion;zo.setFromUnitVectors(new r$3.Vector3(0,0,-1),jo),this.intersectMesh.quaternion.copy(zo);var Io=jo.clone().multiplyScalar(.05),Po=$o.point.clone().add(Io);this.intersectMesh.position.copy(Po),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",$o,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden")}else this.intersectMesh.visible=!1},_o.prototype.onPanGesture=function(){},_o.prototype.onTapGesture=function(){},_o.prototype.onPinchGesture=function(){},_o.prototype.onMouseMove=function(){},_o.prototype.onMouseOut=function(){},_o}(Or),Rr=function(va){function _o(xo){var bo,wo,Eo,To,So=this,$o=_o.parseArgs(xo);return(So=va.call(this,$o)||this).currentPanoIndex=$o.initial[0],So.locationMotion=new Yn({x:So.camera.pose.offset.x,y:So.camera.pose.offset.y,z:So.camera.pose.offset.z,distance:So.camera.pose.distance,modelAlpha:(wo=(bo=So.model.getMaterial())===null||bo===void 0?void 0:bo.modelAlpha)!==null&&wo!==void 0?wo:0,perspToOrtho:(To=(Eo=So.model.getMaterial())===null||Eo===void 0?void 0:Eo.perspToOrtho)!==null&&To!==void 0?To:0}),So}return t$3.__extends(_o,va),_o.parseArgs=function(xo){return va.parseArgs.call(this,xo)},_o.initAnimationEndPose=function(xo){var bo=this.parseArgs(xo);return va.initAnimationEndPose.call(this,bo)},_o.prototype.destroy=function(){va.prototype.destroy.call(this),this.locationMotion.dispose()},_o.prototype.isReady=function(){return this.locationMotion.ended!==!1&&va.prototype.isReady.call(this)},_o.prototype.updateWork=function(xo,bo,wo,Eo,To){this.work=xo,this.currentPanoIndex=bo,this.hideIntersectMesh();var So={duration:0,longitude:wo.longitude,latitude:wo.latitude,fov:wo.fov};return this.moveToPano(bo,So,To),!0},_o.prototype.updateTime=function(xo,bo){if(!this.destroyed){var wo={},Eo={};if(!this.locationMotion.ended){this.locationMotion.update(xo),wo.modelAlpha=this.locationMotion.value.modelAlpha,wo.perspToOrtho=xn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Eo.distance=this.locationMotion.value.distance,Eo.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var To=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),So=Tn(this.work.observers,function($o){return $o.position.distanceTo(To)});this.currentPanoIndex=this.work.observers.indexOf(So)}this.cameraMotion.ended||(this.cameraMotion.update(xo),Eo.longitude=this.cameraMotion.value.longitude,Eo.latitude=this.cameraMotion.value.latitude,Eo.fov=this.cameraMotion.value.fov),En(wo)||this.model.setMaterial(wo),En(Eo)||this.setCamera(Eo)}},_o.prototype.initAnimation=function(xo,bo,wo,Eo){var To,So,$o,Do=this;this.destroyed||(this.pending=!1,this.userAction=Eo,this.moveToPano(xo,{longitude:(To=bo.longitude)!==null&&To!==void 0?To:this.defaultLongitude,latitude:xn((So=bo.latitude)!==null&&So!==void 0?So:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:xn(($o=bo.fov)!==null&&$o!==void 0?$o:this.defaultFov,this.minFov,this.maxFov),duration:wo,moveStartCallback:function(No,Oo){Do.emit("initAnimationWillStart",No,Oo,Do.userAction)},moveEndCallback:function(No,Oo){Do.emit("initAnimationEnded",No,Oo,Do.userAction)},moveCancelCallback:function(){var No=Do.currentPanoIndex,Oo={longitude:Do.camera.pose.longitude,latitude:Do.camera.pose.latitude,fov:Do.camera.pose.fov,offset:Do.camera.pose.offset.clone()};Do.emit("initAnimationEnded",No,Oo,Do.userAction)}},Eo))},_o.prototype.getTargetPose=function(){var xo=this.cameraMotion.getKeyFrameSegment(He())[1],bo=this.locationMotion.getKeyFrameSegment(He())[1];return{longitude:xo.value.longitude,latitude:xo.value.latitude,fov:xo.value.fov,offset:new r$3.Vector3(bo.value.x,bo.value.y,bo.value.z)}},_o.prototype.moveToPano=function(xo,bo,wo){bo===void 0&&(bo={});var Eo=this.work.observers[xo];Eo&&this.moveToPosition(Eo.position,bo,wo)},_o.prototype.moveToPosition=function(xo,bo,wo){var Eo,To,So,$o=this;bo===void 0&&(bo={}),this.userAction=wo;for(var Do=He(),No=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(xo),Oo=this.locationMotion.getProgressVelocity(Do),Lo=0,Co=1;Co<this.locationMotion.keyframes.length;Co++){var Ro=this.locationMotion.keyframes[Co-1].value,jo=Ro.x,zo=Ro.y,Io=Ro.z,Po=this.locationMotion.keyframes[Co].value,Bo=Po.x,ko=Po.y,Uo=Po.z;Lo+=Math.sqrt(Math.pow(Bo-jo,2)+Math.pow(ko-zo,2)+Math.pow(Uo-Io,2))}var Qo=No===0?0:Oo*Lo/No,qo=this.calculateMovingDuration(bo.duration,No),Zo={x:xo.x,y:xo.y,z:xo.z,distance:0,modelAlpha:1,perspToOrtho:0},Xo={longitude:bo.longitude,latitude:bo.latitude,fov:bo.fov},Fo={longitude:(Eo=Xo.longitude)!==null&&Eo!==void 0?Eo:this.camera.pose.longitude,latitude:(To=Xo.latitude)!==null&&To!==void 0?To:this.camera.pose.latitude,fov:(So=Xo.fov)!==null&&So!==void 0?So:this.camera.pose.fov,offset:xo.clone()},Go=Tn(this.work.observers,function(Wo){return Wo.position.distanceTo(xo)}),Vo=this.work.observers.indexOf(Go);this.emit("moveToPano",Vo,this.userAction),bo.moveStartCallback&&bo.moveStartCallback(Vo,Fo),this.emit("panoWillArrive",Vo,Fo,this.userAction),this.cameraMotion.set(Xo,qo).catch(Qe),this.locationMotion.set(Zo,qo,Qo).then(function(){var Wo=jn($o.camera.pose);bo.moveEndCallback&&bo.moveEndCallback(Vo,Wo),$o.emit("panoArrived",Vo,Wo,$o.userAction)},function(){bo.moveCancelCallback&&bo.moveCancelCallback(),$o.emit("moveToPanoCanceled",Vo)})},_o.prototype.onTapGesture=function(xo){var bo=xo.pointers.map(function(Ro){return Xt(Ro,["x","y"])});if(!this.emit("wantsGesture","tap",bo,!0)){var wo=this.relativeClientPosition(xo.center),Eo=new r$3.Raycaster;if(Eo.setFromCamera(wo,this.camera),!this.emit("wantsTapGesture",Eo,wo)){this.emit("gesture","tap",bo,!0),this.emit("tapGesture",Eo,wo),this.interiaMovement=!1;var To=this.model.intersectRaycaster(Eo)[0];if(To&&To.face){var So=To.face.normal,$o=To.point;if(new r$3.Vector3(0,1,0).angleTo(So)>Math.PI/3){var Do=this.camera.position.clone().setY($o.y),No=$o.clone().sub(Do).setLength(.3),Oo=$o.clone().sub(No);Eo.set(Oo,new r$3.Vector3(0,-1,0)),To=this.model.intersectRaycaster(Eo)[0]}}if(To){var Lo=To.point.clone(),Co=Tn(this.work.observers.filter(function(Ro){return Math.abs(Ro.standingPosition.y-Lo.y)<1}),function(Ro){return Ro.standingPosition.distanceTo(Lo)});if(Co)return Lo.y=Co.position.y,void this.moveToPosition(Lo,{},!0)}this.cameraBounce()}}},_o}(Zn),Qr=function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Yr=function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];var xo=113,bo=126,wo=0,Eo="";return arguments[wo].split(Eo).map(function(To){return To.charCodeAt(wo)>bo?To:String.fromCharCode((To.charCodeAt(wo)+xo)%bo)}).join(Eo)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Fr=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Vr=new r$3.SphereBufferGeometry(.01,128,128),Hr=function(){function va(_o){_o===void 0&&(_o={}),this.textureLoader=new xi({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=_o.allowHosts,this.networkSubscribe=_o.networkSubscribe}return va.prototype.setAllowHosts=function(_o){this.allowHosts=_o,this.textureLoader.setAllowHosts(_o)},va.prototype.setNetworkSubscribe=function(_o){this.networkSubscribe=_o,this.textureLoader.setNetworkSubscribe(_o)},va.prototype.load=function(_o,xo,bo,wo,Eo,To,So,$o){var Do=[0,0],No=function(Lo,Co){Do[Co]=Lo,So(.8*Do[0]+.2*Do[1])},Oo=[this.textureLoader.load(_o,{},void 0,void 0,function(Lo){return No(Lo,1)},$o),this.textureLoader.loadCube(xo,{},void 0,void 0,function(Lo){return No(Lo,0)},$o)];return Promise.all(Oo).then(function(Lo){var Co=Lo[0],Ro=Lo[1],jo={body:function(zo,Io,Po,Bo){var ko=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Qr,fragmentShader:Yr,transparent:!0,uniforms:r$3.UniformsUtils.clone(Fr)}),Uo=Io;return Uo.needsUpdate=!0,Uo.minFilter=r$3.LinearFilter,Uo.magFilter=r$3.LinearFilter,zo.needsUpdate=!0,zo.minFilter=r$3.LinearFilter,zo.magFilter=r$3.LinearFilter,ko.uniforms.opacity.value=0,ko.uniforms.panoMap.value=Uo,ko.uniforms.panoDisplacementMap.value=zo,ko.uniforms.panoPosition.value=Po,ko.uniforms.panoMatrix.value=Bo,Object.assign(new r$3.Mesh(Vr,ko),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Co.body,Ro.body,bo,wo),meta:t$3.__spreadArray([Co.meta],Ro.meta,!0)};return Eo(jo),jo}).catch(function(Lo){for(var Co=0,Ro=Oo;Co<Ro.length;Co++)Ro[Co].then(function(jo){return jo.body.dispose()}).catch(Qe);return To(Lo),Promise.reject(Lo)})},va}(),Gr=new r$3.Vector3(-1,1,1),Wr=function(va){function _o(xo){var bo,wo,Eo,To,So,$o,Do,No=this,Oo=_o.parseArgs(xo);return(No=va.call(this,Oo)||this).currentPanoIndex=Oo.initial[0],No.maxAccessibleDistance=Oo.maxAccessibleDistance,No.panoTapTriggerRadius=Oo.panoTapTriggerRadius,No.panoCircleMeshCreator=Oo.panoCircleMeshCreator,No.boundingMesh=No.generateBoundingMesh(),No.boundingMesh.setMaterial(No.model.getMaterial()||{}),No.boundingMesh.visible=!1,No.scene.add(No.boundingMesh),No.panoModelGroup=new r$3.Group,No.panoModelGroup.name="panoModels",No.scene.add(No.panoModelGroup),No.panoMeshes=[],No.updatePanoMeshes(),No.helper.remove(No.intersectMesh),No.locationMotion=new Yn({count:0,distance:No.camera.pose.distance,modelAlpha:(wo=(bo=No.model.getMaterial())===null||bo===void 0?void 0:bo.modelAlpha)!==null&&wo!==void 0?wo:0,perspToOrtho:(To=(Eo=No.model.getMaterial())===null||Eo===void 0?void 0:Eo.perspToOrtho)!==null&&To!==void 0?To:0}),No.panoResources={},No.panoResources[No.locationMotion.keyframes[0].key=No.locationMotion.keyframes[1].key=Fe()]={panoIndex:No.currentPanoIndex,workCode:No.work.workCode,matrix:(Do=($o=(So=No.model.getMaterial())===null||So===void 0?void 0:So.pano1)===null||$o===void 0?void 0:$o.matrix)!==null&&Do!==void 0?Do:new r$3.Matrix4,position:No.camera.pose.offset.clone(),effect:"fly"},No.depthTextureLoader=new Hr({allowHosts:No.work.allowHosts,networkSubscribe:No.networkSubscribe}),No}return t$3.__extends(_o,va),_o.parseArgs=function(xo){var bo,wo,Eo,To=va.parseArgs.call(this,xo);return t$3.__assign(t$3.__assign({},To),{maxAccessibleDistance:(bo=xo.maxAccessibleDistance)!==null&&bo!==void 0?bo:5,panoTapTriggerRadius:(wo=xo.panoTapTriggerRadius)!==null&&wo!==void 0?wo:1,panoCircleMeshCreator:(Eo=xo.panoCircleMeshCreator)!==null&&Eo!==void 0?Eo:cr})},_o.initAnimationEndPose=function(xo){var bo=this.parseArgs(xo);return va.initAnimationEndPose.call(this,bo)},_o.prototype.destroy=function(){var xo,bo=this;if(va.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var wo=0,Eo=this.panoModelGroup.children;wo<Eo.length;wo++){var To=Eo[wo];typeof To.dispose=="function"&&To.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Ro){bo.helper.remove(Ro),Ro.dispose()}),this.panoMeshes.length=0);for(var So=(xo=this.model.getMaterial())!==null&&xo!==void 0?xo:{},$o=So.pano0,Do=So.pano1,No=0,Oo=Object.keys(this.panoResources);No<Oo.length;No++){var Lo=Oo[No],Co=this.panoResources[Lo];Co.panoModel&&Co.panoModel.material.uniforms.panoMap.value!==($o==null?void 0:$o.map)&&Co.panoModel.material.uniforms.panoMap.value!==(Do==null?void 0:Do.map)&&(this.panoModelGroup.remove(Co.panoModel),Co.panoModel.material.uniforms.panoMap.value.dispose(),Co.panoModel.dispose(),delete Co.panoModel),delete this.panoResources[Lo]}this.interiaMovement=!1},_o.prototype.isReady=function(){return this.locationMotion.ended===!1&&va.prototype.isReady.call(this)},_o.prototype.updateWork=function(xo,bo,wo,Eo,To){this.userAction=To,this.work=xo,this.currentPanoIndex=bo,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var So={},$o=!0;this.boundingMesh&&(So=this.boundingMesh.getMaterial()||{},$o=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=$o,this.boundingMesh.setMaterial(So),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Do=0,No=this.panoMeshes;Do<No.length;Do++)No[Do].visible=!1;return this.moveToPano(bo,{effect:"fade",duration:Eo,longitude:wo.longitude,latitude:wo.latitude,fov:wo.fov},To),!0},_o.prototype.updateTime=function(xo,bo){var wo,Eo,To;if(!this.destroyed){var So={},$o={};if(this.locationMotion.ended===!1){this.locationMotion.update(xo);var Do=this.locationMotion.getKeyFrameSegment(xo),No=Do[0],Oo=Do[1],Lo=this.panoResourceFromLocationMotionKeyframe(No),Co=this.panoResourceFromLocationMotionKeyframe(Oo),Ro=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),jo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),zo=new r$3.Vector3().copy(Lo.position),Io=new r$3.Vector3().copy(Co.position),Po=this.locationMotion.value.count-Oo.value.count+1;So.modelAlpha=this.locationMotion.value.modelAlpha,So.perspToOrtho=xn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),So.useBlackTransition=Co.effect==="instant";for(var Bo=0,ko=this.panoModelGroup.children;Bo<ko.length;Bo++){var Uo=ko[Bo];Uo.visible=Uo===Lo.panoModel||Uo===Co.panoModel}Lo.panoModel&&(Lo.panoModel.material.uniforms.opacity.value=1-Po,Lo.panoModel.material.depthTest=Po!==0),Co.panoModel&&(Co.panoModel.material.uniforms.opacity.value=Po,Co.panoModel.material.depthTest=Po!==1),Co.panoModel&&(Po<1?Lo.panoModel&&(So.pano0={map:Lo.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Lo.matrix}):So.pano0={map:Co.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Co.matrix},So.pano1={map:Co.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Co.matrix}),Co.effect==="fade"&&(So.pano0&&(So.pano0={map:So.pano0.map,luminanceMap:null,matrix:Lo.matrix.clone().setPosition(Co.position)}),zo.copy(Io)),So.progress=Po,$o.distance=this.locationMotion.value.distance,$o.offset=new r$3.Vector3(zo.x+(Io.x-zo.x)*Po,zo.y+(Io.y-zo.y)*Po,zo.z+(Io.z-zo.z)*Po);for(var Qo=[],qo=[],Zo=0,Xo=this.locationMotion.keyframes;Zo<Xo.length;Zo++){var Fo=Xo[Zo],Go=Fo.key,Vo=Fo.progress;Go!==void 0&&(Qo.push(Go),Vo>=this.locationMotion.progress&&qo.push(Go))}for(var Wo=0,Yo=Object.keys(this.panoResources);Wo<Yo.length;Wo++){var Ko=Yo[Wo];if(!(qo.indexOf(Ko)>=0)){var ts=this.panoResources[Ko];if(ts.panoModel){if(ts.panoModel.material.uniforms.panoMap.value===((wo=So.pano0)===null||wo===void 0?void 0:wo.map)||ts.panoModel.material.uniforms.panoMap.value===((Eo=So.pano1)===null||Eo===void 0?void 0:Eo.map))continue;this.panoModelGroup.remove(ts.panoModel),ts.panoModel.material.uniforms.panoMap.value.dispose(),ts.panoModel.dispose(),delete ts.panoModel}Qo.indexOf(Ko)>=0||delete this.panoResources[Ko]}}Lo.workCode===Co.workCode?this.currentPanoIndex=Po<.5?Lo.panoIndex:Co.panoIndex:this.currentPanoIndex=Co.panoIndex,this.emit("movingToPano",jo.panoIndex,Ro.panoIndex,this.locationMotion.progress)}this.cameraMotion.ended===!1&&(this.cameraMotion.update(xo),$o.longitude=this.cameraMotion.value.longitude,$o.latitude=this.cameraMotion.value.latitude,$o.fov=this.cameraMotion.value.fov),En(So)===!1&&(this.model.setMaterial(So),this.boundingMesh.setMaterial(So)),En($o)===!1&&this.setCamera($o),this.boundingMesh.visible=Boolean((To=this.boundingMesh.getMaterial())===null||To===void 0?void 0:To.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},_o.prototype.getTargetPose=function(){var xo=this.cameraMotion.getKeyFrameSegment(He())[1],bo=this.locationMotion.getKeyFrameSegment(He())[1],wo=this.panoResourceFromLocationMotionKeyframe(bo),Eo=this.work.observers[wo.panoIndex];return{longitude:xo.value.longitude,latitude:xo.value.latitude,fov:xo.value.fov,offset:Eo?Eo.position.clone():this.camera.position.clone()}},_o.prototype.moveToPano=function(xo,bo,wo){var Eo,To,So=this;bo===void 0&&(bo={});var $o=this.work.observers[xo].images.depth,Do=t$3.__assign({key:"pano."+xo,basisLoaderInitialized:wi.isInitialized()},Xt(this.imageOptions,["format","size","quality"])),No=(Eo=this.imageOptions.transform)!==null&&Eo!==void 0?Eo:ti,Oo={right:No(this.work.observers[xo].images.right,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".right"})),left:No(this.work.observers[xo].images.left,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".left"})),up:No(this.work.observers[xo].images.up,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".up"})),down:No(this.work.observers[xo].images.down,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".down"})),front:No(this.work.observers[xo].images.front,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".front"})),back:No(this.work.observers[xo].images.back,t$3.__assign(t$3.__assign({},Do),{key:"pano."+xo+".back"}))},Lo=this.work.observers[xo],Co=Lo.position,Ro=Lo.quaternion,jo=new r$3.Matrix4().compose(Co,Ro,new r$3.Vector3(-1,1,1)),zo="pano:"+Wn(Oo);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===zo)return;var Io=this.pendingTextureTask.panoIndex;(To=this.panoMeshes[Io])===null||To===void 0||To.setProgress(0),this.emit("textureAbort",Io,this.work.observers[Io]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:xo,hash:zo,onLoad:function(Po){So.pending=!1,So.destroyed?Po.body.dispose():(Po.body.name=zo,So.emit("panoLoaded",xo),So.doMoveToPano(xo,Po.body,bo,wo))},onError:function(Po){So.pending=!1,bo.moveCancelCallback&&bo.moveCancelCallback(),So.emit("panoLoadError",Po,xo),So.emit("moveToPanoCanceled",xo)}},this.depthTextureLoader.load($o,Oo,Co,jo,function(Po){var Bo,ko;((Bo=So.pendingTextureTask)===null||Bo===void 0?void 0:Bo.hash)===zo?(So.pendingTextureTask.onLoad(Po),(ko=So.panoMeshes[xo])===null||ko===void 0||ko.setProgress(0),delete So.pendingTextureTask,So.emit("textureLoaded",xo,So.work.observers[xo],Po.meta)):Po.body.dispose()},function(Po){var Bo,ko;((Bo=So.pendingTextureTask)===null||Bo===void 0?void 0:Bo.hash)===zo&&(So.pendingTextureTask.onError(Po),(ko=So.panoMeshes[xo])===null||ko===void 0||ko.setProgress(0),delete So.pendingTextureTask,So.emit("textureError",Po,xo,So.work.observers[xo]),So.emit("error",Po))},function(Po){var Bo,ko;((Bo=So.pendingTextureTask)===null||Bo===void 0?void 0:Bo.hash)===zo&&((ko=So.panoMeshes[xo])===null||ko===void 0||ko.setProgress(Po)),So.emit("textureLoading",Po,xo,So.work.observers[xo])},this.renderer),this.emit("textureStartLoad",xo,this.work.observers[xo])},_o.prototype.setCamera=function(xo){va.prototype.setCamera.call(this,xo);var bo=this.work.observers[this.currentPanoIndex];if(bo)for(var wo=bo.visibleNodes.concat(this.currentPanoIndex),Eo=this.getForwardPanoIndexOrNot(),To=0;To<this.work.observers.length;To++){var So=this.work.observers[To],$o=this.panoMeshes[To];if($o.visible=!0,$o.setCurrent(Eo===To),$o)if(So.loadable||So.active)if(wo.indexOf(To)===-1)$o.visible=!1;else{$o.visible=!0;var Do=$o.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Do<.01?$o.setOpacity(0):$o.setOpacity(xn(1.5/Do,0,1))}else $o.visible=!0}},_o.prototype.initAnimation=function(xo,bo,wo,Eo){var To,So,$o,Do=this;if(!this.destroyed){var No=!1;this.pending=!1,this.userAction=Eo,this.moveToPano(xo,{longitude:(To=bo.longitude)!==null&&To!==void 0?To:this.defaultLongitude,latitude:xn((So=bo.latitude)!==null&&So!==void 0?So:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:xn(($o=bo.fov)!==null&&$o!==void 0?$o:this.defaultFov,this.minFov,this.maxFov),duration:wo,moveStartCallback:function(Oo,Lo){No=!0,Do.emit("initAnimationWillStart",Oo,Lo,Do.userAction)},moveEndCallback:function(Oo,Lo){Do.emit("initAnimationEnded",Oo,Lo,Do.userAction)},moveCancelCallback:function(){var Oo=jn(Do.camera.pose);No===!1&&Do.emit("initAnimationWillStart",Do.currentPanoIndex,Oo,Do.userAction),Do.emit("initAnimationEnded",Do.currentPanoIndex,Oo,Do.userAction)}},Eo)}},_o.prototype.panoResourceFromLocationMotionKeyframe=function(xo){return this.panoResources[xo.key]},_o.prototype.locationMotionKeyframesLength=function(xo){for(var bo=0,wo=1;wo<xo.length;wo++){var Eo=this.panoResourceFromLocationMotionKeyframe(xo[wo-1]).position,To=this.panoResourceFromLocationMotionKeyframe(xo[wo]).position;bo+=Eo.distanceTo(To)*(xo[wo].value.count-xo[wo-1].value.count)}return bo},_o.prototype.updatePanoMeshes=function(){for(var xo=[],bo=0,wo=this.panoMeshes;bo<wo.length;bo++)(To=wo[bo]).loading&&xo.push(To.name),this.helper.remove(To),To.dispose();this.panoMeshes.length=0;for(var Eo=0;Eo<this.work.observers.length;Eo++){var To,So=this.work.observers[Eo];(To=this.panoCircleMeshCreator()).name="panoCircle_"+this.work.workCode+"_"+Eo,To.position.copy(So.standingPosition),To.needsRender=!0,this.helper.add(To),So.active===!1&&(To.setDisabled(!0),xo.indexOf(To.name)>=0&&(To.setDisabled(!1),To.setLoading(!0))),this.panoMeshes[Eo]=To}},_o.prototype.generateBoundingMesh=function(xo){xo===void 0&&(xo=!1);for(var bo=this.model.bounding.clone(),wo=0,Eo=this.work.observers;wo<Eo.length;wo++){var To=Eo[wo];bo.expandByPoint(To.standingPosition),bo.expandByPoint(new r$3.Vector3().fromArray([To.position.x,2*To.position.y-To.standingPosition.y,To.position.z]))}xo&&bo.expandByPoint(this.camera.position);var So=at(bo,new r$3.Vector3(1,0,1));return So.name="panorama_bounding",So.frustumCulled=!1,So},_o.prototype.doMoveToPano=function(xo,bo,wo,Eo){var To,So,$o,Do,No=this;wo===void 0&&(wo={}),this.userAction=Eo;var Oo=He(),Lo=Fe(),Co=this.work.observers[xo],Ro=this.panoResources[Lo]={panoIndex:xo,workCode:this.work.workCode,effect:(To=wo.effect)!==null&&To!==void 0?To:"fly",panoModel:bo,matrix:new r$3.Matrix4().compose(Co.position,Co.quaternion,Gr),position:Co.position.clone()};bo.visible=!1,bo.renderOrder=-1,this.panoModelGroup.add(bo);var jo,zo,Io;if(this.locationMotion.ended){var Po=this.locationMotion.getKeyFrameSegment(Oo);Po[0];var Bo=Po[1],ko=this.locationMotion.value,Uo=this.panoResourceFromLocationMotionKeyframe(Bo).position,Qo=Ro.position;jo=Math.max(Uo.distanceTo(Qo),1),zo=[{key:Bo.key,progress:0,value:t$3.__assign(t$3.__assign({},ko),{count:0})},{key:Lo,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Io=0}else{var qo=this.locationMotion.getKeyFrameSegment(Oo),Zo=qo[0],Xo=(Bo=qo[1],ko=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Zo).position),Fo=(Uo=this.panoResourceFromLocationMotionKeyframe(Bo).position,Qo=Ro.position,Bo.value.count-ko.count),Go=Math.max(Xo.distanceTo(Uo),1)*Fo;jo=Go+Math.max(Uo.distanceTo(Qo),1),zo=[{key:Zo.key,progress:0,value:t$3.__assign({},ko)},{key:Bo.key,progress:Go/jo,value:Bo.value},{key:Lo,progress:1,value:{count:Bo.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Vo=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Wo=this.locationMotionKeyframesLength(zo);Io=this.locationMotion.getProgressVelocity(Oo)*Vo/Wo}var Yo=this.calculateMovingDuration(wo.duration,jo),Ko={longitude:wo.longitude,latitude:wo.latitude,fov:wo.fov},ts={longitude:(So=Ko.longitude)!==null&&So!==void 0?So:this.camera.pose.longitude,latitude:($o=Ko.latitude)!==null&&$o!==void 0?$o:this.camera.pose.latitude,fov:(Do=Ko.fov)!==null&&Do!==void 0?Do:this.camera.pose.fov,offset:Co.position.clone()};wo.moveStartCallback&&wo.moveStartCallback(xo,ts),this.emit("panoWillArrive",xo,ts,this.userAction),this.cameraMotion.set(Ko,Yo).catch(Qe),this.locationMotion.setKeyFrames(zo,Yo,Io).then(function(){var Jo={longitude:No.camera.pose.longitude,latitude:No.camera.pose.latitude,fov:No.camera.pose.fov,offset:No.camera.pose.offset.clone()};wo.moveEndCallback&&wo.moveEndCallback(xo,Jo),No.emit("panoArrived",xo,Jo,Eo)},function(){wo.moveCancelCallback&&wo.moveCancelCallback(),No.emit("moveToPanoCanceled",xo)})},_o.prototype.getForwardPanoIndexOrNot=function(xo){var bo=this,wo=this.camera.getWorldDirection(new r$3.Vector3),Eo=this.camera.position.clone(),To=this.work.observers[this.currentPanoIndex];if(!To)return null;var So=To.accessibleNodes.filter(function(Io){if(Io===bo.currentPanoIndex)return!1;var Po=bo.work.observers[Io],Bo=Po.standingPosition.clone().sub(Eo);return Bo.length()!==0&&!(Bo.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(Po.loadable||Po.active)}),$o=(xo?xo.ray.direction.clone():wo.clone()).setY(0);if($o.length()===0)return null;for(var Do=So.slice().sort(function(Io,Po){var Bo=bo.work.observers[Io].position.clone().setY(Eo.y),ko=bo.work.observers[Po].position.clone().setY(Eo.y);return Bo.distanceTo(Eo)-ko.distanceTo(Eo)}),No=0,Oo=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];No<Oo.length;No++)for(var Lo=Oo[No],Co=0,Ro=Do;Co<Ro.length;Co++){var jo=Ro[Co],zo=this.work.observers[jo].position.clone().setY(Eo.y).sub(Eo);if(zo.length()!==0&&$o.angleTo(zo)<Lo)return jo}return null},_o.prototype.onTapGesture=function(xo){var bo=this,wo=xo.pointers.map(function(Jo){return Xt(Jo,["x","y"])});if(!this.emit("wantsGesture","tap",wo,!0)){var Eo=this.relativeClientPosition(xo.center),To=new r$3.Raycaster;if(To.setFromCamera(Eo,this.camera),!this.emit("wantsTapGesture",To,Eo)){this.emit("gesture","tap",wo,!0),this.emit("tapGesture",To,Eo),this.interiaMovement=!1;var So=this.camera.getWorldDirection(new r$3.Vector3).setY(0),$o=null,Do=this.work.observers[this.currentPanoIndex];if(Do){var No=Do.accessibleNodes.filter(function(Jo){if(Jo===bo.currentPanoIndex)return!1;var rs=bo.work.observers[Jo];return!(rs.position.distanceTo(bo.camera.position)>bo.maxAccessibleDistance)&&(rs.loadable||rs.active)}),Oo=To.intersectObject(this.boundingMesh,!0)[0];if(Oo){var Lo=Tn(No,function(Jo){var rs=bo.work.observers[Jo].standingPosition.clone();return rs.clone().sub(bo.camera.position).setY(0).angleTo(So)>Math.PI/2?1/0:rs.distanceTo(Oo.point)},!0),Co=Lo[0];Lo[1]<this.panoTapTriggerRadius&&($o=Co)}Re($o)&&($o=this.getForwardPanoIndexOrNot(To));for(var Ro=0,jo=this.locationMotion.keyframes;Ro<jo.length;Ro++){var zo=jo[Ro],Io=this.panoResourceFromLocationMotionKeyframe(zo);if(!(zo.progress<this.locationMotion.progress)&&Io.panoIndex===$o){$o=null;break}}if(this.emit("panoSelected",$o),Re($o))this.locationMotion.ended===!0&&this.cameraBounce();else{var Po=this.work.observers[$o];if(Po.active){for(var Bo={},ko=Math.PI/6,Uo=Math.PI/12,Qo=new r$3.Vector3(0,1,0),qo=Po.position.clone().setY(0).sub(Do.position.clone().setY(0)).normalize(),Zo=qo.clone().applyAxisAngle(Qo,ko),Xo=qo.clone().applyAxisAngle(Qo,-ko),Fo=[],Go=[],Vo=[],Wo=0,Yo=Po.accessibleNodes;Wo<Yo.length;Wo++)if((Co=Yo[Wo])!==this.currentPanoIndex&&Co!==$o){var Ko=this.work.observers[Co].position.clone().sub(Po.position).setY(0);qo.angleTo(Ko)<ko?Vo.push(Ko):Zo.angleTo(Ko)<ko?Fo.push(Ko):Xo.angleTo(Ko)<ko&&Go.push(Ko)}var ts=(Vo.length>0?Vo:t$3.__spreadArray(t$3.__spreadArray([],Fo,!0),Go,!0)).slice().sort(function(Jo,rs){return Jo.angleTo(qo)-rs.angleTo(qo)})[0];ts&&ts.angleTo(So)>Uo&&(Bo.longitude=Math.atan2(-ts.x,-ts.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Bo.latitude=xn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",$o,Bo,!0)}else this.panoMeshes[$o]&&(this.panoMeshes[$o].setDisabled(!1),this.panoMeshes[$o].setLoading(!0))}}}}},_o}(Zn),qr=["Panorama","DepthPanorama","Model"],Kr={Floorplan:Vn,Topview:Hn,Panorama:Or,VRPanorama:Ur,Model:Rr,DepthPanorama:Wr};function Zr(va){for(var _o=0,xo=qr;_o<xo.length;_o++){var bo=xo[_o];if(typeof va=="string"){if(bo===va)return!0}else if(va instanceof Fn&&va instanceof Kr[bo])return!0}return!1}var Xr=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function Jr(va){for(var _o,xo,bo={},wo=0,Eo=va.split(/(\;|\,)/);wo<Eo.length;wo++){var To=Eo[wo].split("="),So=(_o=To[0])===null||_o===void 0?void 0:_o.trim(),$o=(xo=To[1])===null||xo===void 0?void 0:xo.trim();So&&$o&&(bo[So]=$o)}return bo}function $r(){for(var va,_o=document.getElementsByTagName("meta"),xo=0;xo<_o.length;xo++){var bo=_o[xo];if(bo.getAttribute("name")==="viewport"){var wo=Jr((va=bo.getAttribute("content"))!==null&&va!==void 0?va:""),Eo=Number(wo["initial-scale"]);if(!isNaN(Eo))return Eo}}return 1}var eo=[351,63],to$1=[20,20],io=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),no=new Float32Array([0,0,1,0,0,1,1,1]),ro=new Uint8Array([0,1,2,1,3,2]),oo=new r$3.BufferGeometry;oo.setAttribute("position",new r$3.BufferAttribute(io,3)),oo.setAttribute("uv",new r$3.BufferAttribute(no,2)),oo.setIndex(new r$3.BufferAttribute(ro,1));var so=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),ao=new r$3.Mesh(oo,so),uo=new r$3.Scene;uo.add(ao);var co=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);co.position.set(0,0,.5),co.lookAt(0,0,0);var lo=new r$3.Vector4,ho=new r$3.Vector4;function po(va){if(so.map){var _o=va.getViewport(lo),xo=va.getScissor(ho),bo=va.getScissorTest(),wo=va.autoClear;va.setViewport(xo.x+to$1[0]/3,xo.y+to$1[1]/3,eo[0]/3,eo[1]/3),va.setScissor(xo.x+to$1[0]/3,xo.y+to$1[1]/3,eo[0]/3,eo[1]/3),va.setScissorTest(!0),va.autoClear=!1,va.render(uo,co),va.setViewport(_o),va.setScissor(xo),va.setScissorTest(bo),va.autoClear=wo}else{var Eo=new r$3.Texture,To=new Image;To.onload=function(){Eo.image=To,Eo.wrapS=r$3.ClampToEdgeWrapping,Eo.wrapT=r$3.ClampToEdgeWrapping,Eo.minFilter=r$3.LinearFilter,Eo.needsUpdate=!0,so.needsUpdate=!0,To.onload=function(){}},To.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",so.map=Eo}}var Ao=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),fo=new r$3.Vector2,Mo=new r$3.Frustum,go=new r$3.Matrix4,yo=new r$3.Clock,mo=new WeakMap,vo=function(va){function _o(xo){var bo,wo,Eo,To,So,$o,Do,No,Oo,Lo,Co,Ro,jo,zo,Io,Po;xo===void 0&&(xo={});var Bo=va.call(this)||this;if(Bo.ident=Fe(),Bo.panoIndex=0,Bo.needsRender=!1,Bo.onlyRenderIfNeeds=(bo=xo.onlyRenderIfNeeds)===null||bo===void 0||bo,Bo.imageOptions=t$3.__assign({},(wo=xo.imageOptions)!==null&&wo!==void 0?wo:{}),Bo.textureOptions=t$3.__assign({},(Eo=xo.textureOptions)!==null&&Eo!==void 0?Eo:{}),Bo.poweredByRealsee=(To=xo.poweredByRealsee)===null||To===void 0||To,Bo.extraElements=[],Bo.controllerInits={Panorama:(So=xo.panorama)!==null&&So!==void 0?So:{},Model:($o=xo.model)!==null&&$o!==void 0?$o:{},Floorplan:(Do=xo.floorplan)!==null&&Do!==void 0?Do:{},Topview:(No=xo.topview)!==null&&No!==void 0?No:{},DepthPanorama:(Oo=xo.depthPanorama)!==null&&Oo!==void 0?Oo:{},VRPanorama:(Lo=xo.vrPanorama)!==null&&Lo!==void 0?Lo:{}},Bo.fps={testCount:0,testTime:He()},Bo.modeChangeDuration=(Co=xo.modeChangeDuration)!==null&&Co!==void 0?Co:1e3,Bo.panoramaLikeSavedPose={},typeof window!="undefined")if(xo.renderer)xo.renderer instanceof Ue&&Bo.throwError(new Error("cannot render a internal renderer")),Bo.renderer=xo.renderer;else try{Bo.renderer=new Ue({preserveDrawingBuffer:xo.preserveDrawingBuffer,backgroundColor:xo.backgroundColor,backgroundAlpha:xo.backgroundAlpha,antialias:xo.antialias});var ko=$r();Bo.renderer.setPixelRatio(ko===1?window.devicePixelRatio:1),Bo.renderer.setSize(512,512)}catch(Wo){Wo instanceof Error&&Bo.throwError(Wo)}Bo.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:(jo=(Ro=Bo.renderer)===null||Ro===void 0?void 0:Ro.outputEncoding)!==null&&jo!==void 0?jo:r$3.sRGBEncoding}),Bo.scissor=Object.assign({left:0,bottom:0,width:1,height:1},xo.scissor),Bo.camera=new Be(80),Bo.scene=new _e,Bo.lastLoadWorkTask=Promise.resolve(),Bo.networkSubscribe=new kt,Bo.networkSubscribe.on("network",function(Wo,Yo,Ko,ts){var Jo;Bo.emit("network",Wo,Yo,Ko,ts),(Jo=Bo.analysis)===null||Jo===void 0||Jo.network(Bo.work,Wo,Yo,Ko,ts)}),Bo.model=new Xi({allowHosts:[],networkSubscribe:Bo.networkSubscribe});var Uo=at(Ao);if(Bo.model.add(Uo),Bo.model.name="model_empty",Bo.model.empty=!0,Bo.model.loaded=!1,Bo.model.visible=!1,Bo.readyCallbacks=[],Bo.modelPending=!1,Bo.syncingState=!1,Bo.scene.add(Bo.model),Bo.helperGroup=new r$3.Group,Bo.helperGroup.name="helper",Bo.scene.add(Bo.helperGroup),Bo.videoTexture=new r$3.VideoTexture(xo.videoInstance||function(){var Wo=document.createElement("video");Wo.loop=!0,Wo.autoplay=!0,Wo.playsInline=!0,Wo.muted=!0,Wo.crossOrigin="";var Yo=function(){document.removeEventListener("touchstart",Yo,!1),document.removeEventListener("mousedown",Yo,!1),Wo.muted=!1};return document.addEventListener("touchstart",Yo,!1),document.addEventListener("mousedown",Yo,!1),Wo}()),Bo.plugins={},xo.plugins)for(var Qo=0,qo=xo.plugins;Qo<qo.length;Qo++){var Zo=qo[Qo];if(typeof Zo=="function")Zo(Bo);else if(Array.isArray(Zo)){var Xo=Zo[0],Fo=Zo[1],Go=Zo[2],Vo=Xo(Bo,Go);typeof Fo=="string"&&(Bo.plugins[Fo]&&Bo.throwError(new Error("plugin name "+Fo+" is exists.")),Bo.plugins[Fo]=Vo)}}return function(Wo){(Yo=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),Wo.add(Yo);var Yo=new r$3.DirectionalLight(16777215,.3);Wo.add(Yo),Yo=new r$3.AmbientLight(16777215,.3),Wo.add(Yo)}(Bo.scene),Bo.state={mode:(zo=Bo.currentMode)!==null&&zo!==void 0?zo:"Panorama",panoIndex:(Io=Bo.panoIndex)!==null&&Io!==void 0?Io:0,longitude:Bo.camera.pose.longitude,latitude:Bo.camera.pose.latitude,fov:Bo.camera.pose.fov,offset:Bo.camera.pose.offset.clone()},Bo.stateSynced=!1,Bo._enableIOSEDR=!0,Bo.destroyed=!1,Bo.paused=!0,typeof window!="undefined"&&(xo.play!==!1&&Bo.play(),((Po=xo.initialBasisLoader)!==null&&Po!==void 0&&Po)!==!1&&(typeof xo.initialBasisLoader=="string"?Bo.initBasisLoader(xo.initialBasisLoader):Bo.initBasisLoader()),Bo.stopAnimationLoop=We.shared.add(function(Wo,Yo){Bo.updateTime(Wo,Yo)},!1,0,10)),Bo}return t$3.__extends(_o,va),_o.prototype.dispose=function(){var xo;if(this.destroyed!==!0){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var bo=this.getElement();bo&&bo.parentNode&&bo.parentNode.removeChild(bo),this.scene.remove(this.model);var wo=this.model.getMaterial();wo&&(wo.pano0&&wo.pano0.map.dispose(),wo.pano1&&wo.pano1.map!==((xo=wo.pano0)===null||xo===void 0?void 0:xo.map)&&wo.pano1.map.dispose()),this.renderer instanceof Ue&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},_o.prototype.setScissor=function(xo){Object.assign(this.scissor,xo),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(_o.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(xo){this.helperGroup.visible!==xo&&(this.helperGroup.visible=xo,this.emit("helpersVisibleChange",xo),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_o.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(xo){this._enableIOSEDR=xo,this.currentMode&&this.changeMode(this.currentMode,{},0,!1,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_o.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(xo){var bo,wo;if(xo){if(!this.screenBuffer){var Eo=this.getDrawingBufferSize(fo);this.screenBuffer=new r$3.WebGLRenderTarget(Eo.x,Eo.y,{encoding:(wo=(bo=this.renderer)===null||bo===void 0?void 0:bo.outputEncoding)!==null&&wo!==void 0?wo:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),_o.prototype.appendTo=function(xo,bo){if(bo===void 0&&(bo={}),this.renderer)if(this.renderer instanceof Ue){var wo=this.getElement();if(wo){xo.appendChild(wo),this.refresh(bo);var Eo=window.getComputedStyle(xo).position;Eo!=="relative"&&Eo!=="absolute"&&Eo!=="fixed"&&Eo!=="sticky"&&(xo.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},_o.prototype.refresh=function(xo,bo){if(xo===void 0&&(xo={}),this.renderer){var wo=this.getElement();if(wo){var Eo=wo.parentNode;if(Eo&&Eo.nodeName){var To=xo.width,So=To===void 0?Eo.offsetWidth:To,$o=xo.height,Do=$o===void 0?Eo.offsetHeight:$o;this.renderer instanceof Ue&&(bo&&this.renderer.setPixelRatio(bo),this.renderer.setSize(So,Do))}var No=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=No.x/No.y,this.scissor&&(this.camera.aspect*=this.scissor.width/this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},_o.prototype.addExtraElement=function(xo){var bo=this;return this.extraElements.indexOf(xo)===-1&&(this.extraElements.push(xo),this.controller&&this.controller.bindExtraElement(xo)),function(){return bo.removeExtraElement(xo)}},_o.prototype.removeExtraElement=function(xo){var bo=this.extraElements.indexOf(xo);bo!==-1&&(this.extraElements.splice(bo,1),this.controller&&this.controller.unbindExtraElement(xo))},_o.prototype.getPose=function(){var xo=this.camera.copyPose();return{longitude:xo.longitude,latitude:xo.latitude,fov:xo.fov,offset:xo.offset}},_o.prototype.getSize=function(xo){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(xo),xo.x*=this.scissor.width,xo.y*=this.scissor.height,xo},_o.prototype.getDrawingBufferSize=function(xo){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(xo),xo.x*=this.scissor.width,xo.y*=this.scissor.height,xo},_o.prototype.updateCamera=function(xo,bo,wo){return wo===void 0&&(wo=!0),this.controller?this.controller.updateCamera(xo,bo,wo):Promise.reject(new Error("controller is not initialized."))},_o.prototype.getLongitudeAndLatitude=function(){var xo=this.getPose();return{longitude:xo.longitude,latitude:xo.latitude}},_o.prototype.getOffset=function(){return this.getPose().offset},_o.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var xo=this.work.observers[this.panoIndex],bo=new r$3.Object3D;return bo.position.copy(xo.position),bo.quaternion.copy(xo.quaternion),bo.scale.set(1,1,1),bo.updateMatrixWorld(!0),function(wo,Eo){var To=new r$3.Vector3(0,0,-1);To.applyQuaternion(wo.quaternion);var So=Eo.quaternion.clone().inverse();return To.applyQuaternion(So),{theta:Math.atan2(To.x,-To.z),phi:-Math.asin(To.y),lookAtVector:To}}(this.camera,bo)}},_o.prototype.initBasisLoader=function(xo){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof xo=="string"&&wi.setTranscoderPath(xo),wi.workerConfig.format||wi.detectSupport(this.renderer),wi._allocateWorker(0)}catch(bo){bo instanceof Error&&this.throwError(bo)}},Object.defineProperty(_o.prototype,"work",{get:function(){var xo=mo.get(this);if(xo&&An.get(xo))return xo},enumerable:!1,configurable:!0}),_o.prototype.load=function(xo,bo,wo,Eo){var To=this;if(Eo===void 0&&(Eo=!0),!this.renderer)throw new Error("renderer is not initialized");var So=this.lastLoadWorkTask.then(function(){return!($o=xo)||typeof $o!="object"&&typeof $o!="function"||typeof $o.then!="function"?To.load_(xo,bo,wo,Eo):xo.then(function(Do){return To.load_(Do,bo,wo,Eo)});var $o});return this.lastLoadWorkTask=So.catch(function($o){To.throwError($o)}),So},_o.prototype.load_=function(xo,bo,wo,Eo){var To,So,$o,Do,No,Oo,Lo,Co,Ro,jo=this;Eo===void 0&&(Eo=!0);var zo,Io,Po,Bo=Mn(xo),ko=this.work;bo===void 0&&(bo=ko?"inherit":"initial"),bo==="inherit"?(zo=typeof this.panoIndex=="number"&&Bo.observers[this.panoIndex]?this.panoIndex:Bo.initial.panoIndex,Io=(To=this.currentMode)!==null&&To!==void 0?To:Bo.initial.mode,Po={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):bo==="initial"?(Io=(So=this.currentMode)!==null&&So!==void 0?So:Bo.initial.mode,zo=Bo.initial.panoIndex,Po=Io===_o.Mode.Panorama||Io===_o.Mode.DepthPanorama||Io===_o.Mode.Model||Io===_o.Mode.VRPanorama?{longitude:Bo.initial.longitude,latitude:Bo.initial.latitude,fov:Bo.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(zo=($o=bo.panoIndex)!==null&&$o!==void 0?$o:Bo.initial.panoIndex,Io=(No=(Do=bo.mode)!==null&&Do!==void 0?Do:this.currentMode)!==null&&No!==void 0?No:"Panorama",Po={longitude:(Oo=bo.longitude)!==null&&Oo!==void 0?Oo:Bo.initial.longitude,latitude:(Lo=bo.latitude)!==null&&Lo!==void 0?Lo:Bo.initial.latitude,fov:(Co=bo.fov)!==null&&Co!==void 0?Co:Bo.initial.fov}),this.emit("willLoad",xo,Bo,{panoIndex:zo,mode:Io,longitude:Po.longitude,latitude:Po.latitude,fov:Po.fov});var Uo=function(){var qo;mo.set(jo,Bo),jo.panoIndex=zo,jo.panoramaLikeSavedPose.longitude=Bo.initial.longitude,jo.panoramaLikeSavedPose.latitude=Bo.initial.latitude,jo.panoramaLikeSavedPose.fov=Bo.initial.fov;var Zo=jo.controller?wo!=null?wo:jo.modeChangeDuration:0,Xo=t$3.__assign(t$3.__assign({initial:[zo,Po,Zo,Eo]},jo.commonParams()),jo.controllerInits[Io]);jo.controller?jo.controller.updateWork(Bo,zo,Po,Zo,!0)===!1&&(jo.controller.destroy(),jo.controller=jo.applyController(Io,Xo)):jo.controller=jo.applyController(Io,Xo),jo.emit("load",xo,Bo,{panoIndex:zo,mode:Io,longitude:Po.longitude,latitude:Po.latitude,fov:Po.fov}),(qo=jo.analysis)===null||qo===void 0||qo.work(Bo)},Qo=function(qo){var Zo,Xo;qo===void 0&&(qo=Qe),Bo.model&&(((Zo=ko==null?void 0:ko.model)===null||Zo===void 0?void 0:Zo.file)!==((Xo=Bo.model)===null||Xo===void 0?void 0:Xo.file)?(jo.emit("modelWillLoad",Bo.model),jo.loadModel(Bo.model,Bo.allowHosts,qo,!0)):qo&&(jo.model.loaded===!0?qo():jo.once("modelLoaded",function(){return qo()})))};return Io===_o.Mode.Floorplan||Io===_o.Mode.Topview||Io===_o.Mode.Model?Qo(function(){Uo(),jo.needsRender=!0}):(Uo(),(Ro=this.controller)===null||Ro===void 0||Ro.once("panoLoaded",function(){jo.needsRender=!0,Qo()})),this.ready().then(function(){jo.emit("loaded",xo,jo.work)})},_o.prototype.changeMode=function(xo,bo,wo,Eo,To){var So=this;if(bo===void 0&&(bo={}),wo===void 0&&(wo=this.modeChangeDuration),Eo===void 0&&(Eo=!0),To===void 0&&(To=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function($o,Do){if(!_o.Mode.hasOwnProperty(xo)){var No=new Error('mode "'+xo+'" is not existed');return So.throwError(No),void Do(No)}if((xo===_o.Mode.Floorplan||xo===_o.Mode.Topview||xo===_o.Mode.Model)&&(Re(So.model)||So.model.loaded!==!0))return No=new Error("model is not ready."),So.throwError(No),void Do(No);if(Re(So.controller))return No=new Error("controller is not ready."),So.throwError(No),void Do(No);var Oo=So.controller,Lo=So.currentMode,Co=function(){var Ro,jo,zo,Io;if(So.emit("wantsChangeMode",xo,Lo))Do(new Error("change mode canceled."));else{if(So.controller&&To===!1&&Lo===xo)xo===_o.Mode.Panorama||xo===_o.Mode.DepthPanorama||xo===_o.Mode.Model||xo===_o.Mode.VRPanorama?typeof bo.panoIndex=="number"&&bo.panoIndex!==So.panoIndex?So.controller.moveToPano((jo=(Ro=bo.panoIndex)!==null&&Ro!==void 0?Ro:So.panoIndex)!==null&&jo!==void 0?jo:0,t$3.__assign({duration:wo},bo),Eo):So.updateCamera(bo,wo,Eo).catch(function(){}):(typeof bo.panoIndex=="number"&&bo.panoIndex!==So.panoIndex&&(So.panoIndex=bo.panoIndex),So.updateCamera(bo,wo,Eo).catch(function(){}));else{Oo.destroy();var Po=(Io=(zo=bo.panoIndex)!==null&&zo!==void 0?zo:So.panoIndex)!==null&&Io!==void 0?Io:0,Bo=Zr(xo)?So.panoramaLikeSavedPose:{};typeof bo.longitude!="number"&&typeof bo.latitude!="number"||(Bo.longitude=bo.longitude,Bo.latitude=bo.latitude),typeof bo.fov=="number"&&(Bo.fov=bo.fov);var ko=t$3.__assign(t$3.__assign({initial:[Po,Bo,wo,Eo]},So.commonParams()),So.controllerInits[xo]);So.saveControllerPose(Oo),So.controller=So.applyController(xo,ko);var Uo=Kr[xo].initAnimationEndPose(ko);So.emit("modeChange",xo,Lo,Po,Uo)}$o()}};xo===_o.Mode.VRPanorama?(typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Ro){if(Ro=="granted")return Promise.resolve();var jo=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(jo)}):Promise.resolve()).then(function(){return Co()}).catch(function(Ro){Ro instanceof Error&&(So.throwError(Ro),Do(Ro))}):Co()})},_o.prototype.getPixels=function(xo,bo,wo,Eo,To){if(To===void 0&&(To=1),!this.renderer)throw new Error("renderer is not initialized.");var So=this.getPixelsRenderTarget,$o=this.renderer.getSize(new r$3.Vector2);xo=Math.min(Math.max(xo,Math.floor(wo/2)),Math.floor($o.x-wo)),bo=Math.min(Math.max(bo,Math.floor(Eo/2)),Math.floor($o.y-Eo)),xo*=To,bo*=To,wo*=To,Eo*=To,So.setSize($o.x*To,$o.y*To),So.scissor.set(xo,bo,wo,Eo),So.scissorTest=!0,this.renderer.setRenderTarget(So);var Do=new Uint8Array(wo*Eo*4);return this.controller?this.controller.render(yo.getDelta()):this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(So,xo,bo,wo,Eo,Do),this.renderer.setRenderTarget(null),So.setSize(1,1),So.scissor.set(0,0,0,0),So.scissorTest=!1,Do},_o.prototype.getElement=function(){var xo;return(xo=this.renderer)===null||xo===void 0?void 0:xo.domElement},_o.prototype.render=function(xo,bo){var wo=this;if(bo===void 0&&(bo=!1),!this.renderer)return null;if(bo){var Eo=this.renderer.getSize(new r$3.Vector2);this.scene.traverseVisible(function($o){$o.setResolution&&$o.setResolution(Eo.x,Eo.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var To=this.getDrawingBufferSize(fo);this.screenBuffer.setSize(To.x,To.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(yo.getDelta()),this.poweredByRealsee&&po(this.renderer),this.renderer.setRenderTarget(null);var So=Ji(this.renderer.getContext());return So&&this.throwError(So),xo&&We.shared.add(xo,!0),this.screenBuffer}return this.aroundScissor(function(){if(wo.renderer){wo.controller?wo.controller.render(yo.getDelta()):wo.renderer.render(wo.scene,wo.camera),wo.poweredByRealsee&&po(wo.renderer);var $o=Ji(wo.renderer.getContext());$o&&wo.throwError($o)}xo&&We.shared.add(xo,!0)}),null},_o.prototype.updateTime=function(xo,bo){var wo=this;if(!this.destroyed){this.syncingState=this.syncState(xo,bo),this.controller&&this.controller.updateTime(xo,bo),this.syncingState=!1;var Eo=new r$3.Vector2(512,512);this.renderer&&this.renderer.getSize(Eo);var To=[];if(go.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Mo.setFromProjectionMatrix(go),this.scene.traverse(function(Lo){Lo.setResolution&&Lo.setResolution(Eo.x,Eo.y),Lo.mixer instanceof r$3.AnimationMixer&&Lo.mixer.update(yo.getDelta()),(Lo instanceof r$3.Mesh||Lo instanceof r$3.Line||Lo instanceof r$3.Points)&&(Lo instanceof r$3.ImmediateRenderObject||!Lo.frustumCulled||Mo.intersectsObject(Lo))&&To.push(Lo)}),this.renderer&&this.paused===!1){var So=void 0;if(this.onlyRenderIfNeeds!==!0)So=this.render();else{for(var $o=0,Do=To;$o<Do.length;$o++){var No=Do[$o],Oo=function(Lo){Lo.needsRender===!0?(Lo.needsRender=!1,wo.needsRender=!0):Lo.mixer&&Lo.mixer.stats.actions.inUse>0&&(wo.needsRender=!0)};Oo(No),No.traverseAncestors(Oo)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(So=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return wo.controller.postProcessing(wo.screenBuffer,yo.getDelta())}),this.hasListener("renderFrame")&&this.emit("renderFrame",So!==void 0)}this.hasListener("fps")&&(this.fps.testTime&&xo-this.fps.testTime<1e3?this.fps.testCount++:(this.emit("fps",this.fps.testCount),this.fps.testTime=xo,this.fps.testCount=0))}},_o.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof Ue&&this.renderer.clear(!0,!0,!0)},_o.prototype.play=function(){this.needsRender=!0,this.paused=!1},_o.prototype.moveToPano=function(xo,bo,wo){bo===void 0&&(bo={}),wo===void 0&&(wo=!0);var Eo=this,To=Eo.controller,So=Eo.currentMode,$o=Eo.renderer;To?$o?So===_o.Mode.Floorplan||So===_o.Mode.Topview?Re(xo)||(this.panoIndex=xo,this.changeMode(_o.Mode.Panorama,bo,void 0,wo)):To.moveToPano(xo,bo,wo):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},_o.prototype.preloadPano=function(xo,bo){var wo=this;if(bo===void 0&&(bo=Qe),!this.work)return Promise.reject(new Error("work never loaded"));var Eo=this.work.observers[xo],To=He();return Promise.all(["right","left","up","down","front","back"].map(function(So){var $o=t$3.__assign({key:"cube."+xo+"."+So,basisLoaderInitialized:wi.isInitialized()},Xt(wo.imageOptions,["size","format","quality"])),Do=Eo.images[So];return function(No,Oo){return Oo===void 0&&(Oo={}),No in Pt?Pt[No]:Pt[No]=new Promise(function(Lo,Co){var Ro=document.createElement("link");Ro.href=No,Ro.rel="preload",Ro.as="fetch";var jo=He(),zo=document.head||document.getElementsByTagName("head")[0];zo&&zo.appendChild(Ro);var Io=!1;Ro.onload=function(){var Po;if(Io!==!0){Io=!0,Lo();var Bo=He(),ko={source:No,requestTime:jo,responseTime:Bo,costs:Bo-jo,headers:{}};(Po=Oo.networkSubscribe)===null||Po===void 0||Po.emit("network",No,"Link","preload",JSON.stringify(ko))}},Ro.onerror=function(Po){var Bo;if(Io!==!0){Io=!0;var ko=new zt(No,"Link",0);Co(ko),(Bo=Oo.networkSubscribe)===null||Bo===void 0||Bo.emit("network",No,"Link","error",ko.message)}}})}(wo.imageOptions.transform?wo.imageOptions.transform(Do,$o):ti(Do,$o),{networkSubscribe:wo.networkSubscribe})})).then(function(){var So=He()-To;return bo(So),So})},_o.prototype.project2d=function(xo,bo){if(bo===void 0&&(bo=!1),!this.renderer)return null;if(this.model.empty===!1&&bo){var wo=this.camera.position,Eo=xo.clone().sub(wo),To=new r$3.Raycaster(wo,Eo.clone().normalize()),So=this.model.intersectRaycaster(To)[0];if(So&&So.distance+.01<Eo.length())return null}var $o=xo.clone().project(this.camera);if(Math.abs($o.z)>1)return null;var Do=this.renderer.getSize(new r$3.Vector2),No=Do.x*this.scissor.width,Oo=Do.y*this.scissor.height,Lo=Do.x*this.scissor.left+($o.x+1)/2*No,Co=Do.y*(1-this.scissor.bottom-this.scissor.height)+(1-$o.y)/2*Oo;return new r$3.Vector2(Lo,Co)},_o.prototype.getRenderObjects=function(xo){go.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Mo.setFromProjectionMatrix(go),xo||(xo=this.scene);var bo=[];return xo.traverseVisible(function(wo){(wo instanceof r$3.Mesh||wo instanceof r$3.Line||wo instanceof r$3.Points)&&(wo instanceof r$3.ImmediateRenderObject||!wo.frustumCulled||Mo.intersectsObject(wo))&&bo.push(wo)}),bo},_o.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||_o.Mode.Panorama,panoIndex:this.panoIndex||0})},_o.prototype.setState=function(xo,bo,wo){var Eo,To,So,$o,Do,No,Oo,Lo;bo===void 0&&(bo=!1),wo===void 0&&(wo=!0),!(xo=Object.assign({},xo)).offset||xo instanceof r$3.Vector3||(xo.offset=new r$3.Vector3(xo.offset.x,xo.offset.y,xo.offset.z));var Co,Ro,jo,zo,Io=(Eo=xo.panoIndex)!==null&&Eo!==void 0?Eo:this.state.panoIndex,Po=(To=xo.mode)!==null&&To!==void 0?To:this.state.mode;if(this.work)if(this.work.observers[Io])if(xo.mode!==_o.Mode.Floorplan&&xo.mode!==_o.Mode.Topview&&xo.mode!==_o.Mode.Model||!Re(this.model)&&this.model.loaded===!0){if(this.state.mode!==Po){var Bo=void 0;Bo=Zr(this.state.mode)&&Zr(Po)?t$3.__assign({},this.state):Zr(Po)?t$3.__assign({},this.panoramaLikeSavedPose):t$3.__assign({},xo),typeof xo.longitude=="number"&&(Bo.longitude=xo.longitude),typeof xo.latitude=="number"&&(Bo.latitude=xo.latitude),typeof xo.fov=="number"&&(Bo.fov=xo.fov);var ko=t$3.__assign(t$3.__assign({initial:[Io,Bo,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Po]),Uo=Kr[Po].initAnimationEndPose(ko);Co=Uo.longitude,Ro=Uo.latitude,jo=Uo.fov,zo=Uo.offset}else Co=(So=xo.longitude)!==null&&So!==void 0?So:this.state.longitude,Ro=($o=xo.latitude)!==null&&$o!==void 0?$o:this.state.latitude,jo=(Do=xo.fov)!==null&&Do!==void 0?Do:this.state.fov,zo=(No=xo.offset)!==null&&No!==void 0?No:this.state.offset;var Qo={panoIndex:Io,mode:Po,longitude:Co,latitude:Ro,fov:jo,offset:zo};this.emit("setState",Qo),Dn(this.state,Qo)||(Nn(this.state,Qo),this.controller&&(this.controller.userAction=wo),bo&&this.state.mode===Qo.mode&&(this.syncingState=this.syncState(He(),0,bo),this.syncingState&&((Oo=this.controller)===null||Oo===void 0||Oo.updateTime(He(),0),this.syncingState=!1)),this.emit("stateChange",this.state,wo),(Lo=this.analysis)===null||Lo===void 0||Lo.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},_o.prototype.aroundScissor=function(xo){if(this.renderer){var bo=new r$3.Vector2,wo=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==0;if(wo){this.renderer.getSize(bo);var Eo=Math.floor(bo.x*this.scissor.left),To=Math.floor(bo.y*this.scissor.bottom),So=Math.floor(bo.x*this.scissor.width),$o=Math.floor(bo.y*this.scissor.height);this.renderer.setViewport(Eo,To,So,$o),this.renderer.setScissor(Eo,To,So,$o),this.renderer.setScissorTest(!0)}xo(),wo&&(this.renderer.setViewport(0,0,bo.x,bo.y),this.renderer.setScissor(0,0,bo.x,bo.y),this.renderer.setScissorTest(!1))}},_o.prototype.syncState=function(xo,bo,wo){wo===void 0&&(wo=!1);var Eo=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var To={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,To,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var So=this.currentMode;if(!(So===_o.Mode.Floorplan||So===_o.Mode.Topview||So===_o.Mode.Model)||!this.modelPending)for(var $o=void 0;$o=this.readyCallbacks.shift();)$o()}if(this.controller instanceof Kr.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Do={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Do,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Do={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,Do,!1),!0;if(this.controller instanceof Kr.Topview){var No=1,Oo=wo?this.state.fov:rn(this.camera.pose.fov,this.state.fov,No),Lo=wo?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(rn(this.camera.pose.offset.x,this.state.offset.x,.2),rn(this.camera.pose.offset.y,this.state.offset.y,.2),rn(this.camera.pose.offset.z,this.state.offset.z,.2));if(Math.abs(Oo-this.camera.pose.fov)>.001||Lo.distanceTo(this.camera.pose.offset)>.001)return this.controller.cameraMotion.set({fov:Oo},0).catch(Qe),this.controller.locationMotion.set({x:Lo.x,y:Lo.y,z:Lo.z},0).catch(Qe),!0}else{No=1;var Co=Math.PI/45,Ro=(Oo=wo?this.state.fov:rn(this.camera.pose.fov,this.state.fov,No),wo?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Io,Po,Bo){if(Io.longitude===Po.longitude&&Io.latitude===Po.latitude)return{longitude:Po.longitude,latitude:Po.latitude};var ko=en(Io.longitude),Uo=Io.latitude,Qo=en(Po.longitude),qo=Po.latitude;Qo-ko>tn?ko+=nn:ko-Qo>tn&&(ko-=nn);var Zo=Bo/Math.sqrt(Math.pow(Qo-ko,2)+Math.pow(qo-Uo,2));return Zo>=1?{longitude:Po.longitude,latitude:Po.latitude}:{longitude:ko+(Qo-ko)*Zo,latitude:Uo+(qo-Uo)*Zo}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Co)),jo=Ro.longitude,zo=Ro.latitude;if(Math.abs(jo-this.camera.pose.longitude)>.001||Math.abs(zo-this.camera.pose.latitude)>.001||Math.abs(Oo-this.camera.pose.fov)>.001)return this.controller.cameraMotion.set({longitude:jo,latitude:zo,fov:Oo},0).catch(Qe),!0}return this.stateSynced=!0,Eo===!1&&this.emit("stateSynced",this.state),!1},_o.prototype.ready=function(){var xo=this;return new Promise(function(bo){return xo.readyCallbacks.push(bo)})},_o.prototype.throwError=function(xo){this.hasListener("error")?this.emit("error",xo):console.error(xo)},_o.prototype.loadModel=function(xo,bo,wo,Eo){var To=this,So=xo.async||!1;this.emit("modelWillLoad",xo);var $o=new Xi({allowHosts:bo,networkSubscribe:this.networkSubscribe});$o.once("bvhLoaded",function(){To.emit("modelBvhLoaded",$o)}),$o.once("geometryLoaded",function(){To.emit("modelGeometryLoaded",$o)}),$o.on("error",function(Do){To.emit("modelLoadError",Do,$o),To.throwError(Do),To.modelPending=!1}),$o.on("shownFloorChange",function(Do,No){To.emit("modelShownFloorChange",Do,No)}),$o.once("loaded",function(){var Do;if(!To.destroyed){$o.bounding.max.y-$o.bounding.min.y<1.5&&($o.bounding.max.y=$o.bounding.min.y+10);var No,Oo=To.model;Oo&&(Oo.show(),No=Oo.getMaterial()||{},To.scene.remove(Oo),Oo.dispose(),$o.setTransparent(Oo.getTransparent())),To.model=Object.assign($o,{loaded:!0}),(Do=To.controller)===null||Do===void 0||Do.updateModel(To.model),No&&To.model.setMaterial(No),Oo&&To.currentMode!==_o.Mode.Panorama&&(So=!1);var Lo=function(){var zo;(zo=To.renderer)===null||zo===void 0||zo.compile(To.scene,To.camera),wo(),To.emit("modelLoaded",$o),To.emit("modelMaterialLoaded",$o),$o.buildBVH(),To.needsRender=!0,To.modelPending=!1};if(So){var Co=[].concat(To.model.children);To.model.children.length=0;var Ro=at(Ao);Ro.name="uniformKeeper",Ro.visible=!1,Ro.setMaterial(No||{}),To.model.add(Ro),To.scene.add(To.model);var jo=function(){Ft(function(){var zo=Co.shift();zo?(To.model.setMaterial.call(zo,To.model.getMaterial()||{}),To.model.add(zo),To.model.shownFloor===null?To.model.show():To.model.show(To.model.shownFloor),We.shared.add(jo,!0,2)):(To.model.remove(Ro),Lo())})};jo()}else Oo?(To.scene.add(To.model),Lo()):Ft(function(){To.scene.add(To.model),Lo()})}}),this.modelPending=!0,$o.load(xo,this.textureOptions)},_o.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},_o.prototype.saveControllerPose=function(xo){xo===void 0&&(xo=this.controller),xo&&Zr(xo)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},_o.prototype.applyController=function(xo,bo){var wo=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Eo=Kr[xo];xo===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(xo===_o.Mode.Floorplan||xo===_o.Mode.Topview||xo===_o.Mode.Model),this.currentMode=xo;for(var To=new Eo(bo),So=function(Co){To.on(Co,function(){for(var Ro=[],jo=0;jo<arguments.length;jo++)Ro[jo]=arguments[jo];var zo=wo.emit.apply(wo,t$3.__spreadArray([Co],Ro,!1));if(zo)return!1})},$o=0,Do=Xr;$o<Do.length;$o++)So(Do[$o]);var No=Kr[xo].initAnimationEndPose(bo),Oo=bo.initial[3],Lo={panoIndex:bo.initial[0],mode:xo,longitude:No.longitude,latitude:No.latitude,fov:No.fov,offset:No.offset};return Dn(this.state,Lo)||(Nn(this.state,Lo),this.emit("stateChange",this.state,Oo)),this.emit("currentStateChange",this.getCurrentState(),Oo),To.on("cameraUpdate",function(Co,Ro){var jo;if(wo.controller){var zo=t$3.__assign(t$3.__assign({},wo.controller.getTargetPose()),{panoIndex:wo.panoIndex,mode:xo});Ro&&wo.syncingState===!1&&wo.state.mode===zo.mode&&!Dn(wo.state,zo)&&(Nn(wo.state,zo),wo.emit("stateChange",wo.state,Ro),(jo=wo.analysis)===null||jo===void 0||jo.state(wo.work,wo.state))}wo.emit("currentStateChange",wo.getCurrentState(),Ro)}),To.on("initAnimationWillStart",function(Co,Ro,jo){var zo,Io=t$3.__assign(t$3.__assign({},Ro),{panoIndex:Co,mode:xo});jo&&wo.state.mode===Io.mode&&!Dn(wo.state,Io)&&(Nn(wo.state,Io),wo.emit("stateChange",wo.state,jo),(zo=wo.analysis)===null||zo===void 0||zo.state(wo.work,wo.state))}),To.on("initAnimationEnded",function(Co,Ro,jo){var zo,Io=t$3.__assign(t$3.__assign({},Ro),{panoIndex:Co,mode:xo});jo&&wo.state.mode===Io.mode&&!Dn(wo.state,Io)&&(Nn(wo.state,Io),wo.emit("stateChange",wo.state,jo),(zo=wo.analysis)===null||zo===void 0||zo.state(wo.work,wo.state))}),To.on("panoWillArrive",function(Co,Ro,jo){var zo;wo.panoIndex=Co;var Io=t$3.__assign(t$3.__assign({},Ro),{panoIndex:Co,mode:xo});jo&&wo.state.mode===Io.mode&&!Dn(wo.state,Io)&&(Nn(wo.state,Io),wo.emit("stateChange",wo.state,jo),(zo=wo.analysis)===null||zo===void 0||zo.state(wo.work,wo.state))}),To.on("panoArrived",function(Co,Ro,jo){var zo,Io=t$3.__assign(t$3.__assign({},Ro),{panoIndex:Co,mode:xo});jo&&wo.state.mode===Io.mode&&!Dn(wo.state,Io)&&(Nn(wo.state,Io),wo.emit("stateChange",wo.state,jo),(zo=wo.analysis)===null||zo===void 0||zo.state(wo.work,wo.state))}),To.on("moveToPano",function(Co,Ro){wo.emit("currentStateChange",wo.getCurrentState(),Ro)}),To.on("wantsMoveToPano",function(Co,Ro,jo){var zo=wo.emit("wantsMoveToPano",Co,Ro,jo);zo||(zo=wo.emit("wantsToMoveToPano",Co,Ro,jo)),zo||wo.moveToPano(Co,Ro,jo)}),To.on("vrWantsToExit",function(){wo.currentMode===_o.Mode.VRPanorama&&wo.changeMode(_o.Mode.Panorama)}),To.on("error",function(Co){return wo.throwError(Co)}),To},_o.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},_o.Line=null,_o}(vt);five.AnimationFrameLoop=We,five.BVH=Mt,five.BVHNode=pt,five.BVHVector3=dt,five.Camera=Be,Five=five.Five=vo,five.InternalWebGLRenderer=Ue,five.Model=Xi,five.NetworkSubscribe=kt,five.PBMContainer=Ke,five.PBMGroup=Ze,five.PBMMaterial=rt,five.PBMMesh=qe,five.PROXY_CONTROLLER_EVENT_NAMES=Xr,five.Scene=_e,five.Subscribe=vt,five.defaultImageURLTransform=ti,five.getViewportScale=$r,parseWork=five.parseWork=Mn;var useFiveState,useFiveProject2d$1,useFiveEventCallback,useFiveCurrentState,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$2.exports,n$2=require$$1,r$2=five;function o$1(va){if(va&&va.__esModule)return va;var _o=Object.create(null);return va&&Object.keys(va).forEach(function(xo){if(xo!=="default"){var bo=Object.getOwnPropertyDescriptor(va,xo);Object.defineProperty(_o,xo,bo.get?bo:{enumerable:!0,get:function(){return va[xo]}})}}),_o.default=va,Object.freeze(_o)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=u$1.createContext(null);function s$1(){var va=u$1.useContext(f$1);if(!va)throw new Error("FiveProvider never found.");return va.five}function c$1(){var va=u$1.useContext(f$1);if(!va)throw new Error("FiveProvider never found.");return va.loadWork}var l$2={display:"inline-block",overflow:"hidden"};function d(va,_o){var xo=s$1(),bo=[xo];_o!==void 0&&(bo=bo.concat(_o)),u$1.useLayoutEffect(function(){return va(xo.scene)},bo)}var v$1=d;function p$1(va){return e$1.__assign({},va.state)}function h$1(va){var _o=va.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(va.camera.position,_o)}function m$1(va){return va.camera.getWorldDirection(new i$1.Vector3)}function y$1(va){return va.model.empty?"Empty":"Loaded"}function S(va,_o){return _o.indexOf(va)>=0}function g$1(va,_o){for(var xo=0,bo=Object.keys(_o);xo<bo.length;xo++){var wo=bo[xo];_o[wo]!==void 0&&(va[wo]=_o[wo])}}function C$1(va,_o){if(S("loadWork",_o))return va}function b(va,_o){if(S("setState",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.setState.apply(va,xo)}}function w$1(va,_o){if(S("on",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.on.apply(va,xo)}}function E$1(va,_o){if(S("on",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.once.apply(va,xo)}}function k(va,_o){if(S("off",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.off.apply(va,xo)}}function x(va,_o){if(S("intersectRaycaster",_o))return function(){for(var xo,bo=[],wo=0;wo<arguments.length;wo++)bo[wo]=arguments[wo];return(xo=va.model).intersectRaycaster.apply(xo,bo)}}function L$1(va,_o){if(S("project2d",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.project2d.apply(va,xo)}}function F(va,_o){if(S("updateCamera",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.updateCamera.apply(va,xo)}}function _$2(va,_o){if(S("initBasisLoader",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.initBasisLoader.apply(va,xo)}}function P$1(va,_o){if(S("getPixels",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.getPixels.apply(va,xo)}}function R$1(va,_o){if(S("render",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.render.apply(va,xo)}}function V(va,_o){if(S("needsRender",_o))return function(){va.needsRender=!0}}function M(va,_o){if(S("preloadPano",_o))return function(){for(var xo=[],bo=0;bo<arguments.length;bo++)xo[bo]=arguments[bo];return va.preloadPano.apply(va,xo)}}function W$1(va,_o){if(S("showFloor",_o))return function(xo){typeof xo=="number"?va.model.show(xo):va.model.show()}}function O$1(va,_o){if(S("toggleHelperVisible",_o))return function(xo){va.helperVisible=xo}}function j(va,_o){for(var xo={},bo=_o.length,wo=-1;++wo<bo;){var Eo=_o[wo];Eo in va&&(xo[Eo]=va[Eo])}return xo}function N$1(va,_o){for(var xo=0;xo<va.length;xo++)for(var bo=0;bo<_o.length;bo++)if(va[xo]===_o[bo])return!0;return!1}var A$1=function(){function va(_o,xo){this.values=_o,this.listeners=[],this.onValuesChange=xo}return va.prototype.on=function(_o,xo){var bo=this,wo=[_o,xo];return this.listeners.push(wo),function(){var Eo=bo.listeners.indexOf(wo);Eo>=0&&bo.listeners.splice(Eo,1)}},va.prototype.getValues=function(_o){return j(this.values,_o)},va.prototype.setValues=function(_o,xo){var bo,wo,Eo=[];for(var To in xo)_o.indexOf(To)>=0&&(bo=xo[To],wo=this.values[To],!(typeof bo=="number"&&typeof wo=="number"&&isNaN(bo)&&isNaN(wo)||bo===wo))&&Eo.push(To);if(Eo.length!==0){for(var So=e$1.__assign({},this.values),$o=0,Do=Eo;$o<Do.length;$o++){var No=Do[$o];this.values[No]=xo[No]}this.onValuesChange&&this.onValuesChange(this.values,So);for(var Oo=0,Lo=this.listeners;Oo<Lo.length;Oo++){var Co=Lo[Oo],Ro=Co[0],jo=Co[1];if(N$1(Ro,Eo)){var zo=j(So,Ro);jo(j(this.values,Ro),zo)}}}},va}();FiveCanvas=react.FiveCanvas=function(va){var _o=va.width,xo=va.height,bo=s$1(),wo=u$1.createRef(),Eo=e$1.__assign({width:_o,height:xo},l$2);return u$1.useLayoutEffect(function(){if(wo.current&&bo.renderer){if(bo.renderer.domElement.parentNode!==null&&bo.renderer.domElement.parentNode!==wo.current)throw new Error("There are more than 2 fiveCanvas in this context.");bo.renderer.domElement.parentNode!==wo.current&&wo.current.appendChild(bo.renderer.domElement),bo.camera.aspect=_o/xo,bo.camera.updateProjectionMatrix(),bo.renderer.setSize(_o,xo),bo.needsRender=!0}},[_o,xo,wo.current]),u$1.createElement("div",{ref:wo,style:Eo})},react.INJECTION_PROPNAME="$five",react.Store=A$1,react.createFiveFeature=function(){for(var va=[],_o=0;_o<arguments.length;_o++)va[_o]=arguments[_o];return va},createFiveProvider=react.createFiveProvider=function(va){return va===void 0&&(va={}),function(_o){function xo(bo){var wo,Eo=_o.call(this,bo)||this,To=function(So){var $o=So===void 0?{}:So,Do=$o.backgroundColor,No=Do===void 0?1579548:Do,Oo=$o.backgroundAlpha,Lo=Oo===void 0?1:Oo,Co=$o.pixelRatio,Ro=Co===void 0?1:Co;if(typeof window!="undefined"){var jo=a$1.shift();return jo||((jo=new i$1.WebGLRenderer({antialias:!1,alpha:!0})).outputEncoding=i$1.sRGBEncoding),jo.setPixelRatio(Ro),jo.setClearColor(No,Lo),jo.autoClear=!0,jo}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1});return Eo.five=new r$2.Five(e$1.__assign({renderer:To},va)),(bo.work||bo.initialWork)&&Eo.five.load(bo.work||bo.initialWork,bo.initialState,void 0,(wo=bo.initialUserAction)===null||wo===void 0||wo),Eo.five.on("load",function(){var So;Eo.props.onWorkChange&&Eo.props.onWorkChange((So=Eo.five)===null||So===void 0?void 0:So.work)}),Eo.five.on("stateChange",function(So,$o){Eo.props.onStateChange&&Eo.props.onStateChange(So,$o)}),Eo.five.on("currentStateChange",function(So,$o){Eo.props.onCurrentStateChange&&Eo.props.onCurrentStateChange(So,$o)}),Eo.five.on("error",function(So){Eo.props.onError?Eo.props.onError(So):console.warn(So.message)}),Eo}return e$1.__extends(xo,_o),xo.prototype.loadWork=function(bo,wo,Eo,To){if(To===void 0&&(To=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(bo,wo,Eo,To)},xo.prototype.shouldComponentUpdate=function(bo){var wo,Eo;return bo.work&&bo.work!==((wo=this.five)===null||wo===void 0?void 0:wo.work)&&((Eo=this.five)===null||Eo===void 0||Eo.load(bo.work,bo.initialState)),!0},xo.prototype.componentWillUnmount=function(){var bo;this.five&&(this.five.dispose(),(bo=this.five.renderer)&&a$1.indexOf(bo)===-1&&a$1.push(bo),delete this.five)},xo.prototype.render=function(){var bo=this;return u$1.createElement(f$1.Provider,{value:{five:this.five,loadWork:function(){for(var wo=[],Eo=0;Eo<arguments.length;Eo++)wo[Eo]=arguments[Eo];return bo.loadWork.apply(bo,wo)}}},this.props.children)},xo}(u$1.Component)},react.createStore=function(va){var _o=u$1.createContext(null);return{useStore:function(xo){var bo=u$1.useContext(_o);if(bo===null)throw new Error("StoreProvider never found.");var wo=u$1.useRef(!0),Eo=u$1.useState(bo.getValues(xo)),To=Eo[0],So=Eo[1],$o=e$1.__spreadArray([bo],xo,!0);return u$1.useLayoutEffect(function(){return wo.current?wo.current=!1:So(bo.getValues(xo)),bo.on(xo,function(Do){return So(Do)})},$o),[To,u$1.useCallback(function(Do){return bo.setValues(xo,Do)},$o)]},useStoreSetter:function(xo){var bo=u$1.useContext(_o);if(bo===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(wo){return bo.setValues(xo,wo)},e$1.__spreadArray([bo],xo,!0))},watchStore:function(xo,bo,wo){var Eo=u$1.useContext(_o);if(Eo===null)throw new Error("StoreProvider never found.");var To=e$1.__spreadArray([Eo],xo,!0);wo!==void 0&&(To=To.concat(wo)),u$1.useLayoutEffect(function(){return Eo.on(xo,bo)},To)},useStoreAction:function(xo){var bo=u$1.useContext(_o);if(bo===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var wo=[],Eo=0;Eo<arguments.length;Eo++)wo[Eo]=arguments[Eo];var To=va[xo],So=To[0],$o=To.slice(1),Do=function(){return bo.getValues($o)},No=function(Oo){return bo.setValues($o,Oo)};return So.apply(void 0,e$1.__spreadArray([Do,No],wo,!1))},[])},StoreProvider:function(xo){function bo(wo){var Eo=xo.call(this,wo)||this;return Eo.store=new A$1(wo.initialValue,function(){for(var To,So=[],$o=0;$o<arguments.length;$o++)So[$o]=arguments[$o];Eo.props.onValuesChange&&(To=Eo.props).onValuesChange.apply(To,So)}),Eo}return e$1.__extends(bo,xo),bo.prototype.shouldComponentUpdate=function(wo){return wo.children!==this.props.children},bo.prototype.render=function(){return u$1.createElement(_o.Provider,{value:this.store},this.props.children)},bo}(u$1.Component)}},react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var va=s$1();return{updateCamera:u$1.useCallback(function(_o,xo){return va.updateCamera(_o,xo)},[va]),initBasisLoader:u$1.useCallback(function(_o){return va.initBasisLoader(_o)},[va]),getPixels:u$1.useCallback(function(_o,xo,bo,wo,Eo){return va.getPixels(_o,xo,bo,wo,Eo)},[va]),render:u$1.useCallback(function(_o){return va.render(_o)},[va]),needsRender:u$1.useCallback(function(){return va.needsRender=!0},[va]),preloadPano:u$1.useCallback(function(_o,xo){return va.preloadPano(_o,xo)},[va])}},react.useFiveCameraDirection=function(){var va=s$1(),_o=u$1.useState(function(){return m$1(va)}),xo=_o[0],bo=_o[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return bo(m$1(va))})},[va]),xo},react.useFiveCameraRaycaster=function(){var va=s$1(),_o=u$1.useState(function(){return h$1(va)}),xo=_o[0],bo=_o[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return bo(h$1(va))})},[va]),xo},react.useFiveCurrentObserver=function(){var va=s$1(),_o=u$1.useState(function(){return va.getCurrentState()}),xo=_o[0],bo=_o[1];return u$1.useLayoutEffect(function(){return va.on("currentStateChange",function(){return bo(va.getCurrentState())})},[va]),va.work?va.work.observers[xo.panoIndex]:null},useFiveCurrentState=react.useFiveCurrentState=function(){var va=s$1(),_o=u$1.useState(function(){return va.getCurrentState()}),xo=_o[0],bo=_o[1],wo=u$1.useCallback(function(Eo,To,So){To===void 0&&(To=!1),So===void 0&&(So=!0);var $o=typeof Eo=="function"?Eo(va.getCurrentState()):Eo;va.setState($o,To,So)},[va]);return u$1.useLayoutEffect(function(){return va.on("currentStateChange",function(){return bo(va.getCurrentState())})},[va]),[xo,wo]},useFiveEventCallback=react.useFiveEventCallback=function(va,_o,xo){var bo=s$1(),wo=[bo,va];xo!==void 0&&(wo=wo.concat(xo)),u$1.useLayoutEffect(function(){return bo.on(va,_o)},wo)},react.useFiveFloor=function(){var va=s$1(),_o=u$1.useState(va.model.shownFloor),xo=_o[0],bo=_o[1],wo=u$1.useState(va.model.floorLength),Eo=wo[0],To=wo[1],So=u$1.useCallback(function($o){typeof $o=="number"?va.model.show($o):va.model.show()},[va]);return u$1.useLayoutEffect(function(){var $o=[];return $o.push(va.on("modelShownFloorChange",function(){return bo(va.model.shownFloor)})),$o.push(va.on("modelLoaded",function(){return To(va.model.floorLength)})),function(){for(var Do;Do=$o.shift();)Do()}},[va]),[xo,Eo,So]},react.useFiveHelper=function(){var va=s$1(),_o=u$1.useState(va.helperVisible),xo=_o[0],bo=_o[1],wo=u$1.useCallback(function(Eo){va.helperVisible=Eo},[va]);return u$1.useLayoutEffect(function(){return va.on("helpersVisibleChange",function(Eo){return bo(Eo)})},[va]),[xo,wo]},react.useFiveModelIntersectRaycaster=function(){var va=s$1();return u$1.useCallback(function(_o){return va.model.intersectRaycaster(_o)},[va])},react.useFiveModelReadyState=function(){var va=s$1(),_o=u$1.useState(function(){return y$1(va)}),xo=_o[0],bo=_o[1];return u$1.useLayoutEffect(function(){return va.on("modelLoaded",function(){return bo(y$1(va))})},[va]),xo},useFiveProject2d$1=react.useFiveProject2d=function(){var va=s$1(),_o=u$1.useState(function(){return Symbol()});_o[0];var xo=_o[1];return u$1.useLayoutEffect(function(){return va.on("cameraUpdate",function(){return xo(Symbol())})},[va]),u$1.useCallback(function(bo,wo){return va.project2d(bo,wo)},[va])},react.useFiveScene=v$1,react.useFiveSceneEffect=d,useFiveState=react.useFiveState=function(){var va=s$1(),_o=u$1.useState(function(){return p$1(va)}),xo=_o[0],bo=_o[1],wo=u$1.useCallback(function(Eo,To,So){To===void 0&&(To=!1),So===void 0&&(So=!0);var $o=typeof Eo=="function"?Eo(va.getCurrentState()):Eo;va.setState($o,To,So)},[va]);return u$1.useLayoutEffect(function(){return va.on("stateChange",function(){return bo(p$1(va))})},[va]),[xo,wo]},react.useFiveWork=function(){var va=s$1(),_o=c$1(),xo=u$1.useState(function(){return va.work}),bo=xo[0],wo=xo[1];return u$1.useLayoutEffect(function(){return va.on("load",function(){return wo(va.work)})},[va]),[bo,_o]},react.withFive=function(va){return function(_o){return u$1.forwardRef(function(xo,bo){var wo=s$1(),Eo=c$1(),To=function($s,ks){return[S("unsafe__fiveInstance",ks)?$s:void 0]}(wo,va)[0],So=function($s,ks){var zs=S("state",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return e$1.__assign({},$s.state)},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("stateChange",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),$o=So[0],Do=So[1],No=function($s,ks){var zs=S("currentState",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.getCurrentState()},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("currentStateChange",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Oo=No[0],Lo=No[1],Co=function($s,ks){var zs=S("currentObserver",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.getCurrentState()},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("currentStateChange",function(){return Bs(Symbol())})},[$s]),[Fs?$s.work?$s.work.observers[Fs.panoIndex]:null:void 0,xs]}(wo,va),Ro=Co[0],jo=Co[1],zo=function($s,ks){var zs=S("work",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.work},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("load",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Io=zo[0],Po=zo[1],Bo=function($s,ks){var zs=S("model",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.model},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("modelLoaded",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),ko=Bo[0],Uo=Bo[1],Qo=function($s,ks){return[S("scene",ks)?$s.scene:void 0]}(wo,va)[0],qo=function($s,ks){var zs=S("cameraDirection",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.camera.getWorldDirection(new i$1.Vector3)},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("cameraUpdate",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Zo=qo[0],Xo=qo[1],Fo=function($s,ks){var zs=S("cameraRaycaster",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs){var Zs=$s.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster($s.camera.position,Zs)}},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("cameraUpdate",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Go=Fo[0],Vo=Fo[1],Wo=function($s,ks){var zs=S("modelReadyState",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.model.empty?"Empty":"Loaded"},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("modelLoaded",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Yo=Wo[0],Ko=Wo[1],ts=function($s,ks){var zs=S("shownFloor",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.model.shownFloor},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("modelShownFloorChange",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),Jo=ts[0],rs=ts[1],ls=function($s,ks){var zs=S("totalFloorLength",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.model.hasFloors()},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("modelLoaded",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),ss=ls[0],us=ls[1],ms=function($s,ks){var zs=S("helperVisible",ks),Cs=u$1.useState(Symbol()),xs=Cs[0],Bs=Cs[1],Fs=u$1.useMemo(function(){if(zs)return $s.helperVisible},[$s,xs]);return u$1.useLayoutEffect(function(){if(zs)return $s.on("helpersVisibleChange",function(){return Bs(Symbol())})},[$s]),[Fs,xs]}(wo,va),As=ms[0],Os=ms[1],Es=u$1.useMemo(function(){var $s={};return g$1($s,{setState:b(wo,va),loadWork:C$1(Eo,va),on:w$1(wo,va),once:E$1(wo,va),off:k(wo,va),intersectRaycaster:x(wo,va),project2d:L$1(wo,va),updateCamera:F(wo,va),initBasisLoader:_$2(wo,va),getPixels:P$1(wo,va),render:R$1(wo,va),needsRender:V(wo,va),preloadPano:M(wo,va),showFloor:W$1(wo,va),toggleHelperVisible:O$1(wo,va)}),$s},[wo,Eo]),Ms=u$1.useMemo(function(){var $s=e$1.__assign({},Es);return g$1($s,{unsafe__fiveInstance:To,state:$o,currentState:Oo,currentObserver:Ro,work:Io,model:ko,scene:Qo,cameraDirection:Zo,cameraRaycaster:Go,modelReadyState:Yo,shownFloor:Jo,totalFloorLength:ss,helperVisible:As}),$s},[wo,Es,Do,Lo,jo,Po,Uo,Xo,Vo,Ko,rs,us,Os]);return u$1.createElement(_o,e$1.__assign({ref:bo,$five:Ms},xo))})}};var Player$1={},App$1={},classnames={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(va){(function(){var _o={}.hasOwnProperty;function xo(){for(var bo=[],wo=0;wo<arguments.length;wo++){var Eo=arguments[wo];if(!!Eo){var To=typeof Eo;if(To==="string"||To==="number")bo.push(Eo);else if(Array.isArray(Eo)){if(Eo.length){var So=xo.apply(null,Eo);So&&bo.push(So)}}else if(To==="object")if(Eo.toString===Object.prototype.toString)for(var $o in Eo)_o.call(Eo,$o)&&Eo[$o]&&bo.push($o);else bo.push(Eo.toString())}}return bo.join(" ")}va.exports?(xo.default=xo,va.exports=xo):window.classNames=xo})()})(classnames);var classNames=classnames.exports;function die(va){for(var _o=arguments.length,xo=new Array(_o>1?_o-1:0),bo=1;bo<_o;bo++)xo[bo-1]=arguments[bo];throw new Error(typeof va=="number"?"[MobX] minified error nr: "+va+(xo.length?" "+xo.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+va)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(va){var _o=!1;return function(){if(!_o)return _o=!0,va.apply(this,arguments)}}var noop$1=function va(){};function isFunction(va){return typeof va=="function"}function isStringish(va){var _o=typeof va;switch(_o){case"string":case"symbol":case"number":return!0}return!1}function isObject(va){return va!==null&&typeof va=="object"}function isPlainObject(va){var _o;if(!isObject(va))return!1;var xo=Object.getPrototypeOf(va);return xo==null?!0:((_o=xo.constructor)==null?void 0:_o.toString())===plainObjectString}function isGenerator(va){var _o=va==null?void 0:va.constructor;return _o?_o.name==="GeneratorFunction"||_o.displayName==="GeneratorFunction":!1}function addHiddenProp(va,_o,xo){defineProperty(va,_o,{enumerable:!1,writable:!0,configurable:!0,value:xo})}function addHiddenFinalProp(va,_o,xo){defineProperty(va,_o,{enumerable:!1,writable:!1,configurable:!0,value:xo})}function createInstanceofPredicate(va,_o){var xo="isMobX"+va;return _o.prototype[xo]=!0,function(bo){return isObject(bo)&&bo[xo]===!0}}function isES6Map(va){return va instanceof Map}function isES6Set(va){return va instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(va){var _o=Object.keys(va);if(!hasGetOwnPropertySymbols)return _o;var xo=Object.getOwnPropertySymbols(va);return xo.length?[].concat(_o,xo.filter(function(bo){return objectPrototype.propertyIsEnumerable.call(va,bo)})):_o}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(va){return Object.getOwnPropertyNames(va).concat(Object.getOwnPropertySymbols(va))}:Object.getOwnPropertyNames;function toPrimitive(va){return va===null?null:typeof va=="object"?""+va:va}function hasProp(va,_o){return objectPrototype.hasOwnProperty.call(va,_o)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function va(_o){var xo={};return ownKeys(_o).forEach(function(bo){xo[bo]=getDescriptor(_o,bo)}),xo};function _defineProperties$7(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$7(va,_o,xo){return _o&&_defineProperties$7(va.prototype,_o),xo&&_defineProperties$7(va,xo),va}function _extends$2(){return _extends$2=Object.assign||function(va){for(var _o=1;_o<arguments.length;_o++){var xo=arguments[_o];for(var bo in xo)Object.prototype.hasOwnProperty.call(xo,bo)&&(va[bo]=xo[bo])}return va},_extends$2.apply(this,arguments)}function _inheritsLoose$1(va,_o){va.prototype=Object.create(_o.prototype),va.prototype.constructor=va,va.__proto__=_o}function _assertThisInitialized$7(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _unsupportedIterableToArray$9(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$9(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$9(va,_o)}}function _arrayLikeToArray$9(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _createForOfIteratorHelperLoose(va,_o){var xo;if(typeof Symbol=="undefined"||va[Symbol.iterator]==null){if(Array.isArray(va)||(xo=_unsupportedIterableToArray$9(va))||_o&&va&&typeof va.length=="number"){xo&&(va=xo);var bo=0;return function(){return bo>=va.length?{done:!0}:{done:!1,value:va[bo++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return xo=va[Symbol.iterator](),xo.next.bind(xo)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(va){function _o(xo,bo){storeAnnotation(xo,bo,va)}return Object.assign(_o,va)}function storeAnnotation(va,_o,xo){hasProp(va,storedAnnotationsSymbol)||addHiddenProp(va,storedAnnotationsSymbol,_extends$2({},va[storedAnnotationsSymbol])),isOverride(xo)||(va[storedAnnotationsSymbol][_o]=xo)}function collectStoredAnnotations(va){return hasProp(va,storedAnnotationsSymbol)||addHiddenProp(va,storedAnnotationsSymbol,_extends$2({},va[storedAnnotationsSymbol])),va[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function va(xo){xo===void 0&&(xo="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=xo}var _o=va.prototype;return _o.onBO=function(){this.onBOL&&this.onBOL.forEach(function(bo){return bo()})},_o.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(bo){return bo()})},_o.reportObserved=function(){return reportObserved(this)},_o.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},_o.toString=function(){return this.name_},va}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(va,_o,xo){_o===void 0&&(_o=noop$1),xo===void 0&&(xo=noop$1);var bo=new Atom(va);return _o!==noop$1&&onBecomeObserved(bo,_o),xo!==noop$1&&onBecomeUnobserved(bo,xo),bo}function identityComparer(va,_o){return va===_o}function structuralComparer(va,_o){return deepEqual(va,_o)}function shallowComparer(va,_o){return deepEqual(va,_o,1)}function defaultComparer(va,_o){return Object.is?Object.is(va,_o):va===_o?va!==0||1/va==1/_o:va!==va&&_o!==_o}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(va,_o,xo){return isObservable(va)?va:Array.isArray(va)?observable.array(va,{name:xo}):isPlainObject(va)?observable.object(va,void 0,{name:xo}):isES6Map(va)?observable.map(va,{name:xo}):isES6Set(va)?observable.set(va,{name:xo}):typeof va=="function"&&!isAction(va)&&!isFlow(va)?isGenerator(va)?flow(va):autoAction(xo,va):va}function shallowEnhancer(va,_o,xo){if(va==null||isObservableObject(va)||isObservableArray(va)||isObservableMap(va)||isObservableSet(va))return va;if(Array.isArray(va))return observable.array(va,{name:xo,deep:!1});if(isPlainObject(va))return observable.object(va,void 0,{name:xo,deep:!1});if(isES6Map(va))return observable.map(va,{name:xo,deep:!1});if(isES6Set(va))return observable.set(va,{name:xo,deep:!1})}function referenceEnhancer(va){return va}function refStructEnhancer(va,_o){return deepEqual(va,_o)?_o:va}var OVERRIDE="override",override=createDecoratorAnnotation({annotationType_:OVERRIDE,make_,extend_});function isOverride(va){return va.annotationType_===OVERRIDE}function make_(va,_o){return 0}function extend_(va,_o,xo,bo){die("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function createActionAnnotation(va,_o){return{annotationType_:va,options_:_o,make_:make_$1,extend_:extend_$1}}function make_$1(va,_o,xo,bo){var wo;if((wo=this.options_)==null?void 0:wo.bound)return this.extend_(va,_o,xo,!1)===null?0:1;if(bo===va.target_)return this.extend_(va,_o,xo,!1)===null?0:2;if(isAction(xo.value))return 1;var Eo=createActionDescriptor(va,this,_o,xo,!1);return defineProperty(bo,_o,Eo),2}function extend_$1(va,_o,xo,bo){var wo=createActionDescriptor(va,this,_o,xo);return va.defineProperty_(_o,wo,bo)}function assertActionDescriptor(va,_o,xo,bo){_o.annotationType_,bo.value}function createActionDescriptor(va,_o,xo,bo,wo){var Eo,To,So,$o,Do,No,Oo;wo===void 0&&(wo=globalState.safeDescriptors),assertActionDescriptor(va,_o,xo,bo);var Lo=bo.value;if((Eo=_o.options_)==null?void 0:Eo.bound){var Co;Lo=Lo.bind((Co=va.proxy_)!=null?Co:va.target_)}return{value:createAction((To=(So=_o.options_)==null?void 0:So.name)!=null?To:xo.toString(),Lo,($o=(Do=_o.options_)==null?void 0:Do.autoAction)!=null?$o:!1,((No=_o.options_)==null?void 0:No.bound)?(Oo=va.proxy_)!=null?Oo:va.target_:void 0),configurable:wo?va.isPlainObject_:!0,enumerable:!1,writable:!wo}}function createFlowAnnotation(va,_o){return{annotationType_:va,options_:_o,make_:make_$2,extend_:extend_$2}}function make_$2(va,_o,xo,bo){var wo;if(bo===va.target_)return this.extend_(va,_o,xo,!1)===null?0:2;if(((wo=this.options_)==null?void 0:wo.bound)&&!isFlow(va.target_[_o])&&this.extend_(va,_o,xo,!1)===null)return 0;if(isFlow(xo.value))return 1;var Eo=createFlowDescriptor(va,this,_o,xo,!1,!1);return defineProperty(bo,_o,Eo),2}function extend_$2(va,_o,xo,bo){var wo,Eo=createFlowDescriptor(va,this,_o,xo,(wo=this.options_)==null?void 0:wo.bound);return va.defineProperty_(_o,Eo,bo)}function assertFlowDescriptor(va,_o,xo,bo){_o.annotationType_,bo.value}function createFlowDescriptor(va,_o,xo,bo,wo,Eo){Eo===void 0&&(Eo=globalState.safeDescriptors),assertFlowDescriptor(va,_o,xo,bo);var To=bo.value;if(wo){var So;To=To.bind((So=va.proxy_)!=null?So:va.target_)}return{value:flow(To),configurable:Eo?va.isPlainObject_:!0,enumerable:!1,writable:!Eo}}function createComputedAnnotation(va,_o){return{annotationType_:va,options_:_o,make_:make_$3,extend_:extend_$3}}function make_$3(va,_o,xo){return this.extend_(va,_o,xo,!1)===null?0:1}function extend_$3(va,_o,xo,bo){return assertComputedDescriptor(va,this,_o,xo),va.defineComputedProperty_(_o,_extends$2({},this.options_,{get:xo.get,set:xo.set}),bo)}function assertComputedDescriptor(va,_o,xo,bo){_o.annotationType_,bo.get}function createObservableAnnotation(va,_o){return{annotationType_:va,options_:_o,make_:make_$4,extend_:extend_$4}}function make_$4(va,_o,xo){return this.extend_(va,_o,xo,!1)===null?0:1}function extend_$4(va,_o,xo,bo){var wo,Eo;return assertObservableDescriptor(va,this),va.defineObservableProperty_(_o,xo.value,(wo=(Eo=this.options_)==null?void 0:Eo.enhancer)!=null?wo:deepEnhancer,bo)}function assertObservableDescriptor(va,_o,xo,bo){_o.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(va){return{annotationType_:AUTO,options_:va,make_:make_$5,extend_:extend_$5}}function make_$5(va,_o,xo,bo){var wo,Eo;if(xo.get)return computed.make_(va,_o,xo,bo);if(xo.set){var To=createAction(_o.toString(),xo.set);return bo===va.target_?va.defineProperty_(_o,{configurable:globalState.safeDescriptors?va.isPlainObject_:!0,set:To})===null?0:2:(defineProperty(bo,_o,{configurable:!0,set:To}),2)}if(bo!==va.target_&&typeof xo.value=="function"){var So;if(isGenerator(xo.value)){var $o,Do=(($o=this.options_)==null?void 0:$o.autoBind)?flow.bound:flow;return Do.make_(va,_o,xo,bo)}var No=((So=this.options_)==null?void 0:So.autoBind)?autoAction.bound:autoAction;return No.make_(va,_o,xo,bo)}var Oo=((wo=this.options_)==null?void 0:wo.deep)===!1?observable.ref:observable;if(typeof xo.value=="function"&&((Eo=this.options_)==null?void 0:Eo.autoBind)){var Lo;xo.value=xo.value.bind((Lo=va.proxy_)!=null?Lo:va.target_)}return Oo.make_(va,_o,xo,bo)}function extend_$5(va,_o,xo,bo){var wo,Eo;if(xo.get)return computed.extend_(va,_o,xo,bo);if(xo.set)return va.defineProperty_(_o,{configurable:globalState.safeDescriptors?va.isPlainObject_:!0,set:createAction(_o.toString(),xo.set)},bo);if(typeof xo.value=="function"&&((wo=this.options_)==null?void 0:wo.autoBind)){var To;xo.value=xo.value.bind((To=va.proxy_)!=null?To:va.target_)}var So=((Eo=this.options_)==null?void 0:Eo.deep)===!1?observable.ref:observable;return So.extend_(va,_o,xo,bo)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(va){return va||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(va){return va.deep===!0?deepEnhancer:va.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(va.defaultDecorator)}function getAnnotationFromOptions(va){var _o;return va?(_o=va.defaultDecorator)!=null?_o:createAutoAnnotation(va):void 0}function getEnhancerFromAnnotation(va){var _o,xo;return va&&(_o=(xo=va.options_)==null?void 0:xo.enhancer)!=null?_o:deepEnhancer}function createObservable(va,_o,xo){if(isStringish(_o)){storeAnnotation(va,_o,observableAnnotation);return}return isObservable(va)?va:isPlainObject(va)?observable.object(va,_o,xo):Array.isArray(va)?observable.array(va,_o):isES6Map(va)?observable.map(va,_o):isES6Set(va)?observable.set(va,_o):typeof va=="object"&&va!==null?va:observable.box(va,_o)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function va(_o,xo){var bo=asCreateObservableOptions(xo);return new ObservableValue(_o,getEnhancerFromOptions(bo),bo.name,!0,bo.equals)},array:function va(_o,xo){var bo=asCreateObservableOptions(xo);return(globalState.useProxies===!1||bo.proxy===!1?createLegacyArray:createObservableArray)(_o,getEnhancerFromOptions(bo),bo.name)},map:function va(_o,xo){var bo=asCreateObservableOptions(xo);return new ObservableMap(_o,getEnhancerFromOptions(bo),bo.name)},set:function va(_o,xo){var bo=asCreateObservableOptions(xo);return new ObservableSet(_o,getEnhancerFromOptions(bo),bo.name)},object:function va(_o,xo,bo){return extendObservable(globalState.useProxies===!1||(bo==null?void 0:bo.proxy)===!1?asObservableObject({},bo):asDynamicObservableObject({},bo),_o,xo)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function va(_o,xo){if(isStringish(xo))return storeAnnotation(_o,xo,computedAnnotation);if(isPlainObject(_o))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,_o));var bo=isPlainObject(xo)?xo:{};return bo.get=_o,bo.name||(bo.name=_o.name||""),new ComputedValue(bo)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(va,_o,xo,bo){xo===void 0&&(xo=!1);function wo(){return executeAction(va,xo,_o,bo||this,arguments)}return wo.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=va,Object.defineProperty(wo,"name",tmpNameDescriptor)),wo}function executeAction(va,_o,xo,bo,wo){var Eo=_startAction(va,_o);try{return xo.apply(bo,wo)}catch(To){throw Eo.error_=To,To}finally{_endAction(Eo)}}function _startAction(va,_o,xo,bo){var wo=!1,Eo=0,To=globalState.trackingDerivation,So=!_o||!To;startBatch();var $o=globalState.allowStateChanges;So&&(untrackedStart(),$o=allowStateChangesStart(!0));var Do=allowStateReadsStart(!0),No={runAsAction_:So,prevDerivation_:To,prevAllowStateChanges_:$o,prevAllowStateReads_:Do,notifySpy_:wo,startTime_:Eo,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=No.actionId_,No}function _endAction(va){currentActionId!==va.actionId_&&die(30),currentActionId=va.parentActionId_,va.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(va.prevAllowStateChanges_),allowStateReadsEnd(va.prevAllowStateReads_),endBatch(),va.runAsAction_&&untrackedEnd(va.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(va,_o){var xo=allowStateChangesStart(va);try{return _o()}finally{allowStateChangesEnd(xo)}}function allowStateChangesStart(va){var _o=globalState.allowStateChanges;return globalState.allowStateChanges=va,_o}function allowStateChangesEnd(va){globalState.allowStateChanges=va}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(va){_inheritsLoose$1(_o,va);function _o(bo,wo,Eo,To,So){var $o;return Eo===void 0&&(Eo="ObservableValue"),So===void 0&&(So=comparer.default),$o=va.call(this,Eo)||this,$o.enhancer=void 0,$o.name_=void 0,$o.equals=void 0,$o.hasUnreportedChange_=!1,$o.interceptors_=void 0,$o.changeListeners_=void 0,$o.value_=void 0,$o.dehancer=void 0,$o.enhancer=wo,$o.name_=Eo,$o.equals=So,$o.value_=wo(bo,void 0,Eo),$o}var xo=_o.prototype;return xo.dehanceValue=function(wo){return this.dehancer!==void 0?this.dehancer(wo):wo},xo.set=function(wo){this.value_,wo=this.prepareNewValue_(wo),wo!==globalState.UNCHANGED&&this.setNewValue_(wo)},xo.prepareNewValue_=function(wo){if(hasInterceptors(this)){var Eo=interceptChange(this,{object:this,type:UPDATE,newValue:wo});if(!Eo)return globalState.UNCHANGED;wo=Eo.newValue}return wo=this.enhancer(wo,this.value_,this.name_),this.equals(this.value_,wo)?globalState.UNCHANGED:wo},xo.setNewValue_=function(wo){var Eo=this.value_;this.value_=wo,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:wo,oldValue:Eo})},xo.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},xo.intercept_=function(wo){return registerInterceptor(this,wo)},xo.observe_=function(wo,Eo){return Eo&&wo({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,wo)},xo.raw=function(){return this.value_},xo.toJSON=function(){return this.get()},xo.toString=function(){return this.name_+"["+this.value_+"]"},xo.valueOf=function(){return toPrimitive(this.get())},xo[_Symbol$toPrimitive]=function(){return this.valueOf()},_o}(Atom),isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function va(xo){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,xo.get||die(31),this.derivation=xo.get,this.name_=xo.name||"ComputedValue",xo.set&&(this.setter_=createAction("ComputedValue-setter",xo.set)),this.equals_=xo.equals||(xo.compareStructural||xo.struct?comparer.structural:comparer.default),this.scope_=xo.context,this.requiresReaction_=!!xo.requiresReaction,this.keepAlive_=!!xo.keepAlive}var _o=va.prototype;return _o.onBecomeStale_=function(){propagateMaybeChanged(this)},_o.onBO=function(){this.onBOL&&this.onBOL.forEach(function(bo){return bo()})},_o.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(bo){return bo()})},_o.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var bo=globalState.trackingContext;this.keepAlive_&&!bo&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=bo}var wo=this.value_;if(isCaughtException(wo))throw wo.cause;return wo},_o.set=function(bo){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,bo)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},_o.trackAndCompute=function(){var bo=this.value_,wo=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Eo=this.computeValue_(!0),To=wo||isCaughtException(bo)||isCaughtException(Eo)||!this.equals_(bo,Eo);return To&&(this.value_=Eo),To},_o.computeValue_=function(bo){this.isComputing_=!0;var wo=allowStateChangesStart(!1),Eo;if(bo)Eo=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Eo=this.derivation.call(this.scope_);else try{Eo=this.derivation.call(this.scope_)}catch(To){Eo=new CaughtException(To)}return allowStateChangesEnd(wo),this.isComputing_=!1,Eo},_o.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},_o.observe_=function(bo,wo){var Eo=this,To=!0,So=void 0;return autorun(function(){var $o=Eo.get();if(!To||wo){var Do=untrackedStart();bo({observableKind:"computed",debugObjectName:Eo.name_,type:UPDATE,object:Eo,newValue:$o,oldValue:So}),untrackedEnd(Do)}To=!1,So=$o})},_o.warnAboutUntrackedRead_=function(){},_o.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},_o.valueOf=function(){return toPrimitive(this.get())},_o[_Symbol$toPrimitive$1]=function(){return this.valueOf()},va}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(va){va[va.NOT_TRACKING_=-1]="NOT_TRACKING_",va[va.UP_TO_DATE_=0]="UP_TO_DATE_",va[va.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",va[va.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(va){va[va.NONE=0]="NONE",va[va.LOG=1]="LOG",va[va.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function va(_o){this.cause=void 0,this.cause=_o};function isCaughtException(va){return va instanceof CaughtException}function shouldCompute(va){switch(va.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var _o=allowStateReadsStart(!0),xo=untrackedStart(),bo=va.observing_,wo=bo.length,Eo=0;Eo<wo;Eo++){var To=bo[Eo];if(isComputedValue(To)){if(globalState.disableErrorBoundaries)To.get();else try{To.get()}catch{return untrackedEnd(xo),allowStateReadsEnd(_o),!0}if(va.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(xo),allowStateReadsEnd(_o),!0}}return changeDependenciesStateTo0(va),untrackedEnd(xo),allowStateReadsEnd(_o),!1}}}function isComputingDerivation(){return globalState.trackingDerivation!==null}function checkIfStateModificationsAreAllowed(va){}function trackDerivedFunction(va,_o,xo){var bo=allowStateReadsStart(!0);changeDependenciesStateTo0(va),va.newObserving_=new Array(va.observing_.length+100),va.unboundDepsCount_=0,va.runId_=++globalState.runId;var wo=globalState.trackingDerivation;globalState.trackingDerivation=va,globalState.inBatch++;var Eo;if(globalState.disableErrorBoundaries===!0)Eo=_o.call(xo);else try{Eo=_o.call(xo)}catch(To){Eo=new CaughtException(To)}return globalState.inBatch--,globalState.trackingDerivation=wo,bindDependencies(va),allowStateReadsEnd(bo),Eo}function bindDependencies(va){for(var _o=va.observing_,xo=va.observing_=va.newObserving_,bo=IDerivationState_.UP_TO_DATE_,wo=0,Eo=va.unboundDepsCount_,To=0;To<Eo;To++){var So=xo[To];So.diffValue_===0&&(So.diffValue_=1,wo!==To&&(xo[wo]=So),wo++),So.dependenciesState_>bo&&(bo=So.dependenciesState_)}for(xo.length=wo,va.newObserving_=null,Eo=_o.length;Eo--;){var $o=_o[Eo];$o.diffValue_===0&&removeObserver($o,va),$o.diffValue_=0}for(;wo--;){var Do=xo[wo];Do.diffValue_===1&&(Do.diffValue_=0,addObserver(Do,va))}bo!==IDerivationState_.UP_TO_DATE_&&(va.dependenciesState_=bo,va.onBecomeStale_())}function clearObserving(va){var _o=va.observing_;va.observing_=[];for(var xo=_o.length;xo--;)removeObserver(_o[xo],va);va.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(va){var _o=untrackedStart();try{return va()}finally{untrackedEnd(_o)}}function untrackedStart(){var va=globalState.trackingDerivation;return globalState.trackingDerivation=null,va}function untrackedEnd(va){globalState.trackingDerivation=va}function allowStateReadsStart(va){var _o=globalState.allowStateReads;return globalState.allowStateReads=va,_o}function allowStateReadsEnd(va){globalState.allowStateReads=va}function changeDependenciesStateTo0(va){if(va.dependenciesState_!==IDerivationState_.UP_TO_DATE_){va.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var _o=va.observing_,xo=_o.length;xo--;)_o[xo].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var persistentKeys=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],MobXGlobals=function va(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var va=getGlobal();return va.__mobxInstanceCount>0&&!va.__mobxGlobals&&(canMergeGlobalState=!1),va.__mobxGlobals&&va.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?va.__mobxGlobals?(va.__mobxInstanceCount+=1,va.__mobxGlobals.UNCHANGED||(va.__mobxGlobals.UNCHANGED={}),va.__mobxGlobals):(va.__mobxInstanceCount=1,va.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var va=getGlobal();--va.__mobxInstanceCount==0&&(va.__mobxGlobals=void 0),globalState=new MobXGlobals}}function getGlobalState(){return globalState}function resetGlobalState(){var va=new MobXGlobals;for(var _o in va)persistentKeys.indexOf(_o)===-1&&(globalState[_o]=va[_o]);globalState.allowStateChanges=!globalState.enforceActions}function hasObservers(va){return va.observers_&&va.observers_.size>0}function getObservers(va){return va.observers_}function addObserver(va,_o){va.observers_.add(_o),va.lowestObserverState_>_o.dependenciesState_&&(va.lowestObserverState_=_o.dependenciesState_)}function removeObserver(va,_o){va.observers_.delete(_o),va.observers_.size===0&&queueForUnobservation(va)}function queueForUnobservation(va){va.isPendingUnobservation_===!1&&(va.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(va))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch==0){runReactions();for(var va=globalState.pendingUnobservations,_o=0;_o<va.length;_o++){var xo=va[_o];xo.isPendingUnobservation_=!1,xo.observers_.size===0&&(xo.isBeingObserved_&&(xo.isBeingObserved_=!1,xo.onBUO()),xo instanceof ComputedValue&&xo.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(va){var _o=globalState.trackingDerivation;return _o!==null?(_o.runId_!==va.lastAccessedBy_&&(va.lastAccessedBy_=_o.runId_,_o.newObserving_[_o.unboundDepsCount_++]=va,!va.isBeingObserved_&&globalState.trackingContext&&(va.isBeingObserved_=!0,va.onBO())),!0):(va.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(va),!1)}function propagateChanged(va){va.lowestObserverState_!==IDerivationState_.STALE_&&(va.lowestObserverState_=IDerivationState_.STALE_,va.observers_.forEach(function(_o){_o.dependenciesState_===IDerivationState_.UP_TO_DATE_&&_o.onBecomeStale_(),_o.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(va){va.lowestObserverState_!==IDerivationState_.STALE_&&(va.lowestObserverState_=IDerivationState_.STALE_,va.observers_.forEach(function(_o){_o.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?_o.dependenciesState_=IDerivationState_.STALE_:_o.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(va.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(va){va.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(va.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,va.observers_.forEach(function(_o){_o.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_o.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,_o.onBecomeStale_())}))}var Reaction=function(){function va(xo,bo,wo,Eo){xo===void 0&&(xo="Reaction"),Eo===void 0&&(Eo=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=xo,this.onInvalidate_=bo,this.errorHandler_=wo,this.requiresObservable_=Eo}var _o=va.prototype;return _o.onBecomeStale_=function(){this.schedule_()},_o.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},_o.isScheduled=function(){return this.isScheduled_},_o.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var bo=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(wo){this.reportExceptionInDerivation_(wo)}}globalState.trackingContext=bo,endBatch()}},_o.track=function(bo){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var wo=globalState.trackingContext;globalState.trackingContext=this;var Eo=trackDerivedFunction(this,bo,void 0);globalState.trackingContext=wo,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Eo)&&this.reportExceptionInDerivation_(Eo.cause),endBatch()}},_o.reportExceptionInDerivation_=function(bo){var wo=this;if(this.errorHandler_){this.errorHandler_(bo,this);return}if(globalState.disableErrorBoundaries)throw bo;var Eo="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Eo,bo),globalState.globalReactionErrorHandlers.forEach(function(To){return To(bo,wo)})},_o.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},_o.getDisposer_=function(){var bo=this.dispose.bind(this);return bo[$mobx]=this,bo},_o.toString=function(){return"Reaction["+this.name_+"]"},_o.trace=function(bo){bo===void 0&&(bo=!1),trace(this,bo)},va}();function onReactionError(va){return globalState.globalReactionErrorHandlers.push(va),function(){var _o=globalState.globalReactionErrorHandlers.indexOf(va);_o>=0&&globalState.globalReactionErrorHandlers.splice(_o,1)}}var MAX_REACTION_ITERATIONS=100,reactionScheduler=function va(_o){return _o()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var va=globalState.pendingReactions,_o=0;va.length>0;){++_o===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+va[0]),va.splice(0));for(var xo=va.splice(0),bo=0,wo=xo.length;bo<wo;bo++)xo[bo].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(va){var _o=reactionScheduler;reactionScheduler=function(bo){return va(function(){return _o(bo)})}}function isSpyEnabled(){return!1}function spyReport(va){}function spyReportStart(va){}function spyReportEnd(va){}function spy(va){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(va){var _o=function(bo,wo){if(isFunction(bo))return createAction(bo.name||DEFAULT_ACTION_NAME,bo,va);if(isFunction(wo))return createAction(bo,wo,va);if(isStringish(wo))return storeAnnotation(bo,wo,va?autoActionAnnotation:actionAnnotation);if(isStringish(bo))return createDecoratorAnnotation(createActionAnnotation(va?AUTOACTION:ACTION,{name:bo,autoAction:va}))};return _o}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(va){return executeAction(va.name||DEFAULT_ACTION_NAME,!1,va,this,void 0)}function isAction(va){return isFunction(va)&&va.isMobxAction===!0}function autorun(va,_o){var xo,bo;_o===void 0&&(_o=EMPTY_OBJECT);var wo=(xo=(bo=_o)==null?void 0:bo.name)!=null?xo:"Autorun",Eo=!_o.scheduler&&!_o.delay,To;if(Eo)To=new Reaction(wo,function(){this.track(Do)},_o.onError,_o.requiresObservable);else{var So=createSchedulerFromOptions(_o),$o=!1;To=new Reaction(wo,function(){$o||($o=!0,So(function(){$o=!1,To.isDisposed_||To.track(Do)}))},_o.onError,_o.requiresObservable)}function Do(){va(To)}return To.schedule_(),To.getDisposer_()}var run=function va(_o){return _o()};function createSchedulerFromOptions(va){return va.scheduler?va.scheduler:va.delay?function(_o){return setTimeout(_o,va.delay)}:run}function reaction(va,_o,xo){var bo;xo===void 0&&(xo=EMPTY_OBJECT);var wo=(bo=xo.name)!=null?bo:"Reaction",Eo=action(wo,xo.onError?wrapErrorHandler(xo.onError,_o):_o),To=!xo.scheduler&&!xo.delay,So=createSchedulerFromOptions(xo),$o=!0,Do=!1,No,Oo,Lo=xo.compareStructural?comparer.structural:xo.equals||comparer.default,Co=new Reaction(wo,function(){$o||To?Ro():Do||(Do=!0,So(Ro))},xo.onError,xo.requiresObservable);function Ro(){if(Do=!1,!Co.isDisposed_){var jo=!1;Co.track(function(){var zo=allowStateChanges(!1,function(){return va(Co)});jo=$o||!Lo(No,zo),Oo=No,No=zo}),($o&&xo.fireImmediately||!$o&&jo)&&Eo(No,Oo,Co),$o=!1}}return Co.schedule_(),Co.getDisposer_()}function wrapErrorHandler(va,_o){return function(){try{return _o.apply(this,arguments)}catch(xo){va.call(this,xo)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(va,_o,xo){return interceptHook(ON_BECOME_OBSERVED,va,_o,xo)}function onBecomeUnobserved(va,_o,xo){return interceptHook(ON_BECOME_UNOBSERVED,va,_o,xo)}function interceptHook(va,_o,xo,bo){var wo=typeof bo=="function"?getAtom(_o,xo):getAtom(_o),Eo=isFunction(bo)?bo:xo,To=va+"L";return wo[To]?wo[To].add(Eo):wo[To]=new Set([Eo]),function(){var So=wo[To];So&&(So.delete(Eo),So.size===0&&delete wo[To])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(va){va.isolateGlobalState===!0&&isolateGlobalState();var _o=va.useProxies,xo=va.enforceActions;if(_o!==void 0&&(globalState.useProxies=_o===ALWAYS?!0:_o===NEVER?!1:typeof Proxy!="undefined"),_o==="ifavailable"&&(globalState.verifyProxies=!0),xo!==void 0){var bo=xo===ALWAYS?ALWAYS:xo===OBSERVED;globalState.enforceActions=bo,globalState.allowStateChanges=!(bo===!0||bo===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(wo){wo in va&&(globalState[wo]=!!va[wo])}),globalState.allowStateReads=!globalState.observableRequiresReaction,va.reactionScheduler&&setReactionScheduler(va.reactionScheduler)}function extendObservable(va,_o,xo,bo){var wo=getOwnPropertyDescriptors(_o),Eo=asObservableObject(va,bo)[$mobx];startBatch();try{ownKeys(wo).forEach(function(To){Eo.extend_(To,wo[To],xo&&To in xo?xo[To]:!0)})}finally{endBatch()}return va}function getDependencyTree(va,_o){return nodeToDependencyTree(getAtom(va,_o))}function nodeToDependencyTree(va){var _o={name:va.name_};return va.observing_&&va.observing_.length>0&&(_o.dependencies=unique(va.observing_).map(nodeToDependencyTree)),_o}function getObserverTree(va,_o){return nodeToObserverTree(getAtom(va,_o))}function nodeToObserverTree(va){var _o={name:va.name_};return hasObservers(va)&&(_o.observers=Array.from(getObservers(va)).map(nodeToObserverTree)),_o}function unique(va){return Array.from(new Set(va))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);function isFlowCancellationError(va){return va instanceof FlowCancellationError}var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function va(_o,xo){if(isStringish(xo))return storeAnnotation(_o,xo,flowAnnotation);var bo=_o,wo=bo.name||"<unnamed flow>",Eo=function(){var So=this,$o=arguments,Do=++generatorId,No=action(wo+" - runid: "+Do+" - init",bo).apply(So,$o),Oo,Lo=void 0,Co=new Promise(function(Ro,jo){var zo=0;Oo=jo;function Io(ko){Lo=void 0;var Uo;try{Uo=action(wo+" - runid: "+Do+" - yield "+zo++,No.next).call(No,ko)}catch(Qo){return jo(Qo)}Bo(Uo)}function Po(ko){Lo=void 0;var Uo;try{Uo=action(wo+" - runid: "+Do+" - yield "+zo++,No.throw).call(No,ko)}catch(Qo){return jo(Qo)}Bo(Uo)}function Bo(ko){if(isFunction(ko==null?void 0:ko.then)){ko.then(Bo,jo);return}return ko.done?Ro(ko.value):(Lo=Promise.resolve(ko.value),Lo.then(Io,Po))}Io(void 0)});return Co.cancel=action(wo+" - runid: "+Do+" - cancel",function(){try{Lo&&cancelPromise(Lo);var Ro=No.return(void 0),jo=Promise.resolve(Ro.value);jo.then(noop$1,noop$1),cancelPromise(jo),Oo(new FlowCancellationError)}catch(zo){Oo(zo)}}),Co};return Eo.isMobXFlow=!0,Eo},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(va){isFunction(va.cancel)&&va.cancel()}function flowResult(va){return va}function isFlow(va){return(va==null?void 0:va.isMobXFlow)===!0}function interceptReads(va,_o,xo){var bo;return isObservableMap(va)||isObservableArray(va)||isObservableValue(va)?bo=getAdministration(va):isObservableObject(va)&&(bo=getAdministration(va,_o)),bo.dehancer=typeof _o=="function"?_o:xo,function(){bo.dehancer=void 0}}function intercept(va,_o,xo){return isFunction(xo)?interceptProperty(va,_o,xo):interceptInterceptable(va,_o)}function interceptInterceptable(va,_o){return getAdministration(va).intercept_(_o)}function interceptProperty(va,_o,xo){return getAdministration(va,_o).intercept_(xo)}function _isComputed(va,_o){if(_o===void 0)return isComputedValue(va);if(isObservableObject(va)===!1||!va[$mobx].values_.has(_o))return!1;var xo=getAtom(va,_o);return isComputedValue(xo)}function isComputed(va){return _isComputed(va)}function isComputedProp(va,_o){return _isComputed(va,_o)}function _isObservable(va,_o){return va?_o!==void 0?isObservableObject(va)?va[$mobx].values_.has(_o):!1:isObservableObject(va)||!!va[$mobx]||isAtom(va)||isReaction(va)||isComputedValue(va):!1}function isObservable(va){return _isObservable(va)}function isObservableProp(va,_o){return _isObservable(va,_o)}function keys(va){if(isObservableObject(va))return va[$mobx].keys_();if(isObservableMap(va)||isObservableSet(va))return Array.from(va.keys());if(isObservableArray(va))return va.map(function(_o,xo){return xo});die(5)}function values$1(va){if(isObservableObject(va))return keys(va).map(function(_o){return va[_o]});if(isObservableMap(va))return keys(va).map(function(_o){return va.get(_o)});if(isObservableSet(va))return Array.from(va.values());if(isObservableArray(va))return va.slice();die(6)}function entries(va){if(isObservableObject(va))return keys(va).map(function(_o){return[_o,va[_o]]});if(isObservableMap(va))return keys(va).map(function(_o){return[_o,va.get(_o)]});if(isObservableSet(va))return Array.from(va.entries());if(isObservableArray(va))return va.map(function(_o,xo){return[xo,_o]});die(7)}function set(va,_o,xo){if(arguments.length===2&&!isObservableSet(va)){startBatch();var bo=_o;try{for(var wo in bo)set(va,wo,bo[wo])}finally{endBatch()}return}isObservableObject(va)?va[$mobx].set_(_o,xo):isObservableMap(va)?va.set(_o,xo):isObservableSet(va)?va.add(_o):isObservableArray(va)?(typeof _o!="number"&&(_o=parseInt(_o,10)),_o<0&&die("Invalid index: '"+_o+"'"),startBatch(),_o>=va.length&&(va.length=_o+1),va[_o]=xo,endBatch()):die(8)}function remove$1(va,_o){isObservableObject(va)?va[$mobx].delete_(_o):isObservableMap(va)||isObservableSet(va)?va.delete(_o):isObservableArray(va)?(typeof _o!="number"&&(_o=parseInt(_o,10)),va.splice(_o,1)):die(9)}function has(va,_o){if(isObservableObject(va))return va[$mobx].has_(_o);if(isObservableMap(va))return va.has(_o);if(isObservableSet(va))return va.has(_o);if(isObservableArray(va))return _o>=0&&_o<va.length;die(10)}function get(va,_o){if(!!has(va,_o)){if(isObservableObject(va))return va[$mobx].get_(_o);if(isObservableMap(va))return va.get(_o);if(isObservableArray(va))return va[_o];die(11)}}function apiDefineProperty(va,_o,xo){if(isObservableObject(va))return va[$mobx].defineProperty_(_o,xo);die(39)}function apiOwnKeys(va){if(isObservableObject(va))return va[$mobx].ownKeys_();die(38)}function observe(va,_o,xo,bo){return isFunction(xo)?observeObservableProperty(va,_o,xo,bo):observeObservable(va,_o,xo)}function observeObservable(va,_o,xo){return getAdministration(va).observe_(_o,xo)}function observeObservableProperty(va,_o,xo,bo){return getAdministration(va,_o).observe_(xo,bo)}function cache(va,_o,xo){return va.set(_o,xo),xo}function toJSHelper(va,_o){if(va==null||typeof va!="object"||va instanceof Date||!isObservable(va))return va;if(isObservableValue(va)||isComputedValue(va))return toJSHelper(va.get(),_o);if(_o.has(va))return _o.get(va);if(isObservableArray(va)){var xo=cache(_o,va,new Array(va.length));return va.forEach(function(To,So){xo[So]=toJSHelper(To,_o)}),xo}if(isObservableSet(va)){var bo=cache(_o,va,new Set);return va.forEach(function(To){bo.add(toJSHelper(To,_o))}),bo}if(isObservableMap(va)){var wo=cache(_o,va,new Map);return va.forEach(function(To,So){wo.set(So,toJSHelper(To,_o))}),wo}else{var Eo=cache(_o,va,{});return apiOwnKeys(va).forEach(function(To){objectPrototype.propertyIsEnumerable.call(va,To)&&(Eo[To]=toJSHelper(va[To],_o))}),Eo}}function toJS(va,_o){return toJSHelper(va,new Map)}function trace(){die("trace() is not available in production builds");for(var va=!1,_o=arguments.length,xo=new Array(_o),bo=0;bo<_o;bo++)xo[bo]=arguments[bo];typeof xo[xo.length-1]=="boolean"&&(va=xo.pop());var wo=getAtomFromArgs(xo);if(!wo)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");wo.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+wo.name_+"' tracing enabled"),wo.isTracing_=va?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(va){switch(va.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(va[0]);case 2:return getAtom(va[0],va[1])}}function transaction(va,_o){_o===void 0&&(_o=void 0),startBatch();try{return va.apply(_o)}finally{endBatch()}}function when(va,_o,xo){return arguments.length===1||_o&&typeof _o=="object"?whenPromise(va,_o):_when(va,_o,xo||{})}function _when(va,_o,xo){var bo;if(typeof xo.timeout=="number"){var wo=new Error("WHEN_TIMEOUT");bo=setTimeout(function(){if(!To[$mobx].isDisposed_)if(To(),xo.onError)xo.onError(wo);else throw wo},xo.timeout)}xo.name="When";var Eo=createAction("When-effect",_o),To=autorun(function(So){var $o=allowStateChanges(!1,va);$o&&(So.dispose(),bo&&clearTimeout(bo),Eo())},xo);return To}function whenPromise(va,_o){var xo,bo=new Promise(function(wo,Eo){var To=_when(va,wo,_extends$2({},_o,{onError:Eo}));xo=function(){To(),Eo(new Error("WHEN_CANCELLED"))}});return bo.cancel=xo,bo}function getAdm(va){return va[$mobx]}var objectProxyTraps={has:function va(_o,xo){return getAdm(_o).has_(xo)},get:function va(_o,xo){return getAdm(_o).get_(xo)},set:function va(_o,xo,bo){var wo;return isStringish(xo)?(wo=getAdm(_o).set_(xo,bo,!0))!=null?wo:!0:!1},deleteProperty:function va(_o,xo){var bo;return isStringish(xo)?(bo=getAdm(_o).delete_(xo,!0))!=null?bo:!0:!1},defineProperty:function va(_o,xo,bo){var wo;return(wo=getAdm(_o).defineProperty_(xo,bo))!=null?wo:!0},ownKeys:function va(_o){return getAdm(_o).ownKeys_()},preventExtensions:function va(_o){die(13)}};function asDynamicObservableObject(va,_o){var xo,bo;return assertProxies(),va=asObservableObject(va,_o),(bo=(xo=va[$mobx]).proxy_)!=null?bo:xo.proxy_=new Proxy(va,objectProxyTraps)}function hasInterceptors(va){return va.interceptors_!==void 0&&va.interceptors_.length>0}function registerInterceptor(va,_o){var xo=va.interceptors_||(va.interceptors_=[]);return xo.push(_o),once(function(){var bo=xo.indexOf(_o);bo!==-1&&xo.splice(bo,1)})}function interceptChange(va,_o){var xo=untrackedStart();try{for(var bo=[].concat(va.interceptors_||[]),wo=0,Eo=bo.length;wo<Eo&&(_o=bo[wo](_o),_o&&!_o.type&&die(14),!!_o);wo++);return _o}finally{untrackedEnd(xo)}}function hasListeners(va){return va.changeListeners_!==void 0&&va.changeListeners_.length>0}function registerListener(va,_o){var xo=va.changeListeners_||(va.changeListeners_=[]);return xo.push(_o),once(function(){var bo=xo.indexOf(_o);bo!==-1&&xo.splice(bo,1)})}function notifyListeners(va,_o){var xo=untrackedStart(),bo=va.changeListeners_;if(!!bo){bo=bo.slice();for(var wo=0,Eo=bo.length;wo<Eo;wo++)bo[wo](_o);untrackedEnd(xo)}}function makeObservable(va,_o,xo){var bo=asObservableObject(va,xo)[$mobx];startBatch();try{var wo;(wo=_o)!=null||(_o=collectStoredAnnotations(va)),ownKeys(_o).forEach(function(Eo){return bo.make_(Eo,_o[Eo])})}finally{endBatch()}return va}var keysSymbol=Symbol("mobx-keys");function makeAutoObservable(va,_o,xo){if(isPlainObject(va))return extendObservable(va,va,_o,xo);var bo=asObservableObject(va,xo)[$mobx];if(!va[keysSymbol]){var wo=Object.getPrototypeOf(va),Eo=new Set([].concat(ownKeys(va),ownKeys(wo)));Eo.delete("constructor"),Eo.delete($mobx),addHiddenProp(wo,keysSymbol,Eo)}startBatch();try{va[keysSymbol].forEach(function(To){return bo.make_(To,_o&&To in _o?_o[To]:!0)})}finally{endBatch()}return va}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function va(_o,xo){var bo=_o[$mobx];return xo===$mobx?bo:xo==="length"?bo.getArrayLength_():typeof xo=="string"&&!isNaN(xo)?bo.get_(parseInt(xo)):hasProp(arrayExtensions,xo)?arrayExtensions[xo]:_o[xo]},set:function va(_o,xo,bo){var wo=_o[$mobx];return xo==="length"&&wo.setArrayLength_(bo),typeof xo=="symbol"||isNaN(xo)?_o[xo]=bo:wo.set_(parseInt(xo),bo),!0},preventExtensions:function va(){die(15)}},ObservableArrayAdministration=function(){function va(xo,bo,wo,Eo){xo===void 0&&(xo="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=wo,this.legacyMode_=Eo,this.atom_=new Atom(xo),this.enhancer_=function(To,So){return bo(To,So,"ObservableArray[..]")}}var _o=va.prototype;return _o.dehanceValue_=function(bo){return this.dehancer!==void 0?this.dehancer(bo):bo},_o.dehanceValues_=function(bo){return this.dehancer!==void 0&&bo.length>0?bo.map(this.dehancer):bo},_o.intercept_=function(bo){return registerInterceptor(this,bo)},_o.observe_=function(bo,wo){return wo===void 0&&(wo=!1),wo&&bo({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,bo)},_o.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},_o.setArrayLength_=function(bo){(typeof bo!="number"||isNaN(bo)||bo<0)&&die("Out of range: "+bo);var wo=this.values_.length;if(bo!==wo)if(bo>wo){for(var Eo=new Array(bo-wo),To=0;To<bo-wo;To++)Eo[To]=void 0;this.spliceWithArray_(wo,0,Eo)}else this.spliceWithArray_(bo,wo-bo)},_o.updateArrayLength_=function(bo,wo){bo!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=wo,this.legacyMode_&&wo>0&&reserveArrayBuffer(bo+wo+1)},_o.spliceWithArray_=function(bo,wo,Eo){var To=this;checkIfStateModificationsAreAllowed(this.atom_);var So=this.values_.length;if(bo===void 0?bo=0:bo>So?bo=So:bo<0&&(bo=Math.max(0,So+bo)),arguments.length===1?wo=So-bo:wo==null?wo=0:wo=Math.max(0,Math.min(wo,So-bo)),Eo===void 0&&(Eo=EMPTY_ARRAY),hasInterceptors(this)){var $o=interceptChange(this,{object:this.proxy_,type:SPLICE,index:bo,removedCount:wo,added:Eo});if(!$o)return EMPTY_ARRAY;wo=$o.removedCount,Eo=$o.added}if(Eo=Eo.length===0?Eo:Eo.map(function(Oo){return To.enhancer_(Oo,void 0)}),this.legacyMode_){var Do=Eo.length-wo;this.updateArrayLength_(So,Do)}var No=this.spliceItemsIntoValues_(bo,wo,Eo);return(wo!==0||Eo.length!==0)&&this.notifyArraySplice_(bo,Eo,No),this.dehanceValues_(No)},_o.spliceItemsIntoValues_=function(bo,wo,Eo){if(Eo.length<MAX_SPLICE_SIZE){var To;return(To=this.values_).splice.apply(To,[bo,wo].concat(Eo))}else{var So=this.values_.slice(bo,bo+wo),$o=this.values_.slice(bo+wo);this.values_.length+=Eo.length-wo;for(var Do=0;Do<Eo.length;Do++)this.values_[bo+Do]=Eo[Do];for(var No=0;No<$o.length;No++)this.values_[bo+Eo.length+No]=$o[No];return So}},_o.notifyArrayChildUpdate_=function(bo,wo,Eo){var To=!this.owned_&&isSpyEnabled(),So=hasListeners(this),$o=So||To?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:bo,newValue:wo,oldValue:Eo}:null;this.atom_.reportChanged(),So&&notifyListeners(this,$o)},_o.notifyArraySplice_=function(bo,wo,Eo){var To=!this.owned_&&isSpyEnabled(),So=hasListeners(this),$o=So||To?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:bo,removed:Eo,added:wo,removedCount:Eo.length,addedCount:wo.length}:null;this.atom_.reportChanged(),So&&notifyListeners(this,$o)},_o.get_=function(bo){if(bo<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[bo]);console.warn("[mobx.array] Attempt to read an array index ("+bo+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},_o.set_=function(bo,wo){var Eo=this.values_;if(bo<Eo.length){checkIfStateModificationsAreAllowed(this.atom_);var To=Eo[bo];if(hasInterceptors(this)){var So=interceptChange(this,{type:UPDATE,object:this.proxy_,index:bo,newValue:wo});if(!So)return;wo=So.newValue}wo=this.enhancer_(wo,To);var $o=wo!==To;$o&&(Eo[bo]=wo,this.notifyArrayChildUpdate_(bo,wo,To))}else bo===Eo.length?this.spliceWithArray_(bo,0,[wo]):die(17,bo,Eo.length)},va}();function createObservableArray(va,_o,xo,bo){xo===void 0&&(xo="ObservableArray"),bo===void 0&&(bo=!1),assertProxies();var wo=new ObservableArrayAdministration(xo,_o,bo,!1);addHiddenFinalProp(wo.values_,$mobx,wo);var Eo=new Proxy(wo.values_,arrayTraps);if(wo.proxy_=Eo,va&&va.length){var To=allowStateChangesStart(!0);wo.spliceWithArray_(0,0,va),allowStateChangesEnd(To)}return Eo}var arrayExtensions={clear:function va(){return this.splice(0)},replace:function va(_o){var xo=this[$mobx];return xo.spliceWithArray_(0,xo.values_.length,_o)},toJSON:function va(){return this.slice()},splice:function va(_o,xo){for(var bo=arguments.length,wo=new Array(bo>2?bo-2:0),Eo=2;Eo<bo;Eo++)wo[Eo-2]=arguments[Eo];var To=this[$mobx];switch(arguments.length){case 0:return[];case 1:return To.spliceWithArray_(_o);case 2:return To.spliceWithArray_(_o,xo)}return To.spliceWithArray_(_o,xo,wo)},spliceWithArray:function va(_o,xo,bo){return this[$mobx].spliceWithArray_(_o,xo,bo)},push:function va(){for(var _o=this[$mobx],xo=arguments.length,bo=new Array(xo),wo=0;wo<xo;wo++)bo[wo]=arguments[wo];return _o.spliceWithArray_(_o.values_.length,0,bo),_o.values_.length},pop:function va(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function va(){return this.splice(0,1)[0]},unshift:function va(){for(var _o=this[$mobx],xo=arguments.length,bo=new Array(xo),wo=0;wo<xo;wo++)bo[wo]=arguments[wo];return _o.spliceWithArray_(0,0,bo),_o.values_.length},reverse:function va(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function va(){globalState.trackingDerivation&&die(37,"sort");var _o=this.slice();return _o.sort.apply(_o,arguments),this.replace(_o),this},remove:function va(_o){var xo=this[$mobx],bo=xo.dehanceValues_(xo.values_).indexOf(_o);return bo>-1?(this.splice(bo,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(va,_o){typeof Array.prototype[va]=="function"&&(arrayExtensions[va]=_o(va))}function simpleFunc(va){return function(){var _o=this[$mobx];_o.atom_.reportObserved();var xo=_o.dehanceValues_(_o.values_);return xo[va].apply(xo,arguments)}}function mapLikeFunc(va){return function(_o,xo){var bo=this,wo=this[$mobx];wo.atom_.reportObserved();var Eo=wo.dehanceValues_(wo.values_);return Eo[va](function(To,So){return _o.call(xo,To,So,bo)})}}function reduceLikeFunc(va){return function(){var _o=this,xo=this[$mobx];xo.atom_.reportObserved();var bo=xo.dehanceValues_(xo.values_),wo=arguments[0];return arguments[0]=function(Eo,To,So){return wo(Eo,To,So,_o)},bo[va].apply(bo,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(va){return isObject(va)&&isObservableArrayAdministration(va[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function va(xo,bo,wo){bo===void 0&&(bo=deepEnhancer),wo===void 0&&(wo="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=bo,this.name_=wo,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,this.merge(xo)}var _o=va.prototype;return _o.has_=function(bo){return this.data_.has(bo)},_o.has=function(bo){var wo=this;if(!globalState.trackingDerivation)return this.has_(bo);var Eo=this.hasMap_.get(bo);if(!Eo){var To=Eo=new ObservableValue(this.has_(bo),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(bo,To),onBecomeUnobserved(To,function(){return wo.hasMap_.delete(bo)})}return Eo.get()},_o.set=function(bo,wo){var Eo=this.has_(bo);if(hasInterceptors(this)){var To=interceptChange(this,{type:Eo?UPDATE:ADD,object:this,newValue:wo,name:bo});if(!To)return this;wo=To.newValue}return Eo?this.updateValue_(bo,wo):this.addValue_(bo,wo),this},_o.delete=function(bo){var wo=this;if(checkIfStateModificationsAreAllowed(this.keysAtom_),hasInterceptors(this)){var Eo=interceptChange(this,{type:DELETE,object:this,name:bo});if(!Eo)return!1}if(this.has_(bo)){var To=isSpyEnabled(),So=hasListeners(this),$o=So||To?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(bo).value_,name:bo}:null;return transaction(function(){var Do;wo.keysAtom_.reportChanged(),(Do=wo.hasMap_.get(bo))==null||Do.setNewValue_(!1);var No=wo.data_.get(bo);No.setNewValue_(void 0),wo.data_.delete(bo)}),So&&notifyListeners(this,$o),!0}return!1},_o.updateValue_=function(bo,wo){var Eo=this.data_.get(bo);if(wo=Eo.prepareNewValue_(wo),wo!==globalState.UNCHANGED){var To=isSpyEnabled(),So=hasListeners(this),$o=So||To?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Eo.value_,name:bo,newValue:wo}:null;Eo.setNewValue_(wo),So&&notifyListeners(this,$o)}},_o.addValue_=function(bo,wo){var Eo=this;checkIfStateModificationsAreAllowed(this.keysAtom_),transaction(function(){var Do,No=new ObservableValue(wo,Eo.enhancer_,"ObservableMap.key",!1);Eo.data_.set(bo,No),wo=No.value_,(Do=Eo.hasMap_.get(bo))==null||Do.setNewValue_(!0),Eo.keysAtom_.reportChanged()});var To=isSpyEnabled(),So=hasListeners(this),$o=So||To?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:bo,newValue:wo}:null;So&&notifyListeners(this,$o)},_o.get=function(bo){return this.has(bo)?this.dehanceValue_(this.data_.get(bo).get()):this.dehanceValue_(void 0)},_o.dehanceValue_=function(bo){return this.dehancer!==void 0?this.dehancer(bo):bo},_o.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},_o.values=function(){var bo=this,wo=this.keys();return makeIterable({next:function(){var To=wo.next(),So=To.done,$o=To.value;return{done:So,value:So?void 0:bo.get($o)}}})},_o.entries=function(){var bo=this,wo=this.keys();return makeIterable({next:function(){var To=wo.next(),So=To.done,$o=To.value;return{done:So,value:So?void 0:[$o,bo.get($o)]}}})},_o[_Symbol$iterator]=function(){return this.entries()},_o.forEach=function(bo,wo){for(var Eo=_createForOfIteratorHelperLoose(this),To;!(To=Eo()).done;){var So=To.value,$o=So[0],Do=So[1];bo.call(wo,Do,$o,this)}},_o.merge=function(bo){var wo=this;return isObservableMap(bo)&&(bo=new Map(bo)),transaction(function(){isPlainObject(bo)?getPlainObjectKeys(bo).forEach(function(Eo){return wo.set(Eo,bo[Eo])}):Array.isArray(bo)?bo.forEach(function(Eo){var To=Eo[0],So=Eo[1];return wo.set(To,So)}):isES6Map(bo)?(bo.constructor!==Map&&die(19,bo),bo.forEach(function(Eo,To){return wo.set(To,Eo)})):bo!=null&&die(20,bo)}),this},_o.clear=function(){var bo=this;transaction(function(){untracked(function(){for(var wo=_createForOfIteratorHelperLoose(bo.keys()),Eo;!(Eo=wo()).done;){var To=Eo.value;bo.delete(To)}})})},_o.replace=function(bo){var wo=this;return transaction(function(){for(var Eo=convertToMap(bo),To=new Map,So=!1,$o=_createForOfIteratorHelperLoose(wo.data_.keys()),Do;!(Do=$o()).done;){var No=Do.value;if(!Eo.has(No)){var Oo=wo.delete(No);if(Oo)So=!0;else{var Lo=wo.data_.get(No);To.set(No,Lo)}}}for(var Co=_createForOfIteratorHelperLoose(Eo.entries()),Ro;!(Ro=Co()).done;){var jo=Ro.value,zo=jo[0],Io=jo[1],Po=wo.data_.has(zo);if(wo.set(zo,Io),wo.data_.has(zo)){var Bo=wo.data_.get(zo);To.set(zo,Bo),Po||(So=!0)}}if(!So)if(wo.data_.size!==To.size)wo.keysAtom_.reportChanged();else for(var ko=wo.data_.keys(),Uo=To.keys(),Qo=ko.next(),qo=Uo.next();!Qo.done;){if(Qo.value!==qo.value){wo.keysAtom_.reportChanged();break}Qo=ko.next(),qo=Uo.next()}wo.data_=To}),this},_o.toString=function(){return"[object ObservableMap]"},_o.toJSON=function(){return Array.from(this)},_o.observe_=function(bo,wo){return registerListener(this,bo)},_o.intercept_=function(bo){return registerInterceptor(this,bo)},_createClass$7(va,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),va}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(va){if(isES6Map(va)||isObservableMap(va))return va;if(Array.isArray(va))return new Map(va);if(isPlainObject(va)){var _o=new Map;for(var xo in va)_o.set(xo,va[xo]);return _o}else return die(21,va)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function va(xo,bo,wo){bo===void 0&&(bo=deepEnhancer),wo===void 0&&(wo="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=wo,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Eo,To){return bo(Eo,To,wo)},xo&&this.replace(xo)}var _o=va.prototype;return _o.dehanceValue_=function(bo){return this.dehancer!==void 0?this.dehancer(bo):bo},_o.clear=function(){var bo=this;transaction(function(){untracked(function(){for(var wo=_createForOfIteratorHelperLoose(bo.data_.values()),Eo;!(Eo=wo()).done;){var To=Eo.value;bo.delete(To)}})})},_o.forEach=function(bo,wo){for(var Eo=_createForOfIteratorHelperLoose(this),To;!(To=Eo()).done;){var So=To.value;bo.call(wo,So,So,this)}},_o.add=function(bo){var wo=this;if(checkIfStateModificationsAreAllowed(this.atom_),hasInterceptors(this)){var Eo=interceptChange(this,{type:ADD,object:this,newValue:bo});if(!Eo)return this}if(!this.has(bo)){transaction(function(){wo.data_.add(wo.enhancer_(bo,void 0)),wo.atom_.reportChanged()});var To=!1,So=hasListeners(this),$o=So||To?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:bo}:null;So&&notifyListeners(this,$o)}return this},_o.delete=function(bo){var wo=this;if(hasInterceptors(this)){var Eo=interceptChange(this,{type:DELETE,object:this,oldValue:bo});if(!Eo)return!1}if(this.has(bo)){var To=!1,So=hasListeners(this),$o=So||To?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:bo}:null;return transaction(function(){wo.atom_.reportChanged(),wo.data_.delete(bo)}),So&&notifyListeners(this,$o),!0}return!1},_o.has=function(bo){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(bo))},_o.entries=function(){var bo=0,wo=Array.from(this.keys()),Eo=Array.from(this.values());return makeIterable({next:function(){var So=bo;return bo+=1,So<Eo.length?{value:[wo[So],Eo[So]],done:!1}:{done:!0}}})},_o.keys=function(){return this.values()},_o.values=function(){this.atom_.reportObserved();var bo=this,wo=0,Eo=Array.from(this.data_.values());return makeIterable({next:function(){return wo<Eo.length?{value:bo.dehanceValue_(Eo[wo++]),done:!1}:{done:!0}}})},_o.replace=function(bo){var wo=this;return isObservableSet(bo)&&(bo=new Set(bo)),transaction(function(){Array.isArray(bo)?(wo.clear(),bo.forEach(function(Eo){return wo.add(Eo)})):isES6Set(bo)?(wo.clear(),bo.forEach(function(Eo){return wo.add(Eo)})):bo!=null&&die("Cannot initialize set from "+bo)}),this},_o.observe_=function(bo,wo){return registerListener(this,bo)},_o.intercept_=function(bo){return registerInterceptor(this,bo)},_o.toJSON=function(){return Array.from(this)},_o.toString=function(){return"[object ObservableSet]"},_o[_Symbol$iterator$1]=function(){return this.values()},_createClass$7(va,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),va}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function va(xo,bo,wo,Eo){bo===void 0&&(bo=new Map),Eo===void 0&&(Eo=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=xo,this.values_=bo,this.name_=wo,this.defaultAnnotation_=Eo,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var _o=va.prototype;return _o.getObservablePropValue_=function(bo){return this.values_.get(bo).get()},_o.setObservablePropValue_=function(bo,wo){var Eo=this.values_.get(bo);if(Eo instanceof ComputedValue)return Eo.set(wo),!0;if(hasInterceptors(this)){var To=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:bo,newValue:wo});if(!To)return null;wo=To.newValue}if(wo=Eo.prepareNewValue_(wo),wo!==globalState.UNCHANGED){var So=hasListeners(this),$o=!1,Do=So||$o?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Eo.value_,name:bo,newValue:wo}:null;Eo.setNewValue_(wo),So&&notifyListeners(this,Do)}return!0},_o.get_=function(bo){return globalState.trackingDerivation&&!hasProp(this.target_,bo)&&this.has_(bo),this.target_[bo]},_o.set_=function(bo,wo,Eo){return Eo===void 0&&(Eo=!1),hasProp(this.target_,bo)?this.values_.has(bo)?this.setObservablePropValue_(bo,wo):Eo?Reflect.set(this.target_,bo,wo):(this.target_[bo]=wo,!0):this.extend_(bo,{value:wo,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Eo)},_o.has_=function(bo){if(!globalState.trackingDerivation)return bo in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var wo=this.pendingKeys_.get(bo);return wo||(wo=new ObservableValue(bo in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(bo,wo)),wo.get()},_o.make_=function(bo,wo){if(wo===!0&&(wo=this.defaultAnnotation_),wo!==!1){if(!(bo in this.target_)){var Eo;if((Eo=this.target_[storedAnnotationsSymbol])==null?void 0:Eo[bo])return;die(1,wo.annotationType_,this.name_+"."+bo.toString())}for(var To=this.target_;To&&To!==objectPrototype;){var So=getDescriptor(To,bo);if(So){var $o=wo.make_(this,bo,So,To);if($o===0)return;if($o===1)break}To=Object.getPrototypeOf(To)}recordAnnotationApplied(this,wo,bo)}},_o.extend_=function(bo,wo,Eo,To){if(To===void 0&&(To=!1),Eo===!0&&(Eo=this.defaultAnnotation_),Eo===!1)return this.defineProperty_(bo,wo,To);var So=Eo.extend_(this,bo,wo,To);return So&&recordAnnotationApplied(this,Eo,bo),So},_o.defineProperty_=function(bo,wo,Eo){Eo===void 0&&(Eo=!1);try{startBatch();var To=this.delete_(bo);if(!To)return To;if(hasInterceptors(this)){var So=interceptChange(this,{object:this.proxy_||this.target_,name:bo,type:ADD,newValue:wo.value});if(!So)return null;var $o=So.newValue;wo.value!==$o&&(wo=_extends$2({},wo,{value:$o}))}if(Eo){if(!Reflect.defineProperty(this.target_,bo,wo))return!1}else defineProperty(this.target_,bo,wo);this.notifyPropertyAddition_(bo,wo.value)}finally{endBatch()}return!0},_o.defineObservableProperty_=function(bo,wo,Eo,To){To===void 0&&(To=!1);try{startBatch();var So=this.delete_(bo);if(!So)return So;if(hasInterceptors(this)){var $o=interceptChange(this,{object:this.proxy_||this.target_,name:bo,type:ADD,newValue:wo});if(!$o)return null;wo=$o.newValue}var Do=getCachedObservablePropDescriptor(bo),No={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Do.get,set:Do.set};if(To){if(!Reflect.defineProperty(this.target_,bo,No))return!1}else defineProperty(this.target_,bo,No);var Oo=new ObservableValue(wo,Eo,"ObservableObject.key",!1);this.values_.set(bo,Oo),this.notifyPropertyAddition_(bo,Oo.value_)}finally{endBatch()}return!0},_o.defineComputedProperty_=function(bo,wo,Eo){Eo===void 0&&(Eo=!1);try{startBatch();var To=this.delete_(bo);if(!To)return To;if(hasInterceptors(this)){var So=interceptChange(this,{object:this.proxy_||this.target_,name:bo,type:ADD,newValue:void 0});if(!So)return null}wo.name||(wo.name="ObservableObject.key"),wo.context=this.proxy_||this.target_;var $o=getCachedObservablePropDescriptor(bo),Do={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:$o.get,set:$o.set};if(Eo){if(!Reflect.defineProperty(this.target_,bo,Do))return!1}else defineProperty(this.target_,bo,Do);this.values_.set(bo,new ComputedValue(wo)),this.notifyPropertyAddition_(bo,void 0)}finally{endBatch()}return!0},_o.delete_=function(bo,wo){if(wo===void 0&&(wo=!1),!hasProp(this.target_,bo))return!0;if(hasInterceptors(this)){var Eo=interceptChange(this,{object:this.proxy_||this.target_,name:bo,type:REMOVE});if(!Eo)return null}try{var To,So;startBatch();var $o=hasListeners(this),Do=!1,No=this.values_.get(bo),Oo=void 0;if(!No&&($o||Do)){var Lo;Oo=(Lo=getDescriptor(this.target_,bo))==null?void 0:Lo.value}if(wo){if(!Reflect.deleteProperty(this.target_,bo))return!1}else delete this.target_[bo];if(No&&(this.values_.delete(bo),No instanceof ObservableValue&&(Oo=No.value_),propagateChanged(No)),this.keysAtom_.reportChanged(),(To=this.pendingKeys_)==null||(So=To.get(bo))==null||So.set(bo in this.target_),$o||Do){var Co={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Oo,name:bo};$o&&notifyListeners(this,Co)}}finally{endBatch()}return!0},_o.observe_=function(bo,wo){return registerListener(this,bo)},_o.intercept_=function(bo){return registerInterceptor(this,bo)},_o.notifyPropertyAddition_=function(bo,wo){var Eo,To,So=hasListeners(this),$o=!1;if(So||$o){var Do=So||$o?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:bo,newValue:wo}:null;So&&notifyListeners(this,Do)}(Eo=this.pendingKeys_)==null||(To=Eo.get(bo))==null||To.set(!0),this.keysAtom_.reportChanged()},_o.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},_o.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},va}();function asObservableObject(va,_o){var xo;if(hasProp(va,$mobx))return va;var bo=(xo=_o==null?void 0:_o.name)!=null?xo:"ObservableObject",wo=new ObservableObjectAdministration(va,new Map,String(bo),getAnnotationFromOptions(_o));return addHiddenProp(va,$mobx,wo),va}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(va){return descriptorCache[va]||(descriptorCache[va]={get:function(){return this[$mobx].getObservablePropValue_(va)},set:function(xo){return this[$mobx].setObservablePropValue_(va,xo)}})}function isObservableObject(va){return isObject(va)?isObservableObjectAdministration(va[$mobx]):!1}function recordAnnotationApplied(va,_o,xo){var bo;(bo=va.target_[storedAnnotationsSymbol])==null||delete bo[xo]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function va(){};function inherit(va,_o){Object.setPrototypeOf?Object.setPrototypeOf(va.prototype,_o):va.prototype.__proto__!==void 0?va.prototype.__proto__=_o:va.prototype=_o}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(va){_inheritsLoose$1(_o,va);function _o(bo,wo,Eo,To){var So;Eo===void 0&&(Eo="ObservableArray"),To===void 0&&(To=!1),So=va.call(this)||this;var $o=new ObservableArrayAdministration(Eo,wo,To,!0);if($o.proxy_=_assertThisInitialized$7(So),addHiddenFinalProp(_assertThisInitialized$7(So),$mobx,$o),bo&&bo.length){var Do=allowStateChangesStart(!0);So.spliceWithArray(0,0,bo),allowStateChangesEnd(Do)}return So}var xo=_o.prototype;return xo.concat=function(){this[$mobx].atom_.reportObserved();for(var wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return Array.prototype.concat.apply(this.slice(),Eo.map(function(So){return isObservableArray(So)?So.slice():So}))},xo[Symbol.iterator]=function(){var bo=this,wo=0;return makeIterable({next:function(){return wo<bo.length?{value:bo[wo++],done:!1}:{done:!0,value:void 0}}})},_createClass$7(_o,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(wo){this[$mobx].setArrayLength_(wo)}},{key:Symbol.toStringTag,get:function(){return"Array"}}]),_o}(StubArray);Object.entries(arrayExtensions).forEach(function(va){var _o=va[0],xo=va[1];_o!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,_o,xo)});function createArrayEntryDescriptor(va){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(va)},set:function(xo){this[$mobx].set_(va,xo)}}}function createArrayBufferItem(va){defineProperty(LegacyObservableArray.prototype,""+va,createArrayEntryDescriptor(va))}function reserveArrayBuffer(va){if(va>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var _o=OBSERVABLE_ARRAY_BUFFER_SIZE;_o<va+100;_o++)createArrayBufferItem(_o);OBSERVABLE_ARRAY_BUFFER_SIZE=va}}reserveArrayBuffer(1e3);function createLegacyArray(va,_o,xo){return new LegacyObservableArray(va,_o,xo)}function getAtom(va,_o){if(typeof va=="object"&&va!==null){if(isObservableArray(va))return _o!==void 0&&die(23),va[$mobx].atom_;if(isObservableSet(va))return va[$mobx];if(isObservableMap(va)){if(_o===void 0)return va.keysAtom_;var xo=va.data_.get(_o)||va.hasMap_.get(_o);return xo||die(25,_o,getDebugName(va)),xo}if(isObservableObject(va)){if(!_o)return die(26);var bo=va[$mobx].values_.get(_o);return bo||die(27,_o,getDebugName(va)),bo}if(isAtom(va)||isComputedValue(va)||isReaction(va))return va}else if(isFunction(va)&&isReaction(va[$mobx]))return va[$mobx];die(28)}function getAdministration(va,_o){if(va||die(29),_o!==void 0)return getAdministration(getAtom(va,_o));if(isAtom(va)||isComputedValue(va)||isReaction(va)||isObservableMap(va)||isObservableSet(va))return va;if(va[$mobx])return va[$mobx];die(24,va)}function getDebugName(va,_o){var xo;if(_o!==void 0)xo=getAtom(va,_o);else{if(isAction(va))return va.name;isObservableObject(va)||isObservableMap(va)||isObservableSet(va)?xo=getAdministration(va):xo=getAtom(va)}return xo.name_}var toString=objectPrototype.toString;function deepEqual(va,_o,xo){return xo===void 0&&(xo=-1),eq(va,_o,xo)}function eq(va,_o,xo,bo,wo){if(va===_o)return va!==0||1/va==1/_o;if(va==null||_o==null)return!1;if(va!==va)return _o!==_o;var Eo=typeof va;if(!isFunction(Eo)&&Eo!=="object"&&typeof _o!="object")return!1;var To=toString.call(va);if(To!==toString.call(_o))return!1;switch(To){case"[object RegExp]":case"[object String]":return""+va==""+_o;case"[object Number]":return+va!=+va?+_o!=+_o:+va==0?1/+va==1/_o:+va==+_o;case"[object Date]":case"[object Boolean]":return+va==+_o;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(va)===Symbol.valueOf.call(_o);case"[object Map]":case"[object Set]":xo>=0&&xo++;break}va=unwrap(va),_o=unwrap(_o);var So=To==="[object Array]";if(!So){if(typeof va!="object"||typeof _o!="object")return!1;var $o=va.constructor,Do=_o.constructor;if($o!==Do&&!(isFunction($o)&&$o instanceof $o&&isFunction(Do)&&Do instanceof Do)&&"constructor"in va&&"constructor"in _o)return!1}if(xo===0)return!1;xo<0&&(xo=-1),bo=bo||[],wo=wo||[];for(var No=bo.length;No--;)if(bo[No]===va)return wo[No]===_o;if(bo.push(va),wo.push(_o),So){if(No=va.length,No!==_o.length)return!1;for(;No--;)if(!eq(va[No],_o[No],xo-1,bo,wo))return!1}else{var Oo=Object.keys(va),Lo;if(No=Oo.length,Object.keys(_o).length!==No)return!1;for(;No--;)if(Lo=Oo[No],!(hasProp(_o,Lo)&&eq(va[Lo],_o[Lo],xo-1,bo,wo)))return!1}return bo.pop(),wo.pop(),!0}function unwrap(va){return isObservableArray(va)?va.slice():isES6Map(va)||isObservableMap(va)||isES6Set(va)||isObservableSet(va)?Array.from(va.entries()):va}function makeIterable(va){return va[Symbol.iterator]=getSelf,va}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(va){var _o=getGlobal();typeof _o[va]=="undefined"&&die("MobX requires global '"+va+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});var mobx_esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",$mobx,FlowCancellationError,ObservableMap,ObservableSet,Reaction,_allowStateChanges:allowStateChanges,_allowStateChangesInsideComputed:runInAction,_allowStateReadsEnd:allowStateReadsEnd,_allowStateReadsStart:allowStateReadsStart,_autoAction:autoAction,_endAction,_getAdministration:getAdministration,_getGlobalState:getGlobalState,_interceptReads:interceptReads,_isComputingDerivation:isComputingDerivation,_resetGlobalState:resetGlobalState,_startAction,action,autorun,comparer,computed,configure,createAtom,defineProperty:apiDefineProperty,entries,extendObservable,flow,flowResult,get,getAtom,getDebugName,getDependencyTree,getObserverTree,has,intercept,isAction,isBoxedObservable:isObservableValue,isComputed,isComputedProp,isFlow,isFlowCancellationError,isObservable,isObservableArray,isObservableMap,isObservableObject,isObservableProp,isObservableSet,keys,makeAutoObservable,makeObservable,observable,observe,onBecomeObserved,onBecomeUnobserved,onReactionError,override,ownKeys:apiOwnKeys,reaction,remove:remove$1,runInAction,set,spy,toJS,trace,transaction,untracked,values:values$1,when});if(!react$2.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(va){va()}function observerBatching(va){va||(va=defaultNoopBatch),configure({reactionScheduler:va})}function printDebugValue(va){return getDependencyTree(va)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(va){var _o={reaction:va,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return _o}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(va){var _o=new Map,xo=1,bo=new va(function(Eo){var To=_o.get(Eo);To&&(To.reaction.dispose(),_o.delete(Eo))});return{addReactionToTrack:function(wo,Eo,To){var So=xo++;return bo.register(To,So,wo),wo.current=createTrackingData(Eo),wo.current.finalizationRegistryCleanupToken=So,_o.set(So,wo.current),wo.current},recordReactionAsCommitted:function(wo){bo.unregister(wo),wo.current&&wo.current.finalizationRegistryCleanupToken&&_o.delete(wo.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(va){var _o=typeof Symbol=="function"&&Symbol.iterator,xo=_o&&va[_o],bo=0;if(xo)return xo.call(va);if(va&&typeof va.length=="number")return{next:function(){return va&&bo>=va.length&&(va=void 0),{value:va&&va[bo++],done:!va}}};throw new TypeError(_o?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var va=new Set,_o;function xo(){_o&&(clearTimeout(_o),So())}function bo(){var $o,Do;if(va.size>0){try{for(var No=__values(va),Oo=No.next();!Oo.done;Oo=No.next()){var Lo=Oo.value,Co=Lo.current;Co&&(Co.reaction.dispose(),Lo.current=null)}}catch(Ro){$o={error:Ro}}finally{try{Oo&&!Oo.done&&(Do=No.return)&&Do.call(No)}finally{if($o)throw $o.error}}va.clear()}_o&&(clearTimeout(_o),_o=void 0)}function wo(){_o===void 0&&(_o=setTimeout(So,CLEANUP_TIMER_LOOP_MILLIS))}function Eo($o){va.add($o),wo()}function To($o){va.delete($o)}function So(){_o=void 0;var $o=Date.now();va.forEach(function(Do){var No=Do.current;No&&$o>=No.cleanAt&&(No.reaction.dispose(),Do.current=null,va.delete(Do))}),va.size>0&&wo()}return{addReactionToTrack:function($o,Do,No){return $o.current=createTrackingData(Do),Eo($o),$o.current},recordReactionAsCommitted:To,forceCleanupTimerToRunNowForTests:xo,resetCleanupScheduleForTests:bo}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,globalIsUsingStaticRendering=!1;function enableStaticRendering(va){globalIsUsingStaticRendering=va}function isUsingStaticRendering(){return globalIsUsingStaticRendering}var __read$1=globalThis&&globalThis.__read||function(va,_o){var xo=typeof Symbol=="function"&&va[Symbol.iterator];if(!xo)return va;var bo=xo.call(va),wo,Eo=[],To;try{for(;(_o===void 0||_o-- >0)&&!(wo=bo.next()).done;)Eo.push(wo.value)}catch(So){To={error:So}}finally{try{wo&&!wo.done&&(xo=bo.return)&&xo.call(bo)}finally{if(To)throw To.error}}return Eo};function observerComponentNameFor(va){return"observer"+va}var ObjectToBeRetainedByReact=function(){function va(){}return va}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver$1(va,_o){if(_o===void 0&&(_o="observed"),isUsingStaticRendering())return va();var xo=__read$1(React$g.useState(objectToBeRetainedByReactFactory),1),bo=xo[0],wo=__read$1(React$g.useState(),2),Eo=wo[1],To=function(){return Eo([])},So=React$g.useRef(null);if(!So.current)var $o=new Reaction(observerComponentNameFor(_o),function(){Do.mounted?To():Do.changedBeforeMount=!0}),Do=addReactionToTrack(So,$o,bo);var No=So.current.reaction;React$g.useDebugValue(No,printDebugValue),React$g.useEffect(function(){return recordReactionAsCommitted(So),So.current?(So.current.mounted=!0,So.current.changedBeforeMount&&(So.current.changedBeforeMount=!1,To())):(So.current={reaction:new Reaction(observerComponentNameFor(_o),function(){To()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},To()),function(){So.current.reaction.dispose(),So.current=null}},[]);var Oo,Lo;if(No.track(function(){try{Oo=va()}catch(Co){Lo=Co}}),Lo)throw Lo;return Oo}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(va){for(var _o,xo=1,bo=arguments.length;xo<bo;xo++){_o=arguments[xo];for(var wo in _o)Object.prototype.hasOwnProperty.call(_o,wo)&&(va[wo]=_o[wo])}return va},__assign.apply(this,arguments)};function observer$1(va,_o){if(isUsingStaticRendering())return va;var xo=__assign({forwardRef:!1},_o),bo=va.displayName||va.name,wo=function(To,So){return useObserver$1(function(){return va(To,So)},bo)};wo.displayName=bo,va.contextTypes&&(wo.contextTypes=va.contextTypes);var Eo;return xo.forwardRef?Eo=react$2.exports.memo(react$2.exports.forwardRef(wo)):Eo=react$2.exports.memo(wo),copyStaticProperties$1(va,Eo),Eo.displayName=bo,Eo}var hoistBlackList$1={$$typeof:!0,render:!0,compare:!0,type:!0};function copyStaticProperties$1(va,_o){Object.keys(va).forEach(function(xo){hoistBlackList$1[xo]||Object.defineProperty(_o,xo,Object.getOwnPropertyDescriptor(va,xo))})}function ObserverComponent(va){var _o=va.children,xo=va.render,bo=_o||xo;return typeof bo!="function"?null:useObserver$1(bo)}ObserverComponent.displayName="Observer";function useLocalObservable(va,_o){return react$2.exports.useState(function(){return observable(va(),_o,{autoBind:!0})})[0]}var __read=globalThis&&globalThis.__read||function(va,_o){var xo=typeof Symbol=="function"&&va[Symbol.iterator];if(!xo)return va;var bo=xo.call(va),wo,Eo=[],To;try{for(;(_o===void 0||_o-- >0)&&!(wo=bo.next()).done;)Eo.push(wo.value)}catch(So){To={error:So}}finally{try{wo&&!wo.done&&(xo=bo.return)&&xo.call(bo)}finally{if(To)throw To.error}}return Eo};function useAsObservableSource(va){var _o=__read(react$2.exports.useState(function(){return observable(va,{},{deep:!1})}),1),xo=_o[0];return runInAction(function(){Object.assign(xo,va)}),xo}function useLocalStore(va,_o){var xo=_o&&useAsObservableSource(_o);return react$2.exports.useState(function(){return observable(va(xo),void 0,{autoBind:!0})})[0]}observerBatching(reactDom.exports.unstable_batchedUpdates);function useObserver(va,_o){return _o===void 0&&(_o="observed"),useObserver$1(va,_o)}function useStaticRendering(va){enableStaticRendering(va)}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$2.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(va,_o,xo){var bo,wo={},Eo=null,To=null;xo!==void 0&&(Eo=""+xo),_o.key!==void 0&&(Eo=""+_o.key),_o.ref!==void 0&&(To=_o.ref);for(bo in _o)n$1.call(_o,bo)&&!p.hasOwnProperty(bo)&&(wo[bo]=_o[bo]);if(va&&va.defaultProps)for(bo in _o=va.defaultProps,_o)wo[bo]===void 0&&(wo[bo]=_o[bo]);return{$$typeof:g,type:va,key:Eo,ref:To,props:wo,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var symbolId=0;function createSymbol(va){if(typeof Symbol=="function")return Symbol(va);var _o="__$mobx-react "+va+" ("+symbolId+")";return symbolId++,_o}var createdSymbols={};function newSymbol(va){return createdSymbols[va]||(createdSymbols[va]=createSymbol(va)),createdSymbols[va]}function shallowEqual(va,_o){if(is(va,_o))return!0;if(typeof va!="object"||va===null||typeof _o!="object"||_o===null)return!1;var xo=Object.keys(va),bo=Object.keys(_o);if(xo.length!==bo.length)return!1;for(var wo=0;wo<xo.length;wo++)if(!Object.hasOwnProperty.call(_o,xo[wo])||!is(va[xo[wo]],_o[xo[wo]]))return!1;return!0}function is(va,_o){return va===_o?va!==0||1/va==1/_o:va!==va&&_o!==_o}var hoistBlackList={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,displayName:1,propTypes:1};function copyStaticProperties(va,_o){var xo=Object.getOwnPropertyNames(Object.getPrototypeOf(va));Object.getOwnPropertyNames(va).forEach(function(bo){!hoistBlackList[bo]&&xo.indexOf(bo)===-1&&Object.defineProperty(_o,bo,Object.getOwnPropertyDescriptor(va,bo))})}function setHiddenProp(va,_o,xo){Object.hasOwnProperty.call(va,_o)?va[_o]=xo:Object.defineProperty(va,_o,{enumerable:!1,configurable:!0,writable:!0,value:xo})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(va,_o){var xo=va[mobxMixins]=va[mobxMixins]||{},bo=xo[_o]=xo[_o]||{};return bo.locks=bo.locks||0,bo.methods=bo.methods||[],bo}function wrapper(va,_o){for(var xo=this,bo=arguments.length,wo=new Array(bo>2?bo-2:0),Eo=2;Eo<bo;Eo++)wo[Eo-2]=arguments[Eo];_o.locks++;try{var To;return va!=null&&(To=va.apply(this,wo)),To}finally{_o.locks--,_o.locks===0&&_o.methods.forEach(function(So){So.apply(xo,wo)})}}function wrapFunction(va,_o){var xo=function(){for(var wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];wrapper.call.apply(wrapper,[this,va,_o].concat(Eo))};return xo}function patch(va,_o,xo){var bo=getMixins(va,_o);bo.methods.indexOf(xo)<0&&bo.methods.push(xo);var wo=Object.getOwnPropertyDescriptor(va,_o);if(!(wo&&wo[mobxPatchedDefinition])){var Eo=va[_o],To=createDefinition(va,_o,wo?wo.enumerable:void 0,bo,Eo);Object.defineProperty(va,_o,To)}}function createDefinition(va,_o,xo,bo,wo){var Eo,To=wrapFunction(wo,bo);return Eo={},Eo[mobxPatchedDefinition]=!0,Eo.get=function(){return To},Eo.set=function($o){if(this===va)To=wrapFunction($o,bo);else{var Do=createDefinition(this,_o,xo,bo,$o);Object.defineProperty(this,_o,Do)}},Eo.configurable=!0,Eo.enumerable=xo,Eo}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(va){var _o=va.prototype;if(va[mobxObserverProperty]){var xo=getDisplayName(_o);console.warn("The provided component class ("+xo+`) 
                has already been declared as an observer component.`)}else va[mobxObserverProperty]=!0;if(_o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(va.__proto__!==react$2.exports.PureComponent){if(!_o.shouldComponentUpdate)_o.shouldComponentUpdate=observerSCU;else if(_o.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(_o,"props"),makeObservableProp(_o,"state");var bo=_o.render;if(typeof bo!="function"){var wo=getDisplayName(_o);throw new Error("[mobx-react] class component ("+wo+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return _o.render=function(){return makeComponentReactive.call(this,bo)},patch(_o,"componentWillUnmount",function(){var Eo;if(isUsingStaticRendering()!==!0&&((Eo=this.render[mobxAdminProperty])==null||Eo.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty])){var To=getDisplayName(this);console.warn("The reactive render of an observer class component ("+To+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),va}function getDisplayName(va){return va.displayName||va.name||va.constructor&&(va.constructor.displayName||va.constructor.name)||"<component>"}function makeComponentReactive(va){var _o=this;if(isUsingStaticRendering()===!0)return va.call(this);setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var xo=getDisplayName(this),bo=va.bind(this),wo=!1,Eo=new Reaction(xo+".render()",function(){if(!wo&&(wo=!0,_o[mobxIsUnmounted]!==!0)){var So=!0;try{setHiddenProp(_o,isForcingUpdateKey,!0),_o[skipRenderKey]||react$2.exports.Component.prototype.forceUpdate.call(_o),So=!1}finally{setHiddenProp(_o,isForcingUpdateKey,!1),So&&Eo.dispose()}}});Eo.reactComponent=this,To[mobxAdminProperty]=Eo,this.render=To;function To(){wo=!1;var So=void 0,$o=void 0;if(Eo.track(function(){try{$o=allowStateChanges(!1,bo)}catch(Do){So=Do}}),So)throw So;return $o}return To.call(this)}function observerSCU(va,_o){return isUsingStaticRendering()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==_o?!0:!shallowEqual(this.props,va)}function makeObservableProp(va,_o){var xo=newSymbol("reactProp_"+_o+"_valueHolder"),bo=newSymbol("reactProp_"+_o+"_atomHolder");function wo(){return this[bo]||setHiddenProp(this,bo,createAtom("reactive "+_o)),this[bo]}Object.defineProperty(va,_o,{configurable:!0,enumerable:!0,get:function(){var To=!1;return allowStateReadsStart&&allowStateReadsEnd&&(To=allowStateReadsStart(!0)),wo.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(To),this[xo]},set:function(To){!this[isForcingUpdateKey]&&!shallowEqual(this[xo],To)?(setHiddenProp(this,xo,To),setHiddenProp(this,skipRenderKey,!0),wo.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,xo,To)}})}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$2.exports.forwardRef=="function"&&react$2.exports.forwardRef(function(va){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$2.exports.memo=="function"&&react$2.exports.memo(function(va){return null}).$$typeof;function observer(va){if(va.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),ReactMemoSymbol&&va.$$typeof===ReactMemoSymbol)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(ReactForwardRefSymbol&&va.$$typeof===ReactForwardRefSymbol){var _o=va.render;if(typeof _o!="function")throw new Error("render property of ForwardRef was not a function");return react$2.exports.forwardRef(function(){var bo=arguments;return react$2.exports.createElement(ObserverComponent,null,function(){return _o.apply(void 0,bo)})})}return typeof va=="function"&&(!va.prototype||!va.prototype.render)&&!va.isReactClass&&!Object.prototype.isPrototypeOf.call(react$2.exports.Component,va)?observer$1(va):makeClassComponentObserver(va)}function _extends$1(){return _extends$1=Object.assign||function(va){for(var _o=1;_o<arguments.length;_o++){var xo=arguments[_o];for(var bo in xo)Object.prototype.hasOwnProperty.call(xo,bo)&&(va[bo]=xo[bo])}return va},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(va,_o){if(va==null)return{};var xo={},bo=Object.keys(va),wo,Eo;for(Eo=0;Eo<bo.length;Eo++)wo=bo[Eo],!(_o.indexOf(wo)>=0)&&(xo[wo]=va[wo]);return xo}var MobXProviderContext=React$g.createContext({});function Provider(va){var _o=va.children,xo=_objectWithoutPropertiesLoose$1(va,["children"]),bo=React$g.useContext(MobXProviderContext),wo=React$g.useRef(_extends$1({},bo,xo)),Eo=wo.current;return jsx(MobXProviderContext.Provider,{value:Eo,children:_o})}Provider.displayName="MobXProvider";function createStoreInjector(va,_o,xo,bo){var wo=React$g.forwardRef(function(Eo,To){var So=_extends$1({},Eo),$o=React$g.useContext(MobXProviderContext);return Object.assign(So,va($o||{},So)||{}),To&&(So.ref=To),jsx("component",gl({},So))});return bo&&(wo=observer(wo)),wo.isMobxInjector=!0,copyStaticProperties(_o,wo),wo.wrappedComponent=_o,wo.displayName=getInjectName(_o,xo),wo}function getInjectName(va,_o){var xo,bo=va.displayName||va.name||va.constructor&&va.constructor.name||"Component";return _o?xo="inject-with-"+_o+"("+bo+")":xo="inject("+bo+")",xo}function grabStoresByName(va){return function(_o,xo){return va.forEach(function(bo){if(!(bo in xo)){if(!(bo in _o))throw new Error("MobX injector: Store '"+bo+"' is not available! Make sure it is provided by some Provider");xo[bo]=_o[bo]}}),xo}}function inject(){for(var va=arguments.length,_o=new Array(va),xo=0;xo<va;xo++)_o[xo]=arguments[xo];if(typeof arguments[0]=="function"){var bo=arguments[0];return function(wo){return createStoreInjector(bo,wo,bo.name,!0)}}else return function(wo){return createStoreInjector(grabStoresByName(_o),wo,_o.join("-"),!1)}}var protoStoreKey=newSymbol("disposeOnUnmountProto"),instStoreKey=newSymbol("disposeOnUnmountInst");function runDisposersOnWillUnmount(){var va=this;[].concat(this[protoStoreKey]||[],this[instStoreKey]||[]).forEach(function(_o){var xo=typeof _o=="string"?va[_o]:_o;xo!=null&&(Array.isArray(xo)?xo.map(function(bo){return bo()}):xo())})}function disposeOnUnmount(va,_o){if(Array.isArray(_o))return _o.map(function($o){return disposeOnUnmount(va,$o)});var xo=Object.getPrototypeOf(va).constructor,bo=Object.getPrototypeOf(va.constructor),wo=Object.getPrototypeOf(Object.getPrototypeOf(va));if(!(xo===React$g.Component||xo===React$g.PureComponent||bo===React$g.Component||bo===React$g.PureComponent||wo===React$g.Component||wo===React$g.PureComponent))throw new Error("[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.");if(typeof _o!="string"&&typeof _o!="function"&&!Array.isArray(_o))throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var Eo=typeof _o=="string",To=!!va[protoStoreKey]||!!va[instStoreKey],So=Eo?va[protoStoreKey]||(va[protoStoreKey]=[]):va[instStoreKey]||(va[instStoreKey]=[]);if(So.push(_o),To||patch(va,"componentWillUnmount",runDisposersOnWillUnmount),typeof _o!="string")return _o}function createChainableTypeChecker(va){function _o(bo,wo,Eo,To,So,$o){for(var Do=arguments.length,No=new Array(Do>6?Do-6:0),Oo=6;Oo<Do;Oo++)No[Oo-6]=arguments[Oo];return untracked(function(){if(To=To||"<<anonymous>>",$o=$o||Eo,wo[Eo]==null){if(bo){var Lo=wo[Eo]===null?"null":"undefined";return new Error("The "+So+" `"+$o+"` is marked as required in `"+To+"`, but its value is `"+Lo+"`.")}return null}else return va.apply(void 0,[wo,Eo,To,So,$o].concat(No))})}var xo=_o.bind(null,!1);return xo.isRequired=_o.bind(null,!0),xo}function isSymbol(va,_o){return va==="symbol"||_o["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&_o instanceof Symbol}function getPropType(va){var _o=typeof va;return Array.isArray(va)?"array":va instanceof RegExp?"object":isSymbol(_o,va)?"symbol":_o}function getPreciseType(va){var _o=getPropType(va);if(_o==="object"){if(va instanceof Date)return"date";if(va instanceof RegExp)return"regexp"}return _o}function createObservableTypeCheckerCreator(va,_o){return createChainableTypeChecker(function(xo,bo,wo,Eo,To){return untracked(function(){if(va&&getPropType(xo[bo])===_o.toLowerCase())return null;var So;switch(_o){case"Array":So=isObservableArray;break;case"Object":So=isObservableObject;break;case"Map":So=isObservableMap;break;default:throw new Error("Unexpected mobxType: "+_o)}var $o=xo[bo];if(!So($o)){var Do=getPreciseType($o),No=va?" or javascript `"+_o.toLowerCase()+"`":"";return new Error("Invalid prop `"+To+"` of type `"+Do+"` supplied to `"+wo+"`, expected `mobx.Observable"+_o+"`"+No+".")}return null})})}function createObservableArrayOfTypeChecker(va,_o){return createChainableTypeChecker(function(xo,bo,wo,Eo,To){for(var So=arguments.length,$o=new Array(So>5?So-5:0),Do=5;Do<So;Do++)$o[Do-5]=arguments[Do];return untracked(function(){if(typeof _o!="function")return new Error("Property `"+To+"` of component `"+wo+"` has invalid PropType notation.");var No=createObservableTypeCheckerCreator(va,"Array")(xo,bo,wo,Eo,To);if(No instanceof Error)return No;for(var Oo=xo[bo],Lo=0;Lo<Oo.length;Lo++)if(No=_o.apply(void 0,[Oo,Lo,wo,Eo,To+"["+Lo+"]"].concat($o)),No instanceof Error)return No;return null})})}var observableArray=createObservableTypeCheckerCreator(!1,"Array"),observableArrayOf=createObservableArrayOfTypeChecker.bind(null,!1),observableMap=createObservableTypeCheckerCreator(!1,"Map"),observableObject=createObservableTypeCheckerCreator(!1,"Object"),arrayOrObservableArray=createObservableTypeCheckerCreator(!0,"Array"),arrayOrObservableArrayOf=createObservableArrayOfTypeChecker.bind(null,!0),objectOrObservableObject=createObservableTypeCheckerCreator(!0,"Object"),PropTypes={observableArray,observableArrayOf,observableMap,observableObject,arrayOrObservableArray,arrayOrObservableArrayOf,objectOrObservableObject};if(!react$2.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");var mobxreact_esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",MobXProviderContext,PropTypes,Provider,disposeOnUnmount,inject,observer,Observer:ObserverComponent,enableStaticRendering,isUsingStaticRendering,observerBatching,useAsObservableSource,useLocalObservable,useLocalStore,useObserver,useStaticRendering}),require$$2=getAugmentedNamespace(mobxreact_esm),hooks={},Controller$3={},require$$5=getAugmentedNamespace(mobx_esm),animationFrame$1={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0,va.getFrameTime=To,va.nextFrame=wo,va.requestAnimationFrameInterval=Eo;var _o=window.requestAnimationFrame||function(So){return setTimeout(So,16)},xo=window.cancelAnimationFrame||clearTimeout,bo=_o;va.default=bo;function wo(So){var $o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;$o<=0?_o(So):_o(function(){return wo(So,$o-1)})}function Eo(So){var $o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,Do=-1,No=0,Oo=-1,Lo=1e3/$o;function Co(Ro){Oo===-1&&(Oo=Ro),Do=_o(Co);var jo=Ro-No;jo<Lo||(No=Ro,So&&So(Ro-Oo))}return Do=_o(Co),function(){xo(Do)}}function To(){var So=Date.now();return new Promise(function($o){_o(function(){$o(Date.now()-So)})})}})(animationFrame$1);function _typeof$o(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$o=function(xo){return typeof xo}:_typeof$o=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$o(va)}Object.defineProperty(Controller$3,"__esModule",{value:!0});Controller$3.ControllerContext=Controller$3.Controller=void 0;var _five$4=five,_mobx$2=require$$5,React$f=_interopRequireWildcard$m(react$2.exports),_animationFrame$1=animationFrame$1;function _getRequireWildcardCache$m(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$m=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$m(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$o(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$m(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _classCallCheck$9(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$6(va,_o,xo){return _o&&_defineProperties$6(va.prototype,_o),xo&&_defineProperties$6(va,xo),va}function _inherits$5(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf$6(va,_o)}function _setPrototypeOf$6(va,_o){return _setPrototypeOf$6=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$6(va,_o)}function _createSuper$5(va){var _o=_isNativeReflectConstruct$5();return function(){var bo=_getPrototypeOf$5(va),wo;if(_o){var Eo=_getPrototypeOf$5(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn$5(this,wo)}}function _possibleConstructorReturn$5(va,_o){if(_o&&(_typeof$o(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(va)}function _assertThisInitialized$6(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct$5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$5(va){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf$5(va)}function _defineProperty$7(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var Controller$2=function(va){_inherits$5(xo,va);var _o=_createSuper$5(xo);function xo(){var bo;return _classCallCheck$9(this,xo),bo=_o.call(this),_defineProperty$7(_assertThisInitialized$6(bo),"playing",!1),_defineProperty$7(_assertThisInitialized$6(bo),"visible",!1),_defineProperty$7(_assertThisInitialized$6(bo),"drawerConfig",null),(0,_mobx$2.makeObservable)(_assertThisInitialized$6(bo),{visible:_mobx$2.observable,setVisible:_mobx$2.action,playing:_mobx$2.observable,setPlaying:_mobx$2.action,drawerConfig:_mobx$2.observable.ref,openDrawer:_mobx$2.action}),(0,_mobx$2.reaction)(function(){return bo.playing},function(wo){bo.emit(wo?"playing":"paused")}),bo}return _createClass$6(xo,[{key:"isAudio",get:function(){var wo,Eo;return!((wo=this.videoAgentScene)!==null&&wo!==void 0&&(Eo=wo.videoAgentMesh.videoUrl)!==null&&Eo!==void 0&&Eo.endsWith(".mp4"))}},{key:"setVisible",value:function(wo){this.visible=wo}},{key:"setPlaying",value:function(wo){this.playing=wo}},{key:"openDrawer",value:function(wo){if(!wo){var Eo;this.drawerConfig={content:"",height:(Eo=this.drawerConfig)===null||Eo===void 0?void 0:Eo.height};return}this.drawerConfig=wo}},{key:"ready",get:function(){return!!this.videoAgentScene}},{key:"currentTime",get:function(){var wo;return((wo=this.videoAgentScene)===null||wo===void 0?void 0:wo.videoAgentMesh.currentTime)||0}},{key:"currentKeyframes",get:function(){var wo=this;if(!this.vreoUnit)return[];var Eo=this.vreoUnit.keyframes;return Eo.filter(function(To){if(To.parsed)return!1;var So=wo.currentTime-To.start;return So<=100&&So>=0})}},{key:"videoInstance",get:function(){var wo;return(wo=this.videoAgentScene)===null||wo===void 0?void 0:wo.videoAgentMesh.videoInstance}},{key:"requestAnimationFrameLoop",value:function(wo){var Eo,To,So=this;if((Eo=this.videoInstance)!==null&&Eo!==void 0&&Eo.ended){this.setPlaying(!1),this.videoInstance.pause();return}if(!this.playing){var $o;if(!(($o=this.videoInstance)!==null&&$o!==void 0&&$o.paused)){var Do;(Do=this.videoInstance)===null||Do===void 0||Do.pause()}return}(To=this.videoInstance)!==null&&To!==void 0&&To.paused&&this.playing&&this.videoInstance.play();var No=this.currentKeyframes;No.forEach(function(Oo){Oo.parsed||(Oo.parsed=!0,So.emit(Oo.type,Oo),wo&&wo(Oo.type,Oo))})}},{key:"run",value:function(wo){var Eo=this;this.stopInterval||(this.stopInterval=(0,_animationFrame$1.requestAnimationFrameInterval)(function(){return Eo.requestAnimationFrameLoop(wo)}))}},{key:"dispose",value:function(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach(function(wo){return wo.parsed=!1}),this.vreoUnit=void 0,this.videoInstance&&(this.videoInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}]),xo}(_five$4.Subscribe);Controller$3.Controller=Controller$2;var ControllerContext=React$f.createContext(null);Controller$3.ControllerContext=ControllerContext;Object.defineProperty(hooks,"__esModule",{value:!0});hooks.useController=useController;hooks.useFiveInstance=useFiveInstance;hooks.useFiveProject2d=useFiveProject2d;var _react$2=_interopRequireDefault$d(react$2.exports),_Controller$1=Controller$3;function _interopRequireDefault$d(va){return va&&va.__esModule?va:{default:va}}function useController(){var va=_react$2.default.useContext(_Controller$1.ControllerContext);if(!va)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return va}function useFiveInstance(){var va=useController();if(!va.$five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return va.$five}function useFiveProject2d(){var va=useFiveInstance();return function(_o){return va.project2d(_o,!1)}}var CameraMovement$1={},CameraMovementPlugin$1={},typings={};Object.defineProperty(typings,"__esModule",{value:!0});typings.Rotation=typings.CameraMovementEffect=void 0;var CameraMovementEffect;typings.CameraMovementEffect=CameraMovementEffect;(function(va){va.Move="Move",va.Rotate="Rotate"})(CameraMovementEffect||(typings.CameraMovementEffect=CameraMovementEffect={}));var Rotation;typings.Rotation=Rotation;(function(va){va.Clockwise="Clockwise",va.Anticlockwise="Anticlockwise",va.Loop="Loop"})(Rotation||(typings.Rotation=Rotation={}));var tween={},Easing={Linear:{None:function(va){return va}},Quadratic:{In:function(va){return va*va},Out:function(va){return va*(2-va)},InOut:function(va){return(va*=2)<1?.5*va*va:-.5*(--va*(va-2)-1)}},Cubic:{In:function(va){return va*va*va},Out:function(va){return--va*va*va+1},InOut:function(va){return(va*=2)<1?.5*va*va*va:.5*((va-=2)*va*va+2)}},Quartic:{In:function(va){return va*va*va*va},Out:function(va){return 1- --va*va*va*va},InOut:function(va){return(va*=2)<1?.5*va*va*va*va:-.5*((va-=2)*va*va*va-2)}},Quintic:{In:function(va){return va*va*va*va*va},Out:function(va){return--va*va*va*va*va+1},InOut:function(va){return(va*=2)<1?.5*va*va*va*va*va:.5*((va-=2)*va*va*va*va+2)}},Sinusoidal:{In:function(va){return 1-Math.cos(va*Math.PI/2)},Out:function(va){return Math.sin(va*Math.PI/2)},InOut:function(va){return .5*(1-Math.cos(Math.PI*va))}},Exponential:{In:function(va){return va===0?0:Math.pow(1024,va-1)},Out:function(va){return va===1?1:1-Math.pow(2,-10*va)},InOut:function(va){return va===0?0:va===1?1:(va*=2)<1?.5*Math.pow(1024,va-1):.5*(-Math.pow(2,-10*(va-1))+2)}},Circular:{In:function(va){return 1-Math.sqrt(1-va*va)},Out:function(va){return Math.sqrt(1- --va*va)},InOut:function(va){return(va*=2)<1?-.5*(Math.sqrt(1-va*va)-1):.5*(Math.sqrt(1-(va-=2)*va)+1)}},Elastic:{In:function(va){return va===0?0:va===1?1:-Math.pow(2,10*(va-1))*Math.sin((va-1.1)*5*Math.PI)},Out:function(va){return va===0?0:va===1?1:Math.pow(2,-10*va)*Math.sin((va-.1)*5*Math.PI)+1},InOut:function(va){return va===0?0:va===1?1:(va*=2,va<1?-.5*Math.pow(2,10*(va-1))*Math.sin((va-1.1)*5*Math.PI):.5*Math.pow(2,-10*(va-1))*Math.sin((va-1.1)*5*Math.PI)+1)}},Back:{In:function(va){var _o=1.70158;return va*va*((_o+1)*va-_o)},Out:function(va){var _o=1.70158;return--va*va*((_o+1)*va+_o)+1},InOut:function(va){var _o=1.70158*1.525;return(va*=2)<1?.5*(va*va*((_o+1)*va-_o)):.5*((va-=2)*va*((_o+1)*va+_o)+2)}},Bounce:{In:function(va){return 1-Easing.Bounce.Out(1-va)},Out:function(va){return va<1/2.75?7.5625*va*va:va<2/2.75?7.5625*(va-=1.5/2.75)*va+.75:va<2.5/2.75?7.5625*(va-=2.25/2.75)*va+.9375:7.5625*(va-=2.625/2.75)*va+.984375},InOut:function(va){return va<.5?Easing.Bounce.In(va*2)*.5:Easing.Bounce.Out(va*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var va=process.hrtime();return va[0]*1e3+va[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function va(){this._tweens={},this._tweensAddedDuringUpdate={}}return va.prototype.getAll=function(){var _o=this;return Object.keys(this._tweens).map(function(xo){return _o._tweens[xo]})},va.prototype.removeAll=function(){this._tweens={}},va.prototype.add=function(_o){this._tweens[_o.getId()]=_o,this._tweensAddedDuringUpdate[_o.getId()]=_o},va.prototype.remove=function(_o){delete this._tweens[_o.getId()],delete this._tweensAddedDuringUpdate[_o.getId()]},va.prototype.update=function(_o,xo){_o===void 0&&(_o=now$1()),xo===void 0&&(xo=!1);var bo=Object.keys(this._tweens);if(bo.length===0)return!1;for(;bo.length>0;){this._tweensAddedDuringUpdate={};for(var wo=0;wo<bo.length;wo++){var Eo=this._tweens[bo[wo]],To=!xo;Eo&&Eo.update(_o,To)===!1&&!xo&&delete this._tweens[bo[wo]]}bo=Object.keys(this._tweensAddedDuringUpdate)}return!0},va}(),Interpolation={Linear:function(va,_o){var xo=va.length-1,bo=xo*_o,wo=Math.floor(bo),Eo=Interpolation.Utils.Linear;return _o<0?Eo(va[0],va[1],bo):_o>1?Eo(va[xo],va[xo-1],xo-bo):Eo(va[wo],va[wo+1>xo?xo:wo+1],bo-wo)},Bezier:function(va,_o){for(var xo=0,bo=va.length-1,wo=Math.pow,Eo=Interpolation.Utils.Bernstein,To=0;To<=bo;To++)xo+=wo(1-_o,bo-To)*wo(_o,To)*va[To]*Eo(bo,To);return xo},CatmullRom:function(va,_o){var xo=va.length-1,bo=xo*_o,wo=Math.floor(bo),Eo=Interpolation.Utils.CatmullRom;return va[0]===va[xo]?(_o<0&&(wo=Math.floor(bo=xo*(1+_o))),Eo(va[(wo-1+xo)%xo],va[wo],va[(wo+1)%xo],va[(wo+2)%xo],bo-wo)):_o<0?va[0]-(Eo(va[0],va[0],va[1],va[1],-bo)-va[0]):_o>1?va[xo]-(Eo(va[xo],va[xo],va[xo-1],va[xo-1],bo-xo)-va[xo]):Eo(va[wo?wo-1:0],va[wo],va[xo<wo+1?xo:wo+1],va[xo<wo+2?xo:wo+2],bo-wo)},Utils:{Linear:function(va,_o,xo){return(_o-va)*xo+va},Bernstein:function(va,_o){var xo=Interpolation.Utils.Factorial;return xo(va)/xo(_o)/xo(va-_o)},Factorial:function(){var va=[1];return function(_o){var xo=1;if(va[_o])return va[_o];for(var bo=_o;bo>1;bo--)xo*=bo;return va[_o]=xo,xo}}(),CatmullRom:function(va,_o,xo,bo,wo){var Eo=(xo-va)*.5,To=(bo-_o)*.5,So=wo*wo,$o=wo*So;return(2*_o-2*xo+Eo+To)*$o+(-3*_o+3*xo-2*Eo-To)*So+Eo*wo+_o}}},Sequence=function(){function va(){}return va.nextId=function(){return va._nextId++},va._nextId=0,va}(),mainGroup=new Group,Tween=function(){function va(_o,xo){xo===void 0&&(xo=mainGroup),this._object=_o,this._group=xo,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return va.prototype.getId=function(){return this._id},va.prototype.isPlaying=function(){return this._isPlaying},va.prototype.isPaused=function(){return this._isPaused},va.prototype.to=function(_o,xo){return this._valuesEnd=Object.create(_o),xo!==void 0&&(this._duration=xo),this},va.prototype.duration=function(_o){return this._duration=_o,this},va.prototype.start=function(_o){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var xo in this._valuesStartRepeat)this._swapEndStartRepeatValues(xo),this._valuesStart[xo]=this._valuesStartRepeat[xo]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=_o!==void 0?typeof _o=="string"?now$1()+parseFloat(_o):_o:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},va.prototype._setupProperties=function(_o,xo,bo,wo){for(var Eo in bo){var To=_o[Eo],So=Array.isArray(To),$o=So?"array":typeof To,Do=!So&&Array.isArray(bo[Eo]);if(!($o==="undefined"||$o==="function")){if(Do){var No=bo[Eo];if(No.length===0)continue;No=No.map(this._handleRelativeValue.bind(this,To)),bo[Eo]=[To].concat(No)}if(($o==="object"||So)&&To&&!Do){xo[Eo]=So?[]:{};for(var Oo in To)xo[Eo][Oo]=To[Oo];wo[Eo]=So?[]:{},this._setupProperties(To,xo[Eo],bo[Eo],wo[Eo])}else typeof xo[Eo]=="undefined"&&(xo[Eo]=To),So||(xo[Eo]*=1),Do?wo[Eo]=bo[Eo].slice().reverse():wo[Eo]=xo[Eo]||0}}},va.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},va.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},va.prototype.pause=function(_o){return _o===void 0&&(_o=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=_o,this._group&&this._group.remove(this),this)},va.prototype.resume=function(_o){return _o===void 0&&(_o=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=_o-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},va.prototype.stopChainedTweens=function(){for(var _o=0,xo=this._chainedTweens.length;_o<xo;_o++)this._chainedTweens[_o].stop();return this},va.prototype.group=function(_o){return this._group=_o,this},va.prototype.delay=function(_o){return this._delayTime=_o,this},va.prototype.repeat=function(_o){return this._initialRepeat=_o,this._repeat=_o,this},va.prototype.repeatDelay=function(_o){return this._repeatDelayTime=_o,this},va.prototype.yoyo=function(_o){return this._yoyo=_o,this},va.prototype.easing=function(_o){return this._easingFunction=_o,this},va.prototype.interpolation=function(_o){return this._interpolationFunction=_o,this},va.prototype.chain=function(){for(var _o=[],xo=0;xo<arguments.length;xo++)_o[xo]=arguments[xo];return this._chainedTweens=_o,this},va.prototype.onStart=function(_o){return this._onStartCallback=_o,this},va.prototype.onUpdate=function(_o){return this._onUpdateCallback=_o,this},va.prototype.onRepeat=function(_o){return this._onRepeatCallback=_o,this},va.prototype.onComplete=function(_o){return this._onCompleteCallback=_o,this},va.prototype.onStop=function(_o){return this._onStopCallback=_o,this},va.prototype.update=function(_o,xo){if(_o===void 0&&(_o=now$1()),xo===void 0&&(xo=!0),this._isPaused)return!0;var bo,wo,Eo=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(_o>Eo)return!1;xo&&this.start(_o)}if(this._goToEnd=!1,_o<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),wo=(_o-this._startTime)/this._duration,wo=this._duration===0||wo>1?1:wo;var To=this._easingFunction(wo);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,To),this._onUpdateCallback&&this._onUpdateCallback(this._object,wo),wo===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(bo in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[bo]=="string"&&(this._valuesStartRepeat[bo]=this._valuesStartRepeat[bo]+parseFloat(this._valuesEnd[bo])),this._yoyo&&this._swapEndStartRepeatValues(bo),this._valuesStart[bo]=this._valuesStartRepeat[bo];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=_o+this._repeatDelayTime:this._startTime=_o+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var So=0,$o=this._chainedTweens.length;So<$o;So++)this._chainedTweens[So].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},va.prototype._updateProperties=function(_o,xo,bo,wo){for(var Eo in bo)if(xo[Eo]!==void 0){var To=xo[Eo]||0,So=bo[Eo],$o=Array.isArray(_o[Eo]),Do=Array.isArray(So),No=!$o&&Do;No?_o[Eo]=this._interpolationFunction(So,wo):typeof So=="object"&&So?this._updateProperties(_o[Eo],To,So,wo):(So=this._handleRelativeValue(To,So),typeof So=="number"&&(_o[Eo]=To+(So-To)*wo))}},va.prototype._handleRelativeValue=function(_o,xo){return typeof xo!="string"?xo:xo.charAt(0)==="+"||xo.charAt(0)==="-"?_o+parseFloat(xo):parseFloat(xo)},va.prototype._swapEndStartRepeatValues=function(_o){var xo=this._valuesStartRepeat[_o],bo=this._valuesEnd[_o];typeof bo=="string"?this._valuesStartRepeat[_o]=this._valuesStartRepeat[_o]+parseFloat(bo):this._valuesStartRepeat[_o]=this._valuesEnd[_o],this._valuesEnd[_o]=xo},va}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update},tween_esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:exports,Easing,Group,Interpolation,Sequence,Tween,VERSION,add,getAll,nextId,now:now$1,remove,removeAll,update}),require$$0$1=getAugmentedNamespace(tween_esm);(function(va){function _o(Do){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Oo){return typeof Oo}:_o=function(Oo){return Oo&&typeof Symbol=="function"&&Oo.constructor===Symbol&&Oo!==Symbol.prototype?"symbol":typeof Oo},_o(Do)}Object.defineProperty(va,"__esModule",{value:!0}),va.Easing=void 0,va.default=So,va.tweenProgress=$o;var xo=Eo(require$$0$1),bo=animationFrame$1;function wo(Do){if(typeof WeakMap!="function")return null;var No=new WeakMap,Oo=new WeakMap;return(wo=function(Co){return Co?Oo:No})(Do)}function Eo(Do,No){if(!No&&Do&&Do.__esModule)return Do;if(Do===null||_o(Do)!=="object"&&typeof Do!="function")return{default:Do};var Oo=wo(No);if(Oo&&Oo.has(Do))return Oo.get(Do);var Lo={},Co=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ro in Do)if(Ro!=="default"&&Object.prototype.hasOwnProperty.call(Do,Ro)){var jo=Co?Object.getOwnPropertyDescriptor(Do,Ro):null;jo&&(jo.get||jo.set)?Object.defineProperty(Lo,Ro,jo):Lo[Ro]=Do[Ro]}return Lo.default=Do,Oo&&Oo.set(Do,Lo),Lo}var To=xo.Easing;va.Easing=To;function So(Do,No,Oo){var Lo=arguments.length>3&&arguments[3]!==void 0?arguments[3]:To.Linear.None,Co=new xo.Tween(Do).to(No,Oo).easing(Lo);(0,bo.nextFrame)(function(){return Co.start(0)});var Ro=(0,bo.requestAnimationFrameInterval)(function(zo){Co.update(zo)===!1&&Ro()}),jo=[];return Co.onDestroy=function(zo){return jo.push(zo),Co},Co.destroy=function(){this.stop(),Object.assign(Co,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});for(var zo;zo=jo.shift();)zo();Ro()},Co}function $o(Do,No){return So({progress:0},{progress:1},Do,No)}})(tween);Object.defineProperty(CameraMovementPlugin$1,"__esModule",{value:!0});CameraMovementPlugin$1.CameraMovementPlugin=void 0;var _five$3=five,_typings$1=typings,_tween$2=tween;function asyncGeneratorStep$b(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$b(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$b(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$b(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}var PI_2$1=Math.PI*2;function formatLatitude(va){return va%PI_2$1}function formatLongitude(va){return(va%PI_2$1+PI_2$1)%PI_2$1}var getLongitudeParams=function va(_o,xo,bo){var wo=Math.PI,Eo=wo*2;return _o=formatLongitude(_o),xo=formatLongitude(xo),bo===_typings$1.Rotation.Anticlockwise&&_o<xo&&(_o+=Eo),bo===_typings$1.Rotation.Clockwise&&xo<_o&&(xo+=Eo),bo===_typings$1.Rotation.Loop&&xo-_o>wo?va(_o,xo,_typings$1.Rotation.Anticlockwise):bo===_typings$1.Rotation.Loop&&_o-xo>wo?va(_o,xo,_typings$1.Rotation.Clockwise):{from:_o,to:xo}};function progressNumber(va,_o,xo){return va+(_o-va)*xo}var CameraMovementPlugin=function va(_o){var xo=function(){var Eo=_asyncToGenerator$b(regeneratorRuntime.mark(function To(So,$o){var Do,No=arguments;return regeneratorRuntime.wrap(function(Lo){for(;;)switch(Lo.prev=Lo.next){case 0:if(Do=No.length>2&&No[2]!==void 0?No[2]:{preload:!0},Do.asyncStartCallback&&Do.asyncStartCallback(),!(So.mode&&So.mode!==_o.currentMode)){Lo.next=5;break}return Lo.next=5,new Promise(function(Co){!So.mode||(_o.once("modeChange",function(Ro){_o.once("initAnimationEnded",function(){Ro===So.mode&&Co(!0)})}),_o.changeMode(So.mode,{fov:So.fov||void 0,latitude:So.latitude||void 0,longitude:So.longitude||void 0,panoIndex:So.panoIndex||void 0}))});case 5:if(So.mode!==_five$3.Five.Mode.Floorplan){Lo.next=7;break}return Lo.abrupt("return",!0);case 7:if(!(Do.preload&&So.panoIndex!==void 0&&So.panoIndex!==_o.panoIndex)){Lo.next=10;break}return Lo.next=10,_o.preloadPano(So.panoIndex);case 10:if(Do.asyncEndCallback&&Do.asyncEndCallback(),!(So.panoIndex===void 0&&So.fov===void 0&&So.latitude===void 0&&So.longitude===void 0)){Lo.next=13;break}return Lo.abrupt("return",!0);case 13:return Lo.next=15,new Promise(function(Co,Ro){var jo=So.panoIndex!==void 0?So.panoIndex:_o.panoIndex;jo!==void 0?_o.moveToPano(jo,Object.assign({duration:$o,moveEndCallback:function(){return Co(!0)},moveCancelCallback:function(){return Ro(!1)}},So)):Ro(!1)});case 15:return Lo.abrupt("return",Lo.sent);case 16:case"end":return Lo.stop()}},To)}));return function(So,$o){return Eo.apply(this,arguments)}}(),bo=function(To){var So=_o.state,$o=formatLatitude(So.latitude),Do=formatLatitude(To.latitude),No=getLongitudeParams(So.longitude,To.longitude,To.rotation||_typings$1.Rotation.Loop),Oo=No.from,Lo=No.to,Co=So.fov,Ro=To.fov;return{from:{latitude:$o,longitude:Oo,fov:Co},to:{latitude:Do,longitude:Lo,fov:Ro}}},wo=function(){var Eo=_asyncToGenerator$b(regeneratorRuntime.mark(function To(So,$o){var Do,No,Oo,Lo,Co=arguments;return regeneratorRuntime.wrap(function(jo){for(;;)switch(jo.prev=jo.next){case 0:if(Do=Co.length>2&&Co[2]!==void 0?Co[2]:{},Do.asyncStartCallback&&Do.asyncStartCallback(),_o.currentMode===_five$3.Five.Mode.Panorama){jo.next=5;break}return jo.next=5,_o.changeMode(_five$3.Five.Mode.Panorama);case 5:if(!(So.panoIndex!==void 0&&So.panoIndex!==_o.panoIndex)){jo.next=11;break}if(!Do.preload){jo.next=9;break}return jo.next=9,_o.preloadPano(So.panoIndex);case 9:return jo.next=11,new Promise(function(zo,Io){_o.moveToPano(So.panoIndex,{moveEndCallback:function(){return zo(!0)},moveCancelCallback:function(){return Io(!1)}})});case 11:return Do.asyncEndCallback&&Do.asyncEndCallback(),No=bo(So),Oo=No.from,Lo=No.to,jo.next=15,new Promise(function(zo,Io){var Po=function(Zo){var Xo=Zo.progress,Fo={};Fo.longitude=progressNumber(Oo.longitude,Lo.longitude,Xo),Fo.latitude=progressNumber(Oo.latitude,Lo.latitude,Xo),Fo.fov=progressNumber(Oo.fov,Lo.fov,Xo),_o.setState(Fo,!0)},Bo=function(){zo(!0)},ko=function(){zo(!1)},Uo=So.rotateSpeed?Math.ceil(Math.abs(Lo.longitude-Oo.longitude)/So.rotateSpeed*1e3):$o,Qo=(0,_tween$2.tweenProgress)(Uo,_tween$2.Easing.Linear.None).onUpdate(Po).onComplete(Bo).onDestroy(ko);So.rotation===_typings$1.Rotation.Loop&&Qo.repeat(1/0).yoyo(!0),setTimeout(function(){Qo.destroy(),zo(!0)},$o)});case 15:return jo.abrupt("return",jo.sent);case 16:case"end":return jo.stop()}},To)}));return function(So,$o){return Eo.apply(this,arguments)}}();return{move:xo,rotate:wo}};CameraMovementPlugin$1.CameraMovementPlugin=CameraMovementPlugin;var VreoUnit={};Object.defineProperty(VreoUnit,"__esModule",{value:!0});VreoUnit.VreoKeyframeEnum=VreoUnit.PanoTagEnum=VreoUnit.PanoEffectEnum=VreoUnit.InfoPanelTypeEnum=void 0;var VreoKeyframeEnum;VreoUnit.VreoKeyframeEnum=VreoKeyframeEnum;(function(va){va.CameraMovement="CameraMovement",va.PanoTag="PanoTag",va.PanoTextLabel="PanoTextLabel",va.Prompter="Prompter",va.UpdateVRPanorama="UpdateVRPanorama",va.ModelVideo="ModelVideo",va.PanoEffect="PanoEffect",va.InfoPanel="InfoPanel",va.VideoEffect="VideoEffect",va.Exit="Exit"})(VreoKeyframeEnum||(VreoUnit.VreoKeyframeEnum=VreoKeyframeEnum={}));var PanoTagEnum;VreoUnit.PanoTagEnum=PanoTagEnum;(function(va){va.Text="Text",va.Image="Image"})(PanoTagEnum||(VreoUnit.PanoTagEnum=PanoTagEnum={}));var PanoEffectEnum;VreoUnit.PanoEffectEnum=PanoEffectEnum;(function(va){va.Distance="Distance"})(PanoEffectEnum||(VreoUnit.PanoEffectEnum=PanoEffectEnum={}));var InfoPanelTypeEnum;VreoUnit.InfoPanelTypeEnum=InfoPanelTypeEnum;(function(va){va.Image="Image",va.Video="Video"})(InfoPanelTypeEnum||(VreoUnit.InfoPanelTypeEnum=InfoPanelTypeEnum={}));function _typeof$n(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$n=function(xo){return typeof xo}:_typeof$n=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$n(va)}Object.defineProperty(CameraMovement$1,"__esModule",{value:!0});CameraMovement$1.CameraMovement=CameraMovement;var React$e=_interopRequireWildcard$l(react$2.exports),_CameraMovementPlugin=CameraMovementPlugin$1,_typings=typings,_VreoUnit$8=VreoUnit,_hooks$b=hooks;function _getRequireWildcardCache$l(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$l=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$l(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$n(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$l(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function asyncGeneratorStep$a(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$a(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$a(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$a(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function CameraMovement(){var va=(0,_hooks$b.useController)(),_o=(0,_hooks$b.useFiveInstance)(),xo=React$e.useRef();return React$e.useEffect(function(){var bo=function(){var wo=_asyncToGenerator$a(regeneratorRuntime.mark(function Eo(To){var So,$o,Do,No,Oo;return regeneratorRuntime.wrap(function(Co){for(;;)switch(Co.prev=Co.next){case 0:xo.current||(xo.current=(0,_CameraMovementPlugin.CameraMovementPlugin)(_o,{})),So=To.start,$o=To.end,Do=To.data,No=Do,Oo=No.effect,Oo===_typings.CameraMovementEffect.Rotate?xo.current.rotate(Do,$o-So):xo.current.move(Do,$o-So);case 5:case"end":return Co.stop()}},Eo)}));return function(To){return wo.apply(this,arguments)}}();return va.on(_VreoUnit$8.VreoKeyframeEnum.CameraMovement,bo),function(){va.off(_VreoUnit$8.VreoKeyframeEnum.CameraMovement,bo)}},[va]),React$e.createElement(React$e.Fragment,null)}var InfoPanel$1={};function _typeof$m(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$m=function(xo){return typeof xo}:_typeof$m=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$m(va)}Object.defineProperty(InfoPanel$1,"__esModule",{value:!0});InfoPanel$1.InfoPanel=InfoPanel;var React$d=_interopRequireWildcard$k(react$2.exports),_VreoUnit$7=VreoUnit,_hooks$a=hooks;function _getRequireWildcardCache$k(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$k=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$k(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$m(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$k(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function InfoPanelImg(va){var _o=va.url;return React$d.createElement("div",{className:"vreo-infoPanel vreo-infoPanel--img"},React$d.createElement("img",{className:"vreo-infoPanelImg",src:_o}))}function InfoPanelVideo(va){var _o=va.url;return React$d.createElement("div",{className:"vreo-infoPanel vreo-infoPanel--video"},React$d.createElement("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:_o}))}function InfoPanel(){var va=React$d.useRef(),_o=(0,_hooks$a.useController)();return React$d.useEffect(function(){var xo;if(((xo=_o.configs)===null||xo===void 0?void 0:xo.keyframeMap.InfoPanel)!==!1){var bo=function(Eo){var To=Eo.start,So=Eo.end,$o=Eo.data,Do=$o;Do.type===_VreoUnit$7.InfoPanelTypeEnum.Image?_o.openDrawer({content:React$d.createElement(InfoPanelImg,{url:Do.url}),height:"60vh"}):Do.type===_VreoUnit$7.InfoPanelTypeEnum.Video&&_o.openDrawer({content:React$d.createElement(InfoPanelVideo,{url:Do.url}),height:"60vh"}),va.current=setTimeout(function(){return _o.openDrawer(!1)},So-To)};return _o.on(_VreoUnit$7.VreoKeyframeEnum.InfoPanel,bo),function(){_o.off(_VreoUnit$7.VreoKeyframeEnum.InfoPanel,bo),va.current&&clearTimeout(va.current)}}},[_o]),React$d.createElement(React$d.Fragment,null)}var ModelVideo$1={},ModelTVVideoPlugin$1={};function _typeof$l(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$l=function(xo){return typeof xo}:_typeof$l=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$l(va)}Object.defineProperty(ModelTVVideoPlugin$1,"__esModule",{value:!0});ModelTVVideoPlugin$1.ModelTVVideoPlugin=void 0;var THREE$6=_interopRequireWildcard$j(require$$1);function _getRequireWildcardCache$j(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$j=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$j(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$l(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$j(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _slicedToArray$8(va,_o){return _arrayWithHoles$8(va)||_iterableToArrayLimit$8(va,_o)||_unsupportedIterableToArray$8(va,_o)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$8(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$8(va,_o)}}function _arrayLikeToArray$8(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$8(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$8(va){if(Array.isArray(va))return va}function asyncGeneratorStep$9(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$9(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$9(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$9(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}var ModelTVVideoPlugin=function va(_o,xo){var bo=xo.videoElement,wo={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:bo},Eo=function(Ro){wo.videoTexture&&(wo.videoTexture.image.muted=Ro,wo.videoTexture.image.play())},To=function(){return wo.videoTexture?wo.videoTexture.image.muted:!0},So=function(){if(!wo.enabled&&!!wo.videoTexture){wo.enabled=!0,wo.videoMeshes=Do(),wo.videoMeshes.forEach(function(jo){return _o.scene.add(jo)});var Ro=function(){if(!!wo.videoTexture){var zo=function Io(){var Po;!wo.videoTexture||((Po=wo.videoTexture)===null||Po===void 0||Po.image.removeEventListener("timeupdate",Io),wo.videoTextureEnabled=!0,wo.videoMeshes.forEach(function(Bo){Bo.material.map!==wo.videoTexture&&(Bo.material.map=wo.videoTexture)}),_o.needsRender=!0)};wo.videoTexture.image.addEventListener("timeupdate",zo),wo.videoTexture&&wo.videoMeshes.length&&wo.videoTexture.image.play()}};if(_o.model.loaded)Ro();else return _o.once("modelLoaded",function(){return Ro()})}},$o=function(){!wo.enabled||(wo.enabled=!1,wo.videoMeshes.forEach(function(Ro){Ro.geometry.dispose(),Ro.material.dispose(),_o.scene.remove(Ro),wo.videoTexture&&wo.videoTexture.image.pause()}),wo.videoMeshes=[],_o.needsRender=!0)},Do=function(){return wo.rectPoints.map(function(Ro,jo){var zo=new THREE$6.BufferGeometry,Io=128,Po=[];Po.push(Ro[0].x,Ro[0].y,Ro[0].z);for(var Bo=1;Bo<Io;Bo++)Po.push(Ro[0].x+(Ro[1].x-Ro[0].x)*Bo/Io,Ro[0].y+(Ro[1].y-Ro[0].y)*Bo/Io,Ro[0].z+(Ro[1].z-Ro[0].z)*Bo/Io);Po.push(Ro[1].x,Ro[1].y,Ro[1].z),Po.push(Ro[2].x,Ro[2].y,Ro[2].z);for(var ko=1;ko<Io;ko++)Po.push(Ro[2].x+(Ro[3].x-Ro[2].x)*ko/Io,Ro[2].y+(Ro[3].y-Ro[2].y)*ko/Io,Ro[2].z+(Ro[3].z-Ro[2].z)*ko/Io);Po.push(Ro[3].x,Ro[3].y,Ro[3].z);var Uo=[];Uo.push(0,1);for(var Qo=1;Qo<Io;Qo++)Uo.push(0,1-Qo/Io);Uo.push(0,0),Uo.push(1,0);for(var qo=1;qo<Io;qo++)Uo.push(1,qo/Io);Uo.push(1,1);for(var Zo=[],Xo=0;Xo<Io;Xo++)Zo.push(Xo,Xo+1,Io*2-Xo,Xo,Io*2-Xo,Io*2+1-Xo);zo.setAttribute("position",new THREE$6.BufferAttribute(new Float32Array(Po),3)),zo.setAttribute("uv",new THREE$6.BufferAttribute(new Float32Array(Uo),2)),zo.setIndex(new THREE$6.BufferAttribute(new Uint32Array(Zo),1));var Fo=new THREE$6.MeshBasicMaterial({map:wo.videoTextureEnabled?wo.videoTexture:wo.imageTexture,side:THREE$6.DoubleSide}),Go=new THREE$6.Mesh(zo,Fo);return Go.renderOrder=1,Go.name="video-".concat(jo,"-").concat(performance.now()),Go})},No=function(Ro){var jo=new THREE$6.TextureLoader().load(Ro);return jo.minFilter=THREE$6.LinearFilter,jo.magFilter=THREE$6.LinearFilter,jo.format=THREE$6.RGBFormat,jo},Oo=function(Ro,jo){return new Promise(function(zo,Io){var Po=new XMLHttpRequest;Po.onreadystatechange=function(){if(Po.readyState==4)if(Po.status==200){var Bo=window.URL||window.webkitURL;jo=jo||document.createElement("video"),jo.crossOrigin="anonymous",jo.autoplay=!0,jo.muted=!0,jo.loop=!0,jo.playsInline=!0,jo.src=Bo.createObjectURL(Po.response);var ko=new THREE$6.VideoTexture(jo);ko.minFilter=THREE$6.LinearFilter,ko.magFilter=THREE$6.LinearFilter,ko.format=THREE$6.RGBFormat,zo(Object.assign(ko,{videoSource:Ro}))}else Io(new Error("Video download Error: "+Po.status))},Po.onerror=function(Bo){return Io(Bo)},Po.open("GET",Ro),Po.responseType="blob",Po.send()})},Lo=function(){var Co=_asyncToGenerator$9(regeneratorRuntime.mark(function Ro(jo,zo){var Io,Po,Bo;return regeneratorRuntime.wrap(function(Uo){for(;;)switch(Uo.prev=Uo.next){case 0:return Io=jo.video_src,Po=jo.video_poster_src,Bo=jo.points,wo.videoSource=Io,wo.rectPoints=Bo.map(function(Qo){return Qo.map(function(qo){var Zo=qo.x,Xo=qo.y,Fo=qo.z;return new THREE$6.Vector3(Zo,Xo,Fo)})}),wo.imageTexture=No(Po),zo&&(wo.videoElement=zo),Uo.next=7,Oo(wo.videoSource,wo.videoElement);case 7:wo.videoTexture=Uo.sent,wo.enabled=!!jo.enable,wo.enabled&&So();case 10:case"end":return Uo.stop()}},Ro)}));return function(jo,zo){return Co.apply(this,arguments)}}();return _o.on("modeChange",function(){return Eo(!0)}),_o.on("wantsTapGesture",function(Co){if(!!wo.enabled){var Ro=Co.intersectObjects(_o.scene.children,!0),jo=_slicedToArray$8(Ro,1),zo=jo[0];if(!!zo&&/^video/.test(zo.object.name))return wo.videoTexture&&Eo(!wo.videoTexture.image.muted),!1}}),_o.on("panoArrived",function(){if(!!wo.enabled&&!To()){var Co=_o.camera.position,Ro=wo.rectPoints.find(function(jo){var zo=jo.reduce(function(Io,Po){return new THREE$6.Vector3(Io.x+Po.x/jo.length,Io.y+Po.y/jo.length,Io.z+Po.z/jo.length)},new THREE$6.Vector3);return jo.map(function(Io){return new THREE$6.Vector3((Io.x+zo.x)/2,(Io.y+zo.y)/2,(Io.z+zo.z)/2)}).filter(function(Io){Io=Io.clone().sub(Co).normalize();var Po=new THREE$6.Raycaster(Co,Io),Bo=Po.intersectObjects(_o.scene.children,!0),ko=_slicedToArray$8(Bo,1),Uo=ko[0];return!!Uo&&/^video/.test(Uo.object.name)}).length>=2});Ro||Eo(!0)}}),_o.on("renderFrame",function(){wo.videoMeshes.forEach(function(Co){Co&&(Co.needsRender=!0)})}),_o.on("load",function(Co){Co.modelTVVideoData&&Lo(Co.modelTVVideoData)}),{enable:So,disable:$o,load:Lo}};ModelTVVideoPlugin$1.ModelTVVideoPlugin=ModelTVVideoPlugin;function _typeof$k(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$k=function(xo){return typeof xo}:_typeof$k=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$k(va)}Object.defineProperty(ModelVideo$1,"__esModule",{value:!0});ModelVideo$1.ModelVideo=ModelVideo;var React$c=_interopRequireWildcard$i(react$2.exports),_ModelTVVideoPlugin=ModelTVVideoPlugin$1,_VreoUnit$6=VreoUnit,_hooks$9=hooks;function _getRequireWildcardCache$i(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$i=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$i(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$k(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$i(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function asyncGeneratorStep$8(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$8(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$8(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$8(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function ModelVideo(){var va=(0,_hooks$9.useController)(),_o=(0,_hooks$9.useFiveInstance)(),xo=React$c.useRef(),bo=React$c.useRef();return React$c.useEffect(function(){var wo=function(){var Eo=_asyncToGenerator$8(regeneratorRuntime.mark(function To(So){var $o,Do,No,Oo,Lo,Co,Ro,jo;return regeneratorRuntime.wrap(function(Io){for(;;)switch(Io.prev=Io.next){case 0:return xo.current||(xo.current=(0,_ModelTVVideoPlugin.ModelTVVideoPlugin)(_o,{})),No=So.start,Oo=So.end,Lo=So.data,Co=Lo.videoSrc,Ro=Lo.videoPosterSrc,jo=Lo.vertexs,xo.current.disable(),Io.next=6,xo.current.load({video_src:Co.replace(/https*:/,""),video_poster_src:Ro.replace(/https*:/,""),points:[jo]},($o=va.configs)===null||$o===void 0||(Do=$o.videos)===null||Do===void 0?void 0:Do.modelTVVideo);case 6:xo.current.enable(),bo.current=setTimeout(function(){var Po;return(Po=xo.current)===null||Po===void 0?void 0:Po.disable()},Oo-No);case 8:case"end":return Io.stop()}},To)}));return function(So){return Eo.apply(this,arguments)}}();return va.on(_VreoUnit$6.VreoKeyframeEnum.ModelVideo,wo),function(){va.off(_VreoUnit$6.VreoKeyframeEnum.ModelVideo,wo),bo.current&&clearTimeout(bo.current)}},[va]),React$c.createElement(React$c.Fragment,null)}var PanoEffect$1={},lineAnime={},line={};Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(va){if(va&&va.__esModule)return va;var _o=Object.create(null);return va&&Object.keys(va).forEach(function(xo){if(xo!=="default"){var bo=Object.getOwnPropertyDescriptor(va,xo);Object.defineProperty(_o,xo,bo.get?bo:{enumerable:!0,get:function(){return va[xo]}})}}),_o.default=va,Object.freeze(_o)}var n=e(require$$1),i=function(va){function _o(){var xo=va.call(this)||this;return xo.type="LineSegmentsGeometry",xo.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),xo.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),xo.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),xo}return t$1.__extends(_o,va),_o.prototype.applyMatrix4=function(xo){var bo=this.attributes.instanceStart,wo=this.attributes.instanceEnd;return bo!==void 0&&(bo.applyMatrix4(xo),wo.applyMatrix4(xo),bo.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},_o.prototype.setPositions=function(xo){var bo;bo=xo instanceof Float32Array?xo:Array.isArray(xo)?new Float32Array(xo):new Float32Array;var wo=new n.InstancedInterleavedBuffer(bo,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(wo,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(wo,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},_o.prototype.setColors=function(xo){var bo;bo=xo instanceof Float32Array?xo:Array.isArray(xo)?new Float32Array(xo):new Float32Array;var wo=new n.InstancedInterleavedBuffer(bo,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(wo,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(wo,3,3)),this},_o.prototype.fromWireframeGeometry=function(xo){return this.setPositions(xo.attributes.position.array),this},_o.prototype.fromEdgesGeometry=function(xo){return this.setPositions(xo.attributes.position.array),this},_o.prototype.fromMesh=function(xo){return this.fromWireframeGeometry(new n.WireframeGeometry(xo.geometry)),this},_o.prototype.fromLineSegments=function(xo){var bo=xo.geometry;if(bo instanceof n.Geometry){var wo=new n.BufferGeometry().fromGeometry(bo);this.setPositions(wo.attributes.position.array)}else bo instanceof n.BufferGeometry&&this.setPositions(bo.attributes.position.array);return this},_o.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var xo=this.attributes.instanceStart,bo=this.attributes.instanceEnd;if(xo!==void 0&&bo!==void 0){var wo=new n.Box3;this.boundingBox.setFromBufferAttribute(xo),wo.setFromBufferAttribute(bo),this.boundingBox.union(wo)}},_o.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var xo=this.attributes.instanceStart,bo=this.attributes.instanceEnd;if(xo!==void 0&&bo!==void 0){var wo=this.boundingSphere.center;this.boundingBox.getCenter(wo);for(var Eo=0,To=new n.Vector3,So=0,$o=xo.count;So<$o;So++)To.fromBufferAttribute(xo,So),Eo=Math.max(Eo,wo.distanceToSquared(To)),To.fromBufferAttribute(bo,So),Eo=Math.max(Eo,wo.distanceToSquared(To));this.boundingSphere.radius=Math.sqrt(Eo),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},_o.prototype.toJSON=function(){},_o}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(va){function _o(xo){var bo=va.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return bo.type="LineMaterial",bo.dashed=!1,Object.defineProperties(bo,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(wo){this.uniforms.diffuse.value=wo}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(wo){this.uniforms.linewidth.value=wo}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(wo){this.uniforms.dashScale.value=wo}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(wo){this.uniforms.dashSize.value=wo}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(wo){this.uniforms.gapSize.value=wo}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(wo){this.uniforms.opacity.value=wo}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(wo){this.uniforms.resolution.value.copy(wo)}}}),bo.setValues(xo),bo}return t$1.__extends(_o,va),_o}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(va){function _o(xo,bo){var wo=va.call(this)||this;return wo.type="LineSegments2",wo.geometry=xo!==void 0?xo:new i,wo.material=bo!==void 0?bo:new o({color:16777215*Math.random()}),wo}return t$1.__extends(_o,va),_o.prototype.computeLineDistances=function(){for(var xo=this.geometry,bo=xo.attributes.instanceStart,wo=xo.attributes.instanceEnd,Eo=new Float32Array(2*bo.count),To=new n.Vector3,So=new n.Vector3,$o=0,Do=0,No=bo.count;$o<No;$o++,Do+=2)To.fromBufferAttribute(bo,$o),So.fromBufferAttribute(wo,$o),Eo[Do]=Do===0?0:Eo[Do-1],Eo[Do+1]=Eo[Do]+To.distanceTo(So);var Oo=new n.InstancedInterleavedBuffer(Eo,2,1);return xo.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Oo,1,0)),xo.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Oo,1,1)),this},_o.prototype.raycast=function(xo,bo){xo.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var wo=xo.ray,Eo=xo.camera,To=Eo.projectionMatrix,So=this.geometry,$o=this.material,Do=$o.resolution,No=$o.linewidth,Oo=So.attributes.instanceStart,Lo=So.attributes.instanceEnd,Co=new n.Vector4,Ro=new n.Vector4,jo=new n.Vector4,zo=new n.Vector3,Io=new n.Matrix4,Po=new n.Line3,Bo=new n.Vector3;wo.at(1,jo),jo.w=1,jo.applyMatrix4(Eo.matrixWorldInverse),jo.applyMatrix4(To),jo.multiplyScalar(1/jo.w),jo.x*=Do.x/2,jo.y*=Do.y/2,jo.z=0,zo.copy(jo);var ko=this.matrixWorld;Io.multiplyMatrices(Eo.matrixWorldInverse,ko);for(var Uo=0,Qo=Oo.count;Uo<Qo;Uo++){Co.fromBufferAttribute(Oo,Uo),Ro.fromBufferAttribute(Lo,Uo),Co.w=1,Ro.w=1,Co.applyMatrix4(Io),Ro.applyMatrix4(Io),Co.applyMatrix4(To),Ro.applyMatrix4(To),Co.multiplyScalar(1/Co.w),Ro.multiplyScalar(1/Ro.w);var qo=Co.z<-1&&Ro.z<-1,Zo=Co.z>1&&Ro.z>1;if(!qo&&!Zo){Co.x*=Do.x/2,Co.y*=Do.y/2,Ro.x*=Do.x/2,Ro.y*=Do.y/2,Po.start.copy(Co),Po.start.z=0,Po.end.copy(Ro),Po.end.z=0;var Xo=Po.closestPointToPointParameter(zo,!0);Po.at(Xo,Bo);var Fo=n.MathUtils.lerp(Co.z,Ro.z,Xo),Go=Fo>=-1&&Fo<=1,Vo=zo.distanceTo(Bo)<.5*No;if(Go&&Vo){Po.start.fromBufferAttribute(Oo,Uo),Po.end.fromBufferAttribute(Lo,Uo),Po.start.applyMatrix4(ko),Po.end.applyMatrix4(ko);var Wo=new n.Vector3,Yo=new n.Vector3;wo.distanceSqToSegment(Po.start,Po.end,Yo,Wo),bo.push({point:Yo,pointOnLine:Wo,distance:wo.origin.distanceTo(Yo),object:this,faceIndex:Uo})}}}},_o}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(va){function _o(xo,bo){var wo=va.call(this,xo,bo)||this;return wo.type="Line2",wo}return t$1.__extends(_o,va),_o}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(va){function _o(){var xo=va.call(this)||this;return xo.type="LineGeometry",xo}return t$1.__extends(_o,va),_o.prototype.setPositions=function(xo){for(var bo=xo.length-3,wo=new Float32Array(2*bo),Eo=0;Eo<bo;Eo+=3)wo[2*Eo]=xo[Eo],wo[2*Eo+1]=xo[Eo+1],wo[2*Eo+2]=xo[Eo+2],wo[2*Eo+3]=xo[Eo+3],wo[2*Eo+4]=xo[Eo+4],wo[2*Eo+5]=xo[Eo+5];return va.prototype.setPositions.call(this,wo),this},_o.prototype.setColors=function(xo){for(var bo=xo.length-3,wo=new Float32Array(2*bo),Eo=0;Eo<bo;Eo+=3)wo[2*Eo]=xo[Eo],wo[2*Eo+1]=xo[Eo+1],wo[2*Eo+2]=xo[Eo+2],wo[2*Eo+3]=xo[Eo+3],wo[2*Eo+4]=xo[Eo+4],wo[2*Eo+5]=xo[Eo+5];return va.prototype.setColors.call(this,wo),this},_o.prototype.fromLine=function(xo){var bo=xo.geometry;if(bo instanceof n.Geometry){var wo=new n.BufferGeometry().fromGeometry(bo);this.setPositions(wo.attributes.position.array)}else bo instanceof n.BufferGeometry&&this.setPositions(bo.attributes.position.array);return this},_o.prototype.copy=function(){return this},_o}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(va){function _o(xo,bo){xo===void 0&&(xo=new n.Vector3),bo===void 0&&(bo=new n.Vector3);var wo=va.call(this)||this;wo.type="FiveLine",wo.needsRender=!0;var Eo=new u,To=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});wo.line=new s(Eo,To);var So=new n.BufferGeometry,$o=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return wo.points=new n.Points(So,$o),wo.points.renderOrder=11,wo.points.frustumCulled=!1,wo.setPoints(xo,bo),wo.add(wo.line,wo.points),wo}return t$1.__extends(_o,va),_o.prototype.setPoints=function(xo,bo){var wo=[].concat(xo.toArray(),bo.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(wo),3)),this.line.geometry.setPositions(wo),this.line.computeLineDistances(),this.needsRender=!0},_o.prototype.getPoints=function(){var xo=this.points.geometry.attributes.position.array;return[new n.Vector3(xo[0],xo[1],xo[2]),new n.Vector3(xo[3],xo[4],xo[5])]},_o.prototype.setMaterial=function(xo){var bo=this.line.material;for(var wo in xo)if(xo.hasOwnProperty(wo)){var Eo=xo[wo];wo==="dashed"?(bo.dashed=Eo,Eo?bo.defines.USE_DASH="":delete bo.defines.USE_DASH,bo.needsUpdate=!0):bo[wo]=xo[wo]}this.needsRender=!0},_o.prototype.setResolution=function(xo,bo){var wo=this.line.material.resolution;wo.x===xo&&wo.y===bo||(wo.set(xo,bo),this.needsRender=!0)},_o}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;var BetterTween$3={};function _typeof$j(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$j=function(xo){return typeof xo}:_typeof$j=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$j(va)}Object.defineProperty(BetterTween$3,"__esModule",{value:!0});BetterTween$3.BetterTween=void 0;BetterTween$3.tweenProgress=tweenProgress$1;var _tween$1=_interopRequireDefault$c(require$$0$1),_$1=animationFrame$1;function _interopRequireDefault$c(va){return va&&va.__esModule?va:{default:va}}function _classCallCheck$8(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _inherits$4(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf$5(va,_o)}function _setPrototypeOf$5(va,_o){return _setPrototypeOf$5=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$5(va,_o)}function _createSuper$4(va){var _o=_isNativeReflectConstruct$4();return function(){var bo=_getPrototypeOf$4(va),wo;if(_o){var Eo=_getPrototypeOf$4(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn$4(this,wo)}}function _possibleConstructorReturn$4(va,_o){if(_o&&(_typeof$j(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(va)}function _assertThisInitialized$5(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct$4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$4(va){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf$4(va)}function _defineProperty$6(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var BetterTween$2=function(va){_inherits$4(xo,va);var _o=_createSuper$4(xo);function xo(){var bo;_classCallCheck$8(this,xo);for(var wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return bo=_o.call.apply(_o,[this].concat(Eo)),_defineProperty$6(_assertThisInitialized$5(bo),"disposeMethods",[]),_defineProperty$6(_assertThisInitialized$5(bo),"onDispose",function(So){return bo.disposeMethods.push(So),_assertThisInitialized$5(bo)}),_defineProperty$6(_assertThisInitialized$5(bo),"play",function(){return bo.start(),bo.animationFrameDisposer=(0,_$1.requestAnimationFrameInterval)(function(){return bo.update()}),_assertThisInitialized$5(bo)}),_defineProperty$6(_assertThisInitialized$5(bo),"dispose",function(){var So,$o;bo.stop(),(So=($o=bo).animationFrameDisposer)===null||So===void 0||So.call($o),bo.disposeMethods.forEach(function(Do){return Do()}),bo.disposeMethods=[],_tween$1.default.remove(_assertThisInitialized$5(bo))}),bo}return xo}(_tween$1.default.Tween);BetterTween$3.BetterTween=BetterTween$2;function tweenProgress$1(va){var _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_tween$1.default.Easing.Linear.None,xo=new BetterTween$2({progress:0}).to({progress:1});return va!==void 0&&xo.duration(va),_o!==void 0&&xo.easing(_o),xo}(function(va){function _o($o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(No){return typeof No}:_o=function(No){return No&&typeof Symbol=="function"&&No.constructor===Symbol&&No!==Symbol.prototype?"symbol":typeof No},_o($o)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=So;var xo=To(require$$1),bo=line,wo=BetterTween$3;function Eo($o){if(typeof WeakMap!="function")return null;var Do=new WeakMap,No=new WeakMap;return(Eo=function(Lo){return Lo?No:Do})($o)}function To($o,Do){if(!Do&&$o&&$o.__esModule)return $o;if($o===null||_o($o)!=="object"&&typeof $o!="function")return{default:$o};var No=Eo(Do);if(No&&No.has($o))return No.get($o);var Oo={},Lo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Co in $o)if(Co!=="default"&&Object.prototype.hasOwnProperty.call($o,Co)){var Ro=Lo?Object.getOwnPropertyDescriptor($o,Co):null;Ro&&(Ro.get||Ro.set)?Object.defineProperty(Oo,Co,Ro):Oo[Co]=$o[Co]}return Oo.default=$o,No&&No.set($o,Oo),Oo}function So($o,Do,No){var Oo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Lo=new xo.TextureLoader().load(Oo),Co=new xo.Color(16777215),Ro=new bo.Line;Ro.setMaterial({linewidth:2,color:Co});var jo=Ro.points.material;return jo.map=Lo,jo.color.set(Co),Ro.line.material.depthTest=!1,(0,wo.tweenProgress)().onUpdate(function(zo){var Io=zo.progress,Po=.5-Io/2,Bo=.5+Io/2,ko=Do.clone().lerp(No,Po),Uo=Do.clone().lerp(No,Bo);Ro.setPoints(ko,Uo)}).onStart(function(){return $o.scene.add(Ro)}).onDispose(function(){$o.scene.remove(Ro),$o.needsRender=!0})}})(lineAnime);function _typeof$i(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$i=function(xo){return typeof xo}:_typeof$i=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$i(va)}Object.defineProperty(PanoEffect$1,"__esModule",{value:!0});PanoEffect$1.PanoEffect=PanoEffect;var React$b=_interopRequireWildcard$h(react$2.exports),_three$3=require$$1,_classnames$6=_interopRequireDefault$b(classnames.exports),_lineAnime=_interopRequireDefault$b(lineAnime),_hooks$8=hooks,_VreoUnit$5=VreoUnit;function _interopRequireDefault$b(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$h(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$h=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$h(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$i(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$h(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _slicedToArray$7(va,_o){return _arrayWithHoles$7(va)||_iterableToArrayLimit$7(va,_o)||_unsupportedIterableToArray$7(va,_o)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$7(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$7(va,_o)}}function _arrayLikeToArray$7(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$7(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$7(va){if(Array.isArray(va))return va}function PanoEffect(){var va=React$b.useState(null),_o=_slicedToArray$7(va,2),xo=_o[0],bo=_o[1],wo=(0,_hooks$8.useFiveInstance)(),Eo=React$b.useRef(null),To=React$b.useState(null),So=_slicedToArray$7(To,2),$o=So[0],Do=So[1],No=React$b.useRef(),Oo=(0,_hooks$8.useController)(),Lo=(0,_hooks$8.useFiveProject2d)(),Co=function(){Eo.current&&Eo.current.dispose()};return React$b.useEffect(function(){var Ro=function(zo){var Io=zo.start,Po=zo.end,Bo=zo.data,ko=Bo,Uo=_slicedToArray$7(ko.twoVertexs,2),Qo=Uo[0],qo=Uo[1],Zo=new _three$3.Vector3(Qo.x,Qo.y,Qo.z),Xo=new _three$3.Vector3(qo.x,qo.y,qo.z);Eo.current=(0,_lineAnime.default)(wo,Zo.clone(),Xo.clone()),Eo.current.play();var Fo=Zo.lerp(Xo,.5),Go=Zo.distanceTo(Xo),Vo=Lo(Fo);if(!!Vo){var Wo=Vo.x,Yo=Vo.y;bo({center:Fo,distance:Go}),Do({left:Wo,top:Yo}),No.current=setTimeout(function(){bo(null),Do(null),Co()},Po-Io)}};return Oo.on(_VreoUnit$5.VreoKeyframeEnum.PanoEffect,Ro),function(){Oo.off(_VreoUnit$5.VreoKeyframeEnum.PanoEffect,Ro),No.current&&clearTimeout(No.current),Co()}},[Oo]),React$b.useEffect(function(){var Ro=function(){if(!!(xo!=null&&xo.center)){var zo=xo.center,Io=zo.x,Po=zo.y,Bo=zo.z,ko=Lo(new _three$3.Vector3(Io,Po,Bo));if(!!ko){var Uo=ko.x,Qo=ko.y;Do({left:Uo,top:Qo})}}};return wo.on("currentStateChange",Ro),function(){wo.off("currentStateChange",Ro)}},[xo==null?void 0:xo.center]),React$b.createElement(React$b.Fragment,null,React$b.createElement("div",{className:(0,_classnames$6.default)("PanoEffect",{"PanoEffect--notHidden":xo}),style:{left:(($o==null?void 0:$o.left)||0)+"px",top:(($o==null?void 0:$o.top)||0)+"px"}},(xo==null?void 0:xo.distance.toFixed(4))+"m"))}var PanoTag$1={};function _typeof$h(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$h=function(xo){return typeof xo}:_typeof$h=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$h(va)}Object.defineProperty(PanoTag$1,"__esModule",{value:!0});PanoTag$1.PanoTag=PanoTag;var _classnames$5=_interopRequireDefault$a(classnames.exports),React$a=_interopRequireWildcard$g(react$2.exports),_three$2=require$$1,_hooks$7=hooks,_VreoUnit$4=VreoUnit;function _getRequireWildcardCache$g(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$g=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$g(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$h(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$g(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _interopRequireDefault$a(va){return va&&va.__esModule?va:{default:va}}function _slicedToArray$6(va,_o){return _arrayWithHoles$6(va)||_iterableToArrayLimit$6(va,_o)||_unsupportedIterableToArray$6(va,_o)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$6(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$6(va,_o)}}function _arrayLikeToArray$6(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$6(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$6(va){if(Array.isArray(va))return va}function PanoTag(){var va=React$a.useState(null),_o=_slicedToArray$6(va,2),xo=_o[0],bo=_o[1],wo=React$a.useState(null),Eo=_slicedToArray$6(wo,2),To=Eo[0],So=Eo[1],$o=React$a.useRef(),Do=(0,_hooks$7.useController)(),No=(0,_hooks$7.useFiveInstance)(),Oo=(0,_hooks$7.useFiveProject2d)();React$a.useEffect(function(){var Co;if(((Co=Do.configs)===null||Co===void 0?void 0:Co.keyframeMap.PanoTag)!==!1){var Ro=function(zo){var Io=zo.start,Po=zo.end,Bo=zo.data,ko=Bo,Uo=ko.vertex,Qo=ko.vertex,qo=Qo.x,Zo=Qo.y,Xo=Qo.z,Fo=Oo(new _three$2.Vector3(qo,Zo,Xo));if(!!Fo){var Go=Fo.x,Vo=Fo.y;bo({vertex:Uo,text:ko.text||_VreoUnit$4.PanoTagEnum.Text,type:ko.type,imgUrl:ko.imgUrl}),So({left:Go,top:Vo}),$o.current=setTimeout(function(){bo(null),So(null)},Po-Io)}};return Do.on(_VreoUnit$4.VreoKeyframeEnum.PanoTag,Ro),function(){Do.off(_VreoUnit$4.VreoKeyframeEnum.PanoTag,Ro),$o.current&&clearTimeout($o.current)}}},[Do]),React$a.useEffect(function(){var Co=function(){if(!!(xo!=null&&xo.vertex)){var jo=xo.vertex,zo=jo.x,Io=jo.y,Po=jo.z,Bo=Oo(new _three$2.Vector3(zo,Io,Po));if(!!Bo){var ko=Bo.x,Uo=Bo.y;So({left:ko,top:Uo})}}};return No.on("currentStateChange",Co),function(){No.off("currentStateChange",Co)}},[xo==null?void 0:xo.vertex]);var Lo=function(){if(!!xo){if(xo.type===_VreoUnit$4.PanoTagEnum.Text)return React$a.createElement(React$a.Fragment,null,React$a.createElement("span",null,xo.text));if(xo.type===_VreoUnit$4.PanoTagEnum.Image)return React$a.createElement(React$a.Fragment,null,React$a.createElement("img",{className:"PanoTag-img",src:xo.imgUrl,alt:xo.text||""}),React$a.createElement("span",{className:"PanoTag-txt"},xo.text))}}();return React$a.createElement(React$a.Fragment,null,React$a.createElement("div",{className:(0,_classnames$5.default)("PanoTag",{"PanoTag--notHidden":xo}),style:{left:((To==null?void 0:To.left)||0)+"px",top:((To==null?void 0:To.top)||0)+"px"}},React$a.createElement("div",{className:"PanoTag-point"}),React$a.createElement("div",{className:"PanoTag-content"},React$a.createElement("span",{className:"PanoTag-linewrap"},React$a.createElement("span",{className:"PanoTag-slashline"}),React$a.createElement("span",{className:"PanoTag-straightline"})),React$a.createElement("div",{onClick:function(){xo!=null&&xo.imgUrl},className:"PanoTag-box PanoTag-box--"+((xo==null?void 0:xo.type)||"")},Lo))))}var PanoTextLabel$1={};function _typeof$g(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$g=function(xo){return typeof xo}:_typeof$g=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$g(va)}Object.defineProperty(PanoTextLabel$1,"__esModule",{value:!0});PanoTextLabel$1.PanoTextLabel=PanoTextLabel;var _classnames$4=_interopRequireDefault$9(classnames.exports),React$9=_interopRequireWildcard$f(react$2.exports),_three$1=require$$1,_VreoUnit$3=VreoUnit,_hooks$6=hooks;function _getRequireWildcardCache$f(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$f=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$f(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$g(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$f(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _interopRequireDefault$9(va){return va&&va.__esModule?va:{default:va}}function _slicedToArray$5(va,_o){return _arrayWithHoles$5(va)||_iterableToArrayLimit$5(va,_o)||_unsupportedIterableToArray$5(va,_o)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$5(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$5(va,_o)}}function _arrayLikeToArray$5(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$5(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$5(va){if(Array.isArray(va))return va}function PanoTextLabel(){var va=React$9.useState(null),_o=_slicedToArray$5(va,2),xo=_o[0],bo=_o[1],wo=React$9.useRef(),Eo=(0,_hooks$6.useController)(),To=(0,_hooks$6.useFiveProject2d)();return React$9.useEffect(function(){var So;if(((So=Eo.configs)===null||So===void 0?void 0:So.keyframeMap.PanoTextLabel)!==!1){var $o=function(No){var Oo=No.start,Lo=No.end,Co=No.data,Ro=Co,jo=Ro.vertex,zo=jo.x,Io=jo.y,Po=jo.z,Bo=To(new _three$1.Vector3(zo,Io,Po));if(!!Bo){var ko=Bo.x,Uo=Bo.y;Object.assign(window,{$PanoTextLabel:{setState:bo}}),bo({left:ko,top:Uo,text:Co.text||"",fontSize:Co.fontSize||16}),wo.current=setTimeout(function(){return bo(null)},Lo-Oo)}};return Eo.on(_VreoUnit$3.VreoKeyframeEnum.PanoTextLabel,$o),Object.assign(window,{$panoTextLabel:{setState:bo}}),function(){Eo.off(_VreoUnit$3.VreoKeyframeEnum.PanoTextLabel,$o),wo.current&&clearTimeout(wo.current)}}},[Eo]),React$9.createElement("div",{className:(0,_classnames$4.default)("PanoTextLabel",{"PanoTextLabel--notHidden":xo}),style:{left:((xo==null?void 0:xo.left)||0)+"px",top:((xo==null?void 0:xo.top)||0)+"px"}},React$9.createElement("div",{className:"PanoTextLabel-wrapper"},React$9.createElement("div",{style:{fontSize:"".concat((xo==null?void 0:xo.fontSize)||16,"px")},className:"PanoText-innerText"},(xo==null?void 0:xo.text)||"")))}var Prompter$1={};function _extends(){return _extends=Object.assign||function(va){for(var _o=1;_o<arguments.length;_o++){var xo=arguments[_o];for(var bo in xo)Object.prototype.hasOwnProperty.call(xo,bo)&&(va[bo]=xo[bo])}return va},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(va,_o){if(va==null)return{};var xo={},bo=Object.keys(va),wo,Eo;for(Eo=0;Eo<bo.length;Eo++)wo=bo[Eo],!(_o.indexOf(wo)>=0)&&(xo[wo]=va[wo]);return xo}function _setPrototypeOf$4(va,_o){return _setPrototypeOf$4=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$4(va,_o)}function _inheritsLoose(va,_o){va.prototype=Object.create(_o.prototype),va.prototype.constructor=va,_setPrototypeOf$4(va,_o)}var ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function va(bo,wo,Eo,To,So,$o){if($o!==ReactPropTypesSecret){var Do=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Do.name="Invariant Violation",Do}}va.isRequired=va;function _o(){return va}var xo={array:va,bool:va,func:va,number:va,object:va,string:va,symbol:va,any:va,arrayOf:_o,element:va,elementType:va,instanceOf:_o,node:va,objectOf:_o,oneOf:_o,oneOfType:_o,shape:_o,exact:_o,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return xo.PropTypes=xo,xo};factoryWithThrowingShims();function hasClass(va,_o){return va.classList?!!_o&&va.classList.contains(_o):(" "+(va.className.baseVal||va.className)+" ").indexOf(" "+_o+" ")!==-1}function addClass(va,_o){va.classList?va.classList.add(_o):hasClass(va,_o)||(typeof va.className=="string"?va.className=va.className+" "+_o:va.setAttribute("class",(va.className&&va.className.baseVal||"")+" "+_o))}function replaceClassName(va,_o){return va.replace(new RegExp("(^|\\s)"+_o+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(va,_o){va.classList?va.classList.remove(_o):typeof va.className=="string"?va.className=replaceClassName(va.className,_o):va.setAttribute("class",replaceClassName(va.className&&va.className.baseVal||"",_o))}var config={disabled:!1},TransitionGroupContext=React$g.createContext(null),UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(va){_inheritsLoose(_o,va);function _o(bo,wo){var Eo;Eo=va.call(this,bo,wo)||this;var To=wo,So=To&&!To.isMounting?bo.enter:bo.appear,$o;return Eo.appearStatus=null,bo.in?So?($o=EXITED,Eo.appearStatus=ENTERING):$o=ENTERED:bo.unmountOnExit||bo.mountOnEnter?$o=UNMOUNTED:$o=EXITED,Eo.state={status:$o},Eo.nextCallback=null,Eo}_o.getDerivedStateFromProps=function(wo,Eo){var To=wo.in;return To&&Eo.status===UNMOUNTED?{status:EXITED}:null};var xo=_o.prototype;return xo.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},xo.componentDidUpdate=function(wo){var Eo=null;if(wo!==this.props){var To=this.state.status;this.props.in?To!==ENTERING&&To!==ENTERED&&(Eo=ENTERING):(To===ENTERING||To===ENTERED)&&(Eo=EXITING)}this.updateStatus(!1,Eo)},xo.componentWillUnmount=function(){this.cancelNextCallback()},xo.getTimeouts=function(){var wo=this.props.timeout,Eo,To,So;return Eo=To=So=wo,wo!=null&&typeof wo!="number"&&(Eo=wo.exit,To=wo.enter,So=wo.appear!==void 0?wo.appear:To),{exit:Eo,enter:To,appear:So}},xo.updateStatus=function(wo,Eo){wo===void 0&&(wo=!1),Eo!==null?(this.cancelNextCallback(),Eo===ENTERING?this.performEnter(wo):this.performExit()):this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},xo.performEnter=function(wo){var Eo=this,To=this.props.enter,So=this.context?this.context.isMounting:wo,$o=this.props.nodeRef?[So]:[ReactDOM$1.findDOMNode(this),So],Do=$o[0],No=$o[1],Oo=this.getTimeouts(),Lo=So?Oo.appear:Oo.enter;if(!wo&&!To||config.disabled){this.safeSetState({status:ENTERED},function(){Eo.props.onEntered(Do)});return}this.props.onEnter(Do,No),this.safeSetState({status:ENTERING},function(){Eo.props.onEntering(Do,No),Eo.onTransitionEnd(Lo,function(){Eo.safeSetState({status:ENTERED},function(){Eo.props.onEntered(Do,No)})})})},xo.performExit=function(){var wo=this,Eo=this.props.exit,To=this.getTimeouts(),So=this.props.nodeRef?void 0:ReactDOM$1.findDOMNode(this);if(!Eo||config.disabled){this.safeSetState({status:EXITED},function(){wo.props.onExited(So)});return}this.props.onExit(So),this.safeSetState({status:EXITING},function(){wo.props.onExiting(So),wo.onTransitionEnd(To.exit,function(){wo.safeSetState({status:EXITED},function(){wo.props.onExited(So)})})})},xo.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},xo.safeSetState=function(wo,Eo){Eo=this.setNextCallback(Eo),this.setState(wo,Eo)},xo.setNextCallback=function(wo){var Eo=this,To=!0;return this.nextCallback=function(So){To&&(To=!1,Eo.nextCallback=null,wo(So))},this.nextCallback.cancel=function(){To=!1},this.nextCallback},xo.onTransitionEnd=function(wo,Eo){this.setNextCallback(Eo);var To=this.props.nodeRef?this.props.nodeRef.current:ReactDOM$1.findDOMNode(this),So=wo==null&&!this.props.addEndListener;if(!To||So){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var $o=this.props.nodeRef?[this.nextCallback]:[To,this.nextCallback],Do=$o[0],No=$o[1];this.props.addEndListener(Do,No)}wo!=null&&setTimeout(this.nextCallback,wo)},xo.render=function(){var wo=this.state.status;if(wo===UNMOUNTED)return null;var Eo=this.props,To=Eo.children;Eo.in,Eo.mountOnEnter,Eo.unmountOnExit,Eo.appear,Eo.enter,Eo.exit,Eo.timeout,Eo.addEndListener,Eo.onEnter,Eo.onEntering,Eo.onEntered,Eo.onExit,Eo.onExiting,Eo.onExited,Eo.nodeRef;var So=_objectWithoutPropertiesLoose(Eo,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$g.createElement(TransitionGroupContext.Provider,{value:null},typeof To=="function"?To(wo,So):React$g.cloneElement(React$g.Children.only(To),So))},_o}(React$g.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;var Transition$1=Transition,_addClass=function va(_o,xo){return _o&&xo&&xo.split(" ").forEach(function(bo){return addClass(_o,bo)})},removeClass=function va(_o,xo){return _o&&xo&&xo.split(" ").forEach(function(bo){return removeClass$1(_o,bo)})},CSSTransition=function(va){_inheritsLoose(_o,va);function _o(){for(var bo,wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return bo=va.call.apply(va,[this].concat(Eo))||this,bo.appliedClasses={appear:{},enter:{},exit:{}},bo.onEnter=function(So,$o){var Do=bo.resolveArguments(So,$o),No=Do[0],Oo=Do[1];bo.removeClasses(No,"exit"),bo.addClass(No,Oo?"appear":"enter","base"),bo.props.onEnter&&bo.props.onEnter(So,$o)},bo.onEntering=function(So,$o){var Do=bo.resolveArguments(So,$o),No=Do[0],Oo=Do[1],Lo=Oo?"appear":"enter";bo.addClass(No,Lo,"active"),bo.props.onEntering&&bo.props.onEntering(So,$o)},bo.onEntered=function(So,$o){var Do=bo.resolveArguments(So,$o),No=Do[0],Oo=Do[1],Lo=Oo?"appear":"enter";bo.removeClasses(No,Lo),bo.addClass(No,Lo,"done"),bo.props.onEntered&&bo.props.onEntered(So,$o)},bo.onExit=function(So){var $o=bo.resolveArguments(So),Do=$o[0];bo.removeClasses(Do,"appear"),bo.removeClasses(Do,"enter"),bo.addClass(Do,"exit","base"),bo.props.onExit&&bo.props.onExit(So)},bo.onExiting=function(So){var $o=bo.resolveArguments(So),Do=$o[0];bo.addClass(Do,"exit","active"),bo.props.onExiting&&bo.props.onExiting(So)},bo.onExited=function(So){var $o=bo.resolveArguments(So),Do=$o[0];bo.removeClasses(Do,"exit"),bo.addClass(Do,"exit","done"),bo.props.onExited&&bo.props.onExited(So)},bo.resolveArguments=function(So,$o){return bo.props.nodeRef?[bo.props.nodeRef.current,So]:[So,$o]},bo.getClassNames=function(So){var $o=bo.props.classNames,Do=typeof $o=="string",No=Do&&$o?$o+"-":"",Oo=Do?""+No+So:$o[So],Lo=Do?Oo+"-active":$o[So+"Active"],Co=Do?Oo+"-done":$o[So+"Done"];return{baseClassName:Oo,activeClassName:Lo,doneClassName:Co}},bo}var xo=_o.prototype;return xo.addClass=function(wo,Eo,To){var So=this.getClassNames(Eo)[To+"ClassName"],$o=this.getClassNames("enter"),Do=$o.doneClassName;Eo==="appear"&&To==="done"&&Do&&(So+=" "+Do),To==="active"&&wo&&wo.scrollTop,So&&(this.appliedClasses[Eo][To]=So,_addClass(wo,So))},xo.removeClasses=function(wo,Eo){var To=this.appliedClasses[Eo],So=To.base,$o=To.active,Do=To.done;this.appliedClasses[Eo]={},So&&removeClass(wo,So),$o&&removeClass(wo,$o),Do&&removeClass(wo,Do)},xo.render=function(){var wo=this.props;wo.classNames;var Eo=_objectWithoutPropertiesLoose(wo,["classNames"]);return React$g.createElement(Transition$1,_extends({},Eo,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},_o}(React$g.Component);CSSTransition.defaultProps={classNames:""};CSSTransition.propTypes={};var CSSTransition$1=CSSTransition;function _assertThisInitialized$4(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function getChildMapping(va,_o){var xo=function(Eo){return _o&&react$2.exports.isValidElement(Eo)?_o(Eo):Eo},bo=Object.create(null);return va&&react$2.exports.Children.map(va,function(wo){return wo}).forEach(function(wo){bo[wo.key]=xo(wo)}),bo}function mergeChildMappings(va,_o){va=va||{},_o=_o||{};function xo(No){return No in _o?_o[No]:va[No]}var bo=Object.create(null),wo=[];for(var Eo in va)Eo in _o?wo.length&&(bo[Eo]=wo,wo=[]):wo.push(Eo);var To,So={};for(var $o in _o){if(bo[$o])for(To=0;To<bo[$o].length;To++){var Do=bo[$o][To];So[bo[$o][To]]=xo(Do)}So[$o]=xo($o)}for(To=0;To<wo.length;To++)So[wo[To]]=xo(wo[To]);return So}function getProp(va,_o,xo){return xo[_o]!=null?xo[_o]:va.props[_o]}function getInitialChildMapping(va,_o){return getChildMapping(va.children,function(xo){return react$2.exports.cloneElement(xo,{onExited:_o.bind(null,xo),in:!0,appear:getProp(xo,"appear",va),enter:getProp(xo,"enter",va),exit:getProp(xo,"exit",va)})})}function getNextChildMapping(va,_o,xo){var bo=getChildMapping(va.children),wo=mergeChildMappings(_o,bo);return Object.keys(wo).forEach(function(Eo){var To=wo[Eo];if(!!react$2.exports.isValidElement(To)){var So=Eo in _o,$o=Eo in bo,Do=_o[Eo],No=react$2.exports.isValidElement(Do)&&!Do.props.in;$o&&(!So||No)?wo[Eo]=react$2.exports.cloneElement(To,{onExited:xo.bind(null,To),in:!0,exit:getProp(To,"exit",va),enter:getProp(To,"enter",va)}):!$o&&So&&!No?wo[Eo]=react$2.exports.cloneElement(To,{in:!1}):$o&&So&&react$2.exports.isValidElement(Do)&&(wo[Eo]=react$2.exports.cloneElement(To,{onExited:xo.bind(null,To),in:Do.props.in,exit:getProp(To,"exit",va),enter:getProp(To,"enter",va)}))}}),wo}var values=Object.values||function(va){return Object.keys(va).map(function(_o){return va[_o]})},defaultProps={component:"div",childFactory:function va(_o){return _o}},TransitionGroup=function(va){_inheritsLoose(_o,va);function _o(bo,wo){var Eo;Eo=va.call(this,bo,wo)||this;var To=Eo.handleExited.bind(_assertThisInitialized$4(Eo));return Eo.state={contextValue:{isMounting:!0},handleExited:To,firstRender:!0},Eo}var xo=_o.prototype;return xo.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},xo.componentWillUnmount=function(){this.mounted=!1},_o.getDerivedStateFromProps=function(wo,Eo){var To=Eo.children,So=Eo.handleExited,$o=Eo.firstRender;return{children:$o?getInitialChildMapping(wo,So):getNextChildMapping(wo,To,So),firstRender:!1}},xo.handleExited=function(wo,Eo){var To=getChildMapping(this.props.children);wo.key in To||(wo.props.onExited&&wo.props.onExited(Eo),this.mounted&&this.setState(function(So){var $o=_extends({},So.children);return delete $o[wo.key],{children:$o}}))},xo.render=function(){var wo=this.props,Eo=wo.component,To=wo.childFactory,So=_objectWithoutPropertiesLoose(wo,["component","childFactory"]),$o=this.state.contextValue,Do=values(this.state.children).map(To);return delete So.appear,delete So.enter,delete So.exit,Eo===null?React$g.createElement(TransitionGroupContext.Provider,{value:$o},Do):React$g.createElement(TransitionGroupContext.Provider,{value:$o},React$g.createElement(Eo,So,Do))},_o}(React$g.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;var TransitionGroup$1=TransitionGroup,ReplaceTransition=function(va){_inheritsLoose(_o,va);function _o(){for(var bo,wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return bo=va.call.apply(va,[this].concat(Eo))||this,bo.handleEnter=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onEnter",0,$o)},bo.handleEntering=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onEntering",0,$o)},bo.handleEntered=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onEntered",0,$o)},bo.handleExit=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onExit",1,$o)},bo.handleExiting=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onExiting",1,$o)},bo.handleExited=function(){for(var So=arguments.length,$o=new Array(So),Do=0;Do<So;Do++)$o[Do]=arguments[Do];return bo.handleLifecycle("onExited",1,$o)},bo}var xo=_o.prototype;return xo.handleLifecycle=function(wo,Eo,To){var So,$o=this.props.children,Do=React$g.Children.toArray($o)[Eo];if(Do.props[wo]&&(So=Do.props)[wo].apply(So,To),this.props[wo]){var No=Do.props.nodeRef?void 0:ReactDOM$1.findDOMNode(this);this.props[wo](No)}},xo.render=function(){var wo=this.props,Eo=wo.children,To=wo.in,So=_objectWithoutPropertiesLoose(wo,["children","in"]),$o=React$g.Children.toArray(Eo),Do=$o[0],No=$o[1];return delete So.onEnter,delete So.onEntering,delete So.onEntered,delete So.onExit,delete So.onExiting,delete So.onExited,React$g.createElement(TransitionGroup$1,So,To?React$g.cloneElement(Do,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):React$g.cloneElement(No,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},_o}(React$g.Component);ReplaceTransition.propTypes={};var ReplaceTransition$1=ReplaceTransition,_leaveRenders,_enterRenders;function areChildrenDifferent(va,_o){return!(va===_o||React$g.isValidElement(va)&&React$g.isValidElement(_o)&&va.key!=null&&va.key===_o.key)}var modes={out:"out-in",in:"in-out"},callHook=function va(_o,xo,bo){return function(){var wo;_o.props[xo]&&(wo=_o.props)[xo].apply(wo,arguments),bo()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(va){var _o=va.current,xo=va.changeState;return React$g.cloneElement(_o,{in:!1,onExited:callHook(_o,"onExited",function(){xo(ENTERING,null)})})},_leaveRenders[modes.in]=function(va){var _o=va.current,xo=va.changeState,bo=va.children;return[_o,React$g.cloneElement(bo,{in:!0,onEntered:callHook(bo,"onEntered",function(){xo(ENTERING)})})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(va){var _o=va.children,xo=va.changeState;return React$g.cloneElement(_o,{in:!0,onEntered:callHook(_o,"onEntered",function(){xo(ENTERED,React$g.cloneElement(_o,{in:!0}))})})},_enterRenders[modes.in]=function(va){var _o=va.current,xo=va.children,bo=va.changeState;return[React$g.cloneElement(_o,{in:!1,onExited:callHook(_o,"onExited",function(){bo(ENTERED,React$g.cloneElement(xo,{in:!0}))})}),React$g.cloneElement(xo,{in:!0})]},_enterRenders),SwitchTransition=function(va){_inheritsLoose(_o,va);function _o(){for(var bo,wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return bo=va.call.apply(va,[this].concat(Eo))||this,bo.state={status:ENTERED,current:null},bo.appeared=!1,bo.changeState=function(So,$o){$o===void 0&&($o=bo.state.current),bo.setState({status:So,current:$o})},bo}var xo=_o.prototype;return xo.componentDidMount=function(){this.appeared=!0},_o.getDerivedStateFromProps=function(wo,Eo){return wo.children==null?{current:null}:Eo.status===ENTERING&&wo.mode===modes.in?{status:ENTERING}:Eo.current&&areChildrenDifferent(Eo.current,wo.children)?{status:EXITING}:{current:React$g.cloneElement(wo.children,{in:!0})}},xo.render=function(){var wo=this.props,Eo=wo.children,To=wo.mode,So=this.state,$o=So.status,Do=So.current,No={children:Eo,current:Do,changeState:this.changeState,status:$o},Oo;switch($o){case ENTERING:Oo=enterRenders[To](No);break;case EXITING:Oo=leaveRenders[To](No);break;case ENTERED:Oo=Do}return React$g.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},Oo)},_o}(React$g.Component);SwitchTransition.propTypes={};SwitchTransition.defaultProps={mode:modes.out};var SwitchTransition$1=SwitchTransition,esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CSSTransition:CSSTransition$1,ReplaceTransition:ReplaceTransition$1,SwitchTransition:SwitchTransition$1,TransitionGroup:TransitionGroup$1,Transition:Transition$1,config}),require$$3=getAugmentedNamespace(esm);function _typeof$f(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$f=function(xo){return typeof xo}:_typeof$f=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$f(va)}Object.defineProperty(Prompter$1,"__esModule",{value:!0});Prompter$1.Prompter=Prompter;var React$8=_interopRequireWildcard$e(react$2.exports),_classnames$3=_interopRequireDefault$8(classnames.exports),_hooks$5=hooks,_reactTransitionGroup=require$$3,_VreoUnit$2=VreoUnit;function _interopRequireDefault$8(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$e(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$e=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$e(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$f(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$e(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _slicedToArray$4(va,_o){return _arrayWithHoles$4(va)||_iterableToArrayLimit$4(va,_o)||_unsupportedIterableToArray$4(va,_o)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$4(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$4(va,_o)}}function _arrayLikeToArray$4(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$4(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$4(va){if(Array.isArray(va))return va}function Prompter(){var va=React$8.useState(""),_o=_slicedToArray$4(va,2),xo=_o[0],bo=_o[1],wo=React$8.useState(!0),Eo=_slicedToArray$4(wo,2),To=Eo[0],So=Eo[1],$o=React$8.useRef(null),Do=(0,_hooks$5.useController)();return React$8.useEffect(function(){var No;if(((No=Do.configs)===null||No===void 0?void 0:No.keyframeMap.Prompter)!==!1){var Oo=function(Co){var Ro=Co.start,jo=Co.end,zo=Co.data;bo(zo.text),So(!1),$o.current&&(clearTimeout($o.current),$o.current=null),$o.current=setTimeout(function(){So(!0),setTimeout(function(){return bo("")},500),$o.current&&clearTimeout($o.current),$o.current=null},jo-Ro)};return Do.on(_VreoUnit$2.VreoKeyframeEnum.Prompter,Oo),function(){Do.off(_VreoUnit$2.VreoKeyframeEnum.Prompter,Oo)}}},[Do]),React$8.createElement("div",{className:(0,_classnames$3.default)("vreo-prompter",{"vreo-prompter--hidden":To,"vreo-prompter--audio":Do.isAudio})},xo?React$8.createElement(_reactTransitionGroup.TransitionGroup,{className:"vreo-prompter-text"},React$8.createElement(_reactTransitionGroup.CSSTransition,{key:xo,classNames:"vreo-prompter-text-transition",timeout:500,addEndListener:function(Oo,Lo){return Oo.addEventListener("transitionend",Lo,!1)}},React$8.createElement("div",{className:"vreo-prompter-innerText"},xo))):void 0)}var UpdateVRPanorama$1={};function _typeof$e(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(xo){return typeof xo}:_typeof$e=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$e(va)}Object.defineProperty(UpdateVRPanorama$1,"__esModule",{value:!0});UpdateVRPanorama$1.UpdateVRPanorama=UpdateVRPanorama;var React$7=_interopRequireWildcard$d(react$2.exports),_five$2=five,_hooks$4=hooks,_VreoUnit$1=VreoUnit;function _getRequireWildcardCache$d(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$d=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$d(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$e(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$d(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function UpdateVRPanorama(){var va=(0,_hooks$4.useController)(),_o=(0,_hooks$4.useFiveInstance)();return React$7.useEffect(function(){var xo=function(wo){var Eo,To=wo.data,So=To.panoIndex,$o=To.images,Do=JSON.parse(JSON.stringify((Eo=_o.work)===null||Eo===void 0?void 0:Eo.raw.work));Do.panorama&&Do.panorama.list&&Do.panorama.list[So]?Object.assign(Do.panorama.list[So],$o):Do.observers&&Do.observers[So]&&Do.observers[So].images&&Object.assign(Do.observers[So].images,$o);var No=(0,_five$2.parseWork)(Do);_o.load(No)};return va.on(_VreoUnit$1.VreoKeyframeEnum.UpdateVRPanorama,xo),function(){va.off(_VreoUnit$1.VreoKeyframeEnum.UpdateVRPanorama,xo)}},[va]),React$7.createElement(React$7.Fragment,null)}var VideoEffect$1={};function _typeof$d(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$d=function(xo){return typeof xo}:_typeof$d=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$d(va)}Object.defineProperty(VideoEffect$1,"__esModule",{value:!0});VideoEffect$1.VideoEffect=VideoEffect;var _classnames$2=_interopRequireDefault$7(classnames.exports),React$6=_interopRequireWildcard$c(react$2.exports),_VreoUnit=VreoUnit,_hooks$3=hooks;function _getRequireWildcardCache$c(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$c=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$c(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$d(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$c(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _interopRequireDefault$7(va){return va&&va.__esModule?va:{default:va}}function asyncGeneratorStep$7(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$7(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$7(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$7(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _slicedToArray$3(va,_o){return _arrayWithHoles$3(va)||_iterableToArrayLimit$3(va,_o)||_unsupportedIterableToArray$3(va,_o)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$3(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$3(va,_o)}}function _arrayLikeToArray$3(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$3(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$3(va){if(Array.isArray(va))return va}var inlinePlay=function va(_o){if(!!_o){var xo=function bo(){_o.removeEventListener("canplaythrough",bo);try{_o.play()}catch{}};_o.addEventListener("canplaythrough",xo),_o.load()}},PI=Math.PI,PI_2=PI*2;function VideoEffect(){var va=React$6.useRef(null),_o=React$6.useRef(),xo=(0,_hooks$3.useController)(),bo=React$6.useRef(),wo=React$6.useState(!1),Eo=_slicedToArray$3(wo,2),To=Eo[0],So=Eo[1],$o=(0,_hooks$3.useFiveInstance)(),Do=function(Oo){!_o.current||(_o.current.src=Oo)};return React$6.useEffect(function(){var No=function(){var Oo=_asyncToGenerator$7(regeneratorRuntime.mark(function Lo(Co){var Ro,jo,zo,Io,Po,Bo,ko,Uo,Qo,qo,Zo,Xo;return regeneratorRuntime.wrap(function(Go){for(;;)switch(Go.prev=Go.next){case 0:Ro=Co.start,jo=Co.end,zo=Co.data,Io=zo.videoSrc,Po=zo.fov,Bo=zo.direction,ko=zo.panoIndex,Uo=zo.vector,Qo=function(){if(Uo)return[Uo.longitude,Uo.latitude];if(!Bo)return[0,0];var Vo=-Math.atan2(Bo.x,-Bo.z);Vo=(Vo%PI_2+PI_2)%PI_2;var Wo=-Math.asin(Bo.y/1);return[Vo,Wo]}(),qo=_slicedToArray$3(Qo,2),Zo=qo[0],Xo=qo[1],$o.setState({fov:Po,panoIndex:ko,longitude:Zo,latitude:Xo},!0),Do(Io),inlinePlay(_o.current),So(!0),bo.current=setTimeout(function(){var Vo;if(!((Vo=_o.current)!==null&&Vo!==void 0&&Vo.paused)){var Wo;(Wo=_o.current)===null||Wo===void 0||Wo.pause()}So(!1),Do("")},jo-Ro);case 8:case"end":return Go.stop()}},Lo)}));return function(Co){return Oo.apply(this,arguments)}}();return xo.on(_VreoUnit.VreoKeyframeEnum.VideoEffect,No),function(){xo.off(_VreoUnit.VreoKeyframeEnum.VideoEffect,No),bo.current&&clearTimeout(bo.current)}},[xo]),React$6.useEffect(function(){var No,Oo;if(!!va.current){var Lo=((No=xo.configs)===null||No===void 0||(Oo=No.videos)===null||Oo===void 0?void 0:Oo.videoEffect)||document.createElement("video");Lo.setAttribute("playsinline","true"),Lo.setAttribute("webkit-playsinline","true"),Lo.setAttribute("autoplay","true"),Lo.setAttribute("key","VideoEffect-video"),Lo.setAttribute("class","VideoEffect-video"),_o.current=Lo,va.current.append(_o.current),document.addEventListener("WeixinJSBridgeReady",function(){var Co;(Co=_o.current)===null||Co===void 0||Co.play()},!1),!!va.current}},[]),React$6.createElement("div",{ref:va,className:(0,_classnames$2.default)("VideoEffect",{"VideoEffect--visible":To})})}var VideoAgent$1={},VideoAgentScene$1={},VideoAgentMesh$1={},Preloader$1={};Object.defineProperty(Preloader$1,"__esModule",{value:!0});Preloader$1.Preloader=void 0;var Preloader={blob:function va(_o){var xo=function(){return null};return new Promise(function(bo,wo){var Eo=new XMLHttpRequest,To=function(){Eo.ontimeout=xo,Eo.onreadystatechange=xo,Eo.onprogress=xo,Eo.onabort=xo};Eo.ontimeout=function(){wo(new Error("timeout")),To()},Eo.onreadystatechange=function(){Eo.readyState===4&&(Eo.status===0&&!Eo.response||(Eo.status===200||Eo.status===0?(bo(Eo.response),To()):(wo(new Error("status:"+Eo.status)),To())))},Eo.open("GET",_o,!0),Eo.responseType="blob",Eo.send(null)})}};Preloader$1.Preloader=Preloader;function _typeof$c(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$c=function(xo){return typeof xo}:_typeof$c=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$c(va)}Object.defineProperty(VideoAgentMesh$1,"__esModule",{value:!0});VideoAgentMesh$1.VideoAgentMesh=void 0;var THREE$5=_interopRequireWildcard$b(require$$1),_Preloader=Preloader$1,_mobx$1=require$$5;function _getRequireWildcardCache$b(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$b=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$b(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$c(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$b(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function asyncGeneratorStep$6(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$6(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$6(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$6(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _classCallCheck$7(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$5(va,_o,xo){return _o&&_defineProperties$5(va.prototype,_o),xo&&_defineProperties$5(va,xo),va}function _inherits$3(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf$3(va,_o)}function _setPrototypeOf$3(va,_o){return _setPrototypeOf$3=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$3(va,_o)}function _createSuper$3(va){var _o=_isNativeReflectConstruct$3();return function(){var bo=_getPrototypeOf$3(va),wo;if(_o){var Eo=_getPrototypeOf$3(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn$3(this,wo)}}function _possibleConstructorReturn$3(va,_o){if(_o&&(_typeof$c(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(va)}function _assertThisInitialized$3(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct$3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(va){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf$3(va)}var vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=function va(){return`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`},VideoAgentMesh=function(va){_inherits$3(xo,va);var _o=_createSuper$3(xo);function xo(bo,wo,Eo,To){var So,$o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(_classCallCheck$7(this,xo),!$o.videoInstance){var Do=document.createElement("video");Do.style.opacity="0",Do.style.display="none",document.body.append(Do),$o.videoInstance=Do,Do.playsInline=!0,Do.controls=!1}var No=new THREE$5.PlaneGeometry(bo,wo,Eo,To),Oo=new THREE$5.VideoTexture($o.videoInstance),Lo=new THREE$5.ShaderMaterial({uniforms:{map:{value:Oo},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});So=_o.call(this,No,Lo),So.options=$o,So.freeze=!1,So.paused=!0;{var Co=document.createElement("audio");Co.crossOrigin="",Co.muted=!1,Co.setAttribute("playsinline","true"),Co.setAttribute("webkit-playsinline","true"),Co.setAttribute("autoplay","false"),Co.setAttribute("style","display: none;"),document.body.appendChild(Co),So.audioInstance=Co}(0,_mobx$1.makeObservable)(_assertThisInitialized$3(So),{paused:_mobx$1.observable});var Ro=function(zo){return(0,_mobx$1.runInAction)(function(){return So.paused=zo})};return So.videoInstance.addEventListener("pause",function(){return Ro(!0)}),So.videoInstance.addEventListener("play",function(){return Ro(!1)}),So}return _createClass$5(xo,[{key:"videoInstance",get:function(){var wo;if((wo=this.videoUrl)!==null&&wo!==void 0&&wo.endsWith("mp3"))return this.audioInstance;var Eo=this.material.uniforms,To=Eo.map.value.image;return To}},{key:"update",value:function(){var bo=_asyncToGenerator$6(regeneratorRuntime.mark(function Eo(To){var So=this,$o,Do;return regeneratorRuntime.wrap(function(Oo){for(;;)switch(Oo.prev=Oo.next){case 0:if(this.videoUrl!==To){Oo.next=2;break}return Oo.abrupt("return");case 2:return this.videoUrl=To,this.freeze=!0,Oo.next=6,this.videoInstance.pause();case 6:return $o=this.material.uniforms,this.videoInstance.muted=!0,Oo.t0=URL,Oo.next=11,_Preloader.Preloader.blob(this.videoUrl);case 11:return Oo.t1=Oo.sent,Oo.next=14,Oo.t0.createObjectURL.call(Oo.t0,Oo.t1);case 14:this.videoInstance.src=Oo.sent,this.videoInstance.setAttribute("data-src",this.videoUrl),Do=function Lo(){var Co;So.videoInstance.currentTime!==0&&(So.freeze=!1,So.videoInstance.muted=!1,$o.enable.value=(Co=So.videoUrl)!==null&&Co!==void 0&&Co.endsWith(".mp4")?1:0,So.videoInstance.removeEventListener("timeupdate",Lo,!1))},this.videoInstance.addEventListener("timeupdate",Do,!1);case 18:case"end":return Oo.stop()}},Eo,this)}));function wo(Eo){return bo.apply(this,arguments)}return wo}()},{key:"play",value:function(){var bo=_asyncToGenerator$6(regeneratorRuntime.mark(function Eo(){var To=this,So,$o=arguments;return regeneratorRuntime.wrap(function(No){for(;;)switch(No.prev=No.next){case 0:if(So=$o.length>0&&$o[0]!==void 0?$o[0]:"",So=(So||"").replace(/https*:/,""),So){No.next=10;break}if(!this.videoUrl){No.next=8;break}return No.next=6,this.videoInstance.play();case 6:No.next=9;break;case 8:console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002");case 9:return No.abrupt("return",!0);case 10:if(So!==this.videoUrl){No.next=15;break}return this.videoInstance.currentTime=0,No.next=14,this.videoInstance.play();case 14:return No.abrupt("return",!0);case 15:return No.next=17,this.update(So);case 17:return this.videoInstance.pause(),No.next=20,new Promise(function(Oo){return setTimeout(_asyncToGenerator$6(regeneratorRuntime.mark(function Lo(){return regeneratorRuntime.wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:return To.videoInstance.currentTime=0,Ro.next=3,To.videoInstance.play();case 3:Oo(!0);case 4:case"end":return Ro.stop()}},Lo)})),20)});case 20:return No.abrupt("return",No.sent);case 21:case"end":return No.stop()}},Eo,this)}));function wo(){return bo.apply(this,arguments)}return wo}()},{key:"currentTime",get:function(){return this.videoInstance.currentTime*1e3}}]),xo}(THREE$5.Mesh);VideoAgentMesh$1.VideoAgentMesh=VideoAgentMesh;function _typeof$b(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$b=function(xo){return typeof xo}:_typeof$b=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$b(va)}Object.defineProperty(VideoAgentScene$1,"__esModule",{value:!0});VideoAgentScene$1.VideoAgentScene=void 0;var THREE$4=_interopRequireWildcard$a(require$$1),_VideoAgentMesh=VideoAgentMesh$1;function _getRequireWildcardCache$a(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$a=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$a(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$b(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$a(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _classCallCheck$6(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperty$5(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var VideoAgentScene=function va(_o){var xo=this,bo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;_classCallCheck$6(this,va),_defineProperty$5(this,"scene",new THREE$4.Scene),_defineProperty$5(this,"camera",new THREE$4.OrthographicCamera(-240,240,135,-135)),_defineProperty$5(this,"renderer",new THREE$4.WebGLRenderer({alpha:!0})),_defineProperty$5(this,"run",function(){!(xo.videoAgentMesh.paused||xo.videoAgentMesh.freeze)&&xo.videoAgentMesh.currentTime>1e3&&xo.renderer.render(xo.scene,xo.camera),requestAnimationFrame(xo.run)}),this.container=_o,this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);var wo={width:_o.offsetWidth,height:_o.offsetHeight},Eo=this.renderer.domElement;Eo.classList.add("VideoAgent-canvas"),this.renderer.setSize(wo.width*window.devicePixelRatio,wo.height*window.devicePixelRatio),Eo.setAttribute("style","width: ".concat(wo.width,"px;height: ").concat(wo.height,"px;")),this.videoAgentMesh=new _VideoAgentMesh.VideoAgentMesh(480,270,1,1),bo&&(_o.append(Eo),this.scene.add(this.videoAgentMesh),this.run())};VideoAgentScene$1.VideoAgentScene=VideoAgentScene;function _typeof$a(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$a=function(xo){return typeof xo}:_typeof$a=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$a(va)}Object.defineProperty(VideoAgent$1,"__esModule",{value:!0});VideoAgent$1.VideoAgent=VideoAgent;var React$5=_interopRequireWildcard$9(react$2.exports),_hooks$2=hooks,_VideoAgentScene=VideoAgentScene$1;function _getRequireWildcardCache$9(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$9=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$9(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$a(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$9(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function VideoAgent(va){var _o=React$5.useRef(null),xo=(0,_hooks$2.useController)();return React$5.useEffect(function(){if(!_o.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(xo.videoAgentScene){console.warn('"VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4 ...');return}var bo=new _VideoAgentScene.VideoAgentScene(_o.current);xo.videoAgentScene=bo},[]),React$5.createElement("div",{className:"VideoAgent",onClick:function(){!va.onClick||va.onClick()},ref:_o},React$5.createElement("div",{className:"VideoAgent-play"}))}function _typeof$9(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$9=function(xo){return typeof xo}:_typeof$9=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$9(va)}Object.defineProperty(App$1,"__esModule",{value:!0});App$1.App=App;var React$4=_interopRequireWildcard$8(react$2.exports),_classnames$1=_interopRequireDefault$6(classnames.exports),_mobxReact$1=require$$2,_hooks$1=hooks,_CameraMovement=CameraMovement$1,_InfoPanel=InfoPanel$1,_ModelVideo=ModelVideo$1,_PanoEffect=PanoEffect$1,_PanoTag=PanoTag$1,_PanoTextLabel=PanoTextLabel$1,_Prompter=Prompter$1,_UpdateVRPanorama=UpdateVRPanorama$1,_VideoEffect=VideoEffect$1,_VideoAgent=VideoAgent$1;function _interopRequireDefault$6(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$8(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$8=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$8(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$9(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$8(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}var AppView=(0,_mobxReact$1.observer)(function(va){var _o=va.controller;return React$4.createElement("div",{className:(0,_classnames$1.default)("vreo-panel",{"vreo-panel--hidden":!_o.visible})},React$4.createElement("div",{className:"vreo-panel-inner"},React$4.createElement(_VideoAgent.VideoAgent,{onClick:function(){_o.isAudio||(_o.playing?_o.setPlaying(!1):_o.setPlaying(!0))}}),React$4.createElement(_Prompter.Prompter,null)))});function App(){var va=(0,_hooks$1.useController)();return React$4.createElement(React$4.Fragment,null,React$4.createElement(React$4.Fragment,null,React$4.createElement(_CameraMovement.CameraMovement,null),React$4.createElement(_ModelVideo.ModelVideo,null),React$4.createElement(_UpdateVRPanorama.UpdateVRPanorama,null),React$4.createElement(_VideoEffect.VideoEffect,null),React$4.createElement(_PanoTag.PanoTag,null),React$4.createElement(_PanoTextLabel.PanoTextLabel,null),React$4.createElement(_InfoPanel.InfoPanel,null),React$4.createElement(_PanoEffect.PanoEffect,null)),React$4.createElement(AppView,{controller:va}))}var Drawer$1={};function _typeof$8(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$8=function(xo){return typeof xo}:_typeof$8=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$8(va)}Object.defineProperty(Drawer$1,"__esModule",{value:!0});Drawer$1.Drawer=Drawer;var React$3=_interopRequireWildcard$7(react$2.exports),_classnames=_interopRequireDefault$5(classnames.exports),_mobxReact=require$$2,_hooks=hooks;function _interopRequireDefault$5(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$7(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$7=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$7(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$8(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$7(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}var DrawerView=(0,_mobxReact.observer)(function(va){var _o,xo=va.controller,bo="540px",wo=function(){var Eo,To=(Eo=xo.drawerConfig)===null||Eo===void 0?void 0:Eo.height;return To?typeof To=="number"?To+"px":To:"max-content"}();return React$3.createElement("div",{className:(0,_classnames.default)("vreo-drawer",{"vreo-drawer-visible":xo.drawerConfig&&xo.drawerConfig.content}),onClick:function(){return xo.openDrawer(!1)}},React$3.createElement("div",{className:"vreo-drawer-inner",style:{height:wo,maxHeight:bo}},((_o=xo.drawerConfig)===null||_o===void 0?void 0:_o.content)||""))});function Drawer(){var va=(0,_hooks.useController)();return React$3.createElement(DrawerView,{controller:va})}function _typeof$7(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$7=function(xo){return typeof xo}:_typeof$7=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$7(va)}Object.defineProperty(Player$1,"__esModule",{value:!0});Player$1.Player=void 0;var React$2=_interopRequireWildcard$6(react$2.exports),ReactDOM=_interopRequireWildcard$6(reactDom.exports),_five$1=five,_App=App$1,_Controller=Controller$3,_mobx=require$$5,_Drawer=Drawer$1;function _getRequireWildcardCache$6(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$6=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$6(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$7(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$6(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function asyncGeneratorStep$5(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$5(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$5(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$5(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _classCallCheck$5(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$4(va,_o,xo){return _o&&_defineProperties$4(va.prototype,_o),xo&&_defineProperties$4(va,xo),va}function _inherits$2(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf$2(va,_o)}function _setPrototypeOf$2(va,_o){return _setPrototypeOf$2=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$2(va,_o)}function _createSuper$2(va){var _o=_isNativeReflectConstruct$2();return function(){var bo=_getPrototypeOf$2(va),wo;if(_o){var Eo=_getPrototypeOf$2(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn$2(this,wo)}}function _possibleConstructorReturn$2(va,_o){if(_o&&(_typeof$7(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(va)}function _assertThisInitialized$2(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct$2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(va){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf$2(va)}var controller=new _Controller.Controller,Player=function(va){_inherits$2(xo,va);var _o=_createSuper$2(xo);function xo(bo){var wo,Eo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck$5(this,xo),wo=_o.call(this),wo.$five=controller.$five=bo,!Eo.containter){var To=document.createElement("div");To.setAttribute("id","vreo-app"),Eo.containter=To,document.body.append(To)}return wo.configs=Object.freeze(Object.assign({keyframeMap:{}},Eo)),controller.configs=wo.configs,ReactDOM.render(React$2.createElement(_Controller.ControllerContext.Provider,{value:controller},React$2.createElement(_App.App,null),React$2.createElement(_Drawer.Drawer,null)),Eo.containter),(0,_mobx.reaction)(function(){return controller.playing},function(So){wo.emit(So?"playing":"paused")}),wo}return _createClass$4(xo,[{key:"load",value:function(){var bo=_asyncToGenerator$5(regeneratorRuntime.mark(function Eo(To){var So,$o=this,Do,No,Oo,Lo=arguments;return regeneratorRuntime.wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:if(Do=Lo.length>1&&Lo[1]!==void 0?Lo[1]:0,controller.visible){Ro.next=5;break}return controller.setVisible(!0),Ro.next=5,new Promise(function(jo){setTimeout(function(){return jo(!0)},500)});case 5:if(controller.stopInterval&&(controller.stopInterval(),controller.stopInterval=void 0),controller.vreoUnit=To,(So=controller.videoInstance)===null||So===void 0||So.pause(),!To.video.url){Ro.next=13;break}return(No=controller.videoAgentScene)!==null&&No!==void 0&&No.videoAgentMesh.videoInstance&&(controller.videoAgentScene.videoAgentMesh.videoInstance.currentTime=Do/1e3),Ro.next=12,(Oo=controller.videoAgentScene)===null||Oo===void 0?void 0:Oo.videoAgentMesh.play(To.video.url);case 12:this.play();case 13:return controller.run(function(jo,zo){return $o.emit(jo,zo)}),Ro.abrupt("return",!0);case 15:case"end":return Ro.stop()}},Eo,this)}));function wo(Eo){return bo.apply(this,arguments)}return wo}()},{key:"paused",get:function(){return!controller.playing}},{key:"play",value:function(){return controller.playing||controller.setPlaying(!0),!0}},{key:"pause",value:function(){controller.setPlaying(!1)}},{key:"show",value:function(){controller.setVisible(!0)}},{key:"hide",value:function(){controller.setVisible(!1)}},{key:"dispose",value:function(){controller.dispose()}}]),xo}(_five$1.Subscribe);Player$1.Player=Player;console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 

`);function _typeof$6(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(xo){return typeof xo}:_typeof$6=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$6(va)}Object.defineProperty(react$1,"__esModule",{value:!0});var VreoProvider_1=react$1.VreoProvider=void 0,useVreoAction_1=react$1.useVreoAction=useVreoAction,useVreoEventCallback_1=react$1.useVreoEventCallback=useVreoEventCallback,useVreoPausedState_1=react$1.useVreoPausedState=useVreoPausedState,_react$1=react,React$1=_interopRequireWildcard$5(react$2.exports),_Player=Player$1;function _getRequireWildcardCache$5(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$5=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$5(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$6(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$5(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _slicedToArray$2(va,_o){return _arrayWithHoles$2(va)||_iterableToArrayLimit$2(va,_o)||_unsupportedIterableToArray$2(va,_o)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$2(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$2(va,_o)}}function _arrayLikeToArray$2(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$2(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$2(va){if(Array.isArray(va))return va}var VreoContext=React$1.createContext(null),VreoProvider=function va(_o){var xo=(0,_react$1.unsafe__useFiveInstance)(),bo=React$1.useState(null),wo=_slicedToArray$2(bo,2),Eo=wo[0],To=wo[1];return React$1.useEffect(function(){return To(new _Player.Player(xo)),function(){Eo==null||Eo.dispose()}},[]),Eo?React$1.createElement(VreoContext.Provider,{value:Eo},_o.children):React$1.createElement(React$1.Fragment,null)};VreoProvider_1=react$1.VreoProvider=VreoProvider;function useVreoInstance(){var va=React$1.useContext(VreoContext);if(!va)throw new Error("VreoProvider never found.");return va}function useVreoAction(){var va=useVreoInstance(),_o=React$1.useCallback(function(So,$o){return va.load(So,$o)},[va]),xo=React$1.useCallback(function(){return va.play()},[va]),bo=React$1.useCallback(function(){return va.pause()},[va]),wo=React$1.useCallback(function(){return va.show()},[va]),Eo=React$1.useCallback(function(){return va.hide()},[va]),To=React$1.useCallback(function(){return va.dispose()},[va]);return{load:_o,pause:bo,show:wo,play:xo,hide:Eo,dispose:To}}function useVreoEventCallback(va,_o,xo){var bo=useVreoInstance(),wo=[bo,va];xo!==void 0&&(wo=wo.concat(xo)),React$1.useEffect(function(){return bo.on(va,_o),function(){bo.off(va,_o)}},wo)}function useVreoPausedState(){var va=useVreoInstance(),_o=React$1.useState(va.paused),xo=_slicedToArray$2(_o,2),bo=xo[0],wo=xo[1];return useVreoEventCallback("paused",function(){return wo(!0)}),useVreoEventCallback("playing",function(){return wo(!1)}),bo}var TreasurePlugin$1={},Controller$1={},isNil$1={};Object.defineProperty(isNil$1,"__esModule",{value:!0});isNil$1.isNil=isNil;isNil$1.notNil=notNil;function isNil(va){return!notNil(va)}function notNil(va){return va!=null}var constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.TREASURE_TYPE=constants.TREASURE_BOX_TEXTURE_YELLOW_URL=constants.TREASURE_BOX_TEXTURE_RED_URL=constants.DEFAULT_TREASURE_OBJECT_URL=constants.DEFAULT_TREASURE_OBJECT_TYPE=constants.DEFAULT_TREASURE_OBJECT=constants.DEFAULT_TREASURE_FACE_ANIMATION_URLS=constants.DEFAULT_TREASURE_CONFIGS=constants.DEFAULT_TREASURE_CONFIG=void 0;var TREASURE_BASE_URL="//vrlab-public.ljcdn.com/release/static/image/release/baoxiang_xiaobei/1/",DEFAULT_TREASURE_OBJECT_TYPE="FBX";constants.DEFAULT_TREASURE_OBJECT_TYPE=DEFAULT_TREASURE_OBJECT_TYPE;var DEFAULT_TREASURE_OBJECT_URL=TREASURE_BASE_URL+"baoxiang_xiaobei.fbx";constants.DEFAULT_TREASURE_OBJECT_URL=DEFAULT_TREASURE_OBJECT_URL;var DEFAULT_TREASURE_OBJECT={url:DEFAULT_TREASURE_OBJECT_URL,type:DEFAULT_TREASURE_OBJECT_TYPE};constants.DEFAULT_TREASURE_OBJECT=DEFAULT_TREASURE_OBJECT;var DEFAULT_TREASURE_FACE_ANIMATION_URLS=[TREASURE_BASE_URL+"faces/1.png",TREASURE_BASE_URL+"faces/2.png",TREASURE_BASE_URL+"faces/3.png",TREASURE_BASE_URL+"faces/4.png",TREASURE_BASE_URL+"faces/5.png"];constants.DEFAULT_TREASURE_FACE_ANIMATION_URLS=DEFAULT_TREASURE_FACE_ANIMATION_URLS;var TREASURE_BOX_TEXTURE_YELLOW_URL=TREASURE_BASE_URL+"box_Base_Color.png";constants.TREASURE_BOX_TEXTURE_YELLOW_URL=TREASURE_BOX_TEXTURE_YELLOW_URL;var TREASURE_BOX_TEXTURE_RED_URL=TREASURE_BASE_URL+"box_Base_Color_red.png";constants.TREASURE_BOX_TEXTURE_RED_URL=TREASURE_BOX_TEXTURE_RED_URL;var TREASURE_TYPE;constants.TREASURE_TYPE=TREASURE_TYPE;(function(va){va[va.YELLOW=0]="YELLOW",va[va.RED=1]="RED"})(TREASURE_TYPE||(constants.TREASURE_TYPE=TREASURE_TYPE={}));var DEFAULT_TREASURE_CONFIG={scale:1,boxTextureUrl:void 0,objectUrl:DEFAULT_TREASURE_OBJECT_URL,faceAnimeTextureUrls:DEFAULT_TREASURE_FACE_ANIMATION_URLS};constants.DEFAULT_TREASURE_CONFIG=DEFAULT_TREASURE_CONFIG;var DEFAULT_TREASURE_CONFIGS=[{type:TREASURE_TYPE.YELLOW,config:DEFAULT_TREASURE_CONFIG},{type:TREASURE_TYPE.RED,config:{objectUrl:DEFAULT_TREASURE_OBJECT_URL,boxTextureUrl:TREASURE_BOX_TEXTURE_RED_URL,faceAnimeTextureUrls:DEFAULT_TREASURE_FACE_ANIMATION_URLS}}];constants.DEFAULT_TREASURE_CONFIGS=DEFAULT_TREASURE_CONFIGS;var TreasureObject$1={},TreasureFaceAnime$1={};function _typeof$5(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(xo){return typeof xo}:_typeof$5=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$5(va)}Object.defineProperty(TreasureFaceAnime$1,"__esModule",{value:!0});TreasureFaceAnime$1.TreasureFaceAnime=void 0;var THREE$3=_interopRequireWildcard$4(require$$1);function _getRequireWildcardCache$4(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$4=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$4(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$5(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$4(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function asyncGeneratorStep$4(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$4(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$4(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$4(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _classCallCheck$4(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$3(va,_o,xo){return _o&&_defineProperties$3(va.prototype,_o),xo&&_defineProperties$3(va,xo),va}function _defineProperty$4(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var TreasureFaceAnime=function(){function va(_o){var xo=this;_classCallCheck$4(this,va),_defineProperty$4(this,"paused",!0),_defineProperty$4(this,"faceAnimeStep",0),_defineProperty$4(this,"play",_asyncToGenerator$4(regeneratorRuntime.mark(function wo(){var Eo,To;return regeneratorRuntime.wrap(function($o){for(;;)switch($o.prev=$o.next){case 0:if(xo.paused){$o.next=2;break}return $o.abrupt("return",!0);case 2:return xo.paused=!1,xo.clearTimer(),Eo=xo.faceMesh.material,$o.next=7,xo.faceTexturesPromise;case 7:if(To=$o.sent,!xo.paused){$o.next=10;break}return $o.abrupt("return",!1);case 10:return xo.faceAnimeTimer=setInterval(function(){xo.faceAnimeStep=(xo.faceAnimeStep+1)%To.length;var Do=To[xo.faceAnimeStep];Do.encoding=THREE$3.sRGBEncoding,Eo.map=Do,xo.five.needsRender=!0},300),$o.abrupt("return",!0);case 12:case"end":return $o.stop()}},wo)}))),this.five=_o.five,this.treasureGroup=_o.treasureGroup,this.faceTexturesPromise=Promise.all(_o.textureUrls.map(_o.loadTexture)),this.faceMesh=this.treasureGroup.getObjectByName("face");var bo=this.faceMesh.material.map;if(!bo)throw new Error("\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u4E0D\u80FD\u4ECE\u6A21\u578B\u6587\u4EF6\u4E2D\u627E\u5230\u5BF9\u5E94\u7684\u52A8\u753B\u8D34\u56FE");this.initialFaceTexture=bo,this.initialFaceTexture.encoding=THREE$3.sRGBEncoding}return _createClass$3(va,[{key:"pause",value:function(){return this.paused=!0,this.clearTimer(),!0}},{key:"dispose",value:function(){this.pause()}},{key:"setToInitialState",value:function(){this.faceMesh.material.map=this.initialFaceTexture,this.faceAnimeStep=0,this.five.needsRender=!0}},{key:"clearTimer",value:function(){this.faceAnimeTimer&&clearInterval(this.faceAnimeTimer),this.faceAnimeTimer=void 0}}]),va}();TreasureFaceAnime$1.TreasureFaceAnime=TreasureFaceAnime;var TreasureOpenAnime={},BetterTween$1={},animationFrame={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0,va.getFrameTime=To,va.nextFrame=wo,va.requestAnimationFrameInterval=Eo;var _o=window.requestAnimationFrame||function(So){return setTimeout(So,16)},xo=window.cancelAnimationFrame||clearTimeout,bo=_o;va.default=bo;function wo(So){var $o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;$o<=0?_o(So):_o(function(){return wo(So,$o-1)})}function Eo(So){var $o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,Do=-1,No=0,Oo=-1,Lo=1e3/$o;function Co(Ro){Oo===-1&&(Oo=Ro),Do=_o(Co);var jo=Ro-No;jo<Lo||(No=Ro,So&&So(Ro-Oo))}return Do=_o(Co),function(){xo(Do)}}function To(){var So=Date.now();return new Promise(function($o){_o(function(){$o(Date.now()-So)})})}})(animationFrame);function _typeof$4(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(xo){return typeof xo}:_typeof$4=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$4(va)}Object.defineProperty(BetterTween$1,"__esModule",{value:!0});BetterTween$1.BetterTween=void 0;BetterTween$1.tweenProgress=tweenProgress;var _tween=_interopRequireDefault$4(require$$0$1),_=animationFrame;function _interopRequireDefault$4(va){return va&&va.__esModule?va:{default:va}}function _classCallCheck$3(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _inherits$1(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf$1(va,_o)}function _setPrototypeOf$1(va,_o){return _setPrototypeOf$1=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf$1(va,_o)}function _createSuper$1(va){var _o=_isNativeReflectConstruct$1();return function(){var bo=_getPrototypeOf$1(va),wo;if(_o){var Eo=_getPrototypeOf$1(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn$1(this,wo)}}function _possibleConstructorReturn$1(va,_o){if(_o&&(_typeof$4(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(va)}function _assertThisInitialized$1(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct$1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(va){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf$1(va)}function _defineProperty$3(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var BetterTween=function(va){_inherits$1(xo,va);var _o=_createSuper$1(xo);function xo(){var bo;_classCallCheck$3(this,xo);for(var wo=arguments.length,Eo=new Array(wo),To=0;To<wo;To++)Eo[To]=arguments[To];return bo=_o.call.apply(_o,[this].concat(Eo)),_defineProperty$3(_assertThisInitialized$1(bo),"disposeMethods",[]),_defineProperty$3(_assertThisInitialized$1(bo),"onDispose",function(So){return bo.disposeMethods.push(So),_assertThisInitialized$1(bo)}),_defineProperty$3(_assertThisInitialized$1(bo),"play",function(){return bo.start(0),bo.animationFrameDisposer=(0,_.requestAnimationFrameInterval)(function(So){return bo.update(So)}),_assertThisInitialized$1(bo)}),_defineProperty$3(_assertThisInitialized$1(bo),"dispose",function(){var So,$o;bo.stop(),(So=($o=bo).animationFrameDisposer)===null||So===void 0||So.call($o),bo.disposeMethods.forEach(function(Do){return Do()}),bo.disposeMethods=[],_tween.default.remove(_assertThisInitialized$1(bo))}),bo}return xo}(_tween.default.Tween);BetterTween$1.BetterTween=BetterTween;function tweenProgress(va){var _o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_tween.default.Easing.Linear.None,xo=new BetterTween({progress:0}).to({progress:1});return va!==void 0&&xo.duration(va),_o!==void 0&&xo.easing(_o),xo}function _typeof$3(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(xo){return typeof xo}:_typeof$3=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$3(va)}Object.defineProperty(TreasureOpenAnime,"__esModule",{value:!0});TreasureOpenAnime.TreasurePluginOpenAnime=void 0;var THREE$2=_interopRequireWildcard$3(require$$1),_BetterTween$1=BetterTween$1,_animationFrame=animationFrame;function _getRequireWildcardCache$3(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$3=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$3(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$3(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$3(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _classCallCheck$2(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$2(va,_o,xo){return _o&&_defineProperties$2(va.prototype,_o),xo&&_defineProperties$2(va,xo),va}function _defineProperty$2(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var TreasurePluginOpenAnime=function(){function va(_o){var xo=this;_classCallCheck$2(this,va),_defineProperty$2(this,"hasPlayed",!1),_defineProperty$2(this,"clock",new THREE$2.Clock),_defineProperty$2(this,"onPlayFinished",function(){var wo;(wo=xo.animationDispose)===null||wo===void 0||wo.call(xo);var Eo=xo.treasureGroup.children.filter(function(To){return To.name.indexOf("Plane")===0||To.name.indexOf("coin")===0});(0,_BetterTween$1.tweenProgress)(300).onUpdate(function(To){var So=To.progress,$o=1-So;Eo.forEach(function(Do){Do.material.opacity=$o}),xo.five.needsRender=!0}).play().onComplete(function(){var To,So;return(To=(So=xo.params).onComplete)===null||To===void 0?void 0:To.call(So)})}),this.five=_o.five,this.params=_o,this.treasureGroup=_o.treasureGroup;var bo=new THREE$2.AnimationMixer(this.treasureGroup);this.action=bo.clipAction(_o.animationClip),this.action.setLoop(THREE$2.LoopOnce,1),this.action.clampWhenFinished=!0}return _createClass$2(va,[{key:"dispose",value:function(){var xo;(xo=this.animationDispose)===null||xo===void 0||xo.call(this),this.clock.stop()}},{key:"play",value:function(){var xo=this;if(this.hasPlayed)return!1;this.hasPlayed=!0,this.action.play();var bo=this.action.getMixer();return this.animationDispose=(0,_animationFrame.requestAnimationFrameInterval)(function(){var wo=xo.clock.getDelta();bo.update(wo),xo.five.needsRender=!0}),bo.addEventListener("finished",this.onPlayFinished),!0}}]),va}();TreasureOpenAnime.TreasurePluginOpenAnime=TreasurePluginOpenAnime;var to={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0,va.to=bo;function _o(To,So,$o,Do,No,Oo,Lo){try{var Co=To[Oo](Lo),Ro=Co.value}catch(jo){$o(jo);return}Co.done?So(Ro):Promise.resolve(Ro).then(Do,No)}function xo(To){return function(){var So=this,$o=arguments;return new Promise(function(Do,No){var Oo=To.apply(So,$o);function Lo(Ro){_o(Oo,Do,No,Lo,Co,"next",Ro)}function Co(Ro){_o(Oo,Do,No,Lo,Co,"throw",Ro)}Lo(void 0)})}}function bo(To){return wo.apply(this,arguments)}function wo(){return wo=xo(regeneratorRuntime.mark(function To(So){var $o;return regeneratorRuntime.wrap(function(No){for(;;)switch(No.prev=No.next){case 0:return No.prev=0,No.next=3,So;case 3:return $o=No.sent,No.abrupt("return",[null,$o]);case 7:if(No.prev=7,No.t0=No.catch(0),!(No.t0 instanceof Error)){No.next=11;break}return No.abrupt("return",[No.t0,null]);case 11:return No.abrupt("return",[new Error(""),null]);case 12:case"end":return No.stop()}},To,null,[[0,7]])})),wo.apply(this,arguments)}var Eo=bo;va.default=Eo})(to);function _typeof$2(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(xo){return typeof xo}:_typeof$2=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$2(va)}Object.defineProperty(TreasureObject$1,"__esModule",{value:!0});TreasureObject$1.TreasureObject=void 0;var THREE$1=_interopRequireWildcard$2(require$$1),_TreasureFaceAnime=TreasureFaceAnime$1,_TreasureOpenAnime=TreasureOpenAnime,_BetterTween=BetterTween$1,_to$1=_interopRequireDefault$3(to);function _interopRequireDefault$3(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$2(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$2=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$2(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$2(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$2(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _slicedToArray$1(va,_o){return _arrayWithHoles$1(va)||_iterableToArrayLimit$1(va,_o)||_unsupportedIterableToArray$1(va,_o)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray$1(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray$1(va,_o)}}function _arrayLikeToArray$1(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit$1(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles$1(va){if(Array.isArray(va))return va}function asyncGeneratorStep$3(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$3(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$3(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$3(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _classCallCheck$1(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass$1(va,_o,xo){return _o&&_defineProperties$1(va.prototype,_o),xo&&_defineProperties$1(va,xo),va}function _inherits(va,_o){if(typeof _o!="function"&&_o!==null)throw new TypeError("Super expression must either be null or a function");va.prototype=Object.create(_o&&_o.prototype,{constructor:{value:va,writable:!0,configurable:!0}}),_o&&_setPrototypeOf(va,_o)}function _setPrototypeOf(va,_o){return _setPrototypeOf=Object.setPrototypeOf||function(bo,wo){return bo.__proto__=wo,bo},_setPrototypeOf(va,_o)}function _createSuper(va){var _o=_isNativeReflectConstruct();return function(){var bo=_getPrototypeOf(va),wo;if(_o){var Eo=_getPrototypeOf(this).constructor;wo=Reflect.construct(bo,arguments,Eo)}else wo=bo.apply(this,arguments);return _possibleConstructorReturn(this,wo)}}function _possibleConstructorReturn(va,_o){if(_o&&(_typeof$2(_o)==="object"||typeof _o=="function"))return _o;if(_o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(va)}function _assertThisInitialized(va){if(va===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return va}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(va){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(xo){return xo.__proto__||Object.getPrototypeOf(xo)},_getPrototypeOf(va)}function _defineProperty$1(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}function copyMaterial(va){var _o=new THREE$1.MeshBasicMaterial({map:va.map,opacity:va.opacity,transparent:va.transparent});return _o}var TreasureObject=function(va){_inherits(xo,va);var _o=_createSuper(xo);function xo(bo){var wo;_classCallCheck$1(this,xo),wo=_o.call(this),_defineProperty$1(_assertThisInitialized(wo),"name","treasureObject"),_defineProperty$1(_assertThisInitialized(wo),"opened",!1),_defineProperty$1(_assertThisInitialized(wo),"onFiveWantsTapGesture",function(To){var So,$o,Do=To.intersectObject(_assertThisInitialized(wo),!0),No=!!Do&&Do.length>0;if(!!No)return(So=($o=wo.params).clickCallback)===null||So===void 0||So.call($o,wo.treasureID),wo.rotateToCamera(),wo.open(),!1}),_defineProperty$1(_assertThisInitialized(wo),"onFivePanoArrived",function(){wo.position.distanceTo(wo.five.camera.position)<3&&wo.rotateToCamera()}),wo.params=bo,wo.five=bo.five,wo.treasureID=bo.id,wo.position.copy(bo.position);var Eo=.008*bo.config.scale;return wo.scale.fromArray([Eo,Eo,Eo]),wo}return _createClass$1(xo,[{key:"dispose",value:function(){var wo,Eo;(wo=this.faceAnime)===null||wo===void 0||wo.dispose(),(Eo=this.openAnime)===null||Eo===void 0||Eo.dispose(),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("wantsTapGesture",this.onFiveWantsTapGesture)}},{key:"rotateToCamera",value:function(){var wo=this;if(!this.opened){var Eo=this.getWorldDirection(new THREE$1.Vector3).setY(0),To=this.five.camera.position.clone().sub(this.position).setY(0),So=Eo.clone().cross(To).y>0?1:-1,$o=Eo.clone().angleTo(To),Do=8,No=Math.ceil($o/Do*1e3),Oo=this.rotation.y;(0,_BetterTween.tweenProgress)(No).onUpdate(function(Lo){var Co=Lo.progress;wo.rotation.y=Oo+Co*$o*So}).play()}}},{key:"open",value:function(){var wo,Eo,To;return!this.openAnime||this.opened?!1:(this.opened=!0,(wo=this.faceAnime)===null||wo===void 0||wo.pause(),(Eo=this.faceAnime)===null||Eo===void 0||Eo.setToInitialState(),(To=this.openAnime)===null||To===void 0||To.play(),!0)}},{key:"load",value:function(){var bo=_asyncToGenerator$3(regeneratorRuntime.mark(function Eo(){var To=this,So,$o,Do,No,Oo,Lo,Co,Ro,jo;return regeneratorRuntime.wrap(function(Io){for(;;)switch(Io.prev=Io.next){case 0:return Io.next=2,(0,_to$1.default)(this.params.loadModelGroup(this.params.config.objectUrl));case 2:if(So=Io.sent,$o=_slicedToArray$1(So,2),Do=$o[0],No=$o[1],!(Do||!No)){Io.next=8;break}throw Do;case 8:if(Oo=No.clone(),Oo.traverse(function(Po){Po instanceof THREE$1.Mesh&&(Po.material=copyMaterial(Po.material),Po.material.map&&(Po.material.map.encoding=THREE$1.sRGBEncoding),Po.renderOrder=2)}),!this.params.config.boxTextureUrl){Io.next=22;break}return Io.next=13,(0,_to$1.default)(this.params.loadTexture(this.params.config.boxTextureUrl));case 13:if(Lo=Io.sent,Co=_slicedToArray$1(Lo,2),Ro=Co[0],jo=Co[1],!(Ro||!jo)){Io.next=19;break}throw new Error("\u52A0\u8F7D\u76D2\u5B50\u8D34\u56FE\u5931\u8D25");case 19:jo.encoding=THREE$1.sRGBEncoding,Oo.getObjectByName("box").material.map=jo,Oo.getObjectByName("box2").material.map=jo;case 22:return this.add(Oo),this.openAnime=new _TreasureOpenAnime.TreasurePluginOpenAnime({five:this.five,treasureGroup:Oo,onComplete:function(){var Bo,ko;return(Bo=(ko=To.params).onOpenAnimationEnded)===null||Bo===void 0?void 0:Bo.call(ko,To.treasureID)},animationClip:No.animations[0]}),this.faceAnime=new _TreasureFaceAnime.TreasureFaceAnime({five:this.five,treasureGroup:Oo,loadTexture:this.params.loadTexture,textureUrls:this.params.config.faceAnimeTextureUrls}),this.faceAnime.play(),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("wantsTapGesture",this.onFiveWantsTapGesture),this.five.needsRender=!0,Io.abrupt("return",this);case 30:case"end":return Io.stop()}},Eo,this)}));function wo(){return bo.apply(this,arguments)}return wo}()}]),xo}(THREE$1.Object3D);TreasureObject$1.TreasureObject=TreasureObject;var getTextureLoader$1={},loadTexture$1={};Object.defineProperty(loadTexture$1,"__esModule",{value:!0});loadTexture$1.loadTexture=loadTexture;var _three=require$$1;function asyncGeneratorStep$2(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$2(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$2(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$2(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}var textureLoader=new _three.TextureLoader;function loadTexture(va){return _loadTexture$1.apply(this,arguments)}function _loadTexture$1(){return _loadTexture$1=_asyncToGenerator$2(regeneratorRuntime.mark(function va(_o){return regeneratorRuntime.wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:return bo.abrupt("return",new Promise(function(wo,Eo){textureLoader.load(_o,wo,void 0,Eo)}));case 1:case"end":return bo.stop()}},va)})),_loadTexture$1.apply(this,arguments)}Object.defineProperty(getTextureLoader$1,"__esModule",{value:!0});getTextureLoader$1.getTextureLoader=getTextureLoader;var _loadTexture=loadTexture$1;function getTextureLoader(){var va=new Map,_o=function(wo){if(va.has(wo))return va.get(wo);var Eo=(0,_loadTexture.loadTexture)(wo);return va.set(wo,Eo),Eo},xo=function(){va.forEach(function(wo){return wo.then(function(Eo){return Eo.dispose()})}),va.clear()};return{load:_o,dispose:xo}}var getExtraModelLoader$1={},loadFbxObj$1={};/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l=void 0,aa=mod;function r(va,_o){var xo=va.split("."),bo=aa;!(xo[0]in bo)&&bo.execScript&&bo.execScript("var "+xo[0]);for(var wo;xo.length&&(wo=xo.shift());)!xo.length&&_o!==l?bo[wo]=_o:bo=bo[wo]?bo[wo]:bo[wo]={}}var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v(va){var _o=va.length,xo=0,bo=Number.POSITIVE_INFINITY,wo,Eo,To,So,$o,Do,No,Oo,Lo,Co;for(Oo=0;Oo<_o;++Oo)va[Oo]>xo&&(xo=va[Oo]),va[Oo]<bo&&(bo=va[Oo]);for(wo=1<<xo,Eo=new(t?Uint32Array:Array)(wo),To=1,So=0,$o=2;To<=xo;){for(Oo=0;Oo<_o;++Oo)if(va[Oo]===To){for(Do=0,No=So,Lo=0;Lo<To;++Lo)Do=Do<<1|No&1,No>>=1;for(Co=To<<16|Oo,Lo=Do;Lo<wo;Lo+=$o)Eo[Lo]=Co;++So}++To,So<<=1,$o<<=1}return[Eo,xo,bo]}function w(va,_o){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(va):va,this.m=!1,this.i=y,this.r=!1,(_o||!(_o={}))&&(_o.index&&(this.a=_o.index),_o.bufferSize&&(this.h=_o.bufferSize),_o.bufferType&&(this.i=_o.bufferType),_o.resize&&(this.r=_o.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var va=C(this,3);switch(va&1&&(this.m=!0),va>>>=1,va){case 0:var _o=this.input,xo=this.a,bo=this.c,wo=this.b,Eo=_o.length,To=l,So=l,$o=bo.length,Do=l;if(this.d=this.f=0,xo+1>=Eo)throw Error("invalid uncompressed block header: LEN");if(To=_o[xo++]|_o[xo++]<<8,xo+1>=Eo)throw Error("invalid uncompressed block header: NLEN");if(So=_o[xo++]|_o[xo++]<<8,To===~So)throw Error("invalid uncompressed block header: length verify");if(xo+To>_o.length)throw Error("input buffer is broken");switch(this.i){case A:for(;wo+To>bo.length;){if(Do=$o-wo,To-=Do,t)bo.set(_o.subarray(xo,xo+Do),wo),wo+=Do,xo+=Do;else for(;Do--;)bo[wo++]=_o[xo++];this.b=wo,bo=this.e(),wo=this.b}break;case y:for(;wo+To>bo.length;)bo=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)bo.set(_o.subarray(xo,xo+To),wo),wo+=To,xo+=To;else for(;To--;)bo[wo++]=_o[xo++];this.a=xo,this.b=wo,this.c=bo;break;case 1:this.j(ba,ca);break;case 2:for(var No=C(this,5)+257,Oo=C(this,5)+1,Lo=C(this,4)+4,Co=new(t?Uint8Array:Array)(D.length),Ro=l,jo=l,zo=l,Io=l,Po=l,Bo=l,ko=l,Uo=l,Qo=l,Uo=0;Uo<Lo;++Uo)Co[D[Uo]]=C(this,3);if(!t)for(Uo=Lo,Lo=Co.length;Uo<Lo;++Uo)Co[D[Uo]]=0;for(Ro=v(Co),Io=new(t?Uint8Array:Array)(No+Oo),Uo=0,Qo=No+Oo;Uo<Qo;)switch(Po=E(this,Ro),Po){case 16:for(ko=3+C(this,2);ko--;)Io[Uo++]=Bo;break;case 17:for(ko=3+C(this,3);ko--;)Io[Uo++]=0;Bo=0;break;case 18:for(ko=11+C(this,7);ko--;)Io[Uo++]=0;Bo=0;break;default:Bo=Io[Uo++]=Po}jo=v(t?Io.subarray(0,No):Io.slice(0,No)),zo=v(t?Io.subarray(No):Io.slice(No)),this.j(jo,zo);break;default:throw Error("unknown BTYPE: "+va)}}return this.n()};var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new(t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(va,_o){for(var xo=va.f,bo=va.d,wo=va.input,Eo=va.a,To=wo.length,So;bo<_o;){if(Eo>=To)throw Error("input buffer is broken");xo|=wo[Eo++]<<bo,bo+=8}return So=xo&(1<<_o)-1,va.f=xo>>>_o,va.d=bo-_o,va.a=Eo,So}function E(va,_o){for(var xo=va.f,bo=va.d,wo=va.input,Eo=va.a,To=wo.length,So=_o[0],$o=_o[1],Do,No;bo<$o&&!(Eo>=To);)xo|=wo[Eo++]<<bo,bo+=8;if(Do=So[xo&(1<<$o)-1],No=Do>>>16,No>bo)throw Error("invalid code length: "+No);return va.f=xo>>No,va.d=bo-No,va.a=Eo,Do&65535}w.prototype.j=function(va,_o){var xo=this.c,bo=this.b;this.o=va;for(var wo=xo.length-258,Eo,To,So,$o;(Eo=E(this,va))!==256;)if(256>Eo)bo>=wo&&(this.b=bo,xo=this.e(),bo=this.b),xo[bo++]=Eo;else for(To=Eo-257,$o=I[To],0<K[To]&&($o+=C(this,K[To])),Eo=E(this,_o),So=da[Eo],0<N[Eo]&&(So+=C(this,N[Eo])),bo>=wo&&(this.b=bo,xo=this.e(),bo=this.b);$o--;)xo[bo]=xo[bo++-So];for(;8<=this.d;)this.d-=8,this.a--;this.b=bo};w.prototype.w=function(va,_o){var xo=this.c,bo=this.b;this.o=va;for(var wo=xo.length,Eo,To,So,$o;(Eo=E(this,va))!==256;)if(256>Eo)bo>=wo&&(xo=this.e(),wo=xo.length),xo[bo++]=Eo;else for(To=Eo-257,$o=I[To],0<K[To]&&($o+=C(this,K[To])),Eo=E(this,_o),So=da[Eo],0<N[Eo]&&(So+=C(this,N[Eo])),bo+$o>wo&&(xo=this.e(),wo=xo.length);$o--;)xo[bo]=xo[bo++-So];for(;8<=this.d;)this.d-=8,this.a--;this.b=bo};w.prototype.e=function(){var va=new(t?Uint8Array:Array)(this.b-32768),_o=this.b-32768,xo,bo,wo=this.c;if(t)va.set(wo.subarray(32768,va.length));else for(xo=0,bo=va.length;xo<bo;++xo)va[xo]=wo[xo+32768];if(this.g.push(va),this.l+=va.length,t)wo.set(wo.subarray(_o,_o+32768));else for(xo=0;32768>xo;++xo)wo[xo]=wo[_o+xo];return this.b=32768,wo};w.prototype.z=function(va){var _o,xo=this.input.length/this.a+1|0,bo,wo,Eo,To=this.input,So=this.c;return va&&(typeof va.p=="number"&&(xo=va.p),typeof va.u=="number"&&(xo+=va.u)),2>xo?(bo=(To.length-this.a)/this.o[2],Eo=258*(bo/2)|0,wo=Eo<So.length?So.length+Eo:So.length<<1):wo=So.length*xo,t?(_o=new Uint8Array(wo),_o.set(So)):_o=So,this.c=_o};w.prototype.n=function(){var va=0,_o=this.c,xo=this.g,bo,wo=new(t?Uint8Array:Array)(this.l+(this.b-32768)),Eo,To,So,$o;if(xo.length===0)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Eo=0,To=xo.length;Eo<To;++Eo)for(bo=xo[Eo],So=0,$o=bo.length;So<$o;++So)wo[va++]=bo[So];for(Eo=32768,To=this.b;Eo<To;++Eo)wo[va++]=_o[Eo];return this.g=[],this.buffer=wo};w.prototype.v=function(){var va,_o=this.b;return t?this.r?(va=new Uint8Array(_o),va.set(this.c.subarray(0,_o))):va=this.c.subarray(0,_o):(this.c.length>_o&&(this.c.length=_o),va=this.c),this.buffer=va};function W(va,_o){var xo,bo;switch(this.input=va,this.a=0,(_o||!(_o={}))&&(_o.index&&(this.a=_o.index),_o.verify&&(this.A=_o.verify)),xo=va[this.a++],bo=va[this.a++],xo&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((xo<<8)+bo)%31!=0)throw Error("invalid fcheck flag:"+((xo<<8)+bo)%31);if(bo&32)throw Error("fdict flag is not supported");this.q=new w(va,{index:this.a,bufferSize:_o.bufferSize,bufferType:_o.bufferType,resize:_o.resize})}W.prototype.k=function(){var va=this.input,_o,xo;if(_o=this.q.k(),this.a=this.q.a,this.A){xo=(va[this.a++]<<24|va[this.a++]<<16|va[this.a++]<<8|va[this.a++])>>>0;var bo=_o;if(typeof bo=="string"){var wo=bo.split(""),Eo,To;for(Eo=0,To=wo.length;Eo<To;Eo++)wo[Eo]=(wo[Eo].charCodeAt(0)&255)>>>0;bo=wo}for(var So=1,$o=0,Do=bo.length,No,Oo=0;0<Do;){No=1024<Do?1024:Do,Do-=No;do So+=bo[Oo++],$o+=So;while(--No);So%=65521,$o%=65521}if(xo!==($o<<16|So)>>>0)throw Error("invalid adler-32 checksum")}return _o};var ha=8;r("Zlib.Inflate",W);r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(va,_o,xo){var bo=xo.length-va-1;if(_o>=xo[bo])return bo-1;if(_o<=xo[va])return va;for(var wo=va,Eo=bo,To=Math.floor((wo+Eo)/2);_o<xo[To]||_o>=xo[To+1];)_o<xo[To]?Eo=To:wo=To,To=Math.floor((wo+Eo)/2);return To},calcBasisFunctions:function(va,_o,xo,bo){var wo=[],Eo=[],To=[];wo[0]=1;for(var So=1;So<=xo;++So){Eo[So]=_o-bo[va+1-So],To[So]=bo[va+So]-_o;for(var $o=0,Do=0;Do<So;++Do){var No=To[Do+1],Oo=Eo[So-Do],Lo=wo[Do]/(No+Oo);wo[Do]=$o+No*Lo,$o=Oo*Lo}wo[So]=$o}return wo},calcBSplinePoint:function(va,_o,xo,bo){for(var wo=this.findSpan(va,bo,_o),Eo=this.calcBasisFunctions(wo,bo,va,_o),To=new Vector4(0,0,0,0),So=0;So<=va;++So){var $o=xo[wo-va+So],Do=Eo[So],No=$o.w*Do;To.x+=$o.x*No,To.y+=$o.y*No,To.z+=$o.z*No,To.w+=$o.w*Do}return To},calcBasisFunctionDerivatives:function(va,_o,xo,bo,wo){for(var Eo=[],To=0;To<=xo;++To)Eo[To]=0;for(var So=[],To=0;To<=bo;++To)So[To]=Eo.slice(0);for(var $o=[],To=0;To<=xo;++To)$o[To]=Eo.slice(0);$o[0][0]=1;for(var Do=Eo.slice(0),No=Eo.slice(0),Oo=1;Oo<=xo;++Oo){Do[Oo]=_o-wo[va+1-Oo],No[Oo]=wo[va+Oo]-_o;for(var Lo=0,Xo=0;Xo<Oo;++Xo){var Co=No[Xo+1],Ro=Do[Oo-Xo];$o[Oo][Xo]=Co+Ro;var jo=$o[Xo][Oo-1]/$o[Oo][Xo];$o[Xo][Oo]=Lo+Co*jo,Lo=Ro*jo}$o[Oo][Oo]=Lo}for(var Oo=0;Oo<=xo;++Oo)So[0][Oo]=$o[Oo][xo];for(var Xo=0;Xo<=xo;++Xo){for(var zo=0,Io=1,Po=[],To=0;To<=xo;++To)Po[To]=Eo.slice(0);Po[0][0]=1;for(var Bo=1;Bo<=bo;++Bo){var ko=0,Uo=Xo-Bo,Qo=xo-Bo;Xo>=Bo&&(Po[Io][0]=Po[zo][0]/$o[Qo+1][Uo],ko=Po[Io][0]*$o[Uo][Qo]);for(var qo=Uo>=-1?1:-Uo,Zo=Xo-1<=Qo?Bo-1:xo-Xo,Oo=qo;Oo<=Zo;++Oo)Po[Io][Oo]=(Po[zo][Oo]-Po[zo][Oo-1])/$o[Qo+1][Uo+Oo],ko+=Po[Io][Oo]*$o[Uo+Oo][Qo];Xo<=Qo&&(Po[Io][Bo]=-Po[zo][Bo-1]/$o[Qo+1][Xo],ko+=Po[Io][Bo]*$o[Xo][Qo]),So[Bo][Xo]=ko;var Oo=zo;zo=Io,Io=Oo}}for(var Xo=xo,Bo=1;Bo<=bo;++Bo){for(var Oo=0;Oo<=xo;++Oo)So[Bo][Oo]*=Xo;Xo*=xo-Bo}return So},calcBSplineDerivatives:function(va,_o,xo,bo,wo){for(var Eo=wo<va?wo:va,To=[],So=this.findSpan(va,bo,_o),$o=this.calcBasisFunctionDerivatives(So,bo,va,Eo,_o),Do=[],No=0;No<xo.length;++No){var Oo=xo[No].clone(),Lo=Oo.w;Oo.x*=Lo,Oo.y*=Lo,Oo.z*=Lo,Do[No]=Oo}for(var Co=0;Co<=Eo;++Co){for(var Oo=Do[So-va].clone().multiplyScalar($o[Co][0]),Ro=1;Ro<=va;++Ro)Oo.add(Do[So-va+Ro].clone().multiplyScalar($o[Co][Ro]));To[Co]=Oo}for(var Co=Eo+1;Co<=wo+1;++Co)To[Co]=new Vector4(0,0,0);return To},calcKoverI:function(va,_o){for(var xo=1,bo=2;bo<=va;++bo)xo*=bo;for(var wo=1,bo=2;bo<=_o;++bo)wo*=bo;for(var bo=2;bo<=va-_o;++bo)wo*=bo;return xo/wo},calcRationalCurveDerivatives:function(va){for(var _o=va.length,xo=[],bo=[],wo=0;wo<_o;++wo){var Eo=va[wo];xo[wo]=new Vector3(Eo.x,Eo.y,Eo.z),bo[wo]=Eo.w}for(var To=[],So=0;So<_o;++So){for(var $o=xo[So].clone(),wo=1;wo<=So;++wo)$o.sub(To[So-wo].clone().multiplyScalar(this.calcKoverI(So,wo)*bo[wo]));To[So]=$o.divideScalar(bo[0])}return To},calcNURBSDerivatives:function(va,_o,xo,bo,wo){var Eo=this.calcBSplineDerivatives(va,_o,xo,bo,wo);return this.calcRationalCurveDerivatives(Eo)},calcSurfacePoint:function(va,_o,xo,bo,wo,Eo,To,So){for(var $o=this.findSpan(va,Eo,xo),Do=this.findSpan(_o,To,bo),No=this.calcBasisFunctions($o,Eo,va,xo),Oo=this.calcBasisFunctions(Do,To,_o,bo),Lo=[],Co=0;Co<=_o;++Co){Lo[Co]=new Vector4(0,0,0,0);for(var Ro=0;Ro<=va;++Ro){var jo=wo[$o-va+Ro][Do-_o+Co].clone(),zo=jo.w;jo.x*=zo,jo.y*=zo,jo.z*=zo,Lo[Co].add(jo.multiplyScalar(No[Ro]))}}for(var Io=new Vector4(0,0,0,0),Co=0;Co<=_o;++Co)Io.add(Lo[Co].multiplyScalar(Oo[Co]));Io.divideScalar(Io.w),So.set(Io.x,Io.y,Io.z)}},NURBSCurve=function(va,_o,xo,bo,wo){Curve.call(this),this.degree=va,this.knots=_o,this.controlPoints=[],this.startKnot=bo||0,this.endKnot=wo||this.knots.length-1;for(var Eo=0;Eo<xo.length;++Eo){var To=xo[Eo];this.controlPoints[Eo]=new Vector4(To.x,To.y,To.z,To.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(va,_o){var xo=_o||new Vector3,bo=this.knots[this.startKnot]+va*(this.knots[this.endKnot]-this.knots[this.startKnot]),wo=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,bo);return wo.w!=1&&wo.divideScalar(wo.w),xo.set(wo.x,wo.y,wo.z)};NURBSCurve.prototype.getTangent=function(va,_o){var xo=_o||new Vector3,bo=this.knots[0]+va*(this.knots[this.knots.length-1]-this.knots[0]),wo=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,bo,1);return xo.copy(wo[1]).normalize(),xo};var FBXLoader=function(){var va,_o,xo;function bo(Fo){Loader.call(this,Fo)}bo.prototype=Object.assign(Object.create(Loader.prototype),{constructor:bo,load:function(Fo,Go,Vo,Wo){var Yo=this,Ko=Yo.path===""?LoaderUtils.extractUrlBase(Fo):Yo.path,ts=new FileLoader(this.manager);ts.setPath(Yo.path),ts.setResponseType("arraybuffer"),ts.load(Fo,function(Jo){try{Go(Yo.parse(Jo,Ko))}catch(rs){Wo?Wo(rs):console.error(rs),Yo.manager.itemError(Fo)}},Vo,Wo)},parse:function(Fo,Go){if(Oo(Fo))va=new $o().parse(Fo);else{var Vo=Qo(Fo);if(!Lo(Vo))throw new Error("THREE.FBXLoader: Unknown format.");if(Co(Vo)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Co(Vo));va=new So().parse(Vo)}var Wo=new TextureLoader(this.manager).setPath(this.resourcePath||Go).setCrossOrigin(this.crossOrigin);return new wo(Wo,this.manager).parse(va)}});function wo(Fo,Go){this.textureLoader=Fo,this.manager=Go}wo.prototype={constructor:wo,parse:function(){_o=this.parseConnections();var Fo=this.parseImages(),Go=this.parseTextures(Fo),Vo=this.parseMaterials(Go),Wo=this.parseDeformers(),Yo=new Eo().parse(Wo);return this.parseScene(Wo,Yo,Vo),xo},parseConnections:function(){var Fo=new Map;if("Connections"in va){var Go=va.Connections.connections;Go.forEach(function(Vo){var Wo=Vo[0],Yo=Vo[1],Ko=Vo[2];Fo.has(Wo)||Fo.set(Wo,{parents:[],children:[]});var ts={ID:Yo,relationship:Ko};Fo.get(Wo).parents.push(ts),Fo.has(Yo)||Fo.set(Yo,{parents:[],children:[]});var Jo={ID:Wo,relationship:Ko};Fo.get(Yo).children.push(Jo)})}return Fo},parseImages:function(){var Fo={},Go={};if("Video"in va.Objects){var Vo=va.Objects.Video;for(var Wo in Vo){var Yo=Vo[Wo],Ko=parseInt(Wo);if(Fo[Ko]=Yo.RelativeFilename||Yo.Filename,"Content"in Yo){var ts=Yo.Content instanceof ArrayBuffer&&Yo.Content.byteLength>0,Jo=typeof Yo.Content=="string"&&Yo.Content!=="";if(ts||Jo){var rs=this.parseImage(Vo[Wo]);Go[Yo.RelativeFilename||Yo.Filename]=rs}}}}for(var Ko in Fo){var ls=Fo[Ko];Go[ls]!==void 0?Fo[Ko]=Go[ls]:Fo[Ko]=Fo[Ko].split("\\").pop()}return Fo},parseImage:function(Fo){var Go=Fo.Content,Vo=Fo.RelativeFilename||Fo.Filename,Wo=Vo.slice(Vo.lastIndexOf(".")+1).toLowerCase(),Yo;switch(Wo){case"bmp":Yo="image/bmp";break;case"jpg":case"jpeg":Yo="image/jpeg";break;case"png":Yo="image/png";break;case"tif":Yo="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",Vo),Yo="image/tga";break;default:console.warn('FBXLoader: Image type "'+Wo+'" is not supported.');return}if(typeof Go=="string")return"data:"+Yo+";base64,"+Go;var Ko=new Uint8Array(Go);return window.URL.createObjectURL(new Blob([Ko],{type:Yo}))},parseTextures:function(Fo){var Go=new Map;if("Texture"in va.Objects){var Vo=va.Objects.Texture;for(var Wo in Vo){var Yo=this.parseTexture(Vo[Wo],Fo);Go.set(parseInt(Wo),Yo)}}return Go},parseTexture:function(Fo,Go){var Vo=this.loadTexture(Fo,Go);Vo.ID=Fo.id,Vo.name=Fo.attrName;var Wo=Fo.WrapModeU,Yo=Fo.WrapModeV,Ko=Wo!==void 0?Wo.value:0,ts=Yo!==void 0?Yo.value:0;if(Vo.wrapS=Ko===0?RepeatWrapping:ClampToEdgeWrapping,Vo.wrapT=ts===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in Fo){var Jo=Fo.Scaling.value;Vo.repeat.x=Jo[0],Vo.repeat.y=Jo[1]}return Vo},loadTexture:function(Fo,Go){var Vo,Wo=this.textureLoader.path,Yo=_o.get(Fo.id).children;Yo!==void 0&&Yo.length>0&&Go[Yo[0].ID]!==void 0&&(Vo=Go[Yo[0].ID],(Vo.indexOf("blob:")===0||Vo.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var Ko,ts=Fo.FileName.slice(-3).toLowerCase();if(ts==="tga"){var Jo=this.manager.getHandler(".tga");Jo===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",Fo.RelativeFilename),Ko=new Texture):Ko=Jo.load(Vo)}else ts==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",Fo.RelativeFilename),Ko=new Texture):Ko=this.textureLoader.load(Vo);return this.textureLoader.setPath(Wo),Ko},parseMaterials:function(Fo){var Go=new Map;if("Material"in va.Objects){var Vo=va.Objects.Material;for(var Wo in Vo){var Yo=this.parseMaterial(Vo[Wo],Fo);Yo!==null&&Go.set(parseInt(Wo),Yo)}}return Go},parseMaterial:function(Fo,Go){var Vo=Fo.id,Wo=Fo.attrName,Yo=Fo.ShadingModel;if(typeof Yo=="object"&&(Yo=Yo.value),!_o.has(Vo))return null;var Ko=this.parseParameters(Fo,Go,Vo),ts;switch(Yo.toLowerCase()){case"phong":ts=new MeshPhongMaterial;break;case"lambert":ts=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',Yo),ts=new MeshPhongMaterial;break}return ts.setValues(Ko),ts.name=Wo,ts},parseParameters:function(Fo,Go,Vo){var Wo={};Fo.BumpFactor&&(Wo.bumpScale=Fo.BumpFactor.value),Fo.Diffuse?Wo.color=new Color().fromArray(Fo.Diffuse.value):Fo.DiffuseColor&&Fo.DiffuseColor.type==="Color"&&(Wo.color=new Color().fromArray(Fo.DiffuseColor.value)),Fo.DisplacementFactor&&(Wo.displacementScale=Fo.DisplacementFactor.value),Fo.Emissive?Wo.emissive=new Color().fromArray(Fo.Emissive.value):Fo.EmissiveColor&&Fo.EmissiveColor.type==="Color"&&(Wo.emissive=new Color().fromArray(Fo.EmissiveColor.value)),Fo.EmissiveFactor&&(Wo.emissiveIntensity=parseFloat(Fo.EmissiveFactor.value)),Fo.Opacity&&(Wo.opacity=parseFloat(Fo.Opacity.value)),Wo.opacity<1&&(Wo.transparent=!0),Fo.ReflectionFactor&&(Wo.reflectivity=Fo.ReflectionFactor.value),Fo.Shininess&&(Wo.shininess=Fo.Shininess.value),Fo.Specular?Wo.specular=new Color().fromArray(Fo.Specular.value):Fo.SpecularColor&&Fo.SpecularColor.type==="Color"&&(Wo.specular=new Color().fromArray(Fo.SpecularColor.value));var Yo=this;return _o.get(Vo).children.forEach(function(Ko){var ts=Ko.relationship;switch(ts){case"Bump":Wo.bumpMap=Yo.getTexture(Go,Ko.ID);break;case"Maya|TEX_ao_map":Wo.aoMap=Yo.getTexture(Go,Ko.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":Wo.map=Yo.getTexture(Go,Ko.ID),Wo.map.encoding=sRGBEncoding;break;case"DisplacementColor":Wo.displacementMap=Yo.getTexture(Go,Ko.ID);break;case"EmissiveColor":Wo.emissiveMap=Yo.getTexture(Go,Ko.ID),Wo.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":Wo.normalMap=Yo.getTexture(Go,Ko.ID);break;case"ReflectionColor":Wo.envMap=Yo.getTexture(Go,Ko.ID),Wo.envMap.mapping=EquirectangularReflectionMapping,Wo.envMap.encoding=sRGBEncoding;break;case"SpecularColor":Wo.specularMap=Yo.getTexture(Go,Ko.ID),Wo.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":Wo.alphaMap=Yo.getTexture(Go,Ko.ID),Wo.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",ts);break}}),Wo},getTexture:function(Fo,Go){return"LayeredTexture"in va.Objects&&Go in va.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Go=_o.get(Go).children[0].ID),Fo.get(Go)},parseDeformers:function(){var Fo={},Go={};if("Deformer"in va.Objects){var Vo=va.Objects.Deformer;for(var Wo in Vo){var Yo=Vo[Wo],Ko=_o.get(parseInt(Wo));if(Yo.attrType==="Skin"){var ts=this.parseSkeleton(Ko,Vo);ts.ID=Wo,Ko.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),ts.geometryID=Ko.parents[0].ID,Fo[Wo]=ts}else if(Yo.attrType==="BlendShape"){var Jo={id:Wo};Jo.rawTargets=this.parseMorphTargets(Ko,Vo),Jo.id=Wo,Ko.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Go[Wo]=Jo}}}return{skeletons:Fo,morphTargets:Go}},parseSkeleton:function(Fo,Go){var Vo=[];return Fo.children.forEach(function(Wo){var Yo=Go[Wo.ID];if(Yo.attrType==="Cluster"){var Ko={ID:Wo.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(Yo.TransformLink.a)};"Indexes"in Yo&&(Ko.indices=Yo.Indexes.a,Ko.weights=Yo.Weights.a),Vo.push(Ko)}}),{rawBones:Vo,bones:[]}},parseMorphTargets:function(Fo,Go){for(var Vo=[],Wo=0;Wo<Fo.children.length;Wo++){var Yo=Fo.children[Wo],Ko=Go[Yo.ID],ts={name:Ko.attrName,initialWeight:Ko.DeformPercent,id:Ko.id,fullWeights:Ko.FullWeights.a};if(Ko.attrType!=="BlendShapeChannel")return;ts.geoID=_o.get(parseInt(Yo.ID)).children.filter(function(Jo){return Jo.relationship===void 0})[0].ID,Vo.push(ts)}return Vo},parseScene:function(Fo,Go,Vo){xo=new Group$1;var Wo=this.parseModels(Fo.skeletons,Go,Vo),Yo=va.Objects.Model,Ko=this;Wo.forEach(function(Jo){var rs=Yo[Jo.ID];Ko.setLookAtProperties(Jo,rs);var ls=_o.get(Jo.ID).parents;ls.forEach(function(ss){var us=Wo.get(ss.ID);us!==void 0&&us.add(Jo)}),Jo.parent===null&&xo.add(Jo)}),this.bindSkeleton(Fo.skeletons,Go,Wo),this.createAmbientLight(),this.setupMorphMaterials(),xo.traverse(function(Jo){if(Jo.userData.transformData){Jo.parent&&(Jo.userData.transformData.parentMatrixWorld=Jo.parent.matrix);var rs=Bo(Jo.userData.transformData);Jo.applyMatrix4(rs)}});var ts=new To().parse();xo.children.length===1&&xo.children[0].isGroup&&(xo.children[0].animations=ts,xo=xo.children[0]),xo.animations=ts},parseModels:function(Fo,Go,Vo){var Wo=new Map,Yo=va.Objects.Model;for(var Ko in Yo){var ts=parseInt(Ko),Jo=Yo[Ko],rs=_o.get(ts),ls=this.buildSkeleton(rs,Fo,ts,Jo.attrName);if(!ls){switch(Jo.attrType){case"Camera":ls=this.createCamera(rs);break;case"Light":ls=this.createLight(rs);break;case"Mesh":ls=this.createMesh(rs,Go,Vo);break;case"NurbsCurve":ls=this.createCurve(rs,Go);break;case"LimbNode":case"Root":ls=new Bone;break;case"Null":default:ls=new Group$1;break}ls.name=Jo.attrName?PropertyBinding.sanitizeNodeName(Jo.attrName):"",ls.ID=ts}this.getTransformData(ls,Jo),Wo.set(ts,ls)}return Wo},buildSkeleton:function(Fo,Go,Vo,Wo){var Yo=null;return Fo.parents.forEach(function(Ko){for(var ts in Go){var Jo=Go[ts];Jo.rawBones.forEach(function(rs,ls){if(rs.ID===Ko.ID){var ss=Yo;Yo=new Bone,Yo.matrixWorld.copy(rs.transformLink),Yo.name=Wo?PropertyBinding.sanitizeNodeName(Wo):"",Yo.ID=Vo,Jo.bones[ls]=Yo,ss!==null&&Yo.add(ss)}})}}),Yo},createCamera:function(Fo){var Go,Vo;if(Fo.children.forEach(function(us){var ms=va.Objects.NodeAttribute[us.ID];ms!==void 0&&(Vo=ms)}),Vo===void 0)Go=new Object3D;else{var Wo=0;Vo.CameraProjectionType!==void 0&&Vo.CameraProjectionType.value===1&&(Wo=1);var Yo=1;Vo.NearPlane!==void 0&&(Yo=Vo.NearPlane.value/1e3);var Ko=1e3;Vo.FarPlane!==void 0&&(Ko=Vo.FarPlane.value/1e3);var ts=window.innerWidth,Jo=window.innerHeight;Vo.AspectWidth!==void 0&&Vo.AspectHeight!==void 0&&(ts=Vo.AspectWidth.value,Jo=Vo.AspectHeight.value);var rs=ts/Jo,ls=45;Vo.FieldOfView!==void 0&&(ls=Vo.FieldOfView.value);var ss=Vo.FocalLength?Vo.FocalLength.value:null;switch(Wo){case 0:Go=new PerspectiveCamera(ls,rs,Yo,Ko),ss!==null&&Go.setFocalLength(ss);break;case 1:Go=new OrthographicCamera(-ts/2,ts/2,Jo/2,-Jo/2,Yo,Ko);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+Wo+"."),Go=new Object3D;break}}return Go},createLight:function(Fo){var Go,Vo;if(Fo.children.forEach(function(ss){var us=va.Objects.NodeAttribute[ss.ID];us!==void 0&&(Vo=us)}),Vo===void 0)Go=new Object3D;else{var Wo;Vo.LightType===void 0?Wo=0:Wo=Vo.LightType.value;var Yo=16777215;Vo.Color!==void 0&&(Yo=new Color().fromArray(Vo.Color.value));var Ko=Vo.Intensity===void 0?1:Vo.Intensity.value/100;Vo.CastLightOnObject!==void 0&&Vo.CastLightOnObject.value===0&&(Ko=0);var ts=0;Vo.FarAttenuationEnd!==void 0&&(Vo.EnableFarAttenuation!==void 0&&Vo.EnableFarAttenuation.value===0?ts=0:ts=Vo.FarAttenuationEnd.value);var Jo=1;switch(Wo){case 0:Go=new PointLight(Yo,Ko,ts,Jo);break;case 1:Go=new DirectionalLight(Yo,Ko);break;case 2:var rs=Math.PI/3;Vo.InnerAngle!==void 0&&(rs=MathUtils.degToRad(Vo.InnerAngle.value));var ls=0;Vo.OuterAngle!==void 0&&(ls=MathUtils.degToRad(Vo.OuterAngle.value),ls=Math.max(ls,1)),Go=new SpotLight(Yo,Ko,ts,rs,ls,Jo);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Vo.LightType.value+", defaulting to a PointLight."),Go=new PointLight(Yo,Ko);break}Vo.CastShadows!==void 0&&Vo.CastShadows.value===1&&(Go.castShadow=!0)}return Go},createMesh:function(Fo,Go,Vo){var Wo,Yo=null,Ko=null,ts=[];return Fo.children.forEach(function(Jo){Go.has(Jo.ID)&&(Yo=Go.get(Jo.ID)),Vo.has(Jo.ID)&&ts.push(Vo.get(Jo.ID))}),ts.length>1?Ko=ts:ts.length>0?Ko=ts[0]:(Ko=new MeshPhongMaterial({color:13421772}),ts.push(Ko)),"color"in Yo.attributes&&ts.forEach(function(Jo){Jo.vertexColors=!0}),Yo.FBX_Deformer?(ts.forEach(function(Jo){Jo.skinning=!0}),Wo=new SkinnedMesh(Yo,Ko),Wo.normalizeSkinWeights()):Wo=new Mesh(Yo,Ko),Wo},createCurve:function(Fo,Go){var Vo=Fo.children.reduce(function(Yo,Ko){return Go.has(Ko.ID)&&(Yo=Go.get(Ko.ID)),Yo},null),Wo=new LineBasicMaterial({color:3342591,linewidth:1});return new Line(Vo,Wo)},getTransformData:function(Fo,Go){var Vo={};"InheritType"in Go&&(Vo.inheritType=parseInt(Go.InheritType.value)),"RotationOrder"in Go?Vo.eulerOrder=ko(Go.RotationOrder.value):Vo.eulerOrder="ZYX","Lcl_Translation"in Go&&(Vo.translation=Go.Lcl_Translation.value),"PreRotation"in Go&&(Vo.preRotation=Go.PreRotation.value),"Lcl_Rotation"in Go&&(Vo.rotation=Go.Lcl_Rotation.value),"PostRotation"in Go&&(Vo.postRotation=Go.PostRotation.value),"Lcl_Scaling"in Go&&(Vo.scale=Go.Lcl_Scaling.value),"ScalingOffset"in Go&&(Vo.scalingOffset=Go.ScalingOffset.value),"ScalingPivot"in Go&&(Vo.scalingPivot=Go.ScalingPivot.value),"RotationOffset"in Go&&(Vo.rotationOffset=Go.RotationOffset.value),"RotationPivot"in Go&&(Vo.rotationPivot=Go.RotationPivot.value),Fo.userData.transformData=Vo},setLookAtProperties:function(Fo,Go){if("LookAtProperty"in Go){var Vo=_o.get(Fo.ID).children;Vo.forEach(function(Wo){if(Wo.relationship==="LookAtProperty"){var Yo=va.Objects.Model[Wo.ID];if("Lcl_Translation"in Yo){var Ko=Yo.Lcl_Translation.value;Fo.target!==void 0?(Fo.target.position.fromArray(Ko),xo.add(Fo.target)):Fo.lookAt(new Vector3().fromArray(Ko))}}})}},bindSkeleton:function(Fo,Go,Vo){var Wo=this.parsePoseNodes();for(var Yo in Fo){var Ko=Fo[Yo],ts=_o.get(parseInt(Ko.ID)).parents;ts.forEach(function(Jo){if(Go.has(Jo.ID)){var rs=Jo.ID,ls=_o.get(rs);ls.parents.forEach(function(ss){if(Vo.has(ss.ID)){var us=Vo.get(ss.ID);us.bind(new Skeleton(Ko.bones),Wo[ss.ID])}})}})}},parsePoseNodes:function(){var Fo={};if("Pose"in va.Objects){var Go=va.Objects.Pose;for(var Vo in Go)if(Go[Vo].attrType==="BindPose"){var Wo=Go[Vo].PoseNode;Array.isArray(Wo)?Wo.forEach(function(Yo){Fo[Yo.Node]=new Matrix4().fromArray(Yo.Matrix.a)}):Fo[Wo.Node]=new Matrix4().fromArray(Wo.Matrix.a)}}return Fo},createAmbientLight:function(){if("GlobalSettings"in va&&"AmbientColor"in va.GlobalSettings){var Fo=va.GlobalSettings.AmbientColor.value,Go=Fo[0],Vo=Fo[1],Wo=Fo[2];if(Go!==0||Vo!==0||Wo!==0){var Yo=new Color(Go,Vo,Wo);xo.add(new AmbientLight(Yo,1))}}},setupMorphMaterials:function(){var Fo=this;xo.traverse(function(Go){Go.isMesh&&Go.geometry.morphAttributes.position&&Go.geometry.morphAttributes.position.length&&(Array.isArray(Go.material)?Go.material.forEach(function(Vo,Wo){Fo.setupMorphMaterial(Go,Vo,Wo)}):Fo.setupMorphMaterial(Go,Go.material))})},setupMorphMaterial:function(Fo,Go,Vo){var Wo=Fo.uuid,Yo=Go.uuid,Ko=!1;if(xo.traverse(function(Jo){Jo.isMesh&&(Array.isArray(Jo.material)?Jo.material.forEach(function(rs){rs.uuid===Yo&&Jo.uuid!==Wo&&(Ko=!0)}):Jo.material.uuid===Yo&&Jo.uuid!==Wo&&(Ko=!0))}),Ko===!0){var ts=Go.clone();ts.morphTargets=!0,Vo===void 0?Fo.material=ts:Fo.material[Vo]=ts}else Go.morphTargets=!0}};function Eo(){}Eo.prototype={constructor:Eo,parse:function(Fo){var Go=new Map;if("Geometry"in va.Objects){var Vo=va.Objects.Geometry;for(var Wo in Vo){var Yo=_o.get(parseInt(Wo)),Ko=this.parseGeometry(Yo,Vo[Wo],Fo);Go.set(parseInt(Wo),Ko)}}return Go},parseGeometry:function(Fo,Go,Vo){switch(Go.attrType){case"Mesh":return this.parseMeshGeometry(Fo,Go,Vo);case"NurbsCurve":return this.parseNurbsGeometry(Go)}},parseMeshGeometry:function(Fo,Go,Vo){var Wo=Vo.skeletons,Yo=[],Ko=Fo.parents.map(function(ss){return va.Objects.Model[ss.ID]});if(Ko.length!==0){var ts=Fo.children.reduce(function(ss,us){return Wo[us.ID]!==void 0&&(ss=Wo[us.ID]),ss},null);Fo.children.forEach(function(ss){Vo.morphTargets[ss.ID]!==void 0&&Yo.push(Vo.morphTargets[ss.ID])});var Jo=Ko[0],rs={};"RotationOrder"in Jo&&(rs.eulerOrder=ko(Jo.RotationOrder.value)),"InheritType"in Jo&&(rs.inheritType=parseInt(Jo.InheritType.value)),"GeometricTranslation"in Jo&&(rs.translation=Jo.GeometricTranslation.value),"GeometricRotation"in Jo&&(rs.rotation=Jo.GeometricRotation.value),"GeometricScaling"in Jo&&(rs.scale=Jo.GeometricScaling.value);var ls=Bo(rs);return this.genGeometry(Go,ts,Yo,ls)}},genGeometry:function(Fo,Go,Vo,Wo){var Yo=new BufferGeometry;Fo.attrName&&(Yo.name=Fo.attrName);var Ko=this.parseGeoNode(Fo,Go),ts=this.genBuffers(Ko),Jo=new Float32BufferAttribute(ts.vertex,3);if(Jo.applyMatrix4(Wo),Yo.setAttribute("position",Jo),ts.colors.length>0&&Yo.setAttribute("color",new Float32BufferAttribute(ts.colors,3)),Go&&(Yo.setAttribute("skinIndex",new Uint16BufferAttribute(ts.weightsIndices,4)),Yo.setAttribute("skinWeight",new Float32BufferAttribute(ts.vertexWeights,4)),Yo.FBX_Deformer=Go),ts.normal.length>0){var rs=new Matrix3().getNormalMatrix(Wo),ls=new Float32BufferAttribute(ts.normal,3);ls.applyNormalMatrix(rs),Yo.setAttribute("normal",ls)}if(ts.uvs.forEach(function(Os,Es){var Ms="uv"+(Es+1).toString();Es===0&&(Ms="uv"),Yo.setAttribute(Ms,new Float32BufferAttribute(ts.uvs[Es],2))}),Ko.material&&Ko.material.mappingType!=="AllSame"){var ss=ts.materialIndex[0],us=0;if(ts.materialIndex.forEach(function(Os,Es){Os!==ss&&(Yo.addGroup(us,Es-us,ss),ss=Os,us=Es)}),Yo.groups.length>0){var ms=Yo.groups[Yo.groups.length-1],As=ms.start+ms.count;As!==ts.materialIndex.length&&Yo.addGroup(As,ts.materialIndex.length-As,ss)}Yo.groups.length===0&&Yo.addGroup(0,ts.materialIndex.length,ts.materialIndex[0])}return this.addMorphTargets(Yo,Fo,Vo,Wo),Yo},parseGeoNode:function(Fo,Go){var Vo={};if(Vo.vertexPositions=Fo.Vertices!==void 0?Fo.Vertices.a:[],Vo.vertexIndices=Fo.PolygonVertexIndex!==void 0?Fo.PolygonVertexIndex.a:[],Fo.LayerElementColor&&(Vo.color=this.parseVertexColors(Fo.LayerElementColor[0])),Fo.LayerElementMaterial&&(Vo.material=this.parseMaterialIndices(Fo.LayerElementMaterial[0])),Fo.LayerElementNormal&&(Vo.normal=this.parseNormals(Fo.LayerElementNormal[0])),Fo.LayerElementUV){Vo.uv=[];for(var Wo=0;Fo.LayerElementUV[Wo];)Vo.uv.push(this.parseUVs(Fo.LayerElementUV[Wo])),Wo++}return Vo.weightTable={},Go!==null&&(Vo.skeleton=Go,Go.rawBones.forEach(function(Yo,Ko){Yo.indices.forEach(function(ts,Jo){Vo.weightTable[ts]===void 0&&(Vo.weightTable[ts]=[]),Vo.weightTable[ts].push({id:Ko,weight:Yo.weights[Jo]})})})),Vo},genBuffers:function(Fo){var Go={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Vo=0,Wo=0,Yo=!1,Ko=[],ts=[],Jo=[],rs=[],ls=[],ss=[],us=this;return Fo.vertexIndices.forEach(function(ms,As){var Os=!1;ms<0&&(ms=ms^-1,Os=!0);var Es=[],Ms=[];if(Ko.push(ms*3,ms*3+1,ms*3+2),Fo.color){var $s=zo(As,Vo,ms,Fo.color);Jo.push($s[0],$s[1],$s[2])}if(Fo.skeleton){if(Fo.weightTable[ms]!==void 0&&Fo.weightTable[ms].forEach(function(Bs){Ms.push(Bs.weight),Es.push(Bs.id)}),Ms.length>4){Yo||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),Yo=!0);var ks=[0,0,0,0],zs=[0,0,0,0];Ms.forEach(function(Bs,Fs){var Zs=Bs,bu=Es[Fs];zs.forEach(function(Au,ds,cs){if(Zs>Au){cs[ds]=Zs,Zs=Au;var bs=ks[ds];ks[ds]=bu,bu=bs}})}),Es=ks,Ms=zs}for(;Ms.length<4;)Ms.push(0),Es.push(0);for(var Cs=0;Cs<4;++Cs)ls.push(Ms[Cs]),ss.push(Es[Cs])}if(Fo.normal){var $s=zo(As,Vo,ms,Fo.normal);ts.push($s[0],$s[1],$s[2])}if(Fo.material&&Fo.material.mappingType!=="AllSame")var xs=zo(As,Vo,ms,Fo.material)[0];Fo.uv&&Fo.uv.forEach(function(Bs,Fs){var Zs=zo(As,Vo,ms,Bs);rs[Fs]===void 0&&(rs[Fs]=[]),rs[Fs].push(Zs[0]),rs[Fs].push(Zs[1])}),Wo++,Os&&(us.genFace(Go,Fo,Ko,xs,ts,Jo,rs,ls,ss,Wo),Vo++,Wo=0,Ko=[],ts=[],Jo=[],rs=[],ls=[],ss=[])}),Go},genFace:function(Fo,Go,Vo,Wo,Yo,Ko,ts,Jo,rs,ls){for(var ss=2;ss<ls;ss++)Fo.vertex.push(Go.vertexPositions[Vo[0]]),Fo.vertex.push(Go.vertexPositions[Vo[1]]),Fo.vertex.push(Go.vertexPositions[Vo[2]]),Fo.vertex.push(Go.vertexPositions[Vo[(ss-1)*3]]),Fo.vertex.push(Go.vertexPositions[Vo[(ss-1)*3+1]]),Fo.vertex.push(Go.vertexPositions[Vo[(ss-1)*3+2]]),Fo.vertex.push(Go.vertexPositions[Vo[ss*3]]),Fo.vertex.push(Go.vertexPositions[Vo[ss*3+1]]),Fo.vertex.push(Go.vertexPositions[Vo[ss*3+2]]),Go.skeleton&&(Fo.vertexWeights.push(Jo[0]),Fo.vertexWeights.push(Jo[1]),Fo.vertexWeights.push(Jo[2]),Fo.vertexWeights.push(Jo[3]),Fo.vertexWeights.push(Jo[(ss-1)*4]),Fo.vertexWeights.push(Jo[(ss-1)*4+1]),Fo.vertexWeights.push(Jo[(ss-1)*4+2]),Fo.vertexWeights.push(Jo[(ss-1)*4+3]),Fo.vertexWeights.push(Jo[ss*4]),Fo.vertexWeights.push(Jo[ss*4+1]),Fo.vertexWeights.push(Jo[ss*4+2]),Fo.vertexWeights.push(Jo[ss*4+3]),Fo.weightsIndices.push(rs[0]),Fo.weightsIndices.push(rs[1]),Fo.weightsIndices.push(rs[2]),Fo.weightsIndices.push(rs[3]),Fo.weightsIndices.push(rs[(ss-1)*4]),Fo.weightsIndices.push(rs[(ss-1)*4+1]),Fo.weightsIndices.push(rs[(ss-1)*4+2]),Fo.weightsIndices.push(rs[(ss-1)*4+3]),Fo.weightsIndices.push(rs[ss*4]),Fo.weightsIndices.push(rs[ss*4+1]),Fo.weightsIndices.push(rs[ss*4+2]),Fo.weightsIndices.push(rs[ss*4+3])),Go.color&&(Fo.colors.push(Ko[0]),Fo.colors.push(Ko[1]),Fo.colors.push(Ko[2]),Fo.colors.push(Ko[(ss-1)*3]),Fo.colors.push(Ko[(ss-1)*3+1]),Fo.colors.push(Ko[(ss-1)*3+2]),Fo.colors.push(Ko[ss*3]),Fo.colors.push(Ko[ss*3+1]),Fo.colors.push(Ko[ss*3+2])),Go.material&&Go.material.mappingType!=="AllSame"&&(Fo.materialIndex.push(Wo),Fo.materialIndex.push(Wo),Fo.materialIndex.push(Wo)),Go.normal&&(Fo.normal.push(Yo[0]),Fo.normal.push(Yo[1]),Fo.normal.push(Yo[2]),Fo.normal.push(Yo[(ss-1)*3]),Fo.normal.push(Yo[(ss-1)*3+1]),Fo.normal.push(Yo[(ss-1)*3+2]),Fo.normal.push(Yo[ss*3]),Fo.normal.push(Yo[ss*3+1]),Fo.normal.push(Yo[ss*3+2])),Go.uv&&Go.uv.forEach(function(us,ms){Fo.uvs[ms]===void 0&&(Fo.uvs[ms]=[]),Fo.uvs[ms].push(ts[ms][0]),Fo.uvs[ms].push(ts[ms][1]),Fo.uvs[ms].push(ts[ms][(ss-1)*2]),Fo.uvs[ms].push(ts[ms][(ss-1)*2+1]),Fo.uvs[ms].push(ts[ms][ss*2]),Fo.uvs[ms].push(ts[ms][ss*2+1])})},addMorphTargets:function(Fo,Go,Vo,Wo){if(Vo.length!==0){Fo.morphTargetsRelative=!0,Fo.morphAttributes.position=[];var Yo=this;Vo.forEach(function(Ko){Ko.rawTargets.forEach(function(ts){var Jo=va.Objects.Geometry[ts.geoID];Jo!==void 0&&Yo.genMorphGeometry(Fo,Go,Jo,Wo,ts.name)})})}},genMorphGeometry:function(Fo,Go,Vo,Wo,Yo){for(var Ko=Go.PolygonVertexIndex!==void 0?Go.PolygonVertexIndex.a:[],ts=Vo.Vertices!==void 0?Vo.Vertices.a:[],Jo=Vo.Indexes!==void 0?Vo.Indexes.a:[],rs=Fo.attributes.position.count*3,ls=new Float32Array(rs),ss=0;ss<Jo.length;ss++){var us=Jo[ss]*3;ls[us]=ts[ss*3],ls[us+1]=ts[ss*3+1],ls[us+2]=ts[ss*3+2]}var ms={vertexIndices:Ko,vertexPositions:ls},As=this.genBuffers(ms),Os=new Float32BufferAttribute(As.vertex,3);Os.name=Yo||Vo.attrName,Os.applyMatrix4(Wo),Fo.morphAttributes.position.push(Os)},parseNormals:function(Fo){var Go=Fo.MappingInformationType,Vo=Fo.ReferenceInformationType,Wo=Fo.Normals.a,Yo=[];return Vo==="IndexToDirect"&&("NormalIndex"in Fo?Yo=Fo.NormalIndex.a:"NormalsIndex"in Fo&&(Yo=Fo.NormalsIndex.a)),{dataSize:3,buffer:Wo,indices:Yo,mappingType:Go,referenceType:Vo}},parseUVs:function(Fo){var Go=Fo.MappingInformationType,Vo=Fo.ReferenceInformationType,Wo=Fo.UV.a,Yo=[];return Vo==="IndexToDirect"&&(Yo=Fo.UVIndex.a),{dataSize:2,buffer:Wo,indices:Yo,mappingType:Go,referenceType:Vo}},parseVertexColors:function(Fo){var Go=Fo.MappingInformationType,Vo=Fo.ReferenceInformationType,Wo=Fo.Colors.a,Yo=[];return Vo==="IndexToDirect"&&(Yo=Fo.ColorIndex.a),{dataSize:4,buffer:Wo,indices:Yo,mappingType:Go,referenceType:Vo}},parseMaterialIndices:function(Fo){var Go=Fo.MappingInformationType,Vo=Fo.ReferenceInformationType;if(Go==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Vo};for(var Wo=Fo.Materials.a,Yo=[],Ko=0;Ko<Wo.length;++Ko)Yo.push(Ko);return{dataSize:1,buffer:Wo,indices:Yo,mappingType:Go,referenceType:Vo}},parseNurbsGeometry:function(Fo){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var Go=parseInt(Fo.Order);if(isNaN(Go))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",Fo.Order,Fo.id),new BufferGeometry;for(var Vo=Go-1,Wo=Fo.KnotVector.a,Yo=[],Ko=Fo.Points.a,ts=0,Jo=Ko.length;ts<Jo;ts+=4)Yo.push(new Vector4().fromArray(Ko,ts));var rs,ls;if(Fo.Form==="Closed")Yo.push(Yo[0]);else if(Fo.Form==="Periodic"){rs=Vo,ls=Wo.length-1-rs;for(var ts=0;ts<Vo;++ts)Yo.push(Yo[ts])}var ss=new NURBSCurve(Vo,Wo,Yo,rs,ls),us=ss.getPoints(Yo.length*7),ms=new Float32Array(us.length*3);us.forEach(function(Os,Es){Os.toArray(ms,Es*3)});var As=new BufferGeometry;return As.setAttribute("position",new BufferAttribute(ms,3)),As}};function To(){}To.prototype={constructor:To,parse:function(){var Fo=[],Go=this.parseClips();if(Go!==void 0)for(var Vo in Go){var Wo=Go[Vo],Yo=this.addClip(Wo);Fo.push(Yo)}return Fo},parseClips:function(){if(va.Objects.AnimationCurve!==void 0){var Fo=this.parseAnimationCurveNodes();this.parseAnimationCurves(Fo);var Go=this.parseAnimationLayers(Fo),Vo=this.parseAnimStacks(Go);return Vo}},parseAnimationCurveNodes:function(){var Fo=va.Objects.AnimationCurveNode,Go=new Map;for(var Vo in Fo){var Wo=Fo[Vo];if(Wo.attrName.match(/S|R|T|DeformPercent/)!==null){var Yo={id:Wo.id,attr:Wo.attrName,curves:{}};Go.set(Yo.id,Yo)}}return Go},parseAnimationCurves:function(Fo){var Go=va.Objects.AnimationCurve;for(var Vo in Go){var Wo={id:Go[Vo].id,times:Go[Vo].KeyTime.a.map(Ro),values:Go[Vo].KeyValueFloat.a},Yo=_o.get(Wo.id);if(Yo!==void 0){var Ko=Yo.parents[0].ID,ts=Yo.parents[0].relationship;ts.match(/X/)?Fo.get(Ko).curves.x=Wo:ts.match(/Y/)?Fo.get(Ko).curves.y=Wo:ts.match(/Z/)?Fo.get(Ko).curves.z=Wo:ts.match(/d|DeformPercent/)&&Fo.has(Ko)&&(Fo.get(Ko).curves.morph=Wo)}}},parseAnimationLayers:function(Fo){var Go=va.Objects.AnimationLayer,Vo=new Map;for(var Wo in Go){var Yo=[],Ko=_o.get(parseInt(Wo));if(Ko!==void 0){var ts=Ko.children;ts.forEach(function(Jo,rs){if(Fo.has(Jo.ID)){var ls=Fo.get(Jo.ID);if(ls.curves.x!==void 0||ls.curves.y!==void 0||ls.curves.z!==void 0){if(Yo[rs]===void 0){var ss=_o.get(Jo.ID).parents.filter(function(Ms){return Ms.relationship!==void 0})[0].ID;if(ss!==void 0){var us=va.Objects.Model[ss.toString()];if(us===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",Jo);return}var ms={modelName:us.attrName?PropertyBinding.sanitizeNodeName(us.attrName):"",ID:us.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};xo.traverse(function(Ms){Ms.ID===us.id&&(ms.transform=Ms.matrix,Ms.userData.transformData&&(ms.eulerOrder=Ms.userData.transformData.eulerOrder))}),ms.transform||(ms.transform=new Matrix4),"PreRotation"in us&&(ms.preRotation=us.PreRotation.value),"PostRotation"in us&&(ms.postRotation=us.PostRotation.value),Yo[rs]=ms}}Yo[rs]&&(Yo[rs][ls.attr]=ls)}else if(ls.curves.morph!==void 0){if(Yo[rs]===void 0){var As=_o.get(Jo.ID).parents.filter(function(zs){return zs.relationship!==void 0})[0].ID,Os=_o.get(As).parents[0].ID,Es=_o.get(Os).parents[0].ID,ss=_o.get(Es).parents[0].ID,us=va.Objects.Model[ss],ms={modelName:us.attrName?PropertyBinding.sanitizeNodeName(us.attrName):"",morphName:va.Objects.Deformer[As].attrName};Yo[rs]=ms}Yo[rs][ls.attr]=ls}}}),Vo.set(parseInt(Wo),Yo)}}return Vo},parseAnimStacks:function(Fo){var Go=va.Objects.AnimationStack,Vo={};for(var Wo in Go){var Yo=_o.get(parseInt(Wo)).children;Yo.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var Ko=Fo.get(Yo[0].ID);Vo[Wo]={name:Go[Wo].attrName,layer:Ko}}return Vo},addClip:function(Fo){var Go=[],Vo=this;return Fo.layer.forEach(function(Wo){Go=Go.concat(Vo.generateTracks(Wo))}),new AnimationClip(Fo.name,-1,Go)},generateTracks:function(Fo){var Go=[],Vo=new Vector3,Wo=new Quaternion,Yo=new Vector3;if(Fo.transform&&Fo.transform.decompose(Vo,Wo,Yo),Vo=Vo.toArray(),Wo=new Euler().setFromQuaternion(Wo,Fo.eulerOrder).toArray(),Yo=Yo.toArray(),Fo.T!==void 0&&Object.keys(Fo.T.curves).length>0){var Ko=this.generateVectorTrack(Fo.modelName,Fo.T.curves,Vo,"position");Ko!==void 0&&Go.push(Ko)}if(Fo.R!==void 0&&Object.keys(Fo.R.curves).length>0){var ts=this.generateRotationTrack(Fo.modelName,Fo.R.curves,Wo,Fo.preRotation,Fo.postRotation,Fo.eulerOrder);ts!==void 0&&Go.push(ts)}if(Fo.S!==void 0&&Object.keys(Fo.S.curves).length>0){var Jo=this.generateVectorTrack(Fo.modelName,Fo.S.curves,Yo,"scale");Jo!==void 0&&Go.push(Jo)}if(Fo.DeformPercent!==void 0){var rs=this.generateMorphTrack(Fo);rs!==void 0&&Go.push(rs)}return Go},generateVectorTrack:function(Fo,Go,Vo,Wo){var Yo=this.getTimesForAllAxes(Go),Ko=this.getKeyframeTrackValues(Yo,Go,Vo);return new VectorKeyframeTrack(Fo+"."+Wo,Yo,Ko)},generateRotationTrack:function(Fo,Go,Vo,Wo,Yo,Ko){Go.x!==void 0&&(this.interpolateRotations(Go.x),Go.x.values=Go.x.values.map(MathUtils.degToRad)),Go.y!==void 0&&(this.interpolateRotations(Go.y),Go.y.values=Go.y.values.map(MathUtils.degToRad)),Go.z!==void 0&&(this.interpolateRotations(Go.z),Go.z.values=Go.z.values.map(MathUtils.degToRad));var ts=this.getTimesForAllAxes(Go),Jo=this.getKeyframeTrackValues(ts,Go,Vo);Wo!==void 0&&(Wo=Wo.map(MathUtils.degToRad),Wo.push(Ko),Wo=new Euler().fromArray(Wo),Wo=new Quaternion().setFromEuler(Wo)),Yo!==void 0&&(Yo=Yo.map(MathUtils.degToRad),Yo.push(Ko),Yo=new Euler().fromArray(Yo),Yo=new Quaternion().setFromEuler(Yo).inverse());for(var rs=new Quaternion,ls=new Euler,ss=[],us=0;us<Jo.length;us+=3)ls.set(Jo[us],Jo[us+1],Jo[us+2],Ko),rs.setFromEuler(ls),Wo!==void 0&&rs.premultiply(Wo),Yo!==void 0&&rs.multiply(Yo),rs.toArray(ss,us/3*4);return new QuaternionKeyframeTrack(Fo+".quaternion",ts,ss)},generateMorphTrack:function(Fo){var Go=Fo.DeformPercent.curves.morph,Vo=Go.values.map(function(Yo){return Yo/100}),Wo=xo.getObjectByName(Fo.modelName).morphTargetDictionary[Fo.morphName];return new NumberKeyframeTrack(Fo.modelName+".morphTargetInfluences["+Wo+"]",Go.times,Vo)},getTimesForAllAxes:function(Fo){var Go=[];return Fo.x!==void 0&&(Go=Go.concat(Fo.x.times)),Fo.y!==void 0&&(Go=Go.concat(Fo.y.times)),Fo.z!==void 0&&(Go=Go.concat(Fo.z.times)),Go=Go.sort(function(Vo,Wo){return Vo-Wo}).filter(function(Vo,Wo,Yo){return Yo.indexOf(Vo)==Wo}),Go},getKeyframeTrackValues:function(Fo,Go,Vo){var Wo=Vo,Yo=[],Ko=-1,ts=-1,Jo=-1;return Fo.forEach(function(rs){if(Go.x&&(Ko=Go.x.times.indexOf(rs)),Go.y&&(ts=Go.y.times.indexOf(rs)),Go.z&&(Jo=Go.z.times.indexOf(rs)),Ko!==-1){var ls=Go.x.values[Ko];Yo.push(ls),Wo[0]=ls}else Yo.push(Wo[0]);if(ts!==-1){var ss=Go.y.values[ts];Yo.push(ss),Wo[1]=ss}else Yo.push(Wo[1]);if(Jo!==-1){var us=Go.z.values[Jo];Yo.push(us),Wo[2]=us}else Yo.push(Wo[2])}),Yo},interpolateRotations:function(Fo){for(var Go=1;Go<Fo.values.length;Go++){var Vo=Fo.values[Go-1],Wo=Fo.values[Go]-Vo,Yo=Math.abs(Wo);if(Yo>=180){for(var Ko=Yo/180,ts=Wo/Ko,Jo=Vo+ts,rs=Fo.times[Go-1],ls=Fo.times[Go]-rs,ss=ls/Ko,us=rs+ss,ms=[],As=[];us<Fo.times[Go];)ms.push(us),us+=ss,As.push(Jo),Jo+=ts;Fo.times=Xo(Fo.times,Go,ms),Fo.values=Xo(Fo.values,Go,As)}}}};function So(){}So.prototype={constructor:So,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(Fo){this.nodeStack.push(Fo),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(Fo,Go){this.currentProp=Fo,this.currentPropName=Go},parse:function(Fo){this.currentIndent=0,this.allNodes=new No,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var Go=this,Vo=Fo.split(/[\r\n]+/);return Vo.forEach(function(Wo,Yo){var Ko=Wo.match(/^[\s\t]*;/),ts=Wo.match(/^[\s\t]*$/);if(!(Ko||ts)){var Jo=Wo.match("^\\t{"+Go.currentIndent+"}(\\w+):(.*){",""),rs=Wo.match("^\\t{"+Go.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),ls=Wo.match("^\\t{"+(Go.currentIndent-1)+"}}");Jo?Go.parseNodeBegin(Wo,Jo):rs?Go.parseNodeProperty(Wo,rs,Vo[++Yo]):ls?Go.popStack():Wo.match(/^[^\s\t}]/)&&Go.parseNodePropertyContinued(Wo)}}),this.allNodes},parseNodeBegin:function(Fo,Go){var Vo=Go[1].trim().replace(/^"/,"").replace(/"$/,""),Wo=Go[2].split(",").map(function(Jo){return Jo.trim().replace(/^"/,"").replace(/"$/,"")}),Yo={name:Vo},Ko=this.parseNodeAttr(Wo),ts=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Vo,Yo):Vo in ts?(Vo==="PoseNode"?ts.PoseNode.push(Yo):ts[Vo].id!==void 0&&(ts[Vo]={},ts[Vo][ts[Vo].id]=ts[Vo]),Ko.id!==""&&(ts[Vo][Ko.id]=Yo)):typeof Ko.id=="number"?(ts[Vo]={},ts[Vo][Ko.id]=Yo):Vo!=="Properties70"&&(Vo==="PoseNode"?ts[Vo]=[Yo]:ts[Vo]=Yo),typeof Ko.id=="number"&&(Yo.id=Ko.id),Ko.name!==""&&(Yo.attrName=Ko.name),Ko.type!==""&&(Yo.attrType=Ko.type),this.pushStack(Yo)},parseNodeAttr:function(Fo){var Go=Fo[0];Fo[0]!==""&&(Go=parseInt(Fo[0]),isNaN(Go)&&(Go=Fo[0]));var Vo="",Wo="";return Fo.length>1&&(Vo=Fo[1].replace(/^(\w+)::/,""),Wo=Fo[2]),{id:Go,name:Vo,type:Wo}},parseNodeProperty:function(Fo,Go,Vo){var Wo=Go[1].replace(/^"/,"").replace(/"$/,"").trim(),Yo=Go[2].replace(/^"/,"").replace(/"$/,"").trim();Wo==="Content"&&Yo===","&&(Yo=Vo.replace(/"/g,"").replace(/,$/,"").trim());var Ko=this.getCurrentNode(),ts=Ko.name;if(ts==="Properties70"){this.parseNodeSpecialProperty(Fo,Wo,Yo);return}if(Wo==="C"){var Jo=Yo.split(",").slice(1),rs=parseInt(Jo[0]),ls=parseInt(Jo[1]),ss=Yo.split(",").slice(3);ss=ss.map(function(us){return us.trim().replace(/^"/,"")}),Wo="connections",Yo=[rs,ls],qo(Yo,ss),Ko[Wo]===void 0&&(Ko[Wo]=[])}Wo==="Node"&&(Ko.id=Yo),Wo in Ko&&Array.isArray(Ko[Wo])?Ko[Wo].push(Yo):Wo!=="a"?Ko[Wo]=Yo:Ko.a=Yo,this.setCurrentProp(Ko,Wo),Wo==="a"&&Yo.slice(-1)!==","&&(Ko.a=Uo(Yo))},parseNodePropertyContinued:function(Fo){var Go=this.getCurrentNode();Go.a+=Fo,Fo.slice(-1)!==","&&(Go.a=Uo(Go.a))},parseNodeSpecialProperty:function(Fo,Go,Vo){var Wo=Vo.split('",').map(function(ls){return ls.trim().replace(/^\"/,"").replace(/\s/,"_")}),Yo=Wo[0],Ko=Wo[1],ts=Wo[2],Jo=Wo[3],rs=Wo[4];switch(Ko){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":rs=parseFloat(rs);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":rs=Uo(rs);break}this.getPrevNode()[Yo]={type:Ko,type2:ts,flag:Jo,value:rs},this.setCurrentProp(this.getPrevNode(),Yo)}};function $o(){}$o.prototype={constructor:$o,parse:function(Fo){var Go=new Do(Fo);Go.skip(23);var Vo=Go.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Vo);for(var Wo=new No;!this.endOfContent(Go);){var Yo=this.parseNode(Go,Vo);Yo!==null&&Wo.add(Yo.name,Yo)}return Wo},endOfContent:function(Fo){return Fo.size()%16==0?(Fo.getOffset()+160+16&~15)>=Fo.size():Fo.getOffset()+160+16>=Fo.size()},parseNode:function(Fo,Go){var Vo={},Wo=Go>=7500?Fo.getUint64():Fo.getUint32(),Yo=Go>=7500?Fo.getUint64():Fo.getUint32();Go>=7500?Fo.getUint64():Fo.getUint32();var Ko=Fo.getUint8(),ts=Fo.getString(Ko);if(Wo===0)return null;for(var Jo=[],rs=0;rs<Yo;rs++)Jo.push(this.parseProperty(Fo));var ls=Jo.length>0?Jo[0]:"",ss=Jo.length>1?Jo[1]:"",us=Jo.length>2?Jo[2]:"";for(Vo.singleProperty=Yo===1&&Fo.getOffset()===Wo;Wo>Fo.getOffset();){var ms=this.parseNode(Fo,Go);ms!==null&&this.parseSubNode(ts,Vo,ms)}return Vo.propertyList=Jo,typeof ls=="number"&&(Vo.id=ls),ss!==""&&(Vo.attrName=ss),us!==""&&(Vo.attrType=us),ts!==""&&(Vo.name=ts),Vo},parseSubNode:function(Fo,Go,Vo){if(Vo.singleProperty===!0){var Wo=Vo.propertyList[0];Array.isArray(Wo)?(Go[Vo.name]=Vo,Vo.a=Wo):Go[Vo.name]=Wo}else if(Fo==="Connections"&&Vo.name==="C"){var Yo=[];Vo.propertyList.forEach(function(us,ms){ms!==0&&Yo.push(us)}),Go.connections===void 0&&(Go.connections=[]),Go.connections.push(Yo)}else if(Vo.name==="Properties70"){var Ko=Object.keys(Vo);Ko.forEach(function(us){Go[us]=Vo[us]})}else if(Fo==="Properties70"&&Vo.name==="P"){var ts=Vo.propertyList[0],Jo=Vo.propertyList[1],rs=Vo.propertyList[2],ls=Vo.propertyList[3],ss;ts.indexOf("Lcl ")===0&&(ts=ts.replace("Lcl ","Lcl_")),Jo.indexOf("Lcl ")===0&&(Jo=Jo.replace("Lcl ","Lcl_")),Jo==="Color"||Jo==="ColorRGB"||Jo==="Vector"||Jo==="Vector3D"||Jo.indexOf("Lcl_")===0?ss=[Vo.propertyList[4],Vo.propertyList[5],Vo.propertyList[6]]:ss=Vo.propertyList[4],Go[ts]={type:Jo,type2:rs,flag:ls,value:ss}}else Go[Vo.name]===void 0?typeof Vo.id=="number"?(Go[Vo.name]={},Go[Vo.name][Vo.id]=Vo):Go[Vo.name]=Vo:Vo.name==="PoseNode"?(Array.isArray(Go[Vo.name])||(Go[Vo.name]=[Go[Vo.name]]),Go[Vo.name].push(Vo)):Go[Vo.name][Vo.id]===void 0&&(Go[Vo.name][Vo.id]=Vo)},parseProperty:function(Fo){var Go=Fo.getString(1);switch(Go){case"C":return Fo.getBoolean();case"D":return Fo.getFloat64();case"F":return Fo.getFloat32();case"I":return Fo.getInt32();case"L":return Fo.getInt64();case"R":var Vo=Fo.getUint32();return Fo.getArrayBuffer(Vo);case"S":var Vo=Fo.getUint32();return Fo.getString(Vo);case"Y":return Fo.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var Wo=Fo.getUint32(),Yo=Fo.getUint32(),Ko=Fo.getUint32();if(Yo===0)switch(Go){case"b":case"c":return Fo.getBooleanArray(Wo);case"d":return Fo.getFloat64Array(Wo);case"f":return Fo.getFloat32Array(Wo);case"i":return Fo.getInt32Array(Wo);case"l":return Fo.getInt64Array(Wo)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var ts=new Zlib.Inflate(new Uint8Array(Fo.getArrayBuffer(Ko))),Jo=new Do(ts.decompress().buffer);switch(Go){case"b":case"c":return Jo.getBooleanArray(Wo);case"d":return Jo.getFloat64Array(Wo);case"f":return Jo.getFloat32Array(Wo);case"i":return Jo.getInt32Array(Wo);case"l":return Jo.getInt64Array(Wo)}default:throw new Error("THREE.FBXLoader: Unknown property type "+Go)}}};function Do(Fo,Go){this.dv=new DataView(Fo),this.offset=0,this.littleEndian=Go!==void 0?Go:!0}Do.prototype={constructor:Do,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(Fo){this.offset+=Fo},getBoolean:function(){return(this.getUint8()&1)==1},getBooleanArray:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go.push(this.getBoolean());return Go},getUint8:function(){var Fo=this.dv.getUint8(this.offset);return this.offset+=1,Fo},getInt16:function(){var Fo=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,Fo},getInt32:function(){var Fo=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,Fo},getInt32Array:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go.push(this.getInt32());return Go},getUint32:function(){var Fo=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,Fo},getInt64:function(){var Fo,Go;return this.littleEndian?(Fo=this.getUint32(),Go=this.getUint32()):(Go=this.getUint32(),Fo=this.getUint32()),Go&2147483648?(Go=~Go&4294967295,Fo=~Fo&4294967295,Fo===4294967295&&(Go=Go+1&4294967295),Fo=Fo+1&4294967295,-(Go*4294967296+Fo)):Go*4294967296+Fo},getInt64Array:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go.push(this.getInt64());return Go},getUint64:function(){var Fo,Go;return this.littleEndian?(Fo=this.getUint32(),Go=this.getUint32()):(Go=this.getUint32(),Fo=this.getUint32()),Go*4294967296+Fo},getFloat32:function(){var Fo=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Fo},getFloat32Array:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go.push(this.getFloat32());return Go},getFloat64:function(){var Fo=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Fo},getFloat64Array:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go.push(this.getFloat64());return Go},getArrayBuffer:function(Fo){var Go=this.dv.buffer.slice(this.offset,this.offset+Fo);return this.offset+=Fo,Go},getString:function(Fo){for(var Go=[],Vo=0;Vo<Fo;Vo++)Go[Vo]=this.getUint8();var Wo=Go.indexOf(0);return Wo>=0&&(Go=Go.slice(0,Wo)),LoaderUtils.decodeText(new Uint8Array(Go))}};function No(){}No.prototype={constructor:No,add:function(Fo,Go){this[Fo]=Go}};function Oo(Fo){var Go="Kaydara FBX Binary  \0";return Fo.byteLength>=Go.length&&Go===Qo(Fo,0,Go.length)}function Lo(Fo){var Go=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],Vo=0;function Wo(ts){var Jo=Fo[ts-1];return Fo=Fo.slice(Vo+ts),Vo++,Jo}for(var Yo=0;Yo<Go.length;++Yo){var Ko=Wo(1);if(Ko===Go[Yo])return!1}return!0}function Co(Fo){var Go=/FBXVersion: (\d+)/,Vo=Fo.match(Go);if(Vo){var Wo=parseInt(Vo[1]);return Wo}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ro(Fo){return Fo/46186158e3}var jo=[];function zo(Fo,Go,Vo,Wo){var Yo;switch(Wo.mappingType){case"ByPolygonVertex":Yo=Fo;break;case"ByPolygon":Yo=Go;break;case"ByVertice":Yo=Vo;break;case"AllSame":Yo=Wo.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+Wo.mappingType)}Wo.referenceType==="IndexToDirect"&&(Yo=Wo.indices[Yo]);var Ko=Yo*Wo.dataSize,ts=Ko+Wo.dataSize;return Zo(jo,Wo.buffer,Ko,ts)}var Io=new Euler,Po=new Vector3;function Bo(Fo){var Go=new Matrix4,Vo=new Matrix4,Wo=new Matrix4,Yo=new Matrix4,Ko=new Matrix4,ts=new Matrix4,Jo=new Matrix4,rs=new Matrix4,ls=new Matrix4,ss=new Matrix4,us=new Matrix4,ms=Fo.inheritType?Fo.inheritType:0;if(Fo.translation&&Go.setPosition(Po.fromArray(Fo.translation)),Fo.preRotation){var As=Fo.preRotation.map(MathUtils.degToRad);As.push(Fo.eulerOrder),Vo.makeRotationFromEuler(Io.fromArray(As))}if(Fo.rotation){var As=Fo.rotation.map(MathUtils.degToRad);As.push(Fo.eulerOrder),Wo.makeRotationFromEuler(Io.fromArray(As))}if(Fo.postRotation){var As=Fo.postRotation.map(MathUtils.degToRad);As.push(Fo.eulerOrder),Yo.makeRotationFromEuler(Io.fromArray(As))}Fo.scale&&Ko.scale(Po.fromArray(Fo.scale)),Fo.scalingOffset&&Jo.setPosition(Po.fromArray(Fo.scalingOffset)),Fo.scalingPivot&&ts.setPosition(Po.fromArray(Fo.scalingPivot)),Fo.rotationOffset&&rs.setPosition(Po.fromArray(Fo.rotationOffset)),Fo.rotationPivot&&ls.setPosition(Po.fromArray(Fo.rotationPivot)),Fo.parentMatrixWorld&&(ss=Fo.parentMatrixWorld);var Os=Vo.multiply(Wo).multiply(Yo),Es=new Matrix4;ss.extractRotation(Es);var Ms=new Matrix4;Ms.copyPosition(ss);var $s=new Matrix4;$s.getInverse(Es).multiply(ss);var ks=new Matrix4;if(ms===0)ks.copy(Es).multiply(Os).multiply($s).multiply(Ko);else if(ms===1)ks.copy(Es).multiply($s).multiply(Os).multiply(Ko);else{var zs=new Matrix4().getInverse(Ko),Cs=new Matrix4().multiply($s).multiply(zs);ks.copy(Es).multiply(Os).multiply(Cs).multiply(Ko)}var xs=new Matrix4().getInverse(ls),Bs=new Matrix4().getInverse(ts),Fs=new Matrix4;Fs.copy(Go).multiply(rs).multiply(ls).multiply(Vo).multiply(Wo).multiply(Yo).multiply(xs).multiply(Jo).multiply(ts).multiply(Ko).multiply(Bs);var Zs=new Matrix4().copyPosition(Fs),bu=new Matrix4().copy(ss).multiply(Zs);return us.copyPosition(bu),Fs=new Matrix4().multiply(us).multiply(ks),Fs}function ko(Fo){Fo=Fo||0;var Go=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return Fo===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),Go[0]):Go[Fo]}function Uo(Fo){var Go=Fo.split(",").map(function(Vo){return parseFloat(Vo)});return Go}function Qo(Fo,Go,Vo){return Go===void 0&&(Go=0),Vo===void 0&&(Vo=Fo.byteLength),LoaderUtils.decodeText(new Uint8Array(Fo,Go,Vo))}function qo(Fo,Go){for(var Vo=0,Wo=Fo.length,Yo=Go.length;Vo<Yo;Vo++,Wo++)Fo[Wo]=Go[Vo]}function Zo(Fo,Go,Vo,Wo){for(var Yo=Vo,Ko=0;Yo<Wo;Yo++,Ko++)Fo[Ko]=Go[Yo];return Fo}function Xo(Fo,Go,Vo){return Fo.slice(0,Go).concat(Vo).concat(Fo.slice(Go))}return bo}(),FBXLoader$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",FBXLoader}),require$$0=getAugmentedNamespace(FBXLoader$1);Object.defineProperty(loadFbxObj$1,"__esModule",{value:!0});loadFbxObj$1.loadFbxObj=loadFbxObj;var _FBXLoader=require$$0;function asyncGeneratorStep$1(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator$1(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep$1(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep$1(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}var loader=new _FBXLoader.FBXLoader;function loadFbxObj(va){return _loadFbxObj$1.apply(this,arguments)}function _loadFbxObj$1(){return _loadFbxObj$1=_asyncToGenerator$1(regeneratorRuntime.mark(function va(_o){return regeneratorRuntime.wrap(function(bo){for(;;)switch(bo.prev=bo.next){case 0:return bo.abrupt("return",new Promise(function(wo,Eo){function To($o){wo($o)}function So($o){Eo($o)}loader.load(_o,To,void 0,So)}));case 1:case"end":return bo.stop()}},va)})),_loadFbxObj$1.apply(this,arguments)}Object.defineProperty(getExtraModelLoader$1,"__esModule",{value:!0});getExtraModelLoader$1.getExtraModelLoader=getExtraModelLoader;var _loadFbxObj=loadFbxObj$1;function getExtraModelLoader(){var va=new Map,_o=function(wo){var Eo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"FBX";if(Eo!=="FBX")return Promise.reject(new Error("\u4E0D\u652F\u6301\u7684\u7C7B\u578B"));if(va.has(wo))return va.get(wo);var To=(0,_loadFbxObj.loadFbxObj)(wo);return va.set(wo,To),To},xo=function(){va.clear()};return{load:_o,dispose:xo}}function _typeof$1(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(xo){return typeof xo}:_typeof$1=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof$1(va)}Object.defineProperty(Controller$1,"__esModule",{value:!0});Controller$1.TreasurePluginController=void 0;var THREE=_interopRequireWildcard$1(require$$1),_five=five,_isNil=isNil$1,_constants=constants,_TreasureObject=TreasureObject$1,_getTextureLoader=getTextureLoader$1,_getExtraModelLoader=getExtraModelLoader$1,_to=_interopRequireDefault$2(to);function _interopRequireDefault$2(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache$1(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache$1=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard$1(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof$1(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache$1(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function _toConsumableArray(va){return _arrayWithoutHoles(va)||_iterableToArray(va)||_unsupportedIterableToArray(va)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(va){if(typeof Symbol!="undefined"&&va[Symbol.iterator]!=null||va["@@iterator"]!=null)return Array.from(va)}function _arrayWithoutHoles(va){if(Array.isArray(va))return _arrayLikeToArray(va)}function _slicedToArray(va,_o){return _arrayWithHoles(va)||_iterableToArrayLimit(va,_o)||_unsupportedIterableToArray(va,_o)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(va,_o){if(!!va){if(typeof va=="string")return _arrayLikeToArray(va,_o);var xo=Object.prototype.toString.call(va).slice(8,-1);if(xo==="Object"&&va.constructor&&(xo=va.constructor.name),xo==="Map"||xo==="Set")return Array.from(va);if(xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xo))return _arrayLikeToArray(va,_o)}}function _arrayLikeToArray(va,_o){(_o==null||_o>va.length)&&(_o=va.length);for(var xo=0,bo=new Array(_o);xo<_o;xo++)bo[xo]=va[xo];return bo}function _iterableToArrayLimit(va,_o){var xo=va==null?null:typeof Symbol!="undefined"&&va[Symbol.iterator]||va["@@iterator"];if(xo!=null){var bo=[],wo=!0,Eo=!1,To,So;try{for(xo=xo.call(va);!(wo=(To=xo.next()).done)&&(bo.push(To.value),!(_o&&bo.length===_o));wo=!0);}catch($o){Eo=!0,So=$o}finally{try{!wo&&xo.return!=null&&xo.return()}finally{if(Eo)throw So}}return bo}}function _arrayWithHoles(va){if(Array.isArray(va))return va}function asyncGeneratorStep(va,_o,xo,bo,wo,Eo,To){try{var So=va[Eo](To),$o=So.value}catch(Do){xo(Do);return}So.done?_o($o):Promise.resolve($o).then(bo,wo)}function _asyncToGenerator(va){return function(){var _o=this,xo=arguments;return new Promise(function(bo,wo){var Eo=va.apply(_o,xo);function To($o){asyncGeneratorStep(Eo,bo,wo,To,So,"next",$o)}function So($o){asyncGeneratorStep(Eo,bo,wo,To,So,"throw",$o)}To(void 0)})}}function _classCallCheck(va,_o){if(!(va instanceof _o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(va,_o){for(var xo=0;xo<_o.length;xo++){var bo=_o[xo];bo.enumerable=bo.enumerable||!1,bo.configurable=!0,"value"in bo&&(bo.writable=!0),Object.defineProperty(va,bo.key,bo)}}function _createClass(va,_o,xo){return _o&&_defineProperties(va.prototype,_o),xo&&_defineProperties(va,xo),va}function _defineProperty(va,_o,xo){return _o in va?Object.defineProperty(va,_o,{value:xo,enumerable:!0,configurable:!0,writable:!0}):va[_o]=xo,va}var TreasurePluginController=function(){function va(_o){var xo=this;_classCallCheck(this,va),_defineProperty(this,"hooks",new _five.Subscribe),_defineProperty(this,"treasures",[]),_defineProperty(this,"textureLoader",(0,_getTextureLoader.getTextureLoader)()),_defineProperty(this,"modelLoader",(0,_getExtraModelLoader.getExtraModelLoader)()),_defineProperty(this,"onTreasureClick",function(bo){xo.hooks.emit("tap",{id:bo})}),_defineProperty(this,"getTextureObjectParams",function(bo){var wo=xo.getConfig(bo),Eo=new THREE.Vector3().fromArray(Object.values(bo.position));return{config:wo,position:Eo,id:bo.id,five:xo.five,loadTexture:xo.textureLoader.load,loadModelGroup:xo.modelLoader.load,clickCallback:xo.onTreasureClick,onOpenAnimationEnded:xo.onTreasureOpenAnimationEnded}}),_defineProperty(this,"onTreasureOpenAnimationEnded",function(bo){xo.hooks.emit("openAnimationEnded",{id:bo})}),this.five=_o,this.selfGroup=new THREE.Group,this.selfGroup.name="treasure-plugin-group",this.five.scene.add(this.selfGroup)}return _createClass(va,[{key:"load",value:function(){var _o=_asyncToGenerator(regeneratorRuntime.mark(function bo(wo){var Eo,To,So,$o,Do;return regeneratorRuntime.wrap(function(Oo){for(;;)switch(Oo.prev=Oo.next){case 0:return Oo.next=2,(0,_to.default)(Promise.all(wo.treasures.map(this.getTextureObjectParams).filter(_isNil.notNil).map(function(Lo){return new _TreasureObject.TreasureObject(Lo).load()})));case 2:if(To=Oo.sent,So=_slicedToArray(To,2),$o=So[0],Do=So[1],!($o||!Do)){Oo.next=8;break}throw $o;case 8:return(Eo=this.selfGroup).add.apply(Eo,_toConsumableArray(Do)),this.treasures=Do,Oo.abrupt("return",!0);case 11:case"end":return Oo.stop()}},bo,this)}));function xo(bo){return _o.apply(this,arguments)}return xo}()},{key:"dispose",value:function(){this.modelLoader.dispose(),this.textureLoader.dispose(),this.treasures.forEach(function(xo){return xo.dispose()})}},{key:"removeTreasureByID",value:function(xo){var bo=this.treasures.findIndex(function(Eo){return Eo.treasureID===xo});if(typeof bo!="number")return!1;var wo=this.treasures[bo];return wo.dispose(),this.selfGroup.remove(wo),this.treasures.slice(bo,1),!0}},{key:"getConfig",value:function(xo){var bo,wo,Eo,To,So,$o,Do,No=(bo=_constants.DEFAULT_TREASURE_CONFIGS.find(function(zo){var Io=zo.type;return Io===xo.type}))===null||bo===void 0?void 0:bo.config,Oo=_constants.DEFAULT_TREASURE_CONFIG,Lo=(wo=(Eo=xo==null||(To=xo.config)===null||To===void 0?void 0:To.scale)!==null&&Eo!==void 0?Eo:No==null?void 0:No.scale)!==null&&wo!==void 0?wo:Oo.scale,Co=(xo==null||(So=xo.config)===null||So===void 0?void 0:So.object_url)||(No==null?void 0:No.objectUrl)||Oo.objectUrl,Ro=(xo==null||($o=xo.config)===null||$o===void 0?void 0:$o.box_texture_url)||(No==null?void 0:No.boxTextureUrl)||Oo.boxTextureUrl,jo=(xo==null||(Do=xo.config)===null||Do===void 0?void 0:Do.face_anime_texture_urls)||(No==null?void 0:No.faceAnimeTextureUrls)||Oo.faceAnimeTextureUrls;return{scale:Lo,objectUrl:Co,boxTextureUrl:Ro,faceAnimeTextureUrls:jo}}}]),va}();Controller$1.TreasurePluginController=TreasurePluginController;(function(va){Object.defineProperty(va,"__esModule",{value:!0}),Object.defineProperty(va,"TREASURE_TYPE",{enumerable:!0,get:function(){return xo.TREASURE_TYPE}}),va.default=va.TreasurePlugin=void 0;var _o=Controller$1,xo=constants,bo=function(To){return new _o.TreasurePluginController(To)};va.TreasurePlugin=bo;var wo=bo;va.default=wo})(TreasurePlugin$1);var TreasurePlugin=getDefaultExportFromCjs(TreasurePlugin$1),PanoFloorplanRadarPlugin$1={},Controller={},Content={},Camera={},throttle={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=_o;function _o(xo){var bo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,wo;return function(){wo||(xo.apply(void 0,arguments),wo=setTimeout(function(){wo=null},bo))}}})(throttle);var Camera_style={},px2rem={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=_o;function _o(xo){var bo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,wo=Number(typeof xo=="string"?xo.replace(/px/g,""):xo);return(wo/bo).toFixed(5)+"rem"}})(px2rem);Object.defineProperty(Camera_style,"__esModule",{value:!0});Camera_style.rotateStyle=Camera_style.positionStyle=void 0;var _px2rem$1=_interopRequireDefault$1(px2rem);function _interopRequireDefault$1(va){return va&&va.__esModule?va:{default:va}}var positionStyle={position:"absolute",left:"0",top:"0",width:"0",height:"0",transform:"none",pointerEvents:"none",transition:"transform 1s linear"};Camera_style.positionStyle=positionStyle;var rotateStyle={position:"absolute",left:"".concat((0,_px2rem$1.default)(-15)),top:"".concat((0,_px2rem$1.default)(-15)),width:"".concat((0,_px2rem$1.default)(17)),height:"".concat((0,_px2rem$1.default)(17)),backgroundSize:"100%",backgroundRepeat:"no-repeat",transformOrigin:"".concat((0,_px2rem$1.default)(15)," ").concat((0,_px2rem$1.default)(15)),transform:"rotate(45deg)",backgroundImage:"url('//vrlab-static.ljcdn.com/release/web/default-sidemap-camera.5e0b9a1a.png')"};Camera_style.rotateStyle=rotateStyle;(function(va){function _o(Do){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Oo){return typeof Oo}:_o=function(Oo){return Oo&&typeof Symbol=="function"&&Oo.constructor===Symbol&&Oo!==Symbol.prototype?"symbol":typeof Oo},_o(Do)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0;var xo=So(react$2.exports),bo=Eo(throttle),wo=Camera_style;function Eo(Do){return Do&&Do.__esModule?Do:{default:Do}}function To(Do){if(typeof WeakMap!="function")return null;var No=new WeakMap,Oo=new WeakMap;return(To=function(Co){return Co?Oo:No})(Do)}function So(Do,No){if(!No&&Do&&Do.__esModule)return Do;if(Do===null||_o(Do)!=="object"&&typeof Do!="function")return{default:Do};var Oo=To(No);if(Oo&&Oo.has(Do))return Oo.get(Do);var Lo={},Co=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ro in Do)if(Ro!=="default"&&Object.prototype.hasOwnProperty.call(Do,Ro)){var jo=Co?Object.getOwnPropertyDescriptor(Do,Ro):null;jo&&(jo.get||jo.set)?Object.defineProperty(Lo,Ro,jo):Lo[Ro]=Do[Ro]}return Lo.default=Do,Oo&&Oo.set(Do,Lo),Lo}var $o=xo.memo(function(No){var Oo,Lo=function(qo){var Zo=No.floorplanData.observers,Xo=Zo[qo],Fo=Math.floor(Xo.positionInImage.x*No.width),Go=Math.floor(Xo.positionInImage.y*No.height);return"translate(".concat(Fo,"px, ").concat(Go,"px)")},Co=function(){var qo=zo.getCurrentState(),Zo=qo.longitude,Xo=Math.floor(Zo/Math.PI*180)*-1+45;return"rotate(".concat(Xo,"deg)")},Ro=function(qo){!Io.current||(Io.current.style.transform=Lo(qo))},jo=(0,bo.default)(function(){!Po.current||(Po.current.style.transform=Co())},1e3/60),zo=No.five,Io=xo.useRef(null),Po=xo.useRef(null),Bo={transform:Lo(zo.getCurrentState().panoIndex)},ko={transform:Co()};xo.useEffect(function(){var Qo=function(){Ro(zo.getCurrentState().panoIndex),jo()};return Ro(zo.getCurrentState().panoIndex),jo(),zo.on("panoWillArrive",Ro),zo.on("cameraUpdate",jo),zo.on("modelLoaded",Qo),function(){zo.off("panoWillArrive",Ro),zo.off("cameraUpdate",jo),zo.off("modelLoaded",Qo)}});var Uo=Object.assign({},wo.rotateStyle,(Oo=No.cameraImage)===null||Oo===void 0?void 0:Oo.style);return xo.createElement("div",{ref:Io,style:Object.assign({},wo.positionStyle,Bo)},xo.createElement("div",{ref:Po,style:Object.assign({},Uo,ko)}))},function(Do,No){return Object.keys(Do).every(function(Oo){return No[Oo]===Do[Oo]})});va.default=$o})(Camera);var NowFloor={},RoomHighlight={},formatPosition={};(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=$o,va.floorplanPosition2ImagePosition=No,va.getFloorIndexFromModelPosition=Oo,va.modelPosition2FloorplanPosition=Do,va.pathD=So;function _o(Lo){return Eo(Lo)||wo(Lo)||bo(Lo)||xo()}function xo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(Lo,Co){if(!!Lo){if(typeof Lo=="string")return To(Lo,Co);var Ro=Object.prototype.toString.call(Lo).slice(8,-1);if(Ro==="Object"&&Lo.constructor&&(Ro=Lo.constructor.name),Ro==="Map"||Ro==="Set")return Array.from(Lo);if(Ro==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ro))return To(Lo,Co)}}function wo(Lo){if(typeof Symbol!="undefined"&&Lo[Symbol.iterator]!=null||Lo["@@iterator"]!=null)return Array.from(Lo)}function Eo(Lo){if(Array.isArray(Lo))return To(Lo)}function To(Lo,Co){(Co==null||Co>Lo.length)&&(Co=Lo.length);for(var Ro=0,jo=new Array(Co);Ro<Co;Ro++)jo[Ro]=Lo[Ro];return jo}function So(Lo){var Co=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ro="",jo=Co.needZ,zo=Co.needA;return jo&&(Lo=Lo.concat(Lo[0])),Lo.forEach(function(Io,Po){var Bo=Co.format?Co.format(Io):Io,ko=Bo.x,Uo=Bo.y,Qo=ko+","+Uo;return Po==0?Ro+="M"+Qo:zo&&zo[Po]?Ro+="A"+zo[Po]+","+Qo:Ro+="L"+Qo}),Ro+(jo?"Z":"")}function $o(Lo,Co,Ro){var jo=Lo.x,zo=Lo.y,Io=Ro.max,Po=Ro.min;return{x:(jo-Po.x)*Co,y:(Io.y-zo)*Co}}function Do(Lo,Co){var Ro=Lo.x*1e3+Co.bounding.origin.x,jo=-Lo.z*1e3+Co.bounding.origin.y;return{x:Ro,y:jo}}function No(Lo,Co){var Ro=Co.bounding,jo=Ro.max.x-Ro.min.x,zo=Ro.max.y-Ro.min.y;return{x:(Lo.x-Ro.min.x)/jo,y:(Ro.max.y-Lo.y)/zo}}function Oo(Lo,Co){var Ro=Math.max.apply(Math,_o(Co.work.observers.map(function(jo){return Lo.z>=jo.standingPosition.z?jo.floorIndex:0})));return Ro}})(formatPosition);(function(va){function _o(No){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Lo){return typeof Lo}:_o=function(Lo){return Lo&&typeof Symbol=="function"&&Lo.constructor===Symbol&&Lo!==Symbol.prototype?"symbol":typeof Lo},_o(No)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=$o;var xo=To(react$2.exports),bo=require$$1,wo=To(formatPosition);function Eo(No){if(typeof WeakMap!="function")return null;var Oo=new WeakMap,Lo=new WeakMap;return(Eo=function(Ro){return Ro?Lo:Oo})(No)}function To(No,Oo){if(!Oo&&No&&No.__esModule)return No;if(No===null||_o(No)!=="object"&&typeof No!="function")return{default:No};var Lo=Eo(Oo);if(Lo&&Lo.has(No))return Lo.get(No);var Co={},Ro=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var jo in No)if(jo!=="default"&&Object.prototype.hasOwnProperty.call(No,jo)){var zo=Ro?Object.getOwnPropertyDescriptor(No,jo):null;zo&&(zo.get||zo.set)?Object.defineProperty(Co,jo,zo):Co[jo]=No[jo]}return Co.default=No,Lo&&Lo.set(No,Co),Co}function So(){return So=Object.assign||function(No){for(var Oo=1;Oo<arguments.length;Oo++){var Lo=arguments[Oo];for(var Co in Lo)Object.prototype.hasOwnProperty.call(Lo,Co)&&(No[Co]=Lo[Co])}return No},So.apply(this,arguments)}function $o(No){if(!No.five.work||!No.five.model)return xo.createElement(xo.Fragment,null);var Oo=No.floorplanData.floorDatas[No.floorIndex],Lo=xo.useRef(null),Co=No.floorplanData.observers,Ro=function(Po){if(!!Lo.current){var Bo=Lo.current.getBoundingClientRect(),ko=new bo.Vector2(Po.clientX,Po.clientY),Uo=new bo.Vector2(Bo.left,Bo.top),Qo=ko.clone().sub(Uo),qo=new bo.Vector2(Qo.x/Lo.current.clientWidth,Qo.y/Lo.current.clientHeight),Zo=Co.filter(function(Xo){return Xo.floorIndex===No.floorIndex}).sort(function(Xo,Fo){var Go=new bo.Vector2(Xo.positionInImage.x,Xo.positionInImage.y),Vo=new bo.Vector2(Fo.positionInImage.x,Fo.positionInImage.y);return Go.distanceTo(qo)-Vo.distanceTo(qo)})[0];No.five.moveToPano(Zo.index)}},jo={position:"absolute",width:"100%",height:"100%",pointerEvents:"all"},zo={width:"100%",height:"100%",overflow:"visible"};return xo.createElement("div",{ref:Lo,className:"floorplan-plugin__room-highlight",style:jo,onClick:Ro},xo.createElement("svg",{style:zo},Oo.rooms.map(function(Io){return xo.createElement(Do,So({key:Io.id},No,{data:Io}))})))}function Do(No){var Oo=No.floorplanData.bounding,Lo=(0,wo.pathD)(No.data.path,{needZ:!0,format:function(Io){return(0,wo.default)(Io,No.pxmm,Oo)}}),Co=xo.useRef(null),Ro=function(){Co.current&&(Co.current.style.opacity="0.1")},jo=function(){Co.current&&(Co.current.style.opacity="0")};return xo.createElement("path",{ref:Co,d:Lo,fill:"#000",opacity:0,onMouseOver:Ro,onMouseOut:jo})}})(RoomHighlight);var FloorplanImage={};(function(va){function _o($o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(No){return typeof No}:_o=function(No){return No&&typeof Symbol=="function"&&No.constructor===Symbol&&No!==Symbol.prototype?"symbol":typeof No},_o($o)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=So;var xo=wo(react$2.exports);function bo($o){if(typeof WeakMap!="function")return null;var Do=new WeakMap,No=new WeakMap;return(bo=function(Lo){return Lo?No:Do})($o)}function wo($o,Do){if(!Do&&$o&&$o.__esModule)return $o;if($o===null||_o($o)!=="object"&&typeof $o!="function")return{default:$o};var No=bo(Do);if(No&&No.has($o))return No.get($o);var Oo={},Lo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Co in $o)if(Co!=="default"&&Object.prototype.hasOwnProperty.call($o,Co)){var Ro=Lo?Object.getOwnPropertyDescriptor($o,Co):null;Ro&&(Ro.get||Ro.set)?Object.defineProperty(Oo,Co,Ro):Oo[Co]=$o[Co]}return Oo.default=$o,No&&No.set($o,Oo),Oo}function Eo($o){var Do,No=$o.floorplanData,Oo=$o.floorIndex,Lo={width:"100%",height:"100%"},Co=(Do=No.outlines[Oo])===null||Do===void 0?void 0:Do.url;return Co?xo.createElement("img",{src:Co,style:Lo}):null}function To($o){var Do,No=$o.floorplanData,Oo=$o.floorIndex,Lo=(Do=No.outlines)===null||Do===void 0?void 0:Do[Oo].svgContent;if(!Lo)return null;var Co={width:"100%",height:"100%"};return xo.createElement("div",{className:"floorplan-plugin__base-image",style:Co},xo.createElement("style",null,`
        .floorplan-plugin__base-image svg [type='lineGroup'] path {
          fill: #ffffff;
          stroke: #ffffff;
        }
        .floorplan-plugin__base-image svg [type='lineItemGroup'] g g g g {
          stroke: #ffffff;
        }
      `),xo.createElement("div",{className:"floorplan-plugin__base-svg-image",dangerouslySetInnerHTML:{__html:Lo}}))}function So($o){var Do,No,Oo=$o.floorplanData,Lo=$o.floorIndex,Co=Oo.outlines[Lo],Ro=(Do=Oo.outlines)===null||Do===void 0||(No=Do[Lo])===null||No===void 0?void 0:No.svgContent;if(!Co&&!Ro)return null;var jo={position:"absolute",zIndex:10,width:"100%",height:"100%",pointerEvents:"none"};return xo.createElement("div",{className:"floorplan-plugin__base-image",style:jo},Ro?xo.createElement(To,$o):xo.createElement(Eo,$o))}})(FloorplanImage);var ExtraObjects$1={};function _typeof(va){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(xo){return typeof xo}:_typeof=function(xo){return xo&&typeof Symbol=="function"&&xo.constructor===Symbol&&xo!==Symbol.prototype?"symbol":typeof xo},_typeof(va)}Object.defineProperty(ExtraObjects$1,"__esModule",{value:!0});ExtraObjects$1.ExtraObjects=ExtraObjects;var React=_interopRequireWildcard(react$2.exports),_px2rem=_interopRequireDefault(px2rem);function _interopRequireDefault(va){return va&&va.__esModule?va:{default:va}}function _getRequireWildcardCache(va){if(typeof WeakMap!="function")return null;var _o=new WeakMap,xo=new WeakMap;return(_getRequireWildcardCache=function(wo){return wo?xo:_o})(va)}function _interopRequireWildcard(va,_o){if(!_o&&va&&va.__esModule)return va;if(va===null||_typeof(va)!=="object"&&typeof va!="function")return{default:va};var xo=_getRequireWildcardCache(_o);if(xo&&xo.has(va))return xo.get(va);var bo={},wo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Eo in va)if(Eo!=="default"&&Object.prototype.hasOwnProperty.call(va,Eo)){var To=wo?Object.getOwnPropertyDescriptor(va,Eo):null;To&&(To.get||To.set)?Object.defineProperty(bo,Eo,To):bo[Eo]=va[Eo]}return bo.default=va,xo&&xo.set(va,bo),bo}function ExtraObjects(va){var _o={width:"100%",height:"100%",position:"absolute",top:"0",left:"0",pointerEvents:"none"};return React.createElement("div",{style:_o},va.extraObjects.map(function(xo){return React.createElement("div",{key:xo.id,style:{width:0,height:0,position:"absolute",top:xo.positionInImage.y*100+"%",left:xo.positionInImage.x*100+"%"}},React.createElement("div",{style:{width:"".concat((0,_px2rem.default)(xo.icon.width)),height:"".concat((0,_px2rem.default)(xo.icon.height)),backgroundImage:"url(".concat(xo.icon.url,")"),transform:"translate(-50%, -50%)"}}))}))}(function(va){function _o(Oo){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Co){return typeof Co}:_o=function(Co){return Co&&typeof Symbol=="function"&&Co.constructor===Symbol&&Co!==Symbol.prototype?"symbol":typeof Co},_o(Oo)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=No;var xo=$o(react$2.exports),bo=To(RoomHighlight),wo=To(FloorplanImage),Eo=ExtraObjects$1;function To(Oo){return Oo&&Oo.__esModule?Oo:{default:Oo}}function So(Oo){if(typeof WeakMap!="function")return null;var Lo=new WeakMap,Co=new WeakMap;return(So=function(jo){return jo?Co:Lo})(Oo)}function $o(Oo,Lo){if(!Lo&&Oo&&Oo.__esModule)return Oo;if(Oo===null||_o(Oo)!=="object"&&typeof Oo!="function")return{default:Oo};var Co=So(Lo);if(Co&&Co.has(Oo))return Co.get(Oo);var Ro={},jo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var zo in Oo)if(zo!=="default"&&Object.prototype.hasOwnProperty.call(Oo,zo)){var Io=jo?Object.getOwnPropertyDescriptor(Oo,zo):null;Io&&(Io.get||Io.set)?Object.defineProperty(Ro,zo,Io):Ro[zo]=Oo[zo]}return Ro.default=Oo,Co&&Co.set(Oo,Ro),Ro}function Do(){return Do=Object.assign||function(Oo){for(var Lo=1;Lo<arguments.length;Lo++){var Co=arguments[Lo];for(var Ro in Co)Object.prototype.hasOwnProperty.call(Co,Ro)&&(Oo[Ro]=Co[Ro])}return Oo},Do.apply(this,arguments)}function No(Oo){var Lo,Co={position:"relative",width:"100%",height:"100%"},Ro=Oo==null||(Lo=Oo.extraObjects)===null||Lo===void 0?void 0:Lo.filter(function(jo){return jo.floorIndex===Oo.floorIndex});return xo.createElement("div",{style:Co},xo.createElement(wo.default,Oo),Ro&&xo.createElement(Eo.ExtraObjects,{extraObjects:Ro}),Oo.hoverEnable&&xo.createElement(bo.default,Do({},Oo,Oo.floorplanData)))}})(NowFloor);var index_style={};Object.defineProperty(index_style,"__esModule",{value:!0});index_style.contentStyle=void 0;var contentStyle={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"};index_style.contentStyle=contentStyle;(function(va){function _o(Io){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Bo){return typeof Bo}:_o=function(Bo){return Bo&&typeof Symbol=="function"&&Bo.constructor===Symbol&&Bo!==Symbol.prototype?"symbol":typeof Bo},_o(Io)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0;var xo=$o(Camera),bo=So(react$2.exports),wo=$o(NowFloor),Eo=index_style;function To(Io){if(typeof WeakMap!="function")return null;var Po=new WeakMap,Bo=new WeakMap;return(To=function(Uo){return Uo?Bo:Po})(Io)}function So(Io,Po){if(!Po&&Io&&Io.__esModule)return Io;if(Io===null||_o(Io)!=="object"&&typeof Io!="function")return{default:Io};var Bo=To(Po);if(Bo&&Bo.has(Io))return Bo.get(Io);var ko={},Uo=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qo in Io)if(Qo!=="default"&&Object.prototype.hasOwnProperty.call(Io,Qo)){var qo=Uo?Object.getOwnPropertyDescriptor(Io,Qo):null;qo&&(qo.get||qo.set)?Object.defineProperty(ko,Qo,qo):ko[Qo]=Io[Qo]}return ko.default=Io,Bo&&Bo.set(Io,ko),ko}function $o(Io){return Io&&Io.__esModule?Io:{default:Io}}function Do(){return Do=Object.assign||function(Io){for(var Po=1;Po<arguments.length;Po++){var Bo=arguments[Po];for(var ko in Bo)Object.prototype.hasOwnProperty.call(Bo,ko)&&(Io[ko]=Bo[ko])}return Io},Do.apply(this,arguments)}function No(Io,Po){return jo(Io)||Ro(Io,Po)||Lo(Io,Po)||Oo()}function Oo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(Io,Po){if(!!Io){if(typeof Io=="string")return Co(Io,Po);var Bo=Object.prototype.toString.call(Io).slice(8,-1);if(Bo==="Object"&&Io.constructor&&(Bo=Io.constructor.name),Bo==="Map"||Bo==="Set")return Array.from(Io);if(Bo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Bo))return Co(Io,Po)}}function Co(Io,Po){(Po==null||Po>Io.length)&&(Po=Io.length);for(var Bo=0,ko=new Array(Po);Bo<Po;Bo++)ko[Bo]=Io[Bo];return ko}function Ro(Io,Po){var Bo=Io==null?null:typeof Symbol!="undefined"&&Io[Symbol.iterator]||Io["@@iterator"];if(Bo!=null){var ko=[],Uo=!0,Qo=!1,qo,Zo;try{for(Bo=Bo.call(Io);!(Uo=(qo=Bo.next()).done)&&(ko.push(qo.value),!(Po&&ko.length===Po));Uo=!0);}catch(Xo){Qo=!0,Zo=Xo}finally{try{!Uo&&Bo.return!=null&&Bo.return()}finally{if(Qo)throw Zo}}return ko}}function jo(Io){if(Array.isArray(Io))return Io}var zo=bo.memo(function(Po){if(!Po.floorplanData)return null;var Bo=Po.five,ko=Bo.getCurrentState().panoIndex,Uo=Bo.work.observers,Qo=bo.useState(Uo[ko].floorIndex),qo=No(Qo,2),Zo=qo[0],Xo=qo[1],Fo={width:Po.width+"px",height:Po.height+"px"},Go=function(Wo){Xo(Uo[Wo].floorIndex)};return bo.useEffect(function(){return Bo.on("panoArrived",Go),function(){Bo.off("panoArrived",Go)}},[]),bo.createElement("div",{style:Object.assign({},Eo.contentStyle,Fo)},bo.createElement(wo.default,Do({},Po,{floorIndex:Zo})),bo.createElement(xo.default,Po))},function(Io,Po){return Object.keys(Io).every(function(Bo){return Po[Bo]===Io[Bo]})});va.default=zo})(Content);var formatData={},floorplanExtraObject={};Object.defineProperty(floorplanExtraObject,"__esModule",{value:!0});floorplanExtraObject.FLOORPLANE_EXTRA_OBJECT_IMAGE=void 0;var FLOORPLANE_EXTRA_OBJECT_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";floorplanExtraObject.FLOORPLANE_EXTRA_OBJECT_IMAGE=FLOORPLANE_EXTRA_OBJECT_IMAGE;(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=Oo,va.formatExtraObjects=Co;var _o=floorplanExtraObject,xo=formatPosition;function bo(Ro,jo,zo,Io,Po,Bo,ko){try{var Uo=Ro[Bo](ko),Qo=Uo.value}catch(qo){zo(qo);return}Uo.done?jo(Qo):Promise.resolve(Qo).then(Io,Po)}function wo(Ro){return function(){var jo=this,zo=arguments;return new Promise(function(Io,Po){var Bo=Ro.apply(jo,zo);function ko(Qo){bo(Bo,Io,Po,ko,Uo,"next",Qo)}function Uo(Qo){bo(Bo,Io,Po,ko,Uo,"throw",Qo)}ko(void 0)})}}function Eo(Ro){return To.apply(this,arguments)}function To(){return To=wo(regeneratorRuntime.mark(function Ro(jo){var zo,Io,Po;return regeneratorRuntime.wrap(function(ko){for(;;)switch(ko.prev=ko.next){case 0:return zo=new Headers({"Content-Type":"text/plain"}),Io=function(){var Uo=wo(regeneratorRuntime.mark(function Qo(qo){var Zo,Xo;return regeneratorRuntime.wrap(function(Go){for(;;)switch(Go.prev=Go.next){case 0:if(Zo={index:qo.index,url:qo.url,svgUrl:qo.svg_url},!qo.svg_url){Go.next=6;break}return Go.next=4,fetch(qo.svg_url,{headers:zo}).then(function(Vo){return Vo.text()});case 4:Xo=Go.sent,Zo.svgContent=Xo;case 6:return Go.abrupt("return",Zo);case 7:case"end":return Go.stop()}},Qo)}));return function(qo){return Uo.apply(this,arguments)}}(),ko.next=4,Promise.all(jo.map(Io));case 4:return Po=ko.sent,ko.abrupt("return",Po);case 6:case"end":return ko.stop()}},Ro)})),To.apply(this,arguments)}function So(Ro){var jo={id:Ro.id,size:Ro.size,name:Ro.name,path:Ro.path,roomType:Ro.room_type,floorType:Ro.floor_type,roomLabel:{position:Ro.room_label.position,positionInImage:Ro.room_label.position_in_image},observerIndexs:Ro.observer_indexs};return jo}function $o(Ro){return{floorName:Ro.floor_name,floorIndex:Ro.floor_index,rooms:Ro.rooms.map(So)}}function Do(Ro){var jo={index:Ro.index,floorIndex:Ro.floor_index,position:Ro.position,positionInImage:Ro.position_in_image};return jo}function No(Ro){var jo={rad:Ro.rad,position:Ro.position,positionInImage:Ro.position_in_image,northRad:Ro.north_rad,roomId:Ro.room_id,floorIndex:Ro.floor_index};return jo}function Oo(Ro){return Lo.apply(this,arguments)}function Lo(){return Lo=wo(regeneratorRuntime.mark(function Ro(jo){var zo,Io,Po,Bo,ko;return regeneratorRuntime.wrap(function(Qo){for(;;)switch(Qo.prev=Qo.next){case 0:return Qo.next=2,Eo(jo.outlines);case 2:return zo=Qo.sent,Io=jo.computed_data.bounding,Po=jo.computed_data.floor_datas.map($o),Bo=jo.computed_data.entrance?No(jo.computed_data.entrance):null,ko={outlines:zo,entrance:Bo,bounding:Io,floorDatas:Po,observers:jo.computed_data.observers.map(Do)},Qo.abrupt("return",ko);case 8:case"end":return Qo.stop()}},Ro)})),Lo.apply(this,arguments)}function Co(Ro,jo,zo){var Io=Ro.map(function(Po){var Bo=Po.position,ko=Po.icon?Po.icon:{url:_o.FLOORPLANE_EXTRA_OBJECT_IMAGE,width:45,height:48},Uo=(0,xo.getFloorIndexFromModelPosition)(Bo,jo),Qo=(0,xo.modelPosition2FloorplanPosition)(Bo,zo),qo=(0,xo.floorplanPosition2ImagePosition)(Qo,zo);return{floorIndex:Uo,icon:ko,id:Po.id,position:Qo,positionInImage:qo}});return Io}})(formatData);(function(va){function _o(qo){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Xo){return typeof Xo}:_o=function(Xo){return Xo&&typeof Symbol=="function"&&Xo.constructor===Symbol&&Xo!==Symbol.prototype?"symbol":typeof Xo},_o(qo)}Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0;var xo=$o(react$2.exports),bo=To(Content),wo=$o(reactDom.exports),Eo=$o(formatData);function To(qo){return qo&&qo.__esModule?qo:{default:qo}}function So(qo){if(typeof WeakMap!="function")return null;var Zo=new WeakMap,Xo=new WeakMap;return(So=function(Go){return Go?Xo:Zo})(qo)}function $o(qo,Zo){if(!Zo&&qo&&qo.__esModule)return qo;if(qo===null||_o(qo)!=="object"&&typeof qo!="function")return{default:qo};var Xo=So(Zo);if(Xo&&Xo.has(qo))return Xo.get(qo);var Fo={},Go=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Vo in qo)if(Vo!=="default"&&Object.prototype.hasOwnProperty.call(qo,Vo)){var Wo=Go?Object.getOwnPropertyDescriptor(qo,Vo):null;Wo&&(Wo.get||Wo.set)?Object.defineProperty(Fo,Vo,Wo):Fo[Vo]=qo[Vo]}return Fo.default=qo,Xo&&Xo.set(qo,Fo),Fo}function Do(){return Do=Object.assign||function(qo){for(var Zo=1;Zo<arguments.length;Zo++){var Xo=arguments[Zo];for(var Fo in Xo)Object.prototype.hasOwnProperty.call(Xo,Fo)&&(qo[Fo]=Xo[Fo])}return qo},Do.apply(this,arguments)}function No(qo,Zo){return jo(qo)||Ro(qo,Zo)||Lo(qo,Zo)||Oo()}function Oo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(qo,Zo){if(!!qo){if(typeof qo=="string")return Co(qo,Zo);var Xo=Object.prototype.toString.call(qo).slice(8,-1);if(Xo==="Object"&&qo.constructor&&(Xo=qo.constructor.name),Xo==="Map"||Xo==="Set")return Array.from(qo);if(Xo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xo))return Co(qo,Zo)}}function Co(qo,Zo){(Zo==null||Zo>qo.length)&&(Zo=qo.length);for(var Xo=0,Fo=new Array(Zo);Xo<Zo;Xo++)Fo[Xo]=qo[Xo];return Fo}function Ro(qo,Zo){var Xo=qo==null?null:typeof Symbol!="undefined"&&qo[Symbol.iterator]||qo["@@iterator"];if(Xo!=null){var Fo=[],Go=!0,Vo=!1,Wo,Yo;try{for(Xo=Xo.call(qo);!(Go=(Wo=Xo.next()).done)&&(Fo.push(Wo.value),!(Zo&&Fo.length===Zo));Go=!0);}catch(Ko){Vo=!0,Yo=Ko}finally{try{!Go&&Xo.return!=null&&Xo.return()}finally{if(Vo)throw Yo}}return Fo}}function jo(qo){if(Array.isArray(qo))return qo}function zo(qo,Zo,Xo,Fo,Go,Vo,Wo){try{var Yo=qo[Vo](Wo),Ko=Yo.value}catch(ts){Xo(ts);return}Yo.done?Zo(Ko):Promise.resolve(Ko).then(Fo,Go)}function Io(qo){return function(){var Zo=this,Xo=arguments;return new Promise(function(Fo,Go){var Vo=qo.apply(Zo,Xo);function Wo(Ko){zo(Vo,Fo,Go,Wo,Yo,"next",Ko)}function Yo(Ko){zo(Vo,Fo,Go,Wo,Yo,"throw",Ko)}Wo(void 0)})}}function Po(qo,Zo){if(!(qo instanceof Zo))throw new TypeError("Cannot call a class as a function")}function Bo(qo,Zo){for(var Xo=0;Xo<Zo.length;Xo++){var Fo=Zo[Xo];Fo.enumerable=Fo.enumerable||!1,Fo.configurable=!0,"value"in Fo&&(Fo.writable=!0),Object.defineProperty(qo,Fo.key,Fo)}}function ko(qo,Zo,Xo){return Zo&&Bo(qo.prototype,Zo),Xo&&Bo(qo,Xo),qo}function Uo(qo,Zo,Xo){return Zo in qo?Object.defineProperty(qo,Zo,{value:Xo,enumerable:!0,configurable:!0,writable:!0}):qo[Zo]=Xo,qo}var Qo=function(){function qo(Zo,Xo){var Fo=this;Po(this,qo),Uo(this,"pxmm",0),Uo(this,"wrapperSelector",""),Uo(this,"wrapper",null),Uo(this,"size",{width:0,height:0}),Uo(this,"configs",{}),Uo(this,"dispose",function(){Fo.wrapper&&wo.unmountComponentAtNode(Fo.wrapper)}),Uo(this,"load",function(){var Go=Io(regeneratorRuntime.mark(function Vo(Wo){var Yo,Ko,ts;return regeneratorRuntime.wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:return Fo.wrapper||(Yo=document.querySelector(Fo.wrapperSelector),Yo||console.warn("\u63D2\u4EF6\u5BB9\u5668\u4E0D\u5B58\u5728\uFF0C\u53EF\u80FD\u5F97\u5230\u4E0E\u9884\u671F\u4E0D\u7B26\u7684\u6548\u679C\uFF0C\u662F\u4E0D\u662F\u5FD8\u8BB0\u521D\u59CB\u5316\u5BB9\u5668\u4E86\uFF1F"),Fo.wrapper=Yo),Ko=JSON.parse(JSON.stringify(Wo)),rs.next=4,(0,Eo.default)(Ko);case 4:return ts=rs.sent,Fo.data=ts,rs.next=8,new Promise(function(ls){var ss,us,ms=Fo.five.work.observers[Fo.five.getCurrentState().panoIndex].floorIndex;if((ss=ts.outlines[ms])!==null&&ss!==void 0&&ss.svgContent)return ls();var As=new Image,Os=(us=ts.outlines[ms])===null||us===void 0?void 0:us.url;if(!Os)return ls();As.onload=function(){return ls()},As.src=Os});case 8:Fo.updateSize(),Fo.render();case 10:case"end":return rs.stop()}},Vo)}));return function(Vo){return Go.apply(this,arguments)}}()),this.five=Zo,(Xo==null?void 0:Xo.configs)&&Object.assign(this.configs,Xo.configs),typeof(Xo==null?void 0:Xo.wrapper)=="string"?this.wrapperSelector=Xo.wrapper:(Xo==null?void 0:Xo.wrapper)instanceof Element&&(this.wrapper=Xo.wrapper),Zo.once("dispose",this.dispose)}return ko(qo,[{key:"appendTo",value:function(Xo){this.wrapper=Xo}},{key:"changeConfigs",value:function(Xo){Object.assign(this.configs,Xo),this.render()}},{key:"setExtraObjectsWith3DPositions",value:function(Xo){this.orginExtraObjects=Xo,!!this.data&&(this.extraObjects=(0,Eo.formatExtraObjects)(Xo,this.five,this.data),this.render())}},{key:"updateSize",value:function(){if(!(!this.data||!this.wrapper)){var Xo=Math.min(this.wrapper.clientWidth,this.wrapper.clientHeight),Fo=this.data.bounding,Go=Fo.max,Vo=Fo.min,Wo=Go.x-Vo.x,Yo=Go.y-Vo.y,Ko=function(){return Wo>Yo?[Xo,Xo/Wo*Yo]:[Xo/Yo*Wo,Xo]}(),ts=No(Ko,2),Jo=ts[0],rs=ts[1];this.size={width:Jo,height:rs},this.pxmm=Jo/Wo}}},{key:"render",value:function(){if(!(!this.data||!this.pxmm||!this.wrapper)){!this.extraObjects&&this.orginExtraObjects&&(this.extraObjects=(0,Eo.formatExtraObjects)(this.orginExtraObjects,this.five,this.data));var Xo={pxmm:this.pxmm,five:this.five,width:this.size.width,height:this.size.height,floorplanData:this.data,extraObjects:this.extraObjects,hoverEnable:this.configs.hoverEnable,cameraImage:this.configs.cameraImage};wo.render(xo.createElement(bo.default,Do({},Xo,this.configs)),this.wrapper)}}}]),qo}();va.default=Qo})(Controller);(function(va){Object.defineProperty(va,"__esModule",{value:!0}),va.default=va.PanoFloorplanRadarPlugin=void 0;var _o=xo(Controller);function xo(Eo){return Eo&&Eo.__esModule?Eo:{default:Eo}}var bo=function(To,So){return new _o.default(To,So)};va.PanoFloorplanRadarPlugin=bo;var wo=bo;va.default=wo})(PanoFloorplanRadarPlugin$1);var PanoFloorplanRadarPlugin=getDefaultExportFromCjs(PanoFloorplanRadarPlugin$1),useFivePlugin$1={};Object.defineProperty(useFivePlugin$1,"__esModule",{value:!0});var useFivePlugin_2=useFivePlugin$1.useFivePlugin=useFivePlugin,_react=react;function useFivePlugin(va){var _o=(0,_react.unsafe__useFiveInstance)(),xo=_o.plugins[va];if(!xo)throw new Error('can not find plugin "'.concat(va,'"'));return xo}export{Five as F,PanoFloorplanRadarPlugin as P,ReactDOM$1 as R,TreasurePlugin as T,Vector3 as V,action as a,jsxs as b,classNames as c,useVreoPausedState_1 as d,useVreoAction_1 as e,observer as f,useFivePlugin_2 as g,Fragment as h,useFiveState as i,jsx as j,useFiveProject2d$1 as k,useFiveEventCallback as l,makeObservable as m,useVreoEventCallback_1 as n,observable as o,FiveCanvas as p,createFiveProvider as q,react$2 as r,parseWork as s,VreoProvider_1 as t,useFiveCurrentState as u};
